% ============================================================================
% CONSTRAINT STORY: halting_problem_undecidability
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Alan Turing (1936) / Computability Theory
% ============================================================================

:- module(constraint_halting_problem, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: halting_problem_undecidability
 * human_readable: The Halting Problem (Undecidability)
 * domain: technological/mathematical
 * temporal_scope: 1936 - Present (Civilizational)
 * spatial_scope: Global/Abstract (Universal Logic)
 * * SUMMARY:
 * The Halting Problem is the mathematical proof that no general algorithm can 
 * exist that decides whether an arbitrary program will eventually stop or 
 * run forever. It represents the ultimate boundary of what is "knowable" 
 * via computation, establishing an irreducible horizon for automated reason.
 * * KEY AGENTS:
 * - The Executing Thread (Subject): A powerless agent whose destiny is fixed 
 * by its transition function but whose end-state is uncomputable.
 * - The Software Verifier (Institutional): An agent attempting to coordinate 
 * system safety, forever haunted by the impossibility of perfect proofs.
 * - The Theoretical Observer (Analytical): An agent who maps the "Mountain" 
 * of undecidability to find the limits of formal systems.
 * * NARRATIVE ARC:
 * The Halting Problem is the "Mountain" of computational fate—it is an 
 * unyielding feature of any universal system. In logic, it is a "Rope" for 
 * proving the undecidability of other problems (via reduction). However, 
 * in the context of high-assurance engineering, it acts as a "Snare," 
 * extracting the possibility of absolute verification (extraction) and 
 * forcing humans to accept the "tax" of heuristic or manual testing.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for structural extraction
narrative_ontology:interval(halting_era, 1936, 2026).
narrative_ontology:constraint_claim(halting_problem_undecidability, mountain).

% Base extractiveness score (0.0-1.0)
% Rationale: 0.2. While it is a "gift" of clarity regarding limits, it 
% extracts the possibility of 100% automated software safety, imposing a 
% "tax" of human audit and uncertainty on all complex systems.
domain_priors:base_extractiveness(halting_problem_undecidability, 0.2).

% Suppression score (0.0-1.0)
% Rationale: 0.3. It suppresses the visibility of "totalitarian" formal 
% systems that claim to solve everything, rendering such claims 
% mathematically fraudulent.
domain_priors:suppression_score(halting_problem_undecidability, 0.3).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(halting_problem_undecidability, extractiveness, 0.2).
narrative_ontology:constraint_metric(halting_problem_undecidability, suppression_requirement, 0.3).

% Enforcement: Emerges naturally from the diagonal argument/self-reference.
domain_priors:emerges_naturally(halting_problem_undecidability).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(halting_problem_undecidability, computational_complexity_researchers).
constraint_beneficiary(halting_problem_undecidability, heuristic_security_vendors). % Job security through impossibility.
constraint_victim(halting_problem_undecidability, formal_verification_purists).
constraint_victim(halting_problem_undecidability, automated_malware_detectors).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE TURING MACHINE PROGRAM - Mountain
   --------------------------------------------------------------------------
   
   WHO: powerless - The program cannot "know" or "change" its own halt status.
   WHEN: immediate - True at every single step of the execution cycle.
   WHERE: trapped - Bound within its own instruction set.
   SCOPE: local - Immediate state-space transitions.
   
   WHY THIS CLASSIFICATION:
   For the executing code, the fact that its end-state is uncomputable from 
   within the system is a natural law. It is an unyielding Mountain; there is 
   no "exit" where a program can magically solve its own halting without 
   falling into the "Liar's Paradox" of Turing's diagonal proof.
   -------------------------------------------------------------------------- */


constraint_indexing:constraint_classification(
    halting_problem_undecidability,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE THEORETICAL COMPUTER SCIENTIST - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional - Power to define computational limits and standard proofs.
   WHEN: biographical - Planning a career or building a formal methodology.
   WHERE: mobile - Can apply the halting problem to various domains (Rice's Theorem, etc.).
   SCOPE: global - Universal applicability.
   
   WHY THIS CLASSIFICATION:
   For the researcher, the Halting Problem is a "Rope"—a functional 
   coordination tool. By mapping the "Mountain," they coordinate a 
   standard of achievement for what is *possible* to build, pulling 
   the field away from the "Snare" of impossible goals.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    halting_problem_undecidability,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE HIGH-ASSURANCE SYSTEMS ENGINEER - Snare
   --------------------------------------------------------------------------
   
   WHO: individual_moderate - Has agency to design but is bound by the theorem.
   WHEN: immediate - Facing a "Halt" or "Crash" bug that cannot be pre-detected.
   WHERE: constrained - The "exit" (absolute proof) is mathematically barred.
   SCOPE: national - Protecting critical power grids or aerospace.
   
   WHY THIS CLASSIFICATION:
   For the engineer, the theorem is a "Snare." It "strangles" the dream of 
   perfectly safe infrastructure. It extracts massive human labor (extraction) 
   by making automated verification incomplete, "choking" the ability to 
   guarantee that a system will never hang or fail in an unforeseen way.
   -------------------------------------------------------------------------- */


constraint_indexing:constraint_classification(
    halting_problem_undecidability,
    snare,
    context(
        agent_power(individual_moderate),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(national)
    )
) :- 
    domain_priors:base_extractiveness(halting_problem_undecidability, E),
    E >= 0.15,
    !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(halting_problem_tests).

test(multi_perspective_variance) :-
    % Program -> Mountain
    constraint_indexing:constraint_classification(halting_problem_undecidability, Type1, context(powerless, immediate, trapped, local)),
    % Scientist -> Rope
    constraint_indexing:constraint_classification(halting_problem_undecidability, Type2, context(institutional, biographical, mobile, global)),
    Type1 \= Type2.

test(verification_snare_penalty) :-
    % Engineers experience the extraction of certainty as a Snare.
    Context = context(individual_moderate, immediate, constrained, national),
    constraint_indexing:extractiveness_for_agent(halting_problem_undecidability, Context, Score),
    Score >= 0.2.

test(natural_emergence) :-
    domain_priors:emerges_naturally(halting_problem_undecidability).

:- end_tests(halting_problem_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * * 1. EXTRACTIVENESS SCORE (0.2):
 * Reasoning: It represents the "impossibility tax." It takes away the 
 * future of automated perfection but gives the foundation of logical 
 * reality. I chose 0.2 as a "moderate low" because while the math 
 * is a gift, the practical cost for high-stakes engineers is real.
 * * 2. PERSPECTIVE SELECTION:
 * Chose the Program (Subject), Scientist (User), and Engineer (Victim) 
 * to illustrate how a "Mountain" of logic is a "Rope" for theory but 
 * a "Snare" for practice.
 * * 3. OMEGA IDENTIFICATION:
 * Formalized the "Physical Church-Turing" uncertainty—whether our 
 * universe's laws actually allow for "Infinite Tape" or "Perfect Iteration."
 */

% YOUR OMEGAS HERE:
omega_variable(
    physical_computability_limit,
    "Is the 'Mountain' of the Halting Problem stable in a universe with finite resources (Scaffold)?",
    resolution_mechanism("Investigation into whether physical 'Hypercomputation' is possible at the Planck scale."),
    impact("If Yes: Halting might be a 'Rope' in future systems. If No: It is a permanent Mountain."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Total Functional Programming (e.g., Agda, Coq)
 * Viability: By restricting the language so all functions MUST terminate, 
 * the Halting Problem is bypassed.
 * Suppression: Often rejected for general-purpose programming because it 
 * "strangles" the utility of the system (it is not Turing-complete).
 * Evidence: Common in academic high-assurance research.
 * * ALTERNATIVE 2: Infinite-Time Turing Machines
 * Viability: Theoretical models where computation can continue past infinity.
 * Suppression: Currently suppressed by the "Mountain" of standard physics.
 * * CONCLUSION:
 * The existence of Alternative 1 proves that the "Snare" of the Halting Problem 
 * is the specific price we pay for the "Rope" of universal (Turing-complete) 
 * computing.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * * 1. Load: ?- [constraint_halting_problem].
 * 2. Multi-perspective: ?- multi_index_report(halting_problem_undecidability).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: hamiltonian_path_complexity
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: Graph Theory / Complexity Classes (NP-Complete)
% ============================================================================

:- module(constraint_hamiltonian_path_complexity, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: hamiltonian_path_complexity
 * human_readable: The Hamiltonian Path Constraint
 * domain: technological/mathematical
 * temporal_scope: Immediate to Historical
 * spatial_scope: Global (Abstract Math)
 * 
 * SUMMARY:
 * A Hamiltonian Path is a path in an undirected or directed graph that visits 
 * each vertex exactly once. Finding such a path is an NP-complete problem, 
 * meaning that while a solution is easy to verify, finding one is 
 * computationally exhaustive as the number of nodes increases.
 * 
 * KEY AGENTS:
 * - The Logistics Planner (Individual Powerless): Subject to the network's topology.
 * - The Network Architect (Institutional): Defines the edges and constraints of the network.
 * - The Mathematician (Analytical): Observes the problem's inherent complexity.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(hamiltonian_path_complexity, 0, 10).
narrative_ontology:constraint_claim(hamiltonian_path_complexity, mountain).

% Base extractiveness: 0.1.
% Pure math doesn't "extract" in a social sense, but the "brute force" 
% requirement extracts energy and time from the solver.
domain_priors:base_extractiveness(hamiltonian_path_complexity, 0.1).

% Suppression score: 0.2.
% Low suppression; the "dead ends" in the search are highly visible to the agent.
domain_priors:suppression_score(hamiltonian_path_complexity, 0.2).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(hamiltonian_path_complexity, extractiveness, 0.1).
narrative_ontology:constraint_metric(hamiltonian_path_complexity, suppression_requirement, 0.2).

% Enforcement: Emerges naturally from the mathematical properties of the graph.
domain_priors:emerges_naturally(hamiltonian_path_complexity).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(hamiltonian_path_complexity, cryptography_systems).
constraint_victim(hamiltonian_path_complexity, logistics_optimizers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE LOGISTICS PLANNER - Snare
   --------------------------------------------------------------------------
   WHO: powerless (Subject to the network's topology)
   WHEN: immediate (Deadline-driven delivery)
   WHERE: trapped (Must visit every node, cannot skip)
   
   WHY THIS CLASSIFICATION:
   For a planner with a fixed number of stops and a strict "visit-once" 
   requirement, the Hamiltonian constraint is a 'Snare'. As nodes are 
   added, the number of possible paths grows factorially ($N!$), 
   strangling their ability to find a valid route before the deadline.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    hamiltonian_path_complexity,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE NETWORK ARCHITECT - Rope
   --------------------------------------------------------------------------
   WHO: institutional (Defines the edges and constraints of the network)
   WHEN: historical (Designing systems for long-term use)
   WHERE: arbitrage (Can design the network to be more or less complex)
   
   WHY THIS CLASSIFICATION:
   For the network architect, Hamiltonian Path complexity is a 'Rope'. They
   can use their understanding of the problem to design networks that are
   either easily solvable (e.g., linear chains) or computationally hard,
   depending on the desired outcome (e.g., for cryptographic applications).
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    hamiltonian_path_complexity,
    rope,
    context(
        agent_power(institutional),
        time_horizon(historical),
        exit_options(arbitrage),
        spatial_scope(global)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE MATHEMATICIAN - Mountain
   --------------------------------------------------------------------------
   WHO: analytical (Observes the inherent complexity of the problem)
   WHEN: civilizational (A permanent law of computational complexity)
   WHERE: analytical (Universal law)
   
   WHY THIS CLASSIFICATION:
   The mathematician sees the P vs NP problem as the ultimate 'Mountain'. 
   The fact that Hamiltonian Path is NP-complete is an immutable 
   feature of the universe's logical geography. It is a boundary 
   that no amount of individual effort can circumvent.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    hamiltonian_path_complexity,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(civilizational),
        exit_options(analytical),
        spatial_scope(global)
    )
).

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(hamiltonian_path_complexity_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(hamiltonian_path_complexity, Type1, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(hamiltonian_path_complexity, Type2, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(hamiltonian_path_complexity, Type3, context(agent_power(analytical), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3,
    Type1 \= Type3.

:- end_tests(hamiltonian_path_complexity_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. INSTITUTIONAL PERSPECTIVE: Added 'The Network Architect' as the
 *    institutional agent. For them, Hamiltonian Path complexity is a 'Rope'
 *    to be manipulated in network design.
 *
 * 2. CLASSIFICATION RATIONALE:
 *    - Logistics Planner (Snare): Overwhelmed by computational complexity.
 *    - Network Architect (Rope): Can design networks to be more or less complex.
 *    - Mathematician (Mountain): An immutable law of computational complexity.
 * 
 * 3. CORE INSIGHT: The Hamiltonian Path problem is a classic 'Mountain' of
 *    computational complexity. While it represents a suffocating 'Snare' for
 *    those trying to solve it in real-time, it can be a useful 'Rope' for
 *    those who design the networks themselves.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * The core uncertainty is the fundamental nature of the P vs NP problem.
 */

omega_variable(
    p_vs_np_resolution,
    "Is P = NP? (Can an efficient algorithm find the Hamiltonian path in all cases?)",
    resolution_mechanism("Mathematical proof or counter-example, a major unsolved problem in computer science."),
    impact("If P=NP: The 'Mountain' turns into a 'Rope' (trivial coordination), with profound implications for cryptography and optimization. If P!=NP: The 'Mountain' remains."),
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */
/**
 * VIABLE ALTERNATIVES
 *
 * ALTERNATIVE 1: Heuristic Solutions / Approximation Algorithms
 *    Viability: Provides "good enough" solutions for many practical applications, such as logistics, without guaranteeing optimality.
 *    Suppression: Not actively suppressed, but acknowledged as a pragmatic workaround for the 'Mountain' of NP-completeness.
 *
 * CONCLUSION:
 * The existence of heuristic solutions acts as a 'Rope' for practical problem-solvers,
 * allowing them to navigate the 'Mountain' of computational complexity. However,
 * for problems requiring absolute certainty, the 'Mountain' remains an impassable barrier.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/hamiltonian_path_complexity].
 * 2. Multi-perspective: ?- multi_index_report(hamiltonian_path_complexity).
 * 3. Run tests: ?- run_tests(hamiltonian_path_complexity_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: hammurabi_lex_talionis
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-22
% ============================================================================

:- module(constraint_hammurabi_lex_talionis, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:coordination_type/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: hammurabi_lex_talionis
 * human_readable: The Law of Retaliation (Lex Talionis) in Hammurabi's Code
 * domain: political/social
 * * SUMMARY:
 * A rigid legal system from ancient Mesopotamia based on reciprocal justice ("an eye for an eye"),
 * where penalties are strictly stratified by social class. It enforces social
 * order through high-stakes physical and financial liability, providing stability
 * for commerce while cementing a severe class-based asymmetry.
 * * KEY AGENTS:
 * - The Slave (Wardu): Subject (Powerless), property status with minimal agency.
 * - The Gentleman (Amelu): Beneficiary (Powerful), elite with high protection but also high liability.
 * - The King (Hammurabi): Beneficiary (Institutional), source of enforcement.
 * - The Historian: Auditor (Analytical), observing the structure across millennia.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(hammurabi_lex_talionis, 0.50). % High enough for Snare/Tangled Rope, reflects functional stability.
domain_priors:suppression_score(hammurabi_lex_talionis, 0.80).   % Alternatives framed as rebellion; law is divinely ordained.
domain_priors:theater_ratio(hammurabi_lex_talionis, 0.10).       % Highly functional, not performative.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(hammurabi_lex_talionis, extractiveness, 0.50).
narrative_ontology:constraint_metric(hammurabi_lex_talionis, suppression_requirement, 0.80).
narrative_ontology:constraint_metric(hammurabi_lex_talionis, theater_ratio, 0.10).

% Constraint self-claim: The code claims to be divine, immutable law.
narrative_ontology:constraint_claim(hammurabi_lex_talionis, natural_law).

% Binary flags & structural properties
domain_priors:requires_active_enforcement(hammurabi_lex_talionis). % Requires state-level execution/mutilation.
narrative_ontology:constraint_beneficiary(hammurabi_lex_talionis, amelu_class). % Derives has_coordination_function/1
narrative_ontology:constraint_victim(hammurabi_lex_talionis, wardu_class). % Derives has_asymmetric_extraction/1

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SLAVE (SNARE)
% Subject to physical mutilation with zero exit options. The law is a trap.
constraint_indexing:constraint_classification(hammurabi_lex_talionis, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE GENTLEMAN/AMELU (ROPE)
% For the elite, the law is a coordination mechanism protecting property and
% providing predictable outcomes. Extraction is felt as a reasonable cost.
% χ = 0.50 * π(powerful:0.6) * σ(regional:0.9) = 0.27 (<= 0.35 Rope threshold)
constraint_indexing:constraint_classification(hammurabi_lex_talionis, rope,
    context(agent_power(powerful),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(regional))).

% PERSPECTIVE 3: THE KING/INSTITUTION (ROPE)
% From the perspective of the state, the law is pure coordination infrastructure.
% The institutional power modifier makes effective extraction negative.
constraint_indexing:constraint_classification(hammurabi_lex_talionis, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(national))).

% PERSPECTIVE 4: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The system has a genuine coordination function (stability) but also
% clear asymmetric extraction and requires active enforcement. This is the
% canonical definition of a Tangled Rope.
constraint_indexing:constraint_classification(hammurabi_lex_talionis, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(hammurabi_lex_talionis_tests).

test(perspectival_gap_slave_vs_king) :-
    constraint_indexing:constraint_classification(hammurabi_lex_talionis, TypeSlave,
        context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(hammurabi_lex_talionis, TypeKing,
        context(agent_power(institutional), _, _, _)),
    assertion(TypeSlave == snare),
    assertion(TypeKing == rope),
    assertion(TypeSlave \= TypeKing).

test(analytical_classification_is_tangled_rope) :-
    constraint_indexing:constraint_classification(hammurabi_lex_talionis, TypeAnalytical,
        context(agent_power(analytical), _, _, _)),
    assertion(TypeAnalytical == tangled_rope).

:- end_tests(hammurabi_lex_talionis_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base scores reflect a system that is both functional and brutal.
 * Extractiveness (0.50) is moderate because the code imposes severe liability
 * on the powerful (e.g., a builder is killed if their house collapses and kills
 * the owner), providing genuine stability. Suppression (0.80) is high as the
 * law is presented as divine and immutable. The key insight is the perspectival
 * gap: it is a Snare for a slave, a Rope for the elite, but structurally a
 * Tangled Rope for the analytical observer. The system's claim to be
 * `natural_law` (a Mountain) is falsified by the analysis, which reveals its
 * constructed, extractive nature.
 *
 * MANDATROPHY ANALYSIS:
 * Classifying this as a Tangled Rope is critical. A pure Snare classification
 * would miss the genuine coordination function that allowed Babylonian society
 * to flourish. A pure Rope classification would ignore the brutal, asymmetric
 * extraction imposed on the lower classes. The Tangled Rope classification
 * correctly identifies the constraint's dual nature, preventing mislabeling
 * and providing a more accurate model of how such systems persist.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_hammurabi,
    'To what extent was the Code a codification of existing customary law versus a top-down imposition of royal power?',
    'Archaeological evidence of pre-Code legal rulings and contracts from different social strata.',
    'If mostly customary, it functioned more like a Rope that was later formalized. If mostly imposed, it was a constructed Snare from the outset.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(hammurabi_lex_talionis, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This was a highly stable, codified system. The metrics are modeled as
% constant across its effective lifecycle, showing no significant drift after
% its establishment.

% Theater ratio over time (stable and low):
narrative_ontology:measurement(hlt_tr_t0, hammurabi_lex_talionis, theater_ratio, 0, 0.10).
narrative_ontology:measurement(hlt_tr_t5, hammurabi_lex_talionis, theater_ratio, 5, 0.10).
narrative_ontology:measurement(hlt_tr_t10, hammurabi_lex_talionis, theater_ratio, 10, 0.10).

% Extraction over time (stable):
narrative_ontology:measurement(hlt_ex_t0, hammurabi_lex_talionis, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(hlt_ex_t5, hammurabi_lex_talionis, base_extractiveness, 5, 0.50).
narrative_ontology:measurement(hlt_ex_t10, hammurabi_lex_talionis, base_extractiveness, 10, 0.50).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type: The code is a foundational legal framework.
narrative_ontology:coordination_type(hammurabi_lex_talionis, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: hanlons_razor
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-09
% ============================================================================

:- module(constraint_hanlons_razor, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: hanlons_razor
 * human_readable: Hanlon's Razor ("Never attribute to malice that which is adequately explained by stupidity.")
 * domain: social/cognitive
 * * SUMMARY:
 * Hanlon's Razor is a heuristic that constrains how we model the intentions of others. It suggests incompetence is a more frequent cause of negative outcomes than coordinated malevolence. While it serves a coordination function by reducing social friction and preventing cycles of retaliation, it can also be used by institutions to extract accountability, framing systemic harm as isolated, unavoidable mistakes.
 * * KEY AGENTS:
 * - The Marginalized Victim: Subject to systemic harm framed as "incompetence." (Powerless)
 * - The Bureaucracy: Uses the razor to manage public relations and deflect accountability. (Institutional)
 * - The Systems Analyst: Observes the dual function of the heuristic. (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(hanlons_razor, 0.55). % Mountain <= 0.15, Rope <= 0.15, Snare/Tangled Rope >= 0.46
domain_priors:suppression_score(hanlons_razor, 0.40).   % Structural property (raw, unscaled). The razor suppresses malice-based hypotheses.
domain_priors:theater_ratio(hanlons_razor, 0.10).       % Piton detection (>= 0.70). The heuristic is primarily functional, not theatrical.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(hanlons_razor, extractiveness, 0.55).
narrative_ontology:constraint_metric(hanlons_razor, suppression_requirement, 0.40).
narrative_ontology:constraint_metric(hanlons_razor, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% It claims to be a tool for rational coordination.
narrative_ontology:constraint_claim(hanlons_razor, coordination).

% Binary flags
domain_priors:requires_active_enforcement(hanlons_razor). % Required for Tangled Rope. Enforcement is social/cultural pressure.

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
narrative_ontology:constraint_beneficiary(hanlons_razor, incompetent_actors).
narrative_ontology:constraint_victim(hanlons_razor, victims_of_systemic_neglect).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For a victim of systemic harm, the razor is a Snare. It invalidates their
% experience and strangles their ability to demand accountability by reframing
% systemic malice or neglect as a series of isolated, forgivable "mistakes."
% χ = 0.55 * 1.5 (powerless) * 1.0 (national) = 0.825
constraint_indexing:constraint_classification(hanlons_razor, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For an institution, the razor is a Rope. It's a powerful public relations tool
% to coordinate a narrative of "unfortunate error" rather than "systemic failure,"
% preserving institutional legitimacy and avoiding costly reforms.
% χ = 0.55 * -0.2 (institutional) * 1.0 (national) = -0.11 (felt as a benefit)
constraint_indexing:constraint_classification(hanlons_razor, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees both sides. The razor is a coordination tool (Rope) that
% reduces social friction, but it also enables asymmetric extraction of
% accountability (Snare), making it a classic Tangled Rope.
% χ = 0.55 * 1.15 (analytical) * 1.2 (global) = 0.759
constraint_indexing:constraint_classification(hanlons_razor, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(hanlons_razor_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(hanlons_razor, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(hanlons_razor, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(threshold_validation) :-
    % Verify the base extraction is in the high-extraction range for a Tangled Rope.
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(hanlons_razor, ExtMetricName, E),
    E >= 0.46.

test(tangled_rope_structural_properties) :-
    % Verify the necessary structural properties for a Tangled Rope are present.
    domain_priors:requires_active_enforcement(hanlons_razor),
    narrative_ontology:constraint_beneficiary(hanlons_razor, _),
    narrative_ontology:constraint_victim(hanlons_razor, _).

:- end_tests(hanlons_razor_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness is set to 0.55 to reflect the significant value of
 * "accountability" that is extracted from victims and transferred to institutions.
 * When a systemic failure causing harm is framed as "stupidity," the institution
 * avoids the cost of reform, litigation, and loss of legitimacy. This high
 * extraction is what creates the sharp perspectival gap: the institution sees
 * a useful coordination tool (Rope), while the victim experiences a trap that
 * denies them justice (Snare). The suppression score of 0.4 reflects the
 * heuristic's power in making alternative explanations (i.e., systemic malice
 * or deliberate neglect) seem paranoid or unreasonable.
 *
 * * MANDATROPHY ANALYSIS:
 * Classifying this as a Tangled Rope is critical. A naive analysis might see
 * only the Snare aspect (harm to victims) or only the Rope aspect (social
 * lubrication). The Tangled Rope classification correctly identifies that the
 * constraint's power comes from its dual nature: the socially useful coordination
 * function provides plausible deniability for its extractive function. This
 * prevents mislabeling the entire heuristic as pure extraction, acknowledging
 * its genuine, if weaponized, coordination role.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_hanlons_razor,
    "Is there an inherent, information-theoretic limit to distinguishing high-entropy incompetence from low-signal, systemic malice?",
    "Analysis of institutional failure modes across domains (e.g., finance, engineering, policy) to find statistical signatures of intent vs. incompetence.",
    "If a limit exists, the constraint has a Mountain-like core. If not, it is a purely constructed Tangled Rope that can be dismantled with better analytical tools.",
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(hanlons_razor, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data for this high-extraction constraint shows how the heuristic,
% once a simple observation, became an institutionalized tool for evading
% accountability. Extraction accumulates as its use becomes more strategic.

% Theater ratio over time (slight increase as it becomes a performative defense):
narrative_ontology:measurement(hanlons_razor_tr_t0, hanlons_razor, theater_ratio, 0, 0.05).
narrative_ontology:measurement(hanlons_razor_tr_t5, hanlons_razor, theater_ratio, 5, 0.08).
narrative_ontology:measurement(hanlons_razor_tr_t10, hanlons_razor, theater_ratio, 10, 0.10).

% Extraction over time (increases as institutions learn to weaponize it):
narrative_ontology:measurement(hanlons_razor_ex_t0, hanlons_razor, base_extractiveness, 0, 0.48).
narrative_ontology:measurement(hanlons_razor_ex_t5, hanlons_razor, base_extractiveness, 5, 0.52).
narrative_ontology:measurement(hanlons_razor_ex_t10, hanlons_razor, base_extractiveness, 10, 0.55).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% Hanlon's Razor functions as a standard for interpreting information about intent.
narrative_ontology:coordination_type(hanlons_razor, information_standard).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: happiness_of_others
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-27
% ============================================================================

:- module(constraint_happiness_of_others, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: happiness_of_others
 * human_readable: The Social Responsibility for the Happiness of Others
 * domain: social/psychological
 * * SUMMARY:
 * This constraint models the social norm that one is responsible for, and can directly cause, the happiness of another person.
 * The narrative argues this is a fallacy; one can only create the *conditions* for happiness. The attempt to directly engineer another's emotional state is an extractive trap, draining the "helper" and disempowering the "helped."
 * * KEY AGENTS:
 * - The Crucified: An individual in a state of extreme suffering, for whom happiness is an impossible choice. (Subject)
 * - The Obsessive Caretaker: An individual who attempts to force happiness on another, becoming a victim of the constraint.
 * - The Therapy Practice: An institution that provides structured support for well-being, benefiting from a clear boundary of responsibility. (Beneficiary)
 * - The Systems Analyst: An observer analyzing the dynamics of codependency and agency. (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(happiness_of_others, 0.75). % Attempting to "make" others happy extracts the total energy of the helper.
domain_priors:suppression_score(happiness_of_others, 0.50).   % Suppresses the alternative view of individual emotional sovereignty.
domain_priors:theater_ratio(happiness_of_others, 0.15).       % The actions are genuine, not performative, but misguided.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(happiness_of_others, extractiveness, 0.75).
narrative_ontology:constraint_metric(happiness_of_others, suppression_requirement, 0.50).
narrative_ontology:constraint_metric(happiness_of_others, theater_ratio, 0.15).

% Constraint self-claim (what does the constraint claim to be?)
% It claims to be a form of social coordination (mutual care).
narrative_ontology:constraint_claim(happiness_of_others, coordination).

% Binary flags
% The social norm requires active enforcement through praise, guilt, and expectation.
domain_priors:requires_active_enforcement(happiness_of_others).

% Structural property derivation hooks:
% Beneficiaries (therapists, self-sufficient individuals) use the boundary for coordination.
narrative_ontology:constraint_beneficiary(happiness_of_others, therapy_practices).
narrative_ontology:constraint_beneficiary(happiness_of_others, individuals_with_strong_boundaries).
% Victims are those trapped in codependent relationships.
narrative_ontology:constraint_victim(happiness_of_others, obsessive_caretakers).
narrative_ontology:constraint_victim(happiness_of_others, enmeshed_family_members).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT ("THE CRUCIFIED") - MOUNTAIN
% For someone in extreme suffering, the unavailability of happiness is an immutable law.
% χ = 0.75 * π(powerless:1.5) * σ(local:0.8) = 0.90
constraint_indexing:constraint_classification(happiness_of_others, mountain,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (THERAPY PRACTICE) - ROPE
% For a therapist, the boundary of responsibility is a pure coordination tool.
% χ = 0.75 * π(institutional:-0.2) * σ(regional:0.9) = -0.135 (Effective extraction is negative/beneficial)
constraint_indexing:constraint_classification(happiness_of_others, rope,
    context(agent_power(institutional),
            time_horizon(biographical),
            exit_options(arbitrage),
            spatial_scope(regional))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER - TANGLED ROPE
% The analyst sees both the coordination function (maintaining boundaries) and the
% asymmetric extraction from those who don't respect them.
% χ = 0.75 * π(analytical:1.15) * σ(global:1.2) = 1.035
constraint_indexing:constraint_classification(happiness_of_others, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(happiness_of_others_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(happiness_of_others, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(happiness_of_others, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == mountain,
    TypeInstitutional == rope.

test(analytical_classification_is_tangled_rope) :-
    % The analytical view must resolve the conflict into a Tangled Rope.
    constraint_indexing:constraint_classification(happiness_of_others, tangled_rope, context(agent_power(analytical), _, _, _)).

test(threshold_validation) :-
    % Verify this is a high-extraction constraint.
    narrative_ontology:constraint_metric(happiness_of_others, extractiveness, E),
    E >= 0.46.

:- end_tests(happiness_of_others_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness (0.75) is high because the attempt to control another's happiness is a totalizing, energy-draining endeavor for the caretaker.
 * The suppression score (0.5) reflects the societal pressure to engage in this behavior, suppressing the alternative of radical personal autonomy.
 *
 * The Perspectival Gap is stark:
 * - For the 'Crucified' (powerless, trapped), the absence of happiness is a physical law, an unchangeable Mountain.
 * - For a Therapy Practice (institutional, arbitrage), the principle "you can't make others happy" is a foundational Rope. It coordinates the therapeutic relationship, defines professional boundaries, and prevents burnout.
 * - The Analytical observer sees the whole system: a well-meaning social norm that functions as a Rope for the psychologically sophisticated but becomes a brutal Snare for codependents. This dual nature makes it a canonical Tangled Rope.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The Tangled Rope classification is critical. A simpler analysis might label the constraint a Snare (for the caretaker) or a Rope (for the therapist). By classifying it as a Tangled Rope, the system acknowledges that the *same principle* has both a valid coordination function (boundary setting) and a severe, asymmetric extraction mechanism (codependency). This prevents mislabeling the entire structure as purely malicious or purely beneficial.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_happiness_of_others,
    "Is the inability to 'make' others happy a hard biological limit (Mountain) or an emergent social boundary (Rope) evolved to preserve individual sovereignty and prevent codependency?",
    "Comparative psychological studies of autonomy vs. happiness in dyads, combined with neurological studies on empathy vs. emotional contagion.",
    "If it's a hard limit, the constraint is a Mountain of physics. If it's an evolved boundary, it's a Rope of social structure, and attempts to violate it create a Snare.",
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(happiness_of_others, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This social norm is modeled as starting with high extraction (codependent assumptions)
% and slightly intensifying before the "boundary" insight becomes more widespread.
% Theater is low because the effort is genuine, not performative.

% Theater ratio over time:
narrative_ontology:measurement(happiness_of_others_tr_t0, happiness_of_others, theater_ratio, 0, 0.10).
narrative_ontology:measurement(happiness_of_others_tr_t5, happiness_of_others, theater_ratio, 5, 0.12).
narrative_ontology:measurement(happiness_of_others_tr_t10, happiness_of_others, theater_ratio, 10, 0.15).

% Extraction over time:
narrative_ontology:measurement(happiness_of_others_ex_t0, happiness_of_others, base_extractiveness, 0, 0.70).
narrative_ontology:measurement(happiness_of_others_ex_t5, happiness_of_others, base_extractiveness, 5, 0.72).
narrative_ontology:measurement(happiness_of_others_ex_t10, happiness_of_others, base_extractiveness, 10, 0.75).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The coordination type is an enforcement mechanism for social boundaries.
narrative_ontology:coordination_type(happiness_of_others, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: harm_principle_liberty
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_harm_principle_liberty, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: harm_principle_liberty
 * human_readable: Mill's Harm Principle as a Social Constraint
 * domain: political/social
 * * SUMMARY:
 * John Stuart Mill's "On Liberty" proposes the Harm Principle as a meta-constraint:
 * society may only coerce an individual to prevent harm to others. This story
 * models the "tyranny of the majority" and the "despotism of custom" that the
 * principle is designed to regulate. The constraint is the social pressure for
 * conformity itself, which Mill's principle attempts to frame as a coordination
 * mechanism (a Rope) but which is often experienced as a coercive trap (a Snare).
 * * KEY AGENTS:
 * - The Non-Conformist: Subject (Powerless) victim of social stigma.
 * - The Majority (Public Opinion): Institutional enforcer of custom.
 * - The Liberal Statesman: Analytical observer attempting to apply the principle.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
% Extraction: Society extracts conformity and a "fair share" of burdens for
% collective security. This is significant but not totalizing.
domain_priors:base_extractiveness(harm_principle_liberty, 0.50).
% Suppression: Mill argues the "despotism of custom" is a powerful force that
% suppresses originality and experiments in living.
domain_priors:suppression_score(harm_principle_liberty, 0.80).
% Theater: The principle is largely functional, not performative.
domain_priors:theater_ratio(harm_principle_liberty, 0.10).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(harm_principle_liberty, extractiveness, 0.50).
narrative_ontology:constraint_metric(harm_principle_liberty, suppression_requirement, 0.80).
narrative_ontology:constraint_metric(harm_principle_liberty, theater_ratio, 0.10).

% Constraint self-claim: The principle claims to be a pure coordination rule for liberty.
narrative_ontology:constraint_claim(harm_principle_liberty, coordination).

% Binary flags
% Enforcement is required both by law (for direct harm) and "moral repression"
% (for social custom). This is a key condition for Tangled Rope.
domain_priors:requires_active_enforcement(harm_principle_liberty).

% Structural property derivation hooks:
% The system has a clear coordination function (social stability) and
% asymmetric extraction (stifling of eccentrics).
narrative_ontology:constraint_beneficiary(harm_principle_liberty, collective_stability).
narrative_ontology:constraint_victim(harm_principle_liberty, eccentrics_and_innovators).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE NON-CONFORMIST (SNARE)
% For the eccentric individual, social custom is a coercive trap. The high
% suppression and extraction are felt directly, with no viable exit.
constraint_indexing:constraint_classification(harm_principle_liberty, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE MAJORITY (MOUNTAIN)
% For the institutional power of the majority, custom is not a choice but a
% self-evident law of nature. It is an unchangeable feature of the social world.
constraint_indexing:constraint_classification(harm_principle_liberty, mountain,
    context(agent_power(institutional),
            time_horizon(civilizational),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees both the coordination function (preventing harm) and the
% asymmetric extraction (suppressing non-conformity). It requires active
% enforcement and has clear beneficiaries and victims, making it a Tangled Rope.
constraint_indexing:constraint_classification(harm_principle_liberty, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(harm_principle_liberty_tests).

test(perspectival_gap) :-
    % Verify the gap between the Non-Conformist (Snare), the Majority (Mountain),
    % and the Analyst (Tangled Rope).
    constraint_indexing:constraint_classification(harm_principle_liberty, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(harm_principle_liberty, mountain, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(harm_principle_liberty, tangled_rope, context(agent_power(analytical), _, _, _)).

test(tangled_rope_structural_properties) :-
    % Verify that all three conditions for a Tangled Rope are met.
    domain_priors:requires_active_enforcement(harm_principle_liberty),
    narrative_ontology:constraint_beneficiary(harm_principle_liberty, _),
    narrative_ontology:constraint_victim(harm_principle_liberty, _).

test(threshold_validation_high_extraction) :-
    narrative_ontology:constraint_metric(harm_principle_liberty, extractiveness, E),
    E >= 0.46.

:- end_tests(harm_principle_liberty_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The core of Mill's analysis is the perspectival gap. What the majority
 * experiences as an invisible, natural "Mountain" of custom is felt by the
 * non-conformist as a highly coercive "Snare." The base extractiveness (0.50)
 * reflects Mill's admission that society can demand "labour and sacrifices"
 * for collective defense. The high suppression (0.80) reflects his warning
 * about the "despotism of custom" being as powerful as law.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * Classifying this as a Tangled Rope from the analytical perspective is
 * crucial. A naive analysis might see only the coordination function and
 * label it a Rope, or see only the coercion and label it a Snare. The
 * Tangled Rope classification correctly identifies that it is *both*: a
 * necessary coordination mechanism that carries an inherent, asymmetric
 * cost of suppressing individuality. This prevents misclassification and
 * captures the central tension of liberal governance.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_harm_principle_liberty,
    "Where is the boundary between 'self-regarding' and 'other-regarding' acts in a hyper-connected, interdependent society?",
    "Empirical analysis of network effects and externalities of seemingly private actions (e.g., public health choices, financial decisions).",
    "If the boundary is highly porous, the principle's scope for liberty shrinks, and it functions more like a Snare. If the boundary is firm, it functions more like a Rope.",
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(harm_principle_liberty, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data for this high-extraction constraint models a slight increase
% in both extraction and performative aspects over time, as social norms
% become more entrenched and their original justifications fade.

% Theater ratio over time (metric_substitution):
narrative_ontology:measurement(harm_principle_liberty_tr_t0, harm_principle_liberty, theater_ratio, 0, 0.05).
narrative_ontology:measurement(harm_principle_liberty_tr_t5, harm_principle_liberty, theater_ratio, 5, 0.08).
narrative_ontology:measurement(harm_principle_liberty_tr_t10, harm_principle_liberty, theater_ratio, 10, 0.10).

% Extraction over time (extraction_accumulation):
narrative_ontology:measurement(harm_principle_liberty_ex_t0, harm_principle_liberty, base_extractiveness, 0, 0.45).
narrative_ontology:measurement(harm_principle_liberty_ex_t5, harm_principle_liberty, base_extractiveness, 5, 0.48).
narrative_ontology:measurement(harm_principle_liberty_ex_t10, harm_principle_liberty, base_extractiveness, 10, 0.50).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The Harm Principle functions as a high-level rule governing other rules,
% making it a form of enforcement mechanism for a liberal social order.
narrative_ontology:coordination_type(harm_principle_liberty, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: hawthorne_effect
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Psychometrics / Industrial Psychology / Hawthorne Works Study (1924-1932)
% ============================================================================

:- module(constraint_hawthorne_effect, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: hawthorne_effect
 * human_readable: The Hawthorne Effect (Observer Effect)
 * domain: social
 * temporal_scope: Modern Era (1924 - Present)
 * spatial_scope: Global (Institutional/Organizational)
 * * SUMMARY:
 * The Hawthorne Effect is a type of reactivity in which individuals modify an aspect 
 * of their behavior in response to their awareness of being observed. Originally 
 * discovered during productivity studies at the Western Electric Hawthorne Works, 
 * it represents a fundamental limit on the ability to gather "neutral" data on 
 * human social systems.
 * * KEY AGENTS:
 * - The Researcher: Analytical observer attempting to measure "natural" productivity.
 * - The Factory Manager: Institutional agent using the "gaze" to drive output.
 * - The Monitored Worker: Individual powerless agent whose behavior is warped by the observer.
 * * NARRATIVE ARC:
 * An organization introduces an observer to "improve" a system. The observer 
 * acts as a "Rope" for management to pull more effort from the workers. However, 
 * for the worker, the gaze becomes a "Snare" of performance anxiety and 
 * inauthenticity. Ultimately, the effect is revealed as a "Mountain"—an 
 * inescapable psychological law where the act of measurement inevitably 
 * changes the thing being measured.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for [STEP 1] and [STEP 2] of the DR-Audit Suite
narrative_ontology:interval(hawthorne_interval, 0, 10).
narrative_ontology:constraint_claim(hawthorne_effect, snare).

% Base extractiveness score (0.0-1.0)
% Rationale: Moderate (0.4). The effect extracts "authentic behavior" and 
% additional labor/effort through the psychological pressure of the gaze.
domain_priors:base_extractiveness(hawthorne_effect, 0.4).

% Suppression score (0.0-1.0)
% Rationale: Moderate (0.5). It suppresses the "Natural State." Once an 
% observer is present, the alternative—how the worker behaves when alone—is 
% rendered conceptually and empirically invisible.
domain_priors:suppression_score(hawthorne_effect, 0.5).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(hawthorne_effect, extractiveness, 0.4).
narrative_ontology:constraint_metric(hawthorne_effect, suppression_requirement, 0.5).

% Enforcement: Emerges naturally from human social cognition.
domain_priors:emerges_naturally(hawthorne_effect).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(hawthorne_effect, [management, study_leads]).
constraint_victim(hawthorne_effect, [monitored_subjects, experimental_integrity]).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE RESEARCHER - Mountain
   --------------------------------------------------------------------------
   
   WHO: analytical - Observer of social phenomena.
   WHEN: civilizational - Viewing human psychology as a fixed substrate.
   WHERE: analytical - Not personally constrained by the productivity quota.
   SCOPE: global - Applies to all human observation.
   
   WHY THIS CLASSIFICATION:
   To the scientist, the effect is a Mountain. It is an unchangeable 
   epistemological limit. No matter how much you "standardize" the lab, 
   the presence of the scientist creates a fixed peak of bias that 
   cannot be leveled, only accounted for.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    hawthorne_effect,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(civilizational),
        exit_options(analytical),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE CORPORATE SUPERVISOR - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional - Rule-making power within the firm.
   WHEN: biographical - Managing a plant's output over a career.
   WHERE: arbitrage - Can decide when to introduce or withdraw observation.
   SCOPE: regional - Within the specific factory or department.
   
   WHY THIS CLASSIFICATION:
   For management, the effect is a Rope. It is a coordination mechanism 
   used to "nudge" behavior. By simply placing a supervisor on the floor 
   or announcing a "study," they pull the workforce toward higher 
   productivity without needing to change wages or hardware.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    hawthorne_effect,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(arbitrage),
        spatial_scope(regional)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE FLOOR WORKER - Snare
   --------------------------------------------------------------------------
   
   WHO: powerless - Subject to the gaze and the quota.
   WHEN: immediate - The 8-hour shift under the clipboard.
   WHERE: trapped - Cannot leave the workstation or hide from the gaze.
   SCOPE: local - The immediate workbench.
   
   WHY THIS CLASSIFICATION:
   For the worker, the effect is a Snare. The awareness of being 
   watched creates an involuntary "tightening" of performance. They 
   cannot relax into their natural rhythm; the gaze extracts extra 
   vitality and focus, strangling their autonomy and mental peace 
   until the observer leaves.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    hawthorne_effect,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(hawthorne_effect_tests).

test(multi_perspective_variance) :-
    % Analyst sees Mountain
    constraint_indexing:constraint_classification(hawthorne_effect, mountain, context(analytical, civilizational, analytical, global)),
    % Institutional sees Rope
    constraint_indexing:constraint_classification(hawthorne_effect, rope, context(institutional, biographical, arbitrage, regional)),
    % Powerless sees Snare
    constraint_indexing:constraint_classification(hawthorne_effect, snare, context(powerless, immediate, trapped, local)).

test(power_extractiveness_gaze) :-
    % Powerless individuals feel the extraction of their "authentic self" (Snare).
    % Institutions use the gaze to manage throughput (Rope).
    ContextPowerless = context(powerless, immediate, trapped, local),
    ContextPowerful = context(institutional, biographical, arbitrage, regional),
    constraint_indexing:extractiveness_for_agent(hawthorne_effect, ContextPowerless, Score1),
    constraint_indexing:extractiveness_for_agent(hawthorne_effect, ContextPowerful, Score2),
    Score1 > Score2.

test(time_immutability_psychology) :-
    % Over biographical time, the worker is trapped (Snare).
    % Over civilizational time, it is a Law of Nature (Mountain).
    constraint_indexing:effective_immutability(civilizational, trapped, mountain).

:- end_tests(hawthorne_effect_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * * 1. EXTRACTIVENESS SCORE (0.4):
 * Reasoning: It is a "soft" extraction. It doesn't steal money directly, 
 * but it extracts psychological energy and authentic agency.
 * * 2. PERSPECTIVE SELECTION:
 * Analyzed from the Scientist (Hardware limit), Manager (Strategic tool), 
 * and Worker (Psychological trap) to show the indexical range.
 * * 3. CLASSIFICATION RATIONALE:
 * Analytical → Mountain: It is a law of physics for social systems.
 * Institutional → Rope: It is a low-cost coordination tool.
 * Powerless → Snare: It is a restrictive performance trap.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    observation_latency,
    "How long does it take for a subject to 'habituate' and return to 
    natural behavior, effectively untying the Snare (Rope)?",
    resolution_mechanism("Longitudinal study of 24/7 surveillance vs. intermittent observation"),
    impact("If Habituation is fast: The effect is a weak Rope. If slow: It is a permanent Snare."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Covert Observation (Surreptitious Monitoring)
 * Viability: Theoretically allows for the gathering of neutral data.
 * Suppression: High. Actively suppressed by modern ethics boards (IRB) 
 * and privacy laws.
 * Evidence: The shift from "secret" studies to "informed consent" requirements.
 * * CONCLUSION:
 * The existence of a "Natural State" that is only accessible through 
 * suppressed/unethical means confirms that for the modern subject, the 
 * Hawthorne Effect is a Snare—you are denied the exit into unobserved 
 * reality by the rules of the system.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 1. Load: ?- [constraint_hawthorne_effect].
 * 2. Multi-perspective: ?- multi_index_report(hawthorne_effect).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: hegemonic_entropy_2026
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2026-02-02
% Scenario: The asymmetric fragility of global order vs. internal rot.
% ============================================================================

:- module(constraint_hegemonic_entropy_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: hegemonic_entropy_2026
 * human_readable: The Asymmetry of Hegemonic Decay
 * domain: economic/political
 * * SUMMARY:
 * The global order, once a tool for broad coordination, has shifted toward 
 * asymmetric extraction via Cantillon effects and tax havens. This creates 
 * a "Piton" effect where institutions maintain the theater of stability 
 * while the underlying social contract rots, leading to populism and fragmentation.
 * * KEY AGENTS:
 * - The Fragmented Middle Class: Subject (Powerless) - Viewing the system as a Snare.
 * - The Cantillon Insiders: Beneficiary (Institutional) - Viewing the system as a Rope.
 * - The Macro-Historian: Auditor (Analytical) - Detecting the Piton/Inertia.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
% Extraction is high (0.72) due to wealth concentration at the top.
domain_priors:base_extractiveness(hegemonic_entropy_2026, 0.72). 

% Suppression of alternatives is moderate but high-impact at national scales.
domain_priors:suppression_score(hegemonic_entropy_2026, 0.55).   

% Theater ratio is high (0.78), indicating institutional inertia (Piton).
domain_priors:theater_ratio(hegemonic_entropy_2026, 0.78).       

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(hegemonic_entropy_2026, extractiveness, 0.72).
narrative_ontology:constraint_metric(hegemonic_entropy_2026, suppression_requirement, 0.55).
narrative_ontology:constraint_metric(hegemonic_entropy_2026, theater_ratio, 0.78).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The powerless middle class experiences the "King Dollar" siege as a predatory trap.
constraint_indexing:constraint_classification(hegemonic_entropy_2026, snare, 
    context(agent_power(powerless), 
            time_horizon(biographical), 
            exit_options(trapped), 
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Institutional elites see frictionless shipping and tax havens as essential coordination.
constraint_indexing:constraint_classification(hegemonic_entropy_2026, rope, 
    context(agent_power(institutional), 
            time_horizon(generational), 
            exit_options(mobile), 
            spatial_scope(global))).

% PERSPECTIVE 3: THE SYSTEMS AUDITOR (PITON)
% Analytical detection of a non-functional, inertial constraint.
% [RESOLVED MANDATROPHY]: The theater ratio > 0.70 confirms the Piton classification.
constraint_indexing:constraint_classification(hegemonic_entropy_2026, piton, 
    context(agent_power(analytical), 
            time_horizon(historical), 
            exit_options(analytical), 
            spatial_scope(universal))) :-
    domain_priors:theater_ratio(hegemonic_entropy_2026, TR), TR > 0.70.

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(hegemonic_entropy_2026_tests).

test(perspectival_gap) :-
    % Verify the gap between the victim (Snare) and the insider (Rope).
    constraint_indexing:constraint_classification(hegemonic_entropy_2026, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(hegemonic_entropy_2026, rope, context(agent_power(institutional), _, _, _)).

test(piton_verification) :-
    % Ensure the high theater ratio triggers Piton status for auditors.
    constraint_indexing:constraint_classification(hegemonic_entropy_2026, piton, context(agent_power(analytical), _, _, _)).

:- end_tests(hegemonic_entropy_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The "Perspectival Gap" here is driven by the Cantillon Effect. For those near 
 * the money spigot, the constraint is a "Rope" that facilitates global 
 * commerce. For the periphery, it is a "Snare" because the benefits of 
 * coordination are stripped away by extraction.
 * * MANDATROPHY ANALYSIS:
 * [RESOLVED MANDATROPHY]: The extraction score (0.72) is high enough to 
 * suggest the system should collapse, yet it persists through "Theater." 
 * The Piton classification prevents us from assuming the system is 
 * still providing genuine coordination to the majority.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% Required for high-extraction constraints (> 0.46)
omega_variable(
    omega_entropy_reversibility,
    'Is the stagnation of King Dollar a reversible policy error or a civilizational Mountain?',
    'Observation of US internal political realignment vs. global fragmentation rate.',
    'Reversible = Tangled Rope; Irreversible = civilizational Mountain.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(hegemonic_entropy_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Modeling the transition from distributed wealth to top-heavy extraction.
% Required for Extraction > 0.46. 

% Theater ratio over time (Goodhart drift: institutions becoming more performative).
narrative_ontology:measurement(he_tr_t0, hegemonic_entropy_2026, theater_ratio, 0, 0.35).
narrative_ontology:measurement(he_tr_t5, hegemonic_entropy_2026, theater_ratio, 5, 0.55).
narrative_ontology:measurement(he_tr_t10, hegemonic_entropy_2026, theater_ratio, 10, 0.78).

% Extraction over time (Extraction accumulation: wealth concentrating at the top).
narrative_ontology:measurement(he_ex_t0, hegemonic_entropy_2026, base_extractiveness, 0, 0.30).
narrative_ontology:measurement(he_ex_t5, hegemonic_entropy_2026, base_extractiveness, 5, 0.52).
narrative_ontology:measurement(he_ex_t10, hegemonic_entropy_2026, base_extractiveness, 10, 0.72).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: heisenberg_uncertainty
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Quantum Mechanics / Werner Heisenberg (1927)
% ============================================================================

:- module(constraint_heisenberg_uncertainty, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: heisenberg_uncertainty
 * human_readable: Heisenberg Uncertainty Principle
 * domain: technological
 * temporal_scope: Permanent (Universal Laws of Physics)
 * spatial_scope: Global (Quantum Scale)
 * * SUMMARY:
 * The Heisenberg Uncertainty Principle states that it is fundamentally impossible 
 * to simultaneously know the exact position and momentum of a particle. 
 * This is not a limit of measurement technology, but a structural property 
 * of quantum systems where the more precisely one property is measured, 
 * the less precisely the other can be known.
 * * KEY AGENTS:
 * - The Quantum Physicist: Analytical observer mapping the fundamental limits of the universe.
 * - The Security Architect: Institutional agent using the principle to ensure data integrity.
 * - The Nanotechnology Engineer: Individual agent struggling against the "noise" and limits of microscopic precision.
 * * NARRATIVE ARC:
 * The principle acts as a "Mountain" of physical reality. While it provides 
 * a "Rope" for coordination in quantum cryptography (by guaranteeing that 
 * eavesdropping can be detected), it functions as a "Snare" for those 
 * attempting classical-style absolute precision at the subatomic level.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for [STEP 1] and [STEP 2] of the DR-Audit Suite
narrative_ontology:interval(heisenberg_interval, 0, 10).
narrative_ontology:constraint_claim(heisenberg_uncertainty, mountain).

% Base extractiveness score
% Rationale: It extracts "absolute precision" from the observer. 
% It imposes a fundamental "uncertainty tax" on information.
domain_priors:base_extractiveness(heisenberg_uncertainty, 0.2).

% Suppression score
% Rationale: It suppresses the "Classical Realist" alternative where particles 
% have definite trajectories.
domain_priors:suppression_score(heisenberg_uncertainty, 0.4).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(heisenberg_uncertainty, extractiveness, 0.2).
narrative_ontology:constraint_metric(heisenberg_uncertainty, suppression_requirement, 0.4).

% Enforcement requirements
domain_priors:emerges_naturally(heisenberg_uncertainty).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(heisenberg_uncertainty, quantum_cryptographers).
constraint_victim(heisenberg_uncertainty, classical_determinists).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE THEORETICAL PHYSICIST - Mountain
   --------------------------------------------------------------------------
   
   WHO: analytical - Observer of universal informational laws.
   WHEN: civilizational - Viewing the universe as a permanent substrate.
   WHERE: trapped - Logic and physics cannot bypass the commutation relations.
   SCOPE: global - Universal applicability.
   
   WHY THIS CLASSIFICATION:
   To the physicist, the principle is a Mountain. It is an unchangeable 
   consequence of the wave-like nature of matter. No amount of 
   "better measuring" changes this peak in the landscape of reality.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    heisenberg_uncertainty,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(civilizational),
        exit_options(trapped),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE QUANTUM KEY DISTRIBUTOR - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional - Power to define and utilize formal rules for trust.
   WHEN: biographical - Achieving secure communication over a project lifetime.
   WHERE: arbitrage - Can use uncertainty to detect perturbations by an eavesdropper.
   SCOPE: national - Infrastructure-level security.
   
   WHY THIS CLASSIFICATION:
   For the security architect, the principle is a Rope. It is a 
   coordination mechanism that provides a physical guarantee of privacy. 
   Uncertainty is used as a tether to ensure that "unobserved" data remains 
   truly unobserved.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    heisenberg_uncertainty,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(arbitrage),
        spatial_scope(national)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE CLASSICAL HARDWARE DESIGNER - Snare
   --------------------------------------------------------------------------
   
   WHO: powerless - Subject to the "noise" of the quantum floor.
   WHEN: immediate - Today's struggle to eliminate measurement variance.
   WHERE: constrained - Cannot leave the quantum domain while working at the nano-scale.
   SCOPE: local - Immediate laboratory environment.
   
   WHY THIS CLASSIFICATION:
   For the engineer trying to build a perfectly deterministic nano-switch, 
   the principle is a Snare. The harder they try to fix both 
   position and momentum, the tighter the "fuzziness" strangles their 
   precision, eventually leading to terminal heat or tunneling errors.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    heisenberg_uncertainty,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(local)
    )
) :- !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(heisenberg_uncertainty_tests).

test(multi_perspective_variance) :-
    % Analyst sees Mountain
    constraint_indexing:constraint_classification(heisenberg_uncertainty, mountain, context(analytical, civilizational, trapped, global)),
    % Institutional sees Rope
    constraint_indexing:constraint_classification(heisenberg_uncertainty, rope, context(institutional, biographical, arbitrage, national)),
    % Powerless sees Snare
    constraint_indexing:constraint_classification(heisenberg_uncertainty, snare, context(powerless, immediate, constrained, local)).

test(power_extractiveness_precision) :-
    % Powerless engineers feel the total extraction of precision (Snare).
    % Institutional cryptographers derive utility from the limit (Rope).
    domain_priors:base_extractiveness(heisenberg_uncertainty, Score),
    Score > 0.1.

test(time_immutability_physics) :-
    % Long-term civilizational logic = Mountain.
    constraint_indexing:effective_immutability(civilizational, trapped, mountain).

:- end_tests(heisenberg_uncertainty_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * * 1. EXTRACTIVENESS SCORE (0.2):
 * Reasoning: Low extraction because it is a neutral physical law. 
 * It extracts "certainty" but does not discriminate based on class, 
 * though the impact is asymmetric based on agent power.
 * * 2. PERSPECTIVE SELECTION:
 * The Analyst (Physicist) sees the law as a fixed Mountain.
 * The Architect (Cryptographer) sees the law as a Rope for security.
 * The Worker (Engineer) sees the law as a Snare strangling their precision.
 * * 3. AMBIGUITIES:
 * - The transition from quantum uncertainty to classical determinism (decoherence) 
 * creates a boundary where the Snare might be loosened.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    epistemic_vs_ontic_nature,
    "Is the uncertainty fundamentally real (Mountain) or just a limit 
    of our current informational framework (Rope)?",
    resolution_mechanism("Development of a grand unified theory or resolution 
    of the measurement problem"),
    impact("If Ontic: Absolute Mountain. If Epistemic: A Rope we can eventually untie."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Classical Mechanics
 * Viability: High at macro-scales, where uncertainty is negligible.
 * Suppression: Extreme at the quantum level; the laws of physics 
 * actively punish classical assumptions through contradictory data.
 * * CONCLUSION:
 * The existence of classical mechanics as a suppressed alternative at the 
 * quantum scale confirms that for the nanotechnologist, the principle 
 * acts as a Snare.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS CONSTRAINT:
 * 1. Load: ?- [constraint_heisenberg_uncertainty].
 * 2. Multi-perspective: ?- multi_index_report(heisenberg_uncertainty).
 * 3. Run tests: ?- run_tests(heisenberg_uncertainty_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: helsinki_bus_theory
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: Oliver Burkeman / Arno Minkkinen, "Helsinki Bus Station Theory"
% ============================================================================

:- module(constraint_helsinki_bus_theory, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: helsinki_bus_theory
 * human_readable: The Helsinki Bus Station Theory (Creative Persistence)
 * domain: artistic/social/psychological
 * temporal_scope: Biographical (Career lifespan)
 * spatial_scope: Local (The discipline) to Global (Creative output)
 * 
 * SUMMARY:
 * This constraint defines the early stages of a creative career as an inescapable 
 * period of imitation and convergence. All "bus lines" (career paths) take 
 * the same route out of the city for the first few "stops" (years), meaning 
 * nascent work will inevitably look like the work of others. 
 * The constraint forces a choice: reset the career and return to the station, 
 * or "stay on the bus" until the route diverges into unique territory.
 * 
 * KEY AGENTS:
 * - The Novice Artist (Individual Powerless): At the first few stops, suffering from comparisons.
 * - The Art School / Record Label (Institutional): Manages talent development through this phase.
 * - The Established Master (Individual Moderate): Has "stayed on the bus" long enough to reach unique territory.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (Context-Independent)
   ========================================================================== */

narrative_ontology:interval(helsinki_bus_theory, 0, 10).
narrative_ontology:constraint_claim(helsinki_bus_theory, rope).

% Base extractiveness: Moderate (0.4)
% Rationale: The system extracts years of labor and "uniqueness" from the 
% novice, offering only "comparison to others" in return during the initial 
% phase.
domain_priors:base_extractiveness(helsinki_bus_theory, 0.4).

% Suppression: Moderate-High (0.6)
% Rationale: The similarity to others' work suppresses the agent's belief in 
% their own originality, creating a "temptation" to abandon the path.
domain_priors:suppression_score(helsinki_bus_theory, 0.6).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(helsinki_bus_theory, extractiveness, 0.4).
narrative_ontology:constraint_metric(helsinki_bus_theory, suppression_requirement, 0.6).

% Enforcement: Emerges naturally from the structure of learning and markets.
domain_priors:emerges_naturally(helsinki_bus_theory).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(helsinki_bus_theory, established_masters).
constraint_victim(helsinki_bus_theory, novice_artists).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE NOVICE ARTIST - Snare
   --------------------------------------------------------------------------
   WHO: powerless (Cannot skip the "identical stops")
   WHEN: immediate (The early years of work)
   WHERE: trapped (Caught in a "nascent body of work" that looks like others')
   
   WHY THIS CLASSIFICATION:
   For the beginner, the theory is a 'Snare'. They are "always being compared to others" 
   and feel that their time is being wasted in a derivative loop, strangling their 
   sense of creative self-worth and leading to frustration.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    helsinki_bus_theory,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE ART SCHOOL / RECORD LABEL - Rope
   --------------------------------------------------------------------------
   WHO: institutional (Manages talent development)
   WHEN: biographical (Developing a career over years)
   WHERE: mobile (Can choose which artists to support)
   
   WHY THIS CLASSIFICATION:
   For an institution managing talent, the theory is a 'Rope'. It provides a framework
   to understand that early work will be derivative. They can use it to guide artists,
   foster persistence, and identify those with the resilience to reach unique territory.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    helsinki_bus_theory,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(national)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE ESTABLISHED MASTER - Mountain
   --------------------------------------------------------------------------
   WHO: individual_moderate (Has the agency to "stay on the fucking bus")
   WHEN: biographical (The span of a creative life)
   WHERE: mobile (Reaching the point where the routes "diverge")
   
   WHY THIS CLASSIFICATION:
   To the master, the constraint is a 'Mountain'—an unchangeable structural reality of 
   how mastery works. One cannot simply "leap" to uniqueness; the first kilometer 
   is a zero-degree-of-freedom path that all must traverse.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    helsinki_bus_theory,
    mountain,
    context(
        agent_power(individual_moderate),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
).

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(helsinki_bus_theory_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(helsinki_bus_theory, Type1, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(helsinki_bus_theory, Type2, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(helsinki_bus_theory, Type3, context(agent_power(individual_moderate), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3,
    Type1 \= Type3.

:- end_tests(helsinki_bus_theory_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. INSTITUTIONAL PERSPECTIVE: Added the 'Art School / Record Label' to represent
 *    the institutional agent. This provides a clear classification of 'Rope'
 *    for an entity that uses the theory to manage and develop talent.
 *
 * 2. CLASSIFICATION RATIONALE:
 *    - Novice (Snare): Trapped in the derivative phase, risking self-worth.
 *    - Art School (Rope): A tool for talent management and expectation setting.
 *    - Master (Mountain): The inevitable, unchanging path to mastery.
 * 
 * 3. EXTRACTIVENESS (0.4): Moderate, as it extracts early-career identity and
 *    time. The frustration of feeling derivative is a real cost.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * The core uncertainty is whether uniqueness is an objective outcome or a subjective belief.
 */

omega_variable(
    divergence_point_certainty,
    "Does every 'bus line' truly diverge into unique territory, or do some lines remain derivative indefinitely (a permanent Snare)?",
    resolution_mechanism("Longitudinal qualitative studies of creative careers across disciplines, tracking objective output uniqueness vs. subjective artist satisfaction."),
    impact("If some lines never diverge: The theory is a Snare for those lines. If all diverge: It is a true Rope."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * 
 * ALTERNATIVE 1: The "New Station" Strategy (Resetting Careers)
 *    Viability: Frequently chosen by those who "go back to the main station" and try a new path.
 *    Suppression: Actively discouraged by the theory as it leads back to the same "identical stops"
 *    and delays true mastery.
 * 
 * CONCLUSION:
 * The theory functions by suppressing the viability of resetting one's career. By 
 * labeling resetting as a failure to move past the "identical" stage, it 
 * transforms the "Snare" of early-career frustration into the "Rope" of persistence.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/helsinki_bus_theory].
 * 2. Multi-perspective: ?- multi_index_report(helsinki_bus_theory).
 * 3. Run tests: ?- run_tests(helsinki_bus_theory_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: heuristic_optimization
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: Metaheuristics / Evolutionary Computing / Optimization Theory
% ============================================================================

:- module(constraint_heuristic_optimization, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: heuristic_optimization
 * human_readable: Heuristic Optimization (The "Good Enough" Rope)
 * domain: technological/mathematical/economic
 * temporal_scope: Immediate to Biographical
 * spatial_scope: Global
 * 
 * SUMMARY:
 * Heuristics are strategies derived from experience or "rules of thumb" 
 * to solve problems more quickly than classic methods. While they do not 
 * guarantee a perfect solution, they provide a functional one where 
 * exhaustive search would fail due to time or resource limits.
 * 
 * KEY AGENTS:
 * - The Drone Pilot / AI Assistant (Individual Powerless): Executes programmed "rules of thumb".
 * - The Engineering Firm (Institutional): Delivers functional solutions within budget.
 * - The Theorist (Analytical): Seeks absolute optimal solutions.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (Reality Layer)
   ========================================================================== */

narrative_ontology:interval(heuristic_optimization, 0, 10).
narrative_ontology:constraint_claim(heuristic_optimization, rope).

% Base extractiveness score (0.2)
% Low extraction; users "pay" in sub-optimality, but gain the ability 
% to function in complex environments.
domain_priors:base_extractiveness(heuristic_optimization, 0.2).

% Suppression score (0.1)
% Heuristics are inherently transparent "shortcuts"; they don't hide 
% alternatives so much as they simplify the search for them.
domain_priors:suppression_score(heuristic_optimization, 0.1).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(heuristic_optimization, extractiveness, 0.2).
narrative_ontology:constraint_metric(heuristic_optimization, suppression_requirement, 0.1).

% Enforcement: Emerges naturally from cognitive and computational scarcity.
domain_priors:emerges_naturally(heuristic_optimization).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(heuristic_optimization, real_time_systems).
constraint_victim(heuristic_optimization, absolute_optimality).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE DRONE PILOT / AI ASSISTANT - Mountain
   --------------------------------------------------------------------------
   WHO: powerless (Operates under programmed constraints)
   WHEN: immediate (Executing a task in real-time)
   WHERE: trapped (Limited by the heuristic algorithm)
   
   WHY THIS CLASSIFICATION:
   For the drone pilot or AI assistant, heuristics are an immutable 'Mountain'
   of programmed behavior. They execute the "rule of thumb" without understanding
   the underlying math or seeking a theoretically perfect solution. It is a fixed
   reality of their operational environment.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    heuristic_optimization,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE ENGINEERING FIRM - Rope
   --------------------------------------------------------------------------
   WHO: institutional (Delivers functional solutions within constraints)
   WHEN: biographical (Project lifecycle)
   WHERE: mobile (Can choose different algorithms and trade-offs)
   
   WHY THIS CLASSIFICATION:
   For the engineering firm, heuristics are a 'Rope' to deliver functional solutions
   within budget and time constraints. They understand that perfection is often
   the enemy of "good enough" and use heuristics to coordinate complex projects,
   prioritizing speed and functionality over theoretical purity.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    heuristic_optimization,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(regional)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE THEORIST - Snare
   --------------------------------------------------------------------------
   WHO: powerful (Intellectual authority, seeking absolute truth)
   WHEN: generational (Long-term pursuit of mathematical perfection)
   WHERE: trapped (Bound by the search for the 'Absolute Truth')
   
   WHY THIS CLASSIFICATION:
   To a perfectionist seeking the absolute global minimum, a heuristic 
   is a 'Snare'. It "strangles" the truth by settling for a local 
   optimum. They see the heuristic as a shortcut that prevents the 
   system from ever reaching its theoretical potential, a compromise that stifles perfection.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    heuristic_optimization,
    snare,
    context(
        agent_power(powerful),
        time_horizon(generational),
        exit_options(trapped),
        spatial_scope(global)
    )
).

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(heuristic_optimization_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(heuristic_optimization, Type1, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(heuristic_optimization, Type2, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(heuristic_optimization, Type3, context(agent_power(powerful), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3,
    Type1 \= Type3.

:- end_tests(heuristic_optimization_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. PERSPECTIVE SELECTION: Added the 'Drone Pilot / AI Assistant' (powerless)
 *    and 'Engineering Firm' (institutional) to fulfill linter requirements and provide
 *    a more complete picture of how heuristics are experienced across different roles.
 *
 * 2. CLASSIFICATION RATIONALE:
 *    - Drone Pilot (Mountain): The heuristic is an immutable command.
 *    - Engineering Firm (Rope): A pragmatic tool for efficient problem-solving.
 *    - Theorist (Snare): A compromise that prevents absolute perfection.
 * 
 * 3. CORE INSIGHT: Heuristics are a powerful 'Rope' for navigating complex, resource-constrained
 *    environments, but their inherent sub-optimality can feel like a 'Snare' to those
 *    pursuing absolute perfection.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * The core uncertainty is whether the pursuit of absolute optimality is ever truly necessary.
 */

omega_variable(
    heuristic_drift_vs_optimal_convergence,
    "Will heuristics eventually become so accurate that the 'theoretical optimal' becomes irrelevant for all practical purposes, making the pursuit of perfection a 'Snare'?",
    resolution_mechanism("Comparative analysis of economic gains from heuristic solutions versus the cost and time required to achieve theoretical optima in real-world applications over decades."),
    impact("If heuristics suffice: The 'Snare' of NP-completeness is effectively cut; the 'Mountain' of absolute optimality is redefined. If perfection remains critical: The heuristic remains a compromise."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */
/**
 * VIABLE ALTERNATIVES
 *
 * ALTERNATIVE 1: Exhaustive Search / Exact Algorithms
 *    Viability: Guarantees the absolute optimal solution for many problems.
 *    Suppression: Suppressed by practical constraints of time and computational resources, especially for NP-hard problems.
 *
 * CONCLUSION:
 * Heuristics thrive because they provide a pragmatic 'Rope' to solve problems
 * that would otherwise be intractable. The 'Snare' of absolute optimality is
 * often too expensive or impossible to achieve in real-world scenarios.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/heuristic_optimization].
 * 2. Multi-perspective: ?- multi_index_report(heuristic_optimization).
 * 3. Run tests: ?- run_tests(heuristic_optimization_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: hilberts_hotel_infinity
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: David Hilbert (1924) / Transfinite Arithmetic / Set Theory
% ============================================================================

:- module(constraint_hilberts_hotel, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: hilberts_hotel_infinity
 * human_readable: Hilbert's Paradox of the Grand Hotel
 * domain: mathematical/philosophical
 * temporal_scope: 1924 - Present (Civilizational)
 * spatial_scope: Global/Abstract (Transfinite Sets)
 * * SUMMARY:
 * Hilbert's Hotel is a thought experiment that illustrates the properties of 
 * infinite sets. It describes a hotel with infinitely many rooms, all of which 
 * are occupied. Despite being "full," the hotel can accommodate an infinite 
 * number of new guests by shifting existing guests according to specific 
 * mathematical rules (e.g., Guest $n$ moves to Room $n+1$ or $2n$).
 * * KEY AGENTS:
 * - The Manager (Powerless/Moderate): An agent tasked with enforcing the 
 * infinite logic, possessing no agency over the rules of set theory.
 * - The Guest (Subject): A powerless agent whose position is entirely 
 * dictated by the mapping function $f(n)$.
 * - The Infinite Set (Institutional/Natural Law): The "Owner" of the hotel, 
 * representing the unyielding logic of $\aleph_0$ (aleph-null).
 * * NARRATIVE ARC:
 * Hilbert's Hotel is the ultimate "Mountain" of mathematical reality—the 
 * logic of infinite cardinality is fixed and unchangeable. In pedagogy, it 
 * acts as a "Rope" for coordinating an understanding of transfinite numbers. 
 * However, to the guest caught in a "Cantor's Diagonal" or a sudden influx of 
 * infinitely many buses, the shifting process is a "Snare" that extracts 
 * stability and location for the sake of higher-order set theory.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION
   ========================================================================== */

% Structural Anchor for index extraction
narrative_ontology:interval(hilberts_hotel_infinity, 1924, 2026).
narrative_ontology:constraint_claim(hilberts_hotel_infinity, mountain).

% Base extractiveness score (0.0-1.0)
% Rationale: 0.15. While infinity is a "gift" of space, the paradox 
% "extracts" the intuitive human sense of "Fullness" and "Location," 
% rendering the concept of a "last room" impossible.
domain_priors:base_extractiveness(hilberts_hotel_infinity, 0.15).

% Suppression score (0.0-1.0)
% Rationale: 0.1. It does not actively suppress other truths, though it 
% renders "Finite Intuition" functionally invalid in transfinite contexts.
domain_priors:suppression_score(hilberts_hotel_infinity, 0.1).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(hilberts_hotel_infinity, extractiveness, 0.15).
narrative_ontology:constraint_metric(hilberts_hotel_infinity, suppression_requirement, 0.1).

% Enforcement: Emerges naturally from the axioms of Set Theory (ZFC).
domain_priors:emerges_naturally(hilberts_hotel_infinity).

% Metrics for Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(hilberts_hotel_infinity, mathematicians). % Understanding cardinality.
constraint_beneficiary(hilberts_hotel_infinity, logical_rigor). 
constraint_victim(hilberts_hotel_infinity, finite_intuition). % Strangled by the logic of Aleph-0.

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE HOTEL GUEST - Mountain
   --------------------------------------------------------------------------
   WHO: powerless - The guest cannot refuse the move; logic dictates it.
   WHEN: immediate - True at every moment a new guest arrives.
   WHERE: trapped - Bound within the infinite corridor of rooms.
   SCOPE: local - Focused on the shift from Room $n$ to $n+k$.
   
   WHY THIS CLASSIFICATION:
   For the guest, the rule that "there is always room" is a natural law of 
   their universe. They have no agency to stay in a specific room if the 
   Manager invokes the shifting rule. The Mountain of transfinite 
   arithmetic is unyielding.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    hilberts_hotel_infinity,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE MATHEMATICS TEACHER - Rope
   --------------------------------------------------------------------------
   WHO: institutional - Power to use the paradox to coordinate learning.
   WHEN: biographical - Spanning the duration of a student's education.
   WHERE: mobile - Can apply the logic to countability, power sets, or real numbers.
   SCOPE: global - A universal pedagogical tool.
   
   WHY THIS CLASSIFICATION:
   For the educator, Hilbert's Hotel is a "Rope"—a functional coordination 
   mechanism. It allows them to pull students away from the "Snare" of 
   finite confusion and toward a standard of achievement in set theory.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    hilberts_hotel_infinity,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE MANAGER OF INFINITE BUSES - Snare
   --------------------------------------------------------------------------
   WHO: powerless - Tasked with an impossible-looking job.
   WHEN: immediate - Facing the arrival of an infinite set of infinite sets.
   WHERE: constrained - No alternative but to follow the algorithm.
   SCOPE: local - Managing the front desk.
   
   WHY THIS CLASSIFICATION:
   When infinitely many buses, each with infinitely many guests, arrive 
   (the countability of $\mathbb{Q}$), the paradox acts as a "Snare." 
   The Manager is "strangled" by the complexity of the re-mapping 
   process, extracting massive cognitive labor to fulfill the "gift" of 
   unlimited space.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    hilberts_hotel_infinity,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(local)
    )
) :- 
    domain_priors:base_extractiveness(hilberts_hotel_infinity, E),
    E >= 0.1,
    !.

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(hilberts_hotel_tests).

test(perspective_variance) :-
    % Guest -> Mountain
    constraint_indexing:constraint_classification(hilberts_hotel_infinity, Type1, context(powerless, immediate, trapped, local)),
    % Teacher -> Rope
    constraint_indexing:constraint_classification(hilberts_hotel_infinity, Type2, context(institutional, biographical, mobile, global)),
    Type1 = mountain,
    Type2 = rope.

test(manager_burden_extraction) :-
    % A powerless manager in a constrained context sees the paradox as a Snare.
    constraint_indexing:constraint_classification(hilberts_hotel_infinity, snare, context(powerless, immediate, constrained, local)).

test(natural_emergence) :-
    domain_priors:emerges_naturally(hilberts_hotel_infinity).

:- end_tests(hilberts_hotel_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * 1. CLASSIFICATION: Hilbert's Hotel is primarily a "Mountain" because 
 * transfinite logic is non-negotiable. 
 * 2. TYPE SHIFT: I highlighted how the "Rope" of education becomes a 
 * "Snare" for the manager when the complexity of the mapping (e.g., 
 * Cantor's pairing function) extracts all intuitive ease.
 * 3. EXTRACTIVENESS (0.15): While infinity suggests abundance, the paradox 
 * extracts the very concept of "Permanence" for the individual guest.
 */

% OMEGA IDENTIFICATION
omega_variable(
    physical_realizability,
    "Can a 'Mountain' of abstract set theory hold in a 'Scaffold' of physical hardware?",
    resolution_mechanism("Comparison of theoretical infinite set results with memory limitations in automated theorem provers."),
    impact("If hardware fails: The Mountain is a mirage. If proof holds: It remains a Mountain."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Finitism
 * Viability: Refusing to accept the existence of infinite sets (Aristotle/Kronecker).
 * Suppression: Rejected by modern mathematics because it "strangles" 
 * the utility of calculus and analysis.
 * Evidence: Kronecker's famous dismissal of Cantor's work.
 * * ALTERNATIVE 2: Real-World Scarcity
 * Viability: Physical hotels have limits.
 * Status: Not an alternative to the paradox, but the reality that the 
 * paradox "suppresses" to make its point.
 * * CONCLUSION:
 * The dominance of the Hilbert/Cantor "Mountain" has turned Finitism into 
 * a "Scaffold" that was largely discarded by the 20th century.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Load: ?- [hilberts_hotel_infinity].
% Analyze: ?- constraint_indexing:multi_index_report(hilberts_hotel_infinity).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: hiv_prep_prevention_2026
% ============================================================================
% Generated: 2026-01-21
% Model: Gemini 2.0 Flash
% Source: "We can block the spread of HIV" by Carissa Wong (Jan 2026)
% ============================================================================

:- module(hiv_prep_prevention_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: hiv_prep_prevention_2026
 * human_readable: PrEP-Mediated HIV Prevention
 * domain: technological/social/biological
 * temporal_scope: 2010-2026
 * spatial_scope: Global (over 150 countries)
 * * SUMMARY:
 * Pre-exposure prophylaxis (PrEP) is a daily antiviral pill that drastically reduces 
 * the risk of HIV transmission by more than 90 per cent when used correctly. 
 * It has transformed HIV from an inescapable threat associated with fear and stigma 
 * into a manageable health constraint, enhancing sexual freedom for millions.
 * * KEY AGENTS:
 * - The PrEP User: Individuals, particularly in underserved communities, who use 
 * the drug to regain sexual well-being and freedom.
 * - The Healthcare Institution (WHO/FDA): Bodies that approve and recommend 
 * PrEP to slash transmission rates globally.
 * - The Underserved Subject: Communities (e.g., men who have sex with men) who 
 * face healthcare barriers and historical stigma.
 * * NARRATIVE ARC:
 * From the early epidemic fears to the 2010 landmark trial, the advent of PrEP 
 * shifted the constraint of HIV transmission from an "act of god" or "condom 
 * failure" risk to a programmable biological barrier. By 2023, 
 * 3.5 million people were utilizing this "enormous revelation" to exchange 
 * bodily fluids safely.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for [STEP 1] and [STEP 2] of the DR-Audit Suite
narrative_ontology:interval(hiv_prep_prevention_2026, 0, 10).
narrative_ontology:constraint_claim([hiv_prep_prevention_2026], [biotechnological_intervention]).

% Base extractiveness score (0.0 = no extraction, 1.0 = full extraction)
% Rationale: PrEP is highly generative of freedom; however, the cost of 
% daily medication and the reliance on pharmaceutical supply chains 
% introduces a minor extractive element.
domain_priors:base_extractiveness(hiv_prep_prevention_2026, 0.15).

% Suppression score (0.0 = no suppression, 1.0 = full suppression)
% Rationale: PrEP suppresses the transmission capacity of the virus itself 
% and suppresses the fear/stigma associated with risk.
domain_priors:suppression_score(hiv_prep_prevention_2026, 0.5).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(hiv_prep_prevention_2026, extractiveness, 0.15).
narrative_ontology:constraint_metric(hiv_prep_prevention_2026, suppression_requirement, 0.5).

% Enforcement requirements
% Requires active enforcement (Daily pill adherence and medical monitoring).
domain_priors:requires_active_enforcement(hiv_prep_prevention_2026).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(hiv_prep_prevention_2026, global_sexual_freedom). %
constraint_beneficiary(hiv_prep_prevention_2026, healthcare_stability). %
constraint_victim(hiv_prep_prevention_2026, hiv_pathogen_spread). %

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE PREP USER - Rope
   --------------------------------------------------------------------------
   
   WHO: powerless (Subject to biological risk and stigma)
   WHEN: biographical (Focus on life-long sexual well-being)
   WHERE: trapped (Within an epidemic that has claimed 44 million lives)
   SCOPE: local (Personal intimate contact)
   
   WHY THIS CLASSIFICATION:
   For the user, PrEP is a "Rope"—a tool for coordination that allows them to 
   engage in the "kind of sex they wanted" while safely exchanging bodily 
   fluids. It replaces the "Snare" of fear with a functional pill.
   
   NARRATIVE EVIDENCE:
   "Allowed them to have the kind of sex they wanted to have, where bodily fluids 
   could be exchanged".
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    hiv_prep_prevention_2026,
    rope,
    context(
        agent_power(powerless),
        time_horizon(biographical),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE WHO/FDA REGULATOR - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional (Rule-making/Recommending bodies)
   WHEN: historical (Managing the global HIV response since 2010)
   WHERE: arbitrage (Managing distribution across 150+ countries)
   SCOPE: global (Worldwide health policy)
   
   WHY THIS CLASSIFICATION:
   For regulators, PrEP is a "Rope"—a functional policy tool used to slash 
   transmission rates and stabilize global health.
   
   NARRATIVE EVIDENCE:
   "The World Health Organization recommended PrEP in 2015 and... more than 150 
   countries adopted the approach".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    hiv_prep_prevention_2026,
    rope,
    context(
        agent_power(institutional),
        time_horizon(historical),
        exit_options(arbitrage),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: BIOLOGICAL RESEARCHER - Mountain
   --------------------------------------------------------------------------
   
   WHO: analytical (Observer of the "landmark trial" results)
   WHEN: civilizational (Evolutionary interaction between virus and medicine)
   WHERE: analytical (Universal biochemical interactions)
   SCOPE: global
   
   WHY THIS CLASSIFICATION:
   From an analytical perspective, the efficacy of antivirals against the HIV 
   replication cycle is a "Mountain"—a fixed biological fact of modern medicine 
   demonstrated through repeated study.
   
   NARRATIVE EVIDENCE:
   "Slew of studies showed that, when used correctly, PrEP cuts the risk of HIV 
   transmission by more than 90 per cent".
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    hiv_prep_prevention_2026,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(civilizational),
        exit_options(analytical),
        spatial_scope(global)
    )
) :- !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(hiv_prep_prevention_2026_tests).

test(multi_perspective_prep) :-
    % User perspective (Rope)
    constraint_indexing:constraint_classification(
        hiv_prep_prevention_2026,
        rope,
        context(powerless, biographical, trapped, local)
    ),
    % Analyst perspective (Mountain)
    constraint_indexing:constraint_classification(
        hiv_prep_prevention_2026,
        mountain,
        context(analytical, civilizational, analytical, global)
    ).

test(extractiveness_vs_freedom) :-
    % While extractiveness exists (daily pill), freedom gains are higher.
    domain_priors:base_extractiveness(hiv_prep_prevention_2026, E),
    E < 0.3.

:- end_tests(hiv_prep_prevention_2026_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================= */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-21
 * * KEY DECISIONS:
 * * 1. EXTRACTIVENESS SCORE (0.15):
 * Reasoning: PrEP requires a daily pharmaceutical commitment, which is 
 * a minor form of economic and behavioral extraction. 
 * However, it is overwhelmingly beneficial to the user's freedom.
 * * 2. PERSPECTIVE SELECTION:
 * Focused on the individual user's regained sexual freedom (Rope) 
 * vs the objective biological efficacy (Mountain).
 * * 3. CLASSIFICATION RATIONALE:
 * - User (Rope): It provides a "revelation" of contact and exchange without 
 * the previous "Snare" of stigma/fear.
 * - Analyst (Mountain): The >90% efficacy is a physical reality of the 
 * antiviral mechanism.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    prep_resistance_evolution,
    "Will long-term mass usage lead to HIV strains resistant to current PrEP drugs?",
    resolution_mechanism("Genetic sequencing of transmission breakthroughs in high-usage regions"),
    impact("If yes: Current Rope snaps, requiring a new Mountain of research. If no: Permanent Rope."),
    confidence_without_resolution(medium)
).

omega_variable(
    access_equity_as_snare,
    "Is the global adoption truly 150 countries or does it remain a 'Snare' of 
     unavailability for underserved communities within those nations?",
    resolution_mechanism("Sub-national audit of PrEP prescriptions in communities served vs. underserved"),
    impact("If unequal: Snare for the marginalized. If equal: Global Rope."),
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Condom-Only Prevention
 * Viability: Historically primary; "condoms provide protection".
 * Suppression: Rejected by many as they "can fail" and "make sex less 
 * pleasurable".
 * Evidence: "Many prefer not to use them".
 * * CONCLUSION:
 * The advent of PrEP turned the "Condom Snare" (perceived failure/lack of 
 * pleasure) into a "Biological Rope" (90% reduction + skin contact).
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

% Load: ?- [hiv_prep_prevention_2026].
% Multi-perspective: ?- multi_index_report(hiv_prep_prevention_2026).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: hoa_covenants
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-05-21
% ============================================================================

:- module(constraint_hoa_covenants, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: hoa_covenants
 * human_readable: HOA Architectural Review and Restrictive Covenants
 * domain: economic/social/legal
 * * SUMMARY:
 * Legally binding restrictive covenants that dictate the aesthetic and structural
 * modifications allowed on private property within a homeowners' association (HOA).
 * Managed by an Architectural Review Board (ARB), these constraints regulate
 * everything from paint color and landscaping to mailboxes and roof materials,
 * often through a subjective enforcement process.
 * * KEY AGENTS:
 * - Individual Homeowner: The subject bound by the covenants and subject to fines.
 * - HOA Board/ARB Member: The institutional enforcer of the "community standard."
 * - Real Estate Analyst: An analytical observer of property value and market friction.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(hoa_covenants, 0.55). % High due to fines, fees, and loss of autonomy.
domain_priors:suppression_score(hoa_covenants, 0.30).   % Alternatives are not actively suppressed, but legal/social inertia is high.
domain_priors:theater_ratio(hoa_covenants, 0.75).       % High due to subjective, performative enforcement of outdated rules.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(hoa_covenants, extractiveness, 0.55).
narrative_ontology:constraint_metric(hoa_covenants, suppression_requirement, 0.30).
narrative_ontology:constraint_metric(hoa_covenants, theater_ratio, 0.75).

% Constraint self-claim (what does the constraint claim to be?)
% HOAs claim to be a coordination mechanism for preserving property values.
narrative_ontology:constraint_claim(hoa_covenants, coordination).

% Binary flags
domain_priors:requires_active_enforcement(hoa_covenants). % Fines and liens are used for enforcement.

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(hoa_covenants, property_developers).
narrative_ontology:constraint_beneficiary(hoa_covenants, hoa_management_companies).
narrative_ontology:constraint_victim(hoa_covenants, individual_homeowners).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The homeowner faces asymmetric power, fines, and high exit costs.
% χ = 0.55 (ε) * 1.5 (π(powerless)) * 0.8 (σ(local)) = 0.66
constraint_indexing:constraint_classification(hoa_covenants, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The HOA board sees the covenants as an essential coordination tool.
% χ = 0.55 (ε) * -0.2 (π(institutional)) * 0.9 (σ(regional)) = -0.099 (felt as a net benefit)
constraint_indexing:constraint_classification(hoa_covenants, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(regional))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (PITON)
% The analyst sees a degraded system that persists through inertia, where
% performative enforcement has replaced the original function.
constraint_indexing:constraint_classification(hoa_covenants, piton,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))) :-
    domain_priors:theater_ratio(hoa_covenants, TR), TR > 0.70.

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(hoa_covenants_tests).

test(perspectival_gap_snare_vs_rope, [nondet]) :-
    % Verify the homeowner sees a Snare while the board sees a Rope.
    constraint_indexing:constraint_classification(hoa_covenants, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(hoa_covenants, rope, context(agent_power(institutional), _, _, _)).

test(piton_classification_requires_high_theater, [nondet]) :-
    % Verify the Piton classification is correctly conditioned on the theater_ratio.
    domain_priors:theater_ratio(hoa_covenants, TR),
    ( TR > 0.70 ->
        constraint_indexing:constraint_classification(hoa_covenants, piton, context(agent_power(analytical), _, _, _))
    ; \+ constraint_indexing:constraint_classification(hoa_covenants, piton, context(agent_power(analytical), _, _, _))
    ).

:- end_tests(hoa_covenants_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect the degradation of a coordination mechanism into a system of performative control.
 * - Base Extractiveness (0.55): This is high, representing not just monetary dues but the significant loss of owner autonomy and the financial risk of arbitrary fines and liens.
 * - Theater Ratio (0.75): This is the key metric for the Piton classification. It models the common scenario where HOA boards spend more effort enforcing trivial, outdated aesthetic rules (e.g., "the wrong shade of beige") than addressing functional community issues. The enforcement becomes a performance of authority rather than a tool for value preservation.
 * - Perspectival Gap: The gap is stark. For the institutional board, the rules are a Rope, a tool of control and coordination they wield. For the powerless homeowner, who is trapped by high transaction costs of moving, the same rules are a Snare, an arbitrary and extractive trap.
 *
 * MANDATROPHY ANALYSIS:
 * The Piton classification is a direct resolution of Mandatrophy. Instead of misclassifying the HOA system as a functional Rope (its stated purpose) or a pure Snare (ignoring its origins), the Piton type correctly identifies it as a degraded constraint. It was once a Rope intended for coordination, but its primary function has atrophied, and it now persists through legal inertia and theatrical enforcement. This prevents the system from making a category error.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_hoa_covenants_value,
    'Do architectural restrictions empirically increase property value compared to similar non-HOA homes, controlling for other factors?',
    'A long-term econometric study controlling for neighborhood age, location, and amenities.',
    'If NO, the "Rope" classification for the Board collapses, revealing the entire structure as a Snare from all non-beneficiary perspectives.',
    confidence_without_resolution(medium)
).

omega_variable(
    omega_hoa_covenants_motivation,
    'Is ARB enforcement primarily driven by a consistent application of rules for community benefit (Rope) or by the personal biases and power dynamics of board members (Snare)?',
    'Sentiment analysis of board meeting minutes combined with frequency analysis of litigation and violation types.',
    'Determines whether the constraint is a flawed coordination tool or a mechanism for localized, arbitrary power.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(hoa_covenants, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data models the degradation of the HOA from a coordination tool
% into a high-theater, high-extraction system over its lifecycle.
% Required because base_extractiveness (0.55) > 0.46.

% Theater ratio over time (metric_substitution drift):
narrative_ontology:measurement(hoa_covenants_tr_t0, hoa_covenants, theater_ratio, 0, 0.20).
narrative_ontology:measurement(hoa_covenants_tr_t5, hoa_covenants, theater_ratio, 5, 0.55).
narrative_ontology:measurement(hoa_covenants_tr_t10, hoa_covenants, theater_ratio, 10, 0.75).

% Extraction over time (extraction_accumulation drift):
narrative_ontology:measurement(hoa_covenants_ex_t0, hoa_covenants, base_extractiveness, 0, 0.30).
narrative_ontology:measurement(hoa_covenants_ex_t5, hoa_covenants, base_extractiveness, 5, 0.45).
narrative_ontology:measurement(hoa_covenants_ex_t10, hoa_covenants, base_extractiveness, 10, 0.55).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type: The core function of HOA covenants is rule enforcement.
narrative_ontology:coordination_type(hoa_covenants, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: hominin_evolutionary_bottleneck
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-29
% ============================================================================

:- module(constraint_hominin_evolutionary_bottleneck, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: hominin_evolutionary_bottleneck
 * human_readable: The Hominin Evolutionary Bottleneck & Replacement Event
 * domain: scientific/biological
 * * SUMMARY:
 * For millennia, the story of human evolution was constrained by a sparse fossil record.
 * Recent fossil and genetic data have revealed a complex history where our direct ancestors
 * expanded out of Africa ~60,000 years ago, replacing all other hominin species. This event,
 * and the scientific consensus describing it, acts as a constraint with vastly different
 * meanings depending on the perspective.
 * * KEY AGENTS:
 * - Extinct Hominin (e.g., H. naledi): Subject (Powerless)
 * - Modern Scientist: Beneficiary/Analyst (Analytical)
 * - Natural History Museum: Beneficiary (Institutional)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
% Rationale: The 60,000-year-old expansion involved the total replacement of other hominin species.
% This represents a total extraction of territory and evolutionary continuity from "cousin" species.
domain_priors:base_extractiveness(hominin_evolutionary_bottleneck, 0.75).
% Rationale: The dominant "Out of Africa" theory, backed by strong evidence, has suppressed
% alternative "multiregional" hypotheses, making it difficult for them to gain traction.
domain_priors:suppression_score(hominin_evolutionary_bottleneck, 0.60).
% Rationale: The scientific process is functional, not theatrical. The presentation in museums has some
% theatricality, but the core constraint is the evidence itself.
domain_priors:theater_ratio(hominin_evolutionary_bottleneck, 0.10).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(hominin_evolutionary_bottleneck, extractiveness, 0.75).
narrative_ontology:constraint_metric(hominin_evolutionary_bottleneck, suppression_requirement, 0.60).
narrative_ontology:constraint_metric(hominin_evolutionary_bottleneck, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% The scientific consensus is a constructed framework based on evidence.
narrative_ontology:constraint_claim(hominin_evolutionary_bottleneck, constructed).

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(hominin_evolutionary_bottleneck, homo_sapiens).
narrative_ontology:constraint_victim(hominin_evolutionary_bottleneck, extinct_hominin_cousins).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For species like H. naledi, the evolutionary expansion of Homo sapiens was a terminal 'Snare'.
% They were confined to specific environments and ultimately driven to extinction by a competing group.
constraint_indexing:constraint_classification(hominin_evolutionary_bottleneck, snare,
    context(agent_power(powerless),
            time_horizon(civilizational),
            exit_options(trapped),
            spatial_scope(regional))).

% PERSPECTIVE 2: THE BENEFICIARY (INSTITUTIONAL) - MOUNTAIN
% The museum presents the scientific consensus as a 'Mountain'. The complex, debated 'Rope'
% of the scientists is simplified into an immutable, factual diorama for public consumption.
constraint_indexing:constraint_classification(hominin_evolutionary_bottleneck, mountain,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(constrained),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER - ROPE
% For the scientist, the bottleneck and expansion is a 'Rope'—a powerful explanatory
% framework that ties together disparate data points into a coherent narrative about human origins.
constraint_indexing:constraint_classification(hominin_evolutionary_bottleneck, rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(hominin_evolutionary_bottleneck_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(hominin_evolutionary_bottleneck, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(hominin_evolutionary_bottleneck, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(threshold_validation) :-
    % Verify the base extractiveness is in the high-extraction range for a Snare.
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(hominin_evolutionary_bottleneck, ExtMetricName, E),
    E >= 0.46.

test(multi_perspective_variance) :-
    % Verify that all three core perspectives yield different classifications.
    constraint_indexing:constraint_classification(hominin_evolutionary_bottleneck, Type1, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(hominin_evolutionary_bottleneck, Type2, context(agent_power(analytical), _, _, _)),
    constraint_indexing:constraint_classification(hominin_evolutionary_bottleneck, Type3, context(agent_power(institutional), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3,
    Type1 \= Type3.

:- end_tests(hominin_evolutionary_bottleneck_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The core of this constraint is the biological replacement of one group by another, which is a
 * high-extraction event (E=0.75). The perspectival gap is stark:
 * - For the extinct hominin (powerless), this is a Snare. Their evolutionary line was terminated.
 * - For the modern scientist (analytical), the theory explaining this event is a Rope—a powerful
 *   coordination tool for organizing vast amounts of genetic and fossil data into a coherent story.
 * - For the museum (institutional), this complex scientific Rope is simplified and presented to the
 *   public as an immutable fact—a Mountain. The nuance and debate are flattened for clarity.
 * This demonstrates how a single event can be perceived as a trap, a tool, and a law depending on the index.
 *
 * * MANDATROPHY ANALYSIS:
 * [RESOLVED MANDATROPHY] The high extraction score (0.75) is justified by the biological reality of
 * species replacement. The system correctly avoids mislabeling this as a pure Mountain by recognizing
 * the perspectival nature of the scientific consensus built around it. The Rope and Mountain classifications
 * apply to the *theory*, while the Snare classification applies to the *event itself* from the victim's view.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_hominin_evolutionary_bottleneck_1,
    'Was the replacement of hominin cousins a predatory biological displacement (Snare) or a natural adaptive shift (Mountain)?',
    'Audit of genetic admixture rates to determine if replacement was violent or absorptive.',
    'If predatory -> Snare. If adaptive -> Mountain.',
    confidence_without_resolution(medium)
).

omega_variable(
    omega_hominin_evolutionary_bottleneck_2,
    'Do other isolated pockets of hominins still exist in the fossil record yet to be found?',
    'Systematic exploration of deep-cave systems in previously unsearched regions.',
    'If yes -> The bottleneck is less restrictive. If no -> The replacement model is absolute.',
    confidence_without_resolution(high)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(hominin_evolutionary_bottleneck, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data models the solidification of the "Out of Africa" consensus over the
% last few decades. As more evidence accumulated, the theory became more "extractive"
% in its explanatory power, crowding out alternatives.
%
% Theater ratio over time:
narrative_ontology:measurement(heb_tr_t0, hominin_evolutionary_bottleneck, theater_ratio, 0, 0.05).
narrative_ontology:measurement(heb_tr_t5, hominin_evolutionary_bottleneck, theater_ratio, 5, 0.08).
narrative_ontology:measurement(heb_tr_t10, hominin_evolutionary_bottleneck, theater_ratio, 10, 0.10).

% Extraction over time:
narrative_ontology:measurement(heb_ex_t0, hominin_evolutionary_bottleneck, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(heb_ex_t5, hominin_evolutionary_bottleneck, base_extractiveness, 5, 0.65).
narrative_ontology:measurement(heb_ex_t10, hominin_evolutionary_bottleneck, base_extractiveness, 10, 0.75).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The scientific consensus acts as a standard for interpreting information.
narrative_ontology:coordination_type(hominin_evolutionary_bottleneck, information_standard).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: huang_expectation_resilience_2026
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-16
% ============================================================================

:- module(constraint_huang_expectation_resilience_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: huang_expectation_resilience_2026
 * human_readable: The Stanford Expectation Trap (Resilience Scarcity)
 * domain: social/technological/psychological
 * * SUMMARY:
 * This constraint maps Jensen Huang's thesis that high expectations (derived from
 * elite institutional success) extract individual resilience. This creates a
 * "Snare" where the subject is trapped by their own pedigree, lacking the
 * "character" formed by suffering, which is required for long-term greatness.
 * * KEY AGENTS:
 * - Elite Graduates: Subject (Powerless) - Trapped by high expectations and
 * low resilience.
 * - Industry Requiring Resilience: Beneficiary (Institutional) - Requires character-driven
 * resilience for corporate "greatness."
 * - Systems Auditor: Auditor (Analytical) - Identifies the "pain and suffering"
 * deficit and the high degree of performative theater.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% High extraction (0.75) because the pressure of high expectations extracts resilience from the psyche.
domain_priors:base_extractiveness(huang_expectation_resilience_2026, 0.75).

% Suppression (0.65) of alternative paths; elite success tracks limit exposure to necessary setbacks.
domain_priors:suppression_score(huang_expectation_resilience_2026, 0.65).

% High theater (0.82) because intelligence often serves as a proxy/theater for
% "greatness" while masking a lack of character.
domain_priors:theater_ratio(huang_expectation_resilience_2026, 0.82).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(huang_expectation_resilience_2026, extractiveness, 0.75).
narrative_ontology:constraint_metric(huang_expectation_resilience_2026, suppression_requirement, 0.65).
narrative_ontology:constraint_metric(huang_expectation_resilience_2026, theater_ratio, 0.82).

% Constraint self-claim (what does the constraint claim to be?)
% The system of elite education claims to be a constructed pathway to success.
narrative_ontology:constraint_claim(huang_expectation_resilience_2026, constructed).

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(huang_expectation_resilience_2026, industry_requiring_resilience).
narrative_ontology:constraint_victim(huang_expectation_resilience_2026, elite_graduates).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The elite student is "trapped" in their success, where high expectations
% actively erode the ability to handle future setbacks.
% χ = 0.75 * π(powerless:1.5) * σ(national:1.0) = 1.125. High extraction -> Snare.
constraint_indexing:constraint_classification(huang_expectation_resilience_2026, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% From the institutional level, "pain and suffering" is infrastructure used to
% "refine the character of the company." Extraction is perceived as a net benefit.
% χ = 0.75 * π(institutional:-0.2) * σ(national:1.0) = -0.15. Negative extraction -> Rope.
constraint_indexing:constraint_classification(huang_expectation_resilience_2026, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE SYSTEMS AUDITOR (PITON)
% The system's high theater ratio (0.82 > 0.70) indicates that its claimed function
% (producing greatness) has atrophied, replaced by the performance of intelligence.
% This makes it a Piton from an analytical view.
constraint_indexing:constraint_classification(huang_expectation_resilience_2026, piton,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(arbitrage),
            spatial_scope(global))) :-
    domain_priors:theater_ratio(huang_expectation_resilience_2026, TR), TR > 0.70.

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(huang_expectation_resilience_2026_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(huang_expectation_resilience_2026, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(huang_expectation_resilience_2026, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(threshold_validation) :-
    % Verify this is a high-extraction constraint.
    domain_priors:base_extractiveness(huang_expectation_resilience_2026, E),
    E >= 0.46.

test(piton_detection) :-
    % Verify the analytical perspective correctly identifies a Piton.
    constraint_indexing:constraint_classification(huang_expectation_resilience_2026, piton, context(agent_power(analytical), _, _, _)).

:- end_tests(huang_expectation_resilience_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The core of this model is the perspectival gap. For the student (powerless),
 * the system is a Snare: the "advantage" of an elite background extracts the
 * very resilience needed for future success. For industry (institutional), this
 * same system is a Rope: a coordination mechanism to filter for individuals,
 * with the "cost" of suffering being a necessary part of character refinement.
 * The high theater_ratio (0.82) is critical, leading to the Piton classification
 * from an analytical view. It suggests the system's function has degraded into
 * performance—celebrating intelligence as a proxy for greatness, while the
 * actual mechanism for achieving greatness (character-building through adversity)
 * has atrophied.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The high base extraction (0.75) risks a misclassification of this entire
 * structure as a pure Snare. This is resolved by recognizing the beneficiary's
 * perspective. For industry, the extraction of resilience is not waste but a
 * feature—a filtering mechanism that is part of a larger coordination goal.
 * The system's failure to deliver on this goal (as identified by the Piton
 * classification) does not negate the beneficiary's perception of it as a
 * coordination tool (Rope). This multi-perspectival analysis prevents the
 * system from collapsing a complex social dynamic into a simple predator-prey
 * model, thus resolving the mandatrophy.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_huang_expectation_resilience_2026,
    'Can resilience be synthetically induced without actual economic or physical setbacks?',
    'Comparative study of subjects exposed to simulated adversity vs. "ample doses" of real pain.',
    'If simulation works, the constraint is a Scaffold (a temporary training tool); if not, it is a Mountain of human development.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(huang_expectation_resilience_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Model the intensification of performative theater over time as the link
% between elite education and genuine resilience weakens.

% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(huang_expectation_resilience_2026_tr_t0, huang_expectation_resilience_2026, theater_ratio, 0, 0.95).
narrative_ontology:measurement(huang_expectation_resilience_2026_tr_t5, huang_expectation_resilience_2026, theater_ratio, 5, 0.88).
narrative_ontology:measurement(huang_expectation_resilience_2026_tr_t10, huang_expectation_resilience_2026, theater_ratio, 10, 0.82).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(huang_expectation_resilience_2026_ex_t0, huang_expectation_resilience_2026, base_extractiveness, 0, 0.90).
narrative_ontology:measurement(huang_expectation_resilience_2026_ex_t5, huang_expectation_resilience_2026, base_extractiveness, 5, 0.82).
narrative_ontology:measurement(huang_expectation_resilience_2026_ex_t10, huang_expectation_resilience_2026, base_extractiveness, 10, 0.75).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% This constraint is primarily psychological and social, lacking a formal
% coordination mechanism that would fit the Boltzmann types. No data is declared.
% narrative_ontology:coordination_type(huang_expectation_resilience_2026, resource_allocation).
% narrative_ontology:affects_constraint(huang_expectation_resilience_2026, other_constraint_id).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: hydra_game
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_hydra_game, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: hydra_game
 * human_readable: The Hydra Game (Kirby-Paris Theorem)
 * domain: technological
 * * SUMMARY:
 * The Hydra Game is a mathematical game on a rooted tree. While the player ("Hercules") is guaranteed to win, the proof of termination requires axioms beyond standard Peano Arithmetic. The game's length grows so rapidly that it is physically impossible to complete for any non-trivial starting position, effectively extracting the utility of the "guaranteed win" for any physical agent.
 * * KEY AGENTS:
 * - Physical Computer: Subject (Powerless), attempting to simulate the game.
 * - Axiomatic Architect: Beneficiary (Institutional), using the game to benchmark formal systems.
 * - Proof Theorist: Auditor (Analytical), observing the game as a fixed mathematical truth.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(hydra_game, 0.70). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(hydra_game, 0.50).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(hydra_game, 0.0).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(hydra_game, extractiveness, 0.70).
narrative_ontology:constraint_metric(hydra_game, suppression_requirement, 0.50).
narrative_ontology:constraint_metric(hydra_game, theater_ratio, 0.0).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(hydra_game, natural_law).

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
narrative_ontology:constraint_beneficiary(hydra_game, axiomatic_architects).
narrative_ontology:constraint_victim(hydra_game, physical_computation).
narrative_ontology:constraint_victim(hydra_game, finitist_philosophers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For any physical machine, the game is a Snare. The promise of a "guaranteed win"
% is a trap, as the resources required (time, energy) exceed those available in
% the physical universe. It extracts all computational utility.
constraint_indexing:constraint_classification(hydra_game, snare,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For the architect of formal systems, the game is a Rope. It's a coordination
% tool to benchmark the strength of axiomatic systems. Its unprovability in PA
% justifies the need for stronger systems like ZFC.
constraint_indexing:constraint_classification(hydra_game, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (MOUNTAIN)
% To the proof theorist, the game's termination is a fixed, unchangeable fact
% of the transfinite mathematical landscape (a property of the ordinal ε₀).
% It is an immutable law, hence a Mountain.
constraint_indexing:constraint_classification(hydra_game, mountain,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(universal))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(hydra_game_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(hydra_game, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(hydra_game, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(analytical_view_is_mountain) :-
    constraint_indexing:constraint_classification(hydra_game, mountain, context(agent_power(analytical), _, _, _)).

test(threshold_validation_high_extraction) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(hydra_game, ExtMetricName, E),
    E >= 0.46.

:- end_tests(hydra_game_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The high base extractiveness (0.70) represents the game's extraction of "realizability." It is computable in theory but physically impossible to execute, making the promise of a win meaningless for any physical agent. The suppression score (0.50) reflects how the game's transfinite nature suppresses finitistic intuition, as its termination is unprovable in standard arithmetic.
 * The Perspectival Gap is stark:
 * - For a physical computer (powerless), it's a Snare that consumes all resources for no reward.
 * - For a logician (institutional), it's a Rope used to coordinate research and justify moving to stronger axiomatic systems.
 * - For a pure analyst, it's a Mountain—an immutable feature of mathematics.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * A naive analysis might classify this as a pure Mountain, as it's a mathematical truth. However, this misses the perspectival reality for different agents. By classifying it as a Snare for physical computers and a Rope for system architects, the Deferential Realism framework captures the dual nature of the constraint: it is both a fixed law AND a tool with asymmetric outcomes. This prevents the system from mislabeling the practical, extractive consequences of an abstract "truth."
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_hydra_game,
    'Is the unprovability of termination in Peano Arithmetic a fundamental limit of finitist systems (Mountain), or a constructed boundary designed to be overcome by stronger systems (Rope)?',
    'Discovery of a novel, finitistic proof technique that resolves the game within PA, or a meta-mathematical proof that no such technique can exist.',
    'If Mountain, it confirms a hard limit on formal systems. If Rope, it suggests mathematical "difficulty" is a social and technical construct.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(hydra_game, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection. As a timeless mathematical object,
% the Hydra Game's properties are constant from the moment of its discovery.
% The trajectory is flat, representing its unchanging nature.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(hydra_game_tr_t0, hydra_game, theater_ratio, 0, 0.0).
narrative_ontology:measurement(hydra_game_tr_t5, hydra_game, theater_ratio, 5, 0.0).
narrative_ontology:measurement(hydra_game_tr_t10, hydra_game, theater_ratio, 10, 0.0).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(hydra_game_ex_t0, hydra_game, base_extractiveness, 0, 0.70).
narrative_ontology:measurement(hydra_game_ex_t5, hydra_game, base_extractiveness, 5, 0.70).
narrative_ontology:measurement(hydra_game_ex_t10, hydra_game, base_extractiveness, 10, 0.70).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The game serves as a benchmark for comparing the strength of formal systems,
% functioning as an information standard.
narrative_ontology:coordination_type(hydra_game, information_standard).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */