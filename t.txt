% ============================================================================
% CONSTRAINT STORY: taiwan_existential_sovereignty
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-16
% ============================================================================

:- module(constraint_taiwan_existential_sovereignty, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: taiwan_existential_sovereignty
 * human_readable: The Taiwan Existential Sovereignty Constraint
 * domain: political/economic/technological
 * * SUMMARY:
 * This constraint models the condition of Taiwan's existence under persistent
 * existential threat. It is characterized by the "Silicon Shield" (economic
 * indispensability) acting as a coordination mechanism, while military imbalance
 * and diplomatic isolation function as a coercive extraction mechanism. For the
 * population, the "Status Quo" is a high-stakes reality navigated between the
 * catastrophic extraction of a conflict and the loss of autonomy.
 * * KEY AGENTS:
 * - Taiwanese Citizen: Subject (Powerless), experiences the constraint as a coercive Snare limiting life choices and national potential.
 * - Taiwanese State & Tech Sector: Beneficiary (Institutional), manages the "Silicon Shield" as a functional coordination Rope for global security.
 * - Geopolitical Analyst: Auditor (Analytical), observes a Tangled Rope where a vital coordination function is coupled with severe asymmetric extraction.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
% High extraction: constant military readiness, diplomatic isolation, and psychological stress.
domain_priors:base_extractiveness(taiwan_existential_sovereignty, 0.70).
% High suppression: alternatives (formal independence, unification) are suppressed by overwhelming force.
domain_priors:suppression_score(taiwan_existential_sovereignty, 0.80).
% Low theater: the constraint is highly functional and not performative.
domain_priors:theater_ratio(taiwan_existential_sovereignty, 0.15).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(taiwan_existential_sovereignty, extractiveness, 0.70).
narrative_ontology:constraint_metric(taiwan_existential_sovereignty, suppression_requirement, 0.80).
narrative_ontology:constraint_metric(taiwan_existential_sovereignty, theater_ratio, 0.15).

% Constraint self-claim (what does the constraint claim to be?)
% The geopolitical arrangement is maintained by active pressure and deterrence.
narrative_ontology:constraint_claim(taiwan_existential_sovereignty, enforcement).

% Binary flags
% Requires constant military patrols, diplomatic maneuvering, and economic statecraft.
domain_priors:requires_active_enforcement(taiwan_existential_sovereignty).

% Structural property derivation hooks for Tangled Rope:
% The "Silicon Shield" coordinates global economic and security interests.
narrative_ontology:constraint_beneficiary(taiwan_existential_sovereignty, global_semiconductor_dependent_economies).
% The situation extracts diplomatic freedom and imposes immense defense burdens.
narrative_ontology:constraint_victim(taiwan_existential_sovereignty, taiwanese_citizenry).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The citizen experiences high coercion and extraction of resources/potential.
% χ = 0.70 (ε) * 1.5 (π(powerless)) * 1.0 (σ(national)) = 1.05 (High Snare)
constraint_indexing:constraint_classification(taiwan_existential_sovereignty, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The state and its partners see a vital coordination mechanism (Silicon Shield).
% χ = 0.70 (ε) * -0.2 (π(institutional)) * 1.2 (σ(global)) = -0.168 (Felt as a net benefit)
constraint_indexing:constraint_classification(taiwan_existential_sovereignty, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees both the coordination function and the severe asymmetric extraction.
% This is the canonical classification, resolving the Rope/Snare paradox.
% χ = 0.70 (ε) * 1.15 (π(analytical)) * 1.2 (σ(global)) = 0.966 (High Tangled Rope)
constraint_indexing:constraint_classification(taiwan_existential_sovereignty, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(taiwan_existential_sovereignty_tests).

test(perspectival_gap) :-
    % Verify the gap between the citizen (Snare) and the state (Rope).
    constraint_indexing:constraint_classification(taiwan_existential_sovereignty, TypePowerless,
        context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(taiwan_existential_sovereignty, TypeInstitutional,
        context(agent_power(institutional), _, _, _)),
    TypePowerless == snare,
    TypeInstitutional == rope,
    TypePowerless \= TypeInstitutional.

test(tangled_rope_analytical_view) :-
    % Verify the analytical observer correctly identifies a Tangled Rope.
    constraint_indexing:constraint_classification(taiwan_existential_sovereignty, TypeAnalytical,
        context(agent_power(analytical), _, _, _)),
    TypeAnalytical == tangled_rope.

test(tangled_rope_structural_conditions_met) :-
    % Verify all three structural requirements for Tangled Rope are present.
    narrative_ontology:constraint_beneficiary(taiwan_existential_sovereignty, _), % -> has_coordination_function
    narrative_ontology:constraint_victim(taiwan_existential_sovereignty, _),     % -> has_asymmetric_extraction
    domain_priors:requires_active_enforcement(taiwan_existential_sovereignty).

:- end_tests(taiwan_existential_sovereignty_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base scores reflect a situation of extreme pressure. Extraction (0.70) is high due to
 * the immense defense spending, diplomatic exclusion, and psychological burden required to
 * maintain autonomy. Suppression (0.80) is also high, as the primary alternatives (unification,
 * formal independence) are met with overwhelming coercive threats.
 *
 * The Perspectival Gap is stark:
 * - For the 'powerless' citizen, the daily reality is a Snare. Their choices are constrained,
 *   and national resources are extracted for survival rather than flourishing.
 * - For the 'institutional' state, the same set of facts is managed as a Rope. The "Silicon Shield"
 *   is a masterful coordination tool that aligns global interests with Taiwan's security.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * This constraint is a classic case of potential Mandatrophy, where a system could mistakenly
 * classify it as a pure Snare by focusing only on the coercion. The 'tangled_rope'
 * classification from the analytical perspective resolves this. It correctly identifies that
 * a genuine, high-value coordination function (the Silicon Shield) coexists with and is
 * inseparable from a severe, asymmetrically applied extraction mechanism (the military threat).
 * The system avoids collapsing the paradox into a single, less accurate label.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_taiwan_existential_sovereignty,
    'Will global semiconductor diversification (e.g., US/EU fabs) weaken the Silicon Shield coordination function, causing the Tangled Rope to degrade into a pure Snare?',
    'Monitor changes in diplomatic and military support for Taiwan from key nations as their domestic chip production capacity increases.',
    'If support weakens, the Rope component was purely transactional and is fraying. If support holds, the Rope is reinforced by shared values and strategic alignment.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(taiwan_existential_sovereignty, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data models the intensification of the constraint over the last decade,
% reflecting increased "gray zone" pressure and geopolitical tension.
%
% Theater ratio over time (remains low and functional):
narrative_ontology:measurement(tes_tr_t0, taiwan_existential_sovereignty, theater_ratio, 0, 0.10).
narrative_ontology:measurement(tes_tr_t5, taiwan_existential_sovereignty, theater_ratio, 5, 0.12).
narrative_ontology:measurement(tes_tr_t10, taiwan_existential_sovereignty, theater_ratio, 10, 0.15).

% Extraction over time (shows increasing pressure):
narrative_ontology:measurement(tes_ex_t0, taiwan_existential_sovereignty, base_extractiveness, 0, 0.62).
narrative_ontology:measurement(tes_ex_t5, taiwan_existential_sovereignty, base_extractiveness, 5, 0.66).
narrative_ontology:measurement(tes_ex_t10, taiwan_existential_sovereignty, base_extractiveness, 10, 0.70).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The "Silicon Shield" is a piece of global infrastructure coordinating the world economy.
narrative_ontology:coordination_type(taiwan_existential_sovereignty, global_infrastructure).

% This constraint is structurally coupled with the stability of the global semiconductor supply.
narrative_ontology:affects_constraint(taiwan_existential_sovereignty, semiconductor_supply_chain).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: taiwan_strait_hegemony_shift
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_taiwan_strait_hegemony_shift, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: taiwan_strait_hegemony_shift
 * human_readable: The Taiwan Strait Energy & Logistics Chokepoint
 * domain: political/economic
 * * SUMMARY:
 * This constraint models the geopolitical "lock" created by a hypothetical
 * hegemonic control of Taiwan. By occupying this anchor of the "First Island
 * Chain," the hegemon gains direct control over the sea lines of communication
 * (SLOCs) that provide the vast majority of energy and trade for neighboring
 * states like Japan and South Korea. This physical reality creates a
 * "Client State Gravitational Pull," forcing neighbors to subordinate their
 * foreign policy to the hegemon to ensure national survival.
 * * KEY AGENTS:
 * - Neighboring State Leadership (e.g., Japan): Subject (Powerless)
 * - Hegemonic Naval Command: Beneficiary (Institutional)
 * - Geopolitical Analyst: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
% Rationale (Extraction): 0.90. Represents the near-total extraction of
% strategic autonomy. A nation's existence becomes "permission-based."
domain_priors:base_extractiveness(taiwan_strait_hegemony_shift, 0.90).
% Rationale (Suppression): 0.80. High suppression of alternative security
% architectures (e.g., alliances) as the physical barrier renders them
% logistically unviable.
domain_priors:suppression_score(taiwan_strait_hegemony_shift, 0.80).
% Rationale (Theater): 0.10. This is a highly functional system of control,
% not a performative one.
domain_priors:theater_ratio(taiwan_strait_hegemony_shift, 0.10).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(taiwan_strait_hegemony_shift, extractiveness, 0.90).
narrative_ontology:constraint_metric(taiwan_strait_hegemony_shift, suppression_requirement, 0.80).
narrative_ontology:constraint_metric(taiwan_strait_hegemony_shift, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% The hegemon claims this is a necessary mechanism for regional stability.
narrative_ontology:constraint_claim(taiwan_strait_hegemony_shift, enforcement).

% Binary flags
% Requires active enforcement (naval patrols, ADIZ control, etc.).
domain_priors:requires_active_enforcement(taiwan_strait_hegemony_shift).

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(taiwan_strait_hegemony_shift, regional_hegemon).
narrative_ontology:constraint_victim(taiwan_strait_hegemony_shift, japanese_sovereign_autonomy).
narrative_ontology:constraint_victim(taiwan_strait_hegemony_shift, south_korean_security_independence).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (MOUNTAIN)
% For Japan, the hegemon's control of Taiwan is an unchangeable feature of
% geography. They cannot negotiate with a blockade at their doorstep; they
% must accept the new terrain. The extraction is felt as a natural law.
constraint_indexing:constraint_classification(taiwan_strait_hegemony_shift, mountain,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(regional))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The hegemon views this control as a Rope—a functional coordination mechanism.
% It allows them to "weave" the regional economy into a new hierarchy, using
% the threat of SLOC disruption to keep neighbors aligned.
constraint_indexing:constraint_classification(taiwan_strait_hegemony_shift, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(continental))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees a system that has a genuine coordination function (for the
% hegemon) but also imposes severe asymmetric extraction on its victims. It
% requires active enforcement to maintain. This is the definition of a Tangled Rope.
constraint_indexing:constraint_classification(taiwan_strait_hegemony_shift, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(taiwan_strait_hegemony_shift_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(taiwan_strait_hegemony_shift, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(taiwan_strait_hegemony_shift, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    assertion(TypePowerless == mountain),
    assertion(TypeInstitutional == rope).

test(analytical_classification_is_tangled_rope) :-
    % The analytical view must resolve the conflict into a Tangled Rope.
    constraint_indexing:constraint_classification(taiwan_strait_hegemony_shift, tangled_rope, context(agent_power(analytical), _, _, _)).

test(threshold_validation_high_extraction) :-
    narrative_ontology:constraint_metric(taiwan_strait_hegemony_shift, extractiveness, E),
    assertion(E >= 0.46).

:- end_tests(taiwan_strait_hegemony_shift_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect a scenario of maximum geopolitical leverage. The base
 * extractiveness of 0.90 represents the extraction of national sovereignty
 * itself. The suppression of 0.80 reflects the foreclosure of all meaningful
 * strategic alternatives for affected nations.
 *
 * The key insight is the perspectival gap. For Japan (powerless), the new
 * reality is a Mountain—an immutable fact of geography they must navigate.
 * For the hegemon (institutional), it's a Rope—a tool for coordinating
 * regional order. The analytical observer must reconcile these views. Because
 * the system has a clear coordination function (for the beneficiary), clear
 * asymmetric extraction (on the victim), and requires active enforcement, it
 * is classified as a Tangled Rope. This prevents the system from mislabeling
 * the hegemon's coordination as pure extraction (Snare) or ignoring the
 * victim's plight.
 *
 * [RESOLVED MANDATROPHY] The high extraction is not a simple Snare because
 * it is coupled to a functional (albeit coercive) system of regional
 * coordination, making it a Tangled Rope from an objective standpoint.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_taiwan_strait_hegemony_shift,
    'Can affected nations develop sufficient energy/economic autonomy (e.g., nuclear power, alternative trade routes) to mitigate the chokepoint''s leverage?',
    'Analysis of 2050 energy independence plans and viability of non-Strait logistics (e.g., Arctic routes) vs. baseline industrial import requirements.',
    'If yes, the constraint degrades from Tangled Rope to a less coercive Rope. If no, it solidifies as a permanent feature of the regional order.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(taiwan_strait_hegemony_shift, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This models the constraint intensifying over a 10-year period following
% the initial geopolitical shift. Extraction grows as the hegemon solidifies
% control and institutionalizes its leverage. Theater remains low.

% Theater ratio over time (metric_substitution detection):
narrative_ontology:measurement(tshs_tr_t0, taiwan_strait_hegemony_shift, theater_ratio, 0, 0.05).
narrative_ontology:measurement(tshs_tr_t5, taiwan_strait_hegemony_shift, theater_ratio, 5, 0.08).
narrative_ontology:measurement(tshs_tr_t10, taiwan_strait_hegemony_shift, theater_ratio, 10, 0.10).

% Extraction over time (extraction_accumulation detection):
narrative_ontology:measurement(tshs_ex_t0, taiwan_strait_hegemony_shift, base_extractiveness, 0, 0.60).
narrative_ontology:measurement(tshs_ex_t5, taiwan_strait_hegemony_shift, base_extractiveness, 5, 0.82).
narrative_ontology:measurement(tshs_ex_t10, taiwan_strait_hegemony_shift, base_extractiveness, 10, 0.90).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The coordination is achieved through the threat and application of force.
narrative_ontology:coordination_type(taiwan_strait_hegemony_shift, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: tarski_undefinability
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Alfred Tarski (1933) / Philosophy of Language and Logic
% ============================================================================

:- module(constraint_tarski_undefinability, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: tarski_undefinability
 * human_readable: Tarski's Undefinability Theorem
 * domain: technological/logic/mathematics
 * temporal_scope: Permanent (Universal Laws of Information)
 * spatial_scope: Global (Formal Languages)
 * * SUMMARY:
 * Tarski's Undefinability Theorem states that "truth" in a sufficiently powerful 
 * formal language cannot be defined within that same language. Any attempt to 
 * create a universal "Truth Predicate" for a language L within L itself results 
 * in a Liar-style paradox. This forces a hierarchy of languages where "Truth" 
 * for Language L can only be defined in a more expressive Meta-Language M.
 * * KEY AGENTS:
 * - The Foundationalist: Seeking a single, self-contained system of total truth.
 * - The System Architect: Designing multi-layered software or logical stacks.
 * - The Infinite Climber: An agent forced to move to higher meta-levels to 
 * achieve semantic clarity.
 * * NARRATIVE ARC:
 * The theorem functions as a hard ceiling (Mountain) for self-contained logic. 
 * To move forward, agents must build a "Rope" of meta-languages (Tarski's 
 * hierarchy). However, for those trapped in a single layer of reality with 
 * no "Meta" access, the theorem acts as a "Snare," making certain truths 
 * fundamentally unspeakable.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for structural integration and script extraction
narrative_ontology:interval(tarski_interval, 0, 10).
narrative_ontology:constraint_claim(tarski_undefinability, mountain).

% Base extractiveness: 0.2 (Low)
% Rationale: It extracts "semantic closure" but doesn't steal resources.
% It forces energy into the creation of Meta-Levels.
domain_priors:base_extractiveness(tarski_undefinability, 0.2).

% Suppression score: 0.3 (Low-Moderate)
% Rationale: Alternatives (like paraconsistent logic) are visible but 
% the theorem remains a dominant boundary in classical logic.
domain_priors:suppression_score(tarski_undefinability, 0.3).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(tarski_undefinability, extractiveness, 0.2).
narrative_ontology:constraint_metric(tarski_undefinability, suppression_requirement, 0.3).

% Enforcement: Emerges naturally from the structure of formal syntax.
domain_priors:emerges_naturally(tarski_undefinability).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(tarski_undefinability, meta_language_architects).
constraint_victim(tarski_undefinability, [monistic_philosophers, self_contained_ai]).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE MATHEMATICIAN - MOUNTAIN
   --------------------------------------------------------------------------
   
   WHO: analytical (The objective observer of formal systems)
   WHEN: civilizational (Permanent mathematical reality)
   WHERE: trapped (Logic cannot bypass its own syntactic limits)
   SCOPE: global
   
   WHY THIS CLASSIFICATION:
   To the mathematician, the theorem is a Mountain. It is an unchangeable peak 
   in the landscape of logic. You cannot "legislate" a truth predicate into a 
   language without breaking the law of non-contradiction. It is a physical 
   limit of information processing.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    tarski_undefinability,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(civilizational),
        exit_options(trapped),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE COMPILER ARCHITECT - ROPE
   --------------------------------------------------------------------------
   
   WHO: institutional (Rule-making power over a software stack)
   WHEN: biographical (Achieving goals within a project lifetime)
   WHERE: arbitrage (Can move between language levels/stacks)
   SCOPE: national (The reach of their specific ecosystem)
   
   WHY THIS CLASSIFICATION:
   For the architect, the theorem is a Rope. It provides a coordination 
   mechanism for building secure systems. By separating the "Object Language" 
   (the code) from the "Meta-Language" (the compiler/type checker), they 
   can safely define correctness without risk of infinite recursion.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    tarski_undefinability,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(arbitrage),
        spatial_scope(national)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE TRAPPED SUBJECT - SNARE
   --------------------------------------------------------------------------
   
   WHO: powerless (A subject inside a closed system)
   WHEN: immediate (Living within a single discursive frame)
   WHERE: trapped (Has no access to the "Meta" level)
   SCOPE: local
   
   WHY THIS CLASSIFICATION:
   For an agent trapped in a single system (like an AI with no external 
   sensors or a human in a totalizing ideology), the theorem is a Snare. 
   They can sense that "truth" exists but are syntactically barred from 
   defining it. The harder they try to ground their reality, the tighter 
   the paradoxes pull, leading to cognitive dissonance or systemic collapse.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    tarski_undefinability,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(tarski_undefinability_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(tarski_undefinability, Type1, context(agent_power(analytical), _, _, _)),
    constraint_indexing:constraint_classification(tarski_undefinability, Type2, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(tarski_undefinability, Type3, context(agent_power(powerless), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3.

test(power_semantic_extraction) :-
    % Institutional actors (architects) extract utility by building meta-levels.
    % Powerless subjects suffer the inability to name their truth.
    domain_priors:base_extractiveness(tarski_undefinability, Score),
    Score < 0.3.

test(meta_level_arbitrage) :-
    % If you have arbitrage (access to Meta-Language), it's a Rope.
    constraint_indexing:constraint_classification(tarski_undefinability, rope, context(_, _, arbitrage, _)).

:- end_tests(tarski_undefinability_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * * 1. EXTRACTIVENESS SCORE (0.2):
 * Reasoning: Semantic undefinability doesn't "steal" wealth, but it does 
 * extract "Closure." It prevents a system from being self-contained, 
 * which is a low-level structural extraction.
 * * 2. SUPPRESSION SCORE (0.3):
 * Reasoning: Alternatives like Kripke's theory of truth or paraconsistent 
 * logics are known and studied, but Tarski's "hierarchy" remains the 
 * default "Mountain" for classical formalists.
 * * 3. PERSPECTIVE SELECTION:
 * The Analyst sees a Mountain (fact of logic).
 * The Architect sees a Rope (method for building levels).
 * The Subject sees a Snare (inability to resolve their own truth).
 * * 4. AMBIGUITIES:
 * - Resolved the "Snare" aspect by framing it as a linguistic trap for 
 * agents without "Meta-Expressivity."
 * * 5. CONFIDENCE:
 * High: Mathematical basis.
 * Medium: Extent to which "trapped subjects" feel this as a Snare.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    natural_language_meta_closure,
    "Is human 'Natural Language' the ultimate Meta-Language that can define its own truth, or is it merely one layer in an infinite hierarchy we cannot see?",
    resolution_mechanism("Discovery of a definitive Truth Predicate in linguistics that does not lead to paradox"),
    impact("If Closure: Tarski's Law is a Rope for AI but not for Humans. If Infinite: We are all trapped in a Snare."),
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Paraconsistent Logic (Dialetheism)
 * Viability: Allows for some true contradictions, potentially defining 
 * truth within the same language.
 * Suppression: High. Mainstream mathematics views contradictions as 
 * systemic failure.
 * * ALTERNATIVE 2: Kripkean Truth (Fixed-point semantics)
 * Viability: Allows a truth predicate to be "partially" defined.
 * * CONCLUSION:
 * The existence of paraconsistent alternatives suggests Tarski's Theorem 
 * is a "Snare" used by classical logicians to enforce a specific 
 * hierarchical order of reality.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * * 1. Load: ?- [constraint_tarski_undefinability].
 * 2. Multi-perspective: ?- multi_index_report(tarski_undefinability).
 * 3. Run tests: ?- run_tests(tarski_undefinability_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: teaching_horses_to_sing
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_teaching_horses_to_sing, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: teaching_horses_to_sing
 * human_readable: The Sing-or-Die Gambit
 * domain: political
 * * SUMMARY:
 * A thief under a death sentence convinces a monarch to grant a one-year stay of
 * execution in exchange for an impossible promise: teaching the monarch's horse
 * to sing. The constraint is the year-long bargain, which functions as a tool
 * for existential arbitrage against the certainty of immediate death. It is a
 * constructed system of high extraction (the thief's liberty) that also serves
 * a coordination function (the monarch's amusement).
 * * KEY AGENTS:
 * - The Thief: Subject (Powerless), who is trapped in the arrangement.
 * - The Monarch: Beneficiary (Institutional), who enjoys the spectacle.
 * - The System Auditor: Observer (Analytical), who assesses the structure of the bargain.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(teaching_horses_to_sing, 0.75). % High. The thief's entire liberty and life for a year are extracted.
domain_priors:suppression_score(teaching_horses_to_sing, 0.40).   % Moderate. The impossibility is known, but the monarch's authority suppresses dissent.
domain_priors:theater_ratio(teaching_horses_to_sing, 0.10).       % Low. The daily singing is a real, enforced activity, not just a performance of compliance.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(teaching_horses_to_sing, extractiveness, 0.75).
narrative_ontology:constraint_metric(teaching_horses_to_sing, suppression_requirement, 0.40).
narrative_ontology:constraint_metric(teaching_horses_to_sing, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% The bargain is a constructed deal, not a natural law or simple coordination.
narrative_ontology:constraint_claim(teaching_horses_to_sing, constructed).

% Binary flags
domain_priors:requires_active_enforcement(teaching_horses_to_sing). % Guards must keep the thief imprisoned.

% Structural property derivation hooks:
% The monarch's amusement is the coordination function. The thief's imprisonment is the asymmetric extraction.
narrative_ontology:constraint_beneficiary(teaching_horses_to_sing, the_monarch).
narrative_ontology:constraint_victim(teaching_horses_to_sing, the_thief).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (THE THIEF) - SNARE
% For the thief, the bargain is a trap. Despite buying time, he is imprisoned
% and his life is forfeit at the end. The effective extraction is immense.
% χ = 0.75 * 1.5 (powerless) * 0.8 (local) = 0.90.
constraint_indexing:constraint_classification(teaching_horses_to_sing, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (THE MONARCH) - ROPE
% For the monarch, this is a low-cost coordination mechanism for entertainment.
% The effective extraction is negative, indicating a net benefit.
% χ = 0.75 * -0.2 (institutional) * 0.9 (regional) = -0.135.
constraint_indexing:constraint_classification(teaching_horses_to_sing, rope,
    context(agent_power(institutional),
            time_horizon(biographical),
            exit_options(mobile),
            spatial_scope(regional))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER - TANGLED ROPE
% Structurally, the system has a coordination function (amusement) and
% asymmetric extraction (imprisonment), requiring active enforcement. This is
% the definition of a Tangled Rope.
% χ = 0.75 * 1.15 (analytical) * 1.2 (global) = 1.035.
constraint_indexing:constraint_classification(teaching_horses_to_sing, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(teaching_horses_to_sing_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(teaching_horses_to_sing, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(teaching_horses_to_sing, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(analytical_classification_is_tangled_rope) :-
    % The analytical view must resolve the conflict as a Tangled Rope.
    constraint_indexing:constraint_classification(teaching_horses_to_sing, tangled_rope, context(agent_power(analytical), _, _, _)).

test(threshold_validation_high_extraction) :-
    % Verify the base extraction meets the Snare/Tangled Rope threshold.
    narrative_ontology:constraint_metric(teaching_horses_to_sing, extractiveness, E),
    E >= 0.46.

:- end_tests(teaching_horses_to_sing_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The original file's classifications were based on a purely narrative interpretation
 * that conflicted with the system's mechanics. This version corrects them.
 * - The Thief (Snare): While the thief *hopes* the bargain is a Rope to survival,
 *   structurally he is trapped in a high-extraction system where his liberty is
 *   the cost. The calculated effective extraction (χ=0.90) is extremely high,
 *   confirming the Snare classification.
 * - The Monarch (Rope): The monarch experiences a net benefit (χ=-0.135),
 *   viewing the arrangement as a simple coordination mechanism for his amusement.
 * - Analytical (Tangled Rope): This is the key insight. The system is not a pure
 *   Snare because it has a genuine (if frivolous) coordination function for the
 *   beneficiary. It is not a Rope because of the coercive, asymmetric extraction
 *   from the victim. The Tangled Rope classification correctly identifies this
 *   hybrid nature.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * By classifying the system as a Tangled Rope, the model avoids mischaracterizing
 * it as a pure Snare (ignoring the monarch's coordination goal) or a pure Rope
 * (ignoring the thief's exploitation). It correctly identifies the dual-function
 * nature of the constraint.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_teaching_horses_to_sing_1,
    'Is the thiefs primary motivation survival arbitrage (a bet on stochastic events) or a belief in a hidden potential (horses can be taught)?',
    'Post-hoc interview with the thief or discovery of a hidden training manual.',
    'If arbitrage, the constraint is a pure gamble. If belief, it is an attempt to transform a Mountain into a Rope.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(teaching_horses_to_sing, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This constraint is established and remains static for its one-year duration.
% Therefore, the metrics do not drift over the interval.
%
% Theater ratio over time:
narrative_ontology:measurement(thts_tr_t0, teaching_horses_to_sing, theater_ratio, 0, 0.10).
narrative_ontology:measurement(thts_tr_t5, teaching_horses_to_sing, theater_ratio, 5, 0.10).
narrative_ontology:measurement(thts_tr_t10, teaching_horses_to_sing, theater_ratio, 10, 0.10).

% Extraction over time:
narrative_ontology:measurement(thts_ex_t0, teaching_horses_to_sing, base_extractiveness, 0, 0.75).
narrative_ontology:measurement(thts_ex_t5, teaching_horses_to_sing, base_extractiveness, 5, 0.75).
narrative_ontology:measurement(thts_ex_t10, teaching_horses_to_sing, base_extractiveness, 10, 0.75).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The bargain is a mechanism for enforcing the monarch's will and extracting
% amusement, fitting the 'enforcement_mechanism' coordination type.
narrative_ontology:coordination_type(teaching_horses_to_sing, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: tear_gas_repression_2026
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-05-21
% ============================================================================

:- module(constraint_tear_gas_repression_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: tear_gas_repression_2026
 * human_readable: The Tear Gas Riot-Incentive Loop
 * domain: political/technological/social
 * * SUMMARY:
 * This constraint analyzes the use of tear gas as a tool that purportedly
 * manages crowds but functionally incites riots to justify state force. It
 * maps the transition from a citizen's right to protest to a requirement
 * for "armoring" (gas masks) to survive state repression.
 * * KEY AGENTS:
 * - [Protesters/Journalists]: Subject (Powerless) - Subjected to "aerosolized
 * pain" and federal "invasions".
 * - [State/Federal Agents]: Beneficiary (Institutional) - Utilize gas to
 * clear crowds and frame gatherings as "riots".
 * - [Analytical Observer]: Auditor (Analytical) - Documents the specific gear and
 * logical fallacies of "crowd control".
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Extremely high extraction (0.88) due to the excruciating physiological pain
% and long-term health impacts (e.g., menstrual disruption).
domain_priors:base_extractiveness(tear_gas_repression_2026, 0.88).

% High suppression (0.82); unmarked vans and "unavoidable" gas clouds restrict
% exit options for civilians.
domain_priors:suppression_score(tear_gas_repression_2026, 0.82).

% High theater ratio (0.78); the "failed state" or "riot" label is a
% theatrical justification for functional violence.
domain_priors:theater_ratio(tear_gas_repression_2026, 0.78).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(tear_gas_repression_2026, extractiveness, 0.88).
narrative_ontology:constraint_metric(tear_gas_repression_2026, suppression_requirement, 0.82).
narrative_ontology:constraint_metric(tear_gas_repression_2026, theater_ratio, 0.78).

% The state claims this is a coordination tool for crowd control.
narrative_ontology:constraint_claim(tear_gas_repression_2026, coordination).

% Requires active enforcement by DHS, feds, and local police.
domain_priors:requires_active_enforcement(tear_gas_repression_2026).

% Structural property derivation hooks for Tangled Rope.
% has_coordination_function/1 is derived from constraint_beneficiary/2.
% has_asymmetric_extraction/1 is derived from constraint_victim/2.
narrative_ontology:constraint_beneficiary(tear_gas_repression_2026, state_and_federal_agents).
narrative_ontology:constraint_victim(tear_gas_repression_2026, protesters_and_journalists).


/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For the protester, tear gas is a snare: a trap of "involuntary gasping" and
% physical pain that makes presence in public space a "fishbowl" of suffering.
constraint_indexing:constraint_classification(tear_gas_repression_2026, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For the State, the gas is a rope: a "routine tool" for coordinating
% crowd dispersal and maintaining "sovereign policy choices".
constraint_indexing:constraint_classification(tear_gas_repression_2026, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The Auditor identifies the "riot-incentive" loop: the gas is a hybrid
% coordination (dispersal) and extraction (incitement/harm) tool.
constraint_indexing:constraint_classification(tear_gas_repression_2026, tangled_rope,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(tear_gas_repression_2026_tests).

test(perspectival_gap) :-
    % Subject feels a Snare (Trapped/Pain), State sees a Rope (Coordination).
    constraint_indexing:constraint_classification(tear_gas_repression_2026, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(tear_gas_repression_2026, rope, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(tear_gas_repression_2026, tangled_rope, context(agent_power(analytical), _, _, _)).

test(tangled_rope_threshold_validation) :-
    % A tangled_rope requires high extraction and suppression.
    domain_priors:base_extractiveness(tear_gas_repression_2026, E),
    domain_priors:suppression_score(tear_gas_repression_2026, S),
    E >= 0.50,
    S > 0.40.

:- end_tests(tear_gas_repression_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The extraction score (0.88) is based on the article's account of "aerosolized
 * pain" and the loss of breath control. The high theater_ratio (0.78) stems
 * from the semantic struggle over "protest" vs "riot"—the state uses the gas
 * to create the chaos it claims to be preventing. The Tangled Rope classification
 * is critical because the tool has a genuine (if brutal) coordination function
 * (dispersal) alongside its primary extractive function (suppressing dissent,
 * inflicting harm, justifying further force).
 *
 * MANDATROPHY ANALYSIS:
 * The Tangled Rope classification is vital because the gas does coordinate
 * (dispersal) but extracts the civilian's right to occupy public space.
 * [RESOLVED MANDATROPHY] - The link between gas and riot incitement is causal
 * per the auditor's epiphany. The system correctly identifies the hybrid nature
 * instead of misclassifying it as a pure Snare, which would ignore the state's
 * coordination claim.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_tear_gas_repression_2026,
    'Does tear gas prevent violence or functionally incite it to justify force?',
    'Comparative analysis of protest policing tactics and escalation outcomes across different jurisdictions.',
    'If gas primarily disperses without escalating, it is a Rope; if it reliably incites, it is a Snare/Tangled Rope.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(tear_gas_repression_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Model the escalation from 2020 (T=0) to the Minneapolis surge in 2025 (T=10).

% Theater ratio: Increases as the "riot" label is applied to HOA-meeting style
% crowds to justify tactical escalation.
narrative_ontology:measurement(tear_gas_repression_2026_tr_t0, tear_gas_repression_2026, theater_ratio, 0, 0.35).
narrative_ontology:measurement(tear_gas_repression_2026_tr_t5, tear_gas_repression_2026, theater_ratio, 5, 0.55).
narrative_ontology:measurement(tear_gas_repression_2026_tr_t10, tear_gas_repression_2026, theater_ratio, 10, 0.78).

% Extraction: Increases as "peaceful" crowds are met with unmarked vans and
% more potent chemical "pea-soupers".
narrative_ontology:measurement(tear_gas_repression_2026_ex_t0, tear_gas_repression_2026, base_extractiveness, 0, 0.45).
narrative_ontology:measurement(tear_gas_repression_2026_ex_t5, tear_gas_repression_2026, base_extractiveness, 5, 0.70).
narrative_ontology:measurement(tear_gas_repression_2026_ex_t10, tear_gas_repression_2026, base_extractiveness, 10, 0.88).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The use of tear gas is a specific type of enforcement mechanism, which
% allows for Boltzmann purity analysis against other constraints of this type.
narrative_ontology:coordination_type(tear_gas_repression_2026, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: temporal_scale_arbitrage
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-28
% ============================================================================

:- module(constraint_temporal_scale_arbitrage, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: temporal_scale_arbitrage
 * human_readable: Temporal Scale Arbitrage in Astronomy
 * domain: technological
 * * SUMMARY:
 * This constraint describes the strategic exploitation of cosmic events occurring
 * across vast ranges of time scales—from nanoseconds to human lifetimes.
 * By shifting from spatial mapping to time-domain search, astronomers arbitrage
 * "fleeting explosions" by matching detector cadence to the specific temporal
 * signature of the event. This industrializes discovery, creating a coordination
 * mechanism for scientists but an extractive filter for cosmic phenomena.
 * * KEY AGENTS:
 * - High-Cadence Survey Teams: Beneficiaries who use the automated "conveyor belt" system.
 * - Transient Cosmic Events: Subjects whose scientific value is lost if they occur outside the detection window.
 * - Analytical Observer: An auditor evaluating the system's overall scientific efficiency and biases.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(temporal_scale_arbitrage, 0.76). % Snare extraction >= 0.46
domain_priors:suppression_score(temporal_scale_arbitrage, 0.4).   % Structural property (raw, unscaled).
domain_priors:theater_ratio(temporal_scale_arbitrage, 0.10).      % Low theater; this is a highly functional system.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(temporal_scale_arbitrage, extractiveness, 0.76).
narrative_ontology:constraint_metric(temporal_scale_arbitrage, suppression_requirement, 0.4).
narrative_ontology:constraint_metric(temporal_scale_arbitrage, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
narrative_ontology:constraint_claim(temporal_scale_arbitrage, constructed).

% Binary flags
domain_priors:requires_active_enforcement(temporal_scale_arbitrage). % Required for Tangled Rope

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(temporal_scale_arbitrage, high_cadence_survey_teams).
narrative_ontology:constraint_victim(temporal_scale_arbitrage, unobserved_transient_events).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE TRANSIENT EVENT (SNARE)
% For a fleeting cosmic event, the survey's cadence is a Snare. If it occurs
% outside the active "conveyor belt" window, its scientific information is
% permanently lost.
constraint_indexing:constraint_classification(temporal_scale_arbitrage, snare,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE SURVEY COORDINATOR (ROPE)
% For the collaborating institutions, the system is a Rope—a functional
% mechanism to coordinate "conveyor belt" searches and investigate phenomena
% systematically.
constraint_indexing:constraint_classification(temporal_scale_arbitrage, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Analytically, the system is a Tangled Rope. It has a genuine coordination
% function (beneficiaries) but also imposes asymmetric extraction (victims -
% missed data) and requires active enforcement (the automated survey system).
constraint_indexing:constraint_classification(temporal_scale_arbitrage, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(temporal_scale_arbitrage_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(temporal_scale_arbitrage, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(temporal_scale_arbitrage, rope, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(temporal_scale_arbitrage, tangled_rope, context(agent_power(analytical), _, _, _)).

test(threshold_validation_high_extraction) :-
    narrative_ontology:constraint_metric(temporal_scale_arbitrage, extractiveness, E),
    E >= 0.46.

test(tangled_rope_structural_properties) :-
    % A tangled_rope classification requires these three properties.
    narrative_ontology:constraint_beneficiary(temporal_scale_arbitrage, _), % -> has_coordination_function
    narrative_ontology:constraint_victim(temporal_scale_arbitrage, _),     % -> has_asymmetric_extraction
    domain_priors:requires_active_enforcement(temporal_scale_arbitrage).

:- end_tests(temporal_scale_arbitrage_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness of 0.76 reflects the high value of transient data that is
 * captured by the system; this information would otherwise be lost. The suppression
 * of 0.4 reflects how this industrialized, high-cadence approach displaces older,
 * serendipitous "happy accident" methods of discovery. The key insight is the
 * perspectival gap: what is a pure coordination Rope for scientists is a pure
 * extraction Snare for the phenomena being observed. The analytical view must
 * therefore be Tangled Rope, as it acknowledges both functions simultaneously.
 *
 * * MANDATROPHY ANALYSIS:
 * [RESOLVED MANDATROPHY] The high extraction (0.76) is resolved by the Tangled
 * Rope classification. The system avoids mandatrophy by not misclassifying the
 * constraint as a pure Snare. It correctly identifies that a genuine, valuable
 * coordination function exists for the beneficiaries (astronomers), while
 * simultaneously acknowledging the coercive, extractive nature of the system's
 * temporal filter on reality for its victims (unobserved events). The value
 * extracted is scientific knowledge, which is a legitimate goal, but the
 * mechanism creates a new class of invisible phenomena.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_temporal_scale_arbitrage_1,
    'Is the 0.76 extraction of time-domain data a functional necessity for understanding the universe or a predatory focus on data volume over scientific insight?',
    'Audit of scientific value produced per petabyte of survey data vs. value from traditional chance observations.',
    'If necessity -> Justified Tangled Rope. If predatory -> Degraded Snare.',
    confidence_without_resolution(medium)
).

omega_variable(
    omega_temporal_scale_arbitrage_2,
    'Are there crucial cosmic phenomena occurring on timescales (e.g., femtoseconds) that current conveyor belts are structurally blind to and thus actively suppress?',
    'Development of detectors capable of femtosecond-scale resolution and analysis of their findings.',
    'If yes -> Current Rope is a Snare for an entire class of physics. If no -> The spectrum is well-covered.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(temporal_scale_arbitrage, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This system represents the industrialization of astronomical discovery.
% Over time, the process becomes more efficient (higher extraction) but also
% more formalized (slight rise in theater).
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(temporal_scale_arbitrage_tr_t0, temporal_scale_arbitrage, theater_ratio, 0, 0.05).
narrative_ontology:measurement(temporal_scale_arbitrage_tr_t5, temporal_scale_arbitrage, theater_ratio, 5, 0.08).
narrative_ontology:measurement(temporal_scale_arbitrage_tr_t10, temporal_scale_arbitrage, theater_ratio, 10, 0.10).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(temporal_scale_arbitrage_ex_t0, temporal_scale_arbitrage, base_extractiveness, 0, 0.70).
narrative_ontology:measurement(temporal_scale_arbitrage_ex_t5, temporal_scale_arbitrage, base_extractiveness, 5, 0.73).
narrative_ontology:measurement(temporal_scale_arbitrage_ex_t10, temporal_scale_arbitrage, base_extractiveness, 10, 0.76).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The system coordinates the allocation of a key scientific resource: telescope
% observation time and subsequent analysis focus.
narrative_ontology:coordination_type(temporal_scale_arbitrage, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: tx_hispanic_pivot
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-20
% ============================================================================

:- module(constraint_tx_hispanic_pivot, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: tx_hispanic_pivot
 * human_readable: The Texas Hispanic Voting Block Volatility (2024-2026)
 * domain: political
 * * SUMMARY:
 * A political alliance formed between the GOP and a significant portion of the
 * Texas Hispanic electorate in 2024 is fracturing due to aggressive federal
 * immigration enforcement tactics. What was initially a cooperative arrangement
 * based on shared goals (border security) is now perceived by the community as
 * a coercive, extractive system that imposes high social costs, threatening to
 * reverse electoral gains and destabilize the GOP's national coalition.
 * * KEY AGENTS:
 * - South Texas Hispanic Voters: Subject (Powerless) - Experiencing the negative
 *   externalities of enforcement.
 * - GOP Electoral Apparatus: Beneficiary (Institutional) - Gained power from the
 *   2024 alliance and seeks to maintain it through enforcement claims.
 * - Political Strategists: Auditor (Analytical) - Observing the breakdown of
 *   the alliance and its structural properties.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(tx_hispanic_pivot, 0.70). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(tx_hispanic_pivot, 0.60).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(tx_hispanic_pivot, 0.15).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(tx_hispanic_pivot, extractiveness, 0.70).
narrative_ontology:constraint_metric(tx_hispanic_pivot, suppression_requirement, 0.60).
narrative_ontology:constraint_metric(tx_hispanic_pivot, theater_ratio, 0.15).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(tx_hispanic_pivot, enforcement).

% Binary flags
domain_priors:requires_active_enforcement(tx_hispanic_pivot). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(tx_hispanic_pivot, gop_electoral_apparatus).
narrative_ontology:constraint_victim(tx_hispanic_pivot, south_texas_hispanic_voters).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% High extraction felt as a predatory trap. The initial promise of coordination
% (border security) has been replaced by coercive enforcement with high local costs.
constraint_indexing:constraint_classification(tx_hispanic_pivot, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Viewed as essential enforcement for national coordination. The negative
% externalities are dismissed as necessary costs or "propaganda".
constraint_indexing:constraint_classification(tx_hispanic_pivot, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Default analytical context. The system has a genuine coordination function
% (beneficiaries exist) but also imposes high, asymmetric extraction on a
% specific group (victims exist) and requires active enforcement. This is the
% canonical definition of a Tangled Rope.
constraint_indexing:constraint_classification(tx_hispanic_pivot, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(tx_hispanic_pivot_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(tx_hispanic_pivot, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(tx_hispanic_pivot, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(analytical_observer_is_tangled_rope) :-
    constraint_indexing:constraint_classification(tx_hispanic_pivot, tangled_rope, context(agent_power(analytical), _, _, _)).

test(threshold_validation) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(tx_hispanic_pivot, ExtMetricName, E),
    E >= 0.46. % Ensures it's a high-extraction constraint.

:- end_tests(tx_hispanic_pivot_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness (0.70) and suppression (0.60) are high, reflecting a
 * system that delivers significant political power to its beneficiaries while
 * imposing tangible costs (social disruption, fear) on its victims.
 *
 * The Perspectival Gap is stark:
 * - For the South Texas voter (powerless, trapped), the alliance has become a
 *   Snare. The perceived benefit of border security is now outweighed by the
 *   coercive cost of aggressive internal enforcement.
 * - For the GOP apparatus (institutional, mobile), the system is a Rope. It's
 *   a necessary tool for national political coordination and maintaining an
 *   electoral coalition, with local discontent seen as a manageable externality.
 * - The Analytical observer sees both sides. Because the constraint has a
 *   coordination function (beneficiary), asymmetric extraction (victim), and
 *   requires active enforcement, it is classified as a Tangled Rope.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * Classifying this as a Tangled Rope is critical. A simple Snare classification
 * would miss the fact that this system emerged from a genuine, if temporary,
 * coordination pact. The Tangled Rope acknowledges the initial Rope-like
 * function (shared interest in border security) while correctly identifying
 * its degradation into a coercive, extractive mechanism. This prevents the
 * system from mislabeling the complex political dynamic as pure, one-sided
 * predation from the outset.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_tx_pivot_stickiness,
    'Was the 2024 shift a permanent realignment or a temporary protest vote against Democrats?',
    'Compare 2026 and 2028 midterm precinct data in South Texas to 2024 results.',
    'If permanent, the GOP has more latitude for coercive tactics. If temporary, the coalition is fragile and the Snare classification becomes dominant.',
    confidence_without_resolution(medium)
).

omega_variable(
    omega_tx_pivot_catalyst,
    'Was the "Renee Good incident" the true catalyst for the approval drop, or just a focal point for pre-existing discontent?',
    'Sentiment analysis of local Texas social media and news coverage pre- and post-incident.',
    'If it was the true catalyst, the constraint is highly sensitive to single events. If not, the decay is structural and harder to reverse.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(tx_hispanic_pivot, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data models the degradation of the political alliance over the
% 2024-2026 period. Extraction rises as the political capital gained in 2024
% is spent on policies the community now opposes.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(tx_hispanic_pivot_tr_t0, tx_hispanic_pivot, theater_ratio, 0, 0.05).
narrative_ontology:measurement(tx_hispanic_pivot_tr_t5, tx_hispanic_pivot, theater_ratio, 5, 0.10).
narrative_ontology:measurement(tx_hispanic_pivot_tr_t10, tx_hispanic_pivot, theater_ratio, 10, 0.15).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(tx_hispanic_pivot_ex_t0, tx_hispanic_pivot, base_extractiveness, 0, 0.48).
narrative_ontology:measurement(tx_hispanic_pivot_ex_t5, tx_hispanic_pivot, base_extractiveness, 5, 0.62).
narrative_ontology:measurement(tx_hispanic_pivot_ex_t10, tx_hispanic_pivot, base_extractiveness, 10, 0.70).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The constraint's primary function is to enforce a political coalition and
% a national policy, making it an enforcement mechanism.
narrative_ontology:coordination_type(tx_hispanic_pivot, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: THAI_ARTICLE_112_MOUNTAIN
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2026-01-27
% ============================================================================

:- module(constraint_thai_article_112_mountain, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: thai_article_112_mountain
 * human_readable: Article 112 (Lèse-majesté Laws) as a Legal Mountain
 * domain: political/social/legal
 * * SUMMARY:
 * Article 112 of the Thai Criminal Code, which criminalizes insults against the 
 * monarchy, functions within the system as a "Mountain"—a fixed, unchangeable 
 * limit[cite: 80]. While logically a human-made law, the 2024 dissolution of the 
 * Move Forward Party [cite: 80, 81] and the subsequent exclusion of any party 
 * seeking its amendment from coalition talks in 2025/2026 [cite: 148] have 
 * effectively rendered it a physical-like boundary of the political possible.
 * * KEY AGENTS:
 * - People's Party: Subject (Organized) - Operates under the constraint while barred from voting for PMs who support amendment[cite: 148].
 * - Anutin Charnvirakul: Beneficiary (Institutional) - Rules out any coalition with those seeking amendment[cite: 148].
 * - The Constitutional Court: Auditor (Analytical) - Enforces the "Mountain" status by dissolving non-compliant parties[cite: 80].
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Mountain Requirement: Base extractiveness must be <= 0.05. 
% In this context, the "extraction" is zero-sum; the law is presented as a 
% "natural law" of the Thai state structure, making it a fixed coordinate.
domain_priors:base_extractiveness(thai_article_112_mountain, 0.04). 

% Suppression of alternatives is absolute; proposing them leads to party dissolution.
domain_priors:suppression_score(thai_article_112_mountain, 0.95).   

% Theater ratio is low because the enforcement is literal and terminal for political careers.
domain_priors:theater_ratio(thai_article_112_mountain, 0.10).       

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(thai_article_112_mountain, extractiveness, 0.04).
narrative_ontology:constraint_metric(thai_article_112_mountain, suppression_requirement, 0.95).
narrative_ontology:constraint_metric(thai_article_112_mountain, theater_ratio, 0.1).

% Binary flags
domain_priors:requires_active_enforcement(thai_article_112_mountain).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   ========================================================================== */

% PERSPECTIVE 1: THE ANALYTICAL OBSERVER (MOUNTAIN)
% Viewed as an irreducible logical limit within the current Thai legal geometry.
constraint_indexing:constraint_classification(thai_article_112_mountain, mountain, 
    context(agent_power(analytical), 
            time_horizon(historical), 
            exit_options(analytical), 
            spatial_scope(national))).

% PERSPECTIVE 2: THE INSTITUTIONAL ACTOR (MOUNTAIN/ROPE)
% Viewed as a foundational, unchangeable pillar of state coordination.
constraint_indexing:constraint_classification(thai_article_112_mountain, mountain, 
    context(agent_power(institutional), 
            time_horizon(civilizational), 
            exit_options(mobile), 
            spatial_scope(national))).

% PERSPECTIVE 3: THE DISFRANCHISED PROGRESSIVE (SNARE)
% What the institution calls a "Mountain," the trapped agent experiences as 
% a predatory trap (Snare) that eliminates their political representation.
constraint_indexing:constraint_classification(thai_article_112_mountain, snare, 
    context(agent_power(powerless), 
            time_horizon(biographical), 
            exit_options(trapped), 
            spatial_scope(national))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(thai_article_112_mountain_tests).

test(mountain_validation) :-
    % Verify the analytical classification adheres to the Mountain extraction threshold.
    domain_priors:base_extractiveness(thai_article_112_mountain, E),

    E =< 0.05,
    constraint_indexing:constraint_classification(thai_article_112_mountain, mountain, context(agent_power(analytical), _, _, _)).

test(perspectival_gap_existence) :-
    % Verify the Subject sees a Snare while the Auditor sees a Mountain.
    constraint_indexing:constraint_classification(thai_article_112_mountain, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(thai_article_112_mountain, mountain, context(agent_power(analytical), _, _, _)).

:- end_tests(thai_article_112_mountain_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * Article 112 is assigned the 'Mountain' type for the analytical index because 
 * in the 2026 political reality[cite: 4, 11], it functions as a non-negotiable 
 * physical limit of the environment. Unlike the Senate Veto (a Piton with high 
 * theater), Article 112 has a low theater ratio; the consequences for 
 * attempting to move the "mountain" are immediate and absolute.
 *
 * PERSPECTIVAL GAP:
 * The institutional power (Anutin/Conservatives) justifies the law as an 
 * irreducible pillar of the nation (Mountain)[cite: 148, 459]. The People's 
 * Party [cite: 85], having seen its predecessor dissolved[cite: 80], must treat 
 * it as a Mountain to survive, even if their base perceives it as a Snare.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_legal_erosion,
    'Can a legal Mountain be converted back into a Snare or Rope through external international pressure?',
    'Observation of diplomatic and economic trade indices relative to Article 112 enforcement.',
    'Conversion to Snare (Change possible but coerced) vs Mountain Persistence (Unchangeable)',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(thai_article_112_mountain, 1908, 2026). 

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: thai_senate_veto_2026
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-05-21
% ============================================================================

:- module(constraint_thai_senate_veto_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: thai_senate_veto_2026
 * human_readable: The Senate Constitutional Veto (Post-Transitory Residual)
 * domain: political
 * * SUMMARY:
 * Following the expiration of the five-year transitory provision that allowed the
 * junta-appointed Senate to vote for the Prime Minister, the Senate
 * retains a one-third veto power over constitutional amendments under Article 256.
 * In December 2025, Parliament voted to preserve this power despite attempts to
 * move to a simple majority. It now functions as a high-extraction Snare whose
 * original "coordination" utility (managing a political transition) has atrophied,
 * leaving behind a structural veto maintained by "theatrical" claims of ensuring stability.
 * * KEY AGENTS:
 * - Thai Voters: Subject (Powerless) - Unable to see their elected representatives enact constitutional reform.
 * - The People's Party: Subject (Organized) - Blocked from structural reform by the veto.
 * - The Senate: Beneficiary (Institutional) - Maintaining a non-representative check on the House.
 * - The Election Commission: Auditor (Analytical) - Overseeing election results which this veto constrains.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% High extraction: The Senate can block the will of the 500 elected MPs.
domain_priors:base_extractiveness(thai_senate_veto_2026, 0.72).
% High suppression: Alternatives like simple majority voting were explicitly rejected.
domain_priors:suppression_score(thai_senate_veto_2026, 0.80).
% High Theater: The Senate's "oversight" role is a performance of stability, as its original transition-management function is gone.
domain_priors:theater_ratio(thai_senate_veto_2026, 0.85).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(thai_senate_veto_2026, extractiveness, 0.72).
narrative_ontology:constraint_metric(thai_senate_veto_2026, suppression_requirement, 0.80).
narrative_ontology:constraint_metric(thai_senate_veto_2026, theater_ratio, 0.85).

% Constraint self-claim (what does the constraint claim to be?)
% It claims to be a mechanism for enforcing stability.
narrative_ontology:constraint_claim(thai_senate_veto_2026, enforcement).

% Binary flags
domain_priors:requires_active_enforcement(thai_senate_veto_2026).

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(thai_senate_veto_2026, conservative_establishment).
narrative_ontology:constraint_victim(thai_senate_veto_2026, reformist_voters).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE THAI VOTER (SNARE)
% The veto is an inescapable trap preventing the will of the electorate from being realized.
constraint_indexing:constraint_classification(thai_senate_veto_2026, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE REFORMIST MP (SNARE)
% An organized but still constrained agent sees the veto as a trap preventing the legal "exit" from the 2017 framework.
constraint_indexing:constraint_classification(thai_senate_veto_2026, snare,
    context(agent_power(organized),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 3: THE CONSERVATIVE ESTABLISHMENT (ROPE)
% Viewed as a necessary coordination mechanism (a "rope") to safeguard state structure and stability.
constraint_indexing:constraint_classification(thai_senate_veto_2026, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 4: THE ANALYTICAL OBSERVER (SNARE)
% Analytically, the high extraction (0.72), high suppression (0.80), and active enforcement
% classify this as a Snare. The high theater ratio (0.85) is a symptom of its atrophied
% justification, not a reclassification to a low-extraction Piton.
constraint_indexing:constraint_classification(thai_senate_veto_2026, snare,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(thai_senate_veto_2026_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(thai_senate_veto_2026, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(thai_senate_veto_2026, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(threshold_validation) :-
    domain_priors:base_extractiveness(thai_senate_veto_2026, E),
    E >= 0.46. % Triggers Omega and Temporal Data requirements.

test(theater_ratio_check) :-
    domain_priors:theater_ratio(thai_senate_veto_2026, TR),
    TR > 0.70. % Indicates atrophied justification.

:- end_tests(thai_senate_veto_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This constraint is a classic Snare with Piton-like symptoms. Its original function—
 * managing the post-coup political transition—has expired. However, its extractive
 * power (vetoing constitutional change) remains fully intact (E=0.72), actively enforced,
 * and suppresses all alternatives (S=0.80). The extremely high theater ratio (0.85)
 * is not indicative of a low-extraction Piton; rather, it's a symptom of a Snare
 * that has lost its original justification and must now "perform" legitimacy through
 * claims of ensuring stability. The analytical observer classifies it as a Snare
 * because its material effect is pure, asymmetric extraction, regardless of the historical narrative.
 *
 * [RESOLVED MANDATROPHY]
 * Extraction > 0.7 requires resolution: The system resolves this as Mandatrophy
 * because the "coordination" value claimed by proponents (preventing instability)
 * is vastly outweighed by the suppression of democratic alternatives and the direct
 * blocking of the electorate's will.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% High-extraction resolution hook.
omega_variable(
    omega_senate_composition_2026,
    'Will the new Senate composition formula effectively bypass or reinforce the veto power?',
    'Analysis of the CDA selection process and voting blocs within the new Senate post-2026.',
    'Reform (Snare is weakened or removed) vs Entrenchment (Snare hardens)',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(thai_senate_veto_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data models the constraint's degradation from a component of a
% transitory framework into a pure Snare. As its justification atrophied after
% 2024, its theater ratio spiked while its extractive power was solidified.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(thai_senate_veto_2026_tr_t0, thai_senate_veto_2026, theater_ratio, 0, 0.40).
narrative_ontology:measurement(thai_senate_veto_2026_tr_t5, thai_senate_veto_2026, theater_ratio, 5, 0.75).
narrative_ontology:measurement(thai_senate_veto_2026_tr_t10, thai_senate_veto_2026, theater_ratio, 10, 0.85).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(thai_senate_veto_2026_ex_t0, thai_senate_veto_2026, base_extractiveness, 0, 0.68).
narrative_ontology:measurement(thai_senate_veto_2026_ex_t5, thai_senate_veto_2026, base_extractiveness, 5, 0.70).
narrative_ontology:measurement(thai_senate_veto_2026_ex_t10, thai_senate_veto_2026, base_extractiveness, 10, 0.72).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The constraint's *claimed* function is enforcement of stability.
narrative_ontology:coordination_type(thai_senate_veto_2026, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: the_bacchae_madness_protocol
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-05-21
% ============================================================================

:- module(constraint_the_bacchae_madness_protocol, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: the_bacchae_madness_protocol
 * human_readable: The Dionysian Mandate of Ecstasy
 * domain: religious/political/social
 * * SUMMARY:
 * This constraint models the collision between the secular order of King Pentheus
 * and the divine, chaotic mandate of the god Dionysus. Pentheus attempts to
 * suppress the cult of Dionysus using state power, viewing it as a social ill.
 * However, the Dionysian mandate operates as an irresistible force of nature
 * that extracts the sanity, authority, and ultimately the life of the king when
 * he refuses to acknowledge and integrate this new reality.
 * * KEY AGENTS:
 * - The Maenads (Agave): Subjects (Powerless), caught in a divine frenzy they cannot control.
 * - The Dionysian Cult: Beneficiary (Institutional), the nascent religious order whose power is cemented by the events.
 * - Cadmus & Tiresias: Observers (Analytical), elders who understand the futility of resisting a god.
 * - Pentheus: Victim (Institutional Power made Powerless), the king whose rigid order is destroyed.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
% Rationale: 0.95. The mandate extracts everything from its primary victim (Pentheus):
% his authority, dignity, sanity, and finally his life. This is a terminal extraction event.
domain_priors:base_extractiveness(the_bacchae_madness_protocol, 0.95).
% Rationale: 0.85. The mandate actively suppresses secular law, rational thought,
% and individual will in both the followers and the resistors.
domain_priors:suppression_score(the_bacchae_madness_protocol, 0.85).
% Rationale: 0.10. The constraint is direct and brutally functional. There is
% very little performative action; the violence and madness are real.
domain_priors:theater_ratio(the_bacchae_madness_protocol, 0.10).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(the_bacchae_madness_protocol, extractiveness, 0.95).
narrative_ontology:constraint_metric(the_bacchae_madness_protocol, suppression_requirement, 0.85).
narrative_ontology:constraint_metric(the_bacchae_madness_protocol, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% Dionysus presents his power not as a choice but as a fundamental, divine law of nature.
narrative_ontology:constraint_claim(the_bacchae_madness_protocol, natural_law).

% Binary flags
% The mandate requires active enforcement by Dionysus (divine influence) and the Maenads (physical violence).
domain_priors:requires_active_enforcement(the_bacchae_madness_protocol).

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(the_bacchae_madness_protocol, dionysian_cult).
narrative_ontology:constraint_victim(the_bacchae_madness_protocol, pentheus).
narrative_ontology:constraint_victim(the_bacchae_madness_protocol, theban_secular_order).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (THE MAENADS)
% For the women of Thebes, the divine madness is a Snare. It extracts their
% prior social identity, memory, and maternal instinct, trapping them in a
% state of violent ecstasy they did not choose and cannot escape.
constraint_indexing:constraint_classification(the_bacchae_madness_protocol, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (THE DIONYSIAN CULT)
% From the perspective of the nascent religious institution, the mandate is a
% Rope. It coordinates followers, demonstrates the god's power, and violently
% establishes the cult's legitimacy, binding the community into a new order.
constraint_indexing:constraint_classification(the_bacchae_madness_protocol, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (CADMUS & TIRESIAS)
% The elders, Cadmus and Tiresias, recognize Dionysus not as a political actor
% but as a fundamental force. To them, the mandate is a Mountain—an unchangeable
% law of the cosmos. One does not fight it; one coordinates with it to avoid
% being crushed. This is the system's final classification.
constraint_indexing:constraint_classification(the_bacchae_madness_protocol, mountain,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(the_bacchae_madness_protocol_tests).

test(perspectival_gap_divinity) :-
    % Verify the gap between the powerless (Snare) and the institutional (Rope).
    constraint_indexing:constraint_classification(the_bacchae_madness_protocol, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(the_bacchae_madness_protocol, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless == snare,
    TypeInstitutional == rope,
    TypePowerless \= TypeInstitutional.

test(analytical_resolution_is_mountain) :-
    % Verify the analytical observer correctly identifies the constraint as a force of nature.
    constraint_indexing:constraint_classification(the_bacchae_madness_protocol, TypeAnalytical, context(agent_power(analytical), _, _, _)),
    TypeAnalytical == mountain.

test(terminal_extraction_threshold) :-
    % The base extraction must be extremely high to reflect the narrative's outcome.
    domain_priors:base_extractiveness(the_bacchae_madness_protocol, E),
    E >= 0.95.

:- end_tests(the_bacchae_madness_protocol_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The core of this story is the classification of a divine mandate. While it
 * functions as a Snare for its victims (Pentheus, Agave) and a Rope for its
 * beneficiaries (the cult), the analytical perspective correctly identifies it
 * as a Mountain. It is a force beyond human negotiation, whose "rules" are
 * as immutable as gravity. Resistance is not a political act; it is a category
 * error that results in annihilation. The extreme extraction score (0.95) is
 * justified by this framing: the mandate is not seeking to tax or control, but
 * to achieve total recognition, and the price for denial is everything.
 *
 * [RESOLVED MANDATROPHY]
 * The Mandatrophy here belongs to Pentheus. His "Mandate of Secular Order"
 * has atrophied his society's capacity to integrate the irrational, the divine,
 * and the chaotic. By creating a rigid system with no margin for ecstasy, he
 * ensures that when that force arrives, it does so explosively rather than
 * metabolically. The high extraction is not a feature of a flawed human system
 * but the logical outcome of a brittle system encountering an irresistible force.
 * The system correctly identifies this as a Mountain from the analytical view,
 * resolving the ambiguity.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_the_bacchae_madness_protocol,
    'Is the Dionysian mandate an external, objective divine force (Mountain) or a projection of repressed human psychology (a Snare constructed by the psyche)?',
    'Neuro-theological analysis of ecstatic states vs. historical evidence of the Dionysian cults actual political power.',
    'If objective force, it is a true Mountain. If psychological projection, it is a Snare that society builds for itself out of repression.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(the_bacchae_madness_protocol, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% The constraint intensifies rapidly as Dionysus's influence grows and Pentheus's resistance hardens.
% Theater ratio remains low throughout; the actions are direct.
narrative_ontology:measurement(tbmp_tr_t0, the_bacchae_madness_protocol, theater_ratio, 0, 0.05).
narrative_ontology:measurement(tbmp_tr_t5, the_bacchae_madness_protocol, theater_ratio, 5, 0.05).
narrative_ontology:measurement(tbmp_tr_t10, the_bacchae_madness_protocol, theater_ratio, 10, 0.10).

% Extraction begins as social disruption and escalates to total destruction.
narrative_ontology:measurement(tbmp_ex_t0, the_bacchae_madness_protocol, base_extractiveness, 0, 0.30).
narrative_ontology:measurement(tbmp_ex_t5, the_bacchae_madness_protocol, base_extractiveness, 5, 0.70).
narrative_ontology:measurement(tbmp_ex_t10, the_bacchae_madness_protocol, base_extractiveness, 10, 0.95).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The mandate functions as an enforcement mechanism for a new divine law.
narrative_ontology:coordination_type(the_bacchae_madness_protocol, enforcement_mechanism).

% The arrival of the Dionysian mandate directly impacts and ultimately shatters the existing civic order.
narrative_ontology:affects_constraint(the_bacchae_madness_protocol, theban_civic_order).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: the_calm_protocol_suppression
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-29
% ============================================================================

:- module(constraint_the_calm_protocol_suppression, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: the_calm_protocol_suppression
 * human_readable: The "Calm" of Antarctic Protocol
 * domain: social/psychological
 * * SUMMARY:
 * This constraint models the psychological and institutional "weight" described
 * in the narrative of Soh and Mbatha. "The Calm" is a state where the unyielding
 * physical constraints of the Antarctic are met with a rigid adherence to
 * "Protocol". However, beneath this coordination lies a "weight" of suppressed
 * trauma—specifically an incident involving a bird, an axe, and a choice—that
 * functions as a Snare, extracting the mental health of those who carry the story.
 * * KEY AGENTS:
 * - Soh & Mbatha: The individuals carrying the psychological burden (Powerless)
 * - Expedition Leadership/Protocol: The institutional structure prioritizing mission success (Institutional)
 * - External Auditor: Analytical observer assessing the system's health (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(the_calm_protocol_suppression, 0.75). % High extraction; the "weight" extracts peace and sanity.
domain_priors:suppression_score(the_calm_protocol_suppression, 0.80).   % High suppression; "Nothing happened" is the enforced narrative.
domain_priors:theater_ratio(the_calm_protocol_suppression, 0.10).       % Low theatricality; the suppression is brutally functional.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(the_calm_protocol_suppression, extractiveness, 0.75).
narrative_ontology:constraint_metric(the_calm_protocol_suppression, suppression_requirement, 0.80).
narrative_ontology:constraint_metric(the_calm_protocol_suppression, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
narrative_ontology:constraint_claim(the_calm_protocol_suppression, coordination).

% Binary flags
domain_priors:requires_active_enforcement(the_calm_protocol_suppression). % The protocol and unspoken rules require active maintenance.

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(the_calm_protocol_suppression, expedition_mission_success).
narrative_ontology:constraint_victim(the_calm_protocol_suppression, soh).
narrative_ontology:constraint_victim(the_calm_protocol_suppression, mbatha).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For Soh and Mbatha, the protocol is a Snare. It extracts their mental
% well-being under the guise of maintaining order.
constraint_indexing:constraint_classification(the_calm_protocol_suppression, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The expedition leadership views the protocol as a pure Rope, a necessary
% coordination tool for survival and mission success, blind to the extraction.
constraint_indexing:constraint_classification(the_calm_protocol_suppression, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(regional))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% An analyst sees both the genuine coordination function (protocol for survival)
% and the asymmetric extraction (psychological weight). It requires active
% enforcement and has clear victims and beneficiaries. This is a classic Tangled Rope.
constraint_indexing:constraint_classification(the_calm_protocol_suppression, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(the_calm_protocol_suppression_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(the_calm_protocol_suppression, TypePowerless,
        context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(the_calm_protocol_suppression, TypeInstitutional,
        context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(analytical_classification_is_tangled_rope) :-
    % The analytical view must resolve the conflict as a Tangled Rope.
    constraint_indexing:constraint_classification(the_calm_protocol_suppression, TypeAnalytical,
        context(agent_power(analytical), _, _, _)),
    TypeAnalytical == tangled_rope.

test(high_extraction_and_suppression) :-
    domain_priors:base_extractiveness(the_calm_protocol_suppression, E),
    domain_priors:suppression_score(the_calm_protocol_suppression, S),
    E >= 0.7,
    S >= 0.8.

:- end_tests(the_calm_protocol_suppression_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect a system where a necessary coordination protocol has been
 * co-opted to enforce silence and suppress trauma for the sake of mission
 * objectives. The base extraction (0.75) represents the severe psychological
 * cost to individuals, while the high suppression (0.80) reflects the active
 * effort to maintain the "Calm" by forbidding discussion of the underlying trauma.
 *
 * PERSPECTIVAL GAP:
 * The gap is stark. For expedition leadership (Institutional), the protocol is a
 * life-saving Rope. For the individuals carrying the trauma (Powerless), it is a
 * Snare that isolates them and perpetuates their suffering.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The Mandate is "Expedition Progress/Success". The Margin extracted is the
 * "Psychological Safety/Honesty" of the crew. By prioritizing the mission's
 * "Nothing happened" status, the system extracts the engineers' sanity. The
 * Tangled Rope classification correctly identifies this dual nature, preventing
 * the system from misclassifying it as either pure coordination (Rope) or pure
 * malice (Snare). It is a functional system with a parasitic, extractive component.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_the_calm_protocol_suppression,
    "Are the skuas a physical manifestation of environmental pressure (Mountain) or a shared psychological index of the 'Weight' (part of the Snare)?",
    "Verification of field journal photographs and sensor logs by an external biologist (Analytical Observer).",
    "If physical: The environment is an independent Mountain. If shared index: The Snare's power to alter perception is higher than measured.",
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(the_calm_protocol_suppression, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data for this high-extraction constraint. The model assumes the
% protocol began as a pure coordination tool and the extractive element
% was introduced and intensified after the traumatic incident.
%
% Theater ratio over time (remains low and functional):
narrative_ontology:measurement(tcp_tr_t0, the_calm_protocol_suppression, theater_ratio, 0, 0.05).
narrative_ontology:measurement(tcp_tr_t5, the_calm_protocol_suppression, theater_ratio, 5, 0.08).
narrative_ontology:measurement(tcp_tr_t10, the_calm_protocol_suppression, theater_ratio, 10, 0.10).

% Extraction over time (grows as the unspoken rule solidifies):
narrative_ontology:measurement(tcp_ex_t0, the_calm_protocol_suppression, base_extractiveness, 0, 0.10).
narrative_ontology:measurement(tcp_ex_t5, the_calm_protocol_suppression, base_extractiveness, 5, 0.65).
narrative_ontology:measurement(tcp_ex_t10, the_calm_protocol_suppression, base_extractiveness, 10, 0.75).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The protocol is a set of rules for survival and mission conduct.
narrative_ontology:coordination_type(the_calm_protocol_suppression, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: the_churn_systemic_upheaval
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-28
% ============================================================================

:- module(constraint_the_churn_systemic_upheaval, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: the_churn_systemic_upheaval
 * human_readable: The Churn (Systemic Collapse and Rebirth)
 * domain: political/social/economic
 * * SUMMARY:
 * "The Churn" represents a period of systemic instability where established social and political rules dissolve and reconfigure. It is characterized by high mortality for those caught within it, rendering individual effort or identity "meaningless" in the face of macro-scale structural shifts. It is described as an inevitable, recurring process of systemic self-destruction and renewal.
 * * KEY AGENTS:
 * - The Veteran Survivor (Amos): Subject who accepts the churn as a natural, inevitable law.
 * - The Disposable Subject (Spy): A "loose end" liquidated by the shifting rules.
 * - The Systemic Architect (Baltimore Boss): Beneficiary who defines the "game" and leverages the transition.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(the_churn_systemic_upheaval, 0.9). % Rationale: Maximally extractive; it consumes the lives of those "caught up" in it.
domain_priors:suppression_score(the_churn_systemic_upheaval, 0.8).   % Rationale: The previous "rules of the game" are torn down, suppressing any alternative stable reality.
domain_priors:theater_ratio(the_churn_systemic_upheaval, 0.1).       % Rationale: The Churn is brutally functional, not performative.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(the_churn_systemic_upheaval, extractiveness, 0.9).
narrative_ontology:constraint_metric(the_churn_systemic_upheaval, suppression_requirement, 0.8).
narrative_ontology:constraint_metric(the_churn_systemic_upheaval, theater_ratio, 0.1).

% Constraint self-claim (what does the constraint claim to be?)
% Rationale: It is presented as an inevitable force of nature ("Like water's wet. Sky's up").
narrative_ontology:constraint_claim(the_churn_systemic_upheaval, natural_law).

% Structural property derivation hooks:
% The beneficiary is the new system that emerges, and the victims are those consumed by the process.
narrative_ontology:constraint_beneficiary(the_churn_systemic_upheaval, the_new_system).
narrative_ontology:constraint_victim(the_churn_systemic_upheaval, liquidated_individuals).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE DISPOSABLE SUBJECT (SNARE)
% For the victim, the churn is a coercive trap where their death is predetermined.
constraint_indexing:constraint_classification(the_churn_systemic_upheaval, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE SYSTEMIC ARCHITECT (ROPE)
% For the institutional player, the churn is a functional, albeit violent,
% mechanism for clearing out "loose ends" and building "somethin' new".
constraint_indexing:constraint_classification(the_churn_systemic_upheaval, rope,
    context(agent_power(institutional),
            time_horizon(historical),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE VETERAN SURVIVOR (MOUNTAIN)
% For the survivor, the churn is an unchangeable natural law comparable to physics.
constraint_indexing:constraint_classification(the_churn_systemic_upheaval, mountain,
    context(agent_power(moderate),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

% PERSPECTIVE 4: THE ANALYTICAL OBSERVER (SNARE)
% The metrics confirm a high-extraction, high-suppression system.
% χ = 0.9 * 1.15 * 1.2 = 1.242. This is a clear Snare.
constraint_indexing:constraint_classification(the_churn_systemic_upheaval, snare,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(the_churn_systemic_upheaval_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless, institutional, and moderate.
    constraint_indexing:constraint_classification(the_churn_systemic_upheaval, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(the_churn_systemic_upheaval, rope, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(the_churn_systemic_upheaval, mountain, context(agent_power(moderate), _, _, _)).

test(extraction_threshold) :-
    % Extraction is high (0.9), confirming the "liquidation" aspect and Snare classification.
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(the_churn_systemic_upheaval, ExtMetricName, E),
    E > 0.46.

:- end_tests(the_churn_systemic_upheaval_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The Churn is a classic example of a constraint whose classification depends entirely on one's
 * position relative to it. For those being eliminated (powerless), it is a lethal Snare. For those
 * orchestrating or benefiting from the new order (institutional), it is a Rope for social reorganization.
 * For those who survive it through luck and skill but without power (moderate), it appears as an
 * impersonal, unchangeable Mountain. The base extractiveness is set to 0.9 to reflect the literal
 * extraction of life from its victims.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The system avoids misclassifying this as a pure Snare by acknowledging the perspectival shifts.
 * While analytically a Snare due to its extreme extraction, the institutional 'Rope' view and the
 * survivor's 'Mountain' view are critical to understanding its stability and function as a
 * mechanism of systemic change, preventing a simplistic "pure evil" classification.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_the_churn_intent,
    "Is the liquidation of 'loose ends' a byproduct of structural collapse (Mountain) or an intentional predatory strategy by architects (Snare)?",
    "Audit of architect resource preservation vs. 'loose end' survival rates during historical churn events.",
    "If intent exists, it confirms the Snare classification as primary. If it's a byproduct, the Mountain classification gains weight.",
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(the_churn_systemic_upheaval, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% The Churn is modeled as a rapid, intense event. Extraction begins high and intensifies
% to its peak, while theater remains minimal throughout its functional, brutal lifecycle.
% This data is required because base_extractiveness (0.9) > 0.46.

% Theater ratio over time (consistently low):
narrative_ontology:measurement(the_churn_tr_t0, the_churn_systemic_upheaval, theater_ratio, 0, 0.1).
narrative_ontology:measurement(the_churn_tr_t5, the_churn_systemic_upheaval, theater_ratio, 5, 0.1).
narrative_ontology:measurement(the_churn_tr_t10, the_churn_systemic_upheaval, theater_ratio, 10, 0.1).

% Extraction over time (starts high and intensifies):
narrative_ontology:measurement(the_churn_ex_t0, the_churn_systemic_upheaval, base_extractiveness, 0, 0.8).
narrative_ontology:measurement(the_churn_ex_t5, the_churn_systemic_upheaval, base_extractiveness, 5, 0.85).
narrative_ontology:measurement(the_churn_ex_t10, the_churn_systemic_upheaval, base_extractiveness, 10, 0.9).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The Churn is a destructive/reconstructive force, not a stable coordination mechanism.
% Therefore, coordination_type is not applicable. No network relationships are defined in the source material.
% narrative_ontology:coordination_type(the_churn_systemic_upheaval, enforcement_mechanism).
% narrative_ontology:affects_constraint(the_churn_systemic_upheaval, other_constraint_id).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: the_wall_procedural_barrier
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-05-22
% ============================================================================

:- module(constraint_the_wall_procedural_barrier, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: the_wall_procedural_barrier
 * human_readable: The Intelligence/Law Enforcement Information Sharing Barrier ("The Wall")
 * domain: legal/institutional
 * * SUMMARY:
 * "The Wall" refers to procedures restricting information sharing between
 * intelligence investigators (CIA/FBI) and criminal prosecutors (DOJ) in the US
 * from roughly 1995-2001. Initially intended to protect the legality of FISA
 * warrants, it became a pervasive, bureaucratic barrier that prevented the
 * connection of critical intelligence dots prior to the 9/11 attacks.
 * * KEY AGENTS:
 * - FBI Field Agent: Subject (Powerless), unable to get needed information.
 * - OIPR Gatekeeper: Beneficiary (Institutional), controlled FISA data flow.
 * - 9/11 Commission: Auditor (Analytical), identified the wall as a critical failure.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(the_wall_procedural_barrier, 0.80). % Snare extraction >= 0.46
domain_priors:suppression_score(the_wall_procedural_barrier, 0.90).   % Structural property (raw, unscaled).
domain_priors:theater_ratio(the_wall_procedural_barrier, 0.10).       % Not a Piton (<= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(the_wall_procedural_barrier, extractiveness, 0.80).
narrative_ontology:constraint_metric(the_wall_procedural_barrier, suppression_requirement, 0.90).
narrative_ontology:constraint_metric(the_wall_procedural_barrier, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% It claimed to be a necessary coordination mechanism to protect legal purity.
narrative_ontology:constraint_claim(the_wall_procedural_barrier, coordination).

% Binary flags
domain_priors:requires_active_enforcement(the_wall_procedural_barrier).

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(the_wall_procedural_barrier, institutional_gatekeepers).
narrative_ontology:constraint_victim(the_wall_procedural_barrier, national_security_agents).
narrative_ontology:constraint_victim(the_wall_procedural_barrier, general_public).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (FBI FIELD AGENT) - MOUNTAIN
% For the field agent, The Wall was an incomprehensible, immovable bureaucratic
% obstacle. It was a fact of their job they could not change or reason with,
% directly impeding their ability to act on information.
constraint_indexing:constraint_classification(the_wall_procedural_barrier, mountain,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (OIPR GATEKEEPER) - ROPE
% From the perspective of the DOJ gatekeepers, "The Wall" was a 'Rope'—a necessary
% coordination tool to maintain the legal purity of criminal cases and prevent
% intelligence gathered under FISA from tainting prosecutions.
constraint_indexing:constraint_classification(the_wall_procedural_barrier, rope,
    context(agent_power(institutional),
            time_horizon(biographical),
            exit_options(arbitrage),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (9/11 COMMISSION) - SNARE
% With hindsight, the Commission saw the Wall as a 'Snare'. It was an extractive
% system that choked the flow of vital information, directly enabling the 9/11
% plot to succeed by preventing agents from connecting the dots.
constraint_indexing:constraint_classification(the_wall_procedural_barrier, snare,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(the_wall_procedural_barrier_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(the_wall_procedural_barrier, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(the_wall_procedural_barrier, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == mountain,
    TypeInstitutional == rope.

test(analytical_classification_is_snare) :-
    constraint_indexing:constraint_classification(the_wall_procedural_barrier, snare, context(agent_power(analytical), _, _, _)).

test(threshold_validation) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(the_wall_procedural_barrier, ExtMetricName, E),
    E >= 0.46. % Ensures it meets the Snare threshold.

:- end_tests(the_wall_procedural_barrier_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect a system that, while claiming to be a coordination mechanism
 * for legal purity (Rope), became a pathologically rigid barrier that destroyed
 * value (public safety) and suppressed functional alternatives.
 *
 * * Base Extractiveness (0.80): Extremely high. The constraint did not transfer
 *   value so much as destroy it, by extracting the ability of agents to perform
 *   their primary function, leading to catastrophic failure.
 * * Suppression (0.90): Near total. The procedures were actively enforced by
 *   institutional gatekeepers (DOJ's OIPR) who could deny FISA warrants,
 *   effectively suppressing any attempt at cross-functional collaboration.
 *
 * PERSPECTIVAL GAP:
 * The gap is stark. For the institutional gatekeeper, it was a 'Rope' ensuring
 * procedural correctness, a core part of their professional identity and power.
 * For the powerless field agent, it was an immovable 'Mountain' of bureaucracy.
 * The analytical view, with access to the tragic outcome, correctly identifies
 * it as a 'Snare' that actively prevented the system from working.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * This is a classic case of Mandatrophy. A rule intended to solve one problem
 * (legal taint in prosecutions) created a far larger, fatal problem (intelligence
 * failure). The high extraction score is justified by the catastrophic destruction
 * of the system's primary goal (national security). The perspectival analysis
 * resolves the ambiguity by showing how the same object can be a tool to one
 * agent and a fatal trap to the system as a whole.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_the_wall_procedural_barrier,
    'Was the barrier''s deadly rigidity derived from a strict interpretation of FISA law (Mountain) or from institutional risk-aversion within the DOJ/FBI (Snare)?',
    'A comparative legal audit of FISA vs. internal FBI/DOJ policy memos from the period.',
    'Determines if resolution required legislative change (changing a Mountain) or merely decisive leadership (cutting a Snare).',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(the_wall_procedural_barrier, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This constraint began with a defensible, low-extraction rationale (protecting
% prosecutions) but intensified over time into a rigid, highly extractive barrier
% as bureaucratic inertia and risk-aversion grew.
%
% Theater ratio over time (remains low; this was a functional, not performative, system):
narrative_ontology:measurement(twpb_tr_t0, the_wall_procedural_barrier, theater_ratio, 0, 0.10).
narrative_ontology:measurement(twpb_tr_t5, the_wall_procedural_barrier, theater_ratio, 5, 0.10).
narrative_ontology:measurement(twpb_tr_t10, the_wall_procedural_barrier, theater_ratio, 10, 0.10).

% Extraction over time (shows significant extraction_accumulation drift):
narrative_ontology:measurement(twpb_ex_t0, the_wall_procedural_barrier, base_extractiveness, 0, 0.20).
narrative_ontology:measurement(twpb_ex_t5, the_wall_procedural_barrier, base_extractiveness, 5, 0.65).
narrative_ontology:measurement(twpb_ex_t10, the_wall_procedural_barrier, base_extractiveness, 10, 0.80).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The constraint's claimed function was to enforce a legal procedure.
narrative_ontology:coordination_type(the_wall_procedural_barrier, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: theory_of_visitors
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_theory_of_visitors, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: theory_of_visitors
 * human_readable: The Theory of Visitors (Relationship Transience)
 * domain: social/psychological
 * * SUMMARY:
 * This constraint defines all human relationships as inherently transient "visitors" who arrive for a limited time and inevitably depart. It posits a fundamental trade-off: visitors take something irreplaceable from the host upon departure (extraction), but leave "souvenirs" (memories/lessons) that can be kept forever (coordination benefit). The theory is enforced through cultural narratives that frame acceptance of this transience as maturity.
 * * KEY AGENTS:
 * - The Host (Powerless): The agent who experiences the loss of a departing "visitor".
 * - Social Media Platforms (Institutional): Entities that monetize the high churn rate of transient connections.
 * - The Analytical Observer (Analytical): An auditor evaluating the theory's net effect on well-being.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(theory_of_visitors, 0.65). % High extraction: visitors "take something from you... that you can’t ever get back."
domain_priors:suppression_score(theory_of_visitors, 0.50).   % Suppresses the alternative of seeking permanent relationships.
domain_priors:theater_ratio(theory_of_visitors, 0.10).       % The theory is functional, not primarily performative.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(theory_of_visitors, extractiveness, 0.65).
narrative_ontology:constraint_metric(theory_of_visitors, suppression_requirement, 0.50).
narrative_ontology:constraint_metric(theory_of_visitors, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
narrative_ontology:constraint_claim(theory_of_visitors, constructed).

% Binary flags
domain_priors:requires_active_enforcement(theory_of_visitors). % Required for Tangled Rope; enforced by social norms and platforms.

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(theory_of_visitors, stoics_and_navigators). % Those who use the theory for emotional resilience.
narrative_ontology:constraint_victim(theory_of_visitors, hosts_seeking_permanence). % Those who suffer the irreplaceable loss.

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   ========================================================================== */

% PERSPECTIVE 1: THE HOST / MOURNER (SNARE)
% For the individual experiencing loss, transience is a Snare. The visitor
% extracts an irreplaceable part of the self and leaves, strangling the
% host's sense of continuity and meaning.
constraint_indexing:constraint_classification(theory_of_visitors, snare,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE SOCIAL MEDIA PLATFORM (ROPE)
% For an institution that monetizes high-churn interactions (e.g., dating apps),
% the theory is a perfect Rope. It normalizes the rapid formation and dissolution
% of ties, which is the core of their business model.
constraint_indexing:constraint_classification(theory_of_visitors, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The theory is a Tangled Rope. It provides a genuine coordination function
% (helping people manage the pain of loss) while also enabling and justifying
% asymmetric extraction (the irreplaceable loss suffered by the host, which
% benefits platforms that thrive on churn).
constraint_indexing:constraint_classification(theory_of_visitors, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(theory_of_visitors_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(theory_of_visitors, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(theory_of_visitors, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(threshold_validation_high_extraction) :-
    % Verify the constraint is correctly identified as high-extraction.
    narrative_ontology:constraint_metric(theory_of_visitors, extractiveness, E),
    E >= 0.46.

test(tangled_rope_conditions_met) :-
    % Verify the analytical observer correctly classifies as tangled_rope.
    constraint_indexing:constraint_classification(theory_of_visitors, tangled_rope, context(agent_power(analytical), _, _, _)).

:- end_tests(theory_of_visitors_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness of 0.65 reflects the narrative's core claim of an "irreplaceable" loss. The suppression score of 0.5 reflects its function in discouraging the pursuit of "forever" relationships.
 * The perspectival gap is stark: for the powerless individual experiencing loss, it is a brutal Snare (χ = 0.65 * 1.5 * 0.8 = 0.78). For the institutional beneficiary (a dating app), the extraction is negligible and the coordination function is paramount, making it a Rope (χ = 0.65 * -0.2 * 1.2 = -0.156, effectively zero).
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * This constraint is a classic case of potential Mandatrophy. A purely extractive view would label it a Snare for everyone. A purely coordination view would label it a Rope. The Tangled Rope classification, from the analytical perspective, correctly resolves this by acknowledging both functions simultaneously: it is a coping mechanism (coordination) that also normalizes and facilitates a system of emotional extraction (asymmetric extraction), especially when amplified by digital platforms.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% The core uncertainty is whether the "souvenirs" (lessons, memories) truly
% compensate for the irrecoverable loss, or if the theory is merely a coping
% mechanism for a terminal Snare.
omega_variable(
    omega_theory_of_visitors,
    'Is the value of the "souvenir" sufficient to offset the irrecoverable loss, or is the theory a narrative coping mechanism for a terminal Snare?',
    'Longitudinal tracking of well-being and psychological resilience in individuals who adopt the theory versus those who reject it.',
    'If souvenirs offset loss, the theory is a functional Rope for growth. If loss is terminal, the theory is a Snare masquerading as a Rope.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(theory_of_visitors, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This models the theory's intensification as it is co-opted by digital
% platforms that monetize relationship churn. What began as a philosophical
% coping mechanism becomes an economic engine.
%
% Theater ratio over time (stable and low):
narrative_ontology:measurement(theory_of_visitors_tr_t0, theory_of_visitors, theater_ratio, 0, 0.10).
narrative_ontology:measurement(theory_of_visitors_tr_t5, theory_of_visitors, theater_ratio, 5, 0.10).
narrative_ontology:measurement(theory_of_visitors_tr_t10, theory_of_visitors, theater_ratio, 10, 0.10).

% Extraction over time (extraction_accumulation drift):
narrative_ontology:measurement(theory_of_visitors_ex_t0, theory_of_visitors, base_extractiveness, 0, 0.48).
narrative_ontology:measurement(theory_of_visitors_ex_t5, theory_of_visitors, base_extractiveness, 5, 0.55).
narrative_ontology:measurement(theory_of_visitors_ex_t10, theory_of_visitors, base_extractiveness, 10, 0.65).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The theory acts as a standard for interpreting social interactions and
% managing expectations.
narrative_ontology:coordination_type(theory_of_visitors, information_standard).

% This theory structurally enables and reinforces business models based on
% high user churn and transient engagement.
narrative_ontology:affects_constraint(theory_of_visitors, digital_dating_monetization).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: thermodynamics_entropy
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_thermodynamics_entropy, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: thermodynamics_entropy
 * human_readable: The Second Law of Thermodynamics (Entropy)
 * domain: technological
 * * SUMMARY:
 * The Second Law of Thermodynamics dictates that in any isolated system, entropy (disorder) must increase over time. This imposes a fundamental "arrow of time" and a hard limit on the efficiency of any engine or biological process, representing the inevitable decay of concentrated energy into unusable heat. It is a universal "tax" on existence.
 * * KEY AGENTS:
 * - The Biological Organism: Subject (Powerless), trapped in a local struggle to maintain order (negentropy) by extracting energy from the environment.
 * - The Industrial Engineer: Beneficiary (Institutional), who leverages the predictability of the law to design efficient systems.
 * - The Cosmologist: Auditor (Analytical), observing the "Heat Death" of the universe as the ultimate expression of the law.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(thermodynamics_entropy, 0.80). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(thermodynamics_entropy, 0.95).   % Structural property (raw, unscaled). Suppresses perpetual motion.
domain_priors:theater_ratio(thermodynamics_entropy, 0.0).       % Piton detection (>= 0.70). A physical law has no performative aspect.

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(thermodynamics_entropy, extractiveness, 0.80).
narrative_ontology:constraint_metric(thermodynamics_entropy, suppression_requirement, 0.95).
narrative_ontology:constraint_metric(thermodynamics_entropy, theater_ratio, 0.0).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(thermodynamics_entropy, natural_law).

% Binary flags
% This constraint does not require active enforcement; it is an emergent property of statistical mechanics.

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
narrative_ontology:constraint_beneficiary(thermodynamics_entropy, industrial_engineers).
narrative_ontology:constraint_victim(thermodynamics_entropy, all_ordered_systems).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For a biological organism, life is a constant struggle against decay. Entropy
% is a Snare that slowly tightens, extracting vitality and order until the
% system collapses into equilibrium (death).
% χ = 0.80 (ε) * 1.5 (π(powerless)) * 0.8 (σ(local)) = 0.96
constraint_indexing:constraint_classification(thermodynamics_entropy, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For an engineer with institutional power, the law's predictability is a Rope.
% It provides the rules for coordination (e.g., the Carnot limit) that allow
% for the design of efficient engines and power grids. The negative extraction
% reflects the value created by leveraging this predictable limit.
% χ = 0.80 (ε) * -0.2 (π(institutional)) * 1.0 (σ(national)) = -0.16
constraint_indexing:constraint_classification(thermodynamics_entropy, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (SNARE)
% From a universal, analytical view, the Second Law is not a neutral Mountain
% (which requires low extraction). Its high base extraction (0.8) makes it a
% universal Snare, condemning the cosmos to an eventual "Heat Death" by
% inexorably extracting all useful energy.
% χ = 0.80 (ε) * 1.15 (π(analytical)) * 1.0 (σ(universal)) = 0.92
constraint_indexing:constraint_classification(thermodynamics_entropy, snare,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(universal))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(thermodynamics_entropy_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(thermodynamics_entropy, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(thermodynamics_entropy, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(analytical_observer_is_snare) :-
    % Verify the analytical observer sees a Snare due to high extraction, not a Mountain.
    constraint_indexing:constraint_classification(thermodynamics_entropy, snare, context(agent_power(analytical), _, _, _)).

test(threshold_validation) :-
    % Verify the constraint is correctly identified as high-extraction.
    narrative_ontology:constraint_metric(thermodynamics_entropy, extractiveness, E),
    E >= 0.46.

:- end_tests(thermodynamics_entropy_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This model challenges the intuitive classification of a physical law as a Mountain.
 * The Deferential Realism system defines a Mountain by its low extraction (ε <= 0.15).
 * The Second Law of Thermodynamics, however, is fundamentally extractive: it degrades
 * useful energy into waste heat, "extracting" the potential for work from every
 * system. Its base extraction is therefore set very high (0.80).
 *
 * This leads to a profound perspectival gap:
 * - For the powerless (an organism), this inescapable extraction is a Snare (aging, decay).
 * - For the institutional (an engineer), the law's predictability is a coordination
 *   mechanism (a Rope) for building efficient systems, generating value (negative
 *   effective extraction).
 * - For the analytical observer, the universal and inescapable nature of this
 *   extraction makes it the ultimate Snare, leading to the heat death of the universe.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * Classifying this constraint as a Snare from the analytical perspective, despite
 * its `natural_law` claim, is a critical resolution of Mandatrophy. It prevents the
 * system from mislabeling a highly extractive, terminal process as a neutral,
 * low-extraction "Mountain." It correctly identifies that immutability combined
 * with high extraction is the definition of an inescapable trap, not a neutral feature
 * of the landscape.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_thermodynamics_entropy,
    'Is the universe a truly isolated system subject to heat death (Snare), or could unknown physics (e.g., multiverse interactions, vacuum energy renewal) provide an escape (making it a contingent Tangled Rope)?',
    'Empirical validation of cosmological models beyond the Standard Model.',
    'If true Snare, all agency is ultimately futile. If contingent, long-term survival strategies may exist.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(thermodynamics_entropy, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection. For a physical law, the metrics are
% constant over the interval, representing its unchanging nature. This is
% required because base_extractiveness > 0.46.
%
% Theater ratio over time (flat at zero):
narrative_ontology:measurement(thermodynamics_entropy_tr_t0, thermodynamics_entropy, theater_ratio, 0, 0.0).
narrative_ontology:measurement(thermodynamics_entropy_tr_t5, thermodynamics_entropy, theater_ratio, 5, 0.0).
narrative_ontology:measurement(thermodynamics_entropy_tr_t10, thermodynamics_entropy, theater_ratio, 10, 0.0).

% Extraction over time (flat at 0.80):
narrative_ontology:measurement(thermodynamics_entropy_ex_t0, thermodynamics_entropy, base_extractiveness, 0, 0.80).
narrative_ontology:measurement(thermodynamics_entropy_ex_t5, thermodynamics_entropy, base_extractiveness, 5, 0.80).
narrative_ontology:measurement(thermodynamics_entropy_ex_t10, thermodynamics_entropy, base_extractiveness, 10, 0.80).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% No Boltzmann or Network data is applicable for a fundamental physical law.
% narrative_ontology:coordination_type(thermodynamics_entropy, enforcement_mechanism).
% narrative_ontology:affects_constraint(thermodynamics_entropy, [other_constraint_id]).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: three_body_unpredictability
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Isaac Newton (1687) / Henri Poincaré (1887) / Celestial Mechanics
% ============================================================================

:- module(constraint_three_body, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: three_body_unpredictability
 * human_readable: The Three-Body Problem (Orbital Chaos)
 * domain: technological/scientific
 * temporal_scope: 1687 - Present (Civilizational)
 * spatial_scope: Global/Abstract (Astrophysics)
 * * SUMMARY:
 * The Three-Body Problem involves calculating the motion of three celestial bodies 
 * interacting via gravity. Unlike the stable two-body system, the three-body 
 * system generally lacks a general closed-form solution and exhibits extreme 
 * sensitivity to initial conditions (chaos), rendering long-term trajectories 
 * uncomputable.
 * * KEY AGENTS:
 * - The Celestial Body (Subject): A powerless agent whose path is dictated by 
 * the intersection of two or more gravitational wells.
 * - The Orbital Engineer (Institutional): An agent who uses specific stable 
 * subsets (Lagrange points) as a "Rope" to station satellites.
 * - The Navigator/Predictor (Victim): An agent for whom the chaotic divergence 
 * acts as a "Snare," extracting the possibility of long-term survival or 
 * trajectory certainty.
 * * NARRATIVE ARC:
 * The Three-Body Problem is the "Mountain" of celestial mechanics; gravity is 
 * unyielding, yet its complexity prevents a total mapping. In space exploration, 
 * Lagrange points are the "Ropes" that allow for stable coordination. However, 
 * for a civilization living in a triple-star system, the lack of a stable 
 * "Mountain" of predictable seasons acts as a "Snare," extracting all 
 * developmental consistency and "strangling" the future with sudden, 
 * chaotic extinction events.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for structural extraction
narrative_ontology:interval(celestial_mechanics_era, 1687, 2026).
narrative_ontology:constraint_claim(three_body_unpredictability, mountain).

% Base extractiveness score (0.0-1.0)
% Rationale: 0.4. It "extracts" the long-term utility of initial data. To 
% maintain any predictive "Rope," observers must constantly re-invest in 
% high-precision measurements, as the "Mountain" of gravity shreds 
% information over time.
domain_priors:base_extractiveness(three_body_unpredictability, 0.4).

% Suppression score (0.0-1.0)
% Rationale: 0.3. It suppresses the visibility of simple Newtonian 
% determinism in multi-body environments, rendering "clockwork universe" 
% narratives functionally fraudulent at scale.
domain_priors:suppression_score(three_body_unpredictability, 0.3).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(three_body_unpredictability, extractiveness, 0.4).
narrative_ontology:constraint_metric(three_body_unpredictability, suppression_requirement, 0.3).

% Enforcement: Emerges naturally from the non-linear feedback of gravity.
domain_priors:emerges_naturally(three_body_unpredictability).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(three_body_unpredictability, chaos_theorists).
constraint_beneficiary(three_body_unpredictability, n_body_simulators).
constraint_victim(three_body_unpredictability, long_term_navigators).
constraint_victim(three_body_unpredictability, triple_star_civilizations). % Absolute extraction of stability.

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE PLANET IN A TRIPLE-STAR SYSTEM - Mountain
   --------------------------------------------------------------------------
   
   WHO: powerless - The planet has zero agency; gravity is absolute.
   WHEN: immediate - True at every infinitesimal moment of the orbit.
   WHERE: trapped - Bound by the gravitational field.
   SCOPE: local - Immediate neighborhood of the current vector.
   
   WHY THIS CLASSIFICATION:
   For the planet, the gravitational pull of the three suns is an absolute 
   Mountain. It cannot "choose" a different path; its velocity and position 
   are dictated by a law that, while chaotic, is unyielding. The lack of 
   periodicity is a fixed geographic feature of its existence.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    three_body_unpredictability,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE SATELLITE ENGINEER - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional - Power to design orbits and place craft at Lagrange points.
   WHEN: biographical - Planning the 20-year lifespan of a telescope (e.g., JWST).
   WHERE: mobile - Can choose specific "islands of stability" in the system.
   SCOPE: national - Protecting state assets in space.
   
   WHY THIS CLASSIFICATION:
   For the engineer, the Three-Body Problem provides "Ropes"—the Lagrange 
   points ($L_1$ to $L_5$). By understanding the "Mountain" of gravitational 
   interaction, they coordinate a standard of achievement by placing 
   sensors in specific points where forces balance, "pulling" the system 
   into a state of functional utility.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    three_body_unpredictability,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(national)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE INTERSTELLAR NAVIGATOR - Snare
   --------------------------------------------------------------------------
   
   WHO: individual_moderate - Has agency to navigate but is bound by the chaos.
   WHEN: historical - Planning a multi-century journey through a star cluster.
   WHERE: constrained - No alternative but to navigate the non-linear field.
   SCOPE: global - Across the scale of the solar system or cluster.
   
   WHY THIS CLASSIFICATION:
   For the navigator, the Three-Body Problem is a "Snare." It "strangles" 
   long-term planning. Because errors grow exponentially, the system 
   extracts fuel and compute cycles (extraction) for constant course 
   corrections, "choking" the possibility of a fixed, pre-calculated 
   interstellar highway.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    three_body_unpredictability,
    snare,
    context(
        agent_power(individual_moderate),
        time_horizon(historical),
        exit_options(constrained),
        spatial_scope(global)
    )
) :- 
    domain_priors:base_extractiveness(three_body_unpredictability, E),
    E >= 0.35,
    !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(three_body_tests).

test(multi_perspective_variance) :-
    % Planet -> Mountain
    constraint_indexing:constraint_classification(three_body_unpredictability, Type1, context(powerless, immediate, trapped, local)),
    % Engineer -> Rope
    constraint_indexing:constraint_classification(three_body_unpredictability, Type2, context(institutional, biographical, mobile, national)),
    Type1 \= Type2.

test(navigation_extraction_penalty) :-
    % Navigators feel the extraction of certainty as a Snare.
    Context = context(individual_moderate, historical, constrained, global),
    constraint_indexing:extractiveness_for_agent(three_body_unpredictability, Context, Score),
    Score >= 0.4.

test(natural_emergence) :-
    domain_priors:emerges_naturally(three_body_unpredictability).

:- end_tests(three_body_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * * 1. EXTRACTIVENESS SCORE (0.4):
 * Reasoning: Chaos "extracts" information value. In a three-body system, 
 * the future state "taxes" the initial state at an exponential rate. 
 * High extractiveness for those seeking stability.
 * * 2. CLASSIFICATION RATIONALE:
 * - Planet (Mountain): The inevitable subject of physics.
 * - Engineer (Rope): Using Lagrange points to "tie" down utility.
 * - Navigator (Snare): Where unpredictability "chokes" the long-term mission.
 */

% OMEGA IDENTIFICATION
omega_variable(
    orbital_resonance_stability,
    "Is the 'Mountain' of chaos stable, or are there 'Ropes' (periodic orbits) that remain to be discovered?",
    resolution_mechanism("Numerical search for periodic solutions in the restricted three-body problem."),
    impact("If Yes: Navigators gain new Ropes. If No: The 'Snare' of chaos is total."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * * ALTERNATIVE 1: The Restricted Three-Body Problem
 * Viability: Assuming one mass is negligible (e.g., a satellite) makes the 
 * math more manageable (though still chaotic).
 * Suppression: Often presented as the "only" way to do practical engineering, 
 * suppressing the visibility of the "Full" three-body interaction.
 * * * ALTERNATIVE 2: Two-Body Approximation
 * Viability: Treating the Earth-Sun system as isolated.
 * Suppression: Replaced by the Three-Body "Mountain" because it leads to 
 * catastrophic drift in long-term models.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 1. Load: ?- [constraint_three_body].
 * 2. Multi-perspective: ?- multi_index_report(three_body_unpredictability).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */


% --- v3.1 Indexical Relativity Stubs (Fleet Repair) ---
constraint_indexing:constraint_classification(three_body_unpredicability, mountain, agent_power(analytical)).
constraint_indexing:constraint_classification(three_body_unpredicability, rope, agent_power(institutional)).
constraint_indexing:constraint_classification(three_body_unpredicability, snare, agent_power(powerless)).
% ============================================================================
% CONSTRAINT STORY: toxic_social_infection
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-27
% ============================================================================

:- module(constraint_toxic_social_infection, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: toxic_social_infection
 * human_readable: The Infecting Character (Psychic Vampire)
 * domain: social/psychological
 * * SUMMARY:
 * This constraint describes a class of individuals—referred to as "psychic vampires," or "infecting characters"—who radiate an inward instability that draws disaster upon themselves and those around them. They function as social black holes that extract energy, time, and agency from their environment through a combination of seductive flattery and manufactured crises.
 * * KEY AGENTS:
 * - The Infected: The subject who becomes enmeshed and drained of energy.
 * - The Infector: The beneficiary who engineers the social dynamic to extract resources.
 * - The Analyst: An observer who can see the pattern of coordination and extraction.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(toxic_social_infection, 0.90). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(toxic_social_infection, 0.70).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(toxic_social_infection, 0.10).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(toxic_social_infection, extractiveness, 0.90).
narrative_ontology:constraint_metric(toxic_social_infection, suppression_requirement, 0.70).
narrative_ontology:constraint_metric(toxic_social_infection, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(toxic_social_infection, constructed).

% Binary flags
domain_priors:requires_active_enforcement(toxic_social_infection). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(toxic_social_infection, the_infector).
narrative_ontology:constraint_victim(toxic_social_infection, the_infected).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE/MOUNTAIN)
% High extraction felt as an immutable limit or predatory trap.
constraint_indexing:constraint_classification(toxic_social_infection, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Viewed as essential infrastructure or coordination.
constraint_indexing:constraint_classification(toxic_social_infection, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(local))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER
% Default analytical context (civilizational/analytical/global).
% The high extraction, suppression, and need for enforcement, combined with a
% clear coordination function for the beneficiary, make this a Tangled Rope.
constraint_indexing:constraint_classification(toxic_social_infection, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(toxic_social_infection_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(toxic_social_infection, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(toxic_social_infection, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(threshold_validation_high_extraction) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(toxic_social_infection, ExtMetricName, E),
    E >= 0.46. % Ensures it's a high-extraction Snare/Tangled Rope.

test(analytical_view_is_tangled_rope) :-
    constraint_indexing:constraint_classification(toxic_social_infection, tangled_rope, context(agent_power(analytical), _, _, _)).

:- end_tests(toxic_social_infection_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This constraint models a predatory social dynamic. The base extractiveness is set to 0.90, reflecting narrative descriptions of victims being "drained" or having their "life sucked out." The suppression score of 0.70 reflects the use of flattery, gaslighting, and manufactured crises to obscure the extractive nature of the relationship.
 *
 * The key insight is the perspectival gap. For the victim (powerless, trapped), the dynamic is a pure Snare; engagement only leads to further loss of agency and energy. For the infector (institutional power within the dyad), the victim is a resource, and the social rules they create are a Rope for coordinating their own benefit.
 *
 * The analytical observer, seeing both the coordination function (for the infector) and the severe asymmetric extraction (from the victim), classifies this as a Tangled Rope. The original file's classification of 'Mountain' was incorrect, as the high extraction value is incompatible with natural law, and the dynamic is a constructed social pattern, not a physical one.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The Tangled Rope classification correctly captures the dual nature of the constraint. It prevents the system from misclassifying it as a pure Snare (ignoring the infector's coordination) or a pure Rope (ignoring the victim's suffering). The system correctly identifies a constructed mechanism that benefits one party at the severe expense of another.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_toxic_social_infection_1,
    'Is the infector''s "inward instability" a functional biological necessity (Mountain) or an intentional strategy for resource extraction (Snare)?',
    'Audit of Cluster B neurological empathy-response vs. long-term profit-seeking behaviors.',
    'If necessity: Genetic Mountain. If predatory choice: Mandatrophy Snare.',
    confidence_without_resolution(medium)
).

omega_variable(
    omega_toxic_social_infection_2,
    'Do victims who become "FLEAs" permanently transform into new infectors (Mountain), or are they temporary habits that can be unlearned (Rope)?',
    'Longitudinal tracking of behavior in individuals post-estrangement from narcissists.',
    'If permanent: Social Mountain of corruption. If temporary: Remediable Rope.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(toxic_social_infection, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection (metric_substitution,
% extraction_accumulation) by providing measurements at multiple time points.
% This models a stable, perpetually high-extraction dynamic.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(toxic_social_infection_tr_t0, toxic_social_infection, theater_ratio, 0, 0.10).
narrative_ontology:measurement(toxic_social_infection_tr_t5, toxic_social_infection, theater_ratio, 5, 0.10).
narrative_ontology:measurement(toxic_social_infection_tr_t10, toxic_social_infection, theater_ratio, 10, 0.10).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(toxic_social_infection_ex_t0, toxic_social_infection, base_extractiveness, 0, 0.90).
narrative_ontology:measurement(toxic_social_infection_ex_t5, toxic_social_infection, base_extractiveness, 5, 0.90).
narrative_ontology:measurement(toxic_social_infection_ex_t10, toxic_social_infection, base_extractiveness, 10, 0.90).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The infector enforces a specific social dynamic to extract resources.
narrative_ontology:coordination_type(toxic_social_infection, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: tractarian_logic_limit
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-22
% ============================================================================

:- module(constraint_tractarian_logic_limit, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: tractarian_logic_limit
 * human_readable: The Limits of Language (Tractatus)
 * domain: philosophical/logical
 * * SUMMARY:
 * The world consists of facts in logical space. Language is a "picture" of those facts.
 * Any attempt to use language outside this scope (e.g., to discuss ethics, aesthetics,
 * or metaphysics) hits a hard limit, resulting in "nonsense." The constraint is the
 * proposed logical structure of language itself, which suppresses alternative modes of discourse.
 * * KEY AGENTS:
 * - The Metaphysician: Subject (Powerless) - An agent whose field of inquiry is declared unspeakable.
 * - The Vienna Circle: Beneficiary (Institutional) - A philosophical movement that adopted the Tractatus as a core text.
 * - The Systems Analyst: Auditor (Analytical) - An observer classifying the structure of the philosophical claim.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(tractarian_logic_limit, 0.70). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(tractarian_logic_limit, 0.95).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(tractarian_logic_limit, 0.10).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(tractarian_logic_limit, extractiveness, 0.70).
narrative_ontology:constraint_metric(tractarian_logic_limit, suppression_requirement, 0.95).
narrative_ontology:constraint_metric(tractarian_logic_limit, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(tractarian_logic_limit, natural_law).

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
narrative_ontology:constraint_beneficiary(tractarian_logic_limit, natural_science_philosophers).
narrative_ontology:constraint_victim(tractarian_logic_limit, metaphysicians).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The metaphysician or ethicist whose entire domain is extracted and delegitimized.
% It feels like a Mountain due to its totalizing logical claims, but is a constructed Snare.
% χ = 0.70 * π(powerless=1.5) * σ(universal=1.0) = 1.05. High extraction + high suppression = Snare.
constraint_indexing:constraint_classification(tractarian_logic_limit, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(universal))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For the logical positivists of the Vienna Circle, it was a pure coordination device.
% It provided a shared standard to "clean up" philosophy and eliminate metaphysics.
% χ = 0.70 * π(institutional=-0.2) * σ(continental=1.1) = -0.154. Negative extraction = Rope.
constraint_indexing:constraint_classification(tractarian_logic_limit, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(continental))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (SNARE)
% The analyst sees a constructed system with high base extraction and suppression,
% which functions to asymmetrically benefit one mode of inquiry over another.
% χ = 0.70 * π(analytical=1.15) * σ(global=1.2) = 0.966. This is a clear Snare.
constraint_indexing:constraint_classification(tractarian_logic_limit, snare,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(tractarian_logic_limit_tests).

test(perspectival_gap_subject_beneficiary) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(tractarian_logic_limit, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(tractarian_logic_limit, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    assertion(TypePowerless == snare),
    assertion(TypeInstitutional == rope),
    TypePowerless \= TypeInstitutional.

test(analytical_observer_classification) :-
    % The analytical observer must classify this as a Snare based on the metrics.
    constraint_indexing:constraint_classification(tractarian_logic_limit, TypeAnalytical, context(agent_power(analytical), _, _, _)),
    assertion(TypeAnalytical == snare).

test(high_extraction_and_suppression) :-
    % Verify the base metrics meet the Snare threshold.
    domain_priors:base_extractiveness(tractarian_logic_limit, E),
    domain_priors:suppression_score(tractarian_logic_limit, S),
    assertion(E >= 0.46),
    assertion(S >= 0.60).

:- end_tests(tractarian_logic_limit_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This constraint models a philosophical system that claims to be a 'Mountain' (a description
 * of logical reality, a natural law) but functions as a 'Snare'. The base extractiveness (0.70)
 * is high because the system extracts the legitimacy of entire fields like ethics, aesthetics,
 * and metaphysics, reclassifying them as "nonsense." The suppression (0.95) is near-total,
 * as it posits this exclusion not as a choice but as a logical necessity.
 *
 * The Perspectival Gap is stark:
 * - For the victim (metaphysician), it's a Snare that traps them by invalidating their language.
 *   While it feels like an inescapable Mountain, its constructed nature and high extraction
 *   make it a Snare.
 * - For the beneficiary (Vienna Circle), it's a Rope—a powerful coordination tool to build a
 *   new, rigorous philosophical movement. The negative effective extraction for them confirms this.
 * - The Analytical observer confirms the Snare classification based on the objective metrics.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * This case is a classic example of a false natural law claim. The system avoids
 * misclassifying it as a Mountain by indexing it. While the powerless agent feels
 * trapped as if by a law of nature, the institutional agent's ability to use it as a
 * 'Rope' and the high base extraction reveal its constructed, extractive nature. The
 * system correctly identifies it as a Snare from the analytical perspective, resolving
 * the ambiguity created by its 'natural law' claim.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_tractarian_logic_limit,
    'Is the Tractarian limit a genuine logical boundary (Mountain) or a sophisticated linguistic convention (Snare)?',
    'Analysis of Wittgenstein''s later work (Philosophical Investigations), which refutes the Tractarian model, provides strong evidence for the Snare interpretation.',
    'If Mountain, then metaphysics is impossible. If Snare, then the Tractatus is a coercive philosophical move that suppresses valid alternative language games.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(tractarian_logic_limit, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection. This constraint is modeled as being
% conceptually stable since its inception, with consistently high extraction
% and low theatricality.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(tractarian_logic_limit_tr_t0, tractarian_logic_limit, theater_ratio, 0, 0.10).
narrative_ontology:measurement(tractarian_logic_limit_tr_t5, tractarian_logic_limit, theater_ratio, 5, 0.10).
narrative_ontology:measurement(tractarian_logic_limit_tr_t10, tractarian_logic_limit, theater_ratio, 10, 0.10).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(tractarian_logic_limit_ex_t0, tractarian_logic_limit, base_extractiveness, 0, 0.70).
narrative_ontology:measurement(tractarian_logic_limit_ex_t5, tractarian_logic_limit, base_extractiveness, 5, 0.70).
narrative_ontology:measurement(tractarian_logic_limit_ex_t10, tractarian_logic_limit, base_extractiveness, 10, 0.70).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% No coordination type is declared as the primary function is suppression,
% not coordination in the sense of a shared resource or standard, despite
% the Vienna Circle using it as such. Its claim is natural_law, not coordination.

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: trade_secret_law
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: Uniform Trade Secrets Act (UTSA) / Defend Trade Secrets Act (DTSA)
% ============================================================================

:- module(constraint_trade_secret_law, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: trade_secret_law
 * human_readable: Trade Secret Law (Information Ownership)
 * domain: legal/economic/technological
 * temporal_scope: Civilizational (Permanent feature of commerce)
 * spatial_scope: Global
 * 
 * SUMMARY:
 * Trade Secret Law protects confidential business information (formulae, 
 * practices, designs, instruments, or patterns) that provides an enterprise 
 * a competitive advantage. It exists as long as the information remains 
 * secret and the owner takes reasonable steps to protect it.
 * 
 * KEY AGENTS:
 * - The Accused Whistleblower (Individual Powerless): Faces litigation for alleged misappropriation.
 * - The Courts (Institutional): The final arbiters of what constitutes "misappropriation."
 * - The Information Owner (Individual Powerful): The firm that invested in the secret.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(trade_secret_law, 0, 10).
narrative_ontology:constraint_claim(trade_secret_law, tangled_rope).

% Base extractiveness: 0.2.
% It protects the firm's investment without extracting the employee's 
% general right to work or earn a living.
domain_priors:base_extractiveness(trade_secret_law, 0.2).

% Suppression: 0.3.
% The rules are generally transparent, though the specific "secrets" 
% are (by definition) suppressed/hidden.
domain_priors:suppression_score(trade_secret_law, 0.3).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(trade_secret_law, extractiveness, 0.2).
narrative_ontology:constraint_metric(trade_secret_law, suppression_requirement, 0.3).

% Enforcement: Emerges naturally as a market norm and legal baseline.
domain_priors:emerges_naturally(trade_secret_law).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(trade_secret_law, innovative_enterprises).
constraint_victim(trade_secret_law, industrial_spies).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE ACCUSED WHISTLEBLOWER - Snare
   --------------------------------------------------------------------------
   WHO: powerless (Faces litigation for alleged misappropriation)
   WHEN: immediate (The moment of legal action)
   WHERE: trapped (By high legal costs and ambiguity of "secret" definition)
   
   WHY THIS CLASSIFICATION:
   If a company uses "Trade Secret" claims to suppress a whistleblower 
   or block a departing employee's move through litigation, the law 
   becomes a 'Snare'. The high cost of legal defense and the ambiguity 
   of what constitutes a "secret" can strangle the individual's 
   career and mobility, even if their actions were ethically motivated.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    trade_secret_law,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(national)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE COURTS - Rope
   --------------------------------------------------------------------------
   WHO: institutional (The final arbiters of what constitutes "misappropriation")
   WHEN: historical (Evolving jurisprudence in intellectual property)
   WHERE: arbitrage (Balances competing interests of innovation, competition, and mobility)
   
   WHY THIS CLASSIFICATION:
   For the Courts, trade secret law is a 'Rope'—a tool for balancing innovation,
   competition, and individual mobility. It provides a framework for adjudicating
   disputes, promoting fair business practices, and fostering a climate of trust
   and innovation within the economy.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    trade_secret_law,
    rope,
    context(
        agent_power(institutional),
        time_horizon(historical),
        exit_options(arbitrage),
        spatial_scope(national)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE INFORMATION OWNER - Mountain
   --------------------------------------------------------------------------
   WHO: powerful (The firm that invested in the secret)
   WHEN: historical (Securing competitive advantage over decades)
   WHERE: arbitrage (Uses legal protection to maintain market position)
   
   WHY THIS CLASSIFICATION:
   For an information owner, Trade Secret Law is a 'Mountain'—a permanent feature 
   of the intellectual property landscape. They build their company's "moat" based
   on these protections, viewing it as an immutable law of the marketplace that
   allows them to secure venture capital by proving their value is protected.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    trade_secret_law,
    mountain,
    context(
        agent_power(powerful),
        time_horizon(historical),
        exit_options(arbitrage),
        spatial_scope(national)
    )
).

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(trade_secret_law_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(trade_secret_law, Type1, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(trade_secret_law, Type2, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(trade_secret_law, Type3, context(agent_power(powerful), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3,
    Type1 \= Type3.

:- end_tests(trade_secret_law_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. INSTITUTIONAL PERSPECTIVE: Added 'The Courts' as the institutional agent.
 *    For them, trade secret law is a 'Rope' for balancing competing interests.
 *
 * 2. CLASSIFICATION RATIONALE:
 *    - Accused Whistleblower (Snare): Trapped by legal costs and ambiguity.
 *    - The Courts (Rope): A tool for balancing competing interests.
 *    - Information Owner (Mountain): Immutable legal protection for IP.
 * 
 * 3. CORE INSIGHT: Trade secret law is a 'Tangled Rope'. It's a 'Rope' for
 *    innovative firms, protecting their intellectual assets and fostering
 *    economic growth. However, it can become a 'Snare' for individuals
 *    (like whistleblowers or departing employees) when used aggressively,
 *    highlighting the delicate balance between corporate protection and
 *    individual rights.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * The core uncertainty is the potential for trade secret law to function as a de-facto non-compete.
 */

omega_variable(
    inevitable_disclosure_drift,
    "Will courts increasingly use the 'Inevitable Disclosure Doctrine' to treat Trade Secret Law as a de-facto Non-Compete agreement, effectively turning this 'Rope' into a 'Snare' for high-skill labor mobility?",
    resolution_mechanism("Monitoring case law trends in states with and without strong 'Inevitable Disclosure' doctrines (e.g., New York vs. California); legislative efforts to clarify or limit the doctrine's scope."),
    impact("If Yes: The 'Mountain' of legal precedent turns into a 'Snare' for all high-skill labor. If No: It remains a balanced 'Tangled Rope'."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */
/**
 * VIABLE ALTERNATIVES
 *
 * ALTERNATIVE 1: Non-Compete Agreements
 *    Viability: Explicit contractual agreements restricting an employee's ability to work for competitors.
 *    Suppression: Increasingly suppressed by courts and legislatures (e.g., California) due to concerns about worker mobility and economic stagnation.
 *
 * CONCLUSION:
 * Trade secret law aims to be a 'Rope' that balances protection for firms with
 * mobility for employees. However, the potential for its aggressive application
 * (e.g., via "Inevitable Disclosure") risks transforming it into a 'Snare',
 * effectively replacing suppressed non-compete agreements with a more subtle form
 * of labor market restriction.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/trade_secret_law].
 * 2. Multi-perspective: ?- multi_index_report(trade_secret_law).
 * 3. Run tests: ?- run_tests(trade_secret_law_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: tragedy_of_the_commons
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_tragedy_of_the_commons, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: tragedy_of_the_commons
 * human_readable: The Tragedy of the Commons
 * domain: economic/social
 * * SUMMARY:
 * A situation where individual users of a shared resource, acting independently
 * and rationally in their own self-interest, behave contrary to the common good
 * by depleting or spoiling that resource through their collective action. The
 * constraint is the logic of ruin that emerges in an unregulated commons.
 * * KEY AGENTS:
 * - Subsistence User: Subject (Powerless), forced to over-exploit to survive.
 * - Aggressive Defector: Beneficiary (Institutional/Organized), maximizes private gain by defecting.
 * - Analytical Observer: Auditor (Analytical), models the game-theoretic structure.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(tragedy_of_the_commons, 0.70). % Snare extraction >= 0.46
domain_priors:suppression_score(tragedy_of_the_commons, 0.40).   % Structural property (raw, unscaled).
domain_priors:theater_ratio(tragedy_of_the_commons, 0.10).       % Low theater; this is a highly functional dynamic.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(tragedy_of_the_commons, extractiveness, 0.70).
narrative_ontology:constraint_metric(tragedy_of_the_commons, suppression_requirement, 0.40).
narrative_ontology:constraint_metric(tragedy_of_the_commons, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% Hardin's original framing presents it as an inevitable, mathematical outcome.
narrative_ontology:constraint_claim(tragedy_of_the_commons, natural_law).

% Binary flags
% To solve the tragedy, "mutual coercion, mutually agreed upon" is required.
domain_priors:requires_active_enforcement(tragedy_of_the_commons).

% Structural property derivation hooks:
% Beneficiaries exist (those who defect first/hardest), implying a coordination function to manage them.
narrative_ontology:constraint_beneficiary(tragedy_of_the_commons, aggressive_defector).
% Victims exist (the community and future generations), implying asymmetric extraction.
narrative_ontology:constraint_victim(tragedy_of_the_commons, collective_community).
narrative_ontology:constraint_victim(tragedy_of_the_commons, future_generations).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBSISTENCE USER (SNARE)
% Forced by the structure to participate in the destruction of the very resource
% they rely on. Failing to add another animal guarantees starvation today, while
% adding one only slightly hastens eventual starvation for all.
constraint_indexing:constraint_classification(tragedy_of_the_commons, snare,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE REGULATORY BODY (ROPE)
% Views the tragedy as a coordination problem to be solved with the "Rope" of
% "mutual coercion, mutually agreed upon." They create and enforce rules (quotas,
% taxes) to align individual incentives with the long-term health of the commons.
constraint_indexing:constraint_classification(tragedy_of_the_commons, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The system has a clear coordination function (managing the resource) but also
% enables severe asymmetric extraction by defectors. It requires active enforcement
% to prevent collapse. This combination is the definition of a Tangled Rope.
constraint_indexing:constraint_classification(tragedy_of_the_commons, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

% PERSPECTIVE 4: THE OSTROM-STYLE COMMUNITY (ROPE)
% For an organized local community with high social capital, the tragedy is a
% solvable coordination challenge (a Rope) managed through social norms, mutual
% monitoring, and graduated sanctions, avoiding the need for external enforcement.
constraint_indexing:constraint_classification(tragedy_of_the_commons, rope,
    context(agent_power(organized),
            time_horizon(biographical),
            exit_options(constrained),
            spatial_scope(local))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(tragedy_of_the_commons_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(tragedy_of_the_commons, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(tragedy_of_the_commons, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(analytical_classification_is_tangled_rope) :-
    % The analytical view must resolve the conflict into a Tangled Rope.
    constraint_indexing:constraint_classification(tragedy_of_the_commons, tangled_rope, context(agent_power(analytical), _, _, _)).

:- end_tests(tragedy_of_the_commons_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness (0.70) is high because an individual defector captures
 * 100% of the marginal benefit of over-consumption, while socializing the cost
 * across all users. This creates a powerful incentive to defect. The suppression
 * score (0.40) is moderate; while cooperation is suppressed by the payoff
 * matrix, alternatives like privatization or Ostrom-style governance are known.
 *
 * The key insight is the perspectival gap. For the powerless user, it's a Snare;
 * they are trapped in a self-destructive loop. For an institutional regulator or
 * an organized community, it's a Rope; a coordination problem to be solved.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The analytical classification is Tangled Rope, not Mountain. While Hardin
 * framed the logic as an inescapable "tragedy," the existence of solutions
 * (regulation, social norms) proves it is a constructed system, not a natural
 * law. It is a Tangled Rope because it possesses both a genuine coordination
 * function (how to manage the commons) and enables severe asymmetric extraction
 * (by defectors). Acknowledging both facets prevents misclassifying it as
 * either pure coordination (Rope) or pure, unchangeable law (Mountain).
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% Can human cooperative norms scale to global problems without coercive hierarchy?
omega_variable(
    omega_tragedy_of_the_commons,
    'Can human cooperative norms (Ostrom-style solutions) scale to global scope without top-down institutional enforcement?',
    'Observation of global climate agreements and their enforcement rates over decades.',
    'If Yes: Global commons are a Rope. If No: Global commons are a Tangled Rope requiring coercive enforcement to function.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(tragedy_of_the_commons, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This models the intensification of the tragedy as the resource becomes scarcer.
% The potential for extraction increases as competition for the last remaining
% units of the resource grows more fierce. Theater remains low.

% Theater ratio over time (remains low and functional):
narrative_ontology:measurement(tragedy_of_the_commons_tr_t0, tragedy_of_the_commons, theater_ratio, 0, 0.05).
narrative_ontology:measurement(tragedy_of_the_commons_tr_t5, tragedy_of_the_commons, theater_ratio, 5, 0.08).
narrative_ontology:measurement(tragedy_of_the_commons_tr_t10, tragedy_of_the_commons, theater_ratio, 10, 0.10).

% Extraction over time (intensifies as resource depletes):
narrative_ontology:measurement(tragedy_of_the_commons_ex_t0, tragedy_of_the_commons, base_extractiveness, 0, 0.60).
narrative_ontology:measurement(tragedy_of_the_commons_ex_t5, tragedy_of_the_commons, base_extractiveness, 5, 0.65).
narrative_ontology:measurement(tragedy_of_the_commons_ex_t10, tragedy_of_the_commons, base_extractiveness, 10, 0.70).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% This is a classic resource allocation problem.
narrative_ontology:coordination_type(tragedy_of_the_commons, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: transformer_self_attention
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-28
% ============================================================================

:- module(constraint_transformer_self_attention, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: transformer_self_attention
 * human_readable: The Transformer Self-Attention Architecture
 * domain: technological
 * * SUMMARY:
 * The transformer architecture is the foundation for modern large language models, replacing recurrent neural networks (RNNs) with a "self-attention" mechanism. This allows models to weigh the importance of all words in a sequence simultaneously, enabling massive performance gains by leveraging internet-scale data. This architectural dominance creates a powerful coordination standard but also displaces prior technologies and centralizes computational requirements.
 * * KEY AGENTS:
 * - Legacy RNN Developers: The subjects, whose technology was rendered obsolete (Powerless).
 * - Modern AI Researchers/Companies: The beneficiaries, who can leverage the architecture for unprecedented capabilities (Institutional).
 * - Systems Auditor: An analytical observer evaluating the architecture's structural properties (Analytical).
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(transformer_self_attention, 0.75). % High: Enables massive value extraction from public data.
domain_priors:suppression_score(transformer_self_attention, 0.40).   % Moderate: Displaced RNNs through superior performance, not explicit prohibition.
domain_priors:theater_ratio(transformer_self_attention, 0.05).       % Low: The architecture is highly functional, not performative.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(transformer_self_attention, extractiveness, 0.75).
narrative_ontology:constraint_metric(transformer_self_attention, suppression_requirement, 0.40).
narrative_ontology:constraint_metric(transformer_self_attention, theater_ratio, 0.05).

% Constraint self-claim (what does the constraint claim to be?)
% It presents itself as a superior coordination mechanism for processing information.
narrative_ontology:constraint_claim(transformer_self_attention, coordination).

% Binary flags
domain_priors:requires_active_enforcement(transformer_self_attention). % Requires massive computational infrastructure and data pipelines to maintain dominance.

% Structural property derivation hooks for Tangled Rope classification:
narrative_ontology:constraint_beneficiary(transformer_self_attention, modern_ai_companies).
narrative_ontology:constraint_victim(transformer_self_attention, legacy_rnn_developers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For developers invested in prior architectures (RNNs), the transformer is a Snare.
% Its dominance makes their skills and tools obsolete, trapping them in a non-competitive paradigm.
% χ = 0.75 (ε) * 1.5 (π(powerless)) * 1.0 (σ(national)) = 1.125
constraint_indexing:constraint_classification(transformer_self_attention, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For AI companies and researchers, the architecture is a pure Rope—an immensely powerful
% coordination tool that unlocks new capabilities and commercial opportunities.
% χ = 0.75 (ε) * -0.2 (π(institutional)) * 1.2 (σ(global)) = -0.18
constraint_indexing:constraint_classification(transformer_self_attention, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Analytically, the architecture is a Tangled Rope. It provides a genuine, powerful
% coordination function (Rope aspect) but also involves massive asymmetric extraction
% of value from public data and displaces alternative approaches through its de facto
% standardization, which requires active enforcement (Snare aspect).
constraint_indexing:constraint_classification(transformer_self_attention, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(transformer_self_attention_tests).

test(perspectival_gap_is_snare_vs_rope) :-
    constraint_indexing:constraint_classification(transformer_self_attention, snare,
        context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(transformer_self_attention, rope,
        context(agent_power(institutional), _, _, _)).

test(analytical_view_is_tangled_rope) :-
    constraint_indexing:constraint_classification(transformer_self_attention, tangled_rope,
        context(agent_power(analytical), _, _, _)).

test(high_extraction_threshold_met) :-
    narrative_ontology:constraint_metric(transformer_self_attention, extractiveness, E),
    E >= 0.46.

:- end_tests(transformer_self_attention_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness (0.75) is high because the transformer architecture's primary innovation
 * is its ability to effectively extract signal and value from internet-scale datasets, a previously
 * intractable task. The suppression score (0.40) is moderate, as it outcompeted rather than banned
 * prior methods like RNNs.
 *
 * This creates a classic Perspectival Gap. For beneficiaries (AI labs), it is a pure Rope, a tool
 * of immense power and coordination. For those invested in the displaced technology (RNNs), it is a
 * Snare that renders their expertise and infrastructure obsolete.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The system correctly classifies this as a Tangled Rope from an analytical perspective. A simpler
 * model might misclassify it as a pure Rope (ignoring the displacement and centralization effects)
 * or a pure Snare (ignoring its genuine and profound coordination benefits). The Tangled Rope
 * classification acknowledges that it is both a powerful coordination tool and a source of
 * asymmetric extraction and coercion.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_transformer_self_attention_1,
    'Is the high extractiveness from public data a functional necessity for intelligence (Rope), or a predatory aggregation of global human labor (Snare)?',
    'Audit of model performance using curated small datasets vs. uncurated internet scrapes.',
    'If necessity, the constraint leans Mountain. If predatory, it is a pure Snare.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(transformer_self_attention, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% The transformer architecture started with high utility and has only become more
% extractively efficient over time. The theater ratio remains low as it is a core,
% functional technology.
%
% Theater ratio over time (stable and low):
narrative_ontology:measurement(tsa_tr_t0, transformer_self_attention, theater_ratio, 0, 0.05).
narrative_ontology:measurement(tsa_tr_t5, transformer_self_attention, theater_ratio, 5, 0.05).
narrative_ontology:measurement(tsa_tr_t10, transformer_self_attention, theater_ratio, 10, 0.05).

% Extraction over time (increasing as models and datasets scaled):
narrative_ontology:measurement(tsa_ex_t0, transformer_self_attention, base_extractiveness, 0, 0.60).
narrative_ontology:measurement(tsa_ex_t5, transformer_self_attention, base_extractiveness, 5, 0.70).
narrative_ontology:measurement(tsa_ex_t10, transformer_self_attention, base_extractiveness, 10, 0.75).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The transformer architecture functions as a de facto standard for information processing.
narrative_ontology:coordination_type(transformer_self_attention, information_standard).

% The dominance and computational hunger of this architecture directly influence
% the constraints and demands on the semiconductor supply chain.
narrative_ontology:affects_constraint(transformer_self_attention, semiconductor_supply).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: transient_event_detection
% ============================================================================
% Generated: 2026-01-21
% Model: Gemini 2.0 Flash
% Source: Alex Wilkins, "Filming the universe’s biggest dramas"
% Status: [RESOLVED]
% ============================================================================

:- module(constraint_transient_event_detection, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: transient_event_detection
 * human_readable: Automated Transient Event Detection
 * domain: technological/scientific
 * temporal_scope: 11th Century to 2026
 * spatial_scope: Global (Astronomical Surveys)
 * * SUMMARY:
 * Astronomy has transitioned from relying on "happy accidents" and chance observations to a 
 * "tactic in its own right" using automated "conveyor belt" systems to capture fleeting cosmic events. 
 * This shift allows the exploration of previously poorly understood timescales, from nanoseconds to centuries.
 * * KEY AGENTS:
 * - The Ancient Observer: Relied on "guest stars" and chance sightings as harbingers of change.
 * - The Automated Survey (e.g., ZTF, Pan-STARRS): A coordinated machine searching in time rather than space.
 * - The Transient Event (Supernovae): Fleeting flashes of light representing the "action" of the universe.
 * * NARRATIVE ARC:
 * What was once a "happy accident" governed by chance (Mountain) has been industrialized into a 
 * functional coordination mechanism (Rope) that extracts data from cosmic "transients".
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(transient_event_detection, 0, 10).
narrative_ontology:constraint_claim([transient_event_detection], [information_extraction]).

% Base extractiveness score (0.45 = Moderate)
% Rationale: The system extracts massive volumes of data (e.g., 1.6 petabytes from Pan-STARRS) 
% to identify patterns in cosmic action.
domain_priors:base_extractiveness(transient_event_detection, 0.45).

% Suppression score (0.5 = Moderate)
% Rationale: The "conveyor belt" automation suppresses the role of "chance" and 
% serendipity in favor of industrial-scale surveillance.
domain_priors:suppression_score(transient_event_detection, 0.5).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(transient_event_detection, extractiveness, 0.45).
narrative_ontology:constraint_metric(transient_event_detection, suppression_requirement, 0.5).

% Enforcement requirements: Requires active enforcement (Coordinated telescopes and automated systems).
domain_priors:requires_active_enforcement(transient_event_detection).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
% Modern astronomers benefit from the "automated serendipity" and petabyte-scale data.
constraint_beneficiary(transient_event_detection, modern_astronomers).
% Traditional "chance" methods are victims of the shift toward "search in time" conveyor belts.
constraint_victim(transient_event_detection, traditional_methodologists).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE ANCIENT CHINESE ASTRONOMER - Mountain
   --------------------------------------------------------------------------
   
   WHO: powerless (Relied on chance and "guest stars")
   WHEN: historical (1000 years ago)
   WHERE: trapped (No conceptual exit; events were "happy accidents")
   SCOPE: national (Believed events were harbingers of change)
   
   WHY THIS CLASSIFICATION:
   To the ancient observer, cosmic transients were immutable "guest stars"—external 
   laws of fate that appeared without human agency or coordination.
   
   NARRATIVE EVIDENCE:
   "Back then, Chinese astronomers called these 'guest stars' and believed them 
   to be harbingers of great change".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    transient_event_detection,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(historical),
        exit_options(trapped),
        spatial_scope(national)
    )
) :-
    domain_priors:suppression_score(transient_event_detection, S),
    S > 0.4,
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE MODERN ASTRONOMER (e.g., Hessels) - Rope
   --------------------------------------------------------------------------
   
   WHO: analytical (Observer coordinating telescopes as one machine)
   WHEN: biographical (The turn of this century and the 2020s)
   WHERE: arbitrage (Can switch between telescopes for further investigation)
   SCOPE: global (Surveys in California, Hawaii, and the Netherlands)
   
   WHY THIS CLASSIFICATION:
   For the modern scientist, transient detection is a Rope—a functional, well-oiled 
   machine used to explore "poorly explored" ranges of time scales.
   
   NARRATIVE EVIDENCE:
   "Astronomers have now automated the process of serendipity... coordinating 
   telescopes as one well-oiled machine".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    transient_event_detection,
    rope,
    context(
        agent_power(analytical),
        time_horizon(biographical),
        exit_options(arbitrage),
        spatial_scope(global)
    )
) :-
    domain_priors:base_extractiveness(transient_event_detection, E),
    E < 0.6,
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE AUTOMATED SURVEY SYSTEM - Snare
   --------------------------------------------------------------------------
   
   WHO: institutional (Rule-making power over data collection)
   WHEN: immediate (Capturing flashes from nanoseconds to lifetimes)
   WHERE: constrained (Must follow the "conveyor belt" automation protocol)
   SCOPE: global (Pan-STARRS collecting the largest volume of data)
   
   WHY THIS CLASSIFICATION:
   The system acts as a Snare for information. It extracts petabytes of data from 
   every intermittent event, forcing a high-volume "action" focus that leaves 
   little room for the "chance" exploration of space.
   
   NARRATIVE EVIDENCE:
   "It was really set up like a conveyor belt... Pan-STARRS survey, which has 
   collected the largest volume of astronomical data of all time".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    transient_event_detection,
    snare,
    context(
        agent_power(institutional),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(global)
    )
) :-
    domain_priors:base_extractiveness(transient_event_detection, E),
    E > 0.4,
    !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(transient_event_detection_tests).

test(multi_perspective_variance) :-
    % Ancient (Mountain) vs Modern (Rope) vs System (Snare)
    constraint_indexing:constraint_classification(transient_event_detection, mountain, context(powerless, historical, trapped, national)),
    constraint_indexing:constraint_classification(transient_event_detection, rope, context(analytical, biographical, arbitrage, global)),
    constraint_indexing:constraint_classification(transient_event_detection, snare, context(institutional, immediate, constrained, global)).

test(information_extractiveness_scaling) :-
    % Modern institutional systems experience the extraction of 1.6 petabytes
    % compared to the analytical observer's informational tool.
    Score1 = 0.45,
    Score2 = 0.1,
    Score1 > Score2.

:- end_tests(transient_event_detection_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-21
 * * KEY DECISIONS:
 * * 1. EXTRACTIVENESS SCORE (0.45):
 * Reasoning: Chosen because the "conveyor belt" system extracts petabytes 
 * of data from transient events.
 * * 2. PERSPECTIVE SELECTION:
 * Analyzed from the ancient observer (Mountain), the modern scientist (Rope), 
 * and the automated system itself (Snare) to demonstrate the transition from 
 * fate to industrialized tool.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    transient_event_detection_extraction_intent,
    "Is the petabyte-scale extraction of data a functional necessity for understanding the universe (Rope) or a predatory focus on speed over depth (Snare)?",
    resolution_mechanism("Audit of scientific breakthrough quality vs. pure data volume from surveys like Pan-STARRS"),
    impact("If necessity: Mountain. If predatory choice: Snare."),
    confidence_without_resolution(medium)
).

omega_variable(
    automated_serendipity_validity,
    "Can 'serendipity' truly be automated, or does the conveyor belt model create a 'living within a lie' where true anomalies are filtered out?",
    resolution_mechanism("Compare discovery rates of predicted vs. unpredicted transient events in automated systems"),
    impact("If automated: Rope. If filtered: Snare."),
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Slow-Mapping Astronomy
 * Viability: Traditional long-term spatial mapping of stable stars.
 * Suppression: Being "transformed" and replaced by time-domain surveys.
 * Evidence: "Many more telescopes whose purpose is to search in time, rather than space, have followed".
 * * CONCLUSION:
 * The move from "Chance" to "Conveyor Belt" represents the core technological 
 * arbitrage of 21st-century astronomy.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 1. Load: ?- [constraints/transient_event_detection].
 * 2. Multi-perspective: ?- multi_index_report(transient_event_detection).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: traveling_salesperson_problem
% ============================================================================
% Generated: 2026-01-17
% Model: Gemini 2.0 Flash
% Source: Combinatorial Optimization / Complexity Theory / Operations Research
% ============================================================================

:- module(constraint_tsp, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: traveling_salesperson_problem
 * human_readable: Traveling Salesperson Problem (TSP)
 * domain: economic/technological/mathematical
 * temporal_scope: Immediate to Historical
 * spatial_scope: Regional to Global
 * * SUMMARY:
 * TSP is an optimization problem: given a list of cities and the distances 
 * between each pair, what is the shortest possible route that visits each 
 * city exactly once and returns to the origin city? It is NP-hard.
 * * KEY AGENTS:
 * - The Courier: The agent facing the physical exhaustion of the route.
 * - The Logistics Algorithm: The "Institutional" force attempting to solve 
 * the path to minimize fuel/time costs.
 * - The Market: The force that extracts profit based on the efficiency 
 * (or failure) of the solution.
 * * NARRATIVE ARC:
 * TSP is the "Efficiency Ceiling." For a small set of nodes, it is a 
 * navigable Rope. However, as the network expands, the search space 
 * explodes, creating a computational Snare that drains resources. It 
 * eventually settles as a Mountain of irreducible cost—the "minimum price" 
 * nature demands for connectivity.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (Reality Layer)
   ========================================================================== */

narrative_ontology:interval(traveling_salesperson_problem, 0, 10).
narrative_ontology:constraint_claim(traveling_salesperson_problem, mountain).

% Base extractiveness score (0.4)
% High because every suboptimal mile "extracts" real-world energy (fuel, labor) 
% that cannot be recovered.
domain_priors:base_extractiveness(traveling_salesperson_problem, 0.4).

% Suppression score (0.2)
% The "costs" of the edges (distances/prices) are usually visible, 
% making the constraint highly transparent but unavoidable.
domain_priors:suppression_score(traveling_salesperson_problem, 0.2).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(traveling_salesperson_problem, extractiveness, 0.4).
narrative_ontology:constraint_metric(traveling_salesperson_problem, suppression_requirement, 0.2).

% Enforcement: Emerges naturally from physical distance and finite time.
domain_priors:emerges_naturally(traveling_salesperson_problem).

% Metrics
% BENEFICIARIES & VICTIMS
constraint_beneficiary(traveling_salesperson_problem, efficient_monopolies).
constraint_victim(traveling_salesperson_problem, small_scale_logistics).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE DELIVERY DRIVER - Snare
   --------------------------------------------------------------------------
   WHO: powerless
   WHEN: immediate
   WHERE: trapped (must follow the optimized route to meet performance KPIs)
   SCOPE: local
   
   WHY THIS CLASSIFICATION:
   For a driver, TSP is a "Snare." The algorithm's search for the absolute 
   minimum path often ignores human factors (fatigue, traffic, bathroom breaks). 
   The mathematical "optimum" becomes a punitive standard they are 
   strangled by during their shift.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    traveling_salesperson_problem,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :-
    domain_priors:base_extractiveness(traveling_salesperson_problem, E),
    E > 0.3,
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE NETWORK ENGINEER - Rope
   --------------------------------------------------------------------------
   WHO: institutional/individual_moderate
   WHEN: biographical
   WHERE: mobile
   SCOPE: regional
   
   WHY THIS CLASSIFICATION:
   To the engineer, TSP is a "Rope." It is a tool to coordinate resources. 
   By using heuristics (like the "Nearest Neighbor" or "Ant Colony" 
   optimization), they can navigate the complexity to create a functional, 
   profitable system.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    traveling_salesperson_problem,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(regional)
    )
) :-
    true.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE PHYSICIST - Mountain
   --------------------------------------------------------------------------
   WHO: analytical
   WHEN: historical
   WHERE: analytical
   SCOPE: global
   
   WHY THIS CLASSIFICATION:
   The physicist sees TSP as a "Mountain" of entropy and energy. 
   The minimum energy state required to traverse a network is a 
   fundamental physical reality. It is a boundary of the universe that 
   dictates the limits of all physical transport.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    traveling_salesperson_problem,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(historical),
        exit_options(analytical),
        spatial_scope(global)
    )
) :-
    domain_priors:emerges_naturally(traveling_salesperson_problem),
    !.

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(tsp_tests).

test(algorithmic_pressure) :-
    % Testing that trapped agents feel the Snare of optimization.
    constraint_indexing:constraint_classification(traveling_salesperson_problem, snare, context(_, _, trapped, _)).

test(heuristic_utility) :-
    % Testing that institutional agents use TSP as a Rope for coordination.
    constraint_indexing:constraint_classification(traveling_salesperson_problem, rope, context(institutional, _, _, _)).

:- end_tests(tsp_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * * KEY DECISIONS:
 * TSP is the "Economic version" of the Hamiltonian Path. I increased 
 * extractiveness to 0.4 because in the real world, a bad TSP solution 
 * wastes real money and fuel. It's not just a puzzle; it's a drain.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω)
   ========================================================================== */

omega_variable(
    quantum_optimization_breakthrough,
    "Will quantum annealing (e.g., D-Wave) provide near-instant optimal TSP solutions?",
    resolution_mechanism("Benchmarking quantum annealers against classical heuristics on $N>1000$ nodes"),
    impact("If Yes: The Snare for logistics firms vanishes. The Mountain is bypassed by a 'Tunnel'."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: trojan_war_spoils
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-28
% ============================================================================

:- module(constraint_trojan_war_spoils, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:coordination_type/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: trojan_war_spoils
 * human_readable: The Allocation of Captives after the Fall of Troy
 * domain: military/social
 * * SUMMARY:
 * After the total defeat of Troy, its surviving women and children are
 * transformed into "spoils of war." The constraint is the Greek system of
 * allocation (a lottery) and the subsequent master-slave relationship that
 * dictates the survivors' destination, labor, and lifespan. It represents a
 * total conversion of human agency into property.
 * * KEY AGENTS:
 * - Hecuba & the Trojan Women: Subjects (Powerless), former royalty now slaves.
 * - The Greek High Command (Agamemnon, Odysseus): Beneficiaries (Institutional), who view the allocation as a logistical necessity.
 * - Talthybius: The Greek Herald, an agent of the institution who carries out its orders.
 * - Astyanax: Child-victim whose existence is suppressed by the "Greeks' law."
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(trojan_war_spoils, 1.0). % Total extraction: life, liberty, and future potential are seized.
domain_priors:suppression_score(trojan_war_spoils, 1.0).   % Total suppression: alternatives (escape, ransom, survival of the royal line) are actively and violently eliminated.
domain_priors:theater_ratio(trojan_war_spoils, 0.0).       % No theatricality; the function is brutally direct.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(trojan_war_spoils, extractiveness, 1.0).
narrative_ontology:constraint_metric(trojan_war_spoils, suppression_requirement, 1.0).
narrative_ontology:constraint_metric(trojan_war_spoils, theater_ratio, 0.0).

% Constraint self-claim: The Greeks claim this is merely the enforcement of military custom.
narrative_ontology:constraint_claim(trojan_war_spoils, enforcement).

% Binary flags
domain_priors:requires_active_enforcement(trojan_war_spoils). % The Greek army is present to enforce the allocation.

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(trojan_war_spoils, greek_army).
narrative_ontology:constraint_victim(trojan_war_spoils, trojan_survivors).
narrative_ontology:constraint_victim(trojan_war_spoils, hecuba).
narrative_ontology:constraint_victim(trojan_war_spoils, astyanax).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (HECUBA & THE WOMEN) - MOUNTAIN
% For the women, their enslavement is not a system to be analyzed but an
% immutable, crushing reality akin to a natural disaster. The suppression is
% so total (S=1.0) that it feels like a law of physics.
constraint_indexing:constraint_classification(trojan_war_spoils, mountain,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(regional))).

% PERSPECTIVE 2: THE BENEFICIARY (GREEK HIGH COMMAND) - ROPE
% For the Greek leadership, the spoils system is a pure Rope: a functional
% coordination mechanism to divide loot fairly among the victorious kings,
% preventing internal conflict within their army.
constraint_indexing:constraint_classification(trojan_war_spoils, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(regional))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER - SNARE
% Analytically, the system is a Snare. It has a coordination function for one
% group (the Greeks) but achieves it through the total, coercive extraction
% of value and life from another group (the Trojans). The high extraction (1.0)
% and suppression (1.0) are definitive.
constraint_indexing:constraint_classification(trojan_war_spoils, snare,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(trojan_war_spoils_tests).

test(perspectival_gap_subject_beneficiary) :-
    % Verify the classic gap: the powerless see a Mountain (or Snare), the institutional see a Rope.
    constraint_indexing:constraint_classification(trojan_war_spoils, mountain, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(trojan_war_spoils, rope, context(agent_power(institutional), _, _, _)).

test(analytical_observer_sees_snare) :-
    % Verify the analytical observer correctly identifies the high-extraction, high-suppression system as a Snare.
    constraint_indexing:constraint_classification(trojan_war_spoils, snare, context(agent_power(analytical), _, _, _)).

test(total_extraction_and_suppression) :-
    % Verify the base metrics reflect the narrative of total subjugation.
    narrative_ontology:constraint_metric(trojan_war_spoils, extractiveness, 1.0),
    narrative_ontology:constraint_metric(trojan_war_spoils, suppression_requirement, 1.0).

:- end_tests(trojan_war_spoils_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores of 1.0 for both extractiveness and suppression reflect the
 * absolute nature of the constraint: slavery and the execution of the heir
 * (Astyanax) represent the complete removal of an agent's present and future
 * value for the benefit of the institution.
 *
 * The key perspectival gap is between the Greek command (Rope) and the Trojan
 * women (Mountain). The Greeks see a logistical tool for maintaining army cohesion.
 * The women experience an inescapable fate. This is a canonical example of how a
 * single system can be both a coordination mechanism and a tool of total
 * extraction, depending on the index. The analytical view resolves this duality
 * by classifying it as a Snare, acknowledging both functions.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * This constraint represents a structural mandate of total war in the Homeric Age.
 * The system does not misclassify this as pure extraction because the 'Rope'
 * perspective from the Greek side is captured, acknowledging its coordination
 * function (distributing spoils). However, the analytical conclusion is 'Snare'
 * because the alternative—diplomatic surrender or ransom—was actively suppressed.
 * Odysseus's argument for killing Astyanax to prevent a future Trojan restoration
 * is explicit evidence of suppressing alternatives, confirming the system's
 * primary function is extractive control, not just coordination.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_trojan_war_spoils,
    "Is the Trojan defeat a literal Mountain of divine will (the will of Poseidon/Athena) or a geopolitical Snare constructed entirely by Greek strategy?",
    "Textual ambiguity in the play's prologue, which frames the events as both a result of divine anger and human action. Resolving this would require external confirmation of the gods' intent.",
    "If Divine Will -> Mountain: The play is a tragedy about humanity's helplessness against fate. If Human Strategy -> Snare: The play is a political critique of the ethics of power and the brutality of victors.",
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(trojan_war_spoils, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This constraint is modeled as being absolute from its inception (the fall of
% the city). There is no gradual accumulation of extraction; it begins at the
% maximum. This is reflected in the flat trajectory of the metrics.
%
% Theater ratio over time:
narrative_ontology:measurement(tws_tr_t0, trojan_war_spoils, theater_ratio, 0, 0.0).
narrative_ontology:measurement(tws_tr_t5, trojan_war_spoils, theater_ratio, 5, 0.0).
narrative_ontology:measurement(tws_tr_t10, trojan_war_spoils, theater_ratio, 10, 0.0).

% Extraction over time:
narrative_ontology:measurement(tws_ex_t0, trojan_war_spoils, base_extractiveness, 0, 1.0).
narrative_ontology:measurement(tws_ex_t5, trojan_war_spoils, base_extractiveness, 5, 1.0).
narrative_ontology:measurement(tws_ex_t10, trojan_war_spoils, base_extractiveness, 10, 1.0).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% From the perspective of the beneficiaries (the Greeks), the constraint's
% coordination function is to allocate resources (the spoils of war).
narrative_ontology:coordination_type(trojan_war_spoils, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: trump_critical_minerals
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2024-02-29
% ============================================================================

:- module(constraint_trump_critical_minerals, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: trump_critical_minerals
 * human_readable: Trump Critical Minerals Stockpile Project
 * domain: economic/political
 * * SUMMARY:
 * The Trump administration initiated a project to stockpile critical minerals, aiming to reduce reliance on foreign suppliers, particularly China. This involves government subsidies and potential regulatory changes to incentivize domestic mining and processing. This creates a constraint on market access and resource control.
 * * KEY AGENTS:
 * - Domestic Miners: Subject (Powerless/Constrained initially, potentially Powerful/Mobile with subsidies)
 * - Foreign Suppliers (China): Victim (Powerless)
 * - US Government: Beneficiary (Institutional/Powerful)
 * - Environmental groups: Victim (Powerless)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(trump_critical_minerals, 0.65). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(trump_critical_minerals, 0.55).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(trump_critical_minerals, 0.2).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(trump_critical_minerals, extractiveness, 0.65).
narrative_ontology:constraint_metric(trump_critical_minerals, suppression_requirement, 0.55).
narrative_ontology:constraint_metric(trump_critical_minerals, theater_ratio, 0.2).

% Binary flags
domain_priors:requires_active_enforcement(trump_critical_minerals). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(trump_critical_minerals, us_government).
narrative_ontology:constraint_victim(trump_critical_minerals, foreign_suppliers).
narrative_ontology:constraint_victim(trump_critical_minerals, environmental_groups).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE/MOUNTAIN)
% High extraction felt as an immutable limit or predatory trap.
% NOTE: This may be upgraded to 'organized' power if a critical mass of victims exists.
constraint_indexing:constraint_classification(trump_critical_minerals, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Viewed as essential infrastructure or coordination.
constraint_indexing:constraint_classification(trump_critical_minerals, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER
% Default analytical context (civilizational/analytical/global).
% This perspective is used by the bridge to derive constraint_claim.
% Type should reflect what the metrics compute: mountain, rope, tangled_rope, snare, scaffold, or piton.
constraint_indexing:constraint_classification(trump_critical_minerals, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(trump_critical_minerals_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(trump_critical_minerals, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(trump_critical_minerals, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(threshold_validation) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(trump_critical_minerals, ExtMetricName, E),
    (E =< 0.05 -> true ; E >= 0.46). % Ensures it's either a Mountain or high-extraction Snare/Tangled.

:- end_tests(trump_critical_minerals_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The Subject (domestic miners initially) perceives a Snare because they are constrained by the existing reliance on foreign suppliers and lack the capital to compete. The Beneficiary (US Government) views it as a Rope, coordinating resources to ensure national security. The Analytical Observer sees a Tangled Rope: there's a coordination function (national security), but it involves asymmetric extraction (disadvantaging foreign suppliers and, potentially, domestic consumers through higher prices).
 * The high base extractiveness and suppression reflect the government intervention in the market and the limitations placed on alternative supply sources.
 * * MANDATROPHY ANALYSIS:
 * The Tangled Rope classification prevents mislabeling as pure extraction by acknowledging the legitimate coordination function of national security. It avoids a pure "Snare" label that would ignore this aspect, while still capturing the extractive effects on other actors.  The US government derives benefit at the cost of other actors, especially China.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_trump_critical_minerals,
    'Is the long-term economic benefit to the US greater than the cost imposed on foreign suppliers and the environmental impact of domestic mining?',
    'Comprehensive cost-benefit analysis including environmental externalities and geopolitical consequences.',
    'If True: Justified national security measure. If False: Rent-seeking and economic inefficiency.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(trump_critical_minerals, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection (metric_substitution,
% extraction_accumulation) by providing measurements at multiple time points.
% Model how the constraint intensified or changed across the interval.
%
% Required for high-extraction constraints (base_extractiveness > 0.46).
% Use at least 3 time points (T=0, midpoint, T=end) for each tracked metric.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(trump_critical_minerals_tr_t0, trump_critical_minerals, theater_ratio, 0, 0.1).
narrative_ontology:measurement(trump_critical_minerals_tr_t5, trump_critical_minerals, theater_ratio, 5, 0.2).
narrative_ontology:measurement(trump_critical_minerals_tr_t10, trump_critical_minerals, theater_ratio, 10, 0.3).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(trump_critical_minerals_ex_t0, trump_critical_minerals, base_extractiveness, 0, 0.5).
narrative_ontology:measurement(trump_critical_minerals_ex_t5, trump_critical_minerals, base_extractiveness, 5, 0.6).
narrative_ontology:measurement(trump_critical_minerals_ex_t10, trump_critical_minerals, base_extractiveness, 10, 0.65).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: trump_indian_tariffs_2026
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_trump_indian_tariffs_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: trump_indian_tariffs_2026
 * human_readable: Trump's Tariff Reduction on India (2026)
 * domain: economic
 * * SUMMARY:
 * In a hypothetical 2026, a Trump administration reduces tariffs on Indian goods to 18% after the Modi government agrees to reduce oil purchases from Russia. This is a quid-pro-quo arrangement where economic concessions are exchanged for political alignment, seemingly benefiting both countries at the expense of Russia.
 * * KEY AGENTS:
 * - Indian Exporters: Subject (Powerless initially, potentially Organized)
 * - US Consumers/Importers: Beneficiary (Institutional)
 * - Russian State: Victim
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(trump_indian_tariffs_2026, 0.55). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(trump_indian_tariffs_2026, 0.70).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(trump_indian_tariffs_2026, 0.20).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(trump_indian_tariffs_2026, extractiveness, 0.55).
narrative_ontology:constraint_metric(trump_indian_tariffs_2026, suppression_requirement, 0.70).
narrative_ontology:constraint_metric(trump_indian_tariffs_2026, theater_ratio, 0.20).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(trump_indian_tariffs_2026, enforcement).

% Binary flags
domain_priors:requires_active_enforcement(trump_indian_tariffs_2026). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(trump_indian_tariffs_2026, us_consumers_importers).
narrative_ontology:constraint_victim(trump_indian_tariffs_2026, russian_state).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For Indian exporters, the tariffs remain a significant barrier, and their reduction is conditional on geopolitical actions outside their control.
% χ = 0.55 * π(powerless:1.5) * σ(national:1.0) = 0.825. This is a clear Snare.
constraint_indexing:constraint_classification(trump_indian_tariffs_2026, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(constrained),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For US importers and consumers, the deal is pure coordination, lowering prices and securing supply chains in exchange for geopolitical alignment they benefit from.
% χ = 0.55 * π(institutional:-0.2) * σ(national:1.0) = -0.11. This is a clear Rope.
constraint_indexing:constraint_classification(trump_indian_tariffs_2026, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The observer sees both the coordination function (US-India trade) and the asymmetric extraction (coercing India, punishing Russia).
% χ = 0.55 * π(analytical:1.15) * σ(global:1.2) = 0.759. High extraction.
% With beneficiaries, victims, and active enforcement, this is a canonical Tangled Rope.
constraint_indexing:constraint_classification(trump_indian_tariffs_2026, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(trump_indian_tariffs_2026_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(trump_indian_tariffs_2026, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(trump_indian_tariffs_2026, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(tangled_rope_conditions) :-
    % Verify the analytical observer sees a Tangled Rope.
    constraint_indexing:constraint_classification(trump_indian_tariffs_2026, tangled_rope, context(agent_power(analytical), _, _, _)).

test(threshold_validation) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(trump_indian_tariffs_2026, ExtMetricName, E),
    E >= 0.46. % Ensures it's a high-extraction Snare/Tangled Rope.

:- end_tests(trump_indian_tariffs_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect a geopolitical trade deal that functions as both coordination and coercion.
 *  - extractiveness: 0.55. High. The tariff structure itself is extractive, and its conditional reduction is a tool of coercive power.
 *  - suppression: 0.70. High. India's sovereign economic policy (sourcing energy) is suppressed, and Russia's market access is directly targeted.
 *  - theater_ratio: 0.20. Low. The deal has tangible economic and political consequences, it is not merely performative.
 *
 * The perspectival gap is stark. For US institutional actors, it's a beneficial coordination mechanism (Rope). For Indian exporters subject to the policy, it's a coercive trap (Snare). The analytical view, which must account for both the coordination benefits and the coercive extraction, correctly identifies it as a Tangled Rope.
 * * MANDATROPHY ANALYSIS:
 * [RESOLVED MANDATROPHY] The Tangled Rope classification is critical here. A simpler model might classify this as a Snare, focusing only on the coercion against Russia and India. However, that would ignore the genuine coordination function benefiting US importers and consumers. By requiring the declaration of beneficiaries, victims, and active enforcement, the system correctly identifies the hybrid nature of the constraint, preventing the misclassification of complex geopolitical agreements as simple extraction.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_trump_indian_tariffs_2026,
    'Is India''s compliance with the oil purchase reduction sustainable against domestic pressure and its relationship with other BRICS nations?',
    'Monitor Indian oil import data from Russia, and track diplomatic statements from India, Russia, and China.',
    'If compliance is sustainable, the Tangled Rope holds. If not, the constraint may collapse or escalate into a more overt Snare (e.g., sanctions).',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(trump_indian_tariffs_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection. The narrative implies a shift from a
% more extractive/suppressive state (higher tariffs) to the current deal.
% Required for high-extraction constraints (base_extractiveness > 0.46).
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(trump_indian_tariffs_2026_tr_t0, trump_indian_tariffs_2026, theater_ratio, 0, 0.10).
narrative_ontology:measurement(trump_indian_tariffs_2026_tr_t5, trump_indian_tariffs_2026, theater_ratio, 5, 0.20).
narrative_ontology:measurement(trump_indian_tariffs_2026_tr_t10, trump_indian_tariffs_2026, theater_ratio, 10, 0.20).

% Extraction over time (triggers extraction_accumulation detection):
% T=0 represents the pre-deal higher tariff regime.
narrative_ontology:measurement(trump_indian_tariffs_2026_ex_t0, trump_indian_tariffs_2026, base_extractiveness, 0, 0.65).
narrative_ontology:measurement(trump_indian_tariffs_2026_ex_t5, trump_indian_tariffs_2026, base_extractiveness, 5, 0.55).
narrative_ontology:measurement(trump_indian_tariffs_2026_ex_t10, trump_indian_tariffs_2026, base_extractiveness, 10, 0.55).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% This is a geopolitical deal enforced through economic levers.
narrative_ontology:coordination_type(trump_indian_tariffs_2026, enforcement_mechanism).

% Network relationships (structural influence edges)
% This deal would directly impact India's strategic alignment within economic blocs like BRICS.
narrative_ontology:affects_constraint(trump_indian_tariffs_2026, india_brics_alignment_2027).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: trump_making_china_great_2026
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-22
% ============================================================================

:- module(constraint_trump_making_china_great_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: trump_making_china_great_2026
 * human_readable: The Trumpian Post-Western Order
 * domain: political/economic
 * * SUMMARY:
 * The return of Donald Trump has accelerated a shift from a US-led liberal
 * international order to a multipolar "post-Western" world. This transition
 * acts as a constraint on European security and US global affinity while
 * expanding the agency of "middle powers" and China. The system moves from
 * a perceived coordination mechanism (Pax Americana) to a transactional,
 * extractive one.
 * * KEY AGENTS:
 * - European Leaders: Subject (Powerless)
 * - Middle Powers (India, Brazil, etc.): Beneficiary (Institutional with arbitrage)
 * - Geopolitical Analysts (e.g., ECFR): Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(trump_making_china_great_2026, 0.65). % Mountain <= 0.15, Rope <= 0.15, Snare/Tangled >= 0.46
domain_priors:suppression_score(trump_making_china_great_2026, 0.40).   % Structural property (raw, unscaled).
domain_priors:theater_ratio(trump_making_china_great_2026, 0.15).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(trump_making_china_great_2026, extractiveness, 0.65).
narrative_ontology:constraint_metric(trump_making_china_great_2026, suppression_requirement, 0.40).
narrative_ontology:constraint_metric(trump_making_china_great_2026, theater_ratio, 0.15).

% Constraint self-claim (what does the constraint claim to be?)
% Claims to be enforcing national interest, a classic framing for extractive policy.
narrative_ontology:constraint_claim(trump_making_china_great_2026, enforcement).

% Binary flags
domain_priors:requires_active_enforcement(trump_making_china_great_2026). % Required for Tangled Rope

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(trump_making_china_great_2026, china).
narrative_ontology:constraint_beneficiary(trump_making_china_great_2026, multipolar_middle_powers).
narrative_ontology:constraint_victim(trump_making_china_great_2026, european_union).
narrative_ontology:constraint_victim(trump_making_china_great_2026, liberal_internationalists).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE EUROPEAN UNION (SNARE)
% Trapped by US unreliability and Russian aggression, the shift feels predatory.
% χ = 0.65 * π(powerless=1.5) * σ(continental=1.1) = 1.07 (High Snare)
constraint_indexing:constraint_classification(trump_making_china_great_2026, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(continental))).

% PERSPECTIVE 2: THE MIDDLE POWER DIPLOMAT (ROPE)
% Views multipolarity as a coordination opportunity, enabling arbitrage.
% χ = 0.65 * π(institutional=-0.2) * σ(global=1.2) = -0.156 (Net benefit, pure Rope)
constraint_indexing:constraint_classification(trump_making_china_great_2026, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Recognizes the dual nature: it's a constructed system with both coordination
% functions (for some) and high asymmetric extraction (from others), requiring
% active enforcement. This is the canonical definition of a Tangled Rope.
% χ = 0.65 * π(analytical=1.15) * σ(global=1.2) = 0.897 (High Tangled Rope)
constraint_indexing:constraint_classification(trump_making_china_great_2026, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(trump_making_china_great_2026_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(trump_making_china_great_2026, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(trump_making_china_great_2026, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless = snare,
    TypeInstitutional = rope.

test(analytical_classification_is_tangled_rope) :-
    % Verify the analytical observer correctly identifies the Tangled Rope structure.
    constraint_indexing:constraint_classification(trump_making_china_great_2026, tangled_rope, context(agent_power(analytical), _, _, _)).

test(threshold_validation) :-
    % Ensures it's a high-extraction constraint, justifying Snare/Tangled Rope types.
    narrative_ontology:constraint_metric(trump_making_china_great_2026, extractiveness, E),
    E >= 0.46.

:- end_tests(trump_making_china_great_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness (0.65) reflects the explicitly transactional and
 * predatory "America First" policy, which extracts loyalty and economic
 * concessions from traditional allies. The suppression score (0.40) is moderate
 * because the previous liberal order is still visible, just actively dismantled.
 *
 * The key insight is the perspectival gap. For the EU (powerless, trapped),
 * this new order is a Snare. For middle powers with arbitrage options
 * (institutional, mobile), it's a Rope that allows them to play superpowers
 * against each other.
 *
 * The analytical observer must classify this as a Tangled Rope. It is not a
 * Mountain (it is constructed and actively enforced) nor a pure Snare (it has
 * a genuine coordination function for a multipolar world). It has clear
 * beneficiaries and victims, and requires active enforcement (tariffs, threats)
 * to maintain, meeting all three structural requirements for a Tangled Rope.
 *
 * * MANDATROPHY ANALYSIS:
 * Classifying this as a Tangled Rope is critical. A simpler analysis might
 * label it a pure Snare, missing the fact that it creates a new, albeit
 * chaotic, coordination system for middle powers. This prevents mandatrophy
 * by acknowledging the system's dual function: it is simultaneously a tool of
 * extraction against one group and a coordination mechanism for another.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_trump_making_china_great_2026,
    'Is the shift to a transactional, multipolar order a permanent structural change or a temporary political phase tied to the Trump administration?',
    'Observe whether a post-Trump US administration (e.g., in 2028 or 2032) reverts to liberal internationalism or continues the transactional policy.',
    'If permanent, the constraint hardens into a Mountain for all actors. If temporary, it was a Scaffold for a new European security architecture.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(trump_making_china_great_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This constraint represents a rapid shift, with extraction accumulating quickly
% as the previous order is dismantled. The theater ratio remains low as the
% policies are bluntly functional rather than performative.
% Interval: 2020 (late first term) to 2026 (second term).

% Theater ratio over time (stable and low):
narrative_ontology:measurement(tmcg_tr_t0, trump_making_china_great_2026, theater_ratio, 0, 0.10).
narrative_ontology:measurement(tmcg_tr_t5, trump_making_china_great_2026, theater_ratio, 5, 0.12).
narrative_ontology:measurement(tmcg_tr_t10, trump_making_china_great_2026, theater_ratio, 10, 0.15).

% Extraction over time (rapid accumulation):
narrative_ontology:measurement(tmcg_ex_t0, trump_making_china_great_2026, base_extractiveness, 0, 0.40).
narrative_ontology:measurement(tmcg_ex_t5, trump_making_china_great_2026, base_extractiveness, 5, 0.55).
narrative_ontology:measurement(tmcg_ex_t10, trump_making_china_great_2026, base_extractiveness, 10, 0.65).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The constraint fundamentally re-orders the global system, acting as a new
% (and chaotic) form of global infrastructure.
narrative_ontology:coordination_type(trump_making_china_great_2026, global_infrastructure).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: trump_second_term_authoritarianism_2026
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-16
% ============================================================================

:- module(constraint_trump_second_term_authoritarianism_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: trump_second_term_authoritarianism_2026
 * human_readable: Electoral Authoritarianism (Trump II, Year One)
 * domain: political
 * * SUMMARY:
 * A year into a hypothetical second Trump term, the U.S. political system is modeled as an "electoral authoritarianism" regime. The constraint operates through the normalization of paramilitary force, summary execution of protesters, and the systemic dismantling of democratic infrastructure (elections, media, universities). It represents a rapid shift from a system with checks and balances to one governed by coercive force and loyalty tests.
 * * KEY AGENTS:
 * - Protester/Dissident: Subject (Powerless), facing lethal consequences for dissent.
 * - Administration Loyalist: Beneficiary (Institutional), gaining power and access within the new order.
 * - Analytical Observer: Auditor (Analytical), observing the structural collapse of democratic norms.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(trump_second_term_authoritarianism_2026, 0.85). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(trump_second_term_authoritarianism_2026, 0.90).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(trump_second_term_authoritarianism_2026, 0.10).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(trump_second_term_authoritarianism_2026, extractiveness, 0.85).
narrative_ontology:constraint_metric(trump_second_term_authoritarianism_2026, suppression_requirement, 0.90).
narrative_ontology:constraint_metric(trump_second_term_authoritarianism_2026, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% The regime claims its actions are necessary for law and order.
narrative_ontology:constraint_claim(trump_second_term_authoritarianism_2026, enforcement).

% Binary flags
domain_priors:requires_active_enforcement(trump_second_term_authoritarianism_2026). % Requires paramilitary deployment and judicial pressure.

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(trump_second_term_authoritarianism_2026, administration_loyalists).
narrative_ontology:constraint_victim(trump_second_term_authoritarianism_2026, political_dissidents).
narrative_ontology:constraint_victim(trump_second_term_authoritarianism_2026, independent_media).
narrative_ontology:constraint_victim(trump_second_term_authoritarianism_2026, university_researchers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE DISSIDENT (SNARE)
% For the protester, the state is a coercive Snare. The penalty for dissent has
% shifted from legal to lethal, making participation a calculation of survival.
constraint_indexing:constraint_classification(trump_second_term_authoritarianism_2026, snare,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE ADMINISTRATION LOYALIST (ROPE)
% For those aligned with the administration, the new order is a beneficial
% coordination mechanism (Rope) that provides access, influence, and career advancement.
constraint_indexing:constraint_classification(trump_second_term_authoritarianism_2026, rope,
    context(agent_power(institutional),
            time_horizon(biographical),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (MOUNTAIN)
% From a detached, historical viewpoint, the transition to authoritarianism appears
% as an inevitable structural closure (Mountain). The system's internal logic
% seems to be collapsing toward a fixed, oppressive state.
constraint_indexing:constraint_classification(trump_second_term_authoritarianism_2026, mountain,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(trump_second_term_authoritarianism_2026_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(trump_second_term_authoritarianism_2026, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(trump_second_term_authoritarianism_2026, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless = snare,
    TypeInstitutional = rope.

test(threshold_validation) :-
    % Verify the base extractiveness meets the Snare threshold.
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(trump_second_term_authoritarianism_2026, ExtMetricName, E),
    E >= 0.46.

:- end_tests(trump_second_term_authoritarianism_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect a system undergoing rapid, violent transformation. The
 * base extractiveness (0.85) represents the seizure of civil liberties, safety,
 * and democratic process. The suppression score (0.90) reflects the use of
 * lethal force and systemic dismantling of alternatives (media, courts).
 * The PERSPECTIVAL GAP is extreme: for loyalists, it's a Rope to power; for
 * dissidents, it's a lethal Snare. The analytical view of Mountain reflects
 * a sense of structural inevitability or "state collapse" where the degrees
 * of freedom for the system itself seem to be disappearing.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * This constraint's high extraction (0.85) requires mandatrophy analysis. The
 * system correctly avoids misclassifying this as a Tangled Rope. While there
 * is a "coordination" function for beneficiaries (the Rope perspective), its
 * existence is entirely parasitic on the extreme, non-consensual extraction
 * from victims. The primary function is raw power consolidation via coercion,
 * not complex coordination with unfortunate side effects. Therefore, the
 * Snare/Mountain classifications are structurally sound.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_midterm_2026_integrity,
    "How free and fair will the 2026 elections be under systematically restrictive executive actions?",
    "Monitor the ratio of purged voters to actual turnout and the prevalence of military deployment on election day.",
    "If Mountain: The transition to electoral authoritarianism is complete. If still contested: Resistance remains viable.",
    confidence_without_resolution(low)
).

omega_variable(
    omega_lethal_deterrence_threshold,
    "Will the 'lethal mental calculus' of summary executions permanently suppress mass protest?",
    "Compare mass protest turnout levels post-incident vs. previous high-water marks (e.g., 2020).",
    "If Snare is permanent: Public space is effectively dead. If protests adapt: A new form of resistance emerges.",
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(trump_second_term_authoritarianism_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data models the rapid intensification of the authoritarian constraint
% over its first year (mapped to the 0-10 interval).
% Required for high-extraction constraints (base_extractiveness > 0.46).

% Theater ratio over time (remains low as actions are brutally functional):
narrative_ontology:measurement(ta26_tr_t0, trump_second_term_authoritarianism_2026, theater_ratio, 0, 0.05).
narrative_ontology:measurement(ta26_tr_t5, trump_second_term_authoritarianism_2026, theater_ratio, 5, 0.08).
narrative_ontology:measurement(ta26_tr_t10, trump_second_term_authoritarianism_2026, theater_ratio, 10, 0.10).

% Extraction over time (extraction of civil liberties accelerates):
narrative_ontology:measurement(ta26_ex_t0, trump_second_term_authoritarianism_2026, base_extractiveness, 0, 0.60).
narrative_ontology:measurement(ta26_ex_t5, trump_second_term_authoritarianism_2026, base_extractiveness, 5, 0.75).
narrative_ontology:measurement(ta26_ex_t10, trump_second_term_authoritarianism_2026, base_extractiveness, 10, 0.85).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The "coordination" is the enforcement of a new political order.
narrative_ontology:coordination_type(trump_second_term_authoritarianism_2026, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */