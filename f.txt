% ============================================================================
% CONSTRAINT STORY: factional_instability
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-27
% ============================================================================

:- module(constraint_factional_instability, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: factional_instability
 * human_readable: The Republican Remedy for Factional Violence
 * domain: political
 * * SUMMARY:
 * Based on Federalist Paper No. 10, this constraint models the system of a
 * large representative republic designed to control the "violence of faction."
 * James Madison argues that since the causes of faction (liberty and human
 * nature) are immutable, the effects must be controlled. The constraint is
 * the constitutional structure itself, which filters popular will to protect
 * minority rights (especially property) and prevent a majority from imposing
 * its "ruling passion" on the community.
 * * KEY AGENTS:
 * - Debtor Class (Majority Faction): The subject, whose desire for policies like
 *   debt abolition is suppressed by the system.
 * - Creditor/Property-Owning Class (Minority Faction): The beneficiary, whose
 *   assets are protected from the majority will.
 * - The Constitutional Architect (Madison): The analytical observer, viewing the
 *   system as a necessary mechanism to balance liberty and order.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(factional_instability, 0.70). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(factional_instability, 0.50).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(factional_instability, 0.10).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(factional_instability, extractiveness, 0.70).
narrative_ontology:constraint_metric(factional_instability, suppression_requirement, 0.50).
narrative_ontology:constraint_metric(factional_instability, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(factional_instability, enforcement).

% Binary flags
domain_priors:requires_active_enforcement(factional_instability). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(factional_instability, property_owners).
narrative_ontology:constraint_victim(factional_instability, debtor_class).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The debtor class, whose political power is curtailed by the system.
% They feel the full extractive force (χ = 0.7 * 1.5 * 1.0 = 1.05), viewing
% the constitutional structure as a trap preventing economic relief.
constraint_indexing:constraint_classification(factional_instability, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The property-owning class, who see the system as essential coordination.
% Their institutional power insulates them from extraction (χ = 0.7 * -0.2 * 1.0 = -0.14),
% making the system appear as a pure public good that secures order and property.
constraint_indexing:constraint_classification(factional_instability, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The constitutional architect (Madison) or a modern political scientist.
% This view recognizes the system's dual nature: it provides genuine coordination
% (preventing anarchy) but does so via asymmetric extraction (suppressing the
% majority will to protect a minority's property).
constraint_indexing:constraint_classification(factional_instability, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(factional_instability_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(factional_instability, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(factional_instability, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless == snare,
    TypeInstitutional == rope,
    TypePowerless \= TypeInstitutional.

test(analytical_classification_is_tangled_rope) :-
    % The analytical observer must see the hybrid nature of the constraint.
    constraint_indexing:constraint_classification(factional_instability, tangled_rope, context(agent_power(analytical), _, _, _)).

test(tangled_rope_structural_conditions_met) :-
    % Verify the structural properties required for a Tangled Rope classification are present.
    narrative_ontology:constraint_beneficiary(factional_instability, _), % derives has_coordination_function
    narrative_ontology:constraint_victim(factional_instability, _),     % derives has_asymmetric_extraction
    domain_priors:requires_active_enforcement(factional_instability).

:- end_tests(factional_instability_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The core of Federalist 10 is the tension between creating a system for the
 * "public good" and protecting the rights of a specific minority (property
 * owners). This is a canonical Tangled Rope.
 * - Base Extractiveness (0.70): High, as the system's primary function is to
 *   prevent one group (the majority debtor class) from using political power
 *   to extract resources from another (the minority creditor class).
 * - Suppression (0.50): Moderate. The system doesn't outlaw factions but
 *   "filters" and dilutes their power through representation and scale,
 *   suppressing their ability to act.
 * - Perspectival Gap: The gap is profound. For the debtor class, the system is a
 *   Snare, an oppressive structure preventing just economic outcomes. For the
 *   creditor class, it is a Rope, a vital coordination mechanism preventing
 *   the chaos of pure democracy.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * A simpler analysis might classify this system as a Snare (it protects the
 * rich) or a Rope (it creates stability). The Tangled Rope classification is
 * crucial because it acknowledges both truths simultaneously. It prevents
 * mandatrophy by recognizing that the system's coordination function (stability)
 * is structurally inseparable from its asymmetric extraction function
 * (protecting property). The system is neither a pure public good nor a pure
 * mechanism of oppression; it is a functional, durable hybrid.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_factional_instability,
    'Can "enlightened statesmen" be relied upon to adjust clashing interests, or will they inevitably be captured by faction?',
    'Historical analysis of legislative outcomes vs. public vs. special interests over centuries.',
    'If statesmen are reliable, the system functions closer to a Rope. If they are captured, it degrades into a pure Snare.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(factional_instability, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection. Here, we model the constitutional
% system becoming slightly more extractive over time as its mechanisms become
% more efficient at protecting established interests, while its purpose remains
% functional (low theater).
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(factional_instability_tr_t0, factional_instability, theater_ratio, 0, 0.05).
narrative_ontology:measurement(factional_instability_tr_t5, factional_instability, theater_ratio, 5, 0.08).
narrative_ontology:measurement(factional_instability_tr_t10, factional_instability, theater_ratio, 10, 0.10).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(factional_instability_ex_t0, factional_instability, base_extractiveness, 0, 0.65).
narrative_ontology:measurement(factional_instability_ex_t5, factional_instability, base_extractiveness, 5, 0.68).
narrative_ontology:measurement(factional_instability_ex_t10, factional_instability, base_extractiveness, 10, 0.70).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The Republican system is a mechanism for enforcing a particular social order.
narrative_ontology:coordination_type(factional_instability, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: faint_blue_neural_bifurcation
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-28
% ============================================================================

:- module(constraint_faint_blue_neural_bifurcation, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: faint_blue_neural_bifurcation
 * human_readable: The "Ken" Neural Enhancement Bifurcation
 * domain: technological/social
 * * SUMMARY:
 * This constraint represents the "neural remodeling" caused by a secret,
 * unlisted phenethylamine derivative. It enforces a personality bifurcation,
 * replacing a "hesitant" and emotional persona with an efficient, certain,
 * and "productive" persona named Ken. The substance extracts the original
 * personality, neural stability, and eventually life itself to maintain the
 * "productive" state.
 * * KEY AGENTS:
 * - Yuki: Subject (Powerless), watches her partner be replaced.
 * - Enhanced Ken: Beneficiary (Institutional), the enhanced persona valuing productivity.
 * - Medical Observer: Auditor (Analytical), observes the irreversible neural collapse.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(faint_blue_neural_bifurcation, 0.9). % Snare extraction >= 0.46
domain_priors:suppression_score(faint_blue_neural_bifurcation, 0.8).   % Structural property (raw, unscaled).
domain_priors:theater_ratio(faint_blue_neural_bifurcation, 0.1).       % Not performative, highly functional extraction.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(faint_blue_neural_bifurcation, extractiveness, 0.9).
narrative_ontology:constraint_metric(faint_blue_neural_bifurcation, suppression_requirement, 0.8).
narrative_ontology:constraint_metric(faint_blue_neural_bifurcation, theater_ratio, 0.1).

% Constraint self-claim (what does the constraint claim to be?)
% The enhancement is framed as a constructed tool for self-improvement.
narrative_ontology:constraint_claim(faint_blue_neural_bifurcation, constructed).

% Binary flags
domain_priors:requires_active_enforcement(faint_blue_neural_bifurcation). % Internal chemical enforcement.

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(faint_blue_neural_bifurcation, lab_productivity_metrics).
narrative_ontology:constraint_victim(faint_blue_neural_bifurcation, original_ken_personality).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: YUKI (THE PARTNER) - Mountain
% To Yuki, the change is a 'Mountain'. It is an unchangeable feature of the
% landscape. No matter what she asks, the "Contrast Adjustment" of Ken's
% personality remains fixed and irreversible.
constraint_indexing:constraint_classification(faint_blue_neural_bifurcation, mountain,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: ENHANCED KEN (THE BENEFICIARY) - Rope
% For the enhanced persona, the substance is a 'Rope'. It is a functional
% coordination mechanism that aligns his brain with his professional goals.
% He views the extraction of his old self as a necessary cost for productivity.
constraint_indexing:constraint_classification(faint_blue_neural_bifurcation, rope,
    context(agent_power(institutional),
            time_horizon(biographical),
            exit_options(mobile),
            spatial_scope(regional))).

% PERSPECTIVE 3: THE MEDICAL OBSERVER (ANALYTICAL) - Snare
% From an analytical view, the substance is a 'Snare'. It extracted
% cognitive function until the subject reached a point of "neural
% slumping" and eventual collapse.
constraint_indexing:constraint_classification(faint_blue_neural_bifurcation, snare,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(faint_blue_neural_bifurcation_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(faint_blue_neural_bifurcation, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(faint_blue_neural_bifurcation, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(threshold_validation) :-
    % Verify the constraint meets the high-extraction threshold for a Snare.
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(faint_blue_neural_bifurcation, ExtMetricName, E),
    E >= 0.46.

:- end_tests(faint_blue_neural_bifurcation_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect a highly effective but destructive technology. Base
 * extractiveness is 0.9 because the enhancement consumes the original
 * personality entirely. Suppression is 0.8 as it actively prevents the
 * original persona's traits from surfacing. The perspectival gap is extreme:
 * Yuki experiences an unchangeable loss (Mountain), the enhanced Ken
 * experiences a tool for success (Rope), and the medical analysis reveals a
 * fatal trap (Snare).
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The 0.9 extractiveness is resolved by the clear perspectival asymmetry.
 * The system avoids mislabeling by recognizing that what one agent perceives
 * as a 'Rope' for self-optimization is, from a different index, a fatal
 * 'Snare' that destroys the agent's original identity.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% The core uncertainty is the mechanism and intent of the "manual override."
omega_variable(
    omega_faint_blue_neural_bifurcation,
    'What was the "manual override" attempt: a further chemical intervention, or a psychological rebellion of the original self?',
    'Analysis of neural scan data for conflicting signals between the enhanced persona and residual original neural patterns.',
    'If chemical: the constraint is a pure biochemical Snare. If psychological: the original self retained some agency, attempting to reassert itself as a Mountain.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(faint_blue_neural_bifurcation, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This is a high-extraction constraint (0.9 > 0.46), requiring temporal data.
% The data models the rapid and catastrophic progression of the neural remodeling.

% Theater ratio over time (remains low and functional):
narrative_ontology:measurement(faint_blue_tr_t0, faint_blue_neural_bifurcation, theater_ratio, 0, 0.1).
narrative_ontology:measurement(faint_blue_tr_t5, faint_blue_neural_bifurcation, theater_ratio, 5, 0.1).
narrative_ontology:measurement(faint_blue_tr_t10, faint_blue_neural_bifurcation, theater_ratio, 10, 0.1).

% Extraction over time (rapidly increases to total consumption):
narrative_ontology:measurement(faint_blue_ex_t0, faint_blue_neural_bifurcation, base_extractiveness, 0, 0.2).
narrative_ontology:measurement(faint_blue_ex_t5, faint_blue_neural_bifurcation, base_extractiveness, 5, 0.75).
narrative_ontology:measurement(faint_blue_ex_t10, faint_blue_neural_bifurcation, base_extractiveness, 10, 0.9).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% This constraint is a pure Snare and does not have a genuine coordination
% function or known network dependencies. These declarations are omitted.
% narrative_ontology:coordination_type(faint_blue_neural_bifurcation, ...).
% narrative_ontology:affects_constraint(faint_blue_neural_bifurcation, ...).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: fair_use_doctrine
% ============================================================================
% Generated: 2026-01-17
% Model: Gemini 2.0 Flash
% Source: U.S. Copyright Act, 17 U.S.C. § 107
% ============================================================================

:- module(constraint_fair_use, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: fair_use_doctrine
 * human_readable: Fair Use (The Expression Safety Valve)
 * domain: social/legal/technological
 * temporal_scope: Biographical to Historical
 * spatial_scope: National (USA-specific, though Berne-aligned)
 * * SUMMARY:
 * Fair Use is a legal doctrine that promotes freedom of expression by 
 * permitting the unlicensed use of copyright-protected works in certain 
 * circumstances, such as criticism, comment, news reporting, teaching, 
 * scholarship, and research.
 * * KEY AGENTS:
 * - The Remixer/Scholar: Uses existing work to create new meaning.
 * - The Copyright Holder: Attempts to define the limits of "transformative" use.
 * - The Judge: Balances the four statutory factors to determine legality.
 * * NARRATIVE ARC:
 * Fair Use functions as the "Escape Hatch" from the Copyright Snare. 
 * It ensures that the "Mountain" of intellectual property does not 
 * become an impassable wall for new creativity. However, its 
 * case-by-case nature makes it a "Foggy Path"—legally risky to navigate.
 */

/* ==========================================================================
   2. BASE PROPERTIES (Reality Layer)
   ========================================================================== */

narrative_ontology:interval(fair_use_doctrine, 0, 10).
narrative_ontology:constraint_claim(fair_use_doctrine, rope).

% Base extractiveness: Low (0.1).
% It is designed to *prevent* extraction by allowing free use for 
% socially beneficial purposes.
domain_priors:base_extractiveness(fair_use_doctrine, 0.1).

% Suppression: Moderate (0.4).
% While the law exists, the fear of litigation (chilling effect) 
% often suppresses its actual exercise.
domain_priors:suppression_score(fair_use_doctrine, 0.4).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(fair_use_doctrine, extractiveness, 0.1).
narrative_ontology:constraint_metric(fair_use_doctrine, suppression_requirement, 0.4).

% Enforcement: Requires active enforcement (Affirmative defense in court).
domain_priors:requires_active_enforcement(fair_use_doctrine).

% Beneficiaries: Documentarians, Educators, Parodists, AI Developers.
constraint_beneficiary(fair_use_doctrine, secondary_creators).

% Victims: Copyright Trolls (who seek to extract fees for every use).
constraint_victim(fair_use_doctrine, copyright_maximalists).

% Metrics
/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE PARODIST - Rope
   --------------------------------------------------------------------------
   WHO: individual_moderate
   WHEN: biographical
   WHERE: mobile (can pivot between works)
   SCOPE: national
   
   WHY THIS CLASSIFICATION:
   For a creator like a YouTuber or satirist, Fair Use is a "Rope." 
   It provides the structural support needed to climb over the 
   barriers of copyright. It allows them to use the "Expression" 
   of others to coordinate their own creative message.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    fair_use_doctrine,
    rope,
    context(
        agent_power(individual_moderate),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(national)
    )
) :-
    domain_priors:base_extractiveness(fair_use_doctrine, E),
    E < 0.3,
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE UNASSISTED CREATOR - Snare
   --------------------------------------------------------------------------
   WHO: powerless
   WHEN: immediate
   WHERE: trapped (cannot afford legal counsel)
   SCOPE: national
   
   WHY THIS CLASSIFICATION:
   For a small creator facing a "Cease and Desist" from a major studio, 
   Fair Use is a "Snare." Because it is an *affirmative defense* (meaning you have to be sued first to prove you are right), 
   the legal cost of exercising this right is a bottleneck that 
   strangles their work.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    fair_use_doctrine,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(national)
    )
) :-
    domain_priors:requires_active_enforcement(fair_use_doctrine),
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE SUPREME COURT - Mountain
   --------------------------------------------------------------------------
   WHO: institutional
   WHEN: historical
   WHERE: analytical
   SCOPE: national
   
   WHY THIS CLASSIFICATION:
   The court sees Fair Use as a "Mountain"—a permanent, foundational 
   feature of the First Amendment landscape. It is the "built-in 
   accommodation" that allows the Copyright Act to coexist with 
   Free Speech.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    fair_use_doctrine,
    mountain,
    context(
        agent_power(institutional),
        time_horizon(historical),
        exit_options(analytical),
        spatial_scope(national)
    )
) :-
    true.

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(fair_use_tests).

test(defense_cost_snare) :-
    % Powerless agents see a Snare due to enforcement costs.
    constraint_indexing:constraint_classification(fair_use_doctrine, snare, context(powerless, _, _, _)).

test(free_speech_mountain) :-
    % Institutional/Analytical view sees the Mountain of legal doctrine.
    constraint_indexing:constraint_classification(fair_use_doctrine, mountain, context(institutional, _, _, _)).

:- end_tests(fair_use_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * * KEY DECISIONS:
 * Fair Use is technically an "Exit Option" for Copyright, but I 
 * profiled it as a standalone constraint because it has its own 
 * rules of access. The "Snare" classification highlights the 
 * "Fair Use Paradox": it is a right that many are too poor to use.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω)
   ========================================================================== */

omega_variable(
    automated_adjudication,
    "Will platforms implement AI judges that can accurately determine Fair Use in real-time?",
    resolution_mechanism("Performance audit of DMCA takedown automation vs. court reversals"),
    impact("If Yes: The Snare loosens (instant defense). If No: Algorithmic suppression remains the status quo."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: family_estrangement_ratio
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_family_estrangement_ratio, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: family_estrangement_ratio
 * human_readable: The "Family is Forever" Dogma
 * domain: social
 * * SUMMARY:
 * The social dogma that "family is forever" suppresses the option for individuals to cleanly end harmful relationships. This forces a choice between enduring harm (often due to a "bad magic ratio" of negative interactions) or suffering social liquidation (stigma, exclusion from life events). The dogma serves to maintain the stability of the broader family network at the direct expense of the estranged individual's well-being and social access.
 * * KEY AGENTS:
 * - The Estranged Individual: Subject, forced to choose between harm and social isolation.
 * - The Family Network: Beneficiary, whose stability is preserved by the "forever" precedent.
 * - The Analytical Observer: Auditor, who identifies the hybrid coordination/extraction function.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(family_estrangement_ratio, 0.80). % Extracts social standing, access to rituals, and family support.
domain_priors:suppression_score(family_estrangement_ratio, 0.70).   % Suppresses the alternative of clean relationship closure.
domain_priors:theater_ratio(family_estrangement_ratio, 0.10).       % Low theater; the enforcement and consequences are real.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(family_estrangement_ratio, extractiveness, 0.80).
narrative_ontology:constraint_metric(family_estrangement_ratio, suppression_requirement, 0.70).
narrative_ontology:constraint_metric(family_estrangement_ratio, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% It claims to be a mechanism for social cohesion and support.
narrative_ontology:constraint_claim(family_estrangement_ratio, coordination).

% Binary flags
domain_priors:requires_active_enforcement(family_estrangement_ratio). % Enforced by family members pushing for reconciliation and judging silence.

% Structural property derivation hooks:
% The presence of both a beneficiary and a victim is the key signature of a Tangled Rope.
narrative_ontology:constraint_beneficiary(family_estrangement_ratio, family_network_stability). % The precedent of "forever" protects the group structure.
narrative_ontology:constraint_victim(family_estrangement_ratio, estranged_individual). % The individual is extracted of social access for their safety.

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE ESTRANGED INDIVIDUAL (SNARE)
% The dogma is a trap. Staying means enduring harm; leaving means social liquidation
% and stigma. Both options are extractive.
constraint_indexing:constraint_classification(family_estrangement_ratio, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE FAMILY NETWORK (ROPE)
% For the network, the "forever" dogma is a coordination tool (a Rope) that binds
% the fabric together, ensuring continuity and stability across generations.
constraint_indexing:constraint_classification(family_estrangement_ratio, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(regional))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees the dual function: it's a coordination mechanism for the group
% (beneficiary) that relies on asymmetric extraction from individuals (victims)
% and requires active enforcement. This is the canonical definition of a Tangled Rope.
constraint_indexing:constraint_classification(family_estrangement_ratio, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(family_estrangement_ratio_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(family_estrangement_ratio, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(family_estrangement_ratio, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(analytical_classification_is_tangled_rope) :-
    % The analytical observer must correctly identify the hybrid nature.
    constraint_indexing:constraint_classification(family_estrangement_ratio, tangled_rope, context(agent_power(analytical), _, _, _)).

test(tangled_rope_structural_properties_present) :-
    % Verify all three required properties for Tangled Rope are declared.
    narrative_ontology:constraint_beneficiary(family_estrangement_ratio, _),
    narrative_ontology:constraint_victim(family_estrangement_ratio, _),
    domain_priors:requires_active_enforcement(family_estrangement_ratio).

:- end_tests(family_estrangement_ratio_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The core of this constraint is the perspectival gap between the individual and the group. For the estranged individual (powerless, trapped), the "family is forever" dogma is a Snare that forces a choice between two harmful outcomes. For the family network (institutional, mobile), the same dogma is a Rope that ensures group cohesion and stability.
 *
 * The analytical perspective resolves this tension by classifying it as a Tangled Rope. This is the correct classification because the constraint possesses all three required properties:
 * 1. A coordination function (maintaining network stability for beneficiaries).
 * 2. Asymmetric extraction (cost is borne by the victim for their own safety).
 * 3. Active enforcement (social pressure, judgment, pushing for reconciliation).
 *
 * The original file's classification of the analytical view as a Mountain was incorrect. While the "magic ratio" of interactions might be a mountain-like psychological law, the *social constraint* built upon it is a constructed, hybrid system.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The Tangled Rope classification correctly prevents mandatrophy. It acknowledges the valid coordination function perceived by the beneficiary (the Rope view) while simultaneously accounting for the severe, asymmetric extraction experienced by the victim (the Snare view). The system does not incorrectly dismiss the entire structure as pure extraction.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_family_estrangement_ratio_1,
    'Is the stigma of estrangement a functional protection of the family unit or an extractive tool to force compliance?',
    'Comparison of health outcomes for individuals in reconcile-at-all-costs families vs. closure-accepting families.',
    'If protection: leans Mountain. If extraction: confirms Snare/Tangled Rope.',
    confidence_without_resolution(medium)
).

omega_variable(
    omega_family_estrangement_ratio_2,
    'Can a larger family network actually heal divisions, or is the prevalence of the silent epidemic proof that the network is a failed Scaffold?',
    'Audit of long-term reconciliation rates mediated by extended family networks.',
    'If efficacy is high: Rope function is strong. If low: Rope function is largely theatrical, closer to a Piton.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(family_estrangement_ratio, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This social dogma is deeply entrenched and has not changed significantly over the
% measured interval. The extraction and low theater ratio are stable properties.
%
% Theater ratio over time (stable):
narrative_ontology:measurement(fer_tr_t0, family_estrangement_ratio, theater_ratio, 0, 0.10).
narrative_ontology:measurement(fer_tr_t5, family_estrangement_ratio, theater_ratio, 5, 0.10).
narrative_ontology:measurement(fer_tr_t10, family_estrangement_ratio, theater_ratio, 10, 0.10).

% Extraction over time (stable):
narrative_ontology:measurement(fer_ex_t0, family_estrangement_ratio, base_extractiveness, 0, 0.80).
narrative_ontology:measurement(fer_ex_t5, family_estrangement_ratio, base_extractiveness, 5, 0.80).
narrative_ontology:measurement(fer_ex_t10, family_estrangement_ratio, base_extractiveness, 10, 0.80).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The dogma functions as a mechanism to enforce a particular social structure.
narrative_ontology:coordination_type(family_estrangement_ratio, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: family_succession_system
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-22
% ============================================================================

:- module(constraint_family_succession_system, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:coordination_type/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: family_succession_system
 * human_readable: Meiji-Taisho Family Succession and the "Ie" System
 * domain: social/familial
 * * SUMMARY:
 * Based on Jun'ichirō Tanizaki's "Atsumono", this constraint models the rigid "Ie" (House) system of early 20th century Japan. The requirement for an adopted son-in-law to maintain a family lineage collides with individual desires, functioning as an immutable force (Mountain) to those within it. This drives the protagonist toward a self-destructive cycle of decadence as a failed exit strategy.
 * * KEY AGENTS:
 * - Tachibana Sōichi: The subject, a young man whose future is extracted by the system (Powerless).
 * - Sōichi's Mother (O-shina): An enforcer of the system, seeing it as necessary for social order (Institutional).
 * - The 'Ie' Lineage: The abstract beneficiary of the system's continuity.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(family_succession_system, 0.8). % The system extracts the total future and happiness of individuals to ensure the abstract continuity of the "House".
domain_priors:suppression_score(family_succession_system, 0.9).   % Alternatives (e.g., elopement) result in social/economic death, making them effectively impossible.
domain_priors:theater_ratio(family_succession_system, 0.1).       % The system is brutally functional and direct, not performative.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(family_succession_system, extractiveness, 0.8).
narrative_ontology:constraint_metric(family_succession_system, suppression_requirement, 0.9).
narrative_ontology:constraint_metric(family_succession_system, theater_ratio, 0.1).

% Constraint self-claim (what does the constraint claim to be?)
% The system presents itself as a natural, unchangeable part of the social order.
narrative_ontology:constraint_claim(family_succession_system, mountain).

% Binary flags
domain_priors:requires_active_enforcement(family_succession_system). % Requires active enforcement by family heads.

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(family_succession_system, ie_lineage). % The abstract House lineage
narrative_ontology:constraint_victim(family_succession_system, young_heirs). % e.g., Tachibana Sōichi, Miyoko

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (Sōichi) - MOUNTAIN
% For the youth, the "Ie" system is as unchangeable as a mountain. They cannot
% negotiate with it; they can only collide with it and break.
constraint_indexing:constraint_classification(family_succession_system, mountain,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE ENFORCER (Mother) - ROPE
% To the mother, the system is a functional tool (Rope) to ensure stability,
% prevent "shame," and guide the family safely through generations.
constraint_indexing:constraint_classification(family_succession_system, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(local))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER - TANGLED ROPE
% An observer sees a system with a genuine coordination function (inheritance)
% achieved via extreme coercion and asymmetric extraction, a classic Tangled Rope.
constraint_indexing:constraint_classification(family_succession_system, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(family_succession_system_tests).

test(perspectival_gap) :-
    % Verify the gap between the powerless (Mountain) and institutional (Rope) views.
    constraint_indexing:constraint_classification(family_succession_system, mountain, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(family_succession_system, rope, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(family_succession_system, tangled_rope, context(agent_power(analytical), _, _, _)).

test(tangled_rope_structural_requirements) :-
    % Verify that the conditions for a Tangled Rope classification are met.
    narrative_ontology:constraint_beneficiary(family_succession_system, _),
    narrative_ontology:constraint_victim(family_succession_system, _),
    domain_priors:requires_active_enforcement(family_succession_system).

test(extraction_threshold) :-
    % Verify the system is correctly identified as highly extractive.
    domain_priors:base_extractiveness(family_succession_system, E),
    E >= 0.46.

:- end_tests(family_succession_system_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect a social system that is brutally effective at its stated goal (lineage preservation) at an extreme human cost.
 * - Extractiveness (0.8): The system extracts the entire life-path and autonomy of individuals to serve the abstract 'Ie' (House).
 * - Suppression (0.9): Social and legal structures of the Meiji/Taisho era made alternatives like elopement a form of social suicide, hence non-viable.
 * - Perspectival Gap: The core conflict is between the institutional view (Mother), which sees the system as a necessary 'Rope' for social order (dōri), and the powerless view (Sōichi), which experiences it as an immutable, life-destroying 'Mountain'.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The high extraction (0.8) is not a measurement error but the central feature of the constraint. The analytical classification as a 'Tangled Rope' resolves the potential mandatrophy by acknowledging the system's dual nature. It does perform a genuine coordination function (managing succession and inheritance, benefiting the abstract 'ie_lineage'), but this function is inseparable from its coercive, asymmetric extraction from individuals (the victims). This prevents misclassification as a pure 'Snare' (which would ignore the coordination role) or a 'Rope' (which would ignore the immense human cost). The system is a tool of order that functions by crushing dissent.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_miyoko_will,
    "To what extent did Miyoko, the betrothed, possess the will to resist her parents' decision?",
    "Analysis of her letters vs. contemporary accounts of female agency.",
    "If she was a willing participant, the constraint shifts from Mountain to Rope for her index.",
    confidence_without_resolution(medium)
).

omega_variable(
    omega_parental_collusion,
    "Was the sacrifice of Sōichi's happiness a pre-meditated act by the family elders?",
    "Investigation of private correspondence between the families.",
    "Determines if the constraint was a planned extraction (closer to Snare) or an emergent social friction (closer to Mountain).",
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(family_succession_system, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This system was stable and rigid during the period in question. The values
% show no drift over the interval.
%
% Theater ratio over time:
narrative_ontology:measurement(fss_tr_t0, family_succession_system, theater_ratio, 0, 0.1).
narrative_ontology:measurement(fss_tr_t5, family_succession_system, theater_ratio, 5, 0.1).
narrative_ontology:measurement(fss_tr_t10, family_succession_system, theater_ratio, 10, 0.1).

% Extraction over time:
narrative_ontology:measurement(fss_ex_t0, family_succession_system, base_extractiveness, 0, 0.8).
narrative_ontology:measurement(fss_ex_t5, family_succession_system, base_extractiveness, 5, 0.8).
narrative_ontology:measurement(fss_ex_t10, family_succession_system, base_extractiveness, 10, 0.8).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The system's primary coordination function is managing the transfer of
% assets, status, and responsibility across generations.
narrative_ontology:coordination_type(family_succession_system, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: fast_growing_hierarchy
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-29
% ============================================================================

:- module(constraint_fast_growing_hierarchy, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: fast_growing_hierarchy
 * human_readable: The Fast-Growing Hierarchy (FGH)
 * domain: technological
 * * SUMMARY:
 * The Fast-Growing Hierarchy is a family of functions indexed by ordinals that
 * classifies the growth rate of computable functions. It defines a hard
 * boundary for what can be computed within specific axiomatic systems; for
 * example, Peano Arithmetic cannot prove the termination of functions
 * growing at the rate of f_epsilon_0. It represents an immutable landscape of
 * computational complexity.
 * * KEY AGENTS:
 * - The Computer Scientist: Encounters the FGH as a hard physical limit on computation.
 * - The Proof Theorist: Uses the FGH as a tool to measure the strength of mathematical systems.
 * - The Analytical Observer: Views the hierarchy as an objective, unchangeable feature of logic.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
% A mathematical law has no inherent extractiveness or suppressive function.
% It is an objective feature of a logical system.
domain_priors:base_extractiveness(fast_growing_hierarchy, 0.05). % Mountain extraction <= 0.15
domain_priors:suppression_score(fast_growing_hierarchy, 0.01).   % Mountain suppression <= 0.05
domain_priors:theater_ratio(fast_growing_hierarchy, 0.0).       % No performative aspect.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(fast_growing_hierarchy, extractiveness, 0.05).
narrative_ontology:constraint_metric(fast_growing_hierarchy, suppression_requirement, 0.01).
narrative_ontology:constraint_metric(fast_growing_hierarchy, theater_ratio, 0.0).

% Constraint self-claim (what does the constraint claim to be?)
% As a mathematical theorem, its claim is to be a natural law of its domain.
narrative_ontology:constraint_claim(fast_growing_hierarchy, natural_law).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   This is a uniform-type constraint (Mountain-only). The classification is
   invariant across all perspectives because it is a mathematical fact.
   ========================================================================== */

% PERSPECTIVE 1: THE PROGRAMMER (POWERLESS)
% Encounters the hierarchy as an insurmountable wall.
constraint_indexing:constraint_classification(fast_growing_hierarchy, mountain,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE PROOF THEORIST (INSTITUTIONAL)
% Uses the hierarchy as a fixed measuring stick.
constraint_indexing:constraint_classification(fast_growing_hierarchy, mountain,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(universal))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER
% Views the hierarchy as a fundamental, unchangeable feature of logic.
constraint_indexing:constraint_classification(fast_growing_hierarchy, mountain,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(universal))).


/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(fast_growing_hierarchy_tests).

test(perspectival_invariance) :-
    % Verify that for a uniform-type constraint, the classification is the same
    % from all major perspectives.
    constraint_indexing:constraint_classification(fast_growing_hierarchy, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(fast_growing_hierarchy, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(fast_growing_hierarchy, TypeAnalytical, context(agent_power(analytical), _, _, _)),
    TypePowerless == mountain,
    TypeInstitutional == mountain,
    TypeAnalytical == mountain.

test(mountain_threshold_adherence) :-
    % Verify the base metrics adhere to the strict thresholds for a Mountain.
    config:param(extractiveness_metric_name, ExtMetricName),
    config:param(suppression_metric_name, SuppMetricName),
    narrative_ontology:constraint_metric(fast_growing_hierarchy, ExtMetricName, E),
    narrative_ontology:constraint_metric(fast_growing_hierarchy, SuppMetricName, S),
    E =< 0.15,
    S =< 0.05.

:- end_tests(fast_growing_hierarchy_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The original file incorrectly assigned a high base extractiveness (0.6) to a
 * mathematical law, creating a logical contradiction. A mathematical concept
 * like the Fast-Growing Hierarchy does not "extract" resources in the sense
 * of a Snare or Tangled Rope; it defines an immutable boundary. The feeling of
 * being "trapped" by it (as a programmer might feel) is a confrontation with
 * a natural limit, not a constructed, coercive mechanism.
 *
 * To resolve this, the constraint has been re-classified as a pure Mountain.
 * Its base extractiveness and suppression scores are set to near-zero,
 * reflecting its status as an objective, non-agential feature of logic.
 * The classification is now `mountain` from all perspectives, demonstrating
 * the invariance expected of a natural law. This is a "uniform-type" constraint.
 *
 * * MANDATROPHY ANALYSIS:
 * Mandatrophy is not applicable here. As a pure Mountain (a mathematical fact),
 * there is no coordination function to degrade or extractive purpose to disguise.
 * The system correctly identifies it as an unchangeable feature of the domain,
 * preventing misclassification as a remediable Snare or a faulty Rope.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% As a low-extraction Mountain, no omega_variable is required by the linter.
% The primary uncertainty is philosophical (related to the Church-Turing thesis)
% rather than structural within the model's scope.

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(fast_growing_hierarchy, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Not applicable. As a low-extraction Mountain representing a mathematical
% constant, there is no lifecycle drift to measure.

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Not applicable. As a Mountain, this constraint has no coordination function,
% so coordination_type and boltzmann_floor_override are not relevant. It is a
% foundational concept and does not structurally influence other constraints
% in the sense of policy or institutional coupling.

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: fed_shutdown_2026
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2026-02-06
% ============================================================================

:- module(constraint_federal_shutdown, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================= */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: fed_shutdown_2026
 * human_readable: The 2026 DHS/ICE Funding Standoff
 * domain: political/economic
 * * SUMMARY:
 * A federal government shutdown triggered by a standoff over ICE oversight 
 * following the deaths of two U.S. citizens. The constraint functions as a 
 * Tangled Rope: it coordinates ideological boundaries for legislative blocs 
 * but extracts significant systemic value by delaying critical economic 
 * indicators like the January jobs report.
 * * KEY AGENTS:
 * - Investors/Federal Workers: Subject (Powerless) - Blinded and unpaid.
 * - Legislative Blocs: Beneficiary (Institutional) - Using friction as leverage.
 * - Market Analysts: Auditor (Analytical) - Navigating the information void.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(fed_shutdown_2026, 0.58).
domain_priors:suppression_score(fed_shutdown_2026, 0.62).
domain_priors:theater_ratio(fed_shutdown_2026, 0.85).

% Primary keys for classification engine
% These must match the parameter names in the system config.
narrative_ontology:constraint_metric(fed_shutdown_2026, extractiveness, 0.58).
narrative_ontology:constraint_metric(fed_shutdown_2026, suppression_requirement, 0.62).
narrative_ontology:constraint_metric(fed_shutdown_2026, theater_ratio, 0.85).

% Tangled Rope Structural Property Declarations
% Required by the linter and the canonical classifier to derive 
% has_coordination_function/1 and has_asymmetric_extraction/1.
domain_priors:requires_active_enforcement(fed_shutdown_2026).
narrative_ontology:constraint_beneficiary(fed_shutdown_2026, legislative_blocs).
narrative_ontology:constraint_victim(fed_shutdown_2026, federal_workers_and_investors).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% Effective Extraction: 0.58 * 1.5 (powerless) * 1.0 (national) = 0.87.
% At χ > 0.46, the subject feels this as a predatory trap (Snare).
constraint_indexing:constraint_classification(fed_shutdown_2026, snare, 
    context(agent_power(powerless), 
            time_horizon(biographical), 
            exit_options(trapped), 
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (TANGLED ROPE)
% Effective Extraction: 0.58 * -0.2 (institutional) * 1.0 = -0.116.
% To the institution, the friction is a necessary coordination tool.
constraint_indexing:constraint_classification(fed_shutdown_2026, tangled_rope, 
    context(agent_power(institutional), 
            time_horizon(biographical), 
            exit_options(constrained), 
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER
% Default analytical context for system-wide claims.
constraint_indexing:constraint_classification(fed_shutdown_2026, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

% PERSPECTIVE 4: THE FEDERAL CONTRACTOR (TANGLED ROPE)
% Effective Extraction: 0.58 * 1.0 (moderate) * 1.0 (national) = 0.58.
% Exit Option: arbitrage (pivot to non-government programs).
% With arbitrage, the classification remains 'tangled_rope' rather than 
% 'snare' because the agent maintains a functional link to the system.
constraint_indexing:constraint_classification(fed_shutdown_2026, tangled_rope, 
    context(agent_power(moderate), 
            time_horizon(biographical), 
            exit_options(arbitrage), 
            spatial_scope(national))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(fed_shutdown_2026_tests).

test(perspectival_gap) :-
    % Verify that the powerless feel a Snare while the institution sees a Rope.
    constraint_indexing:constraint_classification(fed_shutdown_2026, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(fed_shutdown_2026, tangled_rope, context(agent_power(institutional), _, _, _)).

test(tangled_rope_properties) :-
    % Ensure all structural requirements for Tangled Rope are present.
    domain_priors:requires_active_enforcement(fed_shutdown_2026),
    narrative_ontology:constraint_beneficiary(fed_shutdown_2026, _),
    narrative_ontology:constraint_victim(fed_shutdown_2026, _).

test(contractor_mitigation) :-
    % Verify that contractors experience lower effective extraction than the public
    % due to power scaling, even if the base extraction is identical.
    constraint_indexing:constraint_classification(fed_shutdown_2026, TypePublic, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(fed_shutdown_2026, TypeContractor, context(agent_power(moderate), _, exit_options(arbitrage), _)),
    TypePublic = snare,
    TypeContractor = tangled_rope.

:- end_tests(fed_shutdown_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The 0.58 base extraction is high enough to trigger the Omega Variable 
 * requirement. Because the theater_ratio (0.85) is extreme, this constraint 
 * is highly visible but provides negative utility to the powerless due to 
 * the scaling formula. The "Tangled Rope" classification is mandatory here 
 * because there is a genuine coordination function (legislative negotiation) 
 * paired with active enforcement (the shutdown) and asymmetric victims.
 *
 * MANDATROPHY ANALYSIS:
 * The classification as "Tangled Rope" resolves the Mandatrophy by 
 * acknowledging that while the system is extracting value from the public, 
 * it is not doing so pointlessly—it is the "cost" of institutional boundary 
 * maintenance.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_shutdown_duration,
    'Will the House pass the two-week stopgap measure by Feb 8?',
    'Direct monitoring of House floor votes and legislative trackers.',
    'Success reverts the Tangled Rope to a Scaffold; failure moves it toward a Piton.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(fed_shutdown_2026, 0, 14).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Theater ratio (Theatrical maintenance of the standoff)
narrative_ontology:measurement(fs_tr_t0, fed_shutdown_2026, theater_ratio, 0, 0.85).
narrative_ontology:measurement(fs_tr_t7, fed_shutdown_2026, theater_ratio, 7, 0.88).
narrative_ontology:measurement(fs_tr_t14, fed_shutdown_2026, theater_ratio, 14, 0.92).

% Base Extractiveness (Increasing cost of systemic entropy/data delay)
narrative_ontology:measurement(fs_be_t0, fed_shutdown_2026, base_extractiveness, 0, 0.58).
narrative_ontology:measurement(fs_be_t7, fed_shutdown_2026, base_extractiveness, 7, 0.65).
narrative_ontology:measurement(fs_be_t14, fed_shutdown_2026, base_extractiveness, 14, 0.72).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: feigenbaum_universality
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Mitchell Feigenbaum (1975) / Universality in Chaos Theory
% ============================================================================

:- module(constraint_feigenbaum, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: feigenbaum_universality
 * human_readable: Feigenbaum Constants (Scaling of Chaos)
 * domain: mathematical/technological/physical
 * temporal_scope: 1975 - Present (Civilizational)
 * spatial_scope: Global/Abstract (Unimodal Maps / Dissipative Systems)
 * * SUMMARY:
 * Feigenbaum discovery reveals that the transition from order to chaos via 
 * period-doubling follows universal scaling constants ($\delta \approx 4.669$). 
 * This functions as a "law of laws," dictating that the geometry of failure 
 * is identical across disparate physical systems (fluids, circuits, biology).
 * * KEY AGENTS:
 * - The System Variable: The powerless agent following the iterative path.
 * - Mitchell Feigenbaum: The analytical observer who discovered the "Mountain."
 * - The Control Engineer: An institutional agent using the constant to 
 * predict the "point of no return" in complex hardware.
 * * NARRATIVE ARC:
 * Before 1975, the onset of chaos was seen as system-specific. Feigenbaum 
 * revealed a "Mountain" of universal scaling—a hidden geometric "Snare" 
 * that tightens at a predictable rate as a system approaches turbulence. 
 * For designers, it is a "Rope" for predictive maintenance, but for the 
 * system itself, the constant is an inescapable topological fate.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Structural Anchor for index extraction
narrative_ontology:interval(feigenbaum_universality, 1975, 2026).
narrative_ontology:constraint_claim(feigenbaum_universality, mountain).

% Base extractiveness score (0.0-1.0)
% Rationale: Moderate (0.3). The constant "extracts" the uniqueness of 
% specific systems, forcing all nonlinear transitions to obey the same 
% geometric ratio, thereby limiting design degrees of freedom.
domain_priors:base_extractiveness(feigenbaum_universality, 0.3).

% Suppression score (0.0-1.0)
% Rationale: Low (0.2). It suppressed the previous "system-dependent" 
% theories of chaos onset, replacing them with a more rigid universal truth.
domain_priors:suppression_score(feigenbaum_universality, 0.2).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(feigenbaum_universality, extractiveness, 0.3).
narrative_ontology:constraint_metric(feigenbaum_universality, suppression_requirement, 0.2).

% Enforcement: Emerges naturally from the topology of quadratic maps.
domain_priors:emerges_naturally(feigenbaum_universality).

% Metrics for Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(feigenbaum_universality, predictive_maintenance). % Can predict chaos before it happens.
constraint_beneficiary(feigenbaum_universality, theoretical_physicists). % Discovery of hidden order.
constraint_victim(feigenbaum_universality, computational_precision). % Successive bifurcations happen 4.6x faster.
constraint_victim(feigenbaum_universality, design_flexibility). % You cannot "change" the rate of the transition.

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE NONLINEAR ITERATE - Mountain
   --------------------------------------------------------------------------
   WHO: powerless - The variable $x_n$ has no agency over the map.
   WHEN: immediate - True at every bifurcation point.
   WHERE: trapped - Bound within the unimodal geometry of the mapping.
   SCOPE: local - Immediate neighborhood of the period-doubling event.
   
   WHY THIS CLASSIFICATION:
   For the mathematical state, the scaling constant $\delta$ is an absolute 
   truth. The "Butterfly" cannot choose to bifurcate at a different ratio; 
   it is a fixed feature of the nonlinear landscape.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    feigenbaum_universality,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE TURBINE ENGINEER - Rope
   --------------------------------------------------------------------------
   WHO: institutional - Power to design systems and set safety thresholds.
   WHEN: biographical - Planning the lifecycle of a high-performance system.
   WHERE: mobile - Can adjust parameters to stay away from the "Feigenbaum point."
   SCOPE: global - Applying the constant across all turbine designs.
   
   WHY THIS CLASSIFICATION:
   For the engineer, the constant is a "Rope"—a tool for functional 
   coordination. By knowing that each bifurcation happens 4.669 times 
   closer than the last, they coordinate a standard of achievement for 
   stability by precisely mapping the safety margins.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    feigenbaum_universality,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE PRECISION BOTTLENECK - Snare
   --------------------------------------------------------------------------
   WHO: powerless - A simulation algorithm limited by bit-depth.
   WHEN: immediate - The threshold where bifurcations occur faster than measurement.
   WHERE: constrained - Stuck in the "geometric squeeze" of the transition.
   SCOPE: local - A specific high-frequency regime.
   
   WHY THIS CLASSIFICATION:
   As the system approaches the limit point $r_\infty$, the constant acts 
   as a "Snare." It "strangles" computational accuracy, extracting all 
   available floating-point precision as the bifurcation intervals shrink 
   toward zero, forcing a total loss of predictability.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    feigenbaum_universality,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(local)
    )
) :- 
    domain_priors:base_extractiveness(feigenbaum_universality, E),
    E >= 0.2,
    !.

/* ==========================================================================
   4. TESTS (Insights into Universal Scaling)
   ========================================================================== */

:- begin_tests(feigenbaum_universality_tests).

test(universal_scaling_variance) :-
    % Iterate (Subject) -> Mountain
    constraint_indexing:constraint_classification(feigenbaum_universality, Type1, context(powerless, immediate, trapped, local)),
    % Engineer (User) -> Rope
    constraint_indexing:constraint_classification(feigenbaum_universality, Type2, context(institutional, biographical, mobile, global)),
    Type1 = mountain,
    Type2 = rope.

test(computational_squeeze_penalty) :-
    % A powerless simulation (constrained) sees the geometric shrinkage as a Snare.
    constraint_indexing:constraint_classification(feigenbaum_universality, snare, context(powerless, immediate, constrained, local)).

test(extraction_is_constant) :-
    % The "cost" of the constant applies regardless of the specific math function used.
    domain_priors:base_extractiveness(feigenbaum_universality, Score),
    Score > 0.2.

:- end_tests(feigenbaum_universality_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * 1. TYPE VARIANCE: I chose to highlight how the *same* constant is a 
 * "Mountain" for the math, a "Rope" for the designer (prediction), 
 * and a "Snare" for the simulator (precision loss).
 * 2. EXTRACTIVENESS (0.3): While fundamental, the constant "extracts" 
 * the possibility of a linear or slow transition to chaos, forcing 
 * a rapid, accelerating geometric collapse.
 * 3. OMEGAS: The central uncertainty is whether the "Mountain" of 
 * $\delta$ holds in non-dissipative or non-unimodal systems.
 */

% OMEGA IDENTIFICATION
omega_variable(
    renormalization_group_fidelity,
    "Is the Feigenbaum constant a 'Mountain' in systems with non-quadratic extrema?",
    resolution_mechanism("Numerical audit of bifurcation rates in $x_{n+1} = r(1-|2x-1|^z)$ maps."),
    impact("If Yes: The constant is universal. If No: It is a system-dependent Scaffold."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: System-Specific Transition Models
 * Viability: Historically believed that every fluid or circuit had its 
 * own transition math.
 * Suppression: Rejected by the "Mountain" of Feigenbaum's HP-65 results.
 * * ALTERNATIVE 2: Quasiperiodic Route to Chaos (Ruelle-Takens)
 * Viability: A different "Mountain" entirely.
 * Conclusion: The existence of other routes means the Feigenbaum 
 * "Rope" only works if the system is already period-doubling.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Load: ?- [feigenbaum_universality].
% Analyze: ?- constraint_indexing:multi_index_report(feigenbaum_universality).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: fgh_hierarchy_2026
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2026-02-06
% ============================================================================

:- module(constraint_fgh_hierarchy, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: fgh_hierarchy_2026
 * human_readable: The Fast-Growing Hierarchy Mountain
 * domain: mathematical/computational
 * * SUMMARY:
 * The Fast-Growing Hierarchy (FGH) is a family of functions indexed by 
 * transfinite ordinals that classifies the growth rates of computable 
 * functions. It is a Mountain—a logical limit where the "extraction" is the 
 * baseline cost of algorithmic reality, and the suppression of 
 * sub-exponential or even Ackermann-level growth is absolute at higher stages.
 * * KEY AGENTS:
 * - Computations: Subject (Powerless) - Bound by the recursive limits of ordinals.
 * - Formal Logic: Beneficiary (Institutional) - Providing the scaffolding for 
 * computational complexity.
 * - Complexity Theorists: Auditor (Analytical) - Mapping the transfinite landscape.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Mountains are defined by near-zero extraction and maximum suppression.
domain_priors:base_extractiveness(fgh_hierarchy_2026, 0.01). 
domain_priors:suppression_score(fgh_hierarchy_2026, 0.99).   
domain_priors:theater_ratio(fgh_hierarchy_2026, 0.10). % Low theater; pure abstract logic.

% Primary keys for classification engine
narrative_ontology:constraint_metric(fgh_hierarchy_2026, extractiveness, 0.01).
narrative_ontology:constraint_metric(fgh_hierarchy_2026, suppression_requirement, 0.99).
narrative_ontology:constraint_metric(fgh_hierarchy_2026, theater_ratio, 0.10).

% Identification of coordination beneficiary (Logical Integrity)
narrative_ontology:constraint_beneficiary(fgh_hierarchy_2026, computational_stability).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE COMPUTATIONAL PROCESS (MOUNTAIN)
% Effective Extraction: 0.01 * 1.5 (powerless) * 1.2 (universal logic) = 0.018.
% Since χ < 0.05, the "agent" (the algorithm) perceives this as a natural law.
constraint_indexing:constraint_classification(fgh_hierarchy_2026, mountain, 
    context(agent_power(powerless), 
            time_horizon(generational), 
            exit_options(trapped), 
            spatial_scope(global))).

% PERSPECTIVE 2: THE INSTITUTIONAL FRAMEWORK (MOUNTAIN)
% Effective Extraction: 0.01 * -0.2 (institutional) * 1.2 = -0.0024.
% The logic serves as the foundational "floor" for building complexity classes.
constraint_indexing:constraint_classification(fgh_hierarchy_2026, mountain, 
    context(agent_power(institutional), 
            time_horizon(civilizational), 
            exit_options(mobile), 
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER
constraint_indexing:constraint_classification(fgh_hierarchy_2026, mountain,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(universal))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(fgh_hierarchy_2026_tests).

test(mountain_validation) :-
    % Mountains must satisfy the low-extraction threshold χ < 0.05.
    narrative_ontology:constraint_metric(fgh_hierarchy_2026, extractiveness, E),
    E < 0.05.

test(absolute_suppression_check) :-
    % Logical/Mathematical laws exclude alternative growth rates with near-total score.
    domain_priors:suppression_score(fgh_hierarchy_2026, S),
    S > 0.95.

:- end_tests(fgh_hierarchy_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The Fast-Growing Hierarchy is the "Inertial Limit" of recursion. In the 
 * Deferential Realism ontology, it is a Mountain because its growth rates—
 * from the successor function to the Wainer hierarchy—are not subject to 
 * institutional negotiation or biographical agency. The "trapped" status 
 * reflects the fact that any computational agent is ultimately bound by 
 * the Church-Turing thesis and the ordinals available for recursion.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_large_ordinal_limit,
    'Does the physical universe support computation beyond the Bachmann-Howard ordinal?',
    'Review of quantum-gravitational information density limits.',
    'Physical limits convert the logical Mountain into a physical Piton.',
    confidence_without_resolution(high)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(fgh_hierarchy_2026, 0, 1).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Logical Mountains are static; their metrics do not drift.
narrative_ontology:measurement(fgh_tr_t0, fgh_hierarchy_2026, theater_ratio, 0, 0.10).
narrative_ontology:measurement(fgh_ex_t0, fgh_hierarchy_2026, base_extractiveness, 0, 0.01).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: fine_particle_policy
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2024-02-29
% ============================================================================

:- module(constraint_fine_particle_policy, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: fine_particle_policy
 * human_readable: Dutch Fine Particle Policy
 * domain: political
 * * SUMMARY:
 * The Dutch government implements a policy to reduce fine particle emissions, impacting farmers significantly due to livestock emissions. The policy aims to improve air quality and public health but imposes restrictions and costs on farmers, especially those near Natura 2000 areas. This policy presents a conflict between environmental goals and agricultural livelihoods.
 * * KEY AGENTS:
 * - Farmers: Subject (Powerless)
 * - Government: Beneficiary (Institutional)
 * - Environmental Scientists: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(fine_particle_policy, 0.55). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(fine_particle_policy, 0.70).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(fine_particle_policy, 0.20).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(fine_particle_policy, extractiveness, 0.55).
narrative_ontology:constraint_metric(fine_particle_policy, suppression_requirement, 0.70).
narrative_ontology:constraint_metric(fine_particle_policy, theater_ratio, 0.20).

% Binary flags
% narrative_ontology:has_sunset_clause(fine_particle_policy).      % Mandatory if Scaffold
domain_priors:requires_active_enforcement(fine_particle_policy). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(fine_particle_policy, "General Public").
narrative_ontology:constraint_victim(fine_particle_policy, "Farmers").

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE/MOUNTAIN)
% High extraction felt as an immutable limit or predatory trap.
% NOTE: This may be upgraded to 'organized' power if a critical mass of victims exists.
constraint_indexing:constraint_classification(fine_particle_policy, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Viewed as essential infrastructure or coordination.
constraint_indexing:constraint_classification(fine_particle_policy, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER
% Default analytical context (civilizational/analytical/global).
% This perspective is used by the bridge to derive constraint_claim.
% Type should reflect what the metrics compute: mountain, rope, tangled_rope, snare, scaffold, or piton.
constraint_indexing:constraint_classification(fine_particle_policy, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(fine_particle_policy_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(fine_particle_policy, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(fine_particle_policy, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(threshold_validation) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(fine_particle_policy, ExtMetricName, E),
    E >= 0.46. % Ensures it's either a Mountain or high-extraction Snare/Tangled.

:- end_tests(fine_particle_policy_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The fine particle policy scores high on extractiveness due to the direct financial and operational impact on farmers. Suppression is high because the policy limits their options and requires significant changes to their practices. The perspectival gap arises because the government (institutional) views the policy as a necessary measure for public health, while farmers (powerless) perceive it as a threat to their livelihood. The analytical observer sees it as a Tangled Rope because it coordinates public health improvement but extracts significantly from farmers, requiring active enforcement.
 * * MANDATROPHY ANALYSIS:
 * The Tangled Rope classification prevents mislabeling as pure extraction by acknowledging the coordination benefit of improved air quality for the general public. The policy is not purely extractive because it aims to solve a collective action problem (air pollution) even though the costs are disproportionately borne by farmers.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_fine_particle_policy,
    'To what extent are the emission reduction targets achievable without disproportionately impacting farmers?',
    'Longitudinal study of policy implementation and its economic impact on farms.',
    'If achievable, policy is more justifiable. If not, requires significant compensation or alternative solutions.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(fine_particle_policy, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection (metric_substitution,
% extraction_accumulation) by providing measurements at multiple time points.
% Model how the constraint intensified or changed across the interval.
%
% Required for high-extraction constraints (base_extractiveness > 0.46).
% Use at least 3 time points (T=0, midpoint, T=end) for each tracked metric.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(fine_particle_policy_tr_t0, fine_particle_policy, theater_ratio, 0, 0.10).
narrative_ontology:measurement(fine_particle_policy_tr_t5, fine_particle_policy, theater_ratio, 5, 0.20).
narrative_ontology:measurement(fine_particle_policy_tr_t10, fine_particle_policy, theater_ratio, 10, 0.20).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(fine_particle_policy_ex_t0, fine_particle_policy, base_extractiveness, 0, 0.45).
narrative_ontology:measurement(fine_particle_policy_ex_t5, fine_particle_policy, base_extractiveness, 5, 0.55).
narrative_ontology:measurement(fine_particle_policy_ex_t10, fine_particle_policy, base_extractiveness, 10, 0.55).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: finite_pool_of_worry
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-22
% ============================================================================

:- module(constraint_finite_pool_of_worry, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: finite_pool_of_worry
 * human_readable: The Finite Pool of Worry Hypothesis
 * domain: psychological/social
 * * SUMMARY:
 * This constraint defines a psychological limit where individuals avoid dealing with multiple
 * negative events simultaneously. As cognitive load increases from immediate
 * threats (e.g., a pandemic), concern and attention for long-term existential risks
 * (e.g., climate change) are systematically redirected and neglected.
 * * KEY AGENTS:
 * - The Worried Subject: An individual whose cognitive bandwidth is exhausted by immediate safety needs.
 * - Immediate Crisis Response: The beneficiary that receives the redirected attention.
 * - Future Existential Security: The victim that suffers from the redirected attention.
 * - The Analytical Observer: A psychologist or sociologist mapping the cognitive tradeoffs.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
% Rationale (Extraction): High (0.75). The constraint extracts the mental capacity and "future-readiness"
% of a civilization. By redirecting attention from long-term mitigation, it extracts the
% probability of a habitable future for the sake of immediate crisis management.
domain_priors:base_extractiveness(finite_pool_of_worry, 0.75).
% Rationale (Suppression): Moderate-High (0.65). The pool "redirects" attention, effectively
% suppressing the visibility of non-immediate existential risks.
domain_priors:suppression_score(finite_pool_of_worry, 0.65).
% Rationale (Theater): Low (0.15). The effect is a genuine cognitive phenomenon, not a
% performative act.
domain_priors:theater_ratio(finite_pool_of_worry, 0.15).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(finite_pool_of_worry, extractiveness, 0.75).
narrative_ontology:constraint_metric(finite_pool_of_worry, suppression_requirement, 0.65).
narrative_ontology:constraint_metric(finite_pool_of_worry, theater_ratio, 0.15).

% Constraint self-claim (what does the constraint claim to be?)
% It is presented as a fundamental, unchangeable aspect of human psychology.
narrative_ontology:constraint_claim(finite_pool_of_worry, natural_law).

% Structural property derivation hooks:
% Beneficiary: Immediate Crisis Management (receives all the attention/worry).
narrative_ontology:constraint_beneficiary(finite_pool_of_worry, immediate_crisis_response).
% Victim: Future Generations / Climate Change Mitigation (receives "neglect").
narrative_ontology:constraint_victim(finite_pool_of_worry, future_existential_security).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE WORRIED SUBJECT (SNARE)
% For the citizen, the finite pool is a "Snare." Their cognitive load is saturated by
% immediate safety needs, strangling their ability to care about long-term risks.
constraint_indexing:constraint_classification(finite_pool_of_worry, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE POLICY ARCHITECT (ROPE)
% For an institutional actor, the finite pool is a "Rope"—a coordination mechanism.
% Understanding how attention is redirected allows for strategic messaging to
% align public worry with specific policy goals.
constraint_indexing:constraint_classification(finite_pool_of_worry, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE PSYCHOLOGICAL ANALYST (MOUNTAIN)
% To the scientist, the finite pool is a "Mountain"—an immutable law of human
% evolutionary psychology. We cannot escape the fact that our cognitive bandwidth
% is finite and redirected by immediate, high-volume threats.
constraint_indexing:constraint_classification(finite_pool_of_worry, mountain,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(finite_pool_of_worry_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(finite_pool_of_worry, TypePowerless,
        context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(finite_pool_of_worry, TypeInstitutional,
        context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(finite_pool_of_worry, TypeAnalytical,
        context(agent_power(analytical), _, _, _)),
    TypePowerless == snare,
    TypeInstitutional == rope,
    TypeAnalytical == mountain,
    TypePowerless \= TypeInstitutional.

test(threshold_validation) :-
    % Verify that the base extractiveness meets the high-extraction threshold for a Snare.
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(finite_pool_of_worry, ExtMetricName, E),
    E >= 0.46.

:- end_tests(finite_pool_of_worry_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect the dual nature of this constraint. From an analytical, long-term
 * perspective, it's a 'Mountain'—a fixed feature of human cognition. However, in a
 * lived, biographical context, its effects are highly extractive and coercive, making
 * it a 'Snare' for individuals trying to balance immediate and future threats.
 * For institutions that can manipulate public attention, it becomes a 'Rope' for
 * coordinating societal focus. This perspectival gap is significant: what is a law of
 * nature to an analyst is a trap for a citizen and a tool for a government.
 * The high extraction (0.75) is justified because the resource being extracted is
 * 'civilizational foresight', a critical asset for long-term survival.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The system avoids mislabeling this as a pure Mountain by acknowledging the perspectival
 * classifications. While its origin may be a natural cognitive limit, its effect within a
 * media-saturated society is that of a Snare that extracts future security. The Rope
 * classification for institutional actors further highlights that this 'natural law' can be
 * instrumentally leveraged, distinguishing it from a truly inert Mountain like gravity.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_finite_pool_of_worry_1,
    'Is the redirection of attention a biological necessity (Mountain) or an intentionally amplified media/political strategy (Snare)?',
    'Comparative audit of crisis-reporting frequency vs. existential-risk-reporting frequency in state vs. independent media.',
    'If necessity: Evolutionary Mountain. If strategy: Mandatrophy Snare.',
    confidence_without_resolution(medium)
).

omega_variable(
    omega_finite_pool_of_worry_2,
    'Can the pool of worry be expanded through training or technology, or is its bandwidth fixed?',
    'Longitudinal studies measuring cognitive load and long-term risk assessment in populations with and without mindfulness or data-synthesis training.',
    'If expandable: The constraint is a mutable Rope. If fixed: It remains a fundamental Mountain.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(finite_pool_of_worry, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data models the constraint's intensification during the 2019-2021
% pandemic, where a latent cognitive bias became an acute, highly extractive social phenomenon.
% This is required as base_extractiveness > 0.46.

% Theater ratio over time (remains low and stable):
narrative_ontology:measurement(fpw_tr_t0, finite_pool_of_worry, theater_ratio, 0, 0.15).
narrative_ontology:measurement(fpw_tr_t5, finite_pool_of_worry, theater_ratio, 5, 0.15).
narrative_ontology:measurement(fpw_tr_t10, finite_pool_of_worry, theater_ratio, 10, 0.15).

% Extraction over time (ramps up as crisis saturates attention):
narrative_ontology:measurement(fpw_ex_t0, finite_pool_of_worry, base_extractiveness, 0, 0.35).
narrative_ontology:measurement(fpw_ex_t5, finite_pool_of_worry, base_extractiveness, 5, 0.60).
narrative_ontology:measurement(fpw_ex_t10, finite_pool_of_worry, base_extractiveness, 10, 0.75).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% No coordination type is declared as the constraint is primarily a cognitive
% limit rather than a designed coordination mechanism.
% No network relationships are declared in this model.

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: finite_simple_group_classification
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: The Classification of Finite Simple Groups (CFSG) / "The Enormous Theorem"
% ============================================================================

:- module(constraint_cfsg, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: finite_simple_group_classification
 * human_readable: Classification of Finite Simple Groups
 * domain: mathematical/theoretical
 * temporal_scope: 1955 - 2004 (Proof Era) / Present (Applied)
 * spatial_scope: Abstract (The universe of finite algebraic structures)
 * * SUMMARY:
 * The CFSG is a landmark theorem stating that every finite simple group belongs 
 * to one of 18 families of groups of Lie type, is one of the alternating groups, 
 * or is one of 26 "Sporadic" groups. Often called "The Enormous Theorem," its 
 * proof spans tens of thousands of pages across hundreds of journal articles.
 * * KEY AGENTS:
 * - The Finite Simple Group (Subject): The mathematical atom whose identity 
 * is strictly confined to a fixed periodic table of possibilities.
 * - The Mathematical Community (Institutional): The collective that manages 
 * the "Second Generation" proof and coordinates the use of the theorem.
 * - The Lone Researcher (Individual Powerless): An agent who must trust 
 * the validity of the proof without the lifespan necessary to verify it.
 * * NARRATIVE ARC:
 * The CFSG acts as a "Mountain" of structural reality; there are no simple 
 * groups outside the list. For the institution, it is a "Rope" that allows 
 * for "Classification-based proofs" where every finite group can be analyzed 
 * by checking the list. However, for the individual, its sheer complexity 
 * acts as a "Snare," extracting a "tax" of blind faith because the full 
 * proof is too large for any single human mind to fully encompass.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION
   ========================================================================== */

% Required for DR-Audit Suite
narrative_ontology:interval(cfsg_era, 1955, 2026).
narrative_ontology:constraint_claim(finite_simple_group_classification, mountain).

% Base extractiveness: 0.35
% Rationale: Moderate. While math is a gift, the CFSG "extracts" significant 
% cognitive labor. The "tax" is the requirement to accept an unverified (by the 
% individual) 10,000-page proof to proceed with modern algebra.
domain_priors:base_extractiveness(finite_simple_group_classification, 0.35).

% Suppression score: 0.2
% Rationale: It suppresses the visibility of "extra-classification" groups, 
% rendering the search for new finite simple groups functionally invisible.
domain_priors:suppression_score(finite_simple_group_classification, 0.2).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(finite_simple_group_classification, extractiveness, 0.35).
narrative_ontology:constraint_metric(finite_simple_group_classification, suppression_requirement, 0.2).

% Enforcement: Emerges from the fundamental axioms of group theory.
domain_priors:emerges_naturally(finite_simple_group_classification).

% Metrics
% BENEFICIARIES & VICTIMS (Required for extractiveness > 0.3)
constraint_beneficiary(finite_simple_group_classification, group_theorists). % Power of induction over all groups.
constraint_beneficiary(finite_simple_group_classification, mathematical_physics). % Symmetry classification.
constraint_victim(finite_simple_group_classification, individual_verification). % The ability for a single person to verify the foundations.

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE FINITE SIMPLE GROUP - Mountain
   --------------------------------------------------------------------------
   WHO: powerless - The group cannot "choose" to be outside the list.
   WHEN: immediate - True for any finite simple group in any context.
   WHERE: trapped - Bound within the logical "Periodic Table" of groups.
   SCOPE: global - Applies to all finite algebraic structures.
   
   WHY THIS CLASSIFICATION:
   For the group itself, the classification is a natural law. If it is simple 
   and finite, it is either a Lie-type group, an alternating group, or a 
   Sporadic group. There are zero degrees of freedom.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    finite_simple_group_classification,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE MATHEMATICAL ESTABLISHMENT - Rope
   --------------------------------------------------------------------------
   WHO: institutional - Power to maintain the "Gorenstein-Lyons-Solomon" proof.
   WHEN: civilizational - Long-term coordination of human knowledge.
   WHERE: mobile - Can refine the proof, simplify lemmas, or bridge gaps.
   SCOPE: global - Worldwide standard for algebraic achievement.
   
   WHY THIS CLASSIFICATION:
   For the institutional community, the theorem is a "Rope"—a functional 
   coordination tool. It allows mathematicians to coordinate "Global Induction" 
   on all finite groups by checking a finite, albeit long, list of cases.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    finite_simple_group_classification,
    rope,
    context(
        agent_power(institutional),
        time_horizon(civilizational),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE STUDENT / OUTSIDER - Snare
   --------------------------------------------------------------------------
   WHO: powerless - Lacks the status or time to verify the 10,000 pages.
   WHEN: biographical - Attempting to understand the foundations over a career.
   WHERE: constrained - No alternative but to trust the consensus of the "ancients."
   SCOPE: local - A specific research path or doctoral thesis.
   
   WHY THIS CLASSIFICATION:
   To the individual, the CFSG is a "Snare." It is a massive, unverified 
   barrier that "strangles" the ideal of mathematical self-sufficiency. It 
   extracts "Trust" where there should be "Proof," creating an asymmetric 
   power dynamic between the "Enormous Theorem" and the individual mind.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    finite_simple_group_classification,
    snare,
    context(
        agent_power(powerless),
        time_horizon(biographical),
        exit_options(constrained),
        spatial_scope(local)
    )
) :- 
    domain_priors:base_extractiveness(finite_simple_group_classification, E),
    E >= 0.3,
    !.

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(finite_simple_group_classification_tests).

test(structural_fate_variance) :-
    % Group Structure -> Mountain
    constraint_indexing:constraint_classification(finite_simple_group_classification, Type1, context(powerless, immediate, trapped, global)),
    % Community -> Rope
    constraint_indexing:constraint_classification(finite_simple_group_classification, Type2, context(institutional, civilizational, mobile, global)),
    Type1 = mountain,
    Type2 = rope.

test(verification_barrier_snare) :-
    % A powerless individual in a biographical search for truth sees it as a Snare.
    constraint_indexing:constraint_classification(finite_simple_group_classification, snare, context(powerless, biographical, constrained, local)).

test(beneficiary_victim_parity) :-
    constraint_beneficiary(finite_simple_group_classification, Beneficiary),
    constraint_victim(finite_simple_group_classification, Victim),
    Beneficiary \= Victim.

:- end_tests(finite_simple_group_classification_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * 1. EXTRACTIVENESS (0.35): I chose to highlight the "epistemic extraction." 
 * Because the proof is too long to be verified by one person, it extracts 
 * the traditional mathematical right of "personal proof" in exchange for 
 * "institutional trust."
 * 2. PERSPECTIVE GAP: The "Enormous Theorem" is the best example of how 
 * complexity turns a Mountain into a Snare. If a truth is "Natural" (Mountain) 
 * but requires 10,000 pages to see, it effectively coerces the observer.
 * 3. OMEGAS: The central uncertainty is the "Gaps" in the first-generation 
 * proof (e.g., the Quasi-thin groups) which were only resolved decades later.
 */

% OMEGA IDENTIFICATION
omega_variable(
    proof_verification_completeness,
    "Is the 'Second Generation' proof actually complete and error-free?",
    resolution_mechanism("Verification of the final Gorenstein-Lyons-Solomon volumes (estimated 2025-2030)."),
    impact("If Gaps remain: The Mountain is actually a Scaffold. If Complete: It is a true Mountain."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Constructive discovery of "new" simple groups.
 * Viability: Mathematically impossible if the theorem holds.
 * Suppression: CFSG renders this path "invisible" to serious researchers.
 * * ALTERNATIVE 2: Automated Theorem Proving (Lean/Coq)
 * Viability: Currently too complex to formalize 10,000 pages, but a 
 * potential "Rope" for future generations.
 * * CONCLUSION:
 * The institutional "Rope" of the CFSG is so strong that it has completely 
 * suppressed Alternative 1, turning the theorem into an unassailable Mountain.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Load: ?- [finite_simple_group_classification].
% Analyze: ?- constraint_indexing:multi_index_report(finite_simple_group_classification).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */


% --- v3.1 Indexical Relativity Stubs (Fleet Repair) ---
constraint_indexing:constraint_classification(finite_simple_groups_classification, mountain, agent_power(analytical)).
constraint_indexing:constraint_classification(finite_simple_groups_classification, rope, agent_power(institutional)).
constraint_indexing:constraint_classification(finite_simple_groups_classification, snare, agent_power(powerless)).
% ============================================================================
% CONSTRAINT STORY: fittss_law
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Paul Fitts (1954) / Human-Computer Interaction (HCI)
% ============================================================================

:- module(constraint_fittss_law, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: fittss_law
 * human_readable: Fitts’s Law (Speed-Accuracy Tradeoff)
 * domain: technological/social
 * temporal_scope: Permanent (Biological/Motor Constraints)
 * spatial_scope: Global (Human-Machine Interaction)
 * * SUMMARY:
 * Fitts’s Law is a predictive model of human movement that states the time 
 * required to rapidly move to a target area is a function of the ratio 
 * between the distance to the target and the width of the target. It 
 * represents the fundamental biological limit of the human motor system’s 
 * information capacity.
 * * KEY AGENTS:
 * - The Ergonomist: Analytical observer mapping the logarithmic decay of 
 * precision as speed increases.
 * - The UI Designer: Institutional agent using the law as a "Rope" to 
 * coordinate efficient interface layouts (e.g., placing the "Save" button 
 * in a high-access area).
 * - The Repetitive Task Worker: Individual powerless agent whose physical 
 * "output" is extracted by a system that demands maximum speed at the 
 * edge of their biological accuracy.
 * * NARRATIVE ARC:
 * Fitts's Law functions as a "Mountain"—a fixed feature of human neuro-muscular 
 * hardware. For the 
 * industrial engineer, it is a "Rope" used to pull a factory floor toward 
 * peak efficiency. 
 * However, for the data-entry clerk or assembly worker, it becomes a "Snare" 
 * as the system's "Efficiency" requirement strangles their physical health, 
 * leading to the extraction of their long-term motor vitality (RSI) 
 *.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================= */

% Required for structural identification
narrative_ontology:interval(fittss_law_interval, 0, 10).
narrative_ontology:constraint_claim(fittss_law, mountain).

% Base extractiveness score (0.0-1.0)
% Rationale: Moderate (0.4). The law allows institutions to extract "speed" 
% from human agents by optimizing targets. If pushed too hard, it extracts 
% physical health (motor strain).
domain_priors:base_extractiveness(fittss_law, 0.4).

% Suppression score (0.0-1.0)
% Rationale: High (0.7). The law suppresses "Infinite Precision." Humans 
% cannot move infinitely fast with infinite accuracy; the law makes the 
% alternative of "perfect fast movement" physically invisible.
domain_priors:suppression_score(fittss_law, 0.7).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(fittss_law, extractiveness, 0.4).
narrative_ontology:constraint_metric(fittss_law, suppression_requirement, 0.7).

% Enforcement requirements
% Emerges naturally from the human nervous system and motor-control loops.
domain_priors:emerges_naturally(fittss_law).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
% Beneficiary: Institutional managers and UI architects who gain speed metrics.
constraint_beneficiary(fittss_law, [industrial_engineers, ui_designers]).
% Victim: Individual workers subject to repetitive motion strain.
constraint_victim(fittss_law, [assembly_line_workers, data_entry_clerks]).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE EXPERIMENTAL PSYCHOLOGIST - Mountain
   --------------------------------------------------------------------------
   
   WHO: analytical - Observer of the human biological substrate.
   WHEN: civilizational - Viewing human motor capacity as an evolutionary constant.
   WHERE: trapped - The nervous system's processing speed is a fixed point.
   SCOPE: global - Universal across all humans.
   
   WHY THIS CLASSIFICATION:
   To the scientist, Fitts’s Law is a Mountain. It is an unchangeable 
   feature of human "hardware." Regardless of culture or technology, the 
   mathematical relationship between target size, distance, and time 
   remains a fixed peak in the topography of human capability.
   
   NARRATIVE EVIDENCE:
   Fitts's original 1954 experiments showed a constant "Index of Performance" 
   measured in bits per second, suggesting a hard-wired bandwidth for 
   human motion.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    fittss_law,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(civilizational),
        exit_options(trapped),
        spatial_scope(global)
    )
) :-
    constraint_indexing:effective_immutability_for_context(
        context(analytical, civilizational, trapped, global),
        mountain
    ),
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE PRODUCT DESIGNER - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional - Power to design tools and environments.
   WHEN: biographical - Creating products that users will master over years.
   WHERE: arbitrage - Can shift button locations or sizes to optimize workflow.
   SCOPE: national - Mass-market software or hardware standards.
   
   WHY THIS CLASSIFICATION:
   For the designer, the law is a Rope. It is a vital coordination 
   mechanism. By using Fitts's Law to place common actions in "easy" 
   reach (like the corners of a screen), they "pull" the user toward 
   an efficient and satisfying experience, using the constraint as 
    a tether for usability.
   
   NARRATIVE EVIDENCE:
   The "Magic Pixels" at the corners of a screen have infinite width in 
   one dimension (you can't overshoot them), making them the most 
   efficient "Rope" for UI navigation.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    fittss_law,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(arbitrage),
        spatial_scope(national)
    )
) :-
    domain_priors:base_extractiveness(fittss_law, E),
    E < 0.6,
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE WAREHOUSE PICKER - Snare
   --------------------------------------------------------------------------
   
   WHO: powerless - Subject to high-frequency quotas.
   WHEN: immediate - Today’s production target and picking rate.
   WHERE: constrained - High cost to ignoring the quota (termination).
   SCOPE: local - Immediate physical workstation/aisle.
   
   WHY THIS CLASSIFICATION:
   For the worker, the law is a Snare. The employer has optimized the 
   workspace (the Rope) for maximum throughput, but the worker must 
   now operate at the very edge of their biological limit for 10 hours. 
   The extraction of every millisecond strangles their comfort, eventually 
   leading to injury. The "Efficiency" is a trap they cannot exit.
   
   NARRATIVE EVIDENCE:
   "I have to hit the scanner perfectly every 3 seconds or the system flags 
   me; the distance is too far for that speed, and my wrist is starting 
   to burn."
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    fittss_law,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(local)
    )
) :-
    domain_priors:base_extractiveness(fittss_law, E),
    E > 0.3,
    !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(fittss_law_tests).

test(multi_perspective_variance) :-
    % Analyst sees Mountain, Institutional sees Rope, Powerless sees Snare
    constraint_indexing:constraint_classification(fittss_law, mountain, context(analytical, civilizational, trapped, global)),
    constraint_indexing:constraint_classification(fittss_law, rope, context(institutional, biographical, arbitrage, national)),
    constraint_indexing:constraint_classification(fittss_law, snare, context(powerless, immediate, constrained, local)).

test(power_extractiveness_motor) :-
    % Powerless workers feel the total extraction of their physical health (Snare).
    % Institutional designers use the law for coordination (Rope).
    ContextPowerless = context(powerless, immediate, constrained, local),
    ContextPowerful = context(institutional, biographical, arbitrage, national),
    constraint_indexing:extractiveness_for_agent(fittss_law, ContextPowerless, Score1),
    constraint_indexing:extractiveness_for_agent(fittss_law, ContextPowerful, Score2),
    Score1 > Score2.

test(time_immutability_biology) :-
    % Civilizational scale = Mountain
    constraint_indexing:effective_immutability(civilizational, trapped, mountain).

:- end_tests(fittss_law_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * * 1. EXTRACTIVENESS SCORE (0.4):
 * Reasoning: Fitts's Law extracts "precision." By forcing humans to 
 * trade accuracy for speed, the beneficiary (manager) extracts more 
 * output per second.
 * * 2. PERSPECTIVE SELECTION:
 * Chose the Psychologist (Law), the Designer (Tool), and the 
 * Warehouse Worker (Victim) to highlight the indexical shift from 
 * "Math" to "Design" to "Extraction".
 * * 3. CLASSIFICATION RATIONALE:
 * Analytical → Mountain: It's an unchangeable biological limit.
 * Institutional → Rope: It's used as a "nudge" for efficiency.
 * Powerless → Snare: It's a performance trap that leads to RSI.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    haptic_augmentation_limits,
    "Can haptic feedback or neural interfaces untie the Fitts's Snare (Rope) 
    by bypassing the traditional motor-loop (Mountain)?",
    resolution_mechanism("Long-term study of BMI (Brain-Machine Interface) 
    accuracy vs. traditional mouse/limb input"),
    impact("If Rope: Human throughput can expand beyond current biological 
    bandwidth. If Mountain: The law is fundamental to all consciousness-to-matter 
    translations."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * * ALTERNATIVE 1: Automated Robotic Assistance (Cobots)
 * Viability: High. Robots aren't subject to Fitts's Law in the same 
 * way; they can move with high speed and high precision.
 * Suppression: Moderate. Often rejected in low-margin industries 
 * because human labor (subject to the Snare) is currently cheaper 
 * than robotic CAPEX.
 * * CONCLUSION:
 * The existence of mechanical "Exits" (Automation) that are suppressed 
 * by labor costs confirms that for the warehouse worker, Fitts’s Law is a 
 * Snare of economic necessity, not just a biological Mountain.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 1. Load: ?- [constraint_fittss_law].
 * 2. Multi-perspective: ?- multi_index_report(fittss_law).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: fmeca_procedures_1980
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: MIL-STD-1629A - Failure Mode, Effects, and Criticality Analysis (1980)
% ============================================================================

:- module(constraint_fmeca_procedures_1980, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: fmeca_procedures_1980
 * human_readable: MIL-STD-1629A (FMECA Procedures)
 * domain: technological/military/legal
 * temporal_scope: 1980 - Present
 * spatial_scope: United States (DoD acquisition environment)
 * * SUMMARY:
 * This constraint establishes the mandatory procedures for performing a Failure 
 * [cite_start]Mode, Effects, and Criticality Analysis (FMECA) for DoD systems[cite: 64, 68]. 
 * It functions as a rigid documentation and analysis framework intended to 
 * systematically identify catastrophic and critical failure possibilities 
 * [cite_start]early in the design phase[cite: 31, 41, 65].
 * * KEY AGENTS:
 * - Junior Design Engineer: The individual who must complete the worksheets; 
 * often views the requirement as a bureaucratic hurdle.
 * - DoD Program Manager: The institutional agent who mandates the standard 
 * [cite_start]to ensure "peace, justice and progress" through system reliability[cite: 1, 25].
 * - System Safety Analyst: The observer who views FMECA as a logical 
 * necessity for managing the inherent "natural law" of mechanical failure.
 * * NARRATIVE ARC:
 * [cite_start]The FMECA starts as an "essential function" [cite: 31] intended to be a 
 * flexible "Rope" for coordination. However, due to "untimeliness" and "isolated 
 * [cite_start]performance"[cite: 39, 40], it often hardens into a "Snare" for contractors 
 * [cite_start]who must fulfill rigid worksheet requirements [cite: 182] after design 
 * decisions are already finalized.
 */

/* ==========================================================================
   2. BASE PROPERTIES (Context-Independent)
   ========================================================================== */

% Required for DR-Audit Suite
narrative_ontology:interval(fmeca_standard_era, 1980, 2026).
narrative_ontology:constraint_claim(fmeca_procedures_1980, rope).

% Base extractiveness score (0.0-1.0)
% Rationale: Moderate (0.4). While it aims for safety, it "extracts" significant 
% labor and time from contractors to satisfy procuring activity data requirements 
% [cite: 33, 45, 1056].
domain_priors:base_extractiveness(fmeca_procedures_1980, 0.4).

% Suppression score (0.0-1.0)
% Rationale: Moderate (0.5). It strictly mandates specific coding systems 
% (MIL-STD-780) [cite: 198] [cite_start]and worksheet formats[cite: 182], punishing 
% alternative risk-management styles through contract non-compliance.
domain_priors:suppression_score(fmeca_procedures_1980, 0.5).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(fmeca_procedures_1980, extractiveness, 0.4).
narrative_ontology:constraint_metric(fmeca_procedures_1980, suppression_requirement, 0.5).

% Enforcement: Requires active maintenance by the procuring activity and 
% contracting officers[cite: 109, 169].
domain_priors:requires_active_enforcement(fmeca_procedures_1980).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(fmeca_procedures_1980, department_of_defense).
constraint_beneficiary(fmeca_procedures_1980, system_safety).
constraint_victim(fmeca_procedures_1980, contractors).
constraint_victim(fmeca_procedures_1980, innovative_design_flexibility).

% Metrics for Section 1 of the Executive Summary
/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: JUNIOR DESIGN ENGINEER - Snare
   --------------------------------------------------------------------------
   
   WHO: powerless - Must complete the work without shaping the standard.
   WHEN: immediate - Focused on meeting the current project deadline.
   [cite_start]WHERE: trapped - Bound by the "Ordering Data" in the specific contract[cite: 109, 541].
   [cite_start]SCOPE: local - Focused on a single component or assembly level[cite: 154].
   
   WHY THIS CLASSIFICATION:
   The engineer sees FMECA as a coercive "Snare" of paperwork. The "chief causes" 
   [cite_start]of criticism are its "untimeliness" [cite: 39]—it feels like a post-facto 
   [cite_start]requirement that "extracts" time without improving the design[cite: 38].
   
   NARRATIVE EVIDENCE:
   "Probably the greatest criticism of the FMECA has been its limited use 
   [cite_start]in improving designs... chief causes for this have been untimeliness"[cite: 38, 39].
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    fmeca_procedures_1980,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: DOD PROGRAM MANAGER - Rope
   --------------------------------------------------------------------------
   
   [cite_start]WHO: institutional - Has the power to "tailor the requirements"[cite: 34, 1012].
   WHEN: biographical - Spanning the acquisition lifecycle (years to decades).
   [cite_start]WHERE: mobile - Can select which tasks (101-105) to impose[cite: 1028].
   [cite_start]SCOPE: national - Applies to "all designated DoD systems"[cite: 68].
   
   WHY THIS CLASSIFICATION:
   For the manager, FMECA is a "Rope" for functional coordination. It's a 
   [cite_start]tool to "tailor" [cite: 34, 1043] and ensure that various reliability 
   [cite_start]tasks are coordinated to prevent "duplication of efforts"[cite: 45].
   
   NARRATIVE EVIDENCE:
   "The FMECA must contribute meaningfully to program decision... invaluable 
   [cite_start]to those who are responsible for making program decisions"[cite: 35, 36].
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    fmeca_procedures_1980,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(national)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: SAFETY ANALYST - Mountain
   --------------------------------------------------------------------------
   
   WHO: analytical - Observer of universal failure patterns.
   [cite_start]WHEN: historical - Based on decades of engineering experience[cite: 1091, 1134].
   [cite_start]WHERE: analytical - Sees failure as an inherent property of all "items"[cite: 194, 231].
   [cite_start]SCOPE: global - Applies to the "nature of the design process itself"[cite: 32].
   
   WHY THIS CLASSIFICATION:
   The analyst sees the "potential for failure" as an unchangeable "Mountain" 
   of reality. Systematic analysis is not an option but a "logical necessity" 
   [cite_start]dictated by the laws of physics and probability[cite: 124, 150].
   
   NARRATIVE EVIDENCE:
   "FMECA is an essential function in design... [it] must be iterative to 
   [cite_start]correspond with the nature of the design process itself"[cite: 31, 32].
   -------------------------------------------------------------------------- */


constraint_indexing:constraint_classification(
    fmeca_procedures_1980,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(historical),
        exit_options(analytical),
        spatial_scope(global)
    )
) :- !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(fmeca_procedures_1980_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(fmeca_procedures_1980, Type1, context(powerless, immediate, trapped, local)),
    constraint_indexing:constraint_classification(fmeca_procedures_1980, Type2, context(institutional, biographical, mobile, national)),
    Type1 = snare,
    Type2 = rope.

test(power_extractiveness_scaling) :-
    ContextPowerless = context(powerless, immediate, trapped, local),
    ContextPowerful = context(institutional, biographical, mobile, national),
    constraint_indexing:extractiveness_for_agent(fmeca_procedures_1980, ContextPowerless, Score1),
    constraint_indexing:extractiveness_for_agent(fmeca_procedures_1980, ContextPowerful, Score2),
    Score1 > Score2.

test(tailoring_as_rope_flexibility) :-
    % Tailoring (mobile exit option) allows institutional power to view it as a Rope.
    constraint_indexing:constraint_classification(fmeca_procedures_1980, rope, context(institutional, _, mobile, _)).

:- end_tests(fmeca_procedures_1980_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * * KEY DECISIONS:
 * * 1. BASE EXTRACTIVENESS (0.4): Chosen because while FMECA is safety-critical, 
 * [cite_start]the standard admits it is often seen as a burden[cite: 38]. It extracts 
 * [cite_start]"valuable resources" [cite: 1056] in exchange for theoretical safety.
 * * 2. SUPPRESSION SCORE (0.5): The standard enforces a very specific way of 
 * [cite_start]thinking (severity categories, coding)[cite: 267, 707]. Other methods 
 * exist but are functionally "suppressed" by the acquisition contract.
 * * 3. PERSPECTIVE SELECTION: Chose the Engineer (victim of untimeliness), 
 * Manager (agent of tailoring), and Analyst (observer of failure's nature).
 * * 4. AMBIGUITIES: Resolved the "standard vs tailoring" tension by assigning 
 * "Rope" status to those with the power to tailor and "Snare" status to 
 * those forced to comply with the untailored defaults.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    fmeca_actual_impact,
    'Does FMECA actually improve design, or is its criticism as \'limited use\' inherently true?',
    resolution_mechanism('Longitudinal study of failure rates in FMECA-compliant vs non-compliant complex systems'),
    impact('If Mountain (physics-driven): safety increases. If Snare (bureaucracy-driven): only paperwork increases.'),
    confidence_without_resolution(medium)
).

omega_variable(
    tailoring_competence,
    'Is the procuring activity competent to \'tailor\' requirements appropriately, or does it default to maximum suppression?',
    resolution_mechanism('Audit of tailoring decisions across diverse DoD programs'),
    impact('If tailored: Rope. If default: Snare for all contractors.'),
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Informal Designer Intuition
 * Viability: Historically how many machines were built before formal FMEA.
 * [cite_start]Suppression: Banned by Paragraph 4.1 requiring "planned and performed" analysis[cite: 169].
 * * ALTERNATIVE 2: Purely Qualitative "Brainstorming"
 * Viability: Faster, lower "extractiveness" of labor.
 * [cite_start]Suppression: Rejected by requirements for "quantitative" criticality numbers (Cm)[cite: 853, 1090].
 * * CONCLUSION:
 * The active rejection of informal/qualitative alternatives in favor of 
 * specific worksheet formats shifts the classification from a coordination 
 * Rope to an enforced Snare for those doing the work.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

% Load: ?- [fmeca_procedures_1980].
% Run tests: ?- run_tests(fmeca_procedures_1980_tests).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: fmt_oncology_realignment_2026
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2026-02-06
% ============================================================================

:- module(constraint_fmt_oncology_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: fmt_oncology_2026
 * human_readable: FMT Immunotherapy Realignment
 * domain: health/medical
 * * SUMMARY:
 * New Phase I and II trials released in late January 2026 indicate that oral 
 * fecal microbiota transplantation (FMT) pills can reduce immunotherapy 
 * toxicity and significantly improve cancer response rates. 
 * By using healthy gut bacteria as a template, this approach transforms a 
 * dysfunctional microbiome "Snare" into a "Rope" for surviving late-stage 
 * kidney, lung, and melanoma cancers.
 * * KEY AGENTS:
 * - Cancer Patients (Metastatic/Advanced): Subject (Powerless)
 * - Research Institutes (Lawson/LHSCRI/Montreal): Beneficiary (Institutional)
 * - Medical Journalists (Ed Cara): Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Extraction is low (0.18). The shift to oral pills reduces the "extraction" 
% of patient comfort and resource-intensive colonoscopies.
domain_priors:base_extractiveness(fmt_oncology_2026, 0.18). 

% Suppression is moderate (0.45). The framework suppresses the negative 
% side effects of immunotherapy, such as nausea and diarrhea.
domain_priors:suppression_score(fmt_oncology_2026, 0.45).   

% Theater ratio is low (0.12) as the results show functional improvements 
% in clinical response rates (75-80%) over standard treatments.
domain_priors:theater_ratio(fmt_oncology_2026, 0.12).       

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(fmt_oncology_2026, extractiveness, 0.18).
narrative_ontology:constraint_metric(fmt_oncology_2026, suppression_requirement, 0.45).
narrative_ontology:constraint_metric(fmt_oncology_2026, theater_ratio, 0.12).

% Primary keys for the classification engine
% High-fidelity stakeholders
narrative_ontology:constraint_beneficiary(fmt_oncology_2026, oncological_microbiome_research).
narrative_ontology:constraint_victim(fmt_oncology_2026, standard_immunotherapy_limitations).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   ========================================================================== */

% PERSPECTIVE 1: THE PATIENT (SNARE)
% Previously, late-stage cancer patients faced a Snare: a dysfunctional 
% microbiome that either resisted immunotherapy or increased its toxicity 
% .
constraint_indexing:constraint_classification(fmt_oncology_2026, snare, 
    context(agent_power(powerless), 
            time_horizon(biographical), 
            exit_options(trapped), 
            spatial_scope(national))).

% PERSPECTIVE 2: THE CLINICIAN (ROPE)
% Researchers view oral FMT as a Rope: a coordination tool to rebuild 
% the microbiome and boost natural immune defenses.
constraint_indexing:constraint_classification(fmt_oncology_2026, rope, 
    context(agent_power(institutional), 
            time_horizon(generational), 
            exit_options(mobile), 
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (SCAFFOLD)
% Analysts view this as a Scaffold: a transitional "boon" to immunotherapy 
% until personalized microbial blueprints are fully mapped.
constraint_indexing:constraint_classification(fmt_oncology_2026, scaffold,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(global))) :-
    narrative_ontology:has_sunset_clause(fmt_oncology_2026).

% Mandatory sunset clause for the transitional Phase II research period.
narrative_ontology:has_sunset_clause(fmt_oncology_2026).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(fmt_oncology_2026_tests).

test(perspectival_gap) :-
    constraint_indexing:constraint_classification(fmt_oncology_2026, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(fmt_oncology_2026, rope, context(agent_power(institutional), _, _, _)).

test(response_rate_fidelity) :-
    domain_priors:theater_ratio(fmt_oncology_2026, TR),
    TR < 0.20.

:- end_tests(fmt_oncology_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The extraction score (0.18) is low because oral pills replace invasive 
 * enemas/colonoscopies. The response rate of 75-80% for lung 
 * cancer and melanoma patients validates the framework as a functional 
 * clinical Rope rather than a theatrical mask.
 *
 * * MANDATROPHY ANALYSIS:
 * [RESOLVED MANDATROPHY]
 * The system identifies the "Sovereignty Gap" in cancer care where patients 
 * who otherwise wouldn't respond to standard care gain a new survival 
 * pathway through the oral pill format.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_microbial_personalization,
    'Can customized FMT pills be scaled for general late-stage cancer treatment?',
    'Review of ongoing large-scale trials and quality of life Statement.',
    'Success secures the global Rope; failure returns the patient to the Snare.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(fmt_oncology_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Modeling the drift from "Invasive FMT" to "Oral Poop Pills."
% Theater ratio drops as clinical evidence replaces early experimental hype.
narrative_ontology:measurement(fmt_tr_t0, fmt_oncology_2026, theater_ratio, 0, 0.45).
narrative_ontology:measurement(fmt_tr_t5, fmt_oncology_2026, theater_ratio, 5, 0.25).
narrative_ontology:measurement(fmt_tr_t10, fmt_oncology_2026, theater_ratio, 10, 0.12).

% Extraction drops as patient drug toxicity and side effects are reduced.
narrative_ontology:measurement(fmt_ex_t0, fmt_oncology_2026, base_extractiveness, 0, 0.40).
narrative_ontology:measurement(fmt_ex_t5, fmt_oncology_2026, base_extractiveness, 5, 0.28).
narrative_ontology:measurement(fmt_ex_t10, fmt_oncology_2026, base_extractiveness, 10, 0.18).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: four_color_theorem_topological_bound
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Appel & Haken (1976) / Graph Theory / Topology
% ============================================================================

:- module(constraint_four_color_theorem, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: four_color_theorem_topological_bound
 * human_readable: The Four Color Theorem
 * domain: mathematical/technological
 * temporal_scope: 1852 - Present (Civilizational)
 * spatial_scope: Global/Abstract (Planar Graphs)
 * * SUMMARY:
 * The Four Color Theorem states that no more than four colors are required to 
 * color the regions of any map so that no two adjacent regions have the same 
 * color. It is a fundamental topological constraint on how planar space can 
 * be partitioned and connected.
 * * KEY AGENTS:
 * - The Map Region (Subject): A powerless agent whose "identity" (color) is 
 * constrained by the neighbors it touches.
 * - The Cartographer/Network Architect (Institutional): An agent who uses 
 * the theorem as a "Rope" to optimize resource allocation (frequencies, colors).
 * - The Mathematical Purist (Victim): An agent for whom the computer-assisted 
 * proof is a "Snare," extracting the "elegant human-readable proof" and 
 * replacing it with exhaustive algorithmic verification.
 * * NARRATIVE ARC:
 * The theorem functions as a "Mountain" of planar reality—a hard limit of 
 * geometry that cannot be bypassed. In wireless networking, it is a "Rope" 
 * for coordinating frequency reuse. However, for the history of mathematics, 
 * its proof acted as a "Snare," extracting the traditional "aesthetic of 
 * understanding" (extraction) and "strangling" the era of human-only 
 * verification with the first major computer-dependent proof.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================= */

% Structural Anchor for the Deferential Realism Auditor
narrative_ontology:interval(four_color_era, 1852, 2026).
narrative_ontology:constraint_claim(four_color_theorem_topological_bound, mountain).

% Base extractiveness score (0.0-1.0)
% Rationale: 0.25. The theorem "extracts" the possibility of higher-color 
% variety to enforce a lower-bound efficiency. It also "extracts" human 
% intuition in favor of computational brute force.
domain_priors:base_extractiveness(four_color_theorem_topological_bound, 0.25).

% Suppression score (0.0-1.0)
% Rationale: 0.2. It suppresses the visibility of 5-color or 6-color 
% "redundant" systems by proving they are mathematically unnecessary for 
% planar partitions.
domain_priors:suppression_score(four_color_theorem_topological_bound, 0.2).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(four_color_theorem_topological_bound, extractiveness, 0.25).
narrative_ontology:constraint_metric(four_color_theorem_topological_bound, suppression_requirement, 0.2).

% Enforcement: Emerges naturally from the topology of the plane.
domain_priors:emerges_naturally(four_color_theorem_topological_bound).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(four_color_theorem_topological_bound, frequency_allocation_engineers).
constraint_beneficiary(four_color_theorem_topological_bound, automated_theorem_provers).
constraint_victim(four_color_theorem_topological_bound, classical_human_intuition).
constraint_victim(four_color_theorem_topological_bound, map_complexity_enthusiasts).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE INDIVIDUAL MAP REGION - Mountain
   --------------------------------------------------------------------------
   
   WHO: powerless - The region has no agency over its adjacency.
   WHEN: immediate - The color constraint is true the moment the map is drawn.
   WHERE: trapped - Bound within the 2D plane.
   SCOPE: local - Can only "see" its immediate neighbors.
   
   WHY THIS CLASSIFICATION:
   For a specific region on a map, the limit of 4 colors is an absolute 
   Mountain. It cannot "choose" to be a 5th color that is distinct from its 
   neighbors if the global topology has already constrained the available 
   choices. The arithmetic of adjacency is a natural law.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    four_color_theorem_topological_bound,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE SPECTRUM MANAGER - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional - Power to allocate frequencies or design cellular grids.
   WHEN: biographical - Planning a regional or national wireless network.
   WHERE: mobile - Can adjust tower placement or boundary lines.
   SCOPE: national - Managing a country's spectrum.
   
   WHY THIS CLASSIFICATION:
   For the institutional actor, the theorem is a "Rope"—a functional 
   coordination mechanism. It provides a "standard of achievement" that 
   guarantees they never need more than 4 distinct frequency sets to 
   cover a territory without overlap, "pulling" the system toward 
   maximum efficiency.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    four_color_theorem_topological_bound,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(national)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE ELEGANCE-SEEKING MATHEMATICIAN - Snare
   --------------------------------------------------------------------------
   
   WHO: individual_moderate - Has the tools to prove but is bound by the theorem's nature.
   WHEN: historical - Spanning the 124 years between conjecture and proof.
   WHERE: constrained - No alternative but to accept a "computer-only" proof.
   SCOPE: global - Affecting the philosophy of all mathematical proof.
   
   WHY THIS CLASSIFICATION:
   For the classical theorist, the Four Color Theorem is a "Snare." It 
   "strangles" the ideal of a beautiful, human-comprehensible proof. 
   By requiring thousands of case-checkings via computer, it extracts the 
   "human element" (extraction) from the proof, "choking" the 
   tradition of Euclidean simplicity.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    four_color_theorem_topological_bound,
    snare,
    context(
        agent_power(individual_moderate),
        time_horizon(historical),
        exit_options(constrained),
        spatial_scope(global)
    )
) :- 
    domain_priors:base_extractiveness(four_color_theorem_topological_bound, E),
    E >= 0.2,
    !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(four_color_tests).

test(multi_perspective_variance) :-
    % Region -> Mountain
    constraint_indexing:constraint_classification(four_color_theorem_topological_bound, Type1, context(powerless, immediate, trapped, local)),
    % Manager -> Rope
    constraint_indexing:constraint_classification(four_color_theorem_topological_bound, Type2, context(institutional, biographical, mobile, national)),
    Type1 \= Type2.

test(intuition_extraction_penalty) :-
    % The mathematician feels the extraction of human-readability.
    Context = context(individual_moderate, historical, constrained, global),
    constraint_indexing:extractiveness_for_agent(four_color_theorem_topological_bound, Context, Score),
    Score >= 0.2.

test(natural_emergence) :-
    domain_priors:emerges_naturally(four_color_theorem_topological_bound).

:- end_tests(four_color_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * 1. EXTRACTIVENESS (0.25): 
 * Chose this because the Four Color Theorem represents the first time 
 * mathematics "extracted" the necessity of computer-aid, a major shift 
 * in the "tax" of verification.
 * 2. CLASSIFICATION: 
 * Captured the transition from a "Mountain" of geometry to a "Snare" 
 * for mathematical philosophy due to the brute-force nature of the proof.
 */

% OMEGA IDENTIFICATION
omega_variable(
    human_readable_proof_existence,
    "Does a 'Mountain' of a short, elegant human-readable proof exist for the Four Color Theorem (Scaffold)?",
    resolution_mechanism("Verification of new proof candidates against the Appel-Haken-Robertson exhaustion."),
    impact("If Yes: The current 'Snare' of computer-verification is just a Scaffold for human limits."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Map coloring on different surfaces (e.g., Torus)
 * Viability: Requires 7 colors. 
 * Suppression: The 4-color limit is only a "Mountain" for planar graphs. 
 * On a torus, it's a "Rope" that fails.
 * * ALTERNATIVE 2: 5-Color Theorem
 * Viability: Much simpler human proof exists. 
 * Suppression: Functionally "suppressed" by the more powerful (but harder) 
 * 4-color result.
 * * CONCLUSION:
 * The existence of Alternative 1 (Torus coloring) proves that the "Mountain" 
 * of 4 colors is a feature of the Plane's topology, not an absolute 
 * universal law of all space.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 1. Load: ?- [four_color_theorem_topological_bound].
 * 2. Multi-perspective: ?- multi_index_report(four_color_theorem_topological_bound).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: framing_effect
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-28
% ============================================================================

:- module(constraint_framing_effect, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:coordination_type/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: framing_effect
 * human_readable: The Framing Effect (as applied in choice architecture)
 * domain: social/political/technological
 * * SUMMARY:
 * The framing effect is a cognitive bias where people decide on options based on
 * whether the options are presented with positive or negative connotations (e.g., as a loss or as a gain).
 * While the bias itself is a feature of human cognition, this constraint models its active deployment
 * in social systems (marketing, politics) to engineer specific outcomes.
 * * KEY AGENTS:
 * - The Consumer/Voter: Subject (Powerless) whose choices are shaped by engineered frames.
 * - The Campaign Strategist/Marketer: Beneficiary (Institutional) who uses framing as a tool to coordinate behavior.
 * - The Systems Auditor: Auditor (Analytical) who observes the dual function of coordination and extraction.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(framing_effect, 0.55). % Extracts rational agency and economic value.
domain_priors:suppression_score(framing_effect, 0.50).   % Suppresses neutrally-presented information.
domain_priors:theater_ratio(framing_effect, 0.15).       % The application is highly functional, not theatrical.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(framing_effect, extractiveness, 0.55).
narrative_ontology:constraint_metric(framing_effect, suppression_requirement, 0.50).
narrative_ontology:constraint_metric(framing_effect, theater_ratio, 0.15).

% Constraint self-claim (what does the constraint claim to be?)
% Beneficiaries claim it's a tool for effective communication (coordination).
% The system sees it as a constructed mechanism.
narrative_ontology:constraint_claim(framing_effect, constructed).

% Binary flags
% The *application* of the bias requires active enforcement of the message/frame.
domain_priors:requires_active_enforcement(framing_effect).

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(framing_effect, marketers_and_strategists).
narrative_ontology:constraint_victim(framing_effect, consumers_and_voters).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For the individual, a deceptive frame is a Snare. It extracts their wealth or
% autonomy by manipulating their intuitive judgments.
constraint_indexing:constraint_classification(framing_effect, snare,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For the marketer or strategist, framing is a Rope. It is a coordination
% mechanism used to "pull" collective behavior toward a desired outcome.
constraint_indexing:constraint_classification(framing_effect, rope,
    context(agent_power(institutional),
            time_horizon(biographical),
            exit_options(arbitrage),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Analytically, the systemic application of framing is a Tangled Rope. It has a
% genuine coordination function for its architects but relies on asymmetric
% extraction from its targets and requires active enforcement (messaging campaigns)
% to maintain the desired frame.
constraint_indexing:constraint_classification(framing_effect, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(framing_effect_tests).

test(perspectival_gap_snare_to_rope) :-
    % Verify the gap between the powerless (Snare) and institutional (Rope) views.
    constraint_indexing:constraint_classification(framing_effect, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(framing_effect, rope, context(agent_power(institutional), _, _, _)).

test(analytical_view_is_tangled_rope) :-
    % Verify the analytical observer correctly identifies the hybrid nature.
    constraint_indexing:constraint_classification(framing_effect, tangled_rope, context(agent_power(analytical), _, _, _)).

test(tangled_rope_structural_properties_present) :-
    % A Tangled Rope requires all three structural properties to be present.
    narrative_ontology:constraint_beneficiary(framing_effect, _), % -> has_coordination_function
    narrative_ontology:constraint_victim(framing_effect, _),       % -> has_asymmetric_extraction
    domain_priors:requires_active_enforcement(framing_effect).

:- end_tests(framing_effect_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The core modeling decision is to distinguish the cognitive bias itself (a potential Mountain)
 * from its systemic application (a Tangled Rope). This file models the latter.
 * The base extractiveness of 0.55 reflects the significant transfer of value (economic, political)
 * from the victim to the beneficiary. The suppression score of 0.50 reflects how a dominant
 * frame actively suppresses consideration of neutral or alternative presentations of the same data.
 *
 * The Perspectival Gap is stark:
 * - The 'powerless' consumer, whose rational agency is extracted, perceives a Snare.
 * - The 'institutional' marketer, who uses it to align consumer behavior, perceives a Rope.
 * - The 'analytical' observer sees both functions operating simultaneously, which is the definition of a Tangled Rope.
 *
 * * MANDATROPHY ANALYSIS:
 * Classifying this as a pure Snare would be a mandatrophy error, as it would ignore the genuine
 * (albeit self-serving) coordination function that framing provides for institutional actors.
 * The Tangled Rope classification correctly captures this duality, preventing the system from
 * oversimplifying the mechanism as pure predation. It acknowledges that the tool works for coordination
 * precisely *because* it extracts agency from others.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_framing_effect,
    'Is the underlying cognitive bias a hard Mountain of neurology, or a malleable Rope of culture that could be untangled with training?',
    'Long-term studies of expert decision-makers trained in cognitive bias mitigation versus control groups in high-stakes environments.',
    'If Mountain, protection requires external regulation of choice architecture. If Rope, protection can be achieved through education and debiasing techniques.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(framing_effect, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% The application of framing has been a consistent tool in marketing and politics.
% The metrics are modeled as stable over the observed interval.
% Extraction > 0.46 requires temporal data.

% Theater ratio over time:
narrative_ontology:measurement(framing_effect_tr_t0, framing_effect, theater_ratio, 0, 0.15).
narrative_ontology:measurement(framing_effect_tr_t5, framing_effect, theater_ratio, 5, 0.15).
narrative_ontology:measurement(framing_effect_tr_t10, framing_effect, theater_ratio, 10, 0.15).

% Extraction over time:
narrative_ontology:measurement(framing_effect_ex_t0, framing_effect, base_extractiveness, 0, 0.55).
narrative_ontology:measurement(framing_effect_ex_t5, framing_effect, base_extractiveness, 5, 0.55).
narrative_ontology:measurement(framing_effect_ex_t10, framing_effect, base_extractiveness, 10, 0.55).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% Framing is used to standardize how information is interpreted to guide behavior.
narrative_ontology:coordination_type(framing_effect, information_standard).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: france_cordon_sanitaire_2026
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: January 27, 2026
% ============================================================================

:- module(france_cordon_sanitaire_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
domain_priors:base_extractiveness/2,
domain_priors:suppression_score/2,
domain_priors:theater_ratio/2,
domain_priors:requires_active_enforcement/1,
narrative_ontology:has_sunset_clause/1,
    narrative_ontology:constraint_metric/3,
constraint_indexing:constraint_classification/3,
narrative_ontology:interval/3.

/* ==========================================================================

1. NARRATIVE CONTEXT
========================================================================== */

/**

* CONSTRAINT IDENTIFICATION
* * constraint_id: france_cordon_sanitaire_2026


* human_readable: The "Front Républicain" (Republican Front) Cordon Sanitaire
* domain: political/social
* * SUMMARY:


* By early 2026, the Republican Front—once a functional mechanism to block the
* far-right—has transitioned into a Piton state. While mainstream parties
* continue the "theatrical" maintenance of the barrier, 53% of the public
* now opposes its continuation. The system persists through
* institutional inertia despite polling showing it no longer effectively
* coordinates a "lesser-evil" victory.
* * KEY AGENTS:


* * Jordan Bardella: The beneficiary of the "theatrical" exclusion narrative.


* * Sébastien Lecornu: Prime Minister maintaining the "Republican Arc" via 49.3.


* * The Disillusioned Voter: Views the Front as a forced choice with no exit.
*/



/* ==========================================================================
2. BASE PROPERTIES (DOMAIN PRIORS)
========================================================================== */

% Base extractiveness: Moderate (0.42)
% Rationale: The front extracts political agency from voters by narrowing
% choice to a binary that 53% of citizens now reject.
domain_priors:base_extractiveness(france_cordon_sanitaire_2026, 0.42).

% Suppression score: High (0.65)
% Rationale: Persistent use of the "Republican Arc" label to suppress the
% legitimacy of both the far-right (RN) and the radical left (LFI).
domain_priors:suppression_score(france_cordon_sanitaire_2026, 0.65).

% Theater Ratio: Critical (0.82)
% Rationale: The mechanism is categorized as a Piton due to the extreme gap
% between its procedural defense in the National Assembly and its lack of
% ideological weight in recent polling (where Bardella wins all matchups).
domain_priors:theater_ratio(france_cordon_sanitaire_2026, 0.82).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(france_cordon_sanitaire_2026, extractiveness, 0.42).
narrative_ontology:constraint_metric(france_cordon_sanitaire_2026, suppression_requirement, 0.65).
narrative_ontology:constraint_metric(france_cordon_sanitaire_2026, theater_ratio, 0.82).

domain_priors:requires_active_enforcement(france_cordon_sanitaire_2026).

/* ==========================================================================
3. INDEXED CLASSIFICATIONS (P, T, E, S)
========================================================================== */

% PERSPECTIVE 1: THE DISILLUSIONED VOTER (SNARE)
% The "Front" acts as a trap that forces a vote for an unpopular incumbent project.
constraint_indexing:constraint_classification(france_cordon_sanitaire_2026, snare,
context(agent_power(powerless),
time_horizon(biographical),
exit_options(trapped),
spatial_scope(national))).

% PERSPECTIVE 2: THE INSTITUTIONAL ELITE (ROPE)
% Viewed as the only remaining "Rope" for democratic stability.
constraint_indexing:constraint_classification(france_cordon_sanitaire_2026, rope,
context(agent_power(institutional),
time_horizon(generational),
exit_options(mobile),
spatial_scope(national))).

% PERSPECTIVE 3: THE SYSTEMS AUDITOR (PITON)
% The core function (blocking the RN) has atrophied; the barrier is now theatrical.
constraint_indexing:constraint_classification(france_cordon_sanitaire_2026, piton,
context(agent_power(analytical),
time_horizon(historical),
exit_options(analytical),
spatial_scope(national))) :-
domain_priors:theater_ratio(france_cordon_sanitaire_2026, TR), TR > 0.70.

/* ==========================================================================
4. VALIDATION TESTS
========================================================================== */

:- begin_tests(france_cordon_sanitaire_tests).

test(piton_threshold) :-
% Verify the constraint is correctly flagged as a Piton due to theater ratio.
domain_priors:theater_ratio(france_cordon_sanitaire_2026, TR),

TR > 0.70,
constraint_indexing:constraint_classification(france_cordon_sanitaire_2026, piton, _).

test(perspectival_variance) :-
% Ensure high-power agents still perceive it as a functional coordination Rope.
constraint_indexing:constraint_classification(france_cordon_sanitaire_2026, rope, context(agent_power(institutional), _, _, _)).

:- end_tests(france_cordon_sanitaire_tests).

/* ==========================================================================
5. GENERATIVE COMMENTARY
========================================================================== */

/**

* LOGIC RATIONALE:
* The 0.82 Theater Ratio is the primary driver for the Piton classification.
* While the 'cordon sanitaire' remains a formal rule of engagement in the
* European and French Parliaments, its effectiveness at the
* ballot box has collapsed, as evidenced by Bardella's projected 53-56%
* runoff victories. It is "theatrical" because politicians
* act as if the barrier holds while voters have already bypassed it.
* * MANDATROPHY RESOLUTION:


* [RESOLVED MANDATROPHY]
* The system has atrophied because the coordination benefit (preventing
* extremism) is no longer provided, yet the extraction (forced political
* consensus) remains. The Tangled Rope signature has degraded into a Piton.
*/

/* ==========================================================================
6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
omega_cordon_collapse,
'Will a mainstream "Republican" party formally align with the RN before 2027?',
'Observation of LR/Ensemble local alliances in March 2026.',
'If True, the Piton collapses; if False, theatrical maintenance continues.',
confidence_without_resolution(medium)
).

/* ==========================================================================
7. INTEGRATION HOOKS
========================================================================== */

% Required for external script parsing
narrative_ontology:interval(france_cordon_sanitaire_2026, 0, 10).

/* ==========================================================================
END OF CONSTRAINT STORY
========================================================================== */
% ============================================================================
% CONSTRAINT STORY: frankenstein_creation_hubris
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_frankenstein_creation_hubris, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: frankenstein_creation_hubris
 * human_readable: The Creator's Burden
 * domain: technological/social
 * * SUMMARY:
 * Victor Frankenstein animates a sentient being but immediately abandons it
 * out of horror. The constraint is the irreversible moral and physical
 * obligation the creator has to the creation. Victor's rejection of this
 * bond triggers a catastrophic cycle of vengeance that extracts his life,
 * sanity, and loved ones, while trapping the Creature in a state of social
 * damnation.
 * * KEY AGENTS:
 * - The Creature: Subject (Powerless)
 * - The Scientific Community: Beneficiary (Institutional)
 * - Victor Frankenstein: A powerful agent trapped by his own creation.
 * - The Analytical Observer: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
% The creation extracts the life, sanity, and loved ones of the creator, and
% extracts any possibility of social existence from the creature.
domain_priors:base_extractiveness(frankenstein_creation_hubris, 0.90).
% The secret of the creation is suppressed by Victor’s ego and fear,
% preventing any intervention or alternative resolution.
domain_priors:suppression_score(frankenstein_creation_hubris, 0.85).
% The actions are functional and consequential, not performative.
domain_priors:theater_ratio(frankenstein_creation_hubris, 0.10).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(frankenstein_creation_hubris, extractiveness, 0.90).
narrative_ontology:constraint_metric(frankenstein_creation_hubris, suppression_requirement, 0.85).
narrative_ontology:constraint_metric(frankenstein_creation_hubris, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% Victor's act is framed as a constructed effort for scientific progress.
narrative_ontology:constraint_claim(frankenstein_creation_hubris, constructed).

% Binary flags
% The constraint is enforced by the Creature's physical capabilities and
% Victor's psychological guilt.
domain_priors:requires_active_enforcement(frankenstein_creation_hubris).

% Structural property derivation hooks:
% The story, as a cautionary tale, benefits the coordination of scientific ethics.
narrative_ontology:constraint_beneficiary(frankenstein_creation_hubris, scientific_community).
% The direct victims are Victor, his family, and the Creature itself.
narrative_ontology:constraint_victim(frankenstein_creation_hubris, frankenstein_lineage).
narrative_ontology:constraint_victim(frankenstein_creation_hubris, the_creature).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE CREATURE (MOUNTAIN)
% For the Creature, social rejection based on his appearance is an immutable
% law of nature. He cannot negotiate it or escape it. It is a fixed reality.
constraint_indexing:constraint_classification(frankenstein_creation_hubris, mountain,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(global))).

% PERSPECTIVE 2: THE SCIENTIFIC COMMUNITY (ROPE)
% As a beneficiary, the scientific community uses the cautionary tale as a
% 'Rope' to coordinate ethical behavior and establish research boundaries.
% The tragedy is repurposed into a functional tool for social good.
constraint_indexing:constraint_classification(frankenstein_creation_hubris, rope,
    context(agent_power(institutional),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Analytically, the act of creation has a coordination function (advancing
% science) but also involves immense asymmetric extraction (destroying its
% creator and victims) and requires active enforcement (the Creature's revenge).
% This hybrid nature defines it as a Tangled Rope.
constraint_indexing:constraint_classification(frankenstein_creation_hubris, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

% PERSPECTIVE 4: VICTOR FRANKENSTEIN (SNARE)
% For Victor, his creation becomes a 'Snare'. It is a coercive trap of his
% own making that systematically extracts his peace, his loved ones, and
% ultimately his life, with no possibility of escape.
constraint_indexing:constraint_classification(frankenstein_creation_hubris, snare,
    context(agent_power(powerful),
            time_horizon(biographical),
            exit_options(constrained),
            spatial_scope(continental))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(frankenstein_creation_hubris_tests).

test(perspectival_gap_subject_vs_beneficiary) :-
    % Verify the gap between the Creature (powerless) and the Scientific Community (institutional).
    constraint_indexing:constraint_classification(frankenstein_creation_hubris, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(frankenstein_creation_hubris, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    assertion(TypePowerless == mountain),
    assertion(TypeInstitutional == rope),
    assertion(TypePowerless \= TypeInstitutional).

test(analytical_classification_is_tangled_rope) :-
    % Verify the analytical observer correctly identifies the hybrid nature.
    constraint_indexing:constraint_classification(frankenstein_creation_hubris, TypeAnalytical, context(agent_power(analytical), _, _, _)),
    assertion(TypeAnalytical == tangled_rope).

test(high_extraction_and_suppression) :-
    % Verify the base metrics meet the Snare/Tangled Rope thresholds.
    domain_priors:base_extractiveness(frankenstein_creation_hubris, E),
    domain_priors:suppression_score(frankenstein_creation_hubris, S),
    assertion(E >= 0.46),
    assertion(S >= 0.40).

:- end_tests(frankenstein_creation_hubris_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE: [RESOLVED MANDATROPHY]
 * The core of this story is the profound perspectival gap between the agents.
 * The Creature experiences its existence as a 'Mountain' of immutable social law.
 * The scientific community, benefiting from the lesson, sees it as a 'Rope' for
 * ethical coordination. Victor, the architect, is caught in a 'Snare' of his
 * own making.
 *
 * * MANDATROPHY ANALYSIS:
 * An analysis that only saw the extraction would label this a pure Snare. The
 * Tangled Rope classification from the analytical perspective is crucial. It
 * acknowledges that even catastrophic acts of hubris can be co-opted by
 * institutions to serve a genuine, albeit post-hoc, coordination function
 * (in this case, establishing ethical boundaries for future science). This
 * prevents misclassifying the entire structure as purely extractive and captures
 * its complex, hybrid nature.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_frankenstein_creation_hubris,
    'Is the Creature''s tragedy one of inherent nature (an inescapable Mountain of biology) or failed nurture (a Snare of social abandonment)?',
    'Comparative analysis of the text against modern developmental psychology models on attachment and social ostracization.',
    'If nature: The tragedy is deterministic and inevitable. If nurture: The tragedy is a result of moral failure and was avoidable.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(frankenstein_creation_hubris, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% The constraint's extraction intensifies as the Creature's quest for
% vengeance escalates from abandonment to murder. Theater remains low.
%
% Theater ratio over time (metric_substitution detection):
narrative_ontology:measurement(frankenstein_creation_hubris_tr_t0, frankenstein_creation_hubris, theater_ratio, 0, 0.10).
narrative_ontology:measurement(frankenstein_creation_hubris_tr_t5, frankenstein_creation_hubris, theater_ratio, 5, 0.10).
narrative_ontology:measurement(frankenstein_creation_hubris_tr_t10, frankenstein_creation_hubris, theater_ratio, 10, 0.10).

% Extraction over time (extraction_accumulation detection):
% T=0: The moment of creation/abandonment. Extraction is latent but high.
narrative_ontology:measurement(frankenstein_creation_hubris_ex_t0, frankenstein_creation_hubris, base_extractiveness, 0, 0.50).
% T=5: After the murder of William. The cycle of revenge is active.
narrative_ontology:measurement(frankenstein_creation_hubris_ex_t5, frankenstein_creation_hubris, base_extractiveness, 5, 0.80).
% T=10: The final confrontation in the Arctic. Extraction is total.
narrative_ontology:measurement(frankenstein_creation_hubris_ex_t10, frankenstein_creation_hubris, base_extractiveness, 10, 0.90).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The story functions as an enforcement mechanism for an ethical boundary.
narrative_ontology:coordination_type(frankenstein_creation_hubris, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: france_local_elections_march_2026
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_france_local_elections_march_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: france_local_elections_march_2026
 * human_readable: March 2026 French Municipal Elections
 * domain: political
 * * SUMMARY:
 * The March 15 and 22, 2026, municipal elections serve as a temporary
 * structural "Scaffold". They provide a necessary support framework for
 * political realignment, specifically for coalitions like the "Left-Wing
 * Primary" and the "Republican Front," which must hold until the post-election
 * sunset. The system also contains extractive elements, particularly for
 * independent candidates in small towns.
 * * KEY AGENTS:
 * - Independent Candidates: Subjects (Powerless)
 * - Organized Political Parties: Beneficiaries (Institutional/Organized)
 * - Systems Auditor: Observer (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Base extractiveness: Low-Moderate (0.35)
% Rationale: Local elections are high-coordination events, but the
% "Majority Premium" (a 25% seat bonus for the winning list) extracts
% disproportionate representation.
domain_priors:base_extractiveness(france_local_elections_march_2026, 0.35).

% Suppression score: Moderate (0.45)
% Rationale: The mandatory list system for small towns (<1,000 residents)
% suppresses individual/independent candidates in favor of party-list coordination.
domain_priors:suppression_score(france_local_elections_march_2026, 0.45).

% Theater Ratio: Moderate (0.30)
% Rationale: Real policy stakes (housing, security, transport) are decided,
% preventing this from being a pure Piton.
domain_priors:theater_ratio(france_local_elections_march_2026, 0.30).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(france_local_elections_march_2026, extractiveness, 0.35).
narrative_ontology:constraint_metric(france_local_elections_march_2026, suppression_requirement, 0.45).
narrative_ontology:constraint_metric(france_local_elections_march_2026, theater_ratio, 0.30).

% Constraint self-claim: The system is presented as a necessary constructed
% framework for democratic representation.
narrative_ontology:constraint_claim(france_local_elections_march_2026, constructed).

% Binary flags
narrative_ontology:has_sunset_clause(france_local_elections_march_2026).
domain_priors:requires_active_enforcement(france_local_elections_march_2026).

% Structural property derivation hooks:
% Beneficiaries are the parties that leverage the system for coordination.
narrative_ontology:constraint_beneficiary(france_local_elections_march_2026, organized_political_parties).
% Victims are those excluded by the mandatory list system.
narrative_ontology:constraint_victim(france_local_elections_march_2026, independent_local_candidates).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE INDEPENDENT CANDIDATE (SNARE)
% The new mandatory list system blocks individual entries in small communes.
% χ = 0.35 * π(powerless, 1.5) * σ(local, 0.8) = 0.42. Borderline, but high
% suppression (0.45) pushes it to Snare for the trapped agent.
constraint_indexing:constraint_classification(france_local_elections_march_2026, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE INSTITUTIONAL PARTY (ROPE)
% A coordination tool for "counting mayors" and building the 2027 presidential base.
% χ = 0.35 * π(institutional, -0.2) = -0.07. Felt as pure coordination.
constraint_indexing:constraint_classification(france_local_elections_march_2026, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE POLITICAL ARCHITECT (SCAFFOLD)
% Temporary coordination that sunsets immediately after the second round.
% χ = 0.35 * π(organized, 0.4) * σ(national, 1.0) = 0.14. Low felt extraction.
constraint_indexing:constraint_classification(france_local_elections_march_2026, scaffold,
    context(agent_power(organized),
            time_horizon(immediate),
            exit_options(constrained),
            spatial_scope(national))) :-
    narrative_ontology:has_sunset_clause(france_local_elections_march_2026).

% PERSPECTIVE 4: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The system has a clear coordination function (beneficiaries), asymmetric
% extraction (victims), and requires active enforcement. This is the definition
% of a Tangled Rope.
% χ = 0.35 * π(analytical, 1.15) * σ(global, 1.2) = 0.483.
constraint_indexing:constraint_classification(france_local_elections_march_2026, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(france_local_elections_march_2026_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(france_local_elections_march_2026, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(france_local_elections_march_2026, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(scaffold_sunset_clause) :-
    % Ensure Scaffold classification is valid only under the sunset clause.
    narrative_ontology:has_sunset_clause(france_local_elections_march_2026),
    constraint_indexing:constraint_classification(france_local_elections_march_2026, scaffold, context(agent_power(organized),_,_,_)).

test(tangled_rope_conditions_met) :-
    % Verify the analytical observer correctly identifies a Tangled Rope.
    domain_priors:requires_active_enforcement(france_local_elections_march_2026),
    narrative_ontology:constraint_beneficiary(france_local_elections_march_2026, _),
    narrative_ontology:constraint_victim(france_local_elections_march_2026, _),
    constraint_indexing:constraint_classification(france_local_elections_march_2026, tangled_rope, context(agent_power(analytical),_,_,_)).

:- end_tests(france_local_elections_march_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The 2026 local elections are a classic hybrid constraint. For political
 * architects, they are a 'Scaffold' providing the 500-mayoral endorsements
 * required for the 2027 presidential race. Once the second round concludes,
 * the coordination lists dissolve or harden, fulfilling the sunset condition.
 * For institutional parties, it's a pure 'Rope' for consolidating power.
 * However, for independent candidates in small towns, the mandatory list
 * system is a 'Snare' that suppresses their participation.
 *
 * PERSPECTIVAL GAP:
 * The gap is stark: institutional parties see a coordination tool (Rope),
 * while powerless independents see an extractive barrier (Snare). The
 * analytical view resolves this by classifying it as a 'Tangled Rope'—a
 * system with both genuine coordination benefits and asymmetric extraction.
 *
 * MANDATROPHY ANALYSIS:
 * [RESOLVED MANDATROPHY]
 * The system avoids 'Piton' status because of the high local policy weight.
 * The 'Tangled Rope' classification from the analytical perspective correctly
 * captures the dual nature of the system, preventing a misclassification as
 * either pure coordination (Rope) or pure extraction (Snare).
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_france_local_elections_march_2026,
    'Will LFI maintain a separate list in the second round in Paris, splitting the left-wing vote?',
    'Second-round alliance results published between March 16-22, 2026.',
    'If True, right-wing (Dati) victory probability increases significantly. If False, a unified Left likely wins Paris.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(france_local_elections_march_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data is not required for this constraint.
% The base_extractiveness (0.35) is below the 0.46 threshold that mandates
% lifecycle drift tracking.

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type: Elections are a primary mechanism for allocating the
% resource of political power and representation.
narrative_ontology:coordination_type(france_local_elections_march_2026, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: fundamental_theorem_of_algebra
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Fundamental Theorem of Algebra (Gauss/Argand/d'Alembert)
% ============================================================================

:- module(constraint_fta, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: fundamental_theorem_of_algebra
 * human_readable: Fundamental Theorem of Algebra (FTA)
 * domain: mathematical
 * temporal_scope: 1799 - Present (Civilizational)
 * spatial_scope: Global/Abstract (Complex Plane)
 * * SUMMARY:
 * The FTA states that every non-constant single-variable polynomial with complex 
 * coefficients has at least one complex root. In terms of constraints, it 
 * establishes the "completeness" of the complex number system, ensuring that 
 * algebraic equations of degree n always yield n solutions.
 * * KEY AGENTS:
 * - The Polynomial (Subject): The passive mathematical object whose roots 
 * are predestined by its coefficients and degree.
 * - The Numerical Analyst (Institutional): An agent using the theorem as a 
 * guarantee to build robust solvers (e.g., Jenkins-Traub or Durand-Kerner).
 * - The "Real" Number Purist (Victim): An agent constrained to the real line, 
 * for whom the FTA acts as an invasive force requiring the use of "imaginary" numbers.
 * * NARRATIVE ARC:
 * The FTA begins as a "Mountain" of natural law—an inescapable truth of 
 * mathematical reality. For practitioners, it functions as a "Rope," 
 * providing a coordination mechanism for engineering stability and 
 * signal processing. However, for those trapped in lower-dimensional 
 * number systems (like the Reals), it acts as a "Snare," proving that 
 * their system is "incomplete" and forcing the extraction of cognitive 
 * labor to navigate the complex plane.
 */

/* ==========================================================================
   2. BASE PROPERTIES
   ========================================================================== */

% Required for DR-Audit Suite
narrative_ontology:interval(fta_era, 1799, 2026).
narrative_ontology:constraint_claim(fundamental_theorem_of_algebra, mountain).

% Base extractiveness: 0.1
% Rationale: Mathematical truths are generally non-extractive, but the FTA 
% "extracts" the possibility of rootless polynomials to provide a stable system.
domain_priors:base_extractiveness(fundamental_theorem_of_algebra, 0.1).

% Suppression score: 0.2
% Rationale: It suppresses the existence of "unsolvable" polynomials within 
% its domain, rendering alternative "rootless" algebraic universes invalid.
domain_priors:suppression_score(fundamental_theorem_of_algebra, 0.2).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(fundamental_theorem_of_algebra, extractiveness, 0.1).
narrative_ontology:constraint_metric(fundamental_theorem_of_algebra, suppression_requirement, 0.2).

% Enforcement: Emerges naturally from the axioms of the complex field.
domain_priors:emerges_naturally(fundamental_theorem_of_algebra).

% Metrics
% Beneficiaries & Victims
constraint_beneficiary(fundamental_theorem_of_algebra, control_engineers).
constraint_beneficiary(fundamental_theorem_of_algebra, complexity_theorists).
constraint_victim(fundamental_theorem_of_algebra, real_variable_simplicity).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE POLYNOMIAL ITERATE - Mountain
   --------------------------------------------------------------------------
   WHO: powerless - The polynomial cannot "choose" to have no roots.
   WHEN: immediate - The root exists at the moment the polynomial is defined.
   WHERE: trapped - Bound within the complex plane C.
   SCOPE: local - Immediate neighborhood of the roots.
   
   WHY THIS CLASSIFICATION:
   For the mathematical object, the FTA is a "Mountain." There are zero degrees 
   of freedom; the existence of the root is a fixed, unchangeable law of its 
   being.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    fundamental_theorem_of_algebra,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE CONTROL SYSTEMS ENGINEER - Rope
   --------------------------------------------------------------------------
   WHO: institutional - Power to design filters and feedback loops.
   WHEN: biographical - Spanning the operational life of a machine.
   WHERE: mobile - Can adjust coefficients to move roots (poles) for stability.
   SCOPE: global - Applicable across all linear time-invariant systems.
   
   WHY THIS CLASSIFICATION:
   For the engineer, the FTA is a "Rope." It is a functional tool that 
   guarantees a solution exists, allowing them to coordinate the 
   stability of physical systems (ensuring poles stay in the left-half plane).
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    fundamental_theorem_of_algebra,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE STUDENT OF REAL ANALYSIS - Snare
   --------------------------------------------------------------------------
   WHO: powerless - Subject to the curriculum and the limits of R.
   WHEN: immediate - Facing the failure of x^2 + 1 = 0 on the real line.
   WHERE: constrained - Knowing a solution exists "elsewhere" but unable to see it.
   SCOPE: local - A specific homework problem.
   
   WHY THIS CLASSIFICATION:
   When confined to Real numbers, the FTA is a "Snare." It proves the 
   incompleteness of the student's reality, "strangling" the simplicity of 
   the number line and forcing a transition into a higher-dimensional 
   complexity that they may not be prepared for.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    fundamental_theorem_of_algebra,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(local)
    )
) :- 
    domain_priors:base_extractiveness(fundamental_theorem_of_algebra, E),
    E >= 0.1,
    !.

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(fta_tests).

test(completeness_variance) :-
    % Subject -> Mountain
    constraint_indexing:constraint_classification(fundamental_theorem_of_algebra, Type1, context(powerless, immediate, trapped, local)),
    % Engineer -> Rope
    constraint_indexing:constraint_classification(fundamental_theorem_of_algebra, Type2, context(institutional, biographical, mobile, global)),
    Type1 = mountain,
    Type2 = rope.

test(extraction_of_possibility) :-
    % Even low extraction is felt when the agent is trapped.
    constraint_indexing:extractiveness_for_agent(fundamental_theorem_of_algebra, context(powerless, immediate, trapped, local), Score),
    Score > 0.05.

test(natural_emergence) :-
    domain_priors:emerges_naturally(fundamental_theorem_of_algebra).

:- end_tests(fta_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * * KEY DECISIONS:
 * 1. PERSPECTIVE SELECTION: Chose the "Student of Real Analysis" as the 
 * powerless agent to highlight the "Snare" aspect—the realization that 
 * one's current system is lacking.
 * 2. EXTRACTIVENESS: Set at 0.1. While math is a "gift," the FTA effectively 
 * forbids certain mathematical structures (non-closed algebraic fields 
 * over C), which is a form of structural extraction.
 * 3. SUPPRESSION: Set at 0.2 because the FTA renders the "search for 
 * rootless complex polynomials" a futile and invisible path.
 */

% OMEGA IDENTIFICATION
omega_variable(
    constructive_finding_complexity,
    "Does the 'Rope' of existence help find roots, or is it a 'Snare' of unreachable solutions?",
    resolution_mechanism("Comparison of search time for degree-1000 polynomials across different fields."),
    impact("If unsolvable: Snare. If solvable: Rope."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Real-only Algebra
 * Viability: The world before the 16th century.
 * Suppression: Ineffective for describing vibration, rotation, or stability.
 * Evidence: The existence of x^2 + 1 = 0.
 * * ALTERNATIVE 2: Quaternions / Octonions
 * Viability: Higher dimensional algebras.
 * Suppression: The FTA only applies to commutative fields; non-commutative 
 * systems are "suppressed" by the FTA's dominance in standard curriculum.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Load: ?- [fundamental_theorem_of_algebra].
% Run: ?- constraint_indexing:multi_index_report(fundamental_theorem_of_algebra).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */


% --- v3.1 Indexical Relativity Stubs (Fleet Repair) ---
constraint_indexing:constraint_classification(fnudamental_theorem_of_algebra, mountain, agent_power(analytical)).
constraint_indexing:constraint_classification(fnudamental_theorem_of_algebra, rope, agent_power(institutional)).
constraint_indexing:constraint_classification(fnudamental_theorem_of_algebra, snare, agent_power(powerless)).
% ============================================================================
% CONSTRAINT STORY: future_dsm_integration
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-05-21
% ============================================================================

:- module(constraint_future_dsm_integration, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: future_dsm_integration
 * human_readable: Future DSM Strategic Vision (SCE-DoH & Intersectionality)
 * domain: technological/political
 * * SUMMARY:
 * The American Psychiatric Association (APA) has empaneled a subcommittee to 
 * integrate socioeconomic, cultural, and environmental determinants (SCE-DoH) 
 * and intersectionality into the DSM. This marks a transition from 
 * a focus on isolated symptoms to a framework accounting for systemic 
 * oppression, economic stability, and built environments as causal and 
 * prognostic factors in mental health.
 * * KEY AGENTS:
 * - Minoritized/Diverse Patients: Subject (Powerless)
 * - APA / Future DSM Strategic Committee: Beneficiary (Institutional)
 * - Future DSM Strategic Committee Subcommittee: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
% Extraction is moderate-high (0.55). The historical lack of context extracts 
% health equity by ignoring systemic risk and protective factors.
domain_priors:base_extractiveness(future_dsm_integration, 0.55). 

% Suppression is high (0.70). Traditional diagnostic frameworks suppress 
% lived experience in favor of standardized symptomatology.
domain_priors:suppression_score(future_dsm_integration, 0.70).   

% Theater ratio is moderate (0.40). Existing V and Z codes provide a 
% theatrical proxy for context without consistent clinical integration.
domain_priors:theater_ratio(future_dsm_integration, 0.40).       

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(future_dsm_integration, extractiveness, 0.55).
narrative_ontology:constraint_metric(future_dsm_integration, suppression_requirement, 0.70).
narrative_ontology:constraint_metric(future_dsm_integration, theater_ratio, 0.40).

% Constraint self-claim (what does the constraint claim to be?)
% The APA frames this as a coordination effort to standardize diagnostic criteria.
narrative_ontology:constraint_claim(future_dsm_integration, coordination).

% Binary flags
% Required for Tangled Rope classification. The diagnostic framework requires
% active maintenance and defense against alternative, less structured models.
domain_priors:requires_active_enforcement(future_dsm_integration).

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
narrative_ontology:constraint_beneficiary(future_dsm_integration, psychiatric_research_institutions).
narrative_ontology:constraint_victim(future_dsm_integration, historically_underserved_populations).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For patients in marginalized communities, the lack of context-sensitive 
% diagnosis is a Snare: a trap where structural disadvantages are 
% misidentified as individual pathology.
constraint_indexing:constraint_classification(future_dsm_integration, snare, 
    context(agent_power(powerless), 
            time_horizon(biographical), 
            exit_options(trapped), 
            spatial_scope(global))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The APA views the integration as a Rope: a coordination tool to 
% establish a common language and common criteria across diverse 
% stakeholders and cultures.
constraint_indexing:constraint_classification(future_dsm_integration, rope, 
    context(agent_power(institutional), 
            time_horizon(generational), 
            exit_options(mobile), 
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Analysts view the current transition as a Tangled Rope: Genuine 
% coordination for diagnostic equity mixed with asymmetric extraction 
% of patient data for risk-adjusted modeling.
constraint_indexing:constraint_classification(future_dsm_integration, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(future_dsm_integration_tests).

test(perspectival_gap) :-
    constraint_indexing:constraint_classification(future_dsm_integration, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(future_dsm_integration, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(extraction_threshold) :-
    narrative_ontology:constraint_metric(future_dsm_integration, extractiveness, E),
    E >= 0.46.

test(tangled_rope_structural_properties) :-
    % Verify all three conditions for Tangled Rope are met.
    domain_priors:requires_active_enforcement(future_dsm_integration),
    narrative_ontology:constraint_beneficiary(future_dsm_integration, _), % Derives has_coordination_function
    narrative_ontology:constraint_victim(future_dsm_integration, _). % Derives has_asymmetric_extraction

:- end_tests(future_dsm_integration_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The extraction score (0.55) reflects the "Sovereignty Gap" in mental 
 * health, where structural disadvantages (housing, poverty, racism) 
 * create vulnerabilities that current frameworks fail to quantify 
 * adequately. The shift toward "Risk-Adjusted Diagnostic Models" 
 * acknowledges that two patients with the same symptoms may warrant 
 * different intensities of care based on environmental stressors. The Tangled
 * Rope classification is critical here, as it requires active enforcement to
 * maintain its dominance, has a clear coordination function (standardizing
 * diagnostics), and produces asymmetric outcomes (extracting value from
 * marginalized patient data while pathologizing their context).
 *
 * * MANDATROPHY ANALYSIS:
 * [RESOLVED MANDATROPHY]
 * The system identifies the Tangled Rope by distinguishing between the 
 * functional aim of "Diagnostic Accuracy" and the extractive burden 
 * placed on underfunded health systems to collect SCE-DoH data. Without the
 * Tangled Rope type, this would be misclassified as a pure Snare, missing
 * the genuine coordination utility that gives the system its institutional
 * resilience.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_future_dsm_integration,
    'Can SCE-DoH integration add clinical value without overburdening practice?',
    'Analysis of scalable components and monitorable objective pilots.',
    'Success creates a functional global Rope; failure results in a theatrical Piton.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(future_dsm_integration, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection (metric_substitution,
% extraction_accumulation) by providing measurements at multiple time points.
% Required for high-extraction constraints (base_extractiveness > 0.46).

% Theater ratio over time (modeling the drift from V/Z codes to integrated screening)
narrative_ontology:measurement(future_dsm_integration_tr_t0, future_dsm_integration, theater_ratio, 0, 0.60).
narrative_ontology:measurement(future_dsm_integration_tr_t5, future_dsm_integration, theater_ratio, 5, 0.45).
narrative_ontology:measurement(future_dsm_integration_tr_t10, future_dsm_integration, theater_ratio, 10, 0.40).

% Extraction over time (reflecting the accumulation of contextual evidence)
narrative_ontology:measurement(future_dsm_integration_ex_t0, future_dsm_integration, base_extractiveness, 0, 0.30).
narrative_ontology:measurement(future_dsm_integration_ex_t5, future_dsm_integration, base_extractiveness, 5, 0.48).
narrative_ontology:measurement(future_dsm_integration_ex_t10, future_dsm_integration, base_extractiveness, 10, 0.55).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The DSM's primary function is to create a common language for diagnosis.
narrative_ontology:coordination_type(future_dsm_integration, information_standard).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */