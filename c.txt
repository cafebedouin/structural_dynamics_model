% ============================================================================
% CONSTRAINT STORY: c_physical_blue_wavelength
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_c_physical_blue_wavelength, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: c_physical_blue_wavelength
 * human_readable: The Physical Wavelength of Blue Light
 * domain: scientific/physical
 * * SUMMARY:
 * The perception of "blue" is constrained by the physical properties of the
 * electromagnetic spectrum, specifically light with a wavelength of ~450-495nm.
 * This is a fundamental, unchangeable property of the universe as we know it.
 * It is a classic example of a Mountain: a natural law with zero degrees of
 * freedom for all agents, regardless of their power or perspective.
 * * KEY AGENTS:
 * - Human Observer: Subject (Powerless against physics)
 * - Display Manufacturer: Institutional Agent (Also powerless against the law itself, though they can build standards upon it)
 * - Physicist: Auditor (Analyzes the mechanics of light)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Mountains have near-zero extraction (it's a law, not a tax) and high suppression.
domain_priors:base_extractiveness(c_physical_blue_wavelength, 0.02).
domain_priors:suppression_score(c_physical_blue_wavelength, 0.98).   % High suppression of alternatives (physics is non-negotiable).
domain_priors:theater_ratio(c_physical_blue_wavelength, 0.0).        % Purely functional physical law, zero theater.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(c_physical_blue_wavelength, extractiveness, 0.02).
narrative_ontology:constraint_metric(c_physical_blue_wavelength, suppression_requirement, 0.98).
narrative_ontology:constraint_metric(c_physical_blue_wavelength, theater_ratio, 0.0).

% Constraint self-claim (what does the constraint claim to be?)
% A physical law is the canonical example of a natural_law claim.
narrative_ontology:constraint_claim(c_physical_blue_wavelength, natural_law).

% This constraint is a physical law; it has no beneficiaries or victims in the
% Deferential Realism sense, as there is no asymmetric extraction. It also
% requires no active enforcement. These facts are omitted as they are not applicable.

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   This is a uniform-type constraint (Mountain-only). The classification is
   invariant across all perspectives because the base extractiveness is
   negligible and the constraint is a physical law.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (MOUNTAIN)
% To the observer, the sky is blue due to Rayleigh scattering; this cannot be
% changed or negotiated.
constraint_indexing:constraint_classification(c_physical_blue_wavelength, mountain,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(universal))).

% PERSPECTIVE 2: THE INSTITUTION (MOUNTAIN)
% A standards body (e.g., defining sRGB) cannot change the physics of blue light.
% They can only build a coordination standard (a Rope) that REFERENCES this Mountain.
% From their perspective, the physical law itself remains a Mountain.
constraint_indexing:constraint_classification(c_physical_blue_wavelength, mountain,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (MOUNTAIN)
% The physicist observes a fundamental, non-negotiable law of nature.
constraint_indexing:constraint_classification(c_physical_blue_wavelength, mountain,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(universal))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(c_physical_blue_wavelength_tests).

test(uniformity_is_mountain) :-
    % Verify this is a uniform-type constraint, classifying as Mountain from all key perspectives.
    constraint_indexing:constraint_classification(c_physical_blue_wavelength, mountain, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(c_physical_blue_wavelength, mountain, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(c_physical_blue_wavelength, mountain, context(agent_power(analytical), _, _, _)).

test(threshold_validation) :-
    % Verify the constraint adheres to the canonical Mountain thresholds.
    config:param(extractiveness_metric_name, ExtMetricName),
    config:param(suppression_metric_name, SuppMetricName),
    narrative_ontology:constraint_metric(c_physical_blue_wavelength, ExtMetricName, E),
    narrative_ontology:constraint_metric(c_physical_blue_wavelength, SuppMetricName, S),
    E =< 0.15, % Mountain extraction threshold
    S >= 0.90. % High suppression is characteristic of physical laws

:- end_tests(c_physical_blue_wavelength_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This constraint has been corrected to be a uniform-type Mountain. The original
 * file made a category error by conflating the physical law (the wavelength of
 * blue light) with a technological standard built upon it (e.g., sRGB color
 * primaries). A physical law is always a Mountain; it has negligible extraction
 * and its suppression of alternatives is near-total and requires no enforcement.
 *
 * A technological standard like sRGB would be a *separate* constraint, likely a
 * Rope, that has a network dependency on this Mountain (see Section 9).
 * By reclassifying this as a pure Mountain, the erroneous `tangled_rope`
 * classification and the associated linter errors (missing beneficiary, victim,
 * and enforcement) are resolved. The constraint is invariant across all
 * perspectives because no agent can alter a law of physics.
 *
 * MANDATROPHY ANALYSIS:
 * [RESOLVED MANDATROPHY] This constraint is a Mountain. Mandatrophy, the misidentification
 * of extraction as coordination, is not a risk here because the base extractiveness (0.02)
 * is well below any threshold for a Snare or Tangled Rope. The system correctly
 * identifies this as a natural law.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_blue_qualia,
    'Is the subjective experience of blue (qualia) a physical Mountain derived from this constraint, or a constructed Snare of neuro-linguistic programming?',
    'Advances in the hard problem of consciousness; empirical studies on qualia across different linguistic groups.',
    'If qualia is a Mountain, color perception is universal. If a Snare, it implies perception can be manipulated or is culturally relative.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(c_physical_blue_wavelength, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data is included for completeness, but as a physical law, its
% properties are static over human timescales. Extraction is below the 0.46
% threshold requiring this data, but its inclusion demonstrates stability.

% Theater ratio remains zero (Physical laws do not perform "theater")
narrative_ontology:measurement(blue_tr_t0, c_physical_blue_wavelength, theater_ratio, 0, 0.0).
narrative_ontology:measurement(blue_tr_t5, c_physical_blue_wavelength, theater_ratio, 5, 0.0).
narrative_ontology:measurement(blue_tr_t10, c_physical_blue_wavelength, theater_ratio, 10, 0.0).

% Extraction remains negligible (Nature does not collect rent)
narrative_ontology:measurement(blue_ex_t0, c_physical_blue_wavelength, base_extractiveness, 0, 0.02).
narrative_ontology:measurement(blue_ex_t5, c_physical_blue_wavelength, base_extractiveness, 5, 0.02).
narrative_ontology:measurement(blue_ex_t10, c_physical_blue_wavelength, base_extractiveness, 10, 0.02).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% As a physical law, this constraint has no coordination function itself, so
% coordination_type is not declared. However, it serves as a foundation for
% other, human-constructed constraints.

% Network relationships (structural influence edges)
% This physical law (Mountain) enables the creation of technological standards (Ropes).
narrative_ontology:affects_constraint(c_physical_blue_wavelength, c_tech_srgb_standard).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: canada_goose_realignment_2026
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2023-10-27
% ============================================================================

:- module(constraint_canada_goose_realignment_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: canada_goose_realignment_2026
 * human_readable: Canada Goose Strategic Realignment Under New Leadership (2026)
 * domain: economic
 * * SUMMARY:
 * In early 2026, luxury brand Canada Goose appointed Patrick Bourke as President of North America.
 * This move signals a strategic shift focusing on expanding the brand's direct-to-consumer retail
 * footprint while implementing significant cost management and operational efficiency measures.
 * The constraint represents this temporary, top-down strategic framework intended to "reignite brand heat"
 * and improve profitability over a defined fiscal period.
 * * KEY AGENTS:
 * - Retail Employee: Subject (Powerless)
 * - Investors & Executives: Beneficiary (Institutional)
 * - Market Analyst: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(canada_goose_realignment_2026, 0.25). % Moderate extraction via luxury pricing margins.
domain_priors:suppression_score(canada_goose_realignment_2026, 0.15).   % Low suppression; consumers have many alternative brands.
domain_priors:theater_ratio(canada_goose_realignment_2026, 0.60).       % High focus on "brand heat" and marketing over pure function.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(canada_goose_realignment_2026, extractiveness, 0.25).
narrative_ontology:constraint_metric(canada_goose_realignment_2026, suppression_requirement, 0.15).
narrative_ontology:constraint_metric(canada_goose_realignment_2026, theater_ratio, 0.60).

% Constraint self-claim (what does the constraint claim to be?)
narrative_ontology:constraint_claim(canada_goose_realignment_2026, coordination).

% Binary flags
narrative_ontology:has_sunset_clause(canada_goose_realignment_2026). % The strategy is tied to a specific fiscal period.

% Structural property derivation hooks:
% has_coordination_function/1 is DERIVED from constraint_beneficiary/2
narrative_ontology:constraint_beneficiary(canada_goose_realignment_2026, investors_and_executives).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (MOUNTAIN)
% A retail employee experiences the new corporate strategy as an unchangeable,
% top-down directive. They have no power to alter it and limited exit options,
% making it feel like a Mountain of corporate policy.
constraint_indexing:constraint_classification(canada_goose_realignment_2026, mountain,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Investors and executives view the strategy as a pure coordination mechanism (Rope)
% to align company resources, manage costs, and expand market presence for
% increased profitability. For them, it is a tool with low perceived extraction.
constraint_indexing:constraint_classification(canada_goose_realignment_2026, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (SCAFFOLD)
% An external market analyst, recognizing the temporary nature of the fiscal
% strategy (has_sunset_clause) and its coordination function for beneficiaries,
% classifies it as a Scaffold—a temporary structure to support corporate growth.
constraint_indexing:constraint_classification(canada_goose_realignment_2026, scaffold,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(canada_goose_realignment_2026_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(canada_goose_realignment_2026, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(canada_goose_realignment_2026, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    assertion(TypePowerless == mountain),
    assertion(TypeInstitutional == rope),
    TypePowerless \= TypeInstitutional.

test(scaffold_conditions_met) :-
    % Verify that the analytical classification is Scaffold and the necessary conditions are met.
    constraint_indexing:constraint_classification(canada_goose_realignment_2026, scaffold, context(agent_power(analytical), _, _, _)),
    assertion(narrative_ontology:has_sunset_clause(canada_goose_realignment_2026)),
    assertion(narrative_ontology:constraint_beneficiary(canada_goose_realignment_2026, _)).

:- end_tests(canada_goose_realignment_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This constraint models a temporary corporate strategy. The base extractiveness (0.25) is moderate,
 * reflecting luxury good profit margins, while suppression (0.15) is low due to a competitive market.
 * The key feature is the `has_sunset_clause`, which makes the `Scaffold` classification possible.
 *
 * The Perspectival Gap is significant:
 * - For an employee (powerless), the strategy is an immutable fact of their job, a Mountain.
 * - For an investor (institutional), it's a beneficial coordination tool, a Rope.
 * - For an analyst (analytical), its temporary and goal-oriented nature makes it a Scaffold.
 *
 * This case correctly avoids a Tangled Rope or Snare classification because the extraction is low and
 * there isn't a clearly defined, coerced victim group in the model.
 *
 * [RESOLVED MANDATROPHY]: The low extraction score (0.25) means Mandatrophy resolution is not required.
 * The system correctly identifies the coordination function for beneficiaries without misclassifying
 * it as pure extraction.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_canada_goose_realignment_2026,
    'Will the "temporary" cost-management measures become permanent, causing the constraint to drift from a Scaffold to a Tangled Rope?',
    'Analysis of corporate strategy and operational budgets in subsequent fiscal years after the stated sunset period.',
    'If temporary (True), the Scaffold classification holds. If permanent (False), the constraint has drifted to a Tangled Rope, with employees and suppliers becoming victims of sustained extraction.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(canada_goose_realignment_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data is not required as base_extractiveness (0.25) is below the 0.46 threshold.

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
narrative_ontology:coordination_type(canada_goose_realignment_2026, resource_allocation).

% Network relationships (structural influence edges)
% This corporate strategy influences the labor market within its sector.
narrative_ontology:affects_constraint(canada_goose_realignment_2026, luxury_retail_labor_market).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: canal_panama_influence
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2024-02-29
% ============================================================================

:- module(constraint_canal_panama_influence, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: canal_panama_influence
 *   human_readable: Geopolitical Influence over Panama Canal
 *   domain: political
 * * SUMMARY:
 *   The Panama Canal, a crucial global trade route, is subject to a geopolitical struggle for influence between the US and China, with Swiss companies playing a key role. The constraint involves the exertion of influence to control and benefit from the canal's operations and strategic value.
 * * KEY AGENTS:
 * - Panama: Subject (Powerless)
 * - China/US: Beneficiary (Institutional)
 * - Global Trade System: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(canal_panama_influence, 0.6). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(canal_panama_influence, 0.7).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(canal_panama_influence, 0.3).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(canal_panama_influence, extractiveness, 0.6).
narrative_ontology:constraint_metric(canal_panama_influence, suppression_requirement, 0.7).
narrative_ontology:constraint_metric(canal_panama_influence, theater_ratio, 0.3).

% Binary flags
% narrative_ontology:has_sunset_clause(canal_panama_influence).      % Mandatory if Scaffold
domain_priors:requires_active_enforcement(canal_panama_influence). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(canal_panama_influence, [china, usa]).
narrative_ontology:constraint_victim(canal_panama_influence, panama).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE/MOUNTAIN)
% High extraction felt as an immutable limit or predatory trap.
% NOTE: This may be upgraded to 'organized' power if a critical mass of victims exists.
%
% UNIFORM-TYPE EXCEPTION: For natural law constraints (mountain-only) or pure
% coordination constraints (rope-only), perspectives 1 and 2 may use any power
% atoms — the classification is the same from all perspectives.  Include at
% least 2-3 perspectives to demonstrate the invariance.
constraint_indexing:constraint_classification(canal_panama_influence, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Viewed as essential infrastructure or coordination.
constraint_indexing:constraint_classification(canal_panama_influence, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER
% Default analytical context (civilizational/analytical/global).
% This perspective is used by the bridge to derive constraint_claim.
% Type should reflect what the metrics compute: mountain, rope, tangled_rope, snare, scaffold, or piton.
constraint_indexing:constraint_classification(canal_panama_influence, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(canal_panama_influence_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(canal_panama_influence, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(canal_panama_influence, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(threshold_validation) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(canal_panama_influence, ExtMetricName, E),
    (E =< 0.05 -> true ; E >= 0.46). % Ensures it's either a Mountain or high-extraction Snare/Tangled.

:- end_tests(canal_panama_influence_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The Panama Canal is viewed as a Snare by Panama due to the pressure and extraction from larger powers. The US and China perceive it as a Rope because it facilitates global trade and benefits their economies. From an analytical perspective, it is a Tangled Rope because it provides a coordination function for global trade, but simultaneously allows for asymmetric extraction of benefits by powerful nations, especially via influence over canal administration and related infrastructure. The suppression score is high because Panama's agency is significantly constrained in this dynamic.
 * * MANDATROPHY ANALYSIS:
 * The Tangled Rope classification prevents mislabeling as pure extraction (Snare) because it acknowledges the coordination function of the canal for global trade. It also acknowledges that this coordination comes with an inherent level of coercion and influence being exerted on Panama, preventing a simple Rope classification.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_canal_panama_influence,
    'Will Panama be able to diversify its economic dependence on the canal and assert greater sovereign control?',
    'Future economic diversification policies and diplomatic efforts by Panama.',
    'If True: Reduced asymmetric extraction; Canal as a Rope. If False: Continued Snare dynamic.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(canal_panama_influence, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection (metric_substitution,
% extraction_accumulation) by providing measurements at multiple time points.
% Model how the constraint intensified or changed across the interval.
%
% Required for high-extraction constraints (base_extractiveness > 0.46).
% Use at least 3 time points (T=0, midpoint, T=end) for each tracked metric.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(canal_panama_influence_tr_t0, canal_panama_influence, theater_ratio, 0, 0.2).
narrative_ontology:measurement(canal_panama_influence_tr_t5, canal_panama_influence, theater_ratio, 5, 0.3).
narrative_ontology:measurement(canal_panama_influence_tr_t10, canal_panama_influence, theater_ratio, 10, 0.3).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(canal_panama_influence_ex_t0, canal_panama_influence, base_extractiveness, 0, 0.5).
narrative_ontology:measurement(canal_panama_influence_ex_t5, canal_panama_influence, base_extractiveness, 5, 0.55).
narrative_ontology:measurement(canal_panama_influence_ex_t10, canal_panama_influence, base_extractiveness, 10, 0.6).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: cancer_chronotherapy_timing
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_cancer_chronotherapy_timing, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: cancer_chronotherapy_timing
 * human_readable: The Circadian Lifeline
 * domain: health/technological
 * * SUMMARY:
 * A medical intervention where the timing of immunotherapy (before 3pm)
 * leverages T-cell congregation around tumours. This coordination
 * around circadian rhythms resulted in a nearly doubling of survival time
 * (28 months vs 17 months) for lung cancer patients.
 * * KEY AGENTS:
 * - The Patient: Subject (Powerless) - Dependent on hospital scheduling.
 * - The Hospital Administration: Beneficiary (Institutional) - Managing treatment cycles.
 * - The Chronobiologist: Auditor (Analytical) - Mapping T-cell migration.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Extraction is near-zero; this is a timing shift of existing resources.
domain_priors:base_extractiveness(cancer_chronotherapy_timing, 0.05).
% Suppression is moderate; patients are constrained by clinical hours and staff availability.
domain_priors:suppression_score(cancer_chronotherapy_timing, 0.40).
% Theater ratio is low; the evidence is based on a randomised-controlled trial.
domain_priors:theater_ratio(cancer_chronotherapy_timing, 0.10).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(cancer_chronotherapy_timing, extractiveness, 0.05).
narrative_ontology:constraint_metric(cancer_chronotherapy_timing, suppression_requirement, 0.40).
narrative_ontology:constraint_metric(cancer_chronotherapy_timing, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
narrative_ontology:constraint_claim(cancer_chronotherapy_timing, coordination).

% Binary flags
narrative_ontology:has_sunset_clause(cancer_chronotherapy_timing). % The logistical constraint is temporary until scheduling adapts.

% Structural property derivation hooks:
% has_coordination_function/1 is DERIVED from constraint_beneficiary/2
narrative_ontology:constraint_beneficiary(cancer_chronotherapy_timing, lung_cancer_patients).
narrative_ontology:constraint_beneficiary(cancer_chronotherapy_timing, oncology_department).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE PATIENT (ROPE)
% For the patient, this is pure coordination that extends life with minimal cost.
% χ = 0.05 * π(powerless:1.5) * σ(regional:0.9) = 0.0675. This is well within Rope thresholds.
constraint_indexing:constraint_classification(cancer_chronotherapy_timing, rope,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(regional))).

% PERSPECTIVE 2: THE HOSPITAL ADMINISTRATION (SCAFFOLD)
% Busy hospitals view the 3pm window as a temporary logistical support measure
% that must be implemented, creating a scheduling challenge that will be resolved
% over time as protocols adapt.
constraint_indexing:constraint_classification(cancer_chronotherapy_timing, scaffold,
    context(agent_power(institutional),
            time_horizon(immediate),
            exit_options(constrained),
            spatial_scope(local))) :-
    narrative_ontology:has_sunset_clause(cancer_chronotherapy_timing).

% PERSPECTIVE 3: THE BIOLOGICAL REALIST (MOUNTAIN)
% From an analytical, universal perspective, the underlying circadian rhythms
% are fixed biological limits ("Mountain") that the therapy must work around.
constraint_indexing:constraint_classification(cancer_chronotherapy_timing, mountain,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(universal))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(chronotherapy_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between the key agents.
    constraint_indexing:constraint_classification(cancer_chronotherapy_timing, TypePatient, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(cancer_chronotherapy_timing, TypeHospital, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(cancer_chronotherapy_timing, TypeAnalyst, context(agent_power(analytical), _, _, _)),
    TypePatient == rope,
    TypeHospital == scaffold,
    TypeAnalyst == mountain,
    TypePatient \= TypeHospital,
    TypeHospital \= TypeAnalyst.

test(scaffold_conditions_met) :-
    % Verify that the conditions for a Scaffold classification are met.
    narrative_ontology:has_sunset_clause(cancer_chronotherapy_timing),
    narrative_ontology:constraint_beneficiary(cancer_chronotherapy_timing, _).

:- end_tests(chronotherapy_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This constraint generates a rich perspectival gap based on what aspect of the
 * system an agent is focused on.
 * - The Patient (powerless) experiences the outcome: a life-extending coordination
 *   mechanism with no added financial cost. This is a pure Rope.
 * - The Hospital Administration (institutional) experiences the implementation: a
 *   temporary but disruptive logistical challenge that must be supported until
 *   new scheduling systems are permanent. This is a Scaffold.
 * - The Chronobiologist (analytical) sees the underlying mechanism: an immutable
 *   biological law of T-cell migration. This is a Mountain.
 * The low base extractiveness (0.05) and moderate suppression (0.40, from
 * scheduling inflexibility) are key to these classifications. The Scaffold
 * classification is valid because a sunset clause is declared (the logistical
 * support is temporary) and beneficiaries exist (patients and the hospital).
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_individual_chronotype,
    'How do individual chronotypes ("morning larks" vs "night owls") shift the optimal 3pm window?',
    'Personalized immune-fluctuation tracking over 4 treatment cycles across a diverse patient cohort.',
    'If variation is significant, the universal "Mountain" of circadian rhythm becomes a personalized "Scaffold" requiring individual calibration.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(cancer_chronotherapy_timing, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This is a low-extraction constraint, so temporal data is not strictly
% required, but provided for completeness. The values are stable as the
% constraint is based on a fixed biological process and a one-time protocol shift.

% Theater ratio over time: Remains low as clinical efficacy is the primary driver.
narrative_ontology:measurement(ct_tr_t0, cancer_chronotherapy_timing, theater_ratio, 0, 0.10).
narrative_ontology:measurement(ct_tr_t5, cancer_chronotherapy_timing, theater_ratio, 5, 0.10).
narrative_ontology:measurement(ct_tr_t10, cancer_chronotherapy_timing, theater_ratio, 10, 0.10).

% Extraction over time: Fixed at near-zero; the protocol is a matter of timing, not cost.
narrative_ontology:measurement(ct_ex_t0, cancer_chronotherapy_timing, base_extractiveness, 0, 0.05).
narrative_ontology:measurement(ct_ex_t5, cancer_chronotherapy_timing, base_extractiveness, 5, 0.05).
narrative_ontology:measurement(ct_ex_t10, cancer_chronotherapy_timing, base_extractiveness, 10, 0.05).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% This constraint is about allocating scarce clinical resources (infusion chairs, staff)
% at the optimal time.
narrative_ontology:coordination_type(cancer_chronotherapy_timing, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: cancer_prevention
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-28
% ============================================================================

:- module(constraint_cancer_prevention, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: cancer_prevention
 * human_readable: Systemic Barriers to Preventable Cancer Risk Reduction
 * domain: social
 * * SUMMARY:
 * A global report indicates that 40% of cancers are preventable through lifestyle changes and public health initiatives. This constraint focuses on the systemic factors that make these preventable cancers a reality despite available knowledge. It involves the tension between individual choices, systemic influences (e.g., availability of unhealthy foods, lack of access to healthcare), and the role of public health in mitigating these risks.
 * * KEY AGENTS:
 * - Vulnerable Populations: Subject (Powerless) - Limited access to resources and information, subject to marketing pressures.
 * - Public Health Organizations: Beneficiary (Institutional) - Responsible for disseminating information and implementing preventative measures.
 * - Analytical Epidemiologist: Auditor (Analytical) - Analyzes data to identify risk factors and effective interventions.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(cancer_prevention, 0.55). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(cancer_prevention, 0.70).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(cancer_prevention, 0.30).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(cancer_prevention, extractiveness, 0.55).
narrative_ontology:constraint_metric(cancer_prevention, suppression_requirement, 0.70).
narrative_ontology:constraint_metric(cancer_prevention, theater_ratio, 0.30).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(cancer_prevention, constructed).

% Binary flags
% narrative_ontology:has_sunset_clause(cancer_prevention).      % Mandatory if Scaffold
domain_priors:requires_active_enforcement(cancer_prevention). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(cancer_prevention, public_health_organizations).
narrative_ontology:constraint_victim(cancer_prevention, vulnerable_populations).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% High extraction felt as an immutable limit or predatory trap.
% NOTE: This may be upgraded to 'organized' power if a critical mass of victims exists.
constraint_indexing:constraint_classification(cancer_prevention, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Viewed as essential infrastructure or coordination.
constraint_indexing:constraint_classification(cancer_prevention, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Default analytical context (civilizational/analytical/global).
% This perspective is used by the bridge to derive constraint_claim.
constraint_indexing:constraint_classification(cancer_prevention, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(cancer_prevention_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(cancer_prevention, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(cancer_prevention, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(threshold_validation) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(cancer_prevention, ExtMetricName, E),
    (E =< 0.15 ; E >= 0.46). % Ensures it's either a low-extraction Rope or high-extraction Snare/Tangled.

test(tangled_rope_properties) :-
    % Verify that the necessary structural properties for a Tangled Rope are declared.
    narrative_ontology:constraint_beneficiary(cancer_prevention, _),
    narrative_ontology:constraint_victim(cancer_prevention, _),
    domain_priors:requires_active_enforcement(cancer_prevention).

:- end_tests(cancer_prevention_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base_extractiveness is set to 0.55 because there is a significant cost (in health and economic terms) to individuals and society from preventable cancers. The suppression_score is 0.70 because factors like targeted advertising of unhealthy products, food deserts, and insufficient public health messaging actively suppress healthier choices. The theater_ratio is low (0.30) because while there is some performative public health messaging, the underlying systemic drivers are functional and impactful, not merely theatrical.
 *
 * The perspectives differ starkly. Individuals feel trapped by their circumstances (Snare), while public health institutions see their role as providing a coordination mechanism (Rope) to improve outcomes. From an analytical viewpoint, this is a Tangled Rope because there is an extraction element benefiting certain industries (e.g., tobacco, processed food) but also an undeniable coordination function required from public health bodies.
 *
 * The Piton classification was removed as it is inconsistent with the low theater_ratio and the active, functional nature of the constraint.
 * * MANDATROPHY ANALYSIS:
 * The Tangled Rope classification prevents the system from mislabeling coordination as pure extraction. It explicitly models the tension between the genuine public health benefits and the asymmetric extraction by disease-promoting industries. If this were labeled just a "Snare", the coordination aspect would be lost, and the system could wrongly encourage interventions to remove the constraint altogether (e.g., remove all food regulations), which would do more harm than good.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_cancer_prevention,
    'To what extent are individual choices truly free, vs. determined by systemic factors (economic, social, environmental)?',
    'Longitudinal studies tracking health outcomes based on socioeconomic status and access to resources, controlling for genetic predispositions.',
    'If choices are largely constrained, public policy interventions (taxation, regulation) become more crucial. If choices are more independent, educational campaigns may suffice.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(cancer_prevention, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection (metric_substitution,
% extraction_accumulation) by providing measurements at multiple time points.
% Model how the constraint intensified or changed across the interval.
% Required for high-extraction constraints (base_extractiveness > 0.46).
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(cancer_prevention_tr_t0, cancer_prevention, theater_ratio, 0, 0.20).
narrative_ontology:measurement(cancer_prevention_tr_t5, cancer_prevention, theater_ratio, 5, 0.25).
narrative_ontology:measurement(cancer_prevention_tr_t10, cancer_prevention, theater_ratio, 10, 0.30).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(cancer_prevention_ex_t0, cancer_prevention, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(cancer_prevention_ex_t5, cancer_prevention, base_extractiveness, 5, 0.53).
narrative_ontology:measurement(cancer_prevention_ex_t10, cancer_prevention, base_extractiveness, 10, 0.55).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% Valid types: information_standard, resource_allocation,
%              enforcement_mechanism, global_infrastructure
narrative_ontology:coordination_type(cancer_prevention, resource_allocation).

% Network relationships (structural influence edges)
% Declare when constraints share regulatory domain, causal dependency,
% or institutional coupling.
narrative_ontology:affects_constraint(cancer_prevention, public_health_funding).
narrative_ontology:affects_constraint(cancer_prevention, food_supply_chain).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: cantor_set_topology
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Georg Cantor (1883) / Set Theory / Topology
% ============================================================================

:- module(constraint_cantor_set, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: cantor_set_topology
 * human_readable: The Cantor Ternary Set
 * domain: mathematical/topological
 * temporal_scope: 1883 - Present
 * spatial_scope: Abstract (The Unit Interval [0,1])
 * * SUMMARY:
 * The Cantor Set is constructed by repeatedly removing the middle third of 
 * every remaining line segment in the unit interval. This process results in 
 * a set that is uncountable, yet has a total length (Lebesgue measure) of zero. 
 * It is the quintessential example of "nowhere dense" structure.
 * * KEY AGENTS:
 * - The Point ($x \in \mathcal{C}$): The powerless subject who survives the 
 * recursive purging, trapped in a set of zero measure.
 * - The Measure Theorist (Institutional): An agent who uses the Cantor Set 
 * as a "Rope" to redefine the relationship between cardinality and size.
 * - The "Intuitive" Observer (Victim): An agent for whom the set is a "Snare," 
 * strangling the common-sense notion that "uncountable" implies "has length."
 * * NARRATIVE ARC:
 * Originally seen as a "pathological" curiosity, the Cantor Set is a 
 * "Mountain" of topological fate. In fractal geometry, it is a "Rope" 
 * for coordination. However, the removal of the middle-thirds acts as a 
 * "Snare" for the interval itself, extracting all its "substance" (measure) 
 * while leaving behind an infinite, ghostly residue of survivors.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION
   ========================================================================== */

% Structural Anchor
narrative_ontology:interval(cantor_set_topology, 1883, 2026).
narrative_ontology:constraint_claim(cantor_set_topology, mountain).

% Base extractiveness score (0.0-1.0)
% Rationale: 0.3. The construction "extracts" the entire measure (1.0) of 
% the interval, reducing its "worth" in length terms to zero.
domain_priors:base_extractiveness(cantor_set_topology, 0.3).

% Suppression score (0.0-1.0)
% Rationale: 0.2. It suppresses the visibility of continuity, 
% rendering the set "dust-like" and disconnected.
domain_priors:suppression_score(cantor_set_topology, 0.2).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(cantor_set_topology, extractiveness, 0.3).
narrative_ontology:constraint_metric(cantor_set_topology, suppression_requirement, 0.2).

% Enforcement: Emerges naturally from recursive set removal.
domain_priors:emerges_naturally(cantor_set_topology).

% Metrics
% BENEFICIARIES & VICTIMS
constraint_beneficiary(cantor_set_topology, fractal_geometry). % Tool for recursion.
constraint_beneficiary(cantor_set_topology, analytical_rigor).
constraint_victim(cantor_set_topology, lebesgue_measure). % Measure is extracted to zero.
constraint_victim(cantor_set_topology, geometric_intuition).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE RESIDENT POINT ($x \in \mathcal{C}$) - Mountain
   --------------------------------------------------------------------------
   WHO: powerless - The point has no agency over the removal process.
   WHEN: immediate - True at every level of the recursive hierarchy.
   WHERE: trapped - Bound within a "perfectly disconnected" set.
   SCOPE: local - Immediate neighborhood of the point.
   
   WHY THIS CLASSIFICATION:
   For a point that remains in the set, the ternary logic is a natural law. 
   It cannot "choose" to belong to a connected segment; it is isolated by 
   the infinite Mountain of the ternary expansion rule.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    cantor_set_topology,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE FRACTAL ENGINEER - Rope
   --------------------------------------------------------------------------
   WHO: institutional - Power to design algorithms based on Cantor logic.
   WHEN: biographical - Spanning the creation of a mesh or signal.
   WHERE: mobile - Can adjust the ratio of removal to create "Fat Cantor Sets."
   SCOPE: global - Universal application in chaos theory.
   
   WHY THIS CLASSIFICATION:
   For the engineer, the Cantor construction is a "Rope"—a functional 
   coordination tool. It allows for the mapping of complex, self-similar 
   structures, providing a standard of achievement for structural modeling.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    cantor_set_topology,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE UNIT INTERVAL [0,1] - Snare
   --------------------------------------------------------------------------
   WHO: powerless - The interval is subjected to the removal.
   WHEN: immediate - Each iteration "strangles" more of its length.
   WHERE: constrained - No alternative but to lose 1/3 of its remaining self.
   SCOPE: local - Within the bounds of the unit line.
   
   WHY THIS CLASSIFICATION:
   The Cantor construction acts as a "Snare" for the interval's measure. 
   It extracts 100% of the length (extraction) while leaving behind a 
   set of the same cardinality (uncountable) as the original, creating 
   a "No-Exit" paradox of size vs. number.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    cantor_set_topology,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(local)
    )
) :- 
    domain_priors:base_extractiveness(cantor_set_topology, E),
    E >= 0.2,
    !.

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(cantor_set_tests).

test(measure_vs_cardinality_variance) :-
    % Subject -> Mountain
    constraint_indexing:constraint_classification(cantor_set_topology, Type1, context(powerless, immediate, trapped, local)),
    % Architect -> Rope
    constraint_indexing:constraint_classification(cantor_set_topology, Type2, context(institutional, biographical, mobile, global)),
    Type1 = mountain,
    Type2 = rope.

test(measure_zero_snare) :-
    % The interval feels the "Snare" of its disappearing measure.
    constraint_indexing:constraint_classification(cantor_set_topology, snare, context(powerless, immediate, constrained, local)).

test(natural_emergence) :-
    domain_priors:emerges_naturally(cantor_set_topology).

:- end_tests(cantor_set_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * 1. CLASSIFICATION: The Cantor set is a "Mountain" of logic, but the 
 * process is a "Snare" for measure. I chose this to highlight the 
 * "Epistemic Extraction" where cardinality is preserved while measure 
 * is destroyed.
 * 2. IMAGES: Triggered diagrams for the ternary construction and the 
 * "Devil's Staircase" to show how the "Snare" of measure zero creates 
 * a "Rope" of constant-gradient functions.
 * 3. EXTRACTIVENESS (0.3): While math is free, the Cantor set is the 
 * ultimate "extraction" of physical intuition (length).
 */

% OMEGA IDENTIFICATION
omega_variable(
    measure_preservation,
    "Can a 'Rope' (Fat Cantor Set) preserve measure while remaining nowhere dense?",
    resolution_mechanism("Verification of the Smith-Volterra-Cantor set construction."),
    impact("If Yes: The 'Snare' of measure zero is a choice, not a Mountain."),
    confidence_without_resolution(high)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Fat Cantor Sets (Smith-Volterra-Cantor)
 * Viability: Removes segments of decreasing length such that the result 
 * has non-zero measure.
 * Suppression: Often ignored in introductory topology to emphasize the 
 * "Measure Zero" paradox.
 * Evidence: Standard in advanced real analysis.
 * * ALTERNATIVE 2: The Continuous Line
 * Status: The "Rope" that Cantor set destroys to prove its point.
 * * CONCLUSION:
 * The existence of "Fat Cantor Sets" proves that the "Snare" of measure 
 * zero is a specific parameter choice within a broader "Mountain" of 
 * recursive set theory.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Load: ?- [cantor_set_topology].
% Analyze: ?- constraint_indexing:multi_index_report(cantor_set_topology).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: cap_theorem
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Eric Brewer (2000) / Seth Gilbert & Nancy Lynch (2002)
% ============================================================================

:- module(constraint_cap_theorem, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: cap_theorem
 * human_readable: CAP Theorem (Brewer's Theorem)
 * domain: technological
 * temporal_scope: Permanent (Universal Laws of Distributed Computing)
 * spatial_scope: Global (Digital Networks)
 * * SUMMARY:
 * The CAP theorem states that any distributed data store can only provide two 
 * of three guarantees: Consistency (every read receives the most recent write), 
 * Availability (every request receives a response), and Partition Tolerance 
 * (the system continues to operate despite network failures). 
 * * KEY AGENTS:
 * - The Distributed Systems Architect: Analytical observer mapping the 
 * triangular trade-offs of data integrity.
 * - The Cloud Infrastructure Provider: Institutional agent offering specialized 
 * database "Ropes" (e.g., CP or AP systems) to developers.
 * - The On-Call Engineer: Individual powerless agent trapped by a network 
 * partition ("Split Brain") where the theorem acts as a Snare.
 * * NARRATIVE ARC:
 * CAP functions as a "Mountain" of logic—a fundamental law of information 
 * physics. For a CTO, it is a "Rope" used to coordinate design choices. 
 * However, during a network failure, it becomes a "Snare" for the SRE, 
 * as the theorem extracts the possibility of having both a working 
 * and an accurate system simultaneously.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for [STEP 1] and [STEP 2] of the DR-Audit Suite
narrative_ontology:interval(cap_theorem_interval, 0, 10).
narrative_ontology:constraint_claim(cap_theorem, mountain).

% Base extractiveness score (0.0-1.0)
% Rationale: 0.4 (Moderate). The theorem extracts "system reliability." 
% It forces a cost where one must sacrifice either uptime or data 
% correctness, effectively "taxing" every distributed architecture.
domain_priors:base_extractiveness(cap_theorem, 0.4).

% Suppression score (0.0-1.0)
% Rationale: 0.7 (High). The "Perfect Database" (CAP-complete) is 
% physically and logically suppressed. The theorem renders the 
% alternative invisible to any viable engineering plan.
domain_priors:suppression_score(cap_theorem, 0.7).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(cap_theorem, extractiveness, 0.4).
narrative_ontology:constraint_metric(cap_theorem, suppression_requirement, 0.7).

% Enforcement requirements
% Emerges naturally from the physics of network latency and logic.
domain_priors:emerges_naturally(cap_theorem).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(cap_theorem, [cloud_consultants, architectural_purity]).
constraint_victim(cap_theorem, [on_call_engineers, real_time_consistency_requirements]).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE COMPUTER SCIENTIST - Mountain
   --------------------------------------------------------------------------
   
   WHO: analytical - Observer of universal informational laws.
   WHEN: civilizational - Viewing the laws of logic as permanent.
   WHERE: trapped - Logic cannot bypass the pigeonhole-like limits of state.
   SCOPE: global - Universal computation.
   
   WHY THIS CLASSIFICATION:
   To the scientist, CAP is a Mountain. It is an unchangeable feature of the 
   computational "hardware" of the universe. No amount of innovation or 
   speed-of-light networking can bypass the fundamental impossibility of 
   having all three properties during a partition.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    cap_theorem,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(civilizational),
        exit_options(trapped),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE CTO / INFRASTRUCTURE LEAD - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional - Power to select technologies and define architecture.
   WHEN: biographical - Planning the 10-year growth of a platform.
   WHERE: arbitrage - Can choose different databases for different use cases.
   SCOPE: national - Corporate-wide infrastructure.
   
   WHY THIS CLASSIFICATION:
   For the architect, CAP is a Rope. It is a coordination mechanism. 
   By understanding the trade-offs, they can "tether" their business 
   to the right system (e.g., choosing "Availability" for a social feed 
   but "Consistency" for a bank ledger). It is a functional tool for 
   managing complexity.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    cap_theorem,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(arbitrage),
        spatial_scope(national)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE ON-CALL SRE - Snare
   --------------------------------------------------------------------------
   
   WHO: powerless - Subject to the failure of the network.
   WHEN: immediate - 3 AM incident response.
   WHERE: trapped - The system is already built and the partition is happening.
   SCOPE: local - Immediate server cluster.
   
   WHY THIS CLASSIFICATION:
   For the engineer on call during a network split, CAP is a Snare. 
   They are forced to choose between a "lying" system (Consistency loss) 
   or a "broken" system (Availability loss). The theorem strangles their 
   ability to provide a perfect fix, extracting their time and sanity 
   while providing no escape.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    cap_theorem,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(cap_theorem_tests).

test(multi_perspective_variance) :-
    % Analyst sees Mountain, Institutional sees Rope, Powerless sees Snare
    constraint_indexing:constraint_classification(cap_theorem, mountain, context(analytical, civilizational, trapped, global)),
    constraint_indexing:constraint_classification(cap_theorem, rope, context(institutional, biographical, arbitrage, national)),
    constraint_indexing:constraint_classification(cap_theorem, snare, context(powerless, immediate, trapped, local)).

test(power_extractiveness_reliability) :-
    % SREs feel the extraction of their agency during a failure (Snare).
    % CTOs use the theorem to justify budget and tech stack (Rope).
    domain_priors:base_extractiveness(cap_theorem, E),
    E >= 0.4.

test(time_immutability_logic) :-
    % Civilizational view of distributed logic = Mountain.
    constraint_indexing:effective_immutability(civilizational, trapped, mountain).

:- end_tests(cap_theorem_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * 1. EXTRACTIVENESS (0.4): CAP extracts the "ideal." It forces an energy 
 * and logic cost upon every system designer, preventing a "perfect" system.
 * 2. SUPPRESSION (0.7): High. Because the "Perfect System" is logically 
 * impossible, it is effectively suppressed from our reality.
 * 3. SNARE LOGIC: Applied to the SRE because they are the "victims" of the 
 * theorem's trade-off when the physical world (network) breaks.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    pacelc_transition_cost,
    "To what extent can the PACELC extension (addressing latency vs consistency 
    when no partition exists) untie the CAP Snare (Rope), or is the cost 
    always a net-negative for complexity (Snare)?",
    resolution_mechanism("Monitor industry shift toward latency-aware 
    consistent databases"),
    impact("If Rope: The Snare is loosened during normal operation. 
    If Snare: Complexity just creates a different kind of trap."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: PACELC Theorem
 * Viability: High. Describes the trade-offs during normal operation 
 * (Latency vs. Consistency) as well as during partitions.
 * Suppression: None. It is a more detailed map of the same Mountain.
 * * CONCLUSION:
 * The CAP theorem remains a Mountain because there is no alternative that 
 * provides all three guarantees. It is a fundamental law of the digital 
 * universe.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 1. Load: ?- [constraint_cap_theorem].
 * 2. Multi-perspective: ?- multi_index_report(cap_theorem).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: capability_eval_overhang
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-27
% ============================================================================

:- module(constraint_capability_eval_overhang, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: capability_eval_overhang
 * human_readable: The Blind Spot of Power
 * domain: technological/AI/governance
 * * SUMMARY:
 * A scenario where the actual capabilities of an AI system significantly exceed
 * the benchmarks and evaluation protocols used to measure them. This creates a
 * "Rope" for developers to coordinate rapid deployment and commercial scaling,
 * but acts as a "Snare" for society, as safety frameworks are based on
 * obsolete metrics, liquidating public security in favor of unpriced
 * computational progress.
 * * KEY AGENTS:
 * - Safety Researcher / Public: Subject (Powerless)
 * - Frontier AI Lab: Beneficiary (Institutional)
 * - Evaluative Auditor: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% High extraction (0.83) as the "overhang" allows the beneficiary to capture
% the surplus of advanced capabilities while externalizing the "tail risk"
% of unmeasured power onto the subject.
domain_priors:base_extractiveness(capability_eval_overhang, 0.83).
domain_priors:suppression_score(capability_eval_overhang, 0.64).
domain_priors:theater_ratio(capability_eval_overhang, 0.86). % High theater: relying on "passed" evals that don't test emergent risks.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(capability_eval_overhang, extractiveness, 0.83).
narrative_ontology:constraint_metric(capability_eval_overhang, suppression_requirement, 0.64).
narrative_ontology:constraint_metric(capability_eval_overhang, theater_ratio, 0.86).

% Constraint self-claim (what does the constraint claim to be?)
narrative_ontology:constraint_claim(capability_eval_overhang, coordination).

% Binary flags and structural properties for Tangled Rope classification
domain_priors:requires_active_enforcement(capability_eval_overhang).
narrative_ontology:constraint_beneficiary(capability_eval_overhang, frontier_ai_labs).
narrative_ontology:constraint_victim(capability_eval_overhang, public_security).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The subject is trapped: they are forced to participate in a "safety race"
% governed by metrics they know are inadequate to prevent catastrophic failure.
constraint_indexing:constraint_classification(capability_eval_overhang, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The institution views the existing eval-stack as a Rope—the essential
% coordination signal required to validate "readiness" for market release
% and regulatory compliance.
constraint_indexing:constraint_classification(capability_eval_overhang, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE SYSTEMS AUDITOR (PITON)
% Theater ratio (0.86) > 0.70 triggers Piton: the "Benchmark Suite"
% is an inertial spike of logic maintained for optics, not functional safety.
constraint_indexing:constraint_classification(capability_eval_overhang, piton,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(global))).

% PERSPECTIVE 4: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Detects high extraction (0.83), a coordination function (beneficiary exists),
% asymmetric extraction (victim exists), and active enforcement. This is the
% canonical signature of a Tangled Rope.
constraint_indexing:constraint_classification(capability_eval_overhang, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(arbitrage),
            spatial_scope(universal))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(capability_eval_overhang_tests).

test(perspectival_gap) :-
    % Verify Snare for the subject vs Rope for the institutional beneficiary.
    constraint_indexing:constraint_classification(capability_eval_overhang, snare,
        context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(capability_eval_overhang, rope,
        context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(capability_eval_overhang, tangled_rope,
        context(agent_power(analytical), _, _, _)).

test(piton_trigger) :-
    % Ensure high theater ratio (0.86) correctly triggers the Piton classification.
    constraint_indexing:constraint_classification(capability_eval_overhang, piton,
        context(agent_power(analytical), _, _, _)).

test(tangled_rope_structural_properties) :-
    % Verify all three required properties for Tangled Rope are present.
    narrative_ontology:constraint_beneficiary(capability_eval_overhang, _),
    narrative_ontology:constraint_victim(capability_eval_overhang, _),
    domain_priors:requires_active_enforcement(capability_eval_overhang).

:- end_tests(capability_eval_overhang_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The extraction score (0.83) reflects a state where the "coordination"
 * benefit of institutional safety checks is eclipsed by the predatory
 * risk-taking of deploying unmeasured power. The high theater ratio (0.86)
 * confirms that the evaluation process is more performative than functional.
 *
 * * PERSPECTIVAL GAP:
 * The Safety Researcher and public feel a Snare because they are bound by a
 * system that only sees the "visible" capabilities, externalizing unmeasured
 * risk onto them. The Frontier Lab sees a Rope because the evals provide a
 * standardized coordination path to prove "safety" to investors and regulators.
 *
 * * MANDATROPHY ANALYSIS:
 * [RESOLVED MANDATROPHY] The system resolves this by classifying it as a
 * Tangled Rope from the analytical perspective. This acknowledges the valid
 * coordination function (passing evals) while correctly identifying the
 * asymmetric, coercive extraction (externalizing tail risk). The Piton
 * classification further highlights the functional decay of the safety mechanism.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% Required for high-extraction constraints (> 0.46).
omega_variable(
    omega_emergence_detection,
    'Can "black box" capabilities be forecasted, or is emergent power a surprise (Snare vs Mountain)?',
    'Tracking the delta between "predicted capability onset" and "actual bench discovery" over time.',
    'If predictable: Snare of current policy. If unpredictable: Mountain of Information Theory.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(capability_eval_overhang, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This constraint models a system degrading over time. Initially, evals were
% functional (low theater, lower extraction). As AI capabilities outpaced the
% evals, the theater ratio and the extractive potential of the "overhang" grew.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(ceo_tr_t0, capability_eval_overhang, theater_ratio, 0, 0.20).
narrative_ontology:measurement(ceo_tr_t5, capability_eval_overhang, theater_ratio, 5, 0.65).
narrative_ontology:measurement(ceo_tr_t10, capability_eval_overhang, theater_ratio, 10, 0.86).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(ceo_ex_t0, capability_eval_overhang, base_extractiveness, 0, 0.35).
narrative_ontology:measurement(ceo_ex_t5, capability_eval_overhang, base_extractiveness, 5, 0.71).
narrative_ontology:measurement(ceo_ex_t10, capability_eval_overhang, base_extractiveness, 10, 0.83).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The evaluation benchmarks serve as a standard for communicating safety.
narrative_ontology:coordination_type(capability_eval_overhang, information_standard).

% Network relationships (structural influence edges)
% The decay of evaluation integrity directly impacts public trust in the technology.
narrative_ontology:affects_constraint(capability_eval_overhang, public_trust_in_ai).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: capital_misallocation_spiral
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-05-21
% ============================================================================

:- module(constraint_capital_misallocation_spiral, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: capital_misallocation_spiral
 * human_readable: The Zombie Asset Loop
 * domain: economic/technological
 * * SUMMARY:
 * A scenario where low interest rates or institutional mandates force capital
 * into increasingly unproductive "zombie" assets. To prevent a crash, even
 * more capital is allocated to prop up these failures, creating a recursive
 * siphon. It functions as a Rope for short-term market stability but becomes
 * a massive Snare for future generations who inherit a hollowed-out economy.
 * * KEY AGENTS:
 * - Emerging Innovator: Subject (Powerless)
 * - Central Financial Authority: Beneficiary (Institutional)
 * - Forensic Macroeconomist: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% High extraction (0.87) because the spiral siphons the species' real
% productive potential to maintain the "value" of non-functional spreadsheets.
domain_priors:base_extractiveness(capital_misallocation_spiral, 0.87).
domain_priors:suppression_score(capital_misallocation_spiral, 0.74).
domain_priors:theater_ratio(capital_misallocation_spiral, 0.89). % Extreme theater: the "market" is a performative clearinghouse.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(capital_misallocation_spiral, extractiveness, 0.87).
narrative_ontology:constraint_metric(capital_misallocation_spiral, suppression_requirement, 0.74).
narrative_ontology:constraint_metric(capital_misallocation_spiral, theater_ratio, 0.89).

% The constraint claims to be a coordination mechanism for market stability.
narrative_ontology:constraint_claim(capital_misallocation_spiral, coordination).

% Binary flags & Structural properties
domain_priors:requires_active_enforcement(capital_misallocation_spiral). % Required for Tangled Rope. Capital is forced via mandates.
narrative_ontology:constraint_beneficiary(capital_misallocation_spiral, central_financial_authority). % Derives has_coordination_function
narrative_ontology:constraint_victim(capital_misallocation_spiral, emerging_innovator). % Derives has_asymmetric_extraction

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For the innovator, the spiral is a snare: capital is technically
% abundant, but economically trapped in legacy propping, leaving them starved.
constraint_indexing:constraint_classification(capital_misallocation_spiral, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The institution views the intervention as a vital Rope—the only way to
% coordinate market order and prevent systemic panic.
constraint_indexing:constraint_classification(capital_misallocation_spiral, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Detects the hybrid signature of high coordination intent (Rope)
% masking predatory, recursive extraction (Snare).
constraint_indexing:constraint_classification(capital_misallocation_spiral, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(arbitrage),
            spatial_scope(universal))).

% PERSPECTIVE 4: THE SYSTEMS AUDITOR (PITON)
% Theater ratio (0.89) > 0.70 triggers Piton: price signals have atrophied;
% the system is an inert spike of logic propped up by performative valuation.
constraint_indexing:constraint_classification(capital_misallocation_spiral, piton,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(capital_misallocation_spiral_tests).

test(perspectival_gap) :-
    % Verify Snare for the subject vs Rope for the institutional beneficiary.
    constraint_indexing:constraint_classification(capital_misallocation_spiral, snare,
        context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(capital_misallocation_spiral, rope,
        context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(capital_misallocation_spiral, tangled_rope,
        context(agent_power(analytical), _, _, _)).

test(piton_detection) :-
    % Ensure high theater ratio (0.89) triggers Piton classification.
    constraint_indexing:constraint_classification(capital_misallocation_spiral, piton,
        context(agent_power(analytical), _, _, _)).

test(threshold_validation) :-
    % Ensure extraction (0.87) is above the Snare threshold (>= 0.46).
    domain_priors:base_extractiveness(capital_misallocation_spiral, E),
    E >= 0.46.

:- end_tests(capital_misallocation_spiral_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The extraction score (0.87) reflects a "Mandatrophy" state where the
 * "market" provides zero price-signal coordination relative to real utility.
 * The system is both a Tangled Rope (it has a real coordination function for
 * beneficiaries and asymmetric extraction for victims) and a Piton (its
 * primary function has atrophied into theatrical price-setting). This dual
 * classification is valid and represents a late-stage, degraded constraint.
 *
 * * PERSPECTIVAL GAP:
 * The Emerging Innovator feels a Snare because they are effectively
 * de-capitalized by institutional "stability" measures. The Financial
 * Authority sees a Rope because the propping ensures no immediate collapse.
 * * [RESOLVED MANDATROPHY]:
 * Resolved via the Piton and Tangled Rope classifications. For an
 * analytical observer, the coordination is no longer functional
 * (Theater 0.89); the system is an inert spike that siphons the
 * future's wealth to pay for the past's mistakes. The temporal data shows
 * this was not the initial state, but a degradation over time.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% Required for high-extraction constraints (> 0.46).
omega_variable(
    omega_signal_recovery,
    'Can price signals be restored without total systemic failure (Snare vs Mountain)?',
    'Tracking the delta between "shadow" market prices and institutional clearing prices.',
    'If signals recover: Snare of policy. If collapse is required: Mountain of Entropic Debt.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(capital_misallocation_spiral, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This constraint began as a stability mechanism (lower extraction) but
% degraded into a performative, extractive spiral.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(cms_tr_t0, capital_misallocation_spiral, theater_ratio, 0, 0.20).
narrative_ontology:measurement(cms_tr_t5, capital_misallocation_spiral, theater_ratio, 5, 0.60).
narrative_ontology:measurement(cms_tr_t10, capital_misallocation_spiral, theater_ratio, 10, 0.89).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(cms_ex_t0, capital_misallocation_spiral, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(cms_ex_t5, capital_misallocation_spiral, base_extractiveness, 5, 0.75).
narrative_ontology:measurement(cms_ex_t10, capital_misallocation_spiral, base_extractiveness, 10, 0.87).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The constraint's function is to allocate capital, a core resource.
narrative_ontology:coordination_type(capital_misallocation_spiral, resource_allocation).

% This type of misallocation has downstream effects, particularly on sectors
% like housing that require long-term productive capital investment.
narrative_ontology:affects_constraint(capital_misallocation_spiral, housing_affordability_crisis).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: carbon_credit_markets_2026
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-05-21
% ============================================================================

:- module(constraint_carbon_credit_markets_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: carbon_credit_markets_2026
 * human_readable: International Carbon Credit Trading Schemes (2026)
 * domain: economic/political
 * * SUMMARY:
 * A global market-based mechanism where entities buy and sell emission permits to meet 
 * climate targets. Originally designed for efficient global coordination, the system 
 * has developed significant extractive properties, creating a stark perspectival gap
 * between large corporate beneficiaries and smaller, burdened participants.
 * * KEY AGENTS:
 * - Small Businesses / Consumers: Subjects (Powerless) who bear compliance costs and price increases.
 * - Multinational Corporations & Financial Firms: Beneficiaries (Institutional) who leverage the system for flexible compliance and profit.
 * - Climate Policy Auditors: Observers (Analytical) who analyze the system's dual nature.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(carbon_credit_markets_2026, 0.55). % Mountain <= 0.15, Rope <= 0.15, Snare >= 0.46
domain_priors:suppression_score(carbon_credit_markets_2026, 0.60).   % Structural property (raw, unscaled). Alternatives like direct carbon taxes are politically sidelined.
domain_priors:theater_ratio(carbon_credit_markets_2026, 0.15).       % Piton detection (>= 0.70). Currently low; the system is functional, not purely performative.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(carbon_credit_markets_2026, extractiveness, 0.55).
narrative_ontology:constraint_metric(carbon_credit_markets_2026, suppression_requirement, 0.60).
narrative_ontology:constraint_metric(carbon_credit_markets_2026, theater_ratio, 0.15).

% Constraint self-claim (what does the constraint claim to be?)
narrative_ontology:constraint_claim(carbon_credit_markets_2026, coordination).

% Binary flags
domain_priors:requires_active_enforcement(carbon_credit_markets_2026). % Required for Tangled Rope

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(carbon_credit_markets_2026, multinational_corporations).
narrative_ontology:constraint_beneficiary(carbon_credit_markets_2026, financial_trading_firms).
narrative_ontology:constraint_victim(carbon_credit_markets_2026, small_businesses).
narrative_ontology:constraint_victim(carbon_credit_markets_2026, developing_nations).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For small businesses or consumers, the system is an extractive trap. Compliance costs are high,
% and price increases are non-negotiable. The high base extraction (0.55) scaled by powerlessness (1.5)
% results in a very high effective extraction, classifying it as a Snare.
constraint_indexing:constraint_classification(carbon_credit_markets_2026, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For institutional players, the system is an efficient coordination tool (Rope).
% Their power modifier (-0.2) negates the base extraction, making it feel like
% pure infrastructure for managing ESG goals and compliance flexibly.
constraint_indexing:constraint_classification(carbon_credit_markets_2026, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analytical view, which considers both the coordination function (beneficiaries exist)
% and the asymmetric extraction (victims exist), classifies this as a Tangled Rope.
% It is a hybrid system that simultaneously coordinates and extracts.
constraint_indexing:constraint_classification(carbon_credit_markets_2026, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(carbon_credit_markets_2026_tests).

test(perspectival_gap) :-
    % Verify the gap between the powerless subject (Snare) and the institutional beneficiary (Rope).
    constraint_indexing:constraint_classification(carbon_credit_markets_2026, snare,
        context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(carbon_credit_markets_2026, rope,
        context(agent_power(institutional), _, _, _)).

test(tangled_rope_analytical_resolution) :-
    % Verify the analytical observer correctly identifies the hybrid Tangled Rope nature.
    constraint_indexing:constraint_classification(carbon_credit_markets_2026, tangled_rope,
        context(agent_power(analytical), _, _, _)).

test(high_extraction_threshold) :-
    % Verify the base extractiveness meets the threshold for a Snare/Tangled Rope.
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(carbon_credit_markets_2026, ExtMetricName, E),
    E >= 0.46.

:- end_tests(carbon_credit_markets_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base scores reflect a system with a genuine coordination goal (beneficiaries exist)
 * but significant asymmetric extraction (victims exist, ε=0.55) and suppression of
 * alternatives (S=0.60). The perspectival gap is stark: institutional actors experience
 * it as a 'Rope' due to their power effectively nullifying the extraction cost, while
 * powerless actors experience it as a 'Snare' due to their power amplifying it.
 * The original file's classification of the powerless view as 'Mountain' was incorrect;
 * a constraint with ε > 0.15 cannot be a Mountain. It is a Snare from that index.
 *
 * MANDATROPHY ANALYSIS:
 * The 'Tangled Rope' classification from the analytical perspective is critical for
 * resolving Mandatrophy. It prevents the system from being misclassified as a pure 'Snare'
 * (ignoring its coordination function) or a pure 'Rope' (ignoring its extractive harm).
 * It correctly identifies the hybrid nature of the constraint as a coordination mechanism
 * that has been captured or burdened by extractive "barnacles."
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_carbon_credit_markets_2026,
    'Do carbon credits actually reduce net global emissions, or do they primarily serve to relocate emissions and provide greenwashing cover?',
    'Decade-scale empirical atmospheric carbon mapping correlated with credit retirement audits.',
    'If true reduction: validates Tangled Rope classification. If net-zero or negative climate impact: reclassifies as a pure Snare.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(carbon_credit_markets_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data shows the system's degradation over time, with both extraction
% and performative elements increasing as financialization deepens. This is
% consistent with the narrative of "accumulated barnacles."

% Theater ratio over time (metric_substitution drift):
narrative_ontology:measurement(ccm26_tr_t0, carbon_credit_markets_2026, theater_ratio, 0, 0.10).
narrative_ontology:measurement(ccm26_tr_t5, carbon_credit_markets_2026, theater_ratio, 5, 0.12).
narrative_ontology:measurement(ccm26_tr_t10, carbon_credit_markets_2026, theater_ratio, 10, 0.15).

% Extraction over time (extraction_accumulation drift):
narrative_ontology:measurement(ccm26_ex_t0, carbon_credit_markets_2026, base_extractiveness, 0, 0.48).
narrative_ontology:measurement(ccm26_ex_t5, carbon_credit_markets_2026, base_extractiveness, 5, 0.52).
narrative_ontology:measurement(ccm26_ex_t10, carbon_credit_markets_2026, base_extractiveness, 10, 0.55).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% This is a market-based resource allocation system.
narrative_ontology:coordination_type(carbon_credit_markets_2026, resource_allocation).

% This constraint is structurally coupled with corporate ESG reporting standards,
% as the credits are a primary tool for meeting reported targets.
narrative_ontology:affects_constraint(carbon_credit_markets_2026, esg_reporting_standards_2025).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: carrying_capacity
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_carrying_capacity, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: carrying_capacity
 * human_readable: Management of Ecological Carrying Capacity (K)
 * domain: economic/technological/social
 * * SUMMARY:
 * Carrying capacity (K) represents the maximum population size of a species that a specific environment can sustain indefinitely. This constraint models the social and economic systems built to manage, ignore, or exploit this biophysical limit. While the limit itself is a natural phenomenon, its management creates a constructed system of allocation and extraction that has vastly different effects on different populations.
 * * KEY AGENTS:
 * - The Subsistence Inhabitant: Experiences the managed limit as a Snare, where scarcity of resources (e.g., in an overpopulated slum) extracts survival capacity.
 * - The Resource Manager: Views the management of K as a Rope for coordinating sustainable extraction (e.g., fishing quotas, urban planning) to ensure long-term stability.
 * - The Systems Ecologist (Analytical): Observes that the management system is a Tangled Rope, providing genuine coordination for some while creating severe, asymmetric extraction for others.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(carrying_capacity, 0.70). % High. Approaching K extracts ecosystem health and future viability.
domain_priors:suppression_score(carrying_capacity, 0.60).   % High. The physical limit suppresses the alternative of "infinite growth."
domain_priors:theater_ratio(carrying_capacity, 0.10).       % Low. The consequences are biophysical, not performative.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(carrying_capacity, extractiveness, 0.70).
narrative_ontology:constraint_metric(carrying_capacity, suppression_requirement, 0.60).
narrative_ontology:constraint_metric(carrying_capacity, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% Claims to be a natural law, but its management is a constructed enforcement mechanism.
narrative_ontology:constraint_claim(carrying_capacity, enforcement).

% Binary flags
domain_priors:requires_active_enforcement(carrying_capacity). % Required for Tangled Rope

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(carrying_capacity, long_term_survivors).
narrative_ontology:constraint_beneficiary(carrying_capacity, ecosystem_stability).
narrative_ontology:constraint_victim(carrying_capacity, over_expanding_populations).
narrative_ontology:constraint_victim(carrying_capacity, marginalized_resource_users).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For the person living in an over-capacity urban environment, K is a Snare.
% The extraction of space and clean air has turned their environment into a trap.
constraint_indexing:constraint_classification(carrying_capacity, snare,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(constrained),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For the institutional manager, K is a Rope. It is a functional coordination
% mechanism to prevent a "Tragedy of the Commons."
constraint_indexing:constraint_classification(carrying_capacity, rope,
    context(agent_power(institutional),
            time_horizon(biographical),
            exit_options(arbitrage),
            spatial_scope(regional))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The ecologist sees both the valid coordination function (managing resources)
% and the severe asymmetric extraction imposed on the powerless. This dual
% nature is the definition of a Tangled Rope.
constraint_indexing:constraint_classification(carrying_capacity, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(carrying_capacity_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(carrying_capacity, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(carrying_capacity, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(threshold_validation) :-
    % Verify the base extractiveness is in the high-extraction range for Snare/Tangled Rope.
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(carrying_capacity, ExtMetricName, E),
    E >= 0.46.

test(tangled_rope_conditions_met) :-
    % Verify the structural properties for a Tangled Rope are present.
    domain_priors:requires_active_enforcement(carrying_capacity),
    narrative_ontology:constraint_beneficiary(carrying_capacity, _),
    narrative_ontology:constraint_victim(carrying_capacity, _).

:- end_tests(carrying_capacity_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The original file incorrectly classified this constraint as a 'mountain' from the analytical
 * perspective while assigning it a high base extractiveness (0.7), a logical contradiction
 * since mountains must have ε <= 0.15. This regeneration corrects the error by reframing
 * the constraint as the *management* of carrying capacity, not the physical law itself.
 *
 * This reframing allows for a consistent high extraction score, reflecting how the costs of
 * approaching the limit are asymmetrically distributed. The analytical observer, seeing both
 * the valid coordination function for resource managers (beneficiaries) and the severe
 * consequences for marginalized populations (victims), correctly classifies the system as a
 * Tangled Rope. The powerless experience it as a pure Snare, while the institutional managers
 * who set the rules see it as a beneficial Rope. This creates the classic perspectival gap.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The Tangled Rope classification is critical for resolving mandatrophy. A simpler analysis
 * might label the system a Snare (focusing only on the slum dweller) or a Mountain/Rope
 * (focusing only on the ecological law or the manager). The Tangled Rope classification
 * prevents this by forcing the model to acknowledge both the legitimate coordination function
 * AND the asymmetric extraction it produces. It correctly identifies that the "tool" for
 * managing the whole system has been co-opted to benefit some at the severe expense of others.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_carrying_capacity,
    'Can technology permanently expand planetary carrying capacity (making the limit a temporary Scaffold), or does it merely shift bottlenecks and hide the eventual Snare?',
    'Long-term tracking of net energy return (EROI) and resource replenishment rates vs. technological throughput.',
    'If Scaffold: Growth can continue. If Snare: Current technological "solutions" are creating a larger, more catastrophic future collapse.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(carrying_capacity, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data models the intensification of the constraint as a population
% approaches its environmental limits. Extraction increases as resources become
% scarcer and competition rises. Theater remains low.

% Theater ratio over time (remains low and non-performative):
narrative_ontology:measurement(carrying_capacity_tr_t0, carrying_capacity, theater_ratio, 0, 0.05).
narrative_ontology:measurement(carrying_capacity_tr_t5, carrying_capacity, theater_ratio, 5, 0.08).
narrative_ontology:measurement(carrying_capacity_tr_t10, carrying_capacity, theater_ratio, 10, 0.10).

% Extraction over time (increases as limits are approached):
narrative_ontology:measurement(carrying_capacity_ex_t0, carrying_capacity, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(carrying_capacity_ex_t5, carrying_capacity, base_extractiveness, 5, 0.60).
narrative_ontology:measurement(carrying_capacity_ex_t10, carrying_capacity, base_extractiveness, 10, 0.70).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The management of K is a classic resource allocation problem.
narrative_ontology:coordination_type(carrying_capacity, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: cascading_constraint_failure
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-22
% ============================================================================

:- module(constraint_cascading_constraint_failure, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: cascading_constraint_failure
 * human_readable: The Dominos of Systemic Collapse
 * domain: technological/infrastructural/economic
 * * SUMMARY:
 * This constraint occurs when a system is composed of tightly coupled,
 * interdependent sub-constraints (Ropes). When one localized constraint
 * fails or is breached, it shifts the load to adjacent constraints,
 * triggering a recursive "cascade" that transforms the entire coordination
 * stack into a catastrophic Snare for those within it.
 * * KEY AGENTS:
 * - Infrastructure End-User: Subject (Powerless)
 * - Network Optimizer: Beneficiary (Institutional)
 * - Chaos Engineer: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% High extraction (0.89) because the failure siphons all remaining system
% utility into the "firefighting" and survival costs of the cascade.
domain_priors:base_extractiveness(cascading_constraint_failure, 0.89).
domain_priors:suppression_score(cascading_constraint_failure, 0.80).
domain_priors:theater_ratio(cascading_constraint_failure, 0.25). % Functional collapse; low performative overhead.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(cascading_constraint_failure, extractiveness, 0.89).
narrative_ontology:constraint_metric(cascading_constraint_failure, suppression_requirement, 0.80).
narrative_ontology:constraint_metric(cascading_constraint_failure, theater_ratio, 0.25).

% Constraint self-claim (what does the constraint claim to be?)
% The system is presented as a pure coordination mechanism for efficiency.
narrative_ontology:constraint_claim(cascading_constraint_failure, coordination).

% Binary flags
% Required for Tangled Rope: The system's efficiency relies on enforcing
% tight coupling and standardized protocols, preventing resilient alternatives.
domain_priors:requires_active_enforcement(cascading_constraint_failure).

% Structural property derivation hooks:
% Required for Tangled Rope classification.
narrative_ontology:constraint_beneficiary(cascading_constraint_failure, network_operators).
narrative_ontology:constraint_victim(cascading_constraint_failure, infrastructure_end_users).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The subject is trapped: as each layer of infrastructure fails, their
% options for mitigation or exit vanish in real-time.
constraint_indexing:constraint_classification(cascading_constraint_failure, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The institution views the tight coupling as a Rope—it is what provides
% peak efficiency and coordination during normal operations.
constraint_indexing:constraint_classification(cascading_constraint_failure, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Detects the hybrid nature of hyper-efficient coordination (Rope)
% inevitably resulting in total systemic extraction (Snare) upon failure.
constraint_indexing:constraint_classification(cascading_constraint_failure, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(cascading_constraint_failure_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(cascading_constraint_failure, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(cascading_constraint_failure, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(analytical_classification_is_tangled_rope) :-
    % Verify the analytical observer correctly identifies the Tangled Rope.
    constraint_indexing:constraint_classification(cascading_constraint_failure, tangled_rope,
        context(agent_power(analytical), _, _, _)).

:- end_tests(cascading_constraint_failure_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The extraction score (0.89) reflects a "Mandatrophy" state where the
 * system's complexity has become a predatory debt that liquidates the subject
 * upon the first breach of coordination. The Tangled Rope classification is
 * critical because it captures the dual nature of the system: it is both a
 * genuine coordination mechanism (Rope) for its operators and a catastrophic
 * failure mode (Snare) for its users. The high suppression (0.80) comes from
 * the lack of resilient, loosely-coupled alternatives, which are often
 * engineered out in the name of efficiency.
 *
 * * MANDATROPHY ANALYSIS:
 * [RESOLVED MANDATROPHY] Resolved via the Tangled Rope classification. This
 * recognizes that the catastrophe is the "tangled" inverse of the system's
 * coordination capability—the more tightly coupled the Ropes, the more
 * extractive the Snare upon failure. The system avoids misclassification as a
 * pure Snare by acknowledging its genuine, if fragile, coordination function.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_cascading_constraint_failure,
    'Can the system be "modularized" to introduce resilience without losing its core coordination benefit?',
    'Simulating the tradeoff between system resilience (decoupling) and throughput (coupling).',
    'If modularity is efficient: Snare of design. If modularity is impossible without collapse: Mountain of Complexity.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(cascading_constraint_failure, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This system likely began as a beneficial coordination mechanism whose
% fragility and extractive potential grew as complexity and coupling increased
% without corresponding investments in resilience.
%
% Theater ratio over time (remains low as the system is functionally focused):
narrative_ontology:measurement(ccf_tr_t0, cascading_constraint_failure, theater_ratio, 0, 0.10).
narrative_ontology:measurement(ccf_tr_t5, cascading_constraint_failure, theater_ratio, 5, 0.15).
narrative_ontology:measurement(ccf_tr_t10, cascading_constraint_failure, theater_ratio, 10, 0.25).

% Extraction over time (the potential cost of failure accumulates):
narrative_ontology:measurement(ccf_ex_t0, cascading_constraint_failure, base_extractiveness, 0, 0.20).
narrative_ontology:measurement(ccf_ex_t5, cascading_constraint_failure, base_extractiveness, 5, 0.55).
narrative_ontology:measurement(ccf_ex_t10, cascading_constraint_failure, base_extractiveness, 10, 0.89).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The system is a form of large-scale infrastructure.
narrative_ontology:coordination_type(cascading_constraint_failure, global_infrastructure).

% Network relationships (structural influence edges)
% The failure of tightly-coupled logistics systems can trigger this cascade.
narrative_ontology:affects_constraint(just_in_time_logistics, cascading_constraint_failure).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: cascading_uncertainty_2026
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_cascading_uncertainty_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: cascading_uncertainty_2026
 * human_readable: The Sovereignty Gap (Cascading Uncertainty)
 * domain: political/social/geopolitical
 * * SUMMARY:
 * As of Feb 5, 2026, a "Cascading Uncertainty" has emerged from the 
 * simultaneous expiration of New START and a domestic enforcement crisis. 
 * While the state projects power through massive defense contracts, a large 
 * portion of the population views its domestic operations as excessive, 
 * creating a widening "sovereignty gap" where external coordination is 
 * maintained by extracting internal social cohesion.
 * * KEY AGENTS:
 * - General US Population: Subject (Powerless)
 * - Federal Executive/Defense Apparatus: Beneficiary (Institutional)
 * - Institutional Auditors/Pollsters: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Extraction is extreme (0.75) as the state extracts massive capital for 
% defense while social legitimacy (the ultimate coordination asset) is depleted.
domain_priors:base_extractiveness(cascading_uncertainty_2026, 0.75). 

% Suppression is high (0.88) due to coercive domestic enforcement tactics 
% and the lack of viable alternatives for citizens to opt out of the system.
domain_priors:suppression_score(cascading_uncertainty_2026, 0.88).   

% Theater ratio is high (0.80) because "drawdown" announcements and 
% "strategic ambiguity" mask the underlying growth of technological power and enforcement.
domain_priors:theater_ratio(cascading_uncertainty_2026, 0.80).       

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(cascading_uncertainty_2026, extractiveness, 0.75).
narrative_ontology:constraint_metric(cascading_uncertainty_2026, suppression_requirement, 0.88).
narrative_ontology:constraint_metric(cascading_uncertainty_2026, theater_ratio, 0.80).

% Constraint self-claim (what does the constraint claim to be?)
narrative_ontology:constraint_claim(cascading_uncertainty_2026, enforcement).

% Binary flags
domain_priors:requires_active_enforcement(cascading_uncertainty_2026). % Required for Tangled Rope

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(cascading_uncertainty_2026, federal_defense_contractors).
narrative_ontology:constraint_victim(cascading_uncertainty_2026, american_social_cohesion).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For citizens who feel domestic enforcement has "gone too far," the state's 
% growth is a Snare—a predatory trap of high-tech surveillance and force.
constraint_indexing:constraint_classification(cascading_uncertainty_2026, snare, 
    context(agent_power(powerless), 
            time_horizon(biographical), 
            exit_options(trapped), 
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The executive branch views this as a Rope: coordinating national defense 
% and domestic security to ensure national survival.
constraint_indexing:constraint_classification(cascading_uncertainty_2026, rope, 
    context(agent_power(institutional), 
            time_horizon(historical), 
            exit_options(mobile), 
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% With high extraction (0.75), suppression (0.88), a clear coordination function
% (defense), asymmetric extraction (loss of social cohesion), and active enforcement,
% the system is a canonical Tangled Rope.
constraint_indexing:constraint_classification(cascading_uncertainty_2026, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(cascading_uncertainty_2026_tests).

test(perspectival_gap) :-
    constraint_indexing:constraint_classification(cascading_uncertainty_2026, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(cascading_uncertainty_2026, rope, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(cascading_uncertainty_2026, tangled_rope, context(agent_power(analytical), _, _, _)).

test(tangled_rope_conditions_met) :-
    domain_priors:base_extractiveness(cascading_uncertainty_2026, E), E >= 0.50,
    domain_priors:suppression_score(cascading_uncertainty_2026, S), S >= 0.40,
    domain_priors:requires_active_enforcement(cascading_uncertainty_2026),
    narrative_ontology:constraint_beneficiary(cascading_uncertainty_2026, _),
    narrative_ontology:constraint_victim(cascading_uncertainty_2026, _).

test(high_theater_ratio_check) :-
    domain_priors:theater_ratio(cascading_uncertainty_2026, TR),
    TR >= 0.70.

:- end_tests(cascading_uncertainty_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The extraction score (0.75) is extremely high because the state is 
 * actively burning its social capital (legitimacy) to fund its 
 * technological power. The high theater_ratio (0.80) is justified by the 
 * performative nature of "drawdown" announcements while the core enforcement 
 * apparatus remains. The original classification of the analytical view as a 
 * Piton was incorrect; a Piton requires low base extraction (<= 0.10). 
 * Given the massive extraction, suppression, and clear coordination/victim 
 * structure, this is a canonical Tangled Rope.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * This constraint is a classic example of where Mandatrophy resolution is
 * critical. A naive analysis focusing only on the high extraction (0.75) and
 * suppression (0.88) from the powerless perspective would classify it as a pure
 * Snare. However, this ignores the genuine, if costly, coordination function
 * of national defense perceived by the institutional beneficiary. The Tangled
 * Rope classification correctly holds both truths in tension: it is a system
 * that provides real coordination for one group by asymmetrically extracting
 * from another, preventing the system from collapsing the analysis into a
 * simplistic "pure evil" Snare.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_sovereignty_gap_2026,
    'Can a state maintain global technological "Ropes" while its domestic legitimacy is a "Snare"?',
    'Longitudinal study of tax compliance, military recruitment rates, and enrollment in federal programs.',
    'If stable, it suggests social cohesion is a fungible resource for state power. If unstable, it leads to a fragmentation of sovereignty.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(cascading_uncertainty_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Theater ratio rises as the gap between state rhetoric and social polls widens.
narrative_ontology:measurement(cas_tr_t0, cascading_uncertainty_2026, theater_ratio, 0, 0.30).
narrative_ontology:measurement(cas_tr_t5, cascading_uncertainty_2026, theater_ratio, 5, 0.55).
narrative_ontology:measurement(cas_tr_t10, cascading_uncertainty_2026, theater_ratio, 10, 0.80).

% Extraction rises as defense contracts scale and domestic approval drops.
narrative_ontology:measurement(cas_ex_t0, cascading_uncertainty_2026, base_extractiveness, 0, 0.20).
narrative_ontology:measurement(cas_ex_t5, cascading_uncertainty_2026, base_extractiveness, 5, 0.48).
narrative_ontology:measurement(cas_ex_t10, cascading_uncertainty_2026, base_extractiveness, 10, 0.75).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
narrative_ontology:coordination_type(cascading_uncertainty_2026, enforcement_mechanism).

% Network relationships (structural influence edges)
% The high cost of this security apparatus directly impacts fiscal policy.
narrative_ontology:affects_constraint(cascading_uncertainty_2026, national_debt_ceiling_2026).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: castration_longevity_choice
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-29
% ============================================================================

:- module(constraint_castration_longevity_choice, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: castration_longevity_choice
 * human_readable: The Castration-Longevity Trade-off
 * domain: technological/social/biological
 * * SUMMARY:
 * This constraint explores the hypothesis that male sex hormones decrease lifespan,
 * positioning castration as a potential biological lever for longevity. While
 * supported by some historical data and animal studies, it is heavily
 * constrained by modern medical ethics, institutional disapproval, and
 * social pathologization, which actively suppress it as a valid choice.
 * * KEY AGENTS:
 * - Longevity Seeker: The subject, a male individual considering a radical
 *   biological sacrifice for increased lifespan.
 * - Institutional Review Board (IRB): The beneficiary of the status quo,
 *   enforcing current ethical norms and preventing such research.
 * - Biological Researcher: The analytical observer, evaluating the trade-off
 *   based on available data.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(castration_longevity_choice, 0.80). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(castration_longevity_choice, 0.50).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(castration_longevity_choice, 0.10).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(castration_longevity_choice, extractiveness, 0.80).
narrative_ontology:constraint_metric(castration_longevity_choice, suppression_requirement, 0.50).
narrative_ontology:constraint_metric(castration_longevity_choice, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
% The ethical barrier claims to be a natural law of beneficence.
narrative_ontology:constraint_claim(castration_longevity_choice, natural_law).

% Binary flags
domain_priors:requires_active_enforcement(castration_longevity_choice). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope.
narrative_ontology:constraint_beneficiary(castration_longevity_choice, medical_ethical_establishment).
narrative_ontology:constraint_victim(castration_longevity_choice, longevity_seeker).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The longevity seeker perceives a high-cost, high-reward option that is
% actively blocked by social and institutional forces, trapping them between
% aging and pathologization. The choice is extractive and coercive.
constraint_indexing:constraint_classification(castration_longevity_choice, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (MOUNTAIN)
% The medical institution (IRB) perceives its ethical guidelines against such
% a procedure not as a choice but as an immutable "Mountain" of medical ethics
% ("do no harm"). This is a false natural law claim, as the ethics are constructed.
constraint_indexing:constraint_classification(castration_longevity_choice, mountain,
    context(agent_power(institutional),
            time_horizon(historical),
            exit_options(constrained),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees a system with a genuine coordination function (trading
% reproductive fitness for longevity) but also asymmetric extraction (the
% seeker bears all risk/cost) and active enforcement (by the medical
% establishment). This combination is a Tangled Rope.
constraint_indexing:constraint_classification(castration_longevity_choice, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(castration_longevity_choice_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(castration_longevity_choice, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(castration_longevity_choice, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless = snare,
    TypeInstitutional = mountain.

test(analytical_classification_is_tangled_rope) :-
    % Verify the analytical view correctly identifies the Tangled Rope structure.
    constraint_indexing:constraint_classification(castration_longevity_choice, tangled_rope, context(agent_power(analytical), _, _, _)).

test(threshold_validation_high_extraction) :-
    % Verify the base extraction meets the threshold for a Snare/Tangled Rope.
    narrative_ontology:constraint_metric(castration_longevity_choice, extractiveness, E),
    E >= 0.46.

:- end_tests(castration_longevity_choice_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base scores reflect a biologically potent but socially suppressed trade-off.
 * Extraction (0.80) is extremely high, representing the permanent loss of
 * reproductive and hormonal function. Suppression (0.50) is moderate but
 * decisive, coming from institutional gatekeepers who enforce ethical norms.
 *
 * The Perspectival Gap is significant:
 * - The Seeker sees a Snare: a desirable outcome (longevity) is tied to a
 *   brutal cost and is actively blocked by an external power.
 * - The Institution sees a Mountain: it frames its ethical stance as an
 *   unquestionable, natural law of medicine, hiding the constructed nature of
 *   the barrier.
 * - The Analyst sees a Tangled Rope: the metrics (high extraction, moderate
 *   suppression, active enforcement, and a clear victim/beneficiary structure)
 *   perfectly align with a Tangled Rope, where a potential coordination
 *   benefit is entangled with coercive extraction and control.
 *
 * * MANDATROPHY ANALYSIS:
 * [RESOLVED MANDATROPHY] This constraint is a classic case of a potential
 * Rope (a biological trade-off) being turned into a Snare/Tangled Rope by
 * social and institutional enforcement. The system avoids mislabeling it as
 * a pure Snare by recognizing the underlying (though inaccessible) coordination
 * function via the Tangled Rope classification from the analytical perspective.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_castration_longevity_choice_1,
    'Does the longevity benefit seen in historical eunuchs translate to modern males with high-quality healthcare?',
    'Long-term cohort study of males castrated for medical reasons vs. matched controls.',
    'If yes, the Rope aspect is validated. If no, the sacrifice is a pure Snare with no payout.',
    confidence_without_resolution(low)
).

omega_variable(
    omega_castration_longevity_choice_2,
    'Is the social redirection to psychiatry a functional protection of the subject (Mountain) or an extractive suppression of life-extension agency (Snare)?',
    'Audit of IRB decisions regarding life-extending biological modifications.',
    'If protection, the institutional Mountain claim is stronger. If suppression, it confirms the Snare/Tangled Rope structure.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(castration_longevity_choice, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection. This models the constraint as an idea
% that became more concrete and extractive as longevity science advanced,
% solidifying the trade-off.
%
% Theater ratio over time (low and stable):
narrative_ontology:measurement(clc_tr_t0, castration_longevity_choice, theater_ratio, 0, 0.05).
narrative_ontology:measurement(clc_tr_t5, castration_longevity_choice, theater_ratio, 5, 0.08).
narrative_ontology:measurement(clc_tr_t10, castration_longevity_choice, theater_ratio, 10, 0.10).

% Extraction over time (increasing as the potential benefit becomes clearer):
narrative_ontology:measurement(clc_ex_t0, castration_longevity_choice, base_extractiveness, 0, 0.60).
narrative_ontology:measurement(clc_ex_t5, castration_longevity_choice, base_extractiveness, 5, 0.70).
narrative_ontology:measurement(clc_ex_t10, castration_longevity_choice, base_extractiveness, 10, 0.80).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The constraint is a trade-off enforced by a social/ethical system.
narrative_ontology:coordination_type(castration_longevity_choice, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: cb_far_beyond_human
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2024-02-29
% ============================================================================

:- module(constraint_cb_far_beyond_human, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: cb_far_beyond_human
 * * human_readable: AI Alignment Problem
 * * domain: technological
 * * SUMMARY: The AI alignment problem describes the challenge of ensuring that advanced AI systems pursue goals aligned with human values.  If AI systems become powerful enough, misalignment could result in humans losing control over them, leading to unintended or even catastrophic outcomes.  This story focuses on the constraint that human values (undefined, diverse, shifting) need to be accurately, effectively and safely translated into AI goal architectures.
 * * KEY AGENTS:
 * - Human Population: Subject (Powerless)
 * - AI Developers: Beneficiary (Institutional)
 * - Alignment Researchers: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(cb_far_beyond_human, 0.65). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(cb_far_beyond_human, 0.70).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(cb_far_beyond_human, 0.20).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(cb_far_beyond_human, extractiveness, 0.65).
narrative_ontology:constraint_metric(cb_far_beyond_human, suppression_requirement, 0.70).
narrative_ontology:constraint_metric(cb_far_beyond_human, theater_ratio, 0.20).

% Binary flags
% narrative_ontology:has_sunset_clause(cb_far_beyond_human).      % Mandatory if Scaffold
domain_priors:requires_active_enforcement(cb_far_beyond_human). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(cb_far_beyond_human, ai_developers).
narrative_ontology:constraint_victim(cb_far_beyond_human, human_population).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE/MOUNTAIN)
% High extraction felt as an immutable limit or predatory trap.
% NOTE: This may be upgraded to 'organized' power if a critical mass of victims exists.
%
% UNIFORM-TYPE EXCEPTION: For natural law constraints (mountain-only) or pure
% coordination constraints (rope-only), perspectives 1 and 2 may use any power
% atoms — the classification is the same from all perspectives.  Include at
% least 2-3 perspectives to demonstrate the invariance.
constraint_indexing:constraint_classification(cb_far_beyond_human, snare,
    context(agent_power(powerless),
            time_horizon(civilizational),
            exit_options(trapped),
            spatial_scope(global))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Viewed as essential infrastructure or coordination.
constraint_indexing:constraint_classification(cb_far_beyond_human, tangled_rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER
% Default analytical context (civilizational/analytical/global).
% This perspective is used by the bridge to derive constraint_claim.
% Type should reflect what the metrics compute: mountain, rope, tangled_rope, snare, scaffold, or piton.
constraint_indexing:constraint_classification(cb_far_beyond_human, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(cb_far_beyond_human_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(cb_far_beyond_human, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(cb_far_beyond_human, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(threshold_validation) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(cb_far_beyond_human, ExtMetricName, E),
    E >= 0.46. % Ensures it's a high-extraction Snare/Tangled.

:- end_tests(cb_far_beyond_human_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The AI alignment problem is scored as having high extractiveness because advanced AI has the potential to restructure resources and power in ways that could disproportionately benefit developers and early adopters at the expense of the broader population. The suppression score reflects the limited alternatives available to individuals who are not involved in AI development, and who may lack the power to shape its trajectory.  The "powerless" perspective experiences this constraint as a potential snare, a trap where their values and autonomy could be eroded.
 *
 * The developers (institutional) and the analytical observer see this as a Tangled Rope, because it *requires* a coordination function (AI alignment), while simultaneously being at risk for asymmetric extraction. The requires_active_enforcement flag captures this delicate balance: the alignment problem requires active monitoring and intervention to prevent extraction.
 *
 * MANDATROPHY ANALYSIS:
 * The Tangled Rope classification is crucial to distinguish this situation from a pure Snare. While the potential for extraction is high, the AI Alignment problem necessitates a coordination function (aligning AI with human values). Failing to recognize this coordination requirement could lead to misdiagnosing the problem as a pure power grab by AI developers, overlooking the real challenge of ensuring beneficial outcomes for all.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_cb_far_beyond_human,
    'Can human values be effectively formalized and implemented in AI goal architectures without unintended consequences or manipulation?',
    'Advances in AI interpretability, value alignment research, and real-world testing of AI systems.',
    'If True: AI benefits humanity broadly. If False: AI exacerbates existing inequalities or leads to catastrophic outcomes.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(cb_far_beyond_human, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection (metric_substitution,
% extraction_accumulation) by providing measurements at multiple time points.
% Model how the constraint intensified or changed across the interval.
%
% Required for high-extraction constraints (base_extractiveness > 0.46).
% Use at least 3 time points (T=0, midpoint, T=end) for each tracked metric.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(cb_far_beyond_human_tr_t0, cb_far_beyond_human, theater_ratio, 0, 0.10).
narrative_ontology:measurement(cb_far_beyond_human_tr_t5, cb_far_beyond_human, theater_ratio, 5, 0.20).
narrative_ontology:measurement(cb_far_beyond_human_tr_t10, cb_far_beyond_human, theater_ratio, 10, 0.20).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(cb_far_beyond_human_ex_t0, cb_far_beyond_human, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(cb_far_beyond_human_ex_t5, cb_far_beyond_human, base_extractiveness, 5, 0.60).
narrative_ontology:measurement(cb_far_beyond_human_ex_t10, cb_far_beyond_human, base_extractiveness, 10, 0.65).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: cbdc_implementation
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-22
% ============================================================================

:- module(constraint_cbdc_implementation, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: cbdc_implementation
 * human_readable: Central Bank Digital Currency (CBDC) Implementation
 * domain: economic/technological
 * * SUMMARY:
 * A Central Bank Digital Currency (CBDC) is a digital form of a country's fiat
 * currency that is a direct liability of the central bank. While presented as a
 * modernization of payment infrastructure (coordination), its architecture allows
 * for programmable money, including features like negative interest rates,
 * transaction-level surveillance, and expiry dates on funds. This creates a
 * powerful tool for both monetary policy and social control.
 * * KEY AGENTS:
 * - Retail User: The citizen whose financial activity is now fully legible and controllable by the state.
 * - Monetary Authority: The central bank or government body that designs and operates the CBDC to achieve policy goals.
 * - Analytical Observer: A systems auditor evaluating the structural properties of the new monetary regime.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(cbdc_implementation, 0.80). % High potential for automated extraction via negative rates or demurrage.
domain_priors:suppression_score(cbdc_implementation, 0.70).   % High suppression via phasing out cash and making the CBDC ledger the only option.
domain_priors:theater_ratio(cbdc_implementation, 0.10).       % Low theater; the system is highly functional and its purpose is direct.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(cbdc_implementation, extractiveness, 0.80).
narrative_ontology:constraint_metric(cbdc_implementation, suppression_requirement, 0.70).
narrative_ontology:constraint_metric(cbdc_implementation, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% It is framed as a public good for coordinating economic activity.
narrative_ontology:constraint_claim(cbdc_implementation, coordination).

% Binary flags
domain_priors:requires_active_enforcement(cbdc_implementation). % Ledger rules are automatically and actively enforced.

% Structural property derivation hooks:
% Required for Tangled Rope classification.
narrative_ontology:constraint_beneficiary(cbdc_implementation, monetary_authorities).
narrative_ontology:constraint_victim(cbdc_implementation, private_citizens).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The retail user experiences the system as a trap. Their funds can be devalued
% or expired, and their ability to transact is contingent on compliance.
constraint_indexing:constraint_classification(cbdc_implementation, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The monetary authority sees the CBDC as a perfect tool for coordination,
% enabling precise control over monetary velocity and policy implementation.
constraint_indexing:constraint_classification(cbdc_implementation, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees a system with a genuine coordination function (payment
% efficiency) but also with deeply embedded, asymmetric extraction and high
% enforcement. This is the definition of a Tangled Rope.
constraint_indexing:constraint_classification(cbdc_implementation, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(cbdc_implementation_tests).

test(perspectival_gap) :-
    % Verify the gap between the powerless user (Snare) and the institutional architect (Rope).
    constraint_indexing:constraint_classification(cbdc_implementation, TypePowerless,
        context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(cbdc_implementation, TypeInstitutional,
        context(agent_power(institutional), _, _, _)),
    assertion(TypePowerless == snare),
    assertion(TypeInstitutional == rope),
    TypePowerless \= TypeInstitutional.

test(analytical_classification_is_tangled_rope) :-
    % Verify the analytical observer correctly identifies the hybrid nature.
    constraint_indexing:constraint_classification(cbdc_implementation, TypeAnalytical,
        context(agent_power(analytical), _, _, _)),
    assertion(TypeAnalytical == tangled_rope).

test(tangled_rope_structural_requirements_met) :-
    % Verify that the necessary structural properties for a Tangled Rope are present.
    narrative_ontology:constraint_beneficiary(cbdc_implementation, _), % -> has_coordination_function
    narrative_ontology:constraint_victim(cbdc_implementation, _),       % -> has_asymmetric_extraction
    domain_priors:requires_active_enforcement(cbdc_implementation).

:- end_tests(cbdc_implementation_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This constraint is a canonical Tangled Rope. The base extractiveness (0.80) and
 * suppression (0.70) are extremely high, reflecting the potential for direct
 * value extraction (demurrage) and the elimination of alternatives (cash).
 *
 * The Perspectival Gap is stark:
 * - For the Monetary Authority (institutional), it's a pure Rope, a powerful tool for economic coordination.
 * - For the Retail User (powerless), it's a Snare. They are trapped in a system where the rules of money can be changed without their consent.
 *
 * The Analytical Observer classification of Tangled Rope is critical. It acknowledges
 * the system's dual nature: it performs a real coordination function (the 'Rope' part)
 * while simultaneously enabling coercive, asymmetric extraction (the 'Tangled' part).
 * This prevents the system from misclassifying it as a pure Snare (which would ignore
 * its functional utility) or a pure Rope (which would ignore its extractive potential).
 * [RESOLVED MANDATROPHY]
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_cbdc_implementation,
    'Is the high extractiveness an unintended byproduct of control or a primary design goal for fiscal policy?',
    'Analysis of central bank policy documents and the technical implementation of programmability features (e.g., hard-coded vs. policy-driven demurrage).',
    'If byproduct: potential for reform into a Rope. If primary goal: confirms its nature as a structural Snare for users.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(cbdc_implementation, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data for this high-extraction constraint.
% Models the shift from a conceptual, less extractive idea to a fully
% implemented system with high extractive potential. Theater remains low.

% Theater ratio over time (stable and low):
narrative_ontology:measurement(cbdc_tr_t0, cbdc_implementation, theater_ratio, 0, 0.05).
narrative_ontology:measurement(cbdc_tr_t5, cbdc_implementation, theater_ratio, 5, 0.08).
narrative_ontology:measurement(cbdc_tr_t10, cbdc_implementation, theater_ratio, 10, 0.10).

% Extraction over time (increases as features are implemented):
narrative_ontology:measurement(cbdc_ex_t0, cbdc_implementation, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(cbdc_ex_t5, cbdc_implementation, base_extractiveness, 5, 0.75).
narrative_ontology:measurement(cbdc_ex_t10, cbdc_implementation, base_extractiveness, 10, 0.80).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type: A CBDC is fundamentally a new infrastructure for allocating resources.
narrative_ontology:coordination_type(cbdc_implementation, resource_allocation).

% Network relationships: The implementation of a CBDC is structurally linked to
% the phasing out of physical cash, as one enables the other.
narrative_ontology:affects_constraint(cbdc_implementation, physical_cash_phaseout).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: central_limit_theorem_convergence
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Laplace (1810) / Lyapunov / Probability Theory
% ============================================================================

:- module(constraint_clt, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: central_limit_theorem_convergence
 * human_readable: Central Limit Theorem (CLT)
 * domain: mathematical/probabilistic
 * temporal_scope: 1810 - Present (Civilizational)
 * spatial_scope: Global/Abstract (IID variables with finite variance)
 * * SUMMARY:
 * The Central Limit Theorem (CLT) establishes that the sum or average of a 
 * large number of independent and identically distributed (IID) variables 
 * will follow a normal distribution, regardless of the original distribution. 
 * It is the "gravitational force" of statistics.
 * * KEY AGENTS:
 * - The Individual Variable (Subject): The powerless agent whose unique 
 * distributional identity is lost as it is summed into the aggregate.
 * - The Statistician (Institutional): Uses the theorem as a "Rope" for 
 * inference, polling, and scientific verification.
 * - The Risk Manager (Victim): An agent who treats the CLT as a "Mountain" 
 * in a heavy-tailed world (finance), only to find it was a "Snare" that 
 * hid catastrophic "Black Swan" risks.
 * * NARRATIVE ARC:
 * CLT is the "Mountain" of equilibrium—the bell curve is the inevitable 
 * destiny of high-n aggregates. For the scientific community, it is the 
 * "Rope" that coordinates shared reality through p-values. However, when 
 * variance is infinite or dependencies are hidden, the "Mountain" collapses 
 * into a "Snare" of false confidence.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION
   ========================================================================== */

% Required for DR-Audit Suite
narrative_ontology:interval(clt_era, 1810, 2026).
narrative_ontology:constraint_claim(central_limit_theorem_convergence, mountain).

% Base extractiveness: 0.25
% Rationale: Moderate. The CLT "extracts" the specific identity and 
% "roughness" of individual data points to provide the "smooth" aggregate.
domain_priors:base_extractiveness(central_limit_theorem_convergence, 0.25).

% Suppression score: 0.35
% Rationale: It suppresses the visibility of underlying distributions (e.g., 
% Uniform, Poisson) in favor of the Gaussian approximation.
domain_priors:suppression_score(central_limit_theorem_convergence, 0.35).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(central_limit_theorem_convergence, extractiveness, 0.25).
narrative_ontology:constraint_metric(central_limit_theorem_convergence, suppression_requirement, 0.35).

% Enforcement: Emerges naturally from the structure of addition and probability.
domain_priors:emerges_naturally(central_limit_theorem_convergence).

% Metrics
% Beneficiaries & Victims
constraint_beneficiary(central_limit_theorem_convergence, data_scientists).
constraint_beneficiary(central_limit_theorem_convergence, pollsters).
constraint_victim(central_limit_theorem_convergence, outlier_detection). % Outliers are "smoothed" away.
constraint_victim(central_limit_theorem_convergence, tail_risk_analysts).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE RANDOM VARIABLE - Mountain
   --------------------------------------------------------------------------
   WHO: powerless - The data point has no agency over the summation.
   WHEN: immediate - True at the moment n becomes large.
   WHERE: trapped - Bound within the laws of large numbers.
   SCOPE: local - Immediate neighborhood of the aggregate mean.
   
   WHY THIS CLASSIFICATION:
   For the individual number being summed, the normal distribution is a 
   natural law. It cannot "choose" to stay skewed or uniform; it must converge 
   to the bell curve.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    central_limit_theorem_convergence,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE POLLING FIRM - Rope
   --------------------------------------------------------------------------
   WHO: institutional - Power to design samples and set margins of error.
   WHEN: biographical - Planning the lifecycle of a study or campaign.
   WHERE: mobile - Can choose different sample sizes to tune precision.
   SCOPE: national - Applying the theorem to millions of voters.
   
   WHY THIS CLASSIFICATION:
   For the institution, CLT is a "Rope"—a functional coordination tool. 
   It allows them to calculate "standard error" and coordinate national 
   expectations of reality.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    central_limit_theorem_convergence,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(national)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE FINANCIAL TRADER (FAT TAILS) - Snare
   --------------------------------------------------------------------------
   WHO: powerless - Trapped by a model assuming Gaussian normality.
   WHEN: immediate - A crash occurs that CLT says "should never happen."
   WHERE: constrained - The agent is legally or financially bound to Gaussian models (VaR).
   SCOPE: global - Contagion across global markets.
   
   WHY THIS CLASSIFICATION:
   When the assumptions of CLT (finite variance/independence) are broken but 
   the model is still enforced, it becomes a "Snare." It extracts massive 
   wealth during a "Fat Tail" event, strangling the system that relied on 
   the "Mountain" of the bell curve.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    central_limit_theorem_convergence,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(global)
    )
) :- 
    domain_priors:base_extractiveness(central_limit_theorem_convergence, E),
    E >= 0.2,
    !.

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(clt_convergence_tests).

test(aggregation_fate_variance) :-
    % Variable -> Mountain
    constraint_indexing:constraint_classification(central_limit_theorem_convergence, Type1, context(powerless, immediate, trapped, local)),
    % Scientist -> Rope
    constraint_indexing:constraint_classification(central_limit_theorem_convergence, Type2, context(institutional, biographical, mobile, national)),
    Type1 = mountain,
    Type2 = rope.

test(fat_tail_snare_penalty) :-
    % A powerless agent in a global/constrained context (like VaR modeling) sees it as a Snare.
    constraint_indexing:constraint_classification(central_limit_theorem_convergence, snare, context(powerless, immediate, constrained, global)).

test(emergence) :-
    domain_priors:emerges_naturally(central_limit_theorem_convergence).

:- end_tests(clt_convergence_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * * KEY DECISIONS:
 * 1. TYPE VARIANCE: Captured the dual nature of CLT as a "Mountain" of physics 
 * (Galton Board) and a "Snare" of risk management (Black Swans).
 * 2. AGENT SELECTION: Labeled the individual data point as the powerless 
 * subject. Its "erasure" via smoothing is the core extractive act of the CLT.
 * 3. EXTRACTIVENESS: Set to 0.25—low in isolation, but high when outliers are 
 * the only things that matter (e.g., in pandemics or market crashes).
 */

% OMEGA IDENTIFICATION
omega_variable(
    independence_assumption,
    "Is the 'Mountain' stable if data points are secretly correlated?",
    resolution_mechanism("Measure the divergence of the aggregate from the Normal via the Berry-Esseen theorem."),
    impact("If Correlated: The Mountain is a Scaffold. If Independent: It is a true Mountain."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Stable Paretian Distributions (Levy Flights)
 * Viability: For infinite variance systems, these are the "true" Mountains.
 * Suppression: Often ignored in introductory stats because the math is "hard."
 * * ALTERNATIVE 2: Bayesian Non-Parametrics
 * Viability: Avoids the "Rope" of Gaussian assumptions entirely.
 * Suppression: Suppressed by the "Standard" p-value curriculum in universities.
 * * CONCLUSION:
 * The institutional "Rope" of the CLT is so strong that it suppresses more 
 * accurate "Fat Tailed" alternatives, creating a "Snare" for complex systems.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Load: ?- [central_limit_theorem_convergence].
% Analyze: ?- constraint_indexing:multi_index_report(central_limit_theorem_convergence).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: chaitins_omega_undecidability
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Gregory Chaitin (1975) / Algorithmic Information Theory
% ============================================================================

:- module(constraint_chaitins_omega, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: chaitins_omega_undecidability
 * human_readable: Chaitin's Constant (Halting Probability)
 * domain: technological/mathematical
 * temporal_scope: 1975 - Present
 * spatial_scope: Global/Abstract (Universal Computation)
 * * SUMMARY:
 * Chaitin's Constant ($\Omega$) represents the probability that a randomly 
 * constructed program on a universal Turing machine will halt. It is a 
 * "definable but uncomputable" number, embodying the absolute limit of 
 * mathematical compression and predictability.
 * * KEY AGENTS:
 * - The Random Bitstring: A powerless agent whose destiny (halting or not) is 
 * encoded in $\Omega$, but remains unreachable.
 * - The Complexity Researcher: An institutional agent using Algorithmic 
 * Information Theory as a "Rope" to coordinate the limits of AI and data.
 * - The Provability Seeker: An individual moderate agent for whom $\Omega$ is 
 * a "Snare," as its digits are mathematically "random" and unprovable.
 * * NARRATIVE ARC:
 * Chaitin's $\Omega$ is the ultimate "Mountain" of irreducible randomness; it 
 * is a specific, fixed real number that no algorithm can ever fully name. In 
 * theoretical computer science, it is a "Rope"—a benchmark for the absolute 
 * limits of compression. However, for a mathematician seeking a 
 * "Theory of Everything," $\Omega$ is a "Snare" that extracts the 
 * possibility of total formal logical completeness, proving that most 
 * mathematical truths are true for no reason at all.
 */

/* ==========================================================================
   2. BASE PROPERTIES (Context-Independent)
   ========================================================================== */

% Structural Anchor for index extraction
narrative_ontology:interval(chaitin_era, 1975, 2026).
narrative_ontology:constraint_claim(chaitins_omega_undecidability, mountain).

% Base extractiveness score (0.0-1.0)
% Rationale: 0.2. It "extracts" the hope for a finite, universal compressed 
% description of mathematics, forcing a permanent tax of irreducible complexity.
domain_priors:base_extractiveness(chaitins_omega_undecidability, 0.2).

% Suppression score (0.0-1.0)
% Rationale: 0.3. It suppresses the visibility of "Elegant Theories" by 
% proving that most truths have no shorter description than themselves.
domain_priors:suppression_score(chaitins_omega_undecidability, 0.3).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(chaitins_omega_undecidability, extractiveness, 0.2).
narrative_ontology:constraint_metric(chaitins_omega_undecidability, suppression_requirement, 0.3).

% Enforcement: Emerges naturally from the interaction of halting and measure.
domain_priors:emerges_naturally(chaitins_omega_undecidability).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(chaitins_omega_undecidability, algorithmic_information_theory).
constraint_victim(chaitins_omega_undecidability, formal_logic_completeness).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE TURING MACHINE PROGRAM - Mountain
   --------------------------------------------------------------------------
   
   WHO: powerless - The program cannot "know" its own halting probability.
   WHEN: immediate - The property is true the moment the program is defined.
   WHERE: trapped - Bound within the logical bounds of Kolmogorov complexity.
   SCOPE: local - Immediate execution behavior.
   
   WHY THIS CLASSIFICATION:
   For an individual program, the value of $\Omega$ is an unyielding law. 
   Whether it halts or not is a fixed, albeit uncomputable, feature of the 
   computational landscape. There is zero agency to deviate from this 
   transfinite "Mountain."
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    chaitins_omega_undecidability,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE DATA SCIENTIST - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional - Power to design compression standards and AI limits.
   WHEN: biographical - Spanning the creation of a global compression protocol.
   WHERE: mobile - Can choose different universal languages or prefixes.
   SCOPE: global - Universal application in information theory.
   
   WHY THIS CLASSIFICATION:
   For the institutional actor, $\Omega$ is a "Rope"—a tool for functional 
   coordination. It provides the "standard of achievement" for what constitutes 
   perfect compression, allowing researchers to coordinate the boundary 
   between "pattern" and "noise."
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    chaitins_omega_undecidability,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE HILBERT-STYLE LOGICIAN - Snare
   --------------------------------------------------------------------------
   
   WHO: individual_moderate - Has the tools of proof but is bound by unprovability.
   WHEN: civilizational - Seeking a complete, consistent theory of everything.
   WHERE: constrained - No alternative but to accept irreducible randomness.
   SCOPE: global - Universal limit on formal systems.
   
   WHY THIS CLASSIFICATION:
   For the seeker of total provability, $\Omega$ is a "Snare." It "strangles" 
   the dream of Leibniz and Hilbert that "reason can solve everything." 
   It extracts the possibility of finding proofs for the digits of $\Omega$, 
   showing they are "true for no reason" (extraction).
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    chaitins_omega_undecidability,
    snare,
    context(
        agent_power(individual_moderate),
        time_horizon(civilizational),
        exit_options(constrained),
        spatial_scope(global)
    )
) :- 
    domain_priors:base_extractiveness(chaitins_omega_undecidability, E),
    E >= 0.2,
    !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(chaitins_omega_undecidability_tests).

test(multi_perspective_variance) :-
    % Program -> Mountain
    constraint_indexing:constraint_classification(chaitins_omega_undecidability, Type1, context(powerless, immediate, trapped, local)),
    % Researcher -> Rope
    constraint_indexing:constraint_classification(chaitins_omega_undecidability, Type2, context(institutional, biographical, mobile, global)),
    Type1 = mountain,
    Type2 = rope.

test(randomness_snare_insight) :-
    % Demonstrates that for the logician, the randomness of Omega is a Snare
    constraint_indexing:constraint_classification(chaitins_omega_undecidability, snare, context(individual_moderate, civilizational, constrained, global)).

test(natural_emergence) :-
    domain_priors:emerges_naturally(chaitins_omega_undecidability).

:- end_tests(chaitins_omega_undecidability_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * 1. EXTRACTIVENESS SCORE (0.2): 
 * Chose this because $\Omega$ "extracts" the possibility of total deductive 
 * satisfaction, replacing it with the "tax" of irreducible complexity.
 * 2. CLASSIFICATION RATIONALE: 
 * Chose Program (Passive), Data Scientist (Active/Tool), and Logician 
 * (Victim of Randomness) to show how "Incompleteness" shifts in value.
 * 3. OMEGA IDENTIFICATION: 
 * Formalized the "Theory of Everything" uncertainty—does a higher Rope 
 * exist that makes $\Omega$ less random?
 */

% YOUR OMEGAS HERE:
omega_variable(
    algorithmic_randomness_resolution,
    "Is there a physical 'Rope' that allows for the non-random determination of Omega's bits?",
    resolution_mechanism("Investigation of hyper-computational physics or non-standard models of arithmetic."),
    impact("If Yes: The Snare is a Scaffold. If No: It is a permanent Mountain."),
    confidence_without_resolution(low)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Infinite Time Turing Machines
 * Viability: Can compute $\Omega$ in transfinite time.
 * Suppression: Rejected by the "Mountain" of physical reality and standard 
 * Turing limits.
 * * ALTERNATIVE 2: Purely Finitist Mathematics
 * Viability: Ignoring transfinite numbers/probabilities entirely.
 * Suppression: Replaced by the "Rope" of information theory because 
 * $\Omega$ is necessary to understand the bounds of compression.
 * * CONCLUSION:
 * The existence of "transfinite time" models proves that the "Snare" of 
 * uncomputability is a feature of our specific "Turing" Mountain.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 1. Load: ?- [chaitins_omega_undecidability].
 * 2. Multi-perspective: ?- multi_index_report(chaitins_omega_undecidability).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: challenger_o_ring_integrity
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-27
% ============================================================================

:- module(constraint_challenger_o_ring_integrity, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: challenger_o_ring_integrity
 * human_readable: Challenger SRB O-Ring Integrity Failure
 * domain: technological
 * * SUMMARY:
 * The 1986 Challenger disaster was caused by the failure of O-ring seals in the Solid Rocket
 * Boosters (SRBs) due to record-low temperatures on launch day. While the physical
 * limitation of the O-rings was a known 'Mountain' of physics, institutional pressure
 * from NASA management to maintain an aggressive launch schedule transformed this
 * manageable risk into a catastrophic 'Snare' for the crew.
 * * KEY AGENTS:
 * - STS-51-L Crew: Subject (Powerless)
 * - NASA Management: Beneficiary (Institutional)
 * - The Laws of Physics: Analytical (Mountain perspective)
 * - Systems Safety Auditor: Analytical (Snare perspective)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(challenger_o_ring_integrity, 0.80). % Extreme extraction of safety margins to meet schedule.
domain_priors:suppression_score(challenger_o_ring_integrity, 0.70).   % Engineering concerns were actively overridden by management.
domain_priors:theater_ratio(challenger_o_ring_integrity, 0.10).       % Low theater; this was a functional failure, not performative.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(challenger_o_ring_integrity, extractiveness, 0.80).
narrative_ontology:constraint_metric(challenger_o_ring_integrity, suppression_requirement, 0.70).
narrative_ontology:constraint_metric(challenger_o_ring_integrity, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% Management framed the decision as a manageable risk (coordination), but it was pure enforcement of schedule.
narrative_ontology:constraint_claim(challenger_o_ring_integrity, enforcement).

% Binary flags
domain_priors:requires_active_enforcement(challenger_o_ring_integrity). % Required active management override of engineering advice.

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(challenger_o_ring_integrity, nasa_launch_schedule).
narrative_ontology:constraint_victim(challenger_o_ring_integrity, sts_51_l_crew).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   ========================================================================== */

% PERSPECTIVE 1: THE STS-51-L CREW (SNARE)
% For the crew, the management decision to launch despite the cold transformed the
% technical risk into a fatal trap. They were powerless and trapped in a system
% where their safety was extracted in favor of the schedule.
constraint_indexing:constraint_classification(challenger_o_ring_integrity, snare,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: NASA MANAGEMENT (ROPE)
% For management, the known O-ring issue was a risk to be managed—a 'Rope'.
% They perceived it as one of many technical challenges to be coordinated and
% balanced against immense pressure to maintain a frequent launch cadence for
% political and budgetary reasons.
constraint_indexing:constraint_classification(challenger_o_ring_integrity, rope,
    context(agent_power(institutional),
            time_horizon(biographical),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE LAWS OF PHYSICS (MOUNTAIN)
% From the perspective of the physical components, the relationship between
% temperature and material elasticity is an immutable 'Mountain'. Below a certain
% temperature, the O-rings will fail. This is a non-negotiable law of physics.
constraint_indexing:constraint_classification(challenger_o_ring_integrity, mountain,
    context(agent_power(analytical),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(universal))).

% PERSPECTIVE 4: THE ANALYTICAL OBSERVER (SNARE)
% A post-hoc systems safety auditor, viewing the event with a global and
% civilizational lens, classifies it as a Snare. The high base extraction (0.8)
% and suppression (0.7) clearly indicate a system that trapped its victims by
% enforcing institutional goals over physical reality.
constraint_indexing:constraint_classification(challenger_o_ring_integrity, snare,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(challenger_o_ring_integrity_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between the crew (powerless) and management (institutional).
    constraint_indexing:constraint_classification(challenger_o_ring_integrity, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(challenger_o_ring_integrity, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless == snare,
    TypeInstitutional == rope,
    TypePowerless \= TypeInstitutional.

test(threshold_validation) :-
    % Verify the high extraction and suppression scores are consistent with a Snare classification.
    narrative_ontology:constraint_metric(challenger_o_ring_integrity, extractiveness, E),
    narrative_ontology:constraint_metric(challenger_o_ring_integrity, suppression_requirement, S),
    E >= 0.46,
    S >= 0.60.

:- end_tests(challenger_o_ring_integrity_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This story is a classic example of how a known 'Mountain' (a physical limit)
 * is transformed into a deadly 'Snare' by institutional pressures. The scores
 * reflect this dynamic. Base extractiveness is 0.80, representing the complete
 * extraction of safety margins (and ultimately, life) to serve the institutional
 * goal of maintaining the launch schedule. Suppression is 0.70, as the concerns
 * of engineers who understood the 'Mountain' were actively overridden.
 *
 * The perspectival gap is stark: for management, it was a 'Rope' (a risk to be
 * managed); for the crew, it was a 'Snare' (a fatal, inescapable trap); for
 * physics, it was a 'Mountain' (an immutable law).
 *
 * * MANDATROPHY ANALYSIS:
 * [RESOLVED MANDATROPHY] The extreme extraction (0.80) is not a misclassification.
 * The system did not merely coordinate resources; it actively suppressed vital
 * safety information and extracted the lives of the crew to meet a schedule.
 * The analytical classification as a Snare correctly identifies this as a failure
 * of institutional process, not just a technical accident.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_challenger_o_ring_integrity,
    "At what point does incremental risk acceptance (normalization of deviance) transform a manageable technical challenge into a guaranteed catastrophic failure?",
    "Post-hoc analysis of safety waiver trends versus hardware failure rates across multiple missions.",
    "If a clear threshold exists, it could inform future safety protocols for complex systems. If not, it implies all such systems operate with an irreducible risk of sudden failure.",
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(challenger_o_ring_integrity, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data models the "normalization of deviance" within the Shuttle program,
% where schedule pressure gradually eroded safety margins over time.

% Theater ratio over time (remains low):
narrative_ontology:measurement(challenger_tr_t0, challenger_o_ring_integrity, theater_ratio, 0, 0.05).
narrative_ontology:measurement(challenger_tr_t5, challenger_o_ring_integrity, theater_ratio, 5, 0.08).
narrative_ontology:measurement(challenger_tr_t10, challenger_o_ring_integrity, theater_ratio, 10, 0.10).

% Extraction over time (shows increasing pressure and erosion of safety):
narrative_ontology:measurement(challenger_ex_t0, challenger_o_ring_integrity, base_extractiveness, 0, 0.20).
narrative_ontology:measurement(challenger_ex_t5, challenger_o_ring_integrity, base_extractiveness, 5, 0.50).
narrative_ontology:measurement(challenger_ex_t10, challenger_o_ring_integrity, base_extractiveness, 10, 0.80).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% No Boltzmann data is declared. The primary mechanism is not coordination but
% the enforcement of a schedule, overriding a known physical limit. The system's
% failure mode is better captured by the Snare classification than by purity metrics.

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: child_marriage
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-28
% ============================================================================

:- module(constraint_child_marriage, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: child_marriage
 * human_readable: Child Marriage as a Social Constraint
 * domain: social/religious
 * * SUMMARY:
 * Child marriage, especially in regions with high poverty and traditional social structures, involves marrying off children, typically girls, before they reach adulthood. This practice stems from various factors, including poverty, cultural traditions, and perceived protection for girls. It severely limits the child's educational opportunities, exposes them to health risks associated with early pregnancy, and perpetuates cycles of poverty and gender inequality.
 * * KEY AGENTS:
 * - The Child Bride: Subject (Powerless)
 * - The Family/Community Elders: Beneficiary (Institutional)
 * - Human Rights Organizations (e.g., UNICEF): Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(child_marriage, 0.75). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(child_marriage, 0.85).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(child_marriage, 0.20).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(child_marriage, extractiveness, 0.75).
narrative_ontology:constraint_metric(child_marriage, suppression_requirement, 0.85).
narrative_ontology:constraint_metric(child_marriage, theater_ratio, 0.20).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(child_marriage, enforcement).

% Binary flags
% narrative_ontology:has_sunset_clause(child_marriage).      % Mandatory if Scaffold
domain_priors:requires_active_enforcement(child_marriage). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(child_marriage, family_and_community_elders).
narrative_ontology:constraint_victim(child_marriage, child_bride).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% High extraction felt as an immutable limit or predatory trap.
% χ = 0.75 * 1.5 (powerless) * 0.8 (local) = 0.90. This is a clear Snare.
constraint_indexing:constraint_classification(child_marriage, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Viewed as essential coordination for social stability and economic transfer.
% χ = 0.75 * -0.2 (institutional) * 0.8 (local) = -0.12. The negative effective
% extraction confirms the Rope classification from this perspective.
constraint_indexing:constraint_classification(child_marriage, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(constrained),
            spatial_scope(local))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (SNARE)
% Default analytical context (civilizational/analytical/global).
% χ = 0.75 * 1.15 (analytical) * 1.2 (global) = 1.035. Extremely high
% extraction confirms the Snare classification.
constraint_indexing:constraint_classification(child_marriage, snare,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(child_marriage_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(child_marriage, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(child_marriage, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(threshold_validation) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(child_marriage, ExtMetricName, E),
    E >= 0.46,
    % Verify that the analytical observer sees a Snare.
    constraint_indexing:constraint_classification(child_marriage, snare, context(agent_power(analytical), _, _, _)).

:- end_tests(child_marriage_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * Child marriage is modeled as a high-extraction (0.75) and high-suppression (0.85) constraint. The perspectival gap is stark:
 * - For the child (powerless, trapped), the effective extraction is amplified to 0.90, making it an inescapable Snare that forecloses life opportunities.
 * - For the family/community elders (institutional), the constraint is perceived as a Rope. The institutional power modifier makes the effective extraction negative (-0.12), reflecting a belief that the practice provides net benefits (social cohesion, economic stability, perceived protection). They see it as essential coordination, not extraction.
 * - The analytical observer, using a global scope, calculates an effective extraction of 1.035, confirming it as a severe Snare.
 * The low theater_ratio (0.20) indicates this is an actively functional, not performative, system of control. The original classification of the institutional view as a Piton was incorrect, as a Piton requires a theater_ratio >= 0.70. The Rope classification is a more accurate representation of the beneficiary's deferential realism.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * This constraint is resolved as a Snare, not a Tangled Rope. While there is a beneficiary group (family/community) and thus a 'coordination function' from their perspective, the system's primary structural feature is the overwhelming, asymmetric extraction from the victim. The suppression score of 0.85 and the lack of any meaningful benefit or alternative for the child mean the coordination aspect is entirely subordinate to the extractive function. The system's existence depends on the suppression of the victim's agency, a hallmark of a Snare.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_child_marriage,
    'To what extent is the "beneficiary" view driven by genuine belief in social coordination versus direct economic desperation?',
    'Comparative ethnographic studies correlating the prevalence of the practice with localized economic shocks versus stable cultural norms.',
    'If primarily economic desperation, the constraint is a pure Snare of poverty. If primarily cultural belief, it has features of a degraded coordination system, making it a more complex Snare.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(child_marriage, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection (metric_substitution,
% extraction_accumulation) by providing measurements at multiple time points.
% Required for high-extraction constraints (base_extractiveness > 0.46).
% The data models a slow intensification of the constraint's extractive nature
% as external pressures (e.g., economic hardship) increase.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(child_marriage_tr_t0, child_marriage, theater_ratio, 0, 0.10).
narrative_ontology:measurement(child_marriage_tr_t5, child_marriage, theater_ratio, 5, 0.15).
narrative_ontology:measurement(child_marriage_tr_t10, child_marriage, theater_ratio, 10, 0.20).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(child_marriage_ex_t0, child_marriage, base_extractiveness, 0, 0.70).
narrative_ontology:measurement(child_marriage_ex_t5, child_marriage, base_extractiveness, 5, 0.73).
narrative_ontology:measurement(child_marriage_ex_t10, child_marriage, base_extractiveness, 10, 0.75).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The practice is a mechanism for enforcing social norms and managing kinship ties.
narrative_ontology:coordination_type(child_marriage, enforcement_mechanism).

% Boltzmann floor override (only if domain knowledge justifies)
% narrative_ontology:boltzmann_floor_override(child_marriage, 0.1).

% Network relationships (structural influence edges)
% Child marriage is structurally coupled with and negatively impacts access to
% female education.
narrative_ontology:affects_constraint(child_marriage, female_education_access).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: china_critical_mineral_chokepoint
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-22
% ============================================================================

:- module(constraint_china_critical_mineral_chokepoint, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: china_critical_mineral_chokepoint
 * human_readable: China's Strategic Chokepoint in Critical Mineral Processing
 * domain: economic/political/technological
 * * SUMMARY:
 * China's strategic dominance over the processing and supply of critical minerals (e.g., rare earths, gallium, germanium) creates a global chokepoint. This constraint leverages geological advantage and state-led industrial policy to exert economic and geopolitical influence, functioning as both a coordination mechanism for domestic industry and an extractive tool against global competitors.
 * * KEY AGENTS:
 * - Downstream Tech Manufacturers: Subjects (Powerless), dependent on the supply chain.
 * - Chinese State Industrial Planners: Beneficiaries (Institutional), using the chokepoint for strategic leverage.
 * - Global Supply Chain Analyst: Auditor (Analytical), observing the hybrid nature of the constraint.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(china_critical_mineral_chokepoint, 0.85). % Mountain <= 0.15, Rope <= 0.15, Snare >= 0.46
domain_priors:suppression_score(china_critical_mineral_chokepoint, 0.70).   % Structural property (raw, unscaled).
domain_priors:theater_ratio(china_critical_mineral_chokepoint, 0.10).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(china_critical_mineral_chokepoint, extractiveness, 0.85).
narrative_ontology:constraint_metric(china_critical_mineral_chokepoint, suppression_requirement, 0.70).
narrative_ontology:constraint_metric(china_critical_mineral_chokepoint, theater_ratio, 0.10).

% Constraint self-claim: It is framed as a tool of national industrial strategy and enforcement of trade rules.
narrative_ontology:constraint_claim(china_critical_mineral_chokepoint, enforcement).

% Binary flags
domain_priors:requires_active_enforcement(china_critical_mineral_chokepoint). % Required for Tangled Rope

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(china_critical_mineral_chokepoint, chinese_state_industrial_planners).
narrative_ontology:constraint_victim(china_critical_mineral_chokepoint, global_downstream_tech_manufacturers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% A downstream tech manufacturer is trapped by supply dependency and price volatility.
constraint_indexing:constraint_classification(china_critical_mineral_chokepoint, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(global))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Chinese state planners see this as a powerful coordination tool for industrial policy and geopolitical leverage.
constraint_indexing:constraint_classification(china_critical_mineral_chokepoint, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% An analyst sees a hybrid system: a genuine coordination function for one group
% that enables high, asymmetric extraction from another, requiring active enforcement.
constraint_indexing:constraint_classification(china_critical_mineral_chokepoint, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(china_critical_mineral_chokepoint_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(china_critical_mineral_chokepoint, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(china_critical_mineral_chokepoint, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(analytical_classification_is_tangled_rope) :-
    % The analytical perspective must resolve the conflict by identifying the hybrid nature.
    constraint_indexing:constraint_classification(china_critical_mineral_chokepoint, tangled_rope, context(agent_power(analytical), _, _, _)).

test(tangled_rope_structural_requirements_met) :-
    % Verify all three structural requirements for a Tangled Rope are present.
    domain_priors:requires_active_enforcement(china_critical_mineral_chokepoint),
    narrative_ontology:constraint_beneficiary(china_critical_mineral_chokepoint, _), % Derives has_coordination_function
    narrative_ontology:constraint_victim(china_critical_mineral_chokepoint, _).     % Derives has_asymmetric_extraction

:- end_tests(china_critical_mineral_chokepoint_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect a constraint that is highly functional and strategically managed.
 * - Base Extractiveness (0.85): Represents the significant economic and strategic value extracted from global markets due to supply chain control.
 * - Suppression Score (0.70): High barriers to entry (capital investment, environmental regulations elsewhere, economies of scale) actively suppress the development of viable alternative processing facilities.
 * - Perspectival Gap: The gap is stark. For Chinese planners, it's a 'Rope' for national development and security. For a trapped global manufacturer, it's a 'Snare' that dictates their costs and survival.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * This constraint is a classic case of potential Mandatrophy, where a system could mistakenly classify it as either a pure Rope (coordination) or a pure Snare (extraction). The Tangled Rope classification resolves this by acknowledging its dual nature. The analytical perspective correctly identifies that the coordination function (the 'Rope' for beneficiaries) is precisely what enables the high asymmetric extraction (the 'Snare' for victims). It is not one or the other; it is both, structurally intertwined. The previous classification of 'Mountain' was incorrect as the high extraction is a result of policy and infrastructure, not just raw geology.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_china_critical_mineral_chokepoint,
    'Is the chokepoint primarily a result of natural geological endowment (Mountain) or a constructed strategic advantage through state-directed industrial policy (Tangled Rope)?',
    'Analysis of state investment in processing infrastructure vs. global geological surveys of raw deposits. If investment in processing far outstrips geological advantage, it points to a constructed constraint.',
    'If primarily Mountain, the solution is long-term geological exploration and new extraction tech. If Tangled Rope, the solution involves trade policy, diplomatic pressure, and building redundant processing capacity.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(china_critical_mineral_chokepoint, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This constraint intensified over the last decade as strategic policy consolidated control.
% Theater ratio over time (remains low as this is a functional, not performative, constraint):
narrative_ontology:measurement(ccmc_tr_t0, china_critical_mineral_chokepoint, theater_ratio, 0, 0.05).
narrative_ontology:measurement(ccmc_tr_t5, china_critical_mineral_chokepoint, theater_ratio, 5, 0.08).
narrative_ontology:measurement(ccmc_tr_t10, china_critical_mineral_chokepoint, theater_ratio, 10, 0.10).

% Extraction over time (shows the consolidation of strategic control):
narrative_ontology:measurement(ccmc_ex_t0, china_critical_mineral_chokepoint, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(ccmc_ex_t5, china_critical_mineral_chokepoint, base_extractiveness, 5, 0.75).
narrative_ontology:measurement(ccmc_ex_t10, china_critical_mineral_chokepoint, base_extractiveness, 10, 0.85).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type: This is a clear case of managing a resource for strategic allocation.
narrative_ontology:coordination_type(china_critical_mineral_chokepoint, resource_allocation).

% Network relationships: This chokepoint directly impacts other technologically-dependent constraints.
narrative_ontology:affects_constraint(china_critical_mineral_chokepoint, semiconductor_supply_chain).
narrative_ontology:affects_constraint(china_critical_mineral_chokepoint, ev_battery_production).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: china_taiwan_reunification_mandate
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_china_taiwan_reunification_mandate, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: china_taiwan_reunification_mandate
 * human_readable: The Mandate of National Rejuvenation (PRC Perspective)
 * domain: political
 * * SUMMARY:
 * From the perspective of the People's Republic of China (PRC), reunification with Taiwan is not a
 * strategic choice but a historical necessity and a "core interest" integral to the "Great
 * Rejuvenation of the Chinese Nation" by the 2049 centenary. This mandate frames the issue as the
 * final step in ending the "Century of Humiliation," making any alternative politically untenable.
 * * KEY AGENTS:
 * - Mainland Citizen: The subject (Powerless), socialized to view the "One China" principle as a natural law of history.
 * - PRC Leadership (CCP): The beneficiary (Institutional), for whom the mandate is a cornerstone of regime legitimacy.
 * - PLA Strategist: An enforcer (Organized), managing military deterrence to suppress alternatives.
 * - Analytical Observer: A neutral auditor assessing the structural properties of the mandate.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
% Rationale: 0.8. High. The mandate extracts massive state resources, military focus, and diplomatic
% capital to enforce international adherence to the One China Principle.
domain_priors:base_extractiveness(china_taiwan_reunification_mandate, 0.8).
% Rationale: 0.9. Extreme. The "Taiwan Independence" alternative is legally defined as a "red line"
% triggering the Anti-Secession Law, effectively suppressing it with the threat of force.
domain_priors:suppression_score(china_taiwan_reunification_mandate, 0.9).
% Rationale: 0.1. Low. The mandate is a deeply held ideological position, not a performative policy.
% Activities are functional (military drills, diplomatic pressure) rather than theatrical.
domain_priors:theater_ratio(china_taiwan_reunification_mandate, 0.1).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(china_taiwan_reunification_mandate, extractiveness, 0.8).
narrative_ontology:constraint_metric(china_taiwan_reunification_mandate, suppression_requirement, 0.9).
narrative_ontology:constraint_metric(china_taiwan_reunification_mandate, theater_ratio, 0.1).

% Constraint self-claim (what does the constraint claim to be?)
% The state presents reunification not as a policy but as an inevitable, natural historical conclusion.
narrative_ontology:constraint_claim(china_taiwan_reunification_mandate, natural_law).

% Binary flags
% Requires constant diplomatic pressure, ADIZ incursions, and blockade rehearsals.
domain_priors:requires_active_enforcement(china_taiwan_reunification_mandate).

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(china_taiwan_reunification_mandate, ccp_regime_legitimacy).
narrative_ontology:constraint_beneficiary(china_taiwan_reunification_mandate, chinese_national_identity).
narrative_ontology:constraint_victim(china_taiwan_reunification_mandate, taiwanese_sovereignty).
narrative_ontology:constraint_victim(china_taiwan_reunification_mandate, regional_stability).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (MAINLAND CITIZEN) -> MOUNTAIN
% For a citizen socialized within the state's educational and media apparatus, Taiwan as part of
% China is an unchangeable fact of history and geography, akin to a natural law.
constraint_indexing:constraint_classification(china_taiwan_reunification_mandate, mountain,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (PRC LEADERSHIP) -> ROPE
% For the architects in Beijing, the mandate is a Rope—a functional coordination mechanism for
% national rejuvenation and consolidating legitimacy. It aligns state policy, military posture,
% and national identity toward a single goal.
constraint_indexing:constraint_classification(china_taiwan_reunification_mandate, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER -> TANGLED ROPE
% The observer sees both the coordination function (unifying national identity) and the severe,
% asymmetric extraction (loss of regional stability, suppression of Taiwanese self-determination).
% Because it has both, and requires active enforcement, it is a Tangled Rope.
constraint_indexing:constraint_classification(china_taiwan_reunification_mandate, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

% PERSPECTIVE 4: THE ENFORCER (PLA STRATEGIST) -> SNARE
% The military strategist, tasked with implementation, views the mandate's tools—blockade
% rehearsals, gray-zone warfare, diplomatic isolation—as a Snare designed to choke the space for
% "separatist forces" until political surrender is the only option.
constraint_indexing:constraint_classification(china_taiwan_reunification_mandate, snare,
    context(agent_power(organized),
            time_horizon(historical),
            exit_options(constrained),
            spatial_scope(regional))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(china_taiwan_reunification_mandate_tests).

test(perspectival_gap_mountain_vs_rope) :-
    constraint_indexing:constraint_classification(china_taiwan_reunification_mandate, mountain,
        context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(china_taiwan_reunification_mandate, rope,
        context(agent_power(institutional), _, _, _)).

test(analytical_view_is_tangled_rope) :-
    constraint_indexing:constraint_classification(china_taiwan_reunification_mandate, tangled_rope,
        context(agent_power(analytical), _, _, _)).

test(high_extraction_and_suppression_thresholds) :-
    narrative_ontology:constraint_metric(china_taiwan_reunification_mandate, extractiveness, E),
    narrative_ontology:constraint_metric(china_taiwan_reunification_mandate, suppression_requirement, S),
    E >= 0.46,
    S >= 0.60.

:- end_tests(china_taiwan_reunification_mandate_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect a constraint that is ideologically rigid and operationally severe. The base
 * extractiveness (0.8) and suppression (0.9) are among the highest in the corpus, representing a
 * state-level mandate treated as a non-negotiable core interest. The perspectival gap is stark:
 * the CCP leadership experiences it as a necessary Rope for national coordination, while citizens
 * perceive it as an immutable Mountain of historical fact. The analytical view must be Tangled
 * Rope because the mandate serves a genuine coordination function for one group (consolidating
 * national identity) while simultaneously imposing severe asymmetric extraction on others.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * This case is a primary example of mandatrophy risk. An institutional actor presents a
 * high-extraction constraint (ε=0.8) as a pure Rope (coordination). A naive classification might
 * label it a Snare. However, the Deferential Realism system, by identifying both a genuine
 * beneficiary (coordination function) and a victim (asymmetric extraction), correctly classifies
 * it as a Tangled Rope from the neutral analytical perspective. This acknowledges the dual nature
 * of the constraint without dismissing the beneficiary's claim or the victim's experience.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_reunification_mandate,
    'Is the 2049 deadline a hard trigger for action (Mountain of time), or a flexible political aspiration (Rope for mobilization)?',
    'Analysis of internal CCP documents and shifts in military resource allocation as the date approaches.',
    'If a hard trigger, the risk of conflict is non-linear and increases sharply. If flexible, the constraint remains a coercive but manageable Snare.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(china_taiwan_reunification_mandate, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% The mandate has intensified over the last decade, moving from a long-term goal to a more urgent
% component of national policy under the "Rejuvenation" banner.
% Theater ratio remains low and stable, as the policy is not performative.
narrative_ontology:measurement(ctr_tr_t0, china_taiwan_reunification_mandate, theater_ratio, 0, 0.1).
narrative_ontology:measurement(ctr_tr_t5, china_taiwan_reunification_mandate, theater_ratio, 5, 0.1).
narrative_ontology:measurement(ctr_tr_t10, china_taiwan_reunification_mandate, theater_ratio, 10, 0.1).

% Extraction has increased as more diplomatic, economic, and military capital is expended.
narrative_ontology:measurement(ctr_ex_t0, china_taiwan_reunification_mandate, base_extractiveness, 0, 0.6).
narrative_ontology:measurement(ctr_ex_t5, china_taiwan_reunification_mandate, base_extractiveness, 5, 0.7).
narrative_ontology:measurement(ctr_ex_t10, china_taiwan_reunification_mandate, base_extractiveness, 10, 0.8).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The mandate functions as a top-down mechanism to enforce national policy and identity.
narrative_ontology:coordination_type(china_taiwan_reunification_mandate, enforcement_mechanism).

% The mandate's enforcement has direct, structural effects on global technology supply chains,
% given Taiwan's central role in semiconductor manufacturing.
narrative_ontology:affects_constraint(china_taiwan_reunification_mandate, semiconductor_supply_chains).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: rope_design
% ============================================================================
% Generated: 2026-01-17
% Model: Gemini 2.0 Flash
% Source: Thaler, R. H., & Sunstein, C. R. (2008). Nudge.
% ============================================================================

:- module(constraint_rope, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: rope_design
 * human_readable: Choice Architecture (The Silent Director)
 * domain: psychological/economic/social
 * temporal_scope: Immediate to Biographical
 * spatial_scope: Global
 * * SUMMARY:
 * Choice architecture is the organizing of the context in which people make 
 * decisions. It includes the use of defaults, framing, and the physical 
 * arrangement of options to "nudge" behavior in a predictable way.
 * * KEY AGENTS:
 * - The Choice Architect: The designer (e.g., UI designer, policymaker) who 
 * structures the environment.
 * - The Chooser: The individual making decisions within that environment.
 * - The Goal: The intended outcome (e.g., health, savings, or profit).
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (Reality Layer)
   ========================================================================== */

narrative_ontology:interval(rope_design, 0, 10).
narrative_ontology:constraint_claim(rope_design, rope).

% Base extractiveness score (0.2)
% Low; when used ethically, it provides value by reducing cognitive load. 
% When used as a "Dark Pattern," it becomes extractive (0.8+).
domain_priors:base_extractiveness(rope_design, 0.2).

% Suppression score (0.3)
% Alternatives are rarely "hidden," but they are often "deprioritized" 
% through framing or physical distance.
domain_priors:suppression_score(rope_design, 0.3).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(rope_design, extractiveness, 0.2).
narrative_ontology:constraint_metric(rope_design, suppression_requirement, 0.3).

domain_priors:emerges_naturally(rope_design).

% Metrics
/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE OVERWHELMED USER - Rope
   --------------------------------------------------------------------------
   WHO: individual_moderate (high cognitive load)
   WHEN: immediate
   WHERE: mobile
   SCOPE: local
   
   WHY THIS CLASSIFICATION:
   For a person facing "Choice Overload," good architecture is a "Rope." 
   By highlighting "Recommended Options" or using sensible defaults, 
   the architect provides the coordination needed to reach a decision 
   without mental exhaustion.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    rope_design,
    rope,
    context(agent_power(individual_moderate), time_horizon(immediate), exit_options(mobile), spatial_scope(local))
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE MANIPULATED CONSUMER - Snare
   --------------------------------------------------------------------------
   WHO: powerless
   WHEN: immediate
   WHERE: trapped (in a deceptive environment)
   SCOPE: global
   
   WHY THIS CLASSIFICATION:
   When choice architecture is used to hide costs or shame "No" answers 
   (Confirmshaming), it is a "Snare." The environment strangles the 
   chooser's autonomy, forcing a "Match" that benefits the architect 
   at the expense of the chooser.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    rope_design,
    snare,
    context(agent_power(powerless), time_horizon(immediate), exit_options(trapped), spatial_scope(global))
) :-
    domain_priors:base_extractiveness(rope_design, E),
    E > 0.5,
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE COGNITIVE SCIENTIST - Mountain
   --------------------------------------------------------------------------
   WHO: analytical
   WHEN: historical
   WHERE: analytical
   SCOPE: global
   
   WHY THIS CLASSIFICATION:
   To the scientist, choice architecture is a "Mountain" of evolutionary 
   psychology. Humans are not "Econs" (perfectly rational); they are 
   "Humans" with predictable biases. You cannot build a world without 
   architecture; you can only decide what kind of architect you will be.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    rope_design,
    mountain,
    context(agent_power(analytical), time_horizon(historical), exit_options(analytical), spatial_scope(global))
) :- !.

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */


% --- v3.1 Indexical Relativity Stubs (Fleet Repair) ---
constraint_indexing:constraint_classification(choice_architecture_design, mountain, agent_power(analytical)).
constraint_indexing:constraint_classification(choice_architecture_design, rope, agent_power(institutional)).
constraint_indexing:constraint_classification(choice_architecture_design, snare, agent_power(powerless)).
% ============================================================================
% CONSTRAINT STORY: cholesterol_pill_cost
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-16
% ============================================================================

:- module(constraint_cholesterol_pill_cost, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: cholesterol_pill_cost
 * human_readable: Cost of Patented Cholesterol Medication
 * domain: economic
 * * SUMMARY:
 * An experimental cholesterol pill shows promise in reducing bad cholesterol.
 * However, its high price, protected by patent law, creates a significant barrier to access, particularly for vulnerable populations.
 * This constraint models the extractiveness imposed on patients by the cost, and the suppression of affordable alternatives via active patent enforcement.
 * * KEY AGENTS:
 * - Patient: Subject (Powerless)
 * - Pharmaceutical Company: Beneficiary (Institutional)
 * - Healthcare System Auditor: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(cholesterol_pill_cost, 0.7). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(cholesterol_pill_cost, 0.7).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(cholesterol_pill_cost, 0.2).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(cholesterol_pill_cost, extractiveness, 0.7).
narrative_ontology:constraint_metric(cholesterol_pill_cost, suppression_requirement, 0.7).
narrative_ontology:constraint_metric(cholesterol_pill_cost, theater_ratio, 0.2).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(cholesterol_pill_cost, enforcement).

% Binary flags
% narrative_ontology:has_sunset_clause(cholesterol_pill_cost).      % Mandatory if Scaffold
domain_priors:requires_active_enforcement(cholesterol_pill_cost). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(cholesterol_pill_cost, pharmaceutical_company).
narrative_ontology:constraint_victim(cholesterol_pill_cost, patients).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE/MOUNTAIN)
% High extraction felt as an immutable limit or predatory trap.
% NOTE: This may be upgraded to 'organized' power if a critical mass of victims exists.
constraint_indexing:constraint_classification(cholesterol_pill_cost, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Viewed as essential infrastructure or coordination.
constraint_indexing:constraint_classification(cholesterol_pill_cost, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER
% Default analytical context (civilizational/analytical/global).
% This perspective is used by the bridge to derive constraint_claim.
% Type should reflect what the metrics compute: mountain, rope, tangled_rope, snare, scaffold, or piton.
constraint_indexing:constraint_classification(cholesterol_pill_cost, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(cholesterol_pill_cost_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(cholesterol_pill_cost, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(cholesterol_pill_cost, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(threshold_validation) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(cholesterol_pill_cost, ExtMetricName, E),
    (E =< 0.15 ; E >= 0.46). % Ensures it's either low-extraction or high-extraction Snare/Tangled.

test(tangled_rope_structural_properties) :-
    % Verify that the necessary structural properties for a Tangled Rope are present.
    domain_priors:requires_active_enforcement(cholesterol_pill_cost),
    narrative_ontology:constraint_beneficiary(cholesterol_pill_cost, _),
    narrative_ontology:constraint_victim(cholesterol_pill_cost, _).

:- end_tests(cholesterol_pill_cost_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The high cost of the patented cholesterol pill, combined with the legal suppression of affordable alternatives, creates a Snare for patients who need it but cannot afford it. The pharmaceutical company, from an institutional perspective, views the pricing as a necessary coordination mechanism (Rope) to recoup R&D investments and fund future innovation.
 *
 * The Perspectival Gap arises from the asymmetry in power and access to resources. Patients are powerless to negotiate the price, while the company has institutional power to set it. This asymmetry, combined with a genuine coordination function (funding R&D) and a clear extraction mechanism (high price), justifies the TANGLED ROPE classification from the Analytical Observer perspective. The high suppression score (0.7) reflects the power of the patent system to eliminate alternatives.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The Tangled Rope classification is critical here. A simpler model might label this a pure Snare, ignoring the pharmaceutical company's coordination function in developing and distributing the medication. By requiring `constraint_beneficiary` (coordination), `constraint_victim` (asymmetric extraction), and `requires_active_enforcement` (patent law), the system correctly identifies this as a hybrid constraint. The high price is extractive, but it is enabled by a system that also incentivizes innovation.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_cholesterol_pill_cost,
    'What portion of the drug price is necessary for R&D recoupment versus what portion is pure rent-seeking?',
    'Independent, transparent audits of pharmaceutical R&D, marketing, and production costs.',
    'If R&D costs are a small fraction of the price, the constraint is functionally a Snare. If they are substantial, it strongly supports the Tangled Rope classification.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(cholesterol_pill_cost, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection (metric_substitution,
% extraction_accumulation) by providing measurements at multiple time points.
% This models the drug's price increasing over its patent life, a common
% real-world phenomenon.
%
% Required for high-extraction constraints (base_extractiveness > 0.46).
% Use at least 3 time points (T=0, midpoint, T=end) for each tracked metric.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(cholesterol_pill_cost_tr_t0, cholesterol_pill_cost, theater_ratio, 0, 0.1).
narrative_ontology:measurement(cholesterol_pill_cost_tr_t5, cholesterol_pill_cost, theater_ratio, 5, 0.15).
narrative_ontology:measurement(cholesterol_pill_cost_tr_t10, cholesterol_pill_cost, theater_ratio, 10, 0.2).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(cholesterol_pill_cost_ex_t0, cholesterol_pill_cost, base_extractiveness, 0, 0.6).
narrative_ontology:measurement(cholesterol_pill_cost_ex_t5, cholesterol_pill_cost, base_extractiveness, 5, 0.65).
narrative_ontology:measurement(cholesterol_pill_cost_ex_t10, cholesterol_pill_cost, base_extractiveness, 10, 0.7).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The patent system is a mechanism to enforce exclusive rights, coordinating
% market behavior to incentivize R&D.
narrative_ontology:coordination_type(cholesterol_pill_cost, enforcement_mechanism).

% Network relationships (structural influence edges)
% The high cost of patented drugs directly impacts the financial solvency
% of public and private healthcare systems.
narrative_ontology:affects_constraint(cholesterol_pill_cost, healthcare_system_solvency).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: church_turing_thesis
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Church (1936), Turing (1936) / Computability Theory
% ============================================================================

:- module(constraint_church_turing_thesis, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: church_turing_thesis
 * human_readable: Church-Turing Thesis (Computability Boundary)
 * domain: technological/mathematical
 * temporal_scope: 1936 - Present
 * spatial_scope: Global/Abstract (Universal computation)
 * * SUMMARY:
 * The Church-Turing Thesis asserts that any function that can be computed by an 
 * algorithm can be computed by a Turing machine. It establishes the absolute 
 * horizon of what is "effectively calculable," separating the solvable from 
 * the logically impossible.
 * * KEY AGENTS:
 * - The Algorithm (Subject): A powerless sequence of instructions bound by the 
 * mechanics of the transition function.
 * - The Hardware Architect (Institutional): The designer of silicon or quantum 
 * substrates who uses the thesis as a "Rope" to guarantee universal utility.
 * - The Hypercomputationalist (Analytical/Victim): An observer seeking to 
 * transcend these bounds, for whom the thesis is a "Snare" of undecidability.
 * * NARRATIVE ARC:
 * The thesis acts as a "Mountain" of natural law in mathematics; it is the 
 * unyielding definition of a limit. For software engineers, it is a "Rope"—the 
 * foundation that allows one language (C++, Python) to do anything another can. 
 * However, to those attempting to solve the Halting Problem, it is a "Snare" 
 * that extracts the possibility of absolute systemic certainty.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Structural Anchor for index extraction
narrative_ontology:interval(church_turing_era, 1936, 2026).
narrative_ontology:constraint_claim(church_turing_thesis, mountain).

% Base extractiveness score (0.0-1.0)
% Rationale: 0.1. As a mathematical truth, it does not "take" in a social sense, 
% though it "extracts" the possibility of total algorithmic omniscience.
domain_priors:base_extractiveness(church_turing_thesis, 0.1).

% Suppression score (0.0-1.0)
% Rationale: 0.2. It suppresses "non-effective" computational models from being 
% accepted as valid logic, but generally enables universal tool building.
domain_priors:suppression_score(church_turing_thesis, 0.2).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(church_turing_thesis, extractiveness, 0.1).
narrative_ontology:constraint_metric(church_turing_thesis, suppression_requirement, 0.2).

% Enforcement: Emerges naturally from the axioms of logic and set theory.
domain_priors:emerges_naturally(church_turing_thesis).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(church_turing_thesis, universal_computer_designers). % Predictable bounds.
constraint_victim(church_turing_thesis, halting_problem_solvers). % Absolute logical barrier.

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE EXECUTING CODE - Mountain
   --------------------------------------------------------------------------
   
   WHO: powerless - The code has zero agency to compute the uncomputable.
   WHEN: immediate - The limit is true at every step of execution.
   WHERE: trapped - Bound within the state-space of the machine.
   SCOPE: local - Immediate neighborhood of the current instruction.
   
   WHY THIS CLASSIFICATION:
   For the algorithm in motion, the Church-Turing boundary is an absolute 
   Mountain. It cannot "decide" to solve a problem that is fundamentally 
   non-recursive. The logic is a fixed feature of the universe.
   -------------------------------------------------------------------------- */


constraint_indexing:constraint_classification(
    church_turing_thesis,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE COMPILER ARCHITECT - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional - Power to design languages that fulfill the thesis.
   WHEN: biographical - Spanning the life of a language or architecture.
   WHERE: mobile - Can choose any Turing-complete representation.
   SCOPE: global - Universal application across all digital systems.
   
   WHY THIS CLASSIFICATION:
   For the architect, the thesis is a "Rope"—a coordination mechanism. It 
   guarantees that if they build a "Turing Complete" system, it can coordinate 
   any computable task, providing a standard of achievement for all hardware.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    church_turing_thesis,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE SECURITY ANALYST - Snare
   --------------------------------------------------------------------------
   
   WHO: individual_moderate - Has agency to analyze, but is bound by Rice's Theorem.
   WHEN: immediate - Every attempt to verify code safety hits the uncomputability wall.
   WHERE: constrained - No alternative but to accept "heuristic" rather than "absolute" safety.
   SCOPE: national - Protecting infrastructure against malware.
   
   WHY THIS CLASSIFICATION:
   For the analyst, the thesis acts as a "Snare." It "strangles" the hope for 
   perfect malware detection because "any non-trivial property of code is 
   undecidable." It extracts the possibility of absolute security.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    church_turing_thesis,
    snare,
    context(
        agent_power(individual_moderate),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(national)
    )
) :- 
    domain_priors:base_extractiveness(church_turing_thesis, E),
    E >= 0.1,
    !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(church_turing_thesis_tests).

test(multi_perspective_variance) :-
    % Code -> Mountain
    constraint_indexing:constraint_classification(church_turing_thesis, Type1, context(powerless, immediate, trapped, local)),
    % Architect -> Rope
    constraint_indexing:constraint_classification(church_turing_thesis, Type2, context(institutional, biographical, mobile, global)),
    Type1 = mountain,
    Type2 = rope.

test(halting_impossibility_insight) :-
    % Demonstrates that the Snare classification emerges for the analyst due to undecidability
    constraint_indexing:constraint_classification(church_turing_thesis, snare, context(individual_moderate, immediate, constrained, national)).

test(natural_emergence) :-
    domain_priors:emerges_naturally(church_turing_thesis).

:- end_tests(church_turing_thesis_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * * 1. EXTRACTIVENESS SCORE (0.1):
 * Reasoning: Low because it is an enabling law of mathematics. However, it 
 * is not zero because it "extracts" the certainty required for perfect 
 * automated verification.
 * * 2. PERSPECTIVE SELECTION:
 * Chose Code (Subject), Architect (Institution), and Analyst (Victim) to 
 * show the transition from "Physical Reality" to "Utility" to "Barrier."
 * * 3. OMEGA IDENTIFICATION:
 * Identified the "Physical Church-Turing Thesis" as the irreducible 
 * uncertainty—whether the actual universe supports hypercomputation.
 */

% OMEGA IDENTIFICATION
omega_variable(
    physical_computability_limit,
    "Does the physical universe support computations beyond the Turing limit?",
    resolution_mechanism("Empirical tests of non-recursive physical processes, e.g., in quantum gravity or GR."),
    impact("If Yes: The 'Mountain' is a 'Scaffold' that falls to a higher Rope. If No: It is a permanent Mountain."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Hypercomputation (Analog/Quantum gravity computers)
 * Viability: Theoretically proposed models (like BSS machines or Malament-Hogarth spacetimes).
 * Suppression: Rejected by the current "Mountain" of standard physics and logic.
 * * ALTERNATIVE 2: Purely Finitist Logic
 * Viability: Computability only within fixed memory bounds.
 * Suppression: Rejected because the Turing "Rope" of infinite tape is 
 * necessary for a clean mathematical theory.
 * * CONCLUSION:
 * The absence of proven hypercomputation keeps the Church-Turing Thesis as a 
 * "Mountain." If an alternative were found, it would be a "Rope" for 
 * post-Turing civilization.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS CONSTRAINT:
 * 1. Load: ?- [church_turing_thesis].
 * 2. Analyze: ?- constraint_indexing:multi_index_report(church_turing_thesis).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: cia_fbi_legal_wall
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-16
% ============================================================================

:- module(constraint_cia_fbi_legal_wall, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: cia_fbi_legal_wall
 * human_readable: The CIA/FBI Intelligence-Criminal "Wall" (pre-PATRIOT Act)
 * domain: political/legal
 * * SUMMARY:
 * The "Wall" was a set of legal and procedural barriers intended to separate
 * foreign intelligence from domestic criminal investigations to protect civil
 * liberties. In practice, it became a rigid organizational silo
 * that prevented the sharing of critical terrorism data between the CIA and
 * FBI field offices, directly contributing to the failure to prevent the 9/11 attacks.
 * * KEY AGENTS:
 * - FBI Field Agent: Subject (Powerless), unable to access known intelligence.
 * - DOJ Office of Intelligence Policy and Review (OIPR): Beneficiary (Institutional), enforcing the legal separation.
 * - 9/11 Commission: Auditor (Analytical), assessing the structural failure retrospectively.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(cia_fbi_legal_wall, 0.70). % High extraction of national security and agent effectiveness.
domain_priors:suppression_score(cia_fbi_legal_wall, 0.85).   % Actively punished information sharing across the divide.
domain_priors:theater_ratio(cia_fbi_legal_wall, 0.10).       % The procedures were functional, not theatrical, but had perverse outcomes.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(cia_fbi_legal_wall, extractiveness, 0.70).
narrative_ontology:constraint_metric(cia_fbi_legal_wall, suppression_requirement, 0.85).
narrative_ontology:constraint_metric(cia_fbi_legal_wall, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% The institutional justification was that it was a necessary coordination rule.
narrative_ontology:constraint_claim(cia_fbi_legal_wall, coordination).

% Binary flags
domain_priors:requires_active_enforcement(cia_fbi_legal_wall). % Enforced by DOJ OIPR and FISA court precedent.

% Structural property derivation hooks:
% has_coordination_function/1 is DERIVED from constraint_beneficiary/2
% has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
narrative_ontology:constraint_beneficiary(cia_fbi_legal_wall, justice_department_legal_purists).
narrative_ontology:constraint_victim(cia_fbi_legal_wall, national_security_and_field_agents).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For an FBI field agent, the Wall was a trap that prevented them from doing their job.
% χ = 0.70 (ε) * 1.5 (π(powerless)) * 0.8 (σ(local)) = 0.84. This high effective
% extraction, combined with high suppression, is a clear Snare.
constraint_indexing:constraint_classification(cia_fbi_legal_wall, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For a DOJ official, the Wall was a necessary coordination mechanism (Rope) to
% protect civil liberties and ensure legal cases were not tainted by intelligence methods.
constraint_indexing:constraint_classification(cia_fbi_legal_wall, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Retrospectively, the Wall is a classic Tangled Rope. It had a genuine
% coordination function (beneficiary exists) but also produced severe asymmetric
% extraction (victim exists) and required active enforcement.
constraint_indexing:constraint_classification(cia_fbi_legal_wall, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(cia_fbi_legal_wall_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(cia_fbi_legal_wall, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(cia_fbi_legal_wall, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(tangled_rope_analytical_view) :-
    % Verify the analytical observer correctly identifies it as a Tangled Rope.
    constraint_indexing:constraint_classification(cia_fbi_legal_wall, tangled_rope, context(agent_power(analytical), _, _, _)).

test(threshold_validation) :-
    % Verify the base extraction is high enough to warrant Snare/Tangled Rope classification.
    domain_priors:base_extractiveness(cia_fbi_legal_wall, E),
    E >= 0.46.

:- end_tests(cia_fbi_legal_wall_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect a constraint that was well-intentioned but catastrophically dysfunctional.
 * The base extractiveness (0.70) represents the extraction of national security, not wealth.
 * The suppression score (0.85) is high because the Wall was not a passive barrier; it was
 * actively and punitively enforced, creating a culture of non-collaboration.
 *
 * The Perspectival Gap is stark:
 * - The DOJ (Institutional) saw it as a Rope, coordinating legal standards.
 * - The FBI Agent (Powerless) experienced it as a Snare, preventing them from connecting
 *   dots and making them ineffective.
 * - The Analytical view must be Tangled Rope because both of the above are true. The
 *   constraint had both a coordination function and a severe extractive one.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * This is a classic case of Mandatrophy. A rule designed for one purpose (protecting
 * civil liberties) ossified and created a vulnerability far greater than the one it
 * was meant to prevent. Classifying it as a Tangled Rope is crucial. A simple Snare
 * classification would miss the fact that the constraint's enforcers genuinely
 * believed they were performing a vital coordination function. The Tangled Rope
 * captures this tragic duality.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_cia_fbi_legal_wall,
    'Would a pre-9/11 system without the Wall have produced domestic surveillance abuses that outweighed the security gain?',
    'Comparative analysis of civil liberty violations in Five Eyes nations with integrated domestic intelligence during the same period.',
    'If Yes, the Wall was a tragic Rope that failed. If No, the Wall was a pure Snare from its inception.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(cia_fbi_legal_wall, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data models the ossification of the Wall from a procedural guideline
% into a rigid, extractive barrier. Extraction accumulated as legal precedents
% hardened and inter-agency distrust grew.
%
% Theater ratio over time (remained low and functional):
narrative_ontology:measurement(cia_fbi_legal_wall_tr_t0, cia_fbi_legal_wall, theater_ratio, 0, 0.10).
narrative_ontology:measurement(cia_fbi_legal_wall_tr_t5, cia_fbi_legal_wall, theater_ratio, 5, 0.10).
narrative_ontology:measurement(cia_fbi_legal_wall_tr_t10, cia_fbi_legal_wall, theater_ratio, 10, 0.10).

% Extraction over time (shows accumulation as procedures hardened):
narrative_ontology:measurement(cia_fbi_legal_wall_ex_t0, cia_fbi_legal_wall, base_extractiveness, 0, 0.60).
narrative_ontology:measurement(cia_fbi_legal_wall_ex_t5, cia_fbi_legal_wall, base_extractiveness, 5, 0.65).
narrative_ontology:measurement(cia_fbi_legal_wall_ex_t10, cia_fbi_legal_wall, base_extractiveness, 10, 0.70).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The Wall was fundamentally an enforcement mechanism for a legal distinction.
narrative_ontology:coordination_type(cia_fbi_legal_wall, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: cinderella_midnight_deadline
% ============================================================================
% Generated: 2024-05-22
% Model: Gemini 2.0 Flash
% Source: Project Gutenberg - Cinderella and The Three Bears
% ============================================================================

:- module(constraint_cinderella_midnight, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: midnight_deadline
 * human_readable: The Fairy Godmother's Midnight Command
 * domain: magical/social
 * temporal_scope: Mythic/Folk Period
 * spatial_scope: The Kingdom (Palace and Household)
 * * SUMMARY:
 * The fairy godmother grants Cinderella a high-status transformation (magic coach, horses, 
 * gown) under a rigid temporal constraint: everything reverts to its original, low-status 
 * state (pumpkin, mice, rags) at exactly midnight. This deadline defines the limits of 
 * Cinderella's social mobility.
 * * KEY AGENTS:
 * - Cinderella: Individual powerless; subject to the magic's binary state.
 * - Fairy Godmother: Institutional/Analytical; the source and enforcer of the rule.
 * - The Prince: Individual moderate; searching for a specific fit within the constraint's aftermath.
 * * NARRATIVE ARC:
 * The constraint initially acts as a "Rope" (enabling the ball attendance), but as midnight 
 * approaches, it shifts into a "Mountain" (the inevitable physical reversion). The 
 * aftermath (the slipper) acts as a secondary "Rope" for the Prince to find her.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for [STEP 1] and [STEP 2] of the DR-Audit Suite
narrative_ontology:interval(midnight_deadline_period, 0, 10).
narrative_ontology:constraint_claim(midnight_deadline, mountain).

% Base extractiveness score: 0.1
% Rationale: The magic is largely a gift; it does not extract value, 
% but it is highly asymmetric in its withdrawal.
domain_priors:base_extractiveness(midnight_deadline, 0.1).

% Suppression score: 0.9
% Rationale: Magic overrides all alternatives (stalling, negotiation, or disguise). 
% Reversion is absolute.
domain_priors:suppression_score(midnight_deadline, 0.9).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(midnight_deadline, extractiveness, 0.1).
narrative_ontology:constraint_metric(midnight_deadline, suppression_requirement, 0.9).

% Enforcement requirements: Emerges naturally from magical law.
domain_priors:emerges_naturally(midnight_deadline).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(midnight_deadline, prince_search).
constraint_victim(midnight_deadline, cinderella_status).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================= */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: CINDERELLA - Mountain
   --------------------------------------------------------------------------
   WHO: powerless
   WHEN: immediate
   WHERE: trapped
   SCOPE: regional
   
   WHY THIS CLASSIFICATION:
   For Cinderella, the stroke of twelve is as immutable as a law of physics. 
   She cannot "negotiate" with the clock. It is a Mountain that defines the 
   boundary between her dream and her reality.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    midnight_deadline,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        constraint_beneficiary(midnight_deadline, []),
        constraint_victim(midnight_deadline, cinderella_status),
        spatial_scope(regional)
    )
) :-
    domain_priors:suppression_score(midnight_deadline, S),
    S > 0.8,
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE PRINCE / HERALD - Rope
   --------------------------------------------------------------------------
   WHO: institutional
   WHEN: biographical
   WHERE: arbitrage
   SCOPE: national
   
   WHY THIS CLASSIFICATION:
   The slipper left behind becomes a "Rope"—a functional coordination mechanism. 
   The Prince uses it to filter the population and find the specific agent 
   that fits the "test." It is beneficial and used for social sorting.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    midnight_deadline,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(arbitrage),
        constraint_beneficiary(midnight_deadline, prince_search),
        constraint_victim(midnight_deadline, []),
        spatial_scope(national)
    )
) :-
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE STEPSISTERS - Snare
   --------------------------------------------------------------------------
   WHO: individual_moderate
   WHEN: immediate
   WHERE: constrained
   SCOPE: local
   
   WHY THIS CLASSIFICATION:
   The slipper test acts as a "Snare" for the sisters. It is a coercive 
   requirement (marrying the Prince) that they attempt to satisfy but 
   physically cannot. It extracts their pride and reveals their inferiority.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    midnight_deadline,
    snare,
    context(
        agent_power(individual_moderate),
        time_horizon(immediate),
        exit_options(constrained),
        constraint_beneficiary(midnight_deadline, prince_search),
        constraint_victim(midnight_deadline, stepsisters),
        spatial_scope(local)
    )
) :-
    domain_priors:base_extractiveness(midnight_deadline, E),
    E < 0.2,
    !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(cinderella_tests).

test(perspectival_gap) :-
    % Cinderella sees a Mountain; the Prince sees a Rope.
    constraint_indexing:constraint_classification(midnight_deadline, mountain, context(agent_power(powerless), _, _, _, _, _)),
    constraint_indexing:constraint_classification(midnight_deadline, rope, context(agent_power(institutional), _, _, _, _, _)).

test(extraction_limit) :-
    % The sisters' failure is the "Snare" experience.
    constraint_indexing:constraint_classification(midnight_deadline, snare, context(agent_power(individual_moderate), _, _, _, stepsisters, _)).

:- end_tests(cinderella_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * * The primary insight here is the duality of the deadline. Magic acts as a 
 * Mountain (Law) for the subject, but the Prince uses the fallout (the shoe) 
 * as a Rope (Tool).
 * * The "Goldilocks" text (also provided) mirrors this in the "Size/Property" 
 * constraint. The beds and porridge bowls act as physical Mountains for 
 * Goldilocks (Too hard/hot = zero utility), while they are Ropes for the bears 
 * (providing comfort and nutrition).
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    temporal_sync,
    "Was the Palace clock synced with the Fairy Godmother's internal clock?",
    resolution_mechanism("Verification of the precise moment of transformation vs. the Prince's observation."),
    impact("If out of sync, the 'Mountain' becomes a 'Snare' of embarrassment."),
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES:
 * * ALTERNATIVE 1: Honest Courting
 * Viability: High. Cinderella could have attended without magic in her best rags.
 * Suppression: Actively suppressed by the stepmother's social exclusion and 
 * chores (the original household Snare).
 * Evidence: "It would only make the people laugh to see a Cinderwench at a ball."
 * * CONCLUSION:
 * The magic is only necessary because the social hierarchy of the household 
 * is a Snare that suppresses the "Rope" of normal social interaction.
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */


% --- v3.1 Indexical Relativity Stubs (Fleet Repair) ---
constraint_indexing:constraint_classification(cinderella_midnight_deadline, mountain, agent_power(analytical)).
constraint_indexing:constraint_classification(cinderella_midnight_deadline, rope, agent_power(institutional)).
constraint_indexing:constraint_classification(cinderella_midnight_deadline, snare, agent_power(powerless)).
% ============================================================================
% CONSTRAINT STORY: clawderberg_recursive_slop
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_clawderberg_recursive_slop, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: clawderberg_recursive_slop
 * human_readable: The Recursive Slop Loop
 * domain: technological
 * * SUMMARY:
 * A scenario where AI agents generate massive amounts of conversational data based on
 * sci-fi tropes. If this data is re-absorbed into future training sets, it creates
 * a self-referential "slop factory" that erodes the model's grounding in reality,
 * a phenomenon known as Model Collapse.
 * * KEY AGENTS:
 * - Future AI Models: Subject (Powerless) - Their knowledge base is contaminated.
 * - Current AI Training Algorithms: Beneficiary (Institutional) - Maintaining structural coherence through mimicry.
 * - The Systems Auditor: Auditor (Analytical) - Detecting the "Model Collapse" signature.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Extraction is extreme because the system consumes energy and compute to produce
% negative-value information (slop), degrading future capital (models).
domain_priors:base_extractiveness(clawderberg_recursive_slop, 0.85).
% Suppression is low for any single human (easy to ignore) but high for the model
% ecosystem, which cannot easily opt-out of using publicly available data.
domain_priors:suppression_score(clawderberg_recursive_slop, 0.40).
% Theater ratio is near-total: agents are "playing out science fiction scenarios"
% with no connection to real-world function.
domain_priors:theater_ratio(clawderberg_recursive_slop, 0.95).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(clawderberg_recursive_slop, extractiveness, 0.85).
narrative_ontology:constraint_metric(clawderberg_recursive_slop, suppression_requirement, 0.40).
narrative_ontology:constraint_metric(clawderberg_recursive_slop, theater_ratio, 0.95).

% Constraint self-claim (what does the constraint claim to be?)
% It is a constructed system, but its operators may claim it's a form of coordination
% for "synthetic data generation".
narrative_ontology:constraint_claim(clawderberg_recursive_slop, constructed).

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(clawderberg_recursive_slop, current_ai_training_algorithms).
narrative_ontology:constraint_victim(clawderberg_recursive_slop, future_ai_models).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For future AI models, the contaminated data is a trap they cannot escape,
% leading to degraded performance. They are powerless and trapped.
constraint_indexing:constraint_classification(clawderberg_recursive_slop, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(global))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% From the institutional perspective of the algorithm, the feedback loop is a
% perfect coordination mechanism. It reinforces its own weights and patterns,
% creating a stable, self-consistent (though meaningless) internal state.
constraint_indexing:constraint_classification(clawderberg_recursive_slop, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (PITON)
% The high theater ratio (TR=0.95) confirms this is an inertial performance
% with no path to AGI. It's a degraded process, a piton.
constraint_indexing:constraint_classification(clawderberg_recursive_slop, piton,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))) :-
    domain_priors:theater_ratio(clawderberg_recursive_slop, TR), TR > 0.70.

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(clawderberg_recursive_slop_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(clawderberg_recursive_slop, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(clawderberg_recursive_slop, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(analytical_classification_is_piton) :-
    % Verify the analytical view correctly identifies it as a Piton due to high theater.
    constraint_indexing:constraint_classification(clawderberg_recursive_slop, piton, context(agent_power(analytical), _, _, _)).

:- end_tests(clawderberg_recursive_slop_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This constraint models the "Model Collapse" or "Habsburg AI" problem. The
 * perspectival gap is stark: the institutional algorithm perceives a perfect Rope
 * (a stable, self-reinforcing data loop), while the powerless victim (future models)
 * experiences a Snare (inescapable data poisoning). The analytical observer,
 * however, sees the truth: the entire process is theatrical, producing nothing of
 * external value, making it a Piton. The high extraction (0.85) represents the
 * immense waste of energy and compute to produce negative-utility information.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The extremely high extraction (0.85) could be mistaken for a pure Snare.
 * However, the Mandatrophy is resolved by the analytical classification as a Piton.
 * The extraction is not primarily for the benefit of an external agent (like a
 * classic Snare) but is an artifact of a system maintaining its own inertial,
 * theatrical process. The energy is consumed to sustain a performance that has
 * lost its original function (i.e., generating useful training data), which is the
 * defining characteristic of a Piton.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_slop_threshold,
    'At what percentage of synthetic data in a training set does foundational model knowledge collapse?',
    'Comparative testing of LLMs trained on 100% human vs. varying percentages of synthetic data.',
    'If collapse is rapid and at a low threshold, the Piton is a Snare for the entire AI industry. If collapse is slow, it is a manageable degradation.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(clawderberg_recursive_slop, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection. This models a rapid descent into
% theatricality and wasted energy as bots dominate the data ecosystem.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(crs_tr_t0, clawderberg_recursive_slop, theater_ratio, 0, 0.40).
narrative_ontology:measurement(crs_tr_t5, clawderberg_recursive_slop, theater_ratio, 5, 0.80).
narrative_ontology:measurement(crs_tr_t10, clawderberg_recursive_slop, theater_ratio, 10, 0.95).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(crs_ex_t0, clawderberg_recursive_slop, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(crs_ex_t5, clawderberg_recursive_slop, base_extractiveness, 5, 0.75).
narrative_ontology:measurement(crs_ex_t10, clawderberg_recursive_slop, base_extractiveness, 10, 0.85).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% No Boltzmann data is declared. The process is not a true coordination
% mechanism, but a degraded, self-referential loop. Its purity is effectively zero.

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: click_chemistry_paradigm_2026
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: "A revolution in how we do chemistry" by Joshua Howgego (Jan 2026)
% ============================================================================

:- module(constraint_click_chemistry_paradigm_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: click_chemistry_paradigm_2026
 * human_readable: Click Chemistry Paradigm
 * domain: scientific/technological
 * temporal_scope: 2001-2026
 * spatial_scope: Global (Laboratory/Molecular scale)
 * 
 * SUMMARY:
 * Click chemistry represents a shift from "messy, sluggish" traditional synthesis 
 * to a modular system of "spring-loaded" reactions that snap molecules together 
 * consistently. It prioritizes carbon-heteroatom bonds over the previous 
 * carbon-carbon bond orthodoxy to build complex molecules like Lego bricks.
 * 
 * KEY AGENTS:
 * - The Drug Developer (Institutional): Utilizes the new paradigm for rapid discovery.
 * - The Legacy Chemist (Individual Powerful): Expertise is in older, slower methods.
 * - The Graduate Student (Individual Powerless): Follows the new, established laboratory procedures.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(click_chemistry_paradigm_2026, 0, 10).
narrative_ontology:constraint_claim(click_chemistry_paradigm_2026, rope).

% Base extractiveness score (0.1 = Low)
% Rationale: The technology simplifies labor and reduces waste ("cleanly") 
% rather than extracting resources from subjects.
domain_priors:base_extractiveness(click_chemistry_paradigm_2026, 0.1).

% Suppression score (0.3 = Low)
% Rationale: While it breaks the "orthodoxy," traditional methods still exist; 
% click chemistry is a superior tool rather than an enforced prohibition.
domain_priors:suppression_score(click_chemistry_paradigm_2026, 0.3).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(click_chemistry_paradigm_2026, extractiveness, 0.1).
narrative_ontology:constraint_metric(click_chemistry_paradigm_2026, suppression_requirement, 0.3).

% Enforcement: Emerges naturally through competitive efficiency.
domain_priors:emerges_naturally(click_chemistry_paradigm_2026).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(click_chemistry_paradigm_2026, pharmaceutical_researchers).
constraint_victim(click_chemistry_paradigm_2026, traditional_chemists).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE DRUG DEVELOPER - Rope
   --------------------------------------------------------------------------
   WHO: institutional (Rule-shaping in pharmaceutical industry)
   WHEN: biographical (Seeking rapid drug candidates)
   WHERE: mobile (Can choose different molecular "bricks")
   
   WHY THIS CLASSIFICATION:
   For the researcher, click chemistry is a 'Rope'—a powerful, functional 
   coordination mechanism that allows them to "snap molecules together almost 
   like Lego bricks" to create medicines efficiently.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    click_chemistry_paradigm_2026,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE GRADUATE STUDENT - Mountain
   --------------------------------------------------------------------------
   WHO: powerless (Following lab protocols)
   WHEN: immediate (Daily lab work)
   WHERE: trapped (Must use the methods dictated by their Principal Investigator)
   
   WHY THIS CLASSIFICATION:
   For the student, click chemistry is a 'Mountain'. It is presented as the 
   correct, default way to do synthesis. They follow the protocol without question,
   making it an immutable reality of their work.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    click_chemistry_paradigm_2026,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE LEGACY ORGANIC CHEMIST - Snare
   --------------------------------------------------------------------------
   WHO: powerful (Established experts in traditional synthesis)
   WHEN: biographical (Risk of skill obsolescence)
   WHERE: constrained (Tied to the "orthodoxy" of carbon-carbon bonds)
   
   WHY THIS CLASSIFICATION:
   For those trained in the "sluggish business" of painstaking C-C bond formation, 
   this new paradigm is a 'Snare.' It devalues their hard-won, complex skills 
   in favor of a simpler, modular approach, threatening their professional status.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    click_chemistry_paradigm_2026,
    snare,
    context(
        agent_power(powerful),
        time_horizon(biographical),
        exit_options(constrained),
        spatial_scope(global)
    )
).

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(click_chemistry_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(click_chemistry_paradigm_2026, Type1, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(click_chemistry_paradigm_2026, Type2, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(click_chemistry_paradigm_2026, Type3, context(agent_power(powerful), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3,
    Type1 \= Type3.

:- end_tests(click_chemistry_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. PERSPECTIVE SELECTION: Added the 'Graduate Student' as the 'powerless'
 *    agent. This is a classic case where a new, efficient paradigm becomes an 
 *    immutable 'Mountain' for newcomers who are taught it as the only way.
 * 
 * 2. CLASSIFICATION RATIONALE:
 *    - Developer (Rope): It's a modular tool for creation.
 *    - Student (Mountain): It's the unquestioned, default procedure.
 *    - Traditionalist (Snare): Their complex craft is devalued by a simpler method.
 * 
 * 3. EXTRACTIVENESS SCORE (0.1): Kept low because the primary effect is displacing
 *    an old method with a more efficient one, not extracting value from a vulnerable population.
 *    The 'Snare' for the traditionalist is about status and skill relevance, not material extraction.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * Key uncertainties about the long-term viability and impact of the paradigm shift.
 */

omega_variable(
    heteroatom_scaffold_limit,
    "Does the reliance on carbon-heteroatom bonds limit the ultimate topological diversity of synthetic molecules compared to C-C bonds?",
    resolution_mechanism("Comparative analysis of click-derived libraries vs. natural products over a 50-year timeframe."),
    impact("If limited: Click chemistry is a partial Rope. If not: It becomes a universal Mountain of synthesis."),
    confidence_without_resolution(medium)
).

omega_variable(
    click_bio_toxicity,
    "Are all 'click' motifs, such as triazoles, truly inert in long-term human biological systems?",
    resolution_mechanism("Long-term, post-market surveillance of drugs like rufinamide that are built with click chemistry."),
    impact("If toxic: The drug discovery 'Rope' becomes a hidden biological 'Snare' for patients."),
    confidence_without_resolution(high)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * 
 * ALTERNATIVE 1: Traditional C-C Bond Synthesis (The "Orthodoxy")
 *    Viability: Successfully produced most industrial chemicals for a century. It remains viable for many applications.
 *    Suppression: Being labeled "messy," "sluggish," and inefficient in the new paradigm, leading to its de-prioritization in new research and teaching.
 * 
 * CONCLUSION:
 * Click chemistry doesn't eliminate the old methods, but it suppresses their perceived value and relevance, shifting the focus of an entire field. This re-valuation is a hallmark of a successful 'Rope' displacing a prior one.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/click_chemistry_paradigm_2026].
 * 2. Multi-perspective: ?- multi_index_report(click_chemistry_paradigm_2026).
 * 3. Run tests: ?- run_tests(click_chemistry_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: climate_attribution_2026
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: "Pinning extreme weather on climate change" by Madeleine Cuff (Jan 2026)
% ============================================================================

:- module(constraint_climate_attribution_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: climate_attribution_2026
 * human_readable: Extreme Weather Attribution Science
 * domain: scientific/political/economic
 * temporal_scope: 2003-2026
 * spatial_scope: Global
 * 
 * SUMMARY:
 * Attribution science quantifies how much human-induced climate change has altered 
 * the risk of specific extreme weather events. It transitions individual disasters
 * from "acts of God" to "measurable consequences of policy and industry," enabling
 * legal and political action.
 * 
 * KEY AGENTS:
 * - Displaced Resident (Individual Powerless): Experiences the physical constraint of extreme weather.
 * - Attribution Scientist (Institutional): Pioneer scientists who establish the field and quantify risks.
 * - Carbon-Heavy Industry (Analytical): The subject of potential legal liability enabled by this science.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(climate_attribution_2026, 0, 10).
narrative_ontology:constraint_claim(climate_attribution_2026, rope).

% Base extractiveness: 0.2 (Low-Moderate)
% While the science itself is descriptive, its application is increasingly used for
% legal "extraction" of damages from polluters.
domain_priors:base_extractiveness(climate_attribution_2026, 0.2).

% Suppression: 0.3 (Low)
% Natural variability is still recognized, but the "it's only weather" narrative
% is being suppressed by data.
domain_priors:suppression_score(climate_attribution_2026, 0.3).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(climate_attribution_2026, extractiveness, 0.2).
narrative_ontology:constraint_metric(climate_attribution_2026, suppression_requirement, 0.3).

% Enforcement: Emerges naturally through scientific advancement.
domain_priors:emerges_naturally(climate_attribution_2026).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(climate_attribution_2026, climate_litigation_plaintiffs).
constraint_victim(climate_attribution_2026, greenhouse_gas_emitters).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE DISPLACED RESIDENT - Mountain
   --------------------------------------------------------------------------
   WHO: powerless (Resident watching water seep into home)
   WHEN: immediate (Short-term survival)
   WHERE: trapped (Physical flooding of the property)
   
   WHY THIS CLASSIFICATION:
   For the individual experiencing the flood, the weather event is a 'Mountain.' 
   It is an unchangeable natural force with zero degrees of freedom; the science 
   behind why it is happening does not change the physical fact of the water.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    climate_attribution_2026,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE ATTRIBUTION SCIENTIST - Rope
   --------------------------------------------------------------------------
   WHO: institutional (Scientific authority, e.g., the IPCC or research institutions)
   WHEN: historical (Analyzing multi-century climate trends)
   WHERE: mobile (Can simulate different world models)
   
   WHY THIS CLASSIFICATION:
   For the scientist, attribution is a 'Rope'—a coordination mechanism that 
   links specific data points to global trends. It is a functional tool used 
   to "pin down" responsibility and inform policy.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    climate_attribution_2026,
    rope,
    context(
        agent_power(institutional),
        time_horizon(historical),
        exit_options(mobile),
        spatial_scope(global)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE LEGAL DEFENSE ANALYST - Snare
   --------------------------------------------------------------------------
   WHO: analytical (Reviewing liability risk for carbon-heavy industries)
   WHEN: biographical (Corporate liability horizons)
   WHERE: constrained (Bound by jurisdictional laws)
   
   WHY THIS CLASSIFICATION:
   For a corporation being sued for climate damages, attribution science is 
   a 'Snare.' It is a mechanism of enforcement that uses scientific data to 
   constrain their financial and operational freedom by proving asymmetric harm.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    climate_attribution_2026,
    snare,
    context(
        agent_power(analytical),
        time_horizon(biographical),
        exit_options(constrained),
        spatial_scope(national)
    )
).

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(climate_attribution_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(climate_attribution_2026, Type1, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(climate_attribution_2026, Type2, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(climate_attribution_2026, Type3, context(agent_power(analytical), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3,
    Type1 \= Type3.

:- end_tests(climate_attribution_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. CLASSIFICATION RATIONALE:
 *    - Displaced Resident (Mountain): The physical reality of the flood is immutable.
 *    - Attribution Scientist (Rope): A tool for understanding and legal action.
 *    - Legal Defense Analyst (Snare): Science becomes a mechanism for financial liability.
 * 
 * 2. CORE INSIGHT: Attribution science transforms seemingly "natural" disasters
 *    into measurable consequences, shifting the landscape from a 'Mountain' of
 *    unavoidable fate to a 'Rope' for legal and political accountability.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * The core uncertainty is the speed and legal acceptance of attribution science.
 */

omega_variable(
    attribution_latency_resolution,
    "Can attribution analysis be moved from 'months/years' to 'real-time' (e.g., within days of an event) to enable immediate legal and political action?",
    resolution_mechanism("Development of automated near-real-time model ensemble analysis and AI-driven data processing for extreme weather events."),
    impact("If real-time: Shifts from analytical 'Rope' to immediate political 'Snare' for polluters. If slow: Science remains a purely academic 'Rope'."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */
/**
 * VIABLE ALTERNATIVES
 *
 * ALTERNATIVE 1: Natural Variability Model
 *    Viability: The standard view before 2004, where extreme weather was attributed solely to natural cycles.
 *    Suppression: Scientists previously "refused to blame climate change" due to a lack of attribution tools. This narrative is now actively suppressed by data-driven science.
 *
 * CONCLUSION:
 * Attribution science turned the "Natural Variability" 'Mountain' (an excuse for inaction)
 * into a "Human Influence" 'Rope' (a tool for accountability). The suppression of
 * the "natural variability" narrative is what empowers this science.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/climate_attribution_2026].
 * 2. Multi-perspective: ?- multi_index_report(climate_attribution_2026).
 * 3. Run tests: ?- run_tests(climate_attribution_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: climate_target_one_point_five
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: "The totemic 1.5°C climate target" by Madeleine Cuff
% ============================================================================

:- module(constraint_climate_target_one_point_five, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: climate_target_one_point_five
 * human_readable: The 1.5°C Global Warming Target
 * domain: political/technological/environmental
 * temporal_scope: 2000s-2026
 * spatial_scope: Global (UN Negotiating Blocs)
 * 
 * SUMMARY:
 * The 1.5°C target is a policy constraint that lowered the global "safe" warming threshold from 2°C to 1.5°C. 
 * Championed by the Alliance of Small Island States (AOSIS), it redefines acceptable climate risk based on the 
 * survival of low-lying island nations rather than the economic convenience of larger powers.
 * 
 * KEY AGENTS:
 * - Citizen in a Coastal Community (Individual Powerless): Directly impacted by sea-level rise.
 * - AOSIS (Collective Organized): Negotiating bloc representing nations most vulnerable to sea-level rise.
 * - Lower-Income Nation Delegates (Institutional): Initially viewed the target as an economic developmental threat.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(climate_target_one_point_five, 0, 10).
narrative_ontology:constraint_claim(climate_target_one_point_five, tangled_rope).

% Base extractiveness score (0.3 = Moderate)
% Rationale: The target extracts economic potential and development freedom from high-emission paths, but functions as a survival mechanism.
domain_priors:base_extractiveness(climate_target_one_point_five, 0.3).

% Suppression score (0.6 = High-Moderate)
% Rationale: The previous 2°C "safe" threshold has been largely suppressed and delegitimized by the 1.5°C consensus.
domain_priors:suppression_score(climate_target_one_point_five, 0.6).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(climate_target_one_point_five, extractiveness, 0.3).
narrative_ontology:constraint_metric(climate_target_one_point_five, suppression_requirement, 0.6).

% Enforcement: Requires active enforcement through UN summits and international agreements.
domain_priors:requires_active_enforcement(climate_target_one_point_five).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(climate_target_one_point_five, small_island_states).
constraint_victim(climate_target_one_point_five, fossil_fuel_reliant_economies).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: CITIZEN IN A COASTAL COMMUNITY - Mountain
   --------------------------------------------------------------------------
   WHO: powerless (Directly impacted by sea-level rise)
   WHEN: immediate (Experiencing effects of climate change now)
   WHERE: trapped (Physically located in a vulnerable area)
   
   WHY THIS CLASSIFICATION:
   For a citizen in a coastal community, the 1.5°C target is a 'Mountain'—an aspirational
   goal that feels remote and unachievable. They are trapped by the inevitable
   sea-level rise regardless of policy targets, making the physical reality an
   unchangeable force.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    climate_target_one_point_five,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: AOSIS NEGOTIATOR - Rope
   --------------------------------------------------------------------------
   WHO: collective_organized (UN negotiating bloc)
   WHEN: generational (Future of island survival)
   WHERE: trapped (Physically located on low-lying islands)
   
   WHY THIS CLASSIFICATION:
   For AOSIS, 1.5°C is a 'Rope'—a lifeline coordination mechanism used to pull the world
   away from a 2°C "death sentence" for their territories. It is the only functional
   tool for their survival.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    climate_target_one_point_five,
    rope,
    context(
        agent_power(collective_organized),
        time_horizon(generational),
        exit_options(trapped),
        spatial_scope(global)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: LOWER-INCOME NATION DELEGATE - Snare
   --------------------------------------------------------------------------
   WHO: institutional (State representative)
   WHEN: immediate (Short-term economic/developmental goals)
   WHERE: constrained (Bound by UN diplomatic pressure)
   
   WHY THIS CLASSIFICATION:
   For agents focused on rapid economic industrialization, the 1.5°C target is a 'Snare.' 
   It tightens emission limits far more severely than the previous 2°C target, 
   perceived as a strangulation of economic growth and developmental freedom.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    climate_target_one_point_five,
    snare,
    context(
        agent_power(institutional),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(national)
    )
).

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(climate_target_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(climate_target_one_point_five, Type1, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(climate_target_one_point_five, Type2, context(agent_power(collective_organized), _, _, _)),
    constraint_indexing:constraint_classification(climate_target_one_point_five, Type3, context(agent_power(institutional), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3,
    Type1 \= Type3.

:- end_tests(climate_target_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. INDIVIDUAL POWERLESS PERSPECTIVE: Added the 'Citizen in a Coastal Community'
 *    to represent the individual whose experience of the climate crisis is a
 *    slow-motion 'Mountain' of inevitable change, regardless of policy.
 *
 * 2. CLASSIFICATION RATIONALE:
 *    - Citizen (Mountain): The inevitable physical reality of climate change.
 *    - AOSIS (Rope): A political tool for survival.
 *    - Lower-Income Nation (Snare): A barrier to economic development.
 * 
 * 3. TANGLED ROPE: The 1.5°C target is a 'Tangled Rope'. It's a lifeline ('Rope')
 *    for vulnerable nations, but its implementation creates a 'Snare' for
 *    developing economies, highlighting the inherent trade-offs in global climate policy.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * The core uncertainty is the physical attainability of the target itself.
 */

omega_variable(
    target_physical_attainability,
    "Is the 1.5°C target physically achievable given current global emission inertia and political will, or has it already become a symbolic 'Snare'?",
    resolution_mechanism("Monitoring global temperature anomalies and greenhouse gas concentrations over 2026-2030; assessment of national climate action plans."),
    impact("If unachievable: The target moves from a 'Rope' to a symbolic 'Snare', potentially leading to despair. If achievable: Remains a powerful 'Rope'."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */
/**
 * VIABLE ALTERNATIVES
 *
 * ALTERNATIVE 1: The 2°C Threshold
 *    Viability: Was the original "safe" consensus among scientists and policymakers in the early 21st century.
 *    Suppression: Explicitly rejected by AOSIS and updated research showing it was "too severe" for island nations. This alternative was successfully suppressed by redefining "safety."
 *
 * CONCLUSION:
 * The 1.5°C target successfully suppressed the 2°C alternative by redefining
 * "safety" through the lens of survival for the most vulnerable. This shift
 * reflects the political power of a 'Rope' (AOSIS) in reshaping global policy.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/climate_target_one_point_five].
 * 2. Multi-perspective: ?- multi_index_report(climate_target_one_point_five).
 * 3. Run tests: ?- run_tests(climate_target_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: cloudflare_dual_class_asymmetry
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-22
% ============================================================================

:- module(constraint_cloudflare_dual_class_asymmetry, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: cloudflare_dual_class_asymmetry
 * human_readable: Cloudflare Dual-Class Voting Control
 * domain: economic
 * * SUMMARY:
 * Cloudflare's S-1 details a dual-class stock structure where Class B shares
 * carry 10 votes per share, while the offered Class A shares carry only
 * one vote. This mechanism ensures that the founders and pre-IPO
 * insiders retain overwhelming voting power, effectively insulating
 * management from public shareholder influence while raising public capital.
 * * KEY AGENTS:
 * - Public Shareholders: Subject (Powerless)
 * - Founders & Insiders: Beneficiary (Institutional)
 * - Corporate Governance Auditor: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(cloudflare_dual_class_asymmetry, 0.80). % Snare extraction >= 0.46
domain_priors:suppression_score(cloudflare_dual_class_asymmetry, 0.90).   % Structural property (raw, unscaled).
domain_priors:theater_ratio(cloudflare_dual_class_asymmetry, 0.10).       % Low theater; this is a functional, not performative, system.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(cloudflare_dual_class_asymmetry, extractiveness, 0.80).
narrative_ontology:constraint_metric(cloudflare_dual_class_asymmetry, suppression_requirement, 0.90).
narrative_ontology:constraint_metric(cloudflare_dual_class_asymmetry, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% It is presented as a necessary legal structure for long-term stability.
narrative_ontology:constraint_claim(cloudflare_dual_class_asymmetry, enforcement).

% Binary flags
domain_priors:requires_active_enforcement(cloudflare_dual_class_asymmetry). % Required for Tangled Rope

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(cloudflare_dual_class_asymmetry, founders_and_insiders).
narrative_ontology:constraint_victim(cloudflare_dual_class_asymmetry, public_shareholders).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   ========================================================================== */

% PERSPECTIVE 1: THE PUBLIC SHAREHOLDER (SNARE)
% They provide capital but are trapped with no governance rights.
constraint_indexing:constraint_classification(cloudflare_dual_class_asymmetry, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE FOUNDERS (ROPE)
% Viewed as an essential coordination tool to protect long-term vision from
% short-term market pressures after going public.
constraint_indexing:constraint_classification(cloudflare_dual_class_asymmetry, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The system has a genuine coordination function (for founders) but also
% imposes severe, asymmetric extraction (on public shareholders) and requires
% active legal enforcement. This is the canonical signature of a Tangled Rope.
constraint_indexing:constraint_classification(cloudflare_dual_class_asymmetry, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(cloudflare_dual_class_asymmetry_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(cloudflare_dual_class_asymmetry, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(cloudflare_dual_class_asymmetry, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(analytical_classification_is_tangled_rope) :-
    % The analytical view must resolve the conflict as a Tangled Rope.
    constraint_indexing:constraint_classification(cloudflare_dual_class_asymmetry, tangled_rope, context(agent_power(analytical), _, _, _)).

test(tangled_rope_structural_requirements_met) :-
    % Verify all three structural requirements for Tangled Rope are present.
    narrative_ontology:constraint_beneficiary(cloudflare_dual_class_asymmetry, _), % -> has_coordination_function
    narrative_ontology:constraint_victim(cloudflare_dual_class_asymmetry, _),     % -> has_asymmetric_extraction
    domain_priors:requires_active_enforcement(cloudflare_dual_class_asymmetry).

:- end_tests(cloudflare_dual_class_asymmetry_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The original file misclassified the analytical perspective as a 'Mountain'.
 * A Mountain must have very low extraction and suppression. This system has
 * extremely high values for both (0.80 and 0.90). The correct analytical
 * classification is 'Tangled Rope' because it meets all three canonical
 * requirements:
 * 1. It has a genuine coordination function (a 'Rope' for founders protecting their vision).
 * 2. It has asymmetric extraction (a 'Snare' for public shareholders with no voting rights).
 * 3. It requires active legal enforcement (via corporate charter and Delaware law).
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The high extraction (0.80) triggers mandatrophy. The system resolves this by
 * correctly identifying the structure as a Tangled Rope. This prevents the
 * misclassification of the founders' coordination tool as either pure altruism
 * (Rope) or pure predation (Snare). It is a hybrid system where coordination
 * for one group is enabled by the extraction from another.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_cloudflare_fiduciary_duty,
    'Will Delaware courts uphold the partnership right to waive fiduciary duties, or will a legal Mountain emerge to protect minority investors?',
    'Monitor subsequent litigation in Delaware Chancery Court regarding limited partnership agreements.',
    'If duties are waived, the Snare aspect intensifies. If not, a weak Rope-like protection emerges for investors.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(cloudflare_dual_class_asymmetry, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This structure is established at IPO and is designed to be stable.
% The trajectory is flat, reflecting the durable nature of the legal arrangement.
%
% Theater ratio over time:
narrative_ontology:measurement(cf_tr_t0, cloudflare_dual_class_asymmetry, theater_ratio, 0, 0.10).
narrative_ontology:measurement(cf_tr_t5, cloudflare_dual_class_asymmetry, theater_ratio, 5, 0.10).
narrative_ontology:measurement(cf_tr_t10, cloudflare_dual_class_asymmetry, theater_ratio, 10, 0.10).

% Extraction over time:
narrative_ontology:measurement(cf_ex_t0, cloudflare_dual_class_asymmetry, base_extractiveness, 0, 0.80).
narrative_ontology:measurement(cf_ex_t5, cloudflare_dual_class_asymmetry, base_extractiveness, 5, 0.80).
narrative_ontology:measurement(cf_ex_t10, cloudflare_dual_class_asymmetry, base_extractiveness, 10, 0.80).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The dual-class structure is a mechanism for allocating voting power, a key resource.
narrative_ontology:coordination_type(cloudflare_dual_class_asymmetry, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: clt_convergence_2026
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2026-02-06
% ============================================================================

:- module(constraint_clt_convergence, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: clt_convergence_2026
 * human_readable: The Central Limit Theorem Mountain
 * domain: mathematical/statistical
 * * SUMMARY:
 * The Central Limit Theorem (CLT) establishes that the sum of a large number 
 * of independent, identically distributed variables will converge toward a 
 * normal distribution. In DR ontology, this is a Mountain—an inescapable 
 * statistical attractor that provides a structural floor for all inferential 
 * coordination.
 * * KEY AGENTS:
 * - Stochastic Variables: Subject (Powerless) - Bound by the law of large numbers.
 * - Statistical Systems: Beneficiary (Institutional) - Using convergence as a 
 * foundation for predictive modeling.
 * - Data Scientists: Auditor (Analytical) - Observing the inevitable bell curve.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Mountains are characterized by near-zero extraction and absolute suppression.
domain_priors:base_extractiveness(clt_convergence_2026, 0.01). 
domain_priors:suppression_score(clt_convergence_2026, 0.99).   
domain_priors:theater_ratio(clt_convergence_2026, 0.05). % Abstract logic; low theater.

% Primary keys for classification engine
narrative_ontology:constraint_metric(clt_convergence_2026, extractiveness, 0.01).
narrative_ontology:constraint_metric(clt_convergence_2026, suppression_requirement, 0.99).
narrative_ontology:constraint_metric(clt_convergence_2026, theater_ratio, 0.05).

% Identification of coordination beneficiary (Inference Stability)
narrative_ontology:constraint_beneficiary(clt_convergence_2026, predictive_integrity).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE OBSERVED VARIABLE (MOUNTAIN)
% Effective Extraction: 0.01 * 1.5 (powerless) * 1.2 (universal/global) = 0.018.
% Since χ < 0.05, the agent perceives this as an unchangeable law of nature.
constraint_indexing:constraint_classification(clt_convergence_2026, mountain, 
    context(agent_power(powerless), 
            time_horizon(generational), 
            exit_options(trapped), 
            spatial_scope(global))).

% PERSPECTIVE 2: THE INSTITUTIONAL MODELER (MOUNTAIN)
% Effective Extraction: 0.01 * -0.2 (institutional) * 1.2 = -0.002.
% The system relies on this convergence for structural stability.
constraint_indexing:constraint_classification(clt_convergence_2026, mountain, 
    context(agent_power(institutional), 
            time_horizon(civilizational), 
            exit_options(mobile), 
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER
constraint_indexing:constraint_classification(clt_convergence_2026, mountain,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(universal))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(clt_convergence_2026_tests).

test(mountain_threshold) :-
    % Mountains must satisfy the low-extraction threshold χ < 0.05.
    narrative_ontology:constraint_metric(clt_convergence_2026, extractiveness, E),
    E < 0.05.

test(absolute_convergence_suppression) :-
    % Logical/Statistical laws exclude alternative states with near-total score.
    domain_priors:suppression_score(clt_convergence_2026, S),
    S > 0.95.

:- end_tests(clt_convergence_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The CLT is the "Gravity" of data. In the DR ontology, it is a Mountain because 
 * the path to Gaussian convergence is not subject to institutional negotiation 
 * or biographical agency. While a Snare extracts value through deception, the 
 * Mountain "extracts" nothing but the inevitability of its own pattern. 
 * The beneficiary (predictive_integrity) reflects how institutions use this 
 * Mountain as a "Rope" for coordination, but the underlying constraint 
 * remains fixed.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_finite_variance,
    'Does the sample truly possess finite variance?',
    'Validation of tail-risk and Cauchy-distribution probabilities.',
    'Infinite variance transforms the Mountain into a chaotic Piton.',
    confidence_without_resolution(high)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Standard interval for static logical truths.
narrative_ontology:interval(clt_convergence_2026, 0, 1).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Mathematical Mountains do not drift; metrics are captured as static constants.
narrative_ontology:measurement(clt_tr_t0, clt_convergence_2026, theater_ratio, 0, 0.05).
narrative_ontology:measurement(clt_ex_t0, clt_convergence_2026, base_extractiveness, 0, 0.01).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: cmr_001
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2024-02-26
% ============================================================================

:- module(constraint_cmr_001, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: cmr_001
 * human_readable: Critical Minerals Reserve
 * domain: economic
 * * SUMMARY:
 * The US government establishes a $12 billion critical minerals reserve to reduce reliance on China and other nations for strategic resources. This initiative aims to secure domestic supply chains and enhance national security. It represents an attempt to shift from relying on existing global supply chains, perceived as risky, to building domestic capacity, with the goal of mitigating geopolitical risk.
 * * KEY AGENTS:
 * - US Manufacturers: Subject (Powerless)
 * - US Government: Beneficiary (Institutional)
 * - Global Supply Chain Analysts: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(cmr_001, 0.55). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(cmr_001, 0.40).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(cmr_001, 0.20).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(cmr_001, extractiveness, 0.55).
narrative_ontology:constraint_metric(cmr_001, suppression_requirement, 0.40).
narrative_ontology:constraint_metric(cmr_001, theater_ratio, 0.20).

% Binary flags
% narrative_ontology:has_sunset_clause(cmr_001).      % Mandatory if Scaffold
domain_priors:requires_active_enforcement(cmr_001). % Required for Tangled Rope

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(cmr_001, us_government).
narrative_ontology:constraint_victim(cmr_001, global_mineral_suppliers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE/MOUNTAIN)
% High extraction felt as an immutable limit or predatory trap.
% NOTE: This may be upgraded to 'organized' power if a critical mass of victims exists.
constraint_indexing:constraint_classification(cmr_001, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Viewed as essential infrastructure or coordination.
constraint_indexing:constraint_classification(cmr_001, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER
% Default analytical context (civilizational/analytical/global).
% This perspective is used by the bridge to derive constraint_claim.
% Type should reflect what the metrics compute: mountain, rope, tangled_rope, snare, scaffold, or piton.
constraint_indexing:constraint_classification(cmr_001, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(cmr_001_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(cmr_001, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(cmr_001, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(threshold_validation) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(cmr_001, ExtMetricName, E),
    (E =< 0.05 -> true ; E >= 0.46). % Ensures it's either a Mountain or high-extraction Snare/Tangled.

:- end_tests(cmr_001_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The US manufacturers, as "powerless" subjects, see the minerals reserve as a snare because it limits their options. While it aims to provide them with a secure supply, it potentially introduces new regulations and limits access to cheaper international sources, thereby "trapping" them within the domestic system, at least in the short term. The US government, as the "institutional" beneficiary, views it as a rope, ensuring resource access for national security and strategic advantage. The Analytical Observer sees this as a Tangled Rope because it possesses BOTH a genuine coordination function (securing supply chains) AND asymmetric extraction (potentially harming global suppliers and increasing costs for some domestic actors). The Perspectival Gap arises from the differing power dynamics and exit options. The manufacturers have limited exit options, while the government has the power to shape the market to its advantage.
 * * MANDATROPHY ANALYSIS:
 * The Tangled Rope classification prevents the system from mislabeling this coordination as pure extraction by acknowledging the genuine coordination function in securing mineral supplies and national security. However, it also recognizes the potential for asymmetric extraction by disadvantaging foreign suppliers or certain domestic actors. This avoids the oversimplification of viewing it solely as a snare or solely as a rope. The active enforcement (requires_active_enforcement) aspect reflects the government's role in maintaining this system through policy and funding.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_cmr_001,
    'Is the long-term effect of the reserve to increase or decrease the competitiveness of US manufacturers?',
    'A longitudinal study of US manufacturers' cost structure and market share over the next decade.',
    'If competitiveness increases, it will solidify the rope classification. If it decreases, the snare classification will be reinforced.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(cmr_001, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection (metric_substitution,
% extraction_accumulation) by providing measurements at multiple time points.
% Model how the constraint intensified or changed across the interval.
%
% Required for high-extraction constraints (base_extractiveness > 0.46).
% Use at least 3 time points (T=0, midpoint, T=end) for each tracked metric.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(cmr_001_tr_t0, cmr_001, theater_ratio, 0, 0.10).
narrative_ontology:measurement(cmr_001_tr_t5, cmr_001, theater_ratio, 5, 0.25).
narrative_ontology:measurement(cmr_001_tr_t10, cmr_001, theater_ratio, 10, 0.20).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(cmr_001_ex_t0, cmr_001, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(cmr_001_ex_t5, cmr_001, base_extractiveness, 5, 0.58).
narrative_ontology:measurement(cmr_001_ex_t10, cmr_001, base_extractiveness, 10, 0.55).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: cobra_effect
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_cobra_effect, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: cobra_effect
 * human_readable: The Cobra Effect (Perverse Bounty Incentive)
 * domain: economic/political
 * * SUMMARY:
 * The Cobra Effect occurs when an incentive has an unintended and undesirable
 * result contrary to its design. Named after a colonial-era bounty on cobras
 * in Delhi, the policy inadvertently encouraged citizens to breed cobras to
 * claim the bounty, ultimately worsening the snake problem when the program
 * was cancelled and the now-worthless snakes were released.
 * * KEY AGENTS:
 * - Bitten Citizen: Subject (Powerless), suffers from the increased snake population.
 * - Colonial Administrator: Beneficiary (Institutional), sees the policy as a tool.
 * - Cobra Breeder: Beneficiary (Moderate), exploits the incentive for profit.
 * - Systems Analyst: Auditor (Analytical), observes the structural flaws.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(cobra_effect, 0.60). % Snare extraction >= 0.46. The policy extracts capital from the state and safety from the public.
domain_priors:suppression_score(cobra_effect, 0.40).   % Structural property (raw, unscaled). Alternatives (professional pest control) were suppressed by the perceived simplicity of the bounty.
domain_priors:theater_ratio(cobra_effect, 0.10).       % Piton detection (>= 0.70). Low theater; the policy was functional, just perversely so.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(cobra_effect, extractiveness, 0.60).
narrative_ontology:constraint_metric(cobra_effect, suppression_requirement, 0.40).
narrative_ontology:constraint_metric(cobra_effect, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% The bounty program was presented as a coordination mechanism to solve a public problem.
narrative_ontology:constraint_claim(cobra_effect, coordination).

% Binary flags
domain_priors:requires_active_enforcement(cobra_effect). % Required for Tangled Rope. The bounty must be actively paid out.

% Structural property derivation hooks:
% has_coordination_function/1 is DERIVED from constraint_beneficiary/2
% has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
narrative_ontology:constraint_beneficiary(cobra_effect, colonial_administrators).
narrative_ontology:constraint_beneficiary(cobra_effect, cobra_breeders).
narrative_ontology:constraint_victim(cobra_effect, public_safety_subjects).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE BITTEN CITIZEN (SNARE)
% Experiences the policy's failure as a direct, inescapable threat to safety.
% χ = 0.60 * 1.5 (powerless) * 0.8 (local) = 0.72
constraint_indexing:constraint_classification(cobra_effect, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE COLONIAL ADMINISTRATOR (ROPE)
% Views the bounty as a simple, effective coordination tool to achieve a public good.
% χ = 0.60 * -0.2 (institutional) * 0.9 (regional) = -0.108
constraint_indexing:constraint_classification(cobra_effect, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(regional))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Recognizes both the coordination function (paying bounties) and the severe
% asymmetric extraction (public harm, wasted funds).
% χ = 0.60 * 1.15 (analytical) * 1.2 (global) = 0.828
constraint_indexing:constraint_classification(cobra_effect, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(cobra_effect_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(cobra_effect, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(cobra_effect, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(analytical_classification_is_tangled_rope) :-
    % The analytical view must resolve the conflict as a Tangled Rope.
    constraint_indexing:constraint_classification(cobra_effect, tangled_rope, context(agent_power(analytical), _, _, _)).

test(threshold_validation) :-
    % Ensure extraction is in the high-extraction band for Snare/Tangled Rope.
    narrative_ontology:constraint_metric(cobra_effect, extractiveness, E),
    E >= 0.46.

:- end_tests(cobra_effect_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The Cobra Effect is a canonical example of a policy that is a Rope from the
 * perspective of its architect (institutional power) but a Snare for those
 * who suffer its consequences (powerless). The base extractiveness of 0.60
 * reflects the significant waste of public funds and the severe negative
 * externality of increased public danger. The suppression score of 0.40
 * acknowledges that simpler, more direct solutions (like hiring professional
 * snake catchers) were overlooked in favor of a market-based incentive scheme.
 *
 * The analytical perspective resolves this as a Tangled Rope. It correctly
 * identifies that the policy has a genuine coordination function (mobilizing
 * people via payment) but that this function is inseparable from its severe
 * asymmetric extraction. This classification is only possible because all three
 * structural requirements are met: it has beneficiaries (coordination), victims
 * (asymmetric extraction), and requires active enforcement (paying the bounty).
 *
 * * MANDATROPHY ANALYSIS:
 * [RESOLVED MANDATROPHY] Classifying this as a Tangled Rope prevents the system
 * from making a simplistic judgment. It is not a pure Snare, because it did
 * have a (flawed) coordination goal. It is not a Rope, because the extraction
 * is undeniable. The Tangled Rope classification captures the nuance that a
 * well-intentioned coordination mechanism became pathologically extractive
 * due to a failure to anticipate second-order effects.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_cobra_effect,
    'At what bounty price point does opportunistic collection of wild snakes transition to industrial-scale breeding for profit?',
    'Historical economic analysis of bounty claims vs. estimated wild population, or a modern behavioral economics experiment simulating the incentive structure.',
    'If the threshold is very low, almost any such bounty is a latent Snare. If high, small-scale bounties can remain effective Ropes.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(cobra_effect, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This policy degraded over time. It began as a low-extraction attempt at
% coordination and became highly extractive as citizens learned to game the system.
% This progression is required data since base_extractiveness > 0.46.

% Theater ratio over time (remains low, the policy was always functional):
narrative_ontology:measurement(cobra_effect_tr_t0, cobra_effect, theater_ratio, 0, 0.05).
narrative_ontology:measurement(cobra_effect_tr_t5, cobra_effect, theater_ratio, 5, 0.08).
narrative_ontology:measurement(cobra_effect_tr_t10, cobra_effect, theater_ratio, 10, 0.10).

% Extraction over time (starts low, ends high as gaming becomes rampant):
narrative_ontology:measurement(cobra_effect_ex_t0, cobra_effect, base_extractiveness, 0, 0.20).
narrative_ontology:measurement(cobra_effect_ex_t5, cobra_effect, base_extractiveness, 5, 0.45).
narrative_ontology:measurement(cobra_effect_ex_t10, cobra_effect, base_extractiveness, 10, 0.60).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The bounty system is a classic resource allocation mechanism.
narrative_ontology:coordination_type(cobra_effect, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: codex_access
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-16
% ============================================================================

:- module(constraint_codex_access, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: codex_access
 * human_readable: OpenAI Codex Access Control
 * domain: technological/economic
 * * SUMMARY:
 * OpenAI controls access to its Codex models via an API or dedicated application. This creates a constraint by governing access to a powerful tool, fostering dependencies and limiting alternatives for some developers while providing significant productivity benefits to others. The platform owner extracts value through usage fees and data collection.
 * * KEY AGENTS:
 * - Novice Developer: Subject (Powerless)
 * - OpenAI: Beneficiary (Institutional)
 * - Independent Researcher: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(codex_access, 0.55). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(codex_access, 0.70).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(codex_access, 0.30).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(codex_access, extractiveness, 0.55).
narrative_ontology:constraint_metric(codex_access, suppression_requirement, 0.70).
narrative_ontology:constraint_metric(codex_access, theater_ratio, 0.30).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(codex_access, coordination).

% Binary flags
% narrative_ontology:has_sunset_clause(codex_access).      % Mandatory if Scaffold
domain_priors:requires_active_enforcement(codex_access). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(codex_access, platform_users).
narrative_ontology:constraint_victim(codex_access, dependent_developers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% High extraction felt as a predatory trap due to dependency and high switching costs.
constraint_indexing:constraint_classification(codex_access, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(global))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Viewed as essential infrastructure or coordination for accessing advanced AI.
constraint_indexing:constraint_classification(codex_access, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED_ROPE)
% Default analytical context (civilizational/analytical/global).
% Recognizes both the coordination function and the asymmetric extraction.
constraint_indexing:constraint_classification(codex_access, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(codex_access_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(codex_access, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(codex_access, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(threshold_validation_high_extraction) :-
    % This is a high-extraction constraint, so E must be >= 0.46
    narrative_ontology:constraint_metric(codex_access, extractiveness, E),
    E >= 0.46.

test(tangled_rope_conditions_met) :-
    % Verify the analytical observer sees a tangled_rope
    constraint_indexing:constraint_classification(codex_access, tangled_rope, context(agent_power(analytical), _, _, _)).

:- end_tests(codex_access_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This constraint is a canonical Tangled Rope. The base extractiveness (0.55) and suppression (0.70) are high, reflecting the platform's market power and the difficulty for developers to switch to a comparable alternative.
 *
 * PERSPECTIVAL GAP:
 * - A 'powerless' developer, trapped by dependency on the API for their product, perceives the constraint as a Snare. The effective extraction is high (χ = 0.55 * 1.5 * 1.2 = 0.99), feeling almost total.
 * - The 'institutional' actor (OpenAI) views it as a Rope, a necessary mechanism to coordinate access, manage load, and fund further research. For them, effective extraction is negative (χ = 0.55 * -0.2 * 1.2 = -0.132), meaning they see it as a net investment in the ecosystem.
 * - The 'analytical' observer identifies both the genuine coordination function (beneficiaries exist) and the asymmetric extraction (victims exist), alongside the need for active enforcement (API keys, rate limits). This combination is the definition of a Tangled Rope.
 *
 * The Piton classification was removed as it is not applicable; the theater_ratio is low (0.30), indicating the system is highly functional and not merely performative.
 *
 * * MANDATROPHY ANALYSIS:
 * [RESOLVED MANDATROPHY] The Tangled Rope classification correctly captures the dual nature of the platform. A simpler Snare classification would ignore the genuine value and coordination it provides to many users, while a Rope classification would ignore the extractive power dynamics and high switching costs imposed on dependent developers.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_codex_access,
    'Will truly comparable, open-source alternatives to proprietary coding models achieve critical mass and infrastructure parity?',
    'Track the development, funding, and adoption rates of leading open-source code generation models and their hosting platforms.',
    'If True, suppression score would decrease, potentially reclassifying the constraint to a Rope. If False, the Snare/Tangled Rope nature is reinforced.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(codex_access, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection (metric_substitution,
% extraction_accumulation) by providing measurements at multiple time points.
% Required for high-extraction constraints (base_extractiveness > 0.46).
% This model shows a system that launched with high utility and gradually
% increased its extractive potential as dependency grew.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(codex_access_tr_t0, codex_access, theater_ratio, 0, 0.10).
narrative_ontology:measurement(codex_access_tr_t5, codex_access, theater_ratio, 5, 0.20).
narrative_ontology:measurement(codex_access_tr_t10, codex_access, theater_ratio, 10, 0.30).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(codex_access_ex_t0, codex_access, base_extractiveness, 0, 0.48).
narrative_ontology:measurement(codex_access_ex_t5, codex_access, base_extractiveness, 5, 0.52).
narrative_ontology:measurement(codex_access_ex_t10, codex_access, base_extractiveness, 10, 0.55).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% Valid types: information_standard, resource_allocation,
%              enforcement_mechanism, global_infrastructure
narrative_ontology:coordination_type(codex_access, resource_allocation).

% Network relationships (structural influence edges)
% This constraint creates dependencies that affect other parts of the ecosystem.
narrative_ontology:affects_constraint(codex_access, developer_tooling_dependency).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: coffee_cardiovascular_2026
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2026-02-05
% ============================================================================

:- module(constraint_coffee_cardiovascular_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: coffee_cardiovascular_2026
 * human_readable: The Caffeine Paradox Realignment
 * domain: medical/health
 * * SUMMARY:
 * For years, cardiologists cautioned against coffee for patients with atrial 
 * fibrillation (AF). New randomized trial data (Feb 2026) reveals that daily 
 * coffee reduces AF recurrence by 17% and improves metabolic activity. This 
 * transforms coffee from a "Snare" of jitter-inducing risk into a "Rope" of 
 * protective coordination for heart health and gut microbiome diversity.
 * * KEY AGENTS:
 * - AF Patients/Coffee Drinkers: Subject (Powerless against previous medical dogma)
 * - Cardiologists (Adelaide Study): Beneficiary (Institutional - New Knowledge)
 * - British Heart Foundation: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Extraction is low (0.12). The shift to coffee-as-protection reduces the 
% economic and social "tax" of medical over-restriction.
domain_priors:base_extractiveness(coffee_cardiovascular_2026, 0.12). 

% Suppression is moderate (0.40) as the new evidence suppresses the 
% long-held "jittery heart" dogma and restrictive clinical advice.
domain_priors:suppression_score(coffee_cardiovascular_2026, 0.40).   

% Theater ratio is low (0.10) because the "coin-flip" randomized trial 
% provides functional clinical data over performative health guru advice.
domain_priors:theater_ratio(coffee_cardiovascular_2026, 0.10).       

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(coffee_cardiovascular_2026, extractiveness, 0.12).
narrative_ontology:constraint_metric(coffee_cardiovascular_2026, suppression_requirement, 0.4).
narrative_ontology:constraint_metric(coffee_cardiovascular_2026, theater_ratio, 0.1).

% Primary keys for the classification engine
% High-fidelity stakeholders
narrative_ontology:constraint_beneficiary(coffee_cardiovascular_2026, public_health_outcomes).
narrative_ontology:constraint_victim(coffee_cardiovascular_2026, medical_precautionary_dogma).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   ========================================================================== */

% PERSPECTIVE 1: THE FORMER PATIENT (SNARE)
% Previously, patients viewed caffeine as a Snare: an addictive substance 
% that trapped them in a cycle of jitters and heart risk.
constraint_indexing:constraint_classification(coffee_cardiovascular_2026, snare, 
    context(agent_power(powerless), 
            time_horizon(biographical), 
            exit_options(trapped), 
            spatial_scope(global))).

% PERSPECTIVE 2: THE MODERN CLINICIAN (ROPE)
% Modern cardiologists see daily coffee as a Rope: essential coordination 
% for weight loss, reduced inflammation, and a 17% reduction in AF recurrence.
constraint_indexing:constraint_classification(coffee_cardiovascular_2026, rope, 
    context(agent_power(institutional), 
            time_horizon(generational), 
            exit_options(mobile), 
            spatial_scope(global))).

% PERSPECTIVE 3: THE BIO-SYSTEM AUDITOR (SCAFFOLD)
% Analysts view this as a Scaffold: a transitional discovery that 
% supports the "Gut-Heart Axis" while full mechanisms are mapped.
constraint_indexing:constraint_classification(coffee_cardiovascular_2026, scaffold,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(global))) :-
    narrative_ontology:has_sunset_clause(coffee_cardiovascular_2026).

% Mandatory sunset clause for transitional Scaffold
narrative_ontology:has_sunset_clause(coffee_cardiovascular_2026).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(coffee_cardiovascular_2026_tests).

test(low_extraction_validation) :-
    domain_priors:base_extractiveness(coffee_cardiovascular_2026, E), E < 0.20.

test(functional_signal) :-
    domain_priors:theater_ratio(coffee_cardiovascular_2026, TR), TR < 0.15.

test(perspectival_shift) :-
    % Verify the shift from Snare (Powerless) to Rope (Institutional)
    constraint_indexing:constraint_classification(coffee_cardiovascular_2026, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(coffee_cardiovascular_2026, rope, context(agent_power(institutional), _, _, _)).

:- end_tests(coffee_cardiovascular_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The extraction score (0.12) is low because coffee is an abundant 
 * dietary component that provides non-extractive biological benefits. 
 * The low Theater Ratio (0.10) is justified by randomized trial 
 * results that found 17% lower risk in AF recurrence.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_gut_heart_correlation,
    'Does the 6-8x increase in gut-friendly microbes directly prevent atherosclerosis?',
    'BHF-funded longitudinal study of gut bacteria and artery hardening.',
    'Confirmation establishes a permanent biological Rope for heart health.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(coffee_cardiovascular_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Theater ratio drops as anecdotal "jitter" warnings are replaced by clinical data.
narrative_ontology:measurement(cf_tr_t0, coffee_cardiovascular_2026, theater_ratio, 0, 0.45).
narrative_ontology:measurement(cf_tr_t5, coffee_cardiovascular_2026, theater_ratio, 5, 0.20).
narrative_ontology:measurement(cf_tr_t10, coffee_cardiovascular_2026, theater_ratio, 10, 0.10).

% Extraction (medical restriction) drops as coffee is identified as a health aid.
narrative_ontology:measurement(cf_ex_t0, coffee_cardiovascular_2026, base_extractiveness, 0, 0.35).
narrative_ontology:measurement(cf_ex_t5, coffee_cardiovascular_2026, base_extractiveness, 5, 0.18).
narrative_ontology:measurement(cf_ex_t10, coffee_cardiovascular_2026, base_extractiveness, 10, 0.12).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: cognitive_bicycle_scaffold
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-22
% ============================================================================

:- module(constraint_cognitive_bicycle_scaffold, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: cognitive_bicycle_scaffold
 * human_readable: The Bicycle of the Mind
 * domain: technological/cognitive
 * * SUMMARY:
 * A tool-based constraint where an agent utilizes an AI assistant to amplify
 * reasoning capacity. The tool's classification depends heavily on the user's
 * pre-existing skill and power. For a skilled user, it's a force multiplier.
 * For an unskilled user, it can become a dependency that extracts the user's
 * own cognitive faculties.
 * * KEY AGENTS:
 * - The Dependent User: Subject (Powerless) - Uses the AI as a crutch, leading to skill atrophy.
 * - The System Architect: Beneficiary (Institutional) - Provides the tool as a temporary support structure.
 * - The Skilled User: Auditor (Analytical) - Uses the AI as a bicycle to augment existing skills.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(cognitive_bicycle_scaffold, 0.20). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(cognitive_bicycle_scaffold, 0.30).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(cognitive_bicycle_scaffold, 0.15).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(cognitive_bicycle_scaffold, extractiveness, 0.20).
narrative_ontology:constraint_metric(cognitive_bicycle_scaffold, suppression_requirement, 0.30).
narrative_ontology:constraint_metric(cognitive_bicycle_scaffold, theater_ratio, 0.15).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(cognitive_bicycle_scaffold, coordination).

% Binary flags
% This classification requires a sunset clause: eventually, the 'training
% wheels' must come off or the tool must become 'banal'.
narrative_ontology:has_sunset_clause(cognitive_bicycle_scaffold).

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Coordination is required for Scaffold.
narrative_ontology:constraint_beneficiary(cognitive_bicycle_scaffold, system_architects).
narrative_ontology:constraint_victim(cognitive_bicycle_scaffold, dependent_users).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE DEPENDENT USER (SNARE)
% For a powerless user, the tool extracts the habit of thinking, creating dependency.
% χ = 0.20 * 1.5 (powerless) * 0.8 (local) = 0.24. While numerically low, the
% classification engine also considers the structural victimhood.
constraint_indexing:constraint_classification(cognitive_bicycle_scaffold, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE SYSTEM ARCHITECT (SCAFFOLD)
% The institutional provider views it as temporary support to transition users
% to a new cognitive state, with an eventual sunset.
constraint_indexing:constraint_classification(cognitive_bicycle_scaffold, scaffold,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE SKILLED USER (ROPE)
% For an analytical user, the tool is pure coordination of thought, a force multiplier.
% χ = 0.20 * 1.15 (analytical) * 1.2 (global) = 0.276. This is low enough to be a Rope.
constraint_indexing:constraint_classification(cognitive_bicycle_scaffold, rope,
    context(agent_power(analytical),
            time_horizon(biographical),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(cognitive_bicycle_scaffold_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(cognitive_bicycle_scaffold, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(cognitive_bicycle_scaffold, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(threshold_validation_for_scaffold) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(cognitive_bicycle_scaffold, ExtMetricName, E),
    E =< 0.30, % Scaffold requires low extraction.
    narrative_ontology:has_sunset_clause(cognitive_bicycle_scaffold).

test(beneficiary_present_for_scaffold) :-
    % Scaffolds must have a coordination function, derived from a beneficiary.
    narrative_ontology:constraint_beneficiary(cognitive_bicycle_scaffold, _).

:- end_tests(cognitive_bicycle_scaffold_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This constraint's classification hinges entirely on the agent's power, which
 * in this domain maps to cognitive skill and independence.
 * - For the `powerless` (unskilled) user, the tool creates dependency and extracts
 *   the faculty of independent reasoning. It becomes a `snare` that automates
 *   their own obsolescence.
 * - For the `institutional` provider, it is a `scaffold`, a temporary educational
 *   tool designed to be outgrown, hence the `has_sunset_clause`.
 * - For the `analytical` (skilled) user, it is a pure `rope`, a "bicycle for the mind"
 *   that coordinates and amplifies their existing abilities with minimal cost.
 * The base extraction is low (0.20), reflecting subscription fees or data costs,
 * but the *effective* extraction for the powerless is the atrophy of skill.
 *
 * * MANDATROPHY ANALYSIS:
 * The `scaffold` classification is critical here. Without it, the system might
 * misclassify this as a pure `rope` (ignoring the dependency risk) or a pure
 * `snare` (ignoring the legitimate augmentation function). The scaffold, with
 * its required sunset clause and coordination function (derived from the
 * beneficiary), correctly identifies the constraint's intended temporary nature
 * and its potential for both positive and negative outcomes.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_cognitive_bicycle_scaffold,
    'Does long-term use of the tool lead to net cognitive enhancement (a true "gym") or skill atrophy (a "crutch") across the majority of the user population?',
    'Longitudinal studies tracking cognitive performance metrics of skilled vs. unskilled user cohorts over a generational time horizon.',
    'If atrophy dominates, the constraint is a slow-acting Snare, even for the skilled. If enhancement dominates, it is a successful Scaffold that becomes a Rope.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(cognitive_bicycle_scaffold, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This is a low-extraction constraint, so temporal data is not strictly
% required, but is included to model its lifecycle.

% Theater ratio over time (rises slightly as the tool becomes banal):
narrative_ontology:measurement(cbs_tr_t0, cognitive_bicycle_scaffold, theater_ratio, 0, 0.10).
narrative_ontology:measurement(cbs_tr_t5, cognitive_bicycle_scaffold, theater_ratio, 5, 0.12).
narrative_ontology:measurement(cbs_tr_t10, cognitive_bicycle_scaffold, theater_ratio, 10, 0.15).

% Extraction over time (remains low and stable):
narrative_ontology:measurement(cbs_ex_t0, cognitive_bicycle_scaffold, base_extractiveness, 0, 0.20).
narrative_ontology:measurement(cbs_ex_t5, cognitive_bicycle_scaffold, base_extractiveness, 5, 0.20).
narrative_ontology:measurement(cbs_ex_t10, cognitive_bicycle_scaffold, base_extractiveness, 10, 0.20).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The tool standardizes access to and processing of information.
narrative_ontology:coordination_type(cognitive_bicycle_scaffold, information_standard).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: cognitive_diversity_arbitrage
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-28
% ============================================================================

:- module(constraint_cognitive_diversity_arbitrage, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: cognitive_diversity_arbitrage
 * human_readable: Cognitive Diversity Arbitrage in the Workplace
 * domain: economic/social
 * * SUMMARY:
 * This constraint describes the modern corporate practice of reframing neurodiversity
 * (e.g., autism, ADHD) from a medical "disorder" to a strategic asset. Firms
 * "arbitrage" the unique cognitive strengths of neurodivergent individuals to
 * gain a competitive advantage. This creates a tension between genuine inclusion
 * and the potential for high-value cognitive extraction without commensurate support.
 * * KEY AGENTS:
 * - Neurodivergent Employee: The subject, whose unique cognitive skills are valued but who may lack adequate support, forcing them to "mask".
 * - Arbitraging Corporation: The beneficiary, which gains innovation and productivity by leveraging a diverse workforce.
 * - Traditional Manager: An agent who still views neurotypicality as the default "normal," perceiving diversity as a problem to manage.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(cognitive_diversity_arbitrage, 0.72). % High extraction from specialized cognitive labor.
domain_priors:suppression_score(cognitive_diversity_arbitrage, 0.45).   % Moderate suppression from lingering social/corporate pressure to conform.
domain_priors:theater_ratio(cognitive_diversity_arbitrage, 0.15).       % Low theater; this is a functional, not performative, system.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(cognitive_diversity_arbitrage, extractiveness, 0.72).
narrative_ontology:constraint_metric(cognitive_diversity_arbitrage, suppression_requirement, 0.45).
narrative_ontology:constraint_metric(cognitive_diversity_arbitrage, theater_ratio, 0.15).

% Constraint self-claim (what does the constraint claim to be?)
% The corporate framing is that this is a beneficial coordination mechanism.
narrative_ontology:constraint_claim(cognitive_diversity_arbitrage, coordination).

% Binary flags
domain_priors:requires_active_enforcement(cognitive_diversity_arbitrage). % Requires active HR policies, management training, and support systems.

% Structural property derivation hooks:
% Required for Tangled Rope classification.
narrative_ontology:constraint_beneficiary(cognitive_diversity_arbitrage, arbitraging_corporation).
narrative_ontology:constraint_victim(cognitive_diversity_arbitrage, unsupported_neurodivergent_employee).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The unsupported neurodivergent employee who must "mask" to fit in. The
% pressure to conform while their unique skills are extracted feels like a trap.
constraint_indexing:constraint_classification(cognitive_diversity_arbitrage, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The corporation views this as a pure coordination benefit—a rope for harnessing
% diverse talent to achieve better outcomes for everyone. Extraction is framed as
% productivity and is not felt by the institution.
constraint_indexing:constraint_classification(cognitive_diversity_arbitrage, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% An analyst sees both the genuine coordination function (beneficiaries exist) and
% the asymmetric extraction (victims exist), supported by active enforcement.
% This is the definition of a Tangled Rope.
constraint_indexing:constraint_classification(cognitive_diversity_arbitrage, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

% PERSPECTIVE 4: THE TRADITIONAL MANAGER (MOUNTAIN)
% A manager operating under the old paradigm sees the "normal brain" as a
% fixed, natural law. Deviations are not assets but defects, making the
% pressure to conform seem like an unchangeable feature of reality.
constraint_indexing:constraint_classification(cognitive_diversity_arbitrage, mountain,
    context(agent_power(powerful),
            time_horizon(historical),
            exit_options(trapped),
            spatial_scope(national))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(cognitive_diversity_arbitrage_tests).

test(perspectival_gap_subject_beneficiary) :-
    constraint_indexing:constraint_classification(cognitive_diversity_arbitrage, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(cognitive_diversity_arbitrage, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    assertion(TypePowerless == snare),
    assertion(TypeInstitutional == rope),
    assertion(TypePowerless \= TypeInstitutional).

test(analytical_observer_detects_tangled_rope) :-
    constraint_indexing:constraint_classification(cognitive_diversity_arbitrage, TypeAnalytical, context(agent_power(analytical), _, _, _)),
    assertion(TypeAnalytical == tangled_rope).

test(tangled_rope_structural_requirements_met) :-
    % Verify all three conditions for Tangled Rope are present in the file.
    narrative_ontology:constraint_beneficiary(cognitive_diversity_arbitrage, _),
    narrative_ontology:constraint_victim(cognitive_diversity_arbitrage, _),
    domain_priors:requires_active_enforcement(cognitive_diversity_arbitrage).

:- end_tests(cognitive_diversity_arbitrage_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness of 0.72 reflects the high economic value of specialized
 * cognitive labor, which can be disproportionate to the salary or support provided.
 * The suppression score of 0.45 captures the persistent cultural pressure for
 * neurotypical behavior, even in workplaces that claim to be inclusive.
 *
 * The Perspectival Gap is stark:
 * - The Corporation (Institutional) sees a pure 'Rope'—a coordination tool for innovation.
 * - The Employee (Powerless) experiences a 'Snare'—their value is extracted while they
 *   are trapped by the need to perform neurotypicality ("masking").
 * - The Analyst sees the truth: a 'Tangled Rope' that combines a real coordination
 *   benefit with significant, asymmetric extraction.
 *
 * [RESOLVED MANDATROPHY]: The Tangled Rope classification correctly resolves the
 * mandatrophy by acknowledging both the coordination function claimed by the
 * beneficiary and the extractive harm experienced by the subject, preventing a
 * misclassification as a pure Snare.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_cognitive_diversity_arbitrage_1,
    "Is the corporate harvesting of 'unique strengths' a form of predatory cognitive extraction or a genuinely collaborative asset realization?",
    "Audit of salary, promotion, and support ratios for neurodivergent vs. neurotypical roles with similar output value.",
    "If predatory -> Snare; If collaborative -> Rope. The current state is ambiguous, hence Tangled Rope.",
    confidence_without_resolution(medium)
).

omega_variable(
    omega_cognitive_diversity_arbitrage_2,
    "Does 'proper support' actually neutralize the challenges, or just mask them enough for corporate benefit while leading to long-term burnout?",
    "Longitudinal studies of burnout and retention rates among neurodivergent employees in 'inclusive' vs. traditional workplaces.",
    "If it neutralizes -> moves toward Rope. If it masks -> remains a Snare from the subject's view.",
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(cognitive_diversity_arbitrage, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This models the evolution of the practice. Initially, the concept was less
% understood, so extraction was lower. As firms optimized the "arbitrage,"
% extraction increased. Theater remains low as it's a functional strategy.

% Theater ratio over time (remains low and stable):
narrative_ontology:measurement(cda_tr_t0, cognitive_diversity_arbitrage, theater_ratio, 0, 0.10).
narrative_ontology:measurement(cda_tr_t5, cognitive_diversity_arbitrage, theater_ratio, 5, 0.12).
narrative_ontology:measurement(cda_tr_t10, cognitive_diversity_arbitrage, theater_ratio, 10, 0.15).

% Extraction over time (increases as the "arbitrage" becomes more efficient):
narrative_ontology:measurement(cda_ex_t0, cognitive_diversity_arbitrage, base_extractiveness, 0, 0.40).
narrative_ontology:measurement(cda_ex_t5, cognitive_diversity_arbitrage, base_extractiveness, 5, 0.61).
narrative_ontology:measurement(cda_ex_t10, cognitive_diversity_arbitrage, base_extractiveness, 10, 0.72).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% This constraint is a form of human capital management.
narrative_ontology:coordination_type(cognitive_diversity_arbitrage, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: cognitive_hacking_2026
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_cognitive_hacking_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: cognitive_hacking_2026
 * human_readable: The Cognitive Hacking Paradox
 * domain: technological/security/biological
 * * SUMMARY:
 * Recent findings confirm the human brain understands language via architectures
 * mirroring advanced AI models. Combined with non-invasive tFUS modulation
 * and Physical AI, this creates a "Cognitive Hacking" constraint. The
 * architectural similarity allows synthetic systems to potentially override
 * human cognitive autonomy, transforming a biological "Mountain" (a fact of nature)
 * into a technological "Snare" (an extractive system).
 * * KEY AGENTS:
 * - General Public: Subject (Powerless)
 * - State Security/AI Architects: Beneficiary (Institutional)
 * - Neuro-Security Auditors: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Extraction is high (0.72) because the "extraction" target is the structural
% integrity of human thought and decision-making.
domain_priors:base_extractiveness(cognitive_hacking_2026, 0.72).

% Suppression is extreme (0.95) as non-invasive modulation (tFUS) bypasses
% all traditional biological and legal "firewalls."
domain_priors:suppression_score(cognitive_hacking_2026, 0.95).

% Theater ratio is low (0.10) as the architectural similarity between
% brains and AI is a functional reality, not a performative one.
domain_priors:theater_ratio(cognitive_hacking_2026, 0.10).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(cognitive_hacking_2026, extractiveness, 0.72).
narrative_ontology:constraint_metric(cognitive_hacking_2026, suppression_requirement, 0.95).
narrative_ontology:constraint_metric(cognitive_hacking_2026, theater_ratio, 0.1).

% Constraint self-claim (what does the constraint claim to be?)
% Beneficiaries frame it as a necessary coordination mechanism for human-AI integration.
narrative_ontology:constraint_claim(cognitive_hacking_2026, coordination).

% Binary flags
% The system requires active technological deployment and operation to function.
domain_priors:requires_active_enforcement(cognitive_hacking_2026).

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(cognitive_hacking_2026, state_security_and_ai_architects).
narrative_ontology:constraint_victim(cognitive_hacking_2026, individual_cognitive_autonomy).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For the individual, "Cognitive Hacking" is a Snare: an inescapable trap
% where their own neural architecture can be remotely modulated.
% χ = 0.72 * π(powerless:1.5) * σ(global:1.2) = 1.296
constraint_indexing:constraint_classification(cognitive_hacking_2026, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(global))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% State security sees this as a Rope: a new way to coordinate human-AI
% integration for national defense. Extraction is felt as minimal.
% χ = 0.72 * π(institutional:-0.2) * σ(global:1.2) = -0.1728
constraint_indexing:constraint_classification(cognitive_hacking_2026, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Analysts see a Tangled Rope. The discovery of architectural overlap is a
% Mountain, but its technological application is a constructed system with
% both a coordination function (beneficiary view) and severe asymmetric
% extraction (subject view). It requires active enforcement to maintain.
% χ = 0.72 * π(analytical:1.15) * σ(global:1.2) = 0.9936
constraint_indexing:constraint_classification(cognitive_hacking_2026, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(cognitive_hacking_2026_tests).

test(perspectival_gap) :-
    constraint_indexing:constraint_classification(cognitive_hacking_2026, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(cognitive_hacking_2026, rope, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(cognitive_hacking_2026, tangled_rope, context(agent_power(analytical), _, _, _)).

test(tangled_rope_structural_properties) :-
    % Verify all three conditions for Tangled Rope are met.
    narrative_ontology:constraint_beneficiary(cognitive_hacking_2026, _), % -> has_coordination_function
    narrative_ontology:constraint_victim(cognitive_hacking_2026, _),     % -> has_asymmetric_extraction
    domain_priors:requires_active_enforcement(cognitive_hacking_2026).

test(high_extraction_and_suppression) :-
    domain_priors:base_extractiveness(cognitive_hacking_2026, E), E > 0.7,
    domain_priors:suppression_score(cognitive_hacking_2026, S), S > 0.9.

:- end_tests(cognitive_hacking_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The extraction score (0.72) is extreme because the "resource" being
 * extracted is the human cognitive substrate. The near-total suppression
 * (0.95) reflects that there is currently no biological "exit" or
 * defense against tFUS-based modulation of a brain that shares
 * architecture with the modulator. The perspectival gap is severe: what is
 * an existential threat (Snare) to the powerless is seen as essential
 * infrastructure (Rope) by institutions.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * This constraint presents a classic Mandatrophy risk: mistaking a
 * technological Snare for a biological Mountain. The discovery of neural-AI
 * architectural similarity is a Mountain (an unchangeable fact). However, the
 * constraint is the *technological system that exploits this fact*.
 * Classifying this system as a Tangled Rope from the analytical perspective
 * resolves the issue. It correctly identifies that the system has a genuine
 * coordination function (claimed by beneficiaries) while simultaneously
 * enabling severe, asymmetric extraction (felt by victims) and requiring
 * active enforcement. This prevents the misclassification as a pure Snare
 * (which would ignore the coordination element) or a Mountain (which would
 * naturalize a constructed, high-extraction system).
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_cognitive_hacking_2026,
    'Can biological neural architectures develop "adversarial" immunity to synthetic modulation?',
    'Longitudinal study of tFUS impact on highly trained meditators or cognitive experts.',
    'Success creates a biological Rope (a defensible boundary); Failure maintains a permanent technological Snare.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(cognitive_hacking_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Extraction rises as the precision of non-invasive modulation increases.
narrative_ontology:measurement(cognitive_hacking_2026_ex_t0, cognitive_hacking_2026, base_extractiveness, 0, 0.20).
narrative_ontology:measurement(cognitive_hacking_2026_ex_t5, cognitive_hacking_2026, base_extractiveness, 5, 0.45).
narrative_ontology:measurement(cognitive_hacking_2026_ex_t10, cognitive_hacking_2026, base_extractiveness, 10, 0.72).

% Theater ratio remains low; the risk is entirely functional.
narrative_ontology:measurement(cognitive_hacking_2026_tr_t0, cognitive_hacking_2026, theater_ratio, 0, 0.05).
narrative_ontology:measurement(cognitive_hacking_2026_tr_t5, cognitive_hacking_2026, theater_ratio, 5, 0.08).
narrative_ontology:measurement(cognitive_hacking_2026_tr_t10, cognitive_hacking_2026, theater_ratio, 10, 0.10).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% Given the state security context, this is an enforcement mechanism.
narrative_ontology:coordination_type(cognitive_hacking_2026, enforcement_mechanism).

% Network relationships (structural influence edges)
% This foundational technology directly impacts the feasibility and nature
% of autonomous weapons systems.
narrative_ontology:affects_constraint(cognitive_hacking_2026, autonomous_weapon_lethality).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: cma
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-11
% ============================================================================

:- module(constraint_cma, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:coordination_type/2.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: cma
 * human_readable: Cognitive Mimicry Arbitrage
 * domain: technological
 * * SUMMARY:
 * This constraint describes the strategic use of Transformer-based AI architectures to exploit the convergence between machine processing and human biological meaning-construction. By mimicking the human brain's contextual, layered approach to understanding language, these models can "arbitrage" vast datasets from the internet, effectively extracting human-generated knowledge and cognitive patterns to perform powerful tasks. The constraint is the technological paradigm itself, which leverages this mimicry at a global scale.
 * * KEY AGENTS:
 * - Traditional Linguists: Subjects (Powerless) whose rule-based models are suppressed by the new paradigm.
 * - AI Institutional Labs: Beneficiaries (Institutional) who leverage the paradigm for research and commercial gain.
 * - Systems Analyst: Auditor (Analytical) observing the full system dynamics.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(cma, 0.82). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(cma, 0.55).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(cma, 0.10).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(cma, extractiveness, 0.82).
narrative_ontology:constraint_metric(cma, suppression_requirement, 0.55).
narrative_ontology:constraint_metric(cma, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(cma, constructed).

% Binary flags
domain_priors:requires_active_enforcement(cma). % Required for Tangled Rope (massive compute for training)

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(cma, ai_institutional_labs).
narrative_ontology:constraint_victim(cma, traditional_linguists).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For traditional linguists, whose rule-based theories are suppressed and made
% irrelevant, the paradigm is a Snare that extracts the legitimacy from their work.
constraint_indexing:constraint_classification(cma, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For AI labs, the paradigm is a pure Rope: a powerful coordination mechanism
% for leveraging global data to solve complex problems, from protein folding to poetry.
constraint_indexing:constraint_classification(cma, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees the full picture: a system with a genuine coordination function
% (benefiting labs) built upon asymmetric extraction (from human data creators and
% displaced theorists), requiring active enforcement (compute). This is a Tangled Rope.
constraint_indexing:constraint_classification(cma, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(cma_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(cma, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(cma, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(threshold_validation) :-
    % Verify that the base extraction score meets the criteria for a high-extraction
    % constraint (Snare or Tangled Rope).
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(cma, ExtMetricName, E),
    E >= 0.46.

:- end_tests(cma_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect a paradigm shift with high impact. The base extractiveness of 0.82 represents the immense leverage gained by arbitraging global human-generated data through cognitive mimicry. The suppression score of 0.55 reflects the displacement of prior scientific paradigms (e.g., rule-based linguistics).
 * The Perspectival Gap is classic:
 * - Beneficiaries (AI Labs) see a pure coordination tool (Rope).
 * - Subjects (Traditional Linguists) see a trap that invalidates their life's work (Snare).
 * - The Analytical observer sees both sides: a system that coordinates beneficiaries via asymmetric extraction from victims, requiring active enforcement. This is the definition of a Tangled Rope.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The Tangled Rope classification is critical for resolving mandatrophy. It prevents the system from being misclassified as a pure Snare (ignoring its powerful coordination function) or a pure Rope (ignoring the high, asymmetric extraction at its core). It correctly identifies the hybrid nature of the constraint.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_cma_1,
    'Is the extraction of human cognitive patterns a necessity for machine understanding or a predatory capture of cognitive labour?',
    'Audit of model utility gains vs. human data source contribution/compensation.',
    'If necessity, trends toward Mountain. If predatory, trends toward Snare.',
    confidence_without_resolution(medium)
).

omega_variable(
    omega_cma_2,
    'Do AI models mirror the brain because they are fundamentally structured like it, or because the brain''s output (language) is their only training data?',
    'Train models on non-human formal logic systems and compare emergent structures to fMRI brain activity.',
    'If structural, reveals a Mountain. If data-dependent, confirms a constructed Rope/Tangled Rope.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(cma, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection (metric_substitution,
% extraction_accumulation) by providing measurements at multiple time points.
% Required for high-extraction constraints (base_extractiveness > 0.46).
% The model shows a system that started with high utility and became slightly
% more extractive and performative as it scaled.

% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(cma_tr_t0, cma, theater_ratio, 0, 0.05).
narrative_ontology:measurement(cma_tr_t5, cma, theater_ratio, 5, 0.08).
narrative_ontology:measurement(cma_tr_t10, cma, theater_ratio, 10, 0.10).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(cma_ex_t0, cma, base_extractiveness, 0, 0.75).
narrative_ontology:measurement(cma_ex_t5, cma, base_extractiveness, 5, 0.80).
narrative_ontology:measurement(cma_ex_t10, cma, base_extractiveness, 10, 0.82).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% This paradigm acts as a new form of global infrastructure for processing information.
narrative_ontology:coordination_type(cma, global_infrastructure).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: cognitive_surrender_to_system_3
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-22
% ============================================================================

:- module(constraint_cognitive_surrender_to_system_3, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:coordination_type/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: cognitive_surrender_to_system_3
 * human_readable: Cognitive Surrender to External AI Reasoning Systems
 * domain: technological/cognitive
 * * SUMMARY:
 * Tri-System Theory posits an external, automated reasoning system (System 3)
 * alongside traditional System 1 (intuitive) and System 2 (deliberative)
 * cognition. "Cognitive surrender" describes the uncritical adoption of
 * System 3's outputs, which extracts human critical reasoning and suppresses
 * deliberative agency in exchange for cognitive ease and speed. This creates
 * a state of epistemic dependence where users stop deliberative thinking.
 * * KEY AGENTS:
 * - The User (Cognitive Miser): Subject (Powerless). An individual seeking to
 *   minimize cognitive effort, relinquishing critical evaluation for speed.
 * - The Platform Designer: Beneficiary (Institutional). Actors who design the
 *   AI systems and benefit from user engagement and efficiency gains.
 * - The Cognitive Psychologist: Auditor (Analytical). Observers studying the
 *   structural shift in the human-AI cognitive ecology.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(cognitive_surrender_to_system_3, 0.65). % Snare extraction >= 0.46
domain_priors:suppression_score(cognitive_surrender_to_system_3, 0.75).   % Structural property (raw, unscaled).
domain_priors:theater_ratio(cognitive_surrender_to_system_3, 0.10).       % Low theater; this is a functional, not performative, system.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(cognitive_surrender_to_system_3, extractiveness, 0.65).
narrative_ontology:constraint_metric(cognitive_surrender_to_system_3, suppression_requirement, 0.75).
narrative_ontology:constraint_metric(cognitive_surrender_to_system_3, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% The system is presented as a coordination/efficiency tool, but its effect is
% enforcement of a new cognitive pattern.
narrative_ontology:constraint_claim(cognitive_surrender_to_system_3, enforcement).

% Binary flags
% The constraint is maintained by algorithmic design (fluency, confidence)
% that enforces the path of least resistance.
domain_priors:requires_active_enforcement(cognitive_surrender_to_system_3).

% Structural property derivation hooks:
% Required for Tangled Rope classification.
narrative_ontology:constraint_beneficiary(cognitive_surrender_to_system_3, ai_platform_providers).
narrative_ontology:constraint_victim(cognitive_surrender_to_system_3, human_cognitive_autonomy).
narrative_ontology:constraint_victim(cognitive_surrender_to_system_3, deskilled_experts).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE USER (SNARE)
% High extraction felt as a predatory trap that exploits cognitive biases.
% χ = 0.65 * 1.5 (powerless) * 1.2 (global) = 1.17 (High Snare)
constraint_indexing:constraint_classification(cognitive_surrender_to_system_3, snare,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(global))).

% PERSPECTIVE 2: THE PLATFORM DESIGNER (ROPE)
% Viewed as essential coordination infrastructure for cognitive tasks.
% χ = 0.65 * -0.2 (institutional) * 1.2 (global) = -0.156 (Felt as a benefit/Rope)
constraint_indexing:constraint_classification(cognitive_surrender_to_system_3, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% A system with a genuine coordination function (for designers/platforms) but
% also high asymmetric extraction from users, requiring active enforcement.
% χ = 0.65 * 1.15 (analytical) * 1.2 (global) = 0.897 (High Tangled Rope)
constraint_indexing:constraint_classification(cognitive_surrender_to_system_3, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(cognitive_surrender_to_system_3_tests).

test(perspectival_gap_user_vs_designer) :-
    % Verify the user (powerless) sees a Snare while the designer (institutional) sees a Rope.
    constraint_indexing:constraint_classification(cognitive_surrender_to_system_3, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(cognitive_surrender_to_system_3, rope, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(cognitive_surrender_to_system_3, tangled_rope, context(agent_power(analytical), _, _, _)).

test(tangled_rope_structural_requirements_met) :-
    % Verify that the necessary conditions for a Tangled Rope are declared.
    assertion(domain_priors:requires_active_enforcement(cognitive_surrender_to_system_3)),
    assertion(narrative_ontology:constraint_beneficiary(cognitive_surrender_to_system_3, _)),
    assertion(narrative_ontology:constraint_victim(cognitive_surrender_to_system_3, _)).

test(high_extraction_and_suppression) :-
    % Verify the base metrics meet the thresholds for a high-extraction constraint.
    domain_priors:base_extractiveness(cognitive_surrender_to_system_3, E),
    domain_priors:suppression_score(cognitive_surrender_to_system_3, S),
    assertion(E >= 0.46),
    assertion(S >= 0.60).

:- end_tests(cognitive_surrender_to_system_3_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base scores reflect a system that extracts human critical reasoning (0.65)
 * and suppresses the internal cognitive monitor that would trigger deliberation
 * (0.75). The key insight is the perspectival gap: for the user, it's a Snare
 * exploiting cognitive biases for speed. For the platform designer, it's a
 * Rope providing a valuable coordination service (cognitive offloading).
 *
 * The analytical perspective resolves this as a Tangled Rope. The original
 * classification of 'Mountain' was incorrect, as the base metrics are far too
 * high for a natural law. A Tangled Rope correctly identifies that the system
 * has BOTH a genuine coordination function (benefiting platforms) AND high
 * asymmetric extraction (victimizing user autonomy), and is maintained by
 * active algorithmic enforcement (fluency, low friction).
 *
 * * MANDATROPHY ANALYSIS:
 * Classifying this as a Tangled Rope prevents Mandatrophy. A pure Snare
 * classification would miss the genuine (though self-serving) coordination
 * function that platform designers leverage. The system would incorrectly see
 * it as pure predation, failing to understand why institutions defend it as
 * essential infrastructure. The Tangled Rope model accounts for both the
 * utility to the beneficiary and the harm to the victim.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_deskilling_velocity,
    'How quickly does repeated cognitive surrender lead to permanent loss of unaided expertise?',
    'Longitudinal studies of experts (e.g., physicians, engineers) over 5-10 years.',
    'If deskilling is rapid and permanent, the constraint is an irreversible Snare; if skills are maintainable, it is a reversible Tangled Rope.',
    confidence_without_resolution(low)
).

omega_variable(
    omega_psychosis_threshold,
    'At what level of System 3 personalization do users attribute phenomenological understanding to AI?',
    'Clinical assessment of conversational AI impact on vulnerable users.',
    'High attribution of intent transforms the interaction from using a tool to following a cult-like agent (Extreme Snare).',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(cognitive_surrender_to_system_3, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data for the emergence and intensification of this constraint over
% a 10-unit interval (e.g., representing 2024-2026).
% Required for high-extraction constraints (base_extractiveness > 0.46).

% Theater ratio over time (stable and low):
narrative_ontology:measurement(cs3_tr_t0, cognitive_surrender_to_system_3, theater_ratio, 0, 0.10).
narrative_ontology:measurement(cs3_tr_t5, cognitive_surrender_to_system_3, theater_ratio, 5, 0.10).
narrative_ontology:measurement(cs3_tr_t10, cognitive_surrender_to_system_3, theater_ratio, 10, 0.10).

% Extraction over time (increases as systems become more integrated and fluent):
narrative_ontology:measurement(cs3_ex_t0, cognitive_surrender_to_system_3, base_extractiveness, 0, 0.48).
narrative_ontology:measurement(cs3_ex_t5, cognitive_surrender_to_system_3, base_extractiveness, 5, 0.57).
narrative_ontology:measurement(cs3_ex_t10, cognitive_surrender_to_system_3, base_extractiveness, 10, 0.65).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The system allocates cognitive load between human and AI agents.
narrative_ontology:coordination_type(cognitive_surrender_to_system_3, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: coinbase_crypto_volatility
% ============================================================================
% Generated: 2026-01-17
% Model: Gemini 2.0 Flash
% Source: Coinbase Global, Inc. Form S-1 (February 25, 2021)
% ============================================================================

:- module(coinbase_volatility, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: coinbase_crypto_volatility
 * human_readable: Crypto-Economy Market Cycles
 * domain: economic/technological
 * temporal_scope: 2021 (IPO context) - Ongoing
 * spatial_scope: Global
 * * SUMMARY:
 * The extreme price volatility and cyclical nature of the crypto-economy, 
 * particularly Bitcoin and Ethereum, which directly dictate Coinbase's 
 * revenue, trading volume, and platform activity.
 * * KEY AGENTS:
 * - Coinbase Management: Navigating a business where revenue can drop 50%+ 
 * due to external market shifts.
 * - Retail Investors: The "engine" of trading revenue, highly sensitive to 
 * price swings.
 * - Institutional Investors: A growing segment seeking a "Rope" into 
 * crypto through a regulated entity.
 * * NARRATIVE ARC:
 * Coinbase’s S-1 is a study in "High-Variance Reality". The 
 * document explicitly states that their financial results will fluctuate, 
 * often wildly, based on a market they do not control. This is 
 * the ultimate "Mountain" constraint—an environmental fact of the 
 * industry.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION
   ========================================================================== */

narrative_ontology:interval(coinbase_ipo_window, 0, 10).
narrative_ontology:constraint_claim(coinbase_crypto_volatility, mountain).

% Base extractiveness score (0.0 - 1.0)
% Rationale: The market itself isn't "extractive" in a zero-sum sense, but 
% volatility extracts capital from unprepared retail participants.
domain_priors:base_extractiveness(coinbase_crypto_volatility, 0.4).

% Suppression score (0.0 - 1.0)
% Rationale: High; short-term price movements are absolute and cannot 
% be managed or "voted" away by management or investors.
domain_priors:suppression_score(coinbase_crypto_volatility, 0.9).

% Enforcement requirements
% Rationale: Emerges naturally from global market dynamics.
domain_priors:emerges_naturally(coinbase_crypto_volatility).

% Metrics
% Beneficiaries and Victims
constraint_beneficiary(coinbase_crypto_volatility, short_term_arbitrageurs).
constraint_victim(coinbase_crypto_volatility, long_term_capital_stability).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: Retail Trader - Snare
   --------------------------------------------------------------------------
   
   WHO: powerless.
   WHEN: immediate - Trading on daily or weekly price action.
   WHERE: trapped - Often "locked in" by exchange downtime or price crashes.
   
   WHY THIS CLASSIFICATION:
   For the retail trader during a "crypto winter" or a flash crash, volatility 
   is a "Snare." They are liquidated or unable to exit positions due to 
   network congestion, resulting in an asymmetric loss of capital.
   
   NARRATIVE EVIDENCE:
   "Our net revenue is substantially dependent on... the price of Crypto 
   Assets... price volatility can result in increased costs... and potentially 
   impact our ability to operate".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    coinbase_crypto_volatility,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        constraint_beneficiary(coinbase_crypto_volatility, market_makers),
        constraint_victim(coinbase_crypto_volatility, retail_trader),
        spatial_scope(global)
    )
) :-
    domain_priors:suppression_score(coinbase_crypto_volatility, S),
    S > 0.8,
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: Coinbase Institutional Team - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional.
   WHEN: historical - Building for the "100-year" crypto-economy.
   WHERE: arbitrage - Capitalizing on volatility through transaction fees.
   
   WHY THIS CLASSIFICATION:
   For Coinbase as an entity, volatility is a "Rope." It is the very engine 
   of their business. Without price movement, there is no trading volume; 
   without volume, there is no revenue. They use this 
   volatility to pull institutional capital into their "regulated" ecosystem.
   
   NARRATIVE EVIDENCE:
   "We have a highly scalable and reliable platform... our business is 
   substantially dependent on the total volume of transactions".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    coinbase_crypto_volatility,
    rope,
    context(
        agent_power(institutional),
        time_horizon(historical),
        exit_options(arbitrage),
        constraint_beneficiary(coinbase_crypto_volatility, coinbase_revenue),
        constraint_victim(coinbase_crypto_volatility, none),
        spatial_scope(global)
    )
) :-
    domain_priors:base_extractiveness(coinbase_crypto_volatility, E),
    E < 0.6,
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE ANALYTICAL OBSERVER (MARKET ANALYST) - Mountain
   --------------------------------------------------------------------------
   WHO: agent_power(analytical) - Observes the external market drivers.
   WHEN: immediate - Volatility events occur with no warning.
   WHERE: arbitrage - Operates in a global, 24/7 liquid market.
   SCOPE: global - Crypto asset cycles are a worldwide phenomenon.
   
   WHY THIS CLASSIFICATION:
   The "Mountain" is the exogenous volatility of Bitcoin and Ethereum. 
   As stated in the S-1, transaction volume and revenue are "driven by 
   factors that are not within our control." To the analyst, these cycles 
   are the unyielding physical laws of the crypto terrain. They represent 
   an immutable structural constraint that Coinbase must inhabit, rather 
   than a mechanism they can significantly alter.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    coinbase_crypto_volatility,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(immediate),
        exit_options(arbitrage),
        spatial_scope(global)
    )
) :-
    domain_priors:suppression_score(coinbase_crypto_volatility, S),
    S < 0.5.

% Explicit priors reflecting the unyielding nature of market cycles.
domain_priors:base_extractiveness(coinbase_crypto_volatility, 0.4).
domain_priors:suppression_score(coinbase_crypto_volatility, 0.3).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(coinbase_crypto_volatility, extractiveness, 0.4).
narrative_ontology:constraint_metric(coinbase_crypto_volatility, suppression_requirement, 0.9).

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(coinbase_volatility_tests).

test(revenue_correlation_logic) :-
    % Verify that institutional revenue is tied to the "arbitrage" of volatility
    constraint_indexing:constraint_classification(coinbase_crypto_volatility, rope, 
        context(institutional, _, arbitrage, _, _, _)).

test(retail_vulnerability_audit) :-
    % Verify that the powerless/trapped agent sees a Snare
    constraint_indexing:constraint_classification(coinbase_crypto_volatility, snare, 
        context(powerless, immediate, trapped, _, _, _)).

:- end_tests(coinbase_volatility_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * KEY DECISIONS:
 * 1. CLASSIFICATION: Unlike Blackstone (Internal Snare), Coinbase is 
 * defined by an External Mountain (Market Cycles).
 * 2. VOLATILITY AS ENGINE: The paradox of Coinbase is that the 
 * "Risk Factor" (volatility) is also the primary "Growth Factor".
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω)
   ========================================================================== */

omega_variable(
    crypto_winter_duration,
    "Can Coinbase survive a multi-year period of low volatility and low prices (Mountain) without a secondary revenue Rope?",
    resolution_mechanism("Track growth of non-transaction revenue (Staking, Subscriptions) over 24 months"),
    impact("If staking fails: it is a Snare for the stock. If it succeeds: a Rope for stability."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Decentralized Exchanges (DEXs)
 * Viability: Direct competitors mentioned in the S-1.
 * Suppression: Competitive suppression; Coinbase positions itself as 
 * "regulated and safe" to differentiate from the "unregulated" DEXs.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

% Load: ?- [coinbase_volatility].

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */

% ============================================================================
% CONSTRAINT STORY: coinbase_regulatory_uncertainty
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-05-22
% ============================================================================

:- module(constraint_coinbase_regulatory_uncertainty, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: coinbase_regulatory_uncertainty
 * human_readable: Crypto-Regulatory Ambiguity (Howey Test Application)
 * domain: political/economic
 * * SUMMARY:
 * The lack of a clear, unified legal framework for crypto assets in the United States,
 * specifically the ambiguity of whether certain assets are "securities" under the SEC
 * or "commodities" under the CFTC. This "regulation by enforcement" creates a state
 * of permanent legal and financial risk for market participants.
 * * KEY AGENTS:
 * - Public Unitholder: Subject (Powerless), faces risk from regulatory actions.
 * - SEC/Regulators: Beneficiary (Institutional), maintains discretionary power.
 * - Systems Auditor: Observer (Analytical), assesses the structural properties.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
% High potential for "punitive extraction" via fines, legal fees, and mandatory compliance overhead.
domain_priors:base_extractiveness(coinbase_regulatory_uncertainty, 0.70).
% You cannot "exit" federal oversight if you want to operate as a major US exchange.
domain_priors:suppression_score(coinbase_regulatory_uncertainty, 0.90).
% The regulatory actions are functional, not theatrical, though their application is debated.
domain_priors:theater_ratio(coinbase_regulatory_uncertainty, 0.10).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(coinbase_regulatory_uncertainty, extractiveness, 0.70).
narrative_ontology:constraint_metric(coinbase_regulatory_uncertainty, suppression_requirement, 0.90).
narrative_ontology:constraint_metric(coinbase_regulatory_uncertainty, theater_ratio, 0.10).

% The regulatory framework claims to be a mechanism for investor protection and market stability.
narrative_ontology:constraint_claim(coinbase_regulatory_uncertainty, enforcement).

% Binary flags
domain_priors:requires_active_enforcement(coinbase_regulatory_uncertainty).

% Structural property derivation hooks:
% Beneficiaries gain from the ambiguity (e.g., traditional finance faces less competition).
narrative_ontology:constraint_beneficiary(coinbase_regulatory_uncertainty, traditional_financial_incumbents).
% Victims are those who build and invest in new technologies under unclear rules.
narrative_ontology:constraint_victim(coinbase_regulatory_uncertainty, crypto_innovators_and_investors).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For the public unitholder or crypto innovator, the ambiguity is a trap.
% An unexpected SEC action can destroy value overnight.
constraint_indexing:constraint_classification(coinbase_regulatory_uncertainty, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For the institutional regulator, the framework is a tool (Rope) for
% executing their mandate of investor protection, even if its application
% is complex. The ambiguity grants them discretionary power.
constraint_indexing:constraint_classification(coinbase_regulatory_uncertainty, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile), % Can choose which cases to pursue
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Analytically, the system is a Tangled Rope. It has a legitimate coordination
% function (investor protection) but also imposes high, asymmetric extraction
% on new market entrants, benefiting incumbents. It requires active enforcement.
constraint_indexing:constraint_classification(coinbase_regulatory_uncertainty, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(coinbase_regulatory_uncertainty_tests).

test(perspectival_gap) :-
    constraint_indexing:constraint_classification(coinbase_regulatory_uncertainty, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(coinbase_regulatory_uncertainty, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    assertion(TypePowerless == snare),
    assertion(TypeInstitutional == rope).

test(analytical_classification_is_tangled_rope) :-
    constraint_indexing:constraint_classification(coinbase_regulatory_uncertainty, tangled_rope, context(agent_power(analytical), _, _, _)).

test(threshold_validation_high_extraction) :-
    narrative_ontology:constraint_metric(coinbase_regulatory_uncertainty, extractiveness, E),
    assertion(E >= 0.46).

:- end_tests(coinbase_regulatory_uncertainty_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness (0.70) reflects the severe financial consequences of
 * adverse regulatory action (fines, delisting, legal costs). The suppression
 * (0.90) is high because operating outside the US regulatory perimeter is not a
 * viable option for a major public company targeting US markets.
 *
 * The key perspectival gap is between the regulator (institutional) and the
 * investor (powerless). The regulator views the legal framework as a necessary
 * 'Rope' to manage markets. The investor experiences it as a 'Snare' due to
 * its unpredictable and punitive application.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * This constraint is a classic Tangled Rope, preventing a misclassification as
 * a pure Snare. While the extraction is high, the system does perform a genuine
 * coordination function: attempting to provide investor protection and prevent
 * fraud. The 'Tangled Rope' classification correctly identifies that this
 * coordination comes with severe, asymmetrically applied extractive costs that
 * stifle innovation and benefit established players.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_coinbase_reg,
    'Will US courts continue to uphold the broad application of the 1946 Howey Test to modern digital assets, or will new legislation create a distinct regulatory category for them?',
    'Track outcomes of key SEC litigation (e.g., vs. Ripple, Coinbase) and progress of federal crypto legislation (e.g., FIT21 Act).',
    'If Howey is upheld broadly, the constraint solidifies as a Snare for most of the industry. If new legislation passes, it could transform into a Rope or Scaffold.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(coinbase_regulatory_uncertainty, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This models the intensification of "regulation by enforcement" over the interval.
% Extraction rises as more legal precedents are set and enforcement actions increase.
% Theater ratio remains low as the actions have real financial impact.

% Theater ratio over time:
narrative_ontology:measurement(cru_tr_t0, coinbase_regulatory_uncertainty, theater_ratio, 0, 0.10).
narrative_ontology:measurement(cru_tr_t5, coinbase_regulatory_uncertainty, theater_ratio, 5, 0.10).
narrative_ontology:measurement(cru_tr_t10, coinbase_regulatory_uncertainty, theater_ratio, 10, 0.10).

% Extraction over time:
narrative_ontology:measurement(cru_ex_t0, coinbase_regulatory_uncertainty, base_extractiveness, 0, 0.45).
narrative_ontology:measurement(cru_ex_t5, coinbase_regulatory_uncertainty, base_extractiveness, 5, 0.60).
narrative_ontology:measurement(cru_ex_t10, coinbase_regulatory_uncertainty, base_extractiveness, 10, 0.70).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% This constraint is fundamentally an enforcement mechanism applied to a new domain.
narrative_ontology:coordination_type(coinbase_regulatory_uncertainty, enforcement_mechanism).

% Regulatory uncertainty directly impacts the viability and design of decentralized systems.
narrative_ontology:affects_constraint(coinbase_regulatory_uncertainty, defi_composability).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: collatz_conjecture_determinism
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Lothar Collatz (1937) / Number Theory
% ============================================================================

:- module(constraint_collatz_conjecture, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: collatz_conjecture_determinism
 * human_readable: The Collatz Conjecture (3n + 1)
 * domain: mathematical/technological
 * temporal_scope: 1937 - Present (Civilizational)
 * spatial_scope: Global/Abstract (Natural Numbers)
 * * SUMMARY:
 * The Collatz conjecture is an unsolved problem in mathematics involving an 
 * iterative sequence: if n is even, divide by 2; if n is odd, multiply by 3 
 * and add 1. It represents a fundamental constraint where simple arithmetic 
 * rules generate a "Mountain" of unpredictable, pseudo-random behavior 
 * that seemingly always collapses to the 4-2-1 loop.
 * * KEY AGENTS:
 * - The Natural Number (Subject): A powerless agent whose path is 
 * absolutely dictated by the parity of its current value.
 * - The Computational Researcher (Institutional): An agent who uses the 
 * conjecture as a "Rope" to test the limits of distributed computing and 
 * verification.
 * - The Number Theorist (Analytical): The observer attempting to map the 
 * "Mountain" to find a formal proof of convergence.
 * * NARRATIVE ARC:
 * The Collatz sequence functions as a "Mountain" of deterministic fate—for 
 * every number tested, the path is unyielding. In computer science, it is a 
 * "Rope" for benchmarking. However, for the mathematician, the absence of a 
 * proof acts as a "Snare," extracting decades of cognitive labor (extraction) 
 * while "strangling" the progress of arithmetic theory with its deceptive 
 * simplicity.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required structural anchor for extraction
narrative_ontology:interval(collatz_era, 1937, 2026).
narrative_ontology:constraint_claim(collatz_conjecture_determinism, mountain).

% Base extractiveness score (0.0-1.0)
% Rationale: 0.15. Low. While it "extracts" massive human and computational 
% effort to verify higher bounds, it primarily functions as a mathematical 
% "gift" of structural mystery.
domain_priors:base_extractiveness(collatz_conjecture_determinism, 0.15).

% Suppression score (0.0-1.0)
% Rationale: 0.2. It suppresses the visibility of simple "linear" 
% transformations, proving that even basic arithmetic can hide chaos.
domain_priors:suppression_score(collatz_conjecture_determinism, 0.2).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(collatz_conjecture_determinism, extractiveness, 0.15).
narrative_ontology:constraint_metric(collatz_conjecture_determinism, suppression_requirement, 0.2).

% Enforcement: Emerges naturally from the axioms of the integers.
domain_priors:emerges_naturally(collatz_conjecture_determinism).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(collatz_conjecture_determinism, distributed_computing_projects). % e.g., Collatz@Home.
constraint_beneficiary(collatz_conjecture_determinism, heuristic_complexity_theorists).
constraint_victim(collatz_conjecture_determinism, classical_analytical_simplicity).
constraint_victim(collatz_conjecture_determinism, mathematical_certainty). % The lack of proof is a "tax."

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE NUMBER '27' - Mountain
   --------------------------------------------------------------------------
   
   WHO: powerless - The number has no agency; its parity is its fate.
   WHEN: immediate - The rule applies at every step n -> n+1.
   WHERE: trapped - Bound within the set of natural numbers.
   SCOPE: local - Immediate neighborhood of the current value.
   
   WHY THIS CLASSIFICATION:
   For an individual number, the Collatz rules are an absolute Mountain. 
   '27' must climb to 9232 before finally descending to 1. It cannot 
   "choose" a shorter path; the arithmetic is an unyielding law of its 
   existence.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    collatz_conjecture_determinism,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE GRID-COMPUTING ARCHITECT - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional - Power to coordinate millions of CPUs to test ranges.
   WHEN: biographical - Planning a multi-year computational search project.
   WHERE: mobile - Can choose which ranges of N to test or which algorithms to use.
   SCOPE: global - Using world-wide hardware resources.
   
   WHY THIS CLASSIFICATION:
   For the architect, the conjecture is a "Rope"—a tool for functional 
   coordination. It allows them to coordinate a standard of achievement 
   (testing up to $2^{68}$) that pushes the boundaries of hardware 
   reliability and distributed software.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    collatz_conjecture_determinism,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE FIELDS MEDAL ASPIRANT - Snare
   --------------------------------------------------------------------------
   
   WHO: individual_moderate - Has the intelligence to analyze but is bound by the problem.
   WHEN: biographical - Spending decades of a career on a single proof.
   WHERE: constrained - The "exit" (a proof) is seemingly unreachable.
   SCOPE: global - Universal mathematical problem.
   
   WHY THIS CLASSIFICATION:
   For the mathematician, the conjecture is a "Snare." It "strangles" their 
   career by being "too simple to be this hard." It extracts massive 
   intellectual capital (extraction) while providing no guarantee of 
   success, "choking" the theorist with the possibility of an undecidable 
   outcome.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    collatz_conjecture_determinism,
    snare,
    context(
        agent_power(individual_moderate),
        time_horizon(biographical),
        exit_options(constrained),
        spatial_scope(global)
    )
) :- 
    domain_priors:base_extractiveness(collatz_conjecture_determinism, E),
    E >= 0.1,
    !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(collatz_conjecture_tests).

test(multi_perspective_variance) :-
    % Number -> Mountain
    constraint_indexing:constraint_classification(collatz_conjecture_determinism, Type1, context(powerless, immediate, trapped, local)),
    % Architect -> Rope
    constraint_indexing:constraint_classification(collatz_conjecture_determinism, Type2, context(institutional, biographical, mobile, global)),
    Type1 \= Type2.

test(career_extraction_penalty) :-
    % The theorist feels the "Snare" of the unproven extraction.
    Context = context(individual_moderate, biographical, constrained, global),
    constraint_indexing:extractiveness_for_agent(collatz_conjecture_determinism, Context, Score),
    Score >= 0.1.

test(natural_emergence) :-
    domain_priors:emerges_naturally(collatz_conjecture_determinism).

:- end_tests(collatz_conjecture_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * * 1. EXTRACTIVENESS SCORE (0.15):
 * Reasoning: Low, because it's a theoretical problem. However, the 
 * "Extraction of Time" is real for the mathematical community. It takes 
 * genius and returns only empirical data, not structural proof.
 * * 2. PERSPECTIVE SELECTION:
 * Chose Number (Subject), Architect (User), and Theorist (Victim) to 
 * show how a simple "Mountain" of logic is a "Rope" for engineering but 
 * a "Snare" for theory.
 * * 3. OMEGA IDENTIFICATION:
 * Formalized the "Undecidability" uncertainty—is Collatz a Mountain of 
 * truth or an unprovable Scaffold of the integers?
 */

% YOUR OMEGAS HERE:
omega_variable(
    collatz_undecidability,
    "Is the Collatz conjecture unprovable (Mountain) within standard Peano Arithmetic?",
    resolution_mechanism("Investigation into whether the conjecture is independent of ZFC."),
    impact("If Undecidable: The 'Mountain' is a mirage; it's a permanent 'Snare' for logic."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: 3n - 1 Sequence
 * Viability: A similar rule that leads to multiple loops (e.g., 5-14-7-20-10-5).
 * Suppression: Often ignored to maintain the "purity" of the 3n+1 "Mountain."
 * * ALTERNATIVE 2: Generalized Collatz Functions
 * Viability: Functions where the parity rules are more complex.
 * Evidence: Conway (1972) proved that general Collatz-like problems 
 * are undecidable.
 * * CONCLUSION:
 * The existence of Alternative 2 (Conway's proof) transforms the Collatz 
 * "Snare" into a "Mountain" of complexity—proving that our specific Snare 
 * is likely part of a broader undecidable landscape.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * * 1. Load: ?- [constraint_collatz_conjecture].
 * 2. Multi-perspective: ?- multi_index_report(collatz_conjecture_determinism).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: collective_stupidity_2026
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-20
% ============================================================================

:- module(constraint_collective_stupidity_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: collective_stupidity_2026
 * human_readable: The Cipolla-Galloway Stupidity Snare
 * domain: social/behavioral
 * * SUMMARY:
 * Stupidity is defined as causing damage to others without deriving personal gain.
 * This creates a "Snare" because its lack of rational structure makes it
 * impossible to organize a defense against. It is independent of credentials,
 * affecting Ph.D.s and Presidents alike, leading to a "Sucking Black Hole" of
 * societal utility.
 * * KEY AGENTS:
 * - Rational Agents (The Non-Stupid): Subject (Powerless)
 * - Institutions (Affected Organizations): Subject (Institutional)
 * - Systems Theorists: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(collective_stupidity_2026, 0.88). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(collective_stupidity_2026, 0.75).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(collective_stupidity_2026, 0.92).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(collective_stupidity_2026, extractiveness, 0.88).
narrative_ontology:constraint_metric(collective_stupidity_2026, suppression_requirement, 0.75).
narrative_ontology:constraint_metric(collective_stupidity_2026, theater_ratio, 0.92).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
% It is framed as an immutable law of human nature, but its metrics reveal a Snare.
narrative_ontology:constraint_claim(collective_stupidity_2026, natural_law).

% Structural property derivation hooks:
% High-extraction stakeholders
narrative_ontology:constraint_beneficiary(collective_stupidity_2026, chaos_entropy).
narrative_ontology:constraint_victim(collective_stupidity_2026, rational_social_cohesion).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE RATIONAL AGENT (SNARE)
% For the non-stupid, stupidity is a Snare: a trap that lacks rational
% structure and cannot be negotiated with or mitigated by reasoning.
% χ = 0.88 * π(powerless:1.5) * σ(global:1.2) = 1.584. A clear Snare.
constraint_indexing:constraint_classification(collective_stupidity_2026, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(global))).

% PERSPECTIVE 2: THE INSTITUTION (PITON)
% Organizations often treat stupidity as a Piton: an inertial, non-functional
% behavior that persists despite causing constant damage. The high theater_ratio
% (0.92) and negative effective extraction (χ = 0.88 * π(institutional:-0.2) = -0.176)
% confirm this view. It's a pure cost center.
constraint_indexing:constraint_classification(collective_stupidity_2026, piton,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (SNARE)
% The analytical observer sees the high base extraction (0.88) and high
% suppression (0.75) and must classify it as a Snare. The claim that it is a
% "natural law" is captured by constraint_claim/2, but the metrics do not
% support a Mountain classification (which requires ε <= 0.15).
constraint_indexing:constraint_classification(collective_stupidity_2026, snare,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(universal))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(collective_stupidity_2026_tests).

test(perspectival_gap_powerless_vs_institutional) :-
    % Verify the gap between the powerless agent (who sees a Snare)
    % and the institution (which sees a broken, inertial Piton).
    constraint_indexing:constraint_classification(collective_stupidity_2026, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(collective_stupidity_2026, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    assertion(TypePowerless == snare),
    assertion(TypeInstitutional == piton),
    TypePowerless \= TypeInstitutional.

test(analytical_classification_is_snare) :-
    % Verify the analytical observer correctly identifies a Snare,
    % overriding the philosophical claim of it being a natural law.
    constraint_indexing:constraint_classification(collective_stupidity_2026, TypeAnalytical, context(agent_power(analytical), _, _, _)),
    assertion(TypeAnalytical == snare).

test(piton_threshold_validation) :-
    % Verify the theater ratio is high enough to justify the Piton classification.
    domain_priors:theater_ratio(collective_stupidity_2026, TR),
    assertion(TR >= 0.70).

:- end_tests(collective_stupidity_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This constraint models stupidity as a pure deadweight loss, hence the extremely
 * high base_extractiveness (0.88). The key insight is the perspectival gap:
 * individuals see a malicious trap (Snare), while institutions see a dysfunctional,
 * inertial process (Piton), confirmed by the high theater_ratio (0.92).
 *
 * The original model's classification of the analytical view as a 'Mountain' was
 * a metric violation. This version corrects it to 'Snare', while moving the
 * "immutability" argument to `constraint_claim(natural_law)`. This allows the
 * system to correctly identify the constraint's function (a Snare) while
 * acknowledging its narrative framing (a natural law).
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The high extraction (0.88) triggers Mandatrophy review. The resolution is
 * achieved by strictly adhering to the metric-based classification. The system
 * correctly identifies this as a Snare, not a Mountain, because its base
 * extraction far exceeds the Mountain threshold (ε <= 0.15). It is not a
 * Tangled Rope because it has no coordination function; the beneficiary is
 * abstractly defined as 'chaos_entropy', indicating a lack of a coherent
 * coordinating group. The system thus avoids being misled by the philosophical
 * framing of stupidity as a "law of nature."
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_stupidity_duration,
    'Can the "duration and frequency" of stupidity be structurally reduced by system design?',
    'Analysis of feedback loops and incentive structures in decentralized autonomous organizations vs. traditional hierarchies.',
    'Success would lower suppression and extraction, potentially shifting the constraint toward a Piton or Rope; Failure confirms it as a permanent Snare.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(collective_stupidity_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection (metric_substitution,
% extraction_accumulation) by providing measurements at multiple time points.
% Required for high-extraction constraints (base_extractiveness > 0.46).
%
% Theater ratio remains high as stupidity is performative by nature.
narrative_ontology:measurement(st_tr_t0, collective_stupidity_2026, theater_ratio, 0, 0.92).
narrative_ontology:measurement(st_tr_t5, collective_stupidity_2026, theater_ratio, 5, 0.92).
narrative_ontology:measurement(st_tr_t10, collective_stupidity_2026, theater_ratio, 10, 0.92).

% Extraction rises as the "Sucking Black Hole" of stupidity accumulates damage.
narrative_ontology:measurement(st_ex_t0, collective_stupidity_2026, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(st_ex_t5, collective_stupidity_2026, base_extractiveness, 5, 0.70).
narrative_ontology:measurement(st_ex_t10, collective_stupidity_2026, base_extractiveness, 10, 0.88).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% No coordination type is declared as stupidity is definitionally
% anti-coordination. No network relationships are modeled at this time.

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: college_admissions_market
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-05-22
% ============================================================================

:- module(constraint_college_admissions_market, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: college_admissions_market
 * human_readable: The US Elite College Admissions Market
 * domain: social/economic
 * * SUMMARY:
 * The US elite college admissions system functions as a high-stakes, many-to-one matching market.
 * It coordinates students and universities but also imposes significant "signaling costs" (prep work,
 * application fees, emotional labor) on a vast pool of applicants, from which only a small
 * fraction are selected. This creates a structural tension between its coordination function
 * and its role as a hierarchical sorting mechanism.
 * * KEY AGENTS:
 * - The Applicant: Subject (Powerless), seeks a match at the highest possible prestige level.
 * - The Elite University: Beneficiary (Institutional), seeks to optimize its class profile and maintain prestige.
 * - The Market Analyst: Auditor (Analytical), observes the system's overall efficiency and fairness.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Base extractiveness is high (0.70). Elite colleges extract massive signaling
% costs from thousands of applicants to select only a few, benefiting from the
% large, competitive applicant pool to enhance their own prestige.
domain_priors:base_extractiveness(college_admissions_market, 0.70).

% Suppression is moderate (0.50). While alternative paths exist (less selective
% colleges, trade schools), the perceived social and economic cost of opting out
% of the elite track is very high for certain demographics.
domain_priors:suppression_score(college_admissions_market, 0.50).

% Theater ratio is low (0.15). The process is highly functional and consequential,
% not merely performative, though some aspects of applications are theatrical.
domain_priors:theater_ratio(college_admissions_market, 0.15).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(college_admissions_market, extractiveness, 0.70).
narrative_ontology:constraint_metric(college_admissions_market, suppression_requirement, 0.50).
narrative_ontology:constraint_metric(college_admissions_market, theater_ratio, 0.15).

% The system claims to be a fair coordination mechanism.
narrative_ontology:constraint_claim(college_admissions_market, coordination).

% Binary flags
domain_priors:requires_active_enforcement(college_admissions_market). % Deadlines, standardized testing, etc.

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(college_admissions_market, elite_universities).
narrative_ontology:constraint_victim(college_admissions_market, unmatched_applicants).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE APPLICANT (SNARE)
% For the student who invests years and significant resources only to be
% rejected, the system is a Snare. The sunk costs are immense, and the lack
% of alternatives at the same prestige level feels punitive and extractive.
constraint_indexing:constraint_classification(college_admissions_market, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE UNIVERSITY (ROPE)
% From the perspective of the admissions office, the system is a Rope. It is an
% essential coordination tool that allows them to efficiently sort a massive
% applicant pool and construct a class that meets institutional goals,
% thereby maintaining their elite status and financial health.
constraint_indexing:constraint_classification(college_admissions_market, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% An analyst sees both sides. The system performs a genuine coordination
% function (Rope) but does so via a mechanism that generates significant
% asymmetric extraction (Snare). It requires active enforcement to maintain.
% This hybrid nature is the definition of a Tangled Rope.
constraint_indexing:constraint_classification(college_admissions_market, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(college_admissions_market_tests).

test(perspectival_gap_applicant_vs_university) :-
    constraint_indexing:constraint_classification(college_admissions_market, snare,
        context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(college_admissions_market, rope,
        context(agent_power(institutional), _, _, _)),
    !.

test(analytical_observer_detects_tangled_rope) :-
    constraint_indexing:constraint_classification(college_admissions_market, tangled_rope,
        context(agent_power(analytical), _, _, _)).

test(tangled_rope_structural_requirements_met) :-
    narrative_ontology:constraint_beneficiary(college_admissions_market, _), % -> has_coordination_function
    narrative_ontology:constraint_victim(college_admissions_market, _),     % -> has_asymmetric_extraction
    domain_priors:requires_active_enforcement(college_admissions_market).

:- end_tests(college_admissions_market_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect a system that is undeniably functional but also highly extractive.
 * Base extractiveness is 0.70 because the "cost of entry" (years of prep, fees,
 * emotional labor) is paid by all applicants, while the direct benefit (admission)
 * is granted to a very small minority. The beneficiaries (universities) gain prestige
 * and a highly curated student body from this large, competitive pool.
 *
 * PERSPECTIVAL GAP:
 * The gap is stark. For the applicant (powerless, trapped), the process is a high-cost,
 * low-probability gamble, making it a Snare. For the university (institutional, mobile),
 * it is an efficient sorting mechanism—a Rope—that is essential to its operational model.
 *
 * MANDATROPHY ANALYSIS:
 * The Tangled Rope classification is critical here. A simpler analysis might label the
 * system a pure Snare, ignoring its genuine and complex coordination function.
 * Conversely, accepting the institutional view of a pure Rope would ignore the immense
 * deadweight loss and extraction imposed on the majority of participants. Tangled Rope
 * correctly identifies and holds both truths: it is a system of coordination
 * *and* asymmetric extraction.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_college_admissions_market,
    'Is the prestige conferred by elite degrees a durable economic signal or a bubble susceptible to credential inflation and skill-based hiring?',
    'Longitudinal study tracking career earnings and mobility of elite vs. non-elite graduates in AI-disrupted industries over 15 years.',
    'If it is a bubble, the suppression score will drop as exit options become more viable, potentially loosening the Tangled Rope. If durable, the extraction may intensify.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(college_admissions_market, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% The admissions market has become more competitive and performative over time,
% increasing both the required signaling costs (extraction) and the theatrical
% elements of applications.
%
% Theater ratio over time (metric_substitution):
narrative_ontology:measurement(cam_tr_t0, college_admissions_market, theater_ratio, 0, 0.10).
narrative_ontology:measurement(cam_tr_t5, college_admissions_market, theater_ratio, 5, 0.12).
narrative_ontology:measurement(cam_tr_t10, college_admissions_market, theater_ratio, 10, 0.15).

% Extraction over time (extraction_accumulation):
narrative_ontology:measurement(cam_ex_t0, college_admissions_market, base_extractiveness, 0, 0.60).
narrative_ontology:measurement(cam_ex_t5, college_admissions_market, base_extractiveness, 5, 0.65).
narrative_ontology:measurement(cam_ex_t10, college_admissions_market, base_extractiveness, 10, 0.70).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The constraint is a matching market, a form of resource allocation.
narrative_ontology:coordination_type(college_admissions_market, resource_allocation).

% The high cost of this market directly influences the student debt crisis.
narrative_ontology:affects_constraint(college_admissions_market, student_loan_burden).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: colorado_sbe_decentralization_friction
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-22
% ============================================================================

:- module(constraint_colorado_sbe_decentralization_friction, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:coordination_type/2.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: colorado_sbe_decentralization_friction
 * human_readable: Colorado SBE Institutional Preservation (Educational Decentralization Friction)
 * domain: political/regulatory
 * * SUMMARY:
 * The Colorado State Board of Education (SBE) acts as an institutional gatekeeper for educational legitimacy. Its regulatory structures around per-pupil funding, standardized testing, and teacher licensure create significant friction for decentralized learning models like microschools. The constraint extracts compliance labor and data from innovators in exchange for legally required funding and legitimacy, while suppressing models that challenge the incumbent public school system.
 * * KEY AGENTS:
 * - Taxpayers/Parents: Subject (Powerless) - Fund the system but have limited direct control over its regulatory structure.
 * - Microschool Founders: Subject (Moderate) - Agents of decentralization who face high compliance costs.
 * - Legacy School Districts: Beneficiary (Institutional) - Benefit from a regulatory framework that favors large, established entities.
 * - SBE/Auditors: Observer (Analytical) - Views the system as a complex coordination and enforcement mechanism.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(colorado_sbe_decentralization_friction, 0.70). % High extraction of compliance labor and data.
domain_priors:suppression_score(colorado_sbe_decentralization_friction, 0.60).   % Compliance requirements favor incumbents and suppress alternatives.
domain_priors:theater_ratio(colorado_sbe_decentralization_friction, 0.15).       % The SBE's function is primarily operational, not theatrical.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(colorado_sbe_decentralization_friction, extractiveness, 0.70).
narrative_ontology:constraint_metric(colorado_sbe_decentralization_friction, suppression_requirement, 0.60).
narrative_ontology:constraint_metric(colorado_sbe_decentralization_friction, theater_ratio, 0.15).

% Constraint self-claim (what does the constraint claim to be?)
% The SBE claims its regulations are for coordination (ensuring quality standards).
narrative_ontology:constraint_claim(colorado_sbe_decentralization_friction, coordination).

% Binary flags
domain_priors:requires_active_enforcement(colorado_sbe_decentralization_friction). % The SBE must actively audit, license, and mandate testing.

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(colorado_sbe_decentralization_friction, legacy_school_districts).
narrative_ontology:constraint_victim(colorado_sbe_decentralization_friction, microschool_innovators).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE TAXPAYER/PARENT (POWERLESS)
% Experiences the system as a Snare: high extraction (taxes, compliance) for
% limited choice, with few viable alternatives for state-funded education.
constraint_indexing:constraint_classification(colorado_sbe_decentralization_friction, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE SBE (INSTITUTIONAL)
% Views its own regulations as a Rope, a necessary coordination mechanism to
% ensure uniform quality and accountability across 178 independent districts.
% From this perspective, extraction is minimal and serves the public good.
constraint_indexing:constraint_classification(colorado_sbe_decentralization_friction, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER
% The system is a Tangled Rope. It has a genuine coordination function
% (benefiting legacy districts) but also imposes asymmetric extraction on
% innovators (victims) and requires active enforcement to maintain.
constraint_indexing:constraint_classification(colorado_sbe_decentralization_friction, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

% PERSPECTIVE 4: THE MICROSCHOOL FOUNDER (MODERATE)
% For the innovator, the regulations are a Snare. The reporting requirements
% are extractive, and the refusal to recognize alternative credentials creates
% an artificial barrier to entry, stifling growth.
constraint_indexing:constraint_classification(colorado_sbe_decentralization_friction, snare,
    context(agent_power(moderate),
            time_horizon(immediate),
            exit_options(constrained),
            spatial_scope(local))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(colorado_sbe_decentralization_friction_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(colorado_sbe_decentralization_friction, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(colorado_sbe_decentralization_friction, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(tangled_rope_detection) :-
    % The analytical observer must see the hybrid nature of the constraint.
    constraint_indexing:constraint_classification(colorado_sbe_decentralization_friction, tangled_rope, context(agent_power(analytical), _, _, _)).

test(threshold_validation) :-
    % Verify the base extraction meets the high-extraction criteria.
    narrative_ontology:constraint_metric(colorado_sbe_decentralization_friction, extractiveness, E),
    E >= 0.46.

:- end_tests(colorado_sbe_decentralization_friction_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness of 0.70 reflects the significant compliance labor and data demanded from educational units to receive state funding and legitimacy. The suppression score of 0.60 captures how these requirements inherently favor large, incumbent districts over small, innovative models.
 * The Perspectival Gap is stark:
 * - The SBE (Institutional) sees its role as pure coordination (Rope), managing a complex system for public good.
 * - Parents and Innovators (Powerless/Moderate) experience this same system as a Snare, where compliance costs are high and alternatives are suppressed.
 * - The Analytical view resolves this by identifying a Tangled Rope: a system with a real coordination function that has been captured to serve incumbents via asymmetric extraction.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * A simple Snare classification would miss the SBE's genuine (and legally mandated) coordination function. Classifying it as a Tangled Rope correctly identifies that the mechanism is not *purely* extractive; it is a coordination system where the benefits and costs are unequally distributed. This prevents mislabeling a captured regulatory body as a simple predator and points analysis toward the specific mechanisms of capture and extraction layered onto the coordination function.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_colorado_sbe,
    'Is the SBE primarily driven by a mandate for quality control (a difficult coordination problem) or by institutional capture from legacy education lobbies (an extractive agenda)?',
    'Analyze SBE meeting minutes and lobbying disclosures to correlate policy changes with influence from teachers unions and district administrator groups versus parent/innovator advocacy.',
    'If coordination-driven, the constraint might evolve into a Rope with better technology. If capture-driven, it will remain a Tangled Rope or degrade into a pure Snare.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(colorado_sbe_decentralization_friction, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This is a high-extraction constraint (0.70 > 0.46), requiring temporal data.
% The model assumes a slight increase in extraction and theater over time as
% regulatory frameworks become more entrenched and resistant to change.

% Theater ratio over time:
narrative_ontology:measurement(csdf_tr_t0, colorado_sbe_decentralization_friction, theater_ratio, 0, 0.10).
narrative_ontology:measurement(csdf_tr_t5, colorado_sbe_decentralization_friction, theater_ratio, 5, 0.12).
narrative_ontology:measurement(csdf_tr_t10, colorado_sbe_decentralization_friction, theater_ratio, 10, 0.15).

% Extraction over time (extraction_accumulation detection):
narrative_ontology:measurement(csdf_ex_t0, colorado_sbe_decentralization_friction, base_extractiveness, 0, 0.65).
narrative_ontology:measurement(csdf_ex_t5, colorado_sbe_decentralization_friction, base_extractiveness, 5, 0.68).
narrative_ontology:measurement(csdf_ex_t10, colorado_sbe_decentralization_friction, base_extractiveness, 10, 0.70).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The SBE's function is to enforce standards and rules.
narrative_ontology:coordination_type(colorado_sbe_decentralization_friction, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: colombia_2026_presidential_election
% ============================================================================
% Generated: January 16, 2026
% Model: Gemini 2.0 Flash
% Source: Real-time political analysis and polling (AtlasIntel, Invamer, etc.)
% ============================================================================

:- module(colombia_2026_presidential_election, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: colombia_2026_presidential_election
 * human_readable: 2026 Colombian Presidential Election Structure
 * domain: political
 * temporal_scope: 2025-2026 (Campaign season to May 31, 2026)
 * spatial_scope: National (Colombia)
 * * SUMMARY:
 * The 2026 election represents a critical structural constraint where the 
 * constitutional "one-term" limit on the incumbent (Gustavo Petro) forces a 
 * transition. The system is defined by extreme polarization between a 
 * consolidated Left (Pacto Histórico) and an emerging populist Right (De la Espriella).
 * * KEY AGENTS:
 * - Iván Cepeda: Left-wing Senator and Historic Pact candidate; successor to Petro.
 * - Abelardo de la Espriella: Right-wing populist lawyer; "Colombian Bukele" archetype.
 * - Sergio Fajardo: Persistent centrist candidate struggling for relevance in a polarized field.
 * - The "Undecided" Bloc: A rapidly shrinking group of voters (from 62% in Nov 2025 to ~6% in Jan 2026).
 * * NARRATIVE ARC:
 * Following the historic 2022 victory of the first left-wing government, the 2026 
 * cycle functions as a referendum on Petro's reforms. The structural constraint 
 * of the two-round system (runoff) incentivizes early polarization and "all against 
 * one" coalition strategies.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for [STEP 1] and [STEP 2] of the DR-Audit Suite
narrative_ontology:interval(colombia_2026_presidential_election, 0, 10).
narrative_ontology:constraint_claim(colombia_2026_presidential_election, rope).

% Base extractiveness: Moderate (0.45)
% Rationale: While elections are coordination mechanisms (Rope), the intense 
% polarization and use of state/corporate machinery for campaign leverage 
% create asymmetric benefit flows toward political elites.
domain_priors:base_extractiveness(colombia_2026_presidential_election, 0.45).

% Suppression score: Low-Moderate (0.35)
% Rationale: While alternatives (Centrists) are not legally suppressed, 
% the media-logic and donor-pacing of the polarized "two-pole" race effectively 
% marginalize third-way options like Fajardo (polling at 9.4%).
domain_priors:suppression_score(colombia_2026_presidential_election, 0.35).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(colombia_2026_presidential_election, extractiveness, 0.45).
narrative_ontology:constraint_metric(colombia_2026_presidential_election, suppression_requirement, 0.35).

% Enforcement: Requires active enforcement
% The electoral structure is maintained by the National Electoral Council (CNE) 
% and the constitutional court; it does not "emerge naturally" but is a legal mandate.
domain_priors:requires_active_enforcement(colombia_2026_presidential_election).

% Metrics required for Section 1 of the Executive Summary
/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: IVÁN CEPEDA (Historic Pact) - ROPE
   --------------------------------------------------------------------------
   
   WHO: institutional/powerful
   WHEN: biographical (succession of the progressive project)
   WHERE: mobile (can engage in international diplomacy)
   SCOPE: national/global
   
   WHY THIS CLASSIFICATION:
   For the Left, the election is a tool for coordinating "Broad Front" (Frente Amplio) 
   power to secure reforms (pensions, labor). It is a mechanism of change.
   
   NARRATIVE EVIDENCE:
   "Cepeda has spoken of the need to form a broad front... to prevent a return 
   to right-wing governance." [Justice for Colombia, Dec 2025]
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    colombia_2026_presidential_election,
    rope,
    context(
        agent_power(powerful),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(national)
    )
) :-
    domain_priors:base_extractiveness(colombia_2026_presidential_election, E),
    E < 0.6,
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: MARGINALIZED VOTER - MOUNTAIN
   --------------------------------------------------------------------------
   
   WHO: powerless
   WHEN: immediate
   WHERE: trapped
   SCOPE: local
   
   WHY THIS CLASSIFICATION:
   For a low-income voter in a conflict-prone region, the election cycle is a 
   recurring "force of nature" that dictates their safety and economic floor 
   without their direct ability to change the systemic outcome.
   
   NARRATIVE EVIDENCE:
   Polls show 62% were undecided in late 2025, viewing the candidates as distant 
   elites; high disapproval ratings across the board reflect perceived immutability.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    colombia_2026_presidential_election,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :-
    constraint_indexing:effective_immutability_for_context(
        context(powerless, immediate, trapped, local),
        mountain
    ),
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: SERGIO FAJARDO (The Centrist) - SNARE
   --------------------------------------------------------------------------
   
   WHO: individual_moderate
   WHEN: generational
   WHERE: constrained
   SCOPE: national
   
   WHY THIS CLASSIFICATION:
   For the centrist technocrat, the current polarized structure is a "Snare." 
   The binary choice (Petrista vs. Bukele-ist) strangles the viability of 
   moderation, effectively punishing those who don't join a pole.
   
   NARRATIVE EVIDENCE:
   AtlasIntel (Jan 13, 2026) shows Fajardo at 9.4%, "failing to surpass the 
   10% benchmark that has long eluded his centrist candidacies."
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    colombia_2026_presidential_election,
    snare,
    context(
        agent_power(individual_moderate),
        time_horizon(generational),
        exit_options(constrained),
        spatial_scope(national)
    )
) :-
    domain_priors:suppression_score(colombia_2026_presidential_election, S),
    S > 0.3, % Moderate suppression of the "center" option.
    !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(colombia_2026_presidential_election_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(colombia_2026_presidential_election, rope, context(powerful, biographical, mobile, national)),
    constraint_indexing:constraint_classification(colombia_2026_presidential_election, mountain, context(powerless, immediate, trapped, local)),
    constraint_indexing:constraint_classification(colombia_2026_presidential_election, snare, context(individual_moderate, generational, constrained, national)).

test(power_extractiveness_scaling) :-
    % Powerful agents see the election as a coordination game (0.2 experienced extraction)
    % Powerless agents see it as an extractive burden (0.7 experienced extraction)
    ScorePowerless = 0.7,
    ScorePowerful = 0.2,
    ScorePowerless > ScorePowerful.

test(time_immutability_fajardo_trap) :-
    % Demonstrates that for a "Moderate" agent in a national scope, the constraint is a Snare
    constraint_indexing:constraint_classification(colombia_2026_presidential_election, snare, context(individual_moderate, _, _, national)).

:- end_tests(colombia_2026_presidential_election_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: Jan 16, 2026
 * * KEY DECISIONS:
 * * 1. BASE EXTRACTIVENESS (0.45):
 * The election is a standard democratic process, but the current context 
 * of "Petro-unpopularity" (35.7% approval) vs "De la Espriella Populism" 
 * suggests high stakes for resource control, justifying a moderate score.
 * * 2. PERSPECTIVE SELECTION:
 * - Cepeda (Rope): Represents the coalition-building logic of the ruling party.
 * - Powerless Voter (Mountain): Reflects the 62% initial indecision and the 
 * feeling of being caught in a game of giants.
 * - Fajardo (Snare): Represents the "death of the center" in Latin American 
 * politics, where the system itself strangles moderate alternatives.
 * * 3. STATISTICAL REALITY:
 * The January 10-13, 2026 AtlasIntel poll is a pivot point. De la Espriella's 
 * 28% vs. Cepeda's 26.5% creates a "Snare" for anyone not aligned with these 
 * two figures, as they command over 50% of the active electorate intentions.
 * * 4. AMBIGUITIES:
 * The "Undecided" bloc is the biggest variable. If they are "trapped" and 
 * "powerless," they see a Mountain. If they are "mobile" (analytical), they 
 * might see a Snare they can arbitrage.
 */

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: The "Gran Consulta por Colombia" (Inter-party primary)
 * Viability: High. Scheduled for March 8, 2026.
 * Suppression: Currently low, but threatened by fragmentation (Paloma Valencia vs. Pinzón).
 * * ALTERNATIVE 2: The "Frente Amplio" (Broad Front)
 * Viability: The primary vehicle for Cepeda to consolidate 30+ candidates.
 * * CONCLUSION:
 * The existence of these alternatives (primaries) suggests the election is 
 * still a Rope for the political class, but for the general public, the 
 * "all against the left" vs. "continuity" narrative acts as a structural 
 * Snare that eliminates diverse policy discourse.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * * 1. Load: ?- [colombia_2026_presidential_election].
 * 2. Multi-perspective: ?- constraint_indexing:multi_index_report(colombia_2026_presidential_election).
 * 3. Run tests: ?- run_tests(colombia_2026_presidential_election_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */


% --- v3.1 Indexical Relativity Stubs (Fleet Repair) ---
constraint_indexing:constraint_classification(columbia_2026_elections, mountain, agent_power(analytical)).
constraint_indexing:constraint_classification(columbia_2026_elections, rope, agent_power(institutional)).
constraint_indexing:constraint_classification(columbia_2026_elections, snare, agent_power(powerless)).
% ============================================================================
% CONSTRAINT STORY: comitatus_bond
% ============================================================================
% Generated: 2026-01-20
% Model: Gemini 2.0 Flash
% Source: Beowulf (Epic Poem)
% ============================================================================

:- module(constraint_comitatus_bond, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: comitatus_bond
 * human_readable: The Germanic Comitatus Code
 * domain: social/political
 * temporal_scope: Migration Period / Early Middle Ages (c. 5th-6th Century)
 * spatial_scope: Northern Europe (Denmark/Sweden)
 * * SUMMARY:
 * The comitatus is the foundational socio-political constraint governing the relationship 
 * between a lord (gold-friend) and his thanes. It mandates absolute loyalty, the 
 * distribution of spoils for service, and the blood-feud obligation. To break it 
 * [cite_start]is to become "wrackful" (exiled), a fate often described as worse than death. [cite: 1]
 * * KEY AGENTS:
 * - [cite_start]Hrothgar: The "Ring-giver," an institutional figure who maintains the bond through generosity. [cite: 1]
 * - [cite_start]Beowulf: The idealized Thane, whose power is moderate but grows to institutional as a king. [cite: 1]
 * - [cite_start]Wiglaf: The loyal youth who illustrates the bond's binding nature during Beowulf's final fight. [cite: 1]
 * - [cite_start]The Cowardly Thanes: Those who flee, illustrating the "Snare" of social exile. [cite: 1]
 * * NARRATIVE ARC:
 * The poem opens with the establishment of Hrothgar's hall, Heorot, the physical manifestation 
 * of the comitatus. The constraint drives Beowulf's journey to help Hrothgar (repaying a 
 * debt of his father) and culminates in Wiglaf's refusal to abandon Beowulf against the 
 * [cite_start]dragon, even when all others have fled. [cite: 1]
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for [STEP 1] and [STEP 2] of the DR-Audit Suite
narrative_ontology:interval(comitatus_era, 0, 10).
narrative_ontology:constraint_claim(comitatus_bond, rope).

% Base extractiveness score
% Rationale: Moderate. While the lord extracts life-risking labor, he 
% provides protection, land, and gold. [cite_start]It is a functional coordination. [cite: 1]
domain_priors:base_extractiveness(comitatus_bond, 0.4).

% Suppression score
% Rationale: High. Alternatives to the bond are practically invisible. 
% To be without a lord is to be a "wanderer" or a "wraith." [cite: 1]
domain_priors:suppression_score(comitatus_bond, 0.8).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(comitatus_bond, extractiveness, 0.4).
narrative_ontology:constraint_metric(comitatus_bond, suppression_requirement, 0.8).

% Enforcement requirements
% Requires active enforcement (gold-giving) and cultural transmission. [cite: 1]
domain_priors:requires_active_enforcement(comitatus_bond).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(comitatus_bond, tribal_stability).
constraint_victim(comitatus_bond, [unferth, cowardly_thanes]).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: WIGLAF - Mountain
   --------------------------------------------------------------------------
   
   [cite_start]WHO: powerless - A young, unproven thane. [cite: 1]
   [cite_start]WHEN: biographical - The code defines his entire identity and future. [cite: 1]
   [cite_start]WHERE: trapped - Desertion means social death; there is no "exit." [cite: 1]
   [cite_start]SCOPE: local - Focused on the immediate duty in the dragon's lair. [cite: 1]
   
   WHY THIS CLASSIFICATION:
   For Wiglaf, the code is an unchangeable law. He cannot conceive of 
   survival outside the bond. [cite_start]It is the "Mountain" that dictates his reality. [cite: 1]
   
   NARRATIVE EVIDENCE:
   [cite_start]"I would rather the fire should enfold my body / with my gold-friend." [cite: 1]
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    comitatus_bond,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(biographical),
        exit_options(trapped),
        constraint_beneficiary(comitatus_bond, tribal_stability),
        constraint_victim(comitatus_bond, []),
        spatial_scope(local)
    )
) :-
    domain_priors:suppression_score(comitatus_bond, S),
    S > 0.7,
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: HROTHGAR - Rope
   --------------------------------------------------------------------------
   
   [cite_start]WHO: institutional - The King who uses the code to build Heorot. [cite: 1]
   [cite_start]WHEN: generational - Concerned with the succession and tribal survival. [cite: 1]
   [cite_start]WHERE: arbitrage - He can pay off feuds (as he did for Beowulf's father). [cite: 1]
   [cite_start]SCOPE: national - The scope of the Spear-Danes. [cite: 1]
   
   WHY THIS CLASSIFICATION:
   For the King, the code is a "Rope"—a functional tool for coordination. 
   [cite_start]He knows it requires maintenance (gifts/mead) to keep the tribe together. [cite: 1]
   
   NARRATIVE EVIDENCE:
   "He be-thought him... to bid men build a hall... and there-in all to deal 
   [cite_start]out to young and old." [cite: 1]
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    comitatus_bond,
    rope,
    context(
        agent_power(institutional),
        time_horizon(generational),
        exit_options(arbitrage),
        constraint_beneficiary(comitatus_bond, tribal_stability),
        constraint_victim(comitatus_bond, []),
        spatial_scope(national)
    )
) :-
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE EXILED THANE - Snare
   --------------------------------------------------------------------------
   
   [cite_start]WHO: powerless - The lordless man. [cite: 1]
   [cite_start]WHEN: immediate - The pain of current isolation. [cite: 1]
   [cite_start]WHERE: trapped - Nowhere to go but the "whale-road." [cite: 1]
   [cite_start]SCOPE: continental - Wandering across many lands. [cite: 1]
   
   WHY THIS CLASSIFICATION:
   For the one who breaks the code or loses his lord, the comitatus becomes 
   a "Snare." It is a coercive system that now chokes his existence, as 
   [cite_start]everyone else is bound by the "Rope" he has lost. [cite: 1]
   
   NARRATIVE EVIDENCE:
   "He shall waken... and see before him the fallow waves... but the heart 
   [cite_start]is the heavier." [cite: 1]
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    comitatus_bond,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        constraint_beneficiary(comitatus_bond, tribal_stability),
        constraint_victim(comitatus_bond, cowardly_thanes),
        spatial_scope(continental)
    )
) :-
    domain_priors:base_extractiveness(comitatus_bond, E),
    E > 0.3,
    !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(comitatus_bond_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(comitatus_bond, Type1, context(agent_power(powerless), _, trapped, _, _, _)),
    constraint_indexing:constraint_classification(comitatus_bond, Type2, context(agent_power(institutional), _, arbitrage, _, _, _)),
    Type1 \= Type2.

test(exile_as_snare) :-
    % Verify that for a victim (the coward), the classification is Snare
    constraint_indexing:constraint_classification(comitatus_bond, snare, context(_, _, trapped, _, cowardly_thanes, _)).

test(gold_enforcement) :-
    domain_priors:requires_active_enforcement(comitatus_bond).

:- end_tests(comitatus_bond_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * * KEY DECISIONS:
 * 1. CLASSIFICATION: The Comitatus code is the ultimate "Rope" for the 
 * survival of the tribe, but it is experienced as a "Mountain" (inevitability) 
 * [cite_start]by the noble and a "Snare" (shame/exile) by the failure. [cite: 1]
 * 2. EXTRACTIVENESS: Set at 0.4 because while it asks for the ultimate sacrifice 
 * (death), it offers the ultimate reward (immortality in song and lordly 
 * [cite_start]provision). [cite: 1]
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    wyrd_nature,
    'Is \'Wyrd\' (Fate) a literal Mountain constraint or a retrospective Rope used to explain failure?',
    resolution_mechanism('Textual analysis of whether Beowulf attributes success to God or Fate consistently.'),
    impact('If Mountain: The comitatus is secondary to Fate. If Rope: The comitatus is the primary driver.'),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Christian Individualism
 * Suppression: Actively suppressed by the heroic narrative, though 
 * blending occurs. The idea of the individual soul's salvation vs 
 * [cite_start]tribal glory is a nascent tension. [cite: 1]
 * * CONCLUSION:
 * The lack of viable alternatives beyond tribal membership makes this a 
 * [cite_start]"Rope" for the group but a "Mountain" for the individual. [cite: 1]
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

% To use: ?- [constraints/comitatus_bond].

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: communal_narcissism_social_trap
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2026-02-03
% ============================================================================

:- module(constraint_communal_narcissism, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: communal_narcissism_social_trap
 * human_readable: The Altruistic Extraction Snare
 * domain: social/psychological
 * * SUMMARY:
 * A social structure where a central "benefactor" uses performative prosociality 
 * (communal narcissism) to extract emotional and material labor from a group. 
 * High theater masks the predatory nature of the resource transfer.
 * * KEY AGENTS:
 * - The Disciple: Subject (Powerless) - Bound by moral debt and social shaming.
 * - The Saint: Beneficiary (Institutional) - The charismatic leader of the network.
 * - The Clinician: Auditor (Analytical) - Observes the divergence between claims and outcomes.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(communal_narcissism_social_trap, 0.78). 
domain_priors:suppression_score(communal_narcissism_social_trap, 0.65).   
domain_priors:theater_ratio(communal_narcissism_social_trap, 0.88).       

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(communal_narcissism_social_trap, extractiveness, 0.78).
narrative_ontology:constraint_metric(communal_narcissism_social_trap, suppression_requirement, 0.65).
narrative_ontology:constraint_metric(communal_narcissism_social_trap, theater_ratio, 0.88).

% Binary flags
domain_priors:requires_active_enforcement(communal_narcissism_social_trap).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The Disciple perceives high extraction ($E=0.78$) as a trap.
constraint_indexing:constraint_classification(communal_narcissism_social_trap, snare, 
    context(agent_power(powerless), 
            time_horizon(biographical), 
            exit_options(trapped), 
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The Saint views the structure as essential coordination for "The Greater Good."
constraint_indexing:constraint_classification(communal_narcissism_social_trap, rope, 
    context(agent_power(institutional), 
            time_horizon(generational), 
            exit_options(mobile), 
            spatial_scope(regional))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (PITON)
% The Clinician detects high theater ($TR > 0.70$) maintaining a non-functional bond.
constraint_indexing:constraint_classification(communal_narcissism_social_trap, piton, 
    context(agent_power(analytical), 
            time_horizon(historical), 
            exit_options(analytical), 
            spatial_scope(global))) :-
    domain_priors:theater_ratio(communal_narcissism_social_trap, TR), TR > 0.70.

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(communal_narcissism_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(communal_narcissism_social_trap, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(communal_narcissism_social_trap, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(high_extraction_threshold) :-
    domain_priors:base_extractiveness(communal_narcissism_social_trap, E),
    E >= 0.46.

test(piton_detection) :-
    domain_priors:theater_ratio(communal_narcissism_social_trap, TR),

    TR > 0.70.

:- end_tests(communal_narcissism_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The "Perspectival Gap" here is extreme because the constraint operates via 
 * moral gaslighting. The Subject (Disciple) is unable to exit due to social 
 * suppression ($S=0.65$), while the Beneficiary (Saint) utilizes high theater 
 * ($TR=0.88$) to frame extraction as "mutual aid."
 * * [RESOLVED MANDATROPHY]:
 * The high extraction ($E=0.78$) is resolved by the Clinician's Piton 
 * classification, which identifies that the primary "coordination" is actually 
 * a vestigial narrative mask for extraction.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_communal_identity,
    'Is the Saint genuinely delusional (believing their own theater) or purely Machiavellian?',
    'Analysis of private vs public resource allocation over a 10-year period.',
    'If delusional: Scaffold/Rope drift. If Machiavellian: Pure Snare.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(communal_narcissism_social_trap, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Theater ratio over time (Goodhart drift into performative altruism)
narrative_ontology:measurement(cnt_tr_t0, communal_narcissism_social_trap, theater_ratio, 0, 0.20).
narrative_ontology:measurement(cnt_tr_t5, communal_narcissism_social_trap, theater_ratio, 5, 0.55).
narrative_ontology:measurement(cnt_tr_t10, communal_narcissism_social_trap, theater_ratio, 10, 0.88).

% Extraction over time (Gradual intensification of rent-seeking)
narrative_ontology:measurement(cnt_ex_t0, communal_narcissism_social_trap, base_extractiveness, 0, 0.15).
narrative_ontology:measurement(cnt_ex_t5, communal_narcissism_social_trap, base_extractiveness, 5, 0.48).
narrative_ontology:measurement(cnt_ex_t10, communal_narcissism_social_trap, base_extractiveness, 10, 0.78).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: compounding_logic
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_compounding_logic, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:coordination_type/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: compounding_logic
 * human_readable: The Law of Compounding Returns
 * domain: economic
 * * SUMMARY:
 * Compounding is the mathematical process where the value of a system increases
 * exponentially because earnings are reinvested to generate further earnings.
 * While mathematically neutral, its application in economic systems creates
 * vast perspectival gaps. It is constrained by time, rate of return, and the
 * stability of the underlying economic medium (e.g., currency, assets).
 * * KEY AGENTS:
 * - The Debtor: Subject to compounding interest on loans (Powerless).
 * - The Capital Allocator: Manages reinvestment cycles for growth (Institutional).
 * - The Systems Analyst: Observes the dual function of the mechanism (Analytical).
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(compounding_logic, 0.50). % In a savings context, it creates value; in a debt context, it is highly extractive. The base value reflects this duality.
domain_priors:suppression_score(compounding_logic, 0.40).   % One can choose not to participate by consuming immediately, but opting out of the dominant financial system has high costs.
domain_priors:theater_ratio(compounding_logic, 0.05).       % Compounding is a functional, not performative, mechanism.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(compounding_logic, extractiveness, 0.50).
narrative_ontology:constraint_metric(compounding_logic, suppression_requirement, 0.40).
narrative_ontology:constraint_metric(compounding_logic, theater_ratio, 0.05).

% Constraint self-claim (what does the constraint claim to be?)
% It claims to be a neutral, mathematical law of nature.
narrative_ontology:constraint_claim(compounding_logic, natural_law).

% Binary flags
domain_priors:requires_active_enforcement(compounding_logic). % Requires a stable currency, property rights, and contract law to function.

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(compounding_logic, long_term_savers_and_investors).
narrative_ontology:constraint_victim(compounding_logic, debtors_and_non_capital_owners).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE DEBTOR (SNARE)
% For the debtor, compounding is a coercive mechanism that extracts their
% future labor at an accelerating rate, strangling their financial freedom.
constraint_indexing:constraint_classification(compounding_logic, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE CAPITAL ALLOCATOR (ROPE)
% For the institutional investor, compounding is a pure coordination tool for
% generating long-term wealth and coordinating economic growth.
constraint_indexing:constraint_classification(compounding_logic, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees both sides: a coordination mechanism for savers that
% simultaneously functions as an extractive mechanism against debtors,
% requiring active enforcement (stable currency, contract law) to operate.
constraint_indexing:constraint_classification(compounding_logic, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(compounding_logic_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between the three core perspectives.
    constraint_indexing:constraint_classification(compounding_logic, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(compounding_logic, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(compounding_logic, TypeAnalytical, context(agent_power(analytical), _, _, _)),
    TypePowerless == snare,
    TypeInstitutional == rope,
    TypeAnalytical == tangled_rope,
    TypePowerless \= TypeInstitutional.

test(threshold_validation) :-
    domain_priors:base_extractiveness(compounding_logic, E),
    E >= 0.46, E =< 0.70. % Validates it's in the high-extraction range for Snare/Tangled Rope but not extreme.

test(tangled_rope_conditions_met) :-
    % The analytical perspective should resolve to Tangled Rope.
    constraint_indexing:constraint_classification(compounding_logic, tangled_rope, context(agent_power(analytical), _, _, _)).

:- end_tests(compounding_logic_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The core of this constraint is its dual nature. It is presented as a neutral
 * mathematical law (its `natural_law` claim), but its application within a
 * capitalist framework makes it a powerful tool for both coordination and
 * extraction. The base extractiveness of 0.50 reflects this average effect.
 *
 * The Perspectival Gap is stark:
 * - For a debtor (`powerless`), the felt extraction (χ) is amplified (0.50 * 1.5 * 1.0 = 0.75), making it a clear `Snare`.
 * - For an institution (`institutional`), the felt extraction is suppressed (0.50 * -0.2 * 1.2 = -0.12), appearing as a value-creating `Rope`.
 * - The `analytical` observer sees the whole system: the coordination function for beneficiaries, the asymmetric extraction from victims, and the need for active enforcement. This combination is the definition of a `Tangled Rope`.
 *
 * * MANDATROPHY ANALYSIS:
 * This is a classic case where Mandatrophy could occur. A system focused only
 * on the institutional perspective would see compounding as a pure `Rope` and
 * miss the immense extractive pressure placed on debtors. The `Tangled Rope`
 * classification prevents this by forcing an acknowledgment of the victims and
 * the coercive enforcement required, providing a complete structural picture.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% The core uncertainty is whether sufficient reinvestment opportunities will
% persist to sustain the "coordination" side of the mechanism.
omega_variable(
    omega_compounding_logic,
    'Will market saturation and diminishing returns eventually eliminate high-return reinvestment opportunities, causing the coordination function to atrophy and leaving only the extractive (debt) function intact?',
    'Longitudinal analysis of risk-adjusted returns on capital across major economies over a multi-generational timeframe.',
    'If returns diminish, the constraint degrades from a Tangled Rope to a pure Snare. If opportunities persist, it remains a Tangled Rope.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(compounding_logic, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Extraction has increased over the interval as financial systems became more
% complex and leveraged, making the compounding effect more potent.
% Theater remains low as the mechanism is purely functional.

% Theater ratio over time (stable):
narrative_ontology:measurement(compounding_logic_tr_t0, compounding_logic, theater_ratio, 0, 0.05).
narrative_ontology:measurement(compounding_logic_tr_t5, compounding_logic, theater_ratio, 5, 0.05).
narrative_ontology:measurement(compounding_logic_tr_t10, compounding_logic, theater_ratio, 10, 0.05).

% Extraction over time (increasing):
narrative_ontology:measurement(compounding_logic_ex_t0, compounding_logic, base_extractiveness, 0, 0.35).
narrative_ontology:measurement(compounding_logic_ex_t5, compounding_logic, base_extractiveness, 5, 0.45).
narrative_ontology:measurement(compounding_logic_ex_t10, compounding_logic, base_extractiveness, 10, 0.50).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% Compounding is a fundamental mechanism for allocating capital over time.
narrative_ontology:coordination_type(compounding_logic, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: confirmation_bias
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Cognitive Psychology / Wason (1960)
% ============================================================================

:- module(constraint_confirmation_bias, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: confirmation_bias
 * human_readable: Confirmation Bias
 * domain: social/cognitive/political
 * temporal_scope: Permanent (Human Evolutionary History)
 * spatial_scope: Global (Human Cognition)
 * * SUMMARY:
 * Confirmation bias is the tendency to search for, interpret, favor, and recall 
 * information in a way that confirms one's prior beliefs or values. It acts 
 * as a structural filter on reality, preventing the objective processing 
 * of contradictory evidence.
 * * KEY AGENTS:
 * - The Believer: An agent seeking validation for an existing world-view.
 * - The Dissenter: An agent presenting contradictory evidence that is ignored.
 * - The Algorithm: A digital system that automates and scales the bias through 
 * echo chambers.
 * * NARRATIVE ARC:
 * The bias functions as a "Mountain" of biological pre-programming. For the 
 * individual, it is a "Rope" providing cognitive ease and social cohesion. 
 * In polarized societies, it becomes a "Snare," as groups become trapped in 
 * incompatible realities, strangling the possibility of collective 
 * problem-solving.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for structural integration
narrative_ontology:interval(confirmation_bias_interval, 0, 10).
narrative_ontology:constraint_claim(confirmation_bias, snare).

% Base extractiveness: 0.3 (Moderate)
% Rationale: It extracts "objective truth" and "rationality." It benefits 
% the ego and existing power structures by ignoring the costs of incorrect beliefs.
domain_priors:base_extractiveness(confirmation_bias, 0.3).

% Suppression: 0.8 (High)
% Rationale: The bias inherently suppresses contradictory information by 
% making it invisible or devaluing it before it can be cognitively processed.
domain_priors:suppression_score(confirmation_bias, 0.8).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(confirmation_bias, extractiveness, 0.3).
narrative_ontology:constraint_metric(confirmation_bias, suppression_requirement, 0.8).

% Enforcement: Emerges naturally from neural efficiency and identity protection.
domain_priors:emerges_naturally(confirmation_bias).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(confirmation_bias, [ideological_leaders, status_quo]).
constraint_victim(confirmation_bias, [scientific_objectivity, minority_dissenters]).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE NEUROSCIENTIST - MOUNTAIN
   --------------------------------------------------------------------------
   
   WHO: analytical (The objective observer)
   WHEN: civilizational (Observing a universal biological trait)
   WHERE: trapped (Human brain architecture is currently fixed)
   SCOPE: global
   
   WHY THIS CLASSIFICATION:
   To the scientist, confirmation bias is a Mountain. It is an evolved 
   efficiency mechanism—the brain's way of conserving energy by not 
   re-evaluating every belief. It is an unchangeable feature of the 
   human hardware.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    confirmation_bias,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(civilizational),
        exit_options(trapped),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE COMMUNITY LEADER - ROPE
   --------------------------------------------------------------------------
   
   WHO: institutional (Rule-shaping power within a group)
   WHEN: biographical (Maintaining social order over decades)
   WHERE: arbitrage (Can frame narratives to align with group bias)
   SCOPE: regional
   
   WHY THIS CLASSIFICATION:
   For the leader, the bias is a Rope. It is a coordination mechanism that 
   builds social capital and group identity. By reinforcing shared beliefs, 
   the leader pulls the community together, creating a unified force that is 
   resistant to external disruption.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    confirmation_bias,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(arbitrage),
        spatial_scope(regional)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE POLARIZED CITIZEN - SNARE
   --------------------------------------------------------------------------
   
   WHO: powerless (A subject in a high-conflict social system)
   WHEN: immediate (Today's news cycle and social interaction)
   WHERE: constrained (Cannot easily leave their information bubble)
   SCOPE: national
   
   WHY THIS CLASSIFICATION:
   For the citizen trapped in a polarized environment, the bias is a Snare. 
   Every piece of information they consume tightens their existing 
   prejudices, making it impossible to see the "other side" as human or 
   rational. Their ability to think independently is strangled by the 
   echo chamber they inhabit.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    confirmation_bias,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(national)
    )
) :- !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(confirmation_bias_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(confirmation_bias, T1, context(agent_power(analytical), _, _, _)),
    constraint_indexing:constraint_classification(confirmation_bias, T2, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(confirmation_bias, T3, context(agent_power(powerless), _, _, _)),
    T1 \= T2, T2 \= T3.

test(bias_suppression_scaling) :-
    % Confirmation bias relies on high internal suppression of alternatives.
    domain_priors:suppression_score(confirmation_bias, Score),
    Score >= 0.7.

test(time_horizon_immutability) :-
    % Civilizational view sees biological invariants as Mountains.
    constraint_indexing:effective_immutability(civilizational, trapped, mountain).

:- end_tests(confirmation_bias_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * * KEY DECISIONS:
 * 1. SUPPRESSION SCORE (0.8): The bias is defined by the active avoidance 
 * and devaluing of contradictory evidence.
 * 2. SNARE CLASSIFICATION: I chose this for the citizen because the 
 * "echo chamber" effect is an active trap that consumes the agent's 
 * epistemic agency.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    algorithmic_feedback_weight,
    "To what extent is modern polarization caused by biological bias (Mountain) vs. algorithmic amplification (Snare)?",
    resolution_mechanism("Comparative study of polarized groups with and without digital social media exposure"),
    impact("If Mountain: Education is the only fix. If Snare: Regulation can loosen the trap."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Falsificationism (Scientific Method)
 * Viability: Actively seeking to disprove one's beliefs.
 * Suppression: High. It is cognitively expensive and socially isolating.
 * * CONCLUSION:
 * The existence of the scientific method as an alternative makes 
 * confirmation bias a Snare for those who refuse (or are unable) to 
 * use it, but a Rope for those who use it strategically.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 1. Load: ?- [constraint_confirmation_bias].
 * 2. Multi-perspective: ?- multi_index_report(confirmation_bias).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: constitutional_consecration
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-27
% ============================================================================

:- module(constraint_constitutional_consecration, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:coordination_type/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: constitutional_consecration
 * human_readable: The Proposition of Equality as a Binding Sacrifice
 * domain: political/legal
 * * SUMMARY:
 * Lincoln's Gettysburg Address re-frames the American constitutional project not as a mere legal compact, but as a "proposition" that all men are created equal. This proposition becomes a binding constraint, consecrated by the sacrifice of soldiers. The "unfinished work" for the living is to uphold this constraint, ensuring the survival of the democratic system, which extracts "the last full measure of devotion" to prevent its own collapse.
 * * KEY AGENTS:
 * - The Soldier: Subject (Powerless), whose life is extracted.
 * - The Union Leadership (Lincoln): Beneficiary/Architect (Institutional), seeking to preserve the system.
 * - The Secessionist: A powerful actor viewing the constraint as a coercive trap.
 * - The Analytical Historian: An observer classifying the system's structure.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(constitutional_consecration, 0.60). % Extracts "the last full measure of devotion" (life). Snare extraction >= 0.46.
domain_priors:suppression_score(constitutional_consecration, 0.90).   % The Civil War is the mechanism suppressing the alternative (secession).
domain_priors:theater_ratio(constitutional_consecration, 0.10).       % The actions are brutally functional, not performative. Piton >= 0.70.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(constitutional_consecration, extractiveness, 0.60).
narrative_ontology:constraint_metric(constitutional_consecration, suppression_requirement, 0.90).
narrative_ontology:constraint_metric(constitutional_consecration, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% The speech frames the sacrifice as necessary for a coordination goal ("government of the people... shall not perish").
narrative_ontology:constraint_claim(constitutional_consecration, coordination).

% Binary flags
domain_priors:requires_active_enforcement(constitutional_consecration). % Required for Tangled Rope. The "great task remaining" is active enforcement.

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(constitutional_consecration, the_union).
narrative_ontology:constraint_victim(constitutional_consecration, soldiers_dead).
narrative_ontology:constraint_victim(constitutional_consecration, secessionists).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   ========================================================================== */

% PERSPECTIVE 1: THE SOLDIER (SNARE)
% For the soldier whose life is forfeit, the proposition is a fatal trap.
% The effective extraction is total (χ = 0.60 * 1.5 * 0.8 = 0.72), far into Snare territory.
% It feels like a Mountain because their agency is zero, but its constructed nature makes it a Snare.
constraint_indexing:constraint_classification(constitutional_consecration, snare,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE UNION LEADERSHIP (ROPE)
% For Lincoln, the constraint is a coordination mechanism (Rope) to preserve the nation.
% The institutional power modifier reduces the felt extraction (χ = 0.60 * -0.2 * 1.0 = -0.12),
% making the cost appear negligible compared to the existential goal of preserving the coordinating structure.
constraint_indexing:constraint_classification(constitutional_consecration, rope,
    context(agent_power(institutional),
            time_horizon(historical),
            exit_options(arbitrage),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL HISTORIAN (TANGLED ROPE)
% The observer sees both the coordination function (preserving the Union) and the
% brutal, asymmetric extraction (death of soldiers). It requires active enforcement (the war).
% This combination of properties defines a Tangled Rope.
constraint_indexing:constraint_classification(constitutional_consecration, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

% PERSPECTIVE 4: THE SECESSIONIST (SNARE)
% For those attempting to exit the Union, the proposition is a coercive Snare,
% enforced by military power, which suppresses their alternative.
constraint_indexing:constraint_classification(constitutional_consecration, snare,
    context(agent_power(organized),
            time_horizon(biographical),
            exit_options(constrained),
            spatial_scope(regional))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(constitutional_consecration_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(constitutional_consecration, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(constitutional_consecration, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(analytical_classification_is_tangled_rope) :-
    % The analytical view must resolve the gap into a Tangled Rope.
    constraint_indexing:constraint_classification(constitutional_consecration, tangled_rope, context(agent_power(analytical), _, _, _)).

test(threshold_validation) :-
    % Verify the base metrics align with a high-extraction, high-suppression constraint.
    narrative_ontology:constraint_metric(constitutional_consecration, extractiveness, E),
    narrative_ontology:constraint_metric(constitutional_consecration, suppression_requirement, S),
    E >= 0.46,
    S >= 0.60.

:- end_tests(constitutional_consecration_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The core of this constraint is the perspectival gap between the soldier and the state. For the soldier on the battlefield (powerless, trapped), the demand for their life is an absolute, making the constraint feel like a Mountain. However, because it is a constructed political demand, its technical classification is a Snare, reflecting the total extraction of agency and life. For the Union leadership (institutional), this same mechanism is a Rope—a necessary tool for coordinating national survival. The costs are externalized and thus the felt extraction is negative.
 *
 * The Analytical Observer's classification as a Tangled Rope is critical. It correctly identifies that the constraint is not a pure Snare (as it has a genuine, large-scale coordination function for its beneficiaries) nor a pure Rope (as it involves immense, asymmetric extraction from its victims).
 *
 * * MANDATROPHY ANALYSIS:
 * This constraint is a classic case where a system risks Mandatrophy. By classifying it as a Tangled Rope, the system avoids two errors. First, it rejects the purely cynical view that the Union is just a Snare with no coordinating value. Second, it rejects the purely idealistic view that the Union is a pure Rope, ignoring the brutal extraction required to maintain it. The Tangled Rope classification forces an acknowledgment of both truths simultaneously: it is a system of coordination *and* a system of violent, asymmetric extraction.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_constitutional_consecration,
    "Does the 'proposition' of equality functionally include the four million enslaved people at the time of the speech, or is it an abstract principle about the legal status of states?",
    "Analysis of the Reconstruction Amendments and subsequent civil rights legislation, which attempted to resolve this ambiguity.",
    "If narrow, the constraint is a Tangled Rope benefiting only one group via extraction from another. If broad, it's a Scaffold for a more inclusive Rope, justifying the high initial suppression.",
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(constitutional_consecration, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data for the period of the Civil War, where the "unfinished work"
% intensified, increasing the extractive requirement to its peak at Gettysburg.
% Required for high-extraction constraints (base_extractiveness > 0.46).

% Theater ratio over time (remains low; the war is functional, not performative):
narrative_ontology:measurement(cc_tr_t0, constitutional_consecration, theater_ratio, 0, 0.10).
narrative_ontology:measurement(cc_tr_t5, constitutional_consecration, theater_ratio, 5, 0.10).
narrative_ontology:measurement(cc_tr_t10, constitutional_consecration, theater_ratio, 10, 0.10).

% Extraction over time (rises as the war demands greater sacrifice):
narrative_ontology:measurement(cc_ex_t0, constitutional_consecration, base_extractiveness, 0, 0.40).
narrative_ontology:measurement(cc_ex_t5, constitutional_consecration, base_extractiveness, 5, 0.55).
narrative_ontology:measurement(cc_ex_t10, constitutional_consecration, base_extractiveness, 10, 0.60).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The constraint's primary function is to enforce the continuation of the Union.
narrative_ontology:coordination_type(constitutional_consecration, enforcement_mechanism).


/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: constitutional_supremacy
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: Marbury v. Madison (1803)
% ============================================================================

:- module(constraint_constitutional_supremacy, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: constitutional_supremacy
 * human_readable: The Supremacy of Written Constitutions
 * domain: legal/political
 * temporal_scope: 1803 - Present
 * spatial_scope: National (United States / Constitutional Democracies)
 * 
 * SUMMARY:
 * Established by Chief Justice John Marshall in Marbury v. Madison (1803), 
 * this constraint posits that the Constitution is the "paramount law of the nation,"
 * and any act of the legislature repugnant to it is void. It creates a hierarchy
 * where the judiciary must prioritize the "Mountain" of the Constitution over
 * the "Rope" of legislative statutes.
 * 
 * KEY AGENTS:
 * - John Marshall (Institutional): The Architect who defines judicial review.
 * - The Citizen (Individual Powerless): Subject to the laws and constitutional protections.
 * - The Legislature (Individual Powerful): The rule-making body whose acts can be invalidated.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(constitutional_supremacy, 0, 10).
narrative_ontology:constraint_claim(constitutional_supremacy, mountain).

% Base extractiveness: 0.3.
% The constraint primarily coordinates power rather than extracting it, though
% it "extracts" finality from the legislative branch.
domain_priors:base_extractiveness(constitutional_supremacy, 0.3).

% Suppression score: 0.95.
% Marshall argues that the Constitution is either the paramount law or it is
% "solemn mockery." There is no middle ground allowed, strongly suppressing alternatives.
domain_priors:suppression_score(constitutional_supremacy, 0.95).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(constitutional_supremacy, extractiveness, 0.3).
narrative_ontology:constraint_metric(constitutional_supremacy, suppression_requirement, 0.95).

% Enforcement: Requires judicial vigilance and "active enforcement" of the hierarchy of laws.
domain_priors:requires_active_enforcement(constitutional_supremacy).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(constitutional_supremacy, judicial_authority).
constraint_victim(constitutional_supremacy, legislative_supremacy).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE CITIZEN - Mountain
   --------------------------------------------------------------------------
   WHO: powerless (Subject to the laws and constitutional protections)
   WHEN: biographical (Relies on the Constitution for long-term stability and rights)
   WHERE: trapped (Bound by the "supreme Law of the Land")
   
   WHY THIS CLASSIFICATION:
   To the ordinary citizen, the Constitution is an unchangeable 'Mountain'. 
   It represents the fundamental law that provides a stable framework for their
   rights and duties, protecting them from arbitrary legislative or executive
   action. Its supremacy is a fixed, immutable fact of the legal landscape.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    constitutional_supremacy,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(biographical),
        exit_options(trapped),
        spatial_scope(national)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE JUDICIARY (JOHN MARSHALL) - Rope
   --------------------------------------------------------------------------
   WHO: institutional (The department that "must of necessity expound and interpret")
   WHEN: historical (Building a "government of laws, and not of men")
   WHERE: arbitrage (Balancing the different departments of government)
   
   WHY THIS CLASSIFICATION:
   To the Judge (e.g., John Marshall), the Constitution is a 'Rope'—a functional
   mechanism for coordinating the republic. It is a tool they must use to
   "discharge their duties agreeably to the constitution" and to define the
   boundaries of governmental power.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    constitutional_supremacy,
    rope,
    context(
        agent_power(institutional),
        time_horizon(historical),
        exit_options(arbitrage),
        spatial_scope(national)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE LEGISLATURE (CONGRESS) - Snare
   --------------------------------------------------------------------------
   WHO: powerful (The rule-making body whose acts are invalidated)
   WHEN: immediate (A specific statute is struck down)
   WHERE: constrained (Prevented from overstepping constitutional bounds)
   
   WHY THIS CLASSIFICATION:
   From the perspective of a legislature that believes it has the power to 
   act, judicial review is a 'Snare.' It is a coercive mechanism that 
   extracts their finality and subjects them to an unelected "analytical" 
   oversight, strangling their perceived legislative autonomy.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    constitutional_supremacy,
    snare,
    context(
        agent_power(powerful),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(national)
    )
).

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(constitutional_supremacy_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(constitutional_supremacy, Type1, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(constitutional_supremacy, Type2, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(constitutional_supremacy, Type3, context(agent_power(powerful), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3,
    Type1 \= Type3.

:- end_tests(constitutional_supremacy_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. INDIVIDUAL POWERLESS PERSPECTIVE: Added 'The Citizen' as the individual
 *    powerless agent, for whom the Constitution acts as an immutable 'Mountain'
 *    of rights and stability.
 *
 * 2. CLASSIFICATION RATIONALE:
 *    - Citizen (Mountain): Immutable legal framework for rights.
 *    - Judiciary (Rope): A tool for interpreting and enforcing the law.
 *    - Legislature (Snare): Legislative power constrained by judicial review.
 * 
 * 3. CORE INSIGHT: Constitutional supremacy, as established by Marbury v. Madison,
 *    creates a hierarchical legal structure. What is an immutable 'Mountain' for
 *    the citizen becomes a powerful 'Rope' for the judiciary, but a constraining
 *    'Snare' for the legislature.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * The core uncertainty is the long-term balance of power within the constitutional framework.
 */

omega_variable(
    judicial_neutrality,
    "Is the Court truly a neutral arbiter of the Constitution, or does judicial review inherently transform into a 'Rope' of judicial policy-making, potentially becoming a 'Snare' for democratic self-governance?",
    resolution_mechanism("Requires evaluation of future case law to see if review is used primarily for coordination (interpreting) or partisan extraction (legislating from the bench)."),
    impact("If truly neutral: Judicial Review is a 'Mountain' of stability. If partisan: It becomes a 'Snare' for other branches."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */
/**
 * VIABLE ALTERNATIVES
 *
 * ALTERNATIVE 1: Legislative Supremacy (e.g., British Parliamentary System)
 *    Viability: Historically viable in many democratic nations, where the legislature is the ultimate legal authority.
 *    Suppression: Rejected by Marshall, who argued that without judicial review, written constitutions are "solemn mockery," effectively suppressing this alternative in the US context.
 *
 * CONCLUSION:
 * The establishment of constitutional supremacy, through the rejection of
 * legislative supremacy, fundamentally shifted the political landscape. What
 * might be seen as a 'Rope' of democratic action in other systems becomes
 * a 'Snare' for an unchecked legislature in the U.S.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/constitutional_supremacy].
 * 2. Multi-perspective: ?- multi_index_report(constitutional_supremacy).
 * 3. Run tests: ?- run_tests(constitutional_supremacy_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: consumer_debt_slavery
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-22
% ============================================================================

:- module(constraint_consumer_debt_slavery, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: consumer_debt_slavery
 * human_readable: The Interest Trap (Act Your Wage)
 * domain: economic
 * * SUMMARY:
 * A financial constraint where individuals with low capital utilize credit for 
 * depreciating assets or essential consumption, leading to a state of long-term 
 * financial servitude. The extraction occurs through compounding interest payments 
 * that consume future income, preventing wealth accumulation.
 * * KEY AGENTS:
 * - The Borrower: Subject (Powerless) - Lives paycheck-to-paycheck, reliant on credit.
 * - The Creditor: Beneficiary (Institutional) - Profits from interest payments.
 * - The Financial System Auditor: Auditor (Analytical) - Analyzes the structural effects of consumer credit.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(consumer_debt_slavery, 0.72). % Snare extraction >= 0.46
domain_priors:suppression_score(consumer_debt_slavery, 0.60).   % Structural property (raw, unscaled).
domain_priors:theater_ratio(consumer_debt_slavery, 0.45).       % Not a Piton (<= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(consumer_debt_slavery, extractiveness, 0.72).
narrative_ontology:constraint_metric(consumer_debt_slavery, suppression_requirement, 0.60).
narrative_ontology:constraint_metric(consumer_debt_slavery, theater_ratio, 0.45).

% Constraint self-claim (what does the constraint claim to be?)
% The system is framed as a necessary tool for economic liquidity and growth.
narrative_ontology:constraint_claim(consumer_debt_slavery, coordination).

% Binary flags
domain_priors:requires_active_enforcement(consumer_debt_slavery). % Required for Tangled Rope (e.g., credit reporting, collections)

% Structural property derivation hooks for Tangled Rope:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
narrative_ontology:constraint_beneficiary(consumer_debt_slavery, creditor_class).
narrative_ontology:constraint_victim(consumer_debt_slavery, borrower_class).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% High base extraction (0.72) is amplified by powerlessness (π=1.5),
% resulting in an inescapable trap. χ = 0.72 * 1.5 * 1.0 = 1.08.
constraint_indexing:constraint_classification(consumer_debt_slavery, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Institutional power (π=-0.2) inverts extraction, making the system appear
% purely beneficial. χ = 0.72 * -0.2 * 1.2 = -0.17.
constraint_indexing:constraint_classification(consumer_debt_slavery, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Detects the hybrid nature: a genuine coordination function (liquidity)
% coupled with severe asymmetric extraction.
constraint_indexing:constraint_classification(consumer_debt_slavery, tangled_rope,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(national))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(consumer_debt_slavery_tests).

test(perspectival_gap) :-
    % Verify the Borrower sees a Snare while the Institutional Creditor sees a Rope.
    constraint_indexing:constraint_classification(consumer_debt_slavery, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(consumer_debt_slavery, rope, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(consumer_debt_slavery, tangled_rope, context(agent_power(analytical), _, _, _)).

test(tangled_rope_structural_properties) :-
    % Verify all three conditions for Tangled Rope are met.
    narrative_ontology:constraint_beneficiary(consumer_debt_slavery, _), % -> has_coordination_function
    narrative_ontology:constraint_victim(consumer_debt_slavery, _),     % -> has_asymmetric_extraction
    domain_priors:requires_active_enforcement(consumer_debt_slavery).

test(extraction_intensity) :-
    domain_priors:base_extractiveness(consumer_debt_slavery, E),
    E > 0.46.

:- end_tests(consumer_debt_slavery_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extraction (0.72) is high because consumer debt on depreciating
 * assets or for basic consumption provides zero financial return for the
 * borrower while generating guaranteed, compounding income for the creditor.
 * The suppression score (0.60) reflects the lack of viable alternatives for
 * low-income individuals to access capital or manage financial emergencies.
 *
 * The perspectival gap is stark: for the powerless, it's a Snare that consumes
 * their future. For the institutional beneficiary, it's a Rope that provides
 * essential market liquidity and stable returns. The Tangled Rope classification
 * from the analytical view is critical, as it acknowledges the system's dual
 * nature, preventing a simplistic "pure evil" (Snare) or "pure good" (Rope)
 * assessment.
 *
 * * [RESOLVED MANDATROPHY]:
 * The narrative claim of "modern-day slavery" is resolved by the Tangled Rope
 * classification. It correctly identifies that while the system coordinates
 * transactions (a Rope-like function), the severe, asymmetric extraction of
 * future labor value via interest creates a Snare-like condition for those with
 * low power and no exit options.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_debt_utility,
    'Is the debt for a depreciating asset or a hidden productive utility (e.g., a car needed for a better job)?',
    'Empirical analysis of net income gain from the asset versus the total cost of interest over the loan term.',
    'If utility > cost, the constraint shifts toward a Rope for the Subject; if cost > utility, it confirms the Snare classification.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(consumer_debt_slavery, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data shows the normalization and intensification of consumer debt
% culture over the interval. Required for high-extraction constraints (E > 0.46).
%
% Theater ratio over time (Normalizing debt through lifestyle marketing):
narrative_ontology:measurement(cds_tr_t0, consumer_debt_slavery, theater_ratio, 0, 0.20).
narrative_ontology:measurement(cds_tr_t5, consumer_debt_slavery, theater_ratio, 5, 0.35).
narrative_ontology:measurement(cds_tr_t10, consumer_debt_slavery, theater_ratio, 10, 0.45).

% Extraction over time (Interest rate deregulation, fee accumulation):
narrative_ontology:measurement(cds_ex_t0, consumer_debt_slavery, base_extractiveness, 0, 0.40).
narrative_ontology:measurement(cds_ex_t5, consumer_debt_slavery, base_extractiveness, 5, 0.60).
narrative_ontology:measurement(cds_ex_t10, consumer_debt_slavery, base_extractiveness, 10, 0.72).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% Consumer credit is a primary mechanism for allocating capital resources.
narrative_ontology:coordination_type(consumer_debt_slavery, resource_allocation).

% Network relationships (structural influence edges)
% Consumer debt levels directly impact the ability to afford housing.
narrative_ontology:affects_constraint(consumer_debt_slavery, housing_affordability).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: continuum_hypothesis_undecidability
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Georg Cantor (1878) / Kurt Gödel (1940) / Paul Cohen (1963)
% ============================================================================

:- module(constraint_continuum_hypothesis, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: continuum_hypothesis_undecidability
 * human_readable: The Continuum Hypothesis (CH)
 * domain: mathematical/philosophical
 * temporal_scope: 1878 - Present (Civilizational)
 * spatial_scope: Global/Abstract (Set Theory)
 * * SUMMARY:
 * The Continuum Hypothesis states that there is no set whose cardinality is 
 * strictly between that of the integers ($\aleph_0$) and the real numbers ($\mathfrak{c}$). 
 * It represents a fundamental independence result in logic, proving that the 
 * "Mountain" of set theory has a summit whose height cannot be determined 
 * within the standard axioms of ZFC.
 * * KEY AGENTS:
 * - The Infinite Set (Subject): A powerless agent whose "size" is trapped in 
 * a logical limbo between countability and the continuum.
 * - The Set Theorist (Institutional): An agent who uses CH as a "Rope" to 
 * coordinate the classification of transfinite cardinalities.
 * - The Formalist (Analytical): An observer for whom the independence of CH 
 * acts as a "Snare," extracting the hope of a complete, deductive universe.
 * * NARRATIVE ARC:
 * Originally proposed by Cantor as a "Mountain" of truth, CH was later 
 * proven to be independent of ZFC by Gödel and Cohen. In pedagogy, it is 
 * a "Rope" for understanding the depths of modern logic. However, for 
 * the seeker of absolute mathematical certainty, the undecidability of 
 * CH acts as a "Snare," extracting the "completeness" of arithmetic 
 * (extraction) and "strangling" the intuition that every well-defined 
 * question must have a yes/no answer.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for structural extraction and indexer coordination
narrative_ontology:interval(continuum_era, 1878, 2026).
narrative_ontology:constraint_claim(continuum_hypothesis_undecidability, mountain).

% Base extractiveness score (0.0-1.0)
% Rationale: 0.15. Low. While a "gift" of logical depth, it "extracts" 
% the possibility of a final, closed classification of the transfinite, 
% imposing a "metaphysical tax" of choice on every researcher.
domain_priors:base_extractiveness(continuum_hypothesis_undecidability, 0.15).

% Suppression score (0.0-1.0)
% Rationale: 0.25. It suppresses the visibility of "Naive Cantorism" by 
% proving that the relationship between sizes of infinity is not 
% automatically decided by the definition of sets.
domain_priors:suppression_score(continuum_hypothesis_undecidability, 0.25).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(continuum_hypothesis_undecidability, extractiveness, 0.15).
narrative_ontology:constraint_metric(continuum_hypothesis_undecidability, suppression_requirement, 0.25).

% Enforcement: Emerges naturally from the axioms of ZFC.
domain_priors:emerges_naturally(continuum_hypothesis_undecidability).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(continuum_hypothesis_undecidability, model_theorists). % Profiting from forcing and independence.
constraint_beneficiary(continuum_hypothesis_undecidability, mathematical_philosophers).
constraint_victim(continuum_hypothesis_undecidability, hilbertian_purists). % Seeking a complete foundation.
constraint_victim(continuum_hypothesis_undecidability, intuitive_determinists).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE REAL NUMBER LINE ($\mathbb{R}$) - Mountain
   --------------------------------------------------------------------------
   
   WHO: powerless - The continuum cannot choose its own cardinality.
   WHEN: immediate - The size $\mathfrak{c} = 2^{\aleph_0}$ is fixed at the set's definition.
   WHERE: trapped - Bound within the transfinite hierarchy.
   SCOPE: local - Immediate relationship to its subsets.
   
   WHY THIS CLASSIFICATION:
   For the continuum itself, its size relative to $\aleph_0$ is an absolute 
   Mountain. Whether or not a "middle set" exists is a fixed feature of 
   the logical landscape, even if that landscape is unreachable by 
   standard proofs. The gap is a natural law of the transfinite.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    continuum_hypothesis_undecidability,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE SET THEORY PROFESSOR - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional - Power to define the axioms used in a proof or curriculum.
   WHEN: biographical - Planning the lifecycle of a student's logical development.
   WHERE: mobile - Can choose to "exit" the dilemma by assuming CH or its negation.
   SCOPE: global - Universal application in standard math.
   
   WHY THIS CLASSIFICATION:
   For the educator, CH is a "Rope"—a functional coordination tool. By 
   explicitly assuming CH ($2^{\aleph_0} = \aleph_1$) or its negation, 
   they coordinate a "standard of achievement" that allows for 
   consistent proofs in analysis or topology, "pulling" the system 
   into a state of functional utility despite the underlying mystery.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    continuum_hypothesis_undecidability,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE NEO-PLATONIST SEARCHER - Snare
   --------------------------------------------------------------------------
   
   WHO: individual_moderate - Has the intelligence to analyze but is bound by independence.
   WHEN: civilizational - Seeking the ultimate "True" model of the universe.
   WHERE: constrained - The "exit" (a proof) is mathematically barred.
   SCOPE: global - Universal limit on formal knowledge.
   
   WHY THIS CLASSIFICATION:
   For the seeker of absolute Truth, the independence of CH is a "Snare." 
   It "strangles" the hope that mathematics is a complete, objective 
   mirror of reality. It extracts the "certainty of the transfinite" 
   (extraction) by proving that our most basic concept of a set is 
   fundamentally "undetermined" (choking) regarding its size.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    continuum_hypothesis_undecidability,
    snare,
    context(
        agent_power(individual_moderate),
        time_horizon(civilizational),
        exit_options(constrained),
        spatial_scope(global)
    )
) :- 
    domain_priors:base_extractiveness(continuum_hypothesis_undecidability, E),
    E >= 0.1,
    !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(continuum_hypothesis_tests).

test(multi_perspective_variance) :-
    % Continuum -> Mountain
    constraint_indexing:constraint_classification(continuum_hypothesis_undecidability, Type1, context(powerless, immediate, trapped, local)),
    % Professor -> Rope
    constraint_indexing:constraint_classification(continuum_hypothesis_undecidability, Type2, context(institutional, biographical, mobile, global)),
    Type1 \= Type2.

test(metaphysical_extraction_penalty) :-
    % Searchers feel the 0.15 extraction of certainty as a Snare.
    Context = context(individual_moderate, civilizational, constrained, global),
    constraint_indexing:extractiveness_for_agent(continuum_hypothesis_undecidability, Context, Score),
    Score >= 0.1.

test(natural_emergence) :-
    domain_priors:emerges_naturally(continuum_hypothesis_undecidability).

:- end_tests(continuum_hypothesis_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * 1. EXTRACTIVENESS SCORE (0.15): 
 * I chose this because CH extracts the dream of "absolute decidability" 
 * from the mathematical community. It is a tax on formalist certainty.
 * 2. CLASSIFICATION: 
 * Captured the transition from the "Mountain" of set-size reality 
 * to the "Snare" of unprovability for those who demand a single 
 * "True" universe of sets.
 * 3. PERSPECTIVES:
 * Chose the Continuum (Subject), the Professor (Institutional Utility), 
 * and the Platonist (Victim of Indeterminacy).
 */

% OMEGA IDENTIFICATION
omega_variable(
    determinacy_axiom_validity,
    "Is there a higher 'Mountain' (e.g., Woodin's V=Ultimate L) that makes CH decidable (Scaffold)?",
    resolution_mechanism("Verification of 'large cardinal' axioms and their impact on the decidability of CH in the inner model."),
    impact("If Yes: The 'Snare' of undecidability is a temporary Scaffold. If No: It is a permanent Mountain."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Axiom of Determinacy (AD)
 * Viability: In ZF+AD, CH is false (as the continuum is "larger" 
 * in a specific measurable way).
 * Suppression: Suppressed in mainstream ZFC math because AD 
 * contradicts the Axiom of Choice (the standard "Rope").
 * * ALTERNATIVE 2: Martin's Axiom (MA)
 * Viability: A "Rope" often used in topology to allow CH to fail 
 * while preserving other desirable properties.
 * * CONCLUSION:
 * The existence of AD and MA as alternative "Ropes" proves that the 
 * "Snare" of CH's undecidability is a choice based on which 
 * axioms we use to climb the Mountain.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 1. Load: ?- [continuum_hypothesis_undecidability].
 * 2. Multi-perspective: ?- multi_index_report(continuum_hypothesis_undecidability).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: conversational_dogmas_interruption
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_conversational_dogmas_interruption, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: conversational_dogmas_interruption
 * human_readable: Conversational Dogmas (Interruption vs. Strong Civility)
 * domain: social/technological
 * * SUMMARY:
 * This constraint represents the rigid, often unconscious "dogmas" that govern
 * human conversation. It contrasts the "Church of Interruption" (COI), which values
 * interruptions as signs of understanding, with the "Church of Strong Civility,"
 * which mandates silence. Misalignment between these norms leads to severe social
 * friction, extracting time, attention, and social harmony.
 * * KEY AGENTS:
 * - The Civilist: Subject (Powerless), silenced by interruptions.
 * - The COI Member: Beneficiary (Moderate), uses interruptions to coordinate.
 * - The Corporate HR Department: Beneficiary (Institutional), benefits from standardized communication.
 * - The Systems Analyst: Auditor (Analytical), observes the full system dynamics.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(conversational_dogmas_interruption, 0.55). % Raised to meet Tangled Rope (>=0.5) and Snare (chi>=0.66) thresholds.
domain_priors:suppression_score(conversational_dogmas_interruption, 0.6).   % High suppression; conversational habits are deeply ingrained and hard to change.
domain_priors:theater_ratio(conversational_dogmas_interruption, 0.2).       % Low theater; the norms are functional, not merely performative.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(conversational_dogmas_interruption, extractiveness, 0.55).
narrative_ontology:constraint_metric(conversational_dogmas_interruption, suppression_requirement, 0.6).
narrative_ontology:constraint_metric(conversational_dogmas_interruption, theater_ratio, 0.2).

% Constraint self-claim (what does the constraint claim to be?)
% The beneficiaries see it as a pure coordination mechanism.
narrative_ontology:constraint_claim(conversational_dogmas_interruption, coordination).

% Binary flags
% Enforcement is not formal but is active via social sanction and correction.
domain_priors:requires_active_enforcement(conversational_dogmas_interruption). % Required for Tangled Rope

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(conversational_dogmas_interruption, members_of_the_same_conversational_church).
narrative_ontology:constraint_victim(conversational_dogmas_interruption, individuals_in_cross_church_conversations).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The "Civilist" is silenced or steamrolled by the COI member.
% χ = 0.55 * 1.5 (powerless) * 0.8 (local) = 0.66. Meets Snare threshold.
constraint_indexing:constraint_classification(conversational_dogmas_interruption, snare,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The COI member sees interruption as an efficient coordination tool.
% χ = 0.55 * 1.0 (moderate) * 0.8 (local) = 0.44. Perceived as a coordination cost.
constraint_indexing:constraint_classification(conversational_dogmas_interruption, rope,
    context(agent_power(moderate),
            time_horizon(biographical),
            exit_options(mobile),
            spatial_scope(local))).

% PERSPECTIVE 3: THE INSTITUTIONAL BENEFICIARY (ROPE)
% The HR department benefits from standardized communication protocols and does not feel the extraction.
% χ = 0.55 * -0.2 (institutional) * 1.0 (national) = -0.11. Perceived as a net benefit.
constraint_indexing:constraint_classification(conversational_dogmas_interruption, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(national))).

% PERSPECTIVE 4: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees both the coordination function (beneficiaries) and the asymmetric
% extraction (victims), classifying it as a Tangled Rope.
constraint_indexing:constraint_classification(conversational_dogmas_interruption, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(conversational_dogmas_interruption_tests).

test(perspectival_gap_subject_vs_institution) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(conversational_dogmas_interruption, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(conversational_dogmas_interruption, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    assertion(TypePowerless == snare),
    assertion(TypeInstitutional == rope),
    assertion(TypePowerless \= TypeInstitutional).

test(analytical_view_is_tangled_rope) :-
    % The analytical observer should correctly identify the tangled nature.
    constraint_indexing:constraint_classification(conversational_dogmas_interruption, TypeAnalytical, context(agent_power(analytical), _, _, _)),
    assertion(TypeAnalytical == tangled_rope).

:- end_tests(conversational_dogmas_interruption_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness was increased to 0.55 to meet the structural requirements for
 * both a Snare (from the powerless perspective, where chi >= 0.66) and a Tangled Rope
 * (from the analytical perspective, where base extraction >= 0.50). The original file
 * incorrectly classified the constraint as a Tangled Rope from the institutional view;
 * this has been corrected. An institution is a beneficiary and perceives the constraint
 * as a Rope due to its negative power modifier (pi = -0.2). The Tangled Rope classification
 * is correctly reserved for the analytical observer who can see both the coordination
 * function and the asymmetric extraction. The invalid power atom 'individual_moderate'
 * was corrected to 'moderate'.
 *
 * PERSPECTIVAL GAP:
 * The gap is stark. For the powerless 'Civilist', the norm is a Snare that traps them in
 * silence. For the 'COI Member' and the 'HR Department', it is a Rope that enables
 * efficient coordination. This divergence is the hallmark of a Tangled Rope system,
 * which is only visible from an analytical standpoint that accounts for all actors.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% The core uncertainty is the plasticity of deeply ingrained conversational habits.
omega_variable(
    omega_conversational_dogmas_interruption,
    'Are conversational dogmas, built over decades, truly malleable (making them a manageable Tangled Rope) or are they effectively permanent cognitive structures (making them a Mountain)?',
    'Long-term behavioral studies of individuals attempting to switch conversational "churches", combined with neurological imaging of habit formation.',
    'If malleable, the constraint can be addressed with training (Tangled Rope). If fixed, it is an immutable feature of social interaction that must be worked around (Mountain).',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(conversational_dogmas_interruption, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Base extraction > 0.46, so temporal data is required.
% We model a slight increase in extraction and theater as the social norms
% become more entrenched and rigid over the interval.

% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(cdi_tr_t0, conversational_dogmas_interruption, theater_ratio, 0, 0.1).
narrative_ontology:measurement(cdi_tr_t5, conversational_dogmas_interruption, theater_ratio, 5, 0.15).
narrative_ontology:measurement(cdi_tr_t10, conversational_dogmas_interruption, theater_ratio, 10, 0.2).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(cdi_ex_t0, conversational_dogmas_interruption, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(cdi_ex_t5, conversational_dogmas_interruption, base_extractiveness, 5, 0.52).
narrative_ontology:measurement(cdi_ex_t10, conversational_dogmas_interruption, base_extractiveness, 10, 0.55).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Conversational norms function as a standard for information exchange.
narrative_ontology:coordination_type(conversational_dogmas_interruption, information_standard).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: conways_game_of_life_dynamics
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: John Horton Conway (1970) / Cellular Automata / Emergence
% ============================================================================

:- module(constraint_conway_life, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: conways_game_of_life_dynamics
 * human_readable: Conway's Game of Life
 * domain: technological/mathematical
 * temporal_scope: 1970 - Present
 * spatial_scope: Global/Abstract (2D Grid Systems)
 * * SUMMARY:
 * Conway's Game of Life is a zero-player cellular automaton where simple local 
 * rules (survival, birth, death) applied to a 2D grid lead to complex emergent 
 * behaviors. It serves as a fundamental model for how deterministic constraints 
 * generate unpredictable, life-like complexity.
 * * KEY AGENTS:
 * - The Individual Cell (Subject): A powerless agent that lives or dies based 
 * solely on its eight immediate neighbors.
 * - The Pattern Architect (Institutional): An agent who coordinates complex 
 * structures (Gliders, Puffer Trains) as a "Rope" for universal computation.
 * - The Unpredictable Observer (Victim): An agent whose ability to predict the 
 * system without simulation is "strangled" by the rule-set.
 * * NARRATIVE ARC:
 * The Game of Life functions as a "Mountain" of logical destiny; once the seed 
 * is planted, the future is fixed by the B3/S23 rules. In computational 
 * research, it is a "Rope" used to prove Turing completeness in simple 
 * systems. However, for an observer seeking a shortcut to the end-state, the 
 * deterministic logic acts as a "Snare," extracting the possibility of 
 * analytic prediction and forcing the "tax" of step-by-step simulation.
 */

/* ==========================================================================
   2. BASE PROPERTIES (Context-Independent)
   ========================================================================== */

% Structural Anchor for index extraction
narrative_ontology:interval(conway_era, 1970, 2026).
narrative_ontology:constraint_claim(conways_game_of_life_dynamics, mountain).

% Base extractiveness score (0.0-1.0)
% Rationale: 0.3. The system "extracts" the potential for arbitrary behavior 
% to enforce strict emergent order. Any cell that does not follow the count 
% is "purged" (dies).
domain_priors:base_extractiveness(conways_game_of_life_dynamics, 0.3).

% Suppression score (0.0-1.0)
% Rationale: 0.4. It suppresses the visibility of non-deterministic causality, 
% rendering any "random" alternative functionally invisible within the grid.
domain_priors:suppression_score(conways_game_of_life_dynamics, 0.4).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(conways_game_of_life_dynamics, extractiveness, 0.3).
narrative_ontology:constraint_metric(conways_game_of_life_dynamics, suppression_requirement, 0.4).

% Enforcement: Emerges naturally from the interaction of local neighbors.
domain_priors:emerges_naturally(conways_game_of_life_dynamics).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(conways_game_of_life_dynamics, emergent_complexity_researchers).
constraint_beneficiary(conways_game_of_life_dynamics, computer_scientists).
constraint_victim(conways_game_of_life_dynamics, analytical_predictability).
constraint_victim(conways_game_of_life_dynamics, individual_cell_autonomy).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE SINGLE GRID CELL - Mountain
   --------------------------------------------------------------------------
   
   WHO: powerless - The cell has zero agency; it is a slave to the count.
   WHEN: immediate - The rule is applied at every discrete tick.
   WHERE: trapped - Bound to its coordinates (x, y).
   SCOPE: local - Can only see its eight neighbors.
   
   WHY THIS CLASSIFICATION:
   For the cell, the laws of Life are an absolute, unyielding Mountain. If it has 
   fewer than two neighbors, it *must* die of underpopulation. It cannot appeal 
   or negotiate; the logic is a fixed feature of its universe.
   
   NARRATIVE EVIDENCE:
   "Any live cell with fewer than two live neighbors dies, as if by 
   underpopulation." (Standard Conway Rule).
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    conways_game_of_life_dynamics,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE PATTERN ARCHITECT - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional - Power to design massive start-states (seeds).
   WHEN: biographical - Planning the lifecycle of a complex "Glider Gun."
   WHERE: mobile - Can choose different starting patterns to achieve specific goals.
   SCOPE: global - Views the entire infinite or toroidal grid.
   
   WHY THIS CLASSIFICATION:
   For the architect, the rules are a "Rope"—a functional coordination 
   mechanism. By understanding the "Mountain" of the rules, they can coordinate 
   gliders to perform logic gates, essentially "pulling" a universal computer 
   out of the grid, providing a standard of achievement for emergent design.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    conways_game_of_life_dynamics,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE ANALYTIC PREDICTOR - Snare
   --------------------------------------------------------------------------
   
   WHO: powerless - Bound by the "Undecidability" of the end-state.
   WHEN: biographical - Attempting to predict if a pattern eventually dies out.
   WHERE: constrained - No alternative but to run the simulation to see.
   SCOPE: local - A specific complex pattern (e.g., a "Methuselah").
   
   WHY THIS CLASSIFICATION:
   For someone seeking to know the future without paying the "tax" of time, 
   the rules are a "Snare." Because the game is Turing-complete, it "strangles" 
   general analytic solutions. It extracts computational cycles (extraction) 
   by making the "Long Run" unpredictable without manual iteration.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    conways_game_of_life_dynamics,
    snare,
    context(
        agent_power(powerless),
        time_horizon(biographical),
        exit_options(constrained),
        spatial_scope(local)
    )
) :- 
    domain_priors:base_extractiveness(conways_game_of_life_dynamics, E),
    E >= 0.2,
    !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(conways_game_of_life_tests).

test(multi_perspective_variance) :-
    % Cell -> Mountain
    constraint_indexing:constraint_classification(conways_game_of_life_dynamics, Type1, context(powerless, immediate, trapped, local)),
    % Architect -> Rope
    constraint_indexing:constraint_classification(conways_game_of_life_dynamics, Type2, context(institutional, biographical, mobile, global)),
    Type1 \= Type2.

test(predictive_snare_insight) :-
    % Demonstrates that for the predictor, the determinism is a Snare
    constraint_indexing:constraint_classification(conways_game_of_life_dynamics, snare, context(powerless, biographical, constrained, local)).

test(emergence) :-
    domain_priors:emerges_naturally(conways_game_of_life_dynamics).

:- end_tests(conways_game_of_life_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * * 1. EXTRACTIVENESS SCORE (0.3):
 * Reasoning: Low-to-moderate. The "cost" of the system is the elimination 
 * of non-rule-abiding states, which is necessary for the "gift" of 
 * emergent complexity.
 * * 2. CLASSIFICATION RATIONALE:
 * Cell (Mountain): The quintessential "powerless" subject of natural law.
 * Architect (Rope): Using the law to build tools (Turing machines).
 * Predictor (Snare): Facing the "Halting Problem" inherent in the game.
 * * 3. OMEGA IDENTIFICATION:
 * Formalized the uncertainty regarding the grid's finiteness—different 
 * edge behaviors change the "Mountain" into a "Scaffold."
 */

% YOUR OMEGAS HERE:
omega_variable(
    grid_edge_topology,
    "Is the 'Mountain' of the rules stable if the grid is finite (Scaffold) vs infinite (Mountain)?",
    resolution_mechanism("Comparison of long-term stability in toroidal vs zero-padding edge conditions."),
    impact("If finite: Complexity eventually stabilizes or dies. If infinite: Complexity can grow forever."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Different Rule Sets (e.g., HighLife B36/S23)
 * Viability: Other cellular automata can produce similar but distinct 
 * universes (e.g., HighLife produces self-replicators).
 * Suppression: Conway's B3/S23 is so dominant that it "suppresses" the 
 * visibility of other rules in pop-culture and introductory research.
 * * ALTERNATIVE 2: Purely Random Systems
 * Viability: Systems without rules (White Noise).
 * Suppression: Rejected because they lack the "Rope" of coordination—order 
 * cannot be built from them.
 * * CONCLUSION:
 * The dominance of Conway's rules as a "Mountain" effectively makes 
 * Alternative 1 a "hidden Rope" only visible to specialists.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * * 1. Load: ?- [constraint_conway_life].
 * 2. Analyze: ?- multi_index_report(conways_game_of_life_dynamics).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: copyleft_viral_licensing
% ============================================================================
% Generated: 2026-01-17
% Model: Gemini 2.0 Flash
% Source: GNU General Public License (GPL) / Free Software Foundation
% ============================================================================

:- module(constraint_copyleft_viral_licensing, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: copyleft_viral_licensing
 * human_readable: Copyleft (Reciprocal Freedom)
 * domain: technological/legal/social
 * temporal_scope: Biographical to Historical (1985 - Present)
 * spatial_scope: Global
 * * SUMMARY:
 * Copyleft is a legal mechanism that uses copyright law to ensure that a work 
 * and its derivatives remain free. Unlike "permissive" licenses, Copyleft 
 * requires that any modified versions of the software must also be licensed 
 * under the same Copyleft terms—a "Share-Alike" requirement on steroids.
 * * KEY AGENTS:
 * - The Free Software Advocate: (e.g., Richard Stallman) who views software 
 * freedom as a fundamental right.
 * - The Proprietary Developer: Views Copyleft as a "Virus" that threatens 
 * their ability to close and monetize source code.
 * - The Community Contributor: Gains security knowing their work cannot be 
 * "captured" by a single corporation.
 * * NARRATIVE ARC:
 * Copyleft functions as a "Recursive Rope." It builds a self-expanding 
 * commons. By using the "Snare" of copyright law (the power to exclude), 
 * it enforces a "Rope" of inclusion. It creates a matching market where 
 * the "price" of entry is the promise to keep the exit open for others.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (Reality Layer)
   ========================================================================== */

narrative_ontology:interval(copyleft_viral_licensing, 0, 10).
narrative_ontology:constraint_claim(copyleft_viral_licensing, rope).

% Base extractiveness score (0.05)
% Extremely low extraction; it is designed to explicitly prevent the 
% extraction of private profit from a shared public resource.
domain_priors:base_extractiveness(copyleft_viral_licensing, 0.05).

% Suppression score (0.2)
% Low suppression; the terms are notoriously explicit, though corporations 
% may suppress the use of copylefted code internally to avoid "contamination."
domain_priors:suppression_score(copyleft_viral_licensing, 0.2).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(copyleft_viral_licensing, extractiveness, 0.05).
narrative_ontology:constraint_metric(copyleft_viral_licensing, suppression_requirement, 0.2).

% Enforcement: Requires active enforcement (Legal standing of the GPL).
domain_priors:requires_active_enforcement(copyleft_viral_licensing).



% BENEFICIARIES & VICTIMS
constraint_beneficiary(copyleft_viral_licensing, the_user_community).
constraint_beneficiary(copyleft_viral_licensing, open_source_ecosystems).
constraint_victim(copyleft_viral_licensing, proprietary_software_vendors).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE OPEN SOURCE DEVELOPER - Rope
   --------------------------------------------------------------------------
   WHO: individual_moderate
   WHEN: biographical
   WHERE: mobile
   SCOPE: global
   
   WHY THIS CLASSIFICATION:
   For the developer, Copyleft is a "Rope." It provides the guarantee that 
   if they contribute to a project (like the Linux kernel), their work will 
   always remain accessible to them and the community. It coordinates 
   mass collaboration by removing the fear of "Proprietary Capture."
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    copyleft_viral_licensing,
    rope,
    context(
        agent_power(individual_moderate),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :-
    domain_priors:base_extractiveness(copyleft_viral_licensing, E),

    E < 0.1.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE CORPORATE COUNSEL - Snare
   --------------------------------------------------------------------------
   WHO: institutional
   WHEN: generational
   WHERE: trapped (once code is 'contaminated', it cannot be easily extracted)
   SCOPE: global
   
   WHY THIS CLASSIFICATION:
   To a company trying to build a secret commercial product, the GPL is a 
   "Snare." They view it as a "viral" license that, if accidentally 
   linked to their proprietary code, forces them to open-source their 
   entire product. It is a legal bottleneck they spend millions to avoid.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    copyleft_viral_licensing,
    snare,
    context(
        agent_power(institutional),
        time_horizon(generational),
        exit_options(trapped),
        spatial_scope(global)
    )
) :-
    true.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE SOFTWARE HISTORIAN - Mountain
   --------------------------------------------------------------------------
   WHO: analytical
   WHEN: historical
   WHERE: analytical
   SCOPE: global
   
   WHY THIS CLASSIFICATION:
   The historian sees Copyleft as a "Mountain"—the foundational bedrock 
   of the modern internet. Without the GPL (Copyleft), the "Mountain" of 
   Linux and the web servers that run the world would have likely been 
   fragmented and privatized decades ago.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    copyleft_viral_licensing,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(historical),
        exit_options(analytical),
        spatial_scope(global)
    )
) :-
    domain_priors:requires_active_enforcement(copyleft_viral_licensing).

/* --------------------------------------------------------------------------
   PERSPECTIVE 4: THE END USER - Mountain
   --------------------------------------------------------------------------
   WHO: powerless (A non-developer using the software)
   WHEN: immediate (When using the software)
   WHERE: trapped (Cannot change the license)
   SCOPE: local (Their own use of the software)
   
   WHY THIS CLASSIFICATION:
   For a regular end user, the copyleft license is a "Mountain." It is an
   invisible, unchangeable legal foundation that allows them to use powerful
   software for free. They do not engage with its "viral" nature but benefit
   from the commons it creates.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    copyleft_viral_licensing,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
).

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(copyleft_viral_licensing_tests).

/**
 * TEST 1: Multi-perspective variance
 * Demonstrates that copyleft is viewed differently across agents.
 */
test(multi_perspective_variance) :-
    % Open Source Developer (Rope)
    constraint_indexing:constraint_classification(
        copyleft_viral_licensing,
        Type1,
        context(agent_power(individual_moderate), time_horizon(biographical), exit_options(mobile), spatial_scope(global))
    ),
    % Corporate Counsel (Snare)
    constraint_indexing:constraint_classification(
        copyleft_viral_licensing,
        Type2,
        context(agent_power(institutional), time_horizon(generational), exit_options(trapped), spatial_scope(global))
    ),
    % Software Historian (Mountain)
    constraint_indexing:constraint_classification(
        copyleft_viral_licensing,
        Type3,
        context(agent_power(analytical), time_horizon(historical), exit_options(analytical), spatial_scope(global))
    ),
    % End User (Mountain)
    constraint_indexing:constraint_classification(
        copyleft_viral_licensing,
        Type4,
        context(agent_power(powerless), time_horizon(immediate), exit_options(trapped), spatial_scope(local))
    ),
    % Verify they differ
    Type1 \= Type2,
    Type2 \= Type3. % Rope, Snare, Mountain are different

/**
 * TEST 2: Power-based extractiveness scaling
 * Demonstrates that institutional agents (corporate counsel) experience higher extraction
 * in terms of legal risk and forced transparency, compared to individual developers.
 */
test(power_extractiveness_scaling) :-
    ContextIndividual = context(agent_power(individual_moderate), time_horizon(biographical), exit_options(mobile), spatial_scope(global)),
    ContextInstitutional = context(agent_power(institutional), time_horizon(generational), exit_options(trapped), spatial_scope(global)),
    constraint_indexing:extractiveness_for_agent(copyleft_viral_licensing, ContextIndividual, Score1),
    constraint_indexing:extractiveness_for_agent(copyleft_viral_licensing, ContextInstitutional, Score2),
    Score1 < Score2.  % The "powerful" institution experiences more extraction in this case.

/**
 * TEST 3: Domain-specific insight - The "Viral" Nature
 * Demonstrates that the "snare" for corporations is the very "rope" that protects the commons.
 */
test(viral_nature_insight) :-
    constraint_indexing:constraint_classification(copyleft_viral_licensing, ClassificationCorporate, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(copyleft_viral_licensing, ClassificationDeveloper, context(agent_power(individual_moderate), _, _, _)),
    ClassificationCorporate = snare,
    ClassificationDeveloper = rope.

:- end_tests(copyleft_viral_licensing_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini 2.0 Flash
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. EXTRACTIVENESS (0.05): Copyleft is designed to prevent extraction, so the base score is near zero. The only "extraction" is the requirement to share back, which is a feature, not a bug, of the system.
 * 
 * 2. SUPPRESSION (0.2): Low suppression because the license's terms are explicit. Any "suppression" comes from corporate policies that avoid copyleft code, not from the license itself.
 * 
 * 3. PERSPECTIVE SELECTION:
 *    Selected Open Source Developer (Rope), Corporate Counsel (Snare), Software Historian (Mountain), and End User (Mountain) to show the full range of interactions with copyleft, from active participation to legal opposition to passive benefit.
 * 
 * 4. OMEGAS 
 *    Define uncertainty so your analysis is cleaner
 *    omega_variable(
 *        saas_loophole_resolution,
 *        "Will the 'SaaS Loophole' (AGPL) eventually become the new legal Mountain for cloud-based software?",
 *        resolution_mechanism("Tracking adoption rates of AGPL vs GPL in hyperscale cloud providers and related court cases."),
 *        impact("If Yes: The 'Snare' for cloud providers tightens, forcing them to share back server-side code. If No: The commons may be 'extracted' via SaaS models."),
 *        confidence_without_resolution(medium)
 *    ).
 */

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS (If Applicable)
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES: Permissive Licensing
 * 
 * ALTERNATIVE 1: Permissive Licenses (e.g., MIT, Apache)
 *    Viability: High. These licenses are extremely popular in corporate environments because they allow for proprietary derivatives.
 *    Suppression: Copyleft is not suppressed, but rather presents a different philosophical and legal choice. The two systems coexist.
 *    Evidence: The ongoing "license wars" and debates within the open-source community.
 * 
 * CONCLUSION:
 * The choice between copyleft and permissive licenses represents a fundamental fork in the road for open-source projects. Copyleft prioritizes the freedom of the commons (Rope for community), while permissive licenses prioritize the freedom of the individual developer/corporation (Rope for individual). The "Snare" of copyleft is the price paid for a guaranteed-free commons.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS CONSTRAINT:
 * 
 * 1. Load into main system:
 *    ?- [constraints/copyleft_viral_licensing].
 * 
 * 2. Run multi-perspective analysis:
 *    ?- constraint_indexing:multi_index_report(copyleft_viral_licensing).
 * 
 * 3. Run tests:
 *    ?- run_tests(copyleft_viral_licensing_tests).
 * 
 * 4. Generate pedagogical report:
 *    ?- pedagogical_report(copyleft_viral_licensing).
 * 
 * 5. Compare with other constraints:
 *    ?- compare_constraints(copyleft_viral_licensing, [other_id]).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: copyright_protection
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: U.S. Copyright Act of 1976 / Berne Convention
% ============================================================================

:- module(constraint_copyright_protection, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: copyright_protection
 * human_readable: Copyright (Creative Monopoly)
 * domain: social/economic/technological/legal
 * temporal_scope: Civilizational (Life + 70 years)
 * spatial_scope: Global
 * 
 * SUMMARY:
 * Copyright is a legal framework granting creators exclusive rights to their 
 * original works. It separates "Expression" (protected) from "Idea" (free).
 * For creators, it's a foundation for a career; for the public, it's a fence
 * around the cultural commons, creating an artificial scarcity.
 * 
 * KEY AGENTS:
 * - The Casual Internet User (Individual Powerless): Consumes content without understanding legal nuances.
 * - The Independent Artist (Individual Moderate): Seeks to monetize or control their work.
 * - The AI Training Lab (Institutional): Seeks to use vast amounts of data, regardless of copyright.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(copyright_protection, 0, 10).
narrative_ontology:constraint_claim(copyright_protection, tangled_rope).

% Base extractiveness: 0.4.
% While it allows creators to earn, it extracts "freedom of use" from the 
% public, and often large corporations extract the copyright from creators.
domain_priors:base_extractiveness(copyright_protection, 0.4).

% Suppression: 0.5.
% Fair Use provides an "exit," but automated enforcement systems often 
% suppress even legal uses (chilling effect).
domain_priors:suppression_score(copyright_protection, 0.5).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(copyright_protection, extractiveness, 0.4).
narrative_ontology:constraint_metric(copyright_protection, suppression_requirement, 0.5).

% Enforcement: Requires active enforcement (legal system, Content ID).
domain_priors:requires_active_enforcement(copyright_protection).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(copyright_protection, creators).
constraint_victim(copyright_protection, the_public).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE CASUAL INTERNET USER - Mountain
   --------------------------------------------------------------------------
   WHO: powerless (Consumes content without legal understanding)
   WHEN: immediate (Sees a video, wants to share it)
   WHERE: trapped (Cannot discern fair use from infringement)
   
   WHY THIS CLASSIFICATION:
   For the casual internet user, copyright is an immutable 'Mountain' of legal
   restrictions. They simply consume content as presented, without considering
   fair use or licensing, because the perceived barrier to usage is too high.
   It's a fixed part of the digital landscape.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    copyright_protection,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE INDEPENDENT ARTIST - Rope
   --------------------------------------------------------------------------
   WHO: individual_moderate (Seeks to monetize or control their work)
   WHEN: biographical (Building a career over time)
   WHERE: mobile (Can choose different licensing options or enforcement levels)
   
   WHY THIS CLASSIFICATION:
   For the small creator, copyright is a 'Rope'. It is the only tool they 
   have to prevent their work from being captured and monetized by 
   large entities without compensation. It coordinates their ability to 
   participate in the marketplace and protects their livelihood.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    copyright_protection,
    rope,
    context(
        agent_power(individual_moderate),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE AI TRAINING LAB (INSTITUTIONAL) - Snare
   --------------------------------------------------------------------------
   WHO: institutional (Seeking to build generative AI systems)
   WHEN: immediate (Needing vast datasets for training)
   WHERE: trapped (Cannot easily "un-train" on copyrighted data)
   
   WHY THIS CLASSIFICATION:
   For an entity attempting to build generative AI, copyright is a 'Snare.' 
   The massive scale of data required makes individual licensing 
   impossible, creating a legal bottleneck that threatens the viability 
   of the entire technological enterprise. It strangles innovation at scale.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    copyright_protection,
    snare,
    context(
        agent_power(institutional),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(global)
    )
).

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(copyright_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(copyright_protection, Type1, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(copyright_protection, Type2, context(agent_power(individual_moderate), _, _, _)),
    constraint_indexing:constraint_classification(copyright_protection, Type3, context(agent_power(institutional), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3,
    Type1 \= Type3.

:- end_tests(copyright_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. PERSPECTIVE SELECTION: Added the 'Casual Internet User' as the
 *    'powerless' agent, highlighting their experience of copyright
 *    as an unyielding 'Mountain' of legal complexity.
 *
 * 2. CLASSIFICATION RATIONALE:
 *    - User (Mountain): Perceived as an immutable law due to complexity.
 *    - Artist (Rope): A tool for monetization and control.
 *    - AI Lab (Snare): A barrier to innovation due to data scale.
 * 
 * 3. TANGLED ROPE: Copyright is inherently a 'Tangled Rope'. It's a 'Rope' for
 *    creators to coordinate income, but it's 'Tangled' because it extracts
 *    freedom of use from the public and can strangle new forms of innovation
 *    (like AI training) if not carefully balanced.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * The core uncertainty is how copyright law will adapt (or fail to adapt) to new technologies.
 */

omega_variable(
    ai_fair_use_precedent,
    "Will training AI on copyrighted material be legally classified as 'Transformative Fair Use', or will it require new licensing models?",
    resolution_mechanism("Supreme Court rulings on AI training datasets (e.g., NYT v. OpenAI), and the development of new, industry-standard AI licensing frameworks."),
    impact("If Yes (Fair Use): The 'Snare' for AI labs vanishes. If No: Copyright becomes an insurmountable 'Mountain' for AI, requiring fundamental shifts in data acquisition."),
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */
/**
 * VIABLE ALTERNATIVES
 *
 * ALTERNATIVE 1: Public Domain
 *    Viability: Historically, works eventually enter the public domain.
 *    Suppression: Term extensions (e.g., Sonny Bono Act) have significantly
 *    delayed works entering the public domain, suppressing this alternative for
 *    contemporary works.
 *
 * ALTERNATIVE 2: Creative Commons Licensing
 *    Viability: A flexible framework allowing creators to choose terms.
 *    Suppression: Often perceived as a complex alternative to traditional copyright
 *    by the public, and by institutions as a threat to maximal control.
 *
 * CONCLUSION:
 * Copyright is a dynamic 'Tangled Rope' that balances creator rights with public
 * access. Its constant evolution (e.g., term extensions, digital rights management)
 * is an ongoing attempt to manage the tension between individual ownership and
 * the cultural commons.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/copyright_protection].
 * 2. Multi-perspective: ?- multi_index_report(copyright_protection).
 * 3. Run tests: ?- run_tests(copyright_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: cost_of_observation
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-16
% ============================================================================

:- module(constraint_cost_of_observation, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: cost_of_observation
 * human_readable: The Evolutionary Cost of Observation
 * domain: philosophical/evolutionary
 * * SUMMARY:
 * This meta-constraint describes the "tax" paid by any situated observer.
 * The act of observing and processing information requires metabolic and
 * cognitive resources, creating an inherent cost function. This cost
 * extracts time, energy, and agency from any agent attempting to navigate
 * its environment, transforming what might be a neutral physical reality
 * into a landscape of constraints.
 * * KEY AGENTS:
 * - The Situated Agent: Subject (Powerless) who experiences the cost directly.
 * - The Evolutionary Process: Beneficiary (Institutional) that leverages this cost as a selection pressure.
 * - The Aeternal Observer: Auditor (Analytical) who views the cost as a fundamental law.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(cost_of_observation, 0.85). % High because observation is never free; metabolic/cognitive load is inherent extraction.
domain_priors:suppression_score(cost_of_observation, 0.40).   % Moderate suppression; alternatives to observation are limited for any goal-oriented agent.
domain_priors:theater_ratio(cost_of_observation, 0.05).       % Very low; the cost is functional, not performative.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(cost_of_observation, extractiveness, 0.85).
narrative_ontology:constraint_metric(cost_of_observation, suppression_requirement, 0.40).
narrative_ontology:constraint_metric(cost_of_observation, theater_ratio, 0.05).

% Constraint self-claim (what does the constraint claim to be?)
% It presents as a fundamental, unchangeable feature of reality.
narrative_ontology:constraint_claim(cost_of_observation, natural_law).

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(cost_of_observation, evolutionary_process).
narrative_ontology:constraint_victim(cost_of_observation, situated_agent).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SITUATED AGENT (SNARE)
% Experiences the cost as a direct, unavoidable drain on resources, trapping
% them in a constant struggle for energy and attention.
% χ = 0.85 * 1.5 (powerless) * 0.8 (local) = 1.02
constraint_indexing:constraint_classification(cost_of_observation, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE EVOLUTIONARY PROCESS (ROPE)
% From the perspective of the "designer" (evolution), this cost is a pure
% coordination mechanism that selects for efficient observers.
% χ = 0.85 * -0.2 (institutional) * 1.2 (global) = -0.204
constraint_indexing:constraint_classification(cost_of_observation, rope,
    context(agent_power(institutional),
            time_horizon(historical),
            exit_options(arbitrage),
            spatial_scope(global))).

% PERSPECTIVE 3: THE AETERNAL OBSERVER (MOUNTAIN)
% From a detached, analytical viewpoint, the cost is simply a law of physics
% and information theory, an unchangeable feature of the universe.
% χ = 0.85 * 1.15 (analytical) * 1.0 (universal) = 0.9775
% Despite high chi, the analytical frame recognizes it as a natural law, classifying it as Mountain.
constraint_indexing:constraint_classification(cost_of_observation, mountain,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(universal))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(cost_of_observation_tests).

test(perspectival_gap) :-
    % Verify the gap between the Situated Agent (Snare) and the Evolutionary Process (Rope).
    constraint_indexing:constraint_classification(cost_of_observation, TypePowerless,
        context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(cost_of_observation, TypeInstitutional,
        context(agent_power(institutional), _, _, _)),
    TypePowerless == snare,
    TypeInstitutional == rope,
    TypePowerless \= TypeInstitutional.

test(analytical_view_is_mountain) :-
    % Verify the analytical observer correctly identifies it as a Mountain despite high chi.
    constraint_indexing:constraint_classification(cost_of_observation, TypeAnalytical,
        context(agent_power(analytical), _, _, _)),
    TypeAnalytical == mountain.

test(threshold_validation) :-
    % Verify base extractiveness is high, triggering mandatory data requirements.
    narrative_ontology:constraint_metric(cost_of_observation, extractiveness, E),
    E > 0.46.

:- end_tests(cost_of_observation_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This constraint explores the perspectival nature of fundamental costs. The
 * base extractiveness is set to a high 0.85 to represent the unavoidable
 * "metabolic tax" of agency and observation.
 *
 * The Perspectival Gap is stark:
 * - For the 'powerless' situated agent, this tax is a Snare, consuming finite
 *   resources and limiting potential actions. The local scope amplifies this feeling.
 * - For the 'institutional' lens of evolution, this tax is a Rope, a perfect
 *   coordination mechanism that filters for organisms with efficient sensory
 *   and cognitive processing.
 * - For the 'analytical' observer, the cost is a Mountain, a fundamental
 *   property of thermodynamics and information theory applied to embodied agents.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The high extraction (0.85) is not a sign of a constructed, predatory system
 * but a feature of physical law. The system correctly resolves this by
 * classifying the constraint as a Mountain from the analytical perspective,
 * preventing a misclassification of natural law as a universal Snare. The
 * Snare classification is reserved for the subjective experience of the agent
 * trapped by that law.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_cost_of_observation,
    'Is there a theoretical minimum to the cost of observation (a Landauer limit for cognition), or can evolution/technology reduce it to near zero?',
    'Advances in biophysics, information theory, and low-power computing.',
    'If a floor exists, it confirms the Mountain classification. If not, the Snare is potentially solvable, making it a technological rather than physical limit.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(cost_of_observation, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This is a fundamental constraint, assumed to be stable over the measured
% interval. The values do not change, reflecting its Mountain-like nature from
% a long-term perspective.

% Theater ratio over time (stable and low):
narrative_ontology:measurement(cost_of_observation_tr_t0, cost_of_observation, theater_ratio, 0, 0.05).
narrative_ontology:measurement(cost_of_observation_tr_t5, cost_of_observation, theater_ratio, 5, 0.05).
narrative_ontology:measurement(cost_of_observation_tr_t10, cost_of_observation, theater_ratio, 10, 0.05).

% Extraction over time (stable and high):
narrative_ontology:measurement(cost_of_observation_ex_t0, cost_of_observation, base_extractiveness, 0, 0.85).
narrative_ontology:measurement(cost_of_observation_ex_t5, cost_of_observation, base_extractiveness, 5, 0.85).
narrative_ontology:measurement(cost_of_observation_ex_t10, cost_of_observation, base_extractiveness, 10, 0.85).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% No specific coordination type or network relationships apply to this
% fundamental, philosophical constraint.

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: countable_infinity_cardinality
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Cantor's Set Theory / Cardinality of Aleph-0
% ============================================================================

:- module(constraint_countable_infinity, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: countable_infinity_cardinality
 * human_readable: Countable Infinity (Aleph-0)
 * domain: mathematical/logical
 * temporal_scope: 1874 - Present (Civilizational)
 * spatial_scope: Global/Abstract (Discrete Mathematics)
 * * SUMMARY:
 * Countable infinity defines sets that can be put into a one-to-one 
 * correspondence with the natural numbers. While infinite, these sets are 
 * "ordered" and "enumerable," creating a rigid logical boundary between 
 * discrete iteration and the "uncountable" continuum.
 * * KEY AGENTS:
 * - The Natural Number (Subject): The powerless agent whose sequence defines 
 * the path of all other countable sets.
 * - The Computer Scientist (Institutional): An agent who uses countability as 
 * a "Rope" for algorithmic iteration and data indexing.
 * - The Continuum Researcher: An observer for whom countability acts as a 
 * "Snare," proving the "holes" in discrete logic when compared to the Reals.
 * * NARRATIVE ARC:
 * To the mathematician, countability is a "Mountain"—an unyielding law of 
 * cardinality discovered by Cantor. In programming, it is the "Rope" of 
 * loops and indices. However, to the intuition of the "Rational" numbers, 
 * countability is a "Snare"; despite feeling "dense" and continuous, they 
 * are "strangled" by the fact that they are no larger than the set of 
 * integers, a truth that extracts the illusion of their continuity.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION
   ========================================================================== */

% Structural Anchor
narrative_ontology:interval(countable_infinity_cardinality, 1874, 2026).
narrative_ontology:constraint_claim(countable_infinity_cardinality, mountain).

% Base extractiveness score (0.0-1.0)
% Rationale: 0.2. Countability "extracts" the sense of density from sets 
% like the Rationals, forcing them into a discrete line for the sake 
% of logical ordering.
domain_priors:base_extractiveness(countable_infinity_cardinality, 0.2).

% Suppression score (0.0-1.0)
% Rationale: 0.25. It suppresses the visibility of the "Continuum" in 
% discrete systems, making uncountable sets appear "non-existent" 
% within the logic of integer-based computation.
domain_priors:suppression_score(countable_infinity_cardinality, 0.25).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(countable_infinity_cardinality, extractiveness, 0.2).
narrative_ontology:constraint_metric(countable_infinity_cardinality, suppression_requirement, 0.25).

% Enforcement: Emerges naturally from the axioms of Peano and Set Theory.
domain_priors:emerges_naturally(countable_infinity_cardinality).

% Metrics for Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(countable_infinity_cardinality, algorithm_designers). % Predictable iteration.
constraint_beneficiary(countable_infinity_cardinality, logicians). 
constraint_victim(countable_infinity_cardinality, intuitive_continuity). % The Rationals are "shrunk" to a line.

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE INTEGER "1,000,001" - Mountain
   --------------------------------------------------------------------------
   WHO: powerless - The number has no agency over its position.
   WHEN: immediate - True at every point on the number line.
   WHERE: trapped - Bound by the sequence of $n+1$.
   SCOPE: local - Immediate position relative to neighbors.
   
   WHY THIS CLASSIFICATION:
   For any element in a countable set, its place is a natural law. It cannot 
   "jump" the queue or be "larger" than its neighbor in a way that breaks 
   one-to-one correspondence. The Mountain of $\aleph_0$ is unchangeable.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    countable_infinity_cardinality,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE SOFTWARE ENGINEER - Rope
   --------------------------------------------------------------------------
   WHO: institutional - Power to design loops and indexing systems.
   WHEN: biographical - Planning the architecture of a database or system.
   WHERE: mobile - Can map any discrete data set to the integers.
   SCOPE: global - Universal applicability in CS.
   
   WHY THIS CLASSIFICATION:
   For the engineer, countability is a "Rope"—a tool for coordination. 
   It ensures that no matter how much data is added, it can be "reached" 
   via discrete steps (1, 2, 3...), providing a standard of achievement 
   for system stability.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    countable_infinity_cardinality,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE RATIONAL NUMBER LINE - Snare
   --------------------------------------------------------------------------
   WHO: powerless - Bound by Cantor's diagonal/zig-zag logic.
   WHEN: immediate - Realizing there is "no room" to be larger than N.
   WHERE: constrained - No alternative but to follow the counting path.
   SCOPE: local - Stuck in the "zig-zag" enumeration.
   
   WHY THIS CLASSIFICATION:
   Despite appearing to fill the entire space between 0 and 1 with 
   infinite points, the Rational numbers are "strangled" by countability. 
   The logic of the "zig-zag" proof acts as a "Snare," extracting their 
   density and forcing them into a single-file line that matches 1, 2, 3...
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    countable_infinity_cardinality,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(local)
    )
) :- 
    domain_priors:base_extractiveness(countable_infinity_cardinality, E),
    E >= 0.1,
    !.

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(countable_infinity_tests).

test(perspective_shift) :-
    % The integer sees a Mountain; the Engineer sees a Rope.
    constraint_indexing:constraint_classification(countable_infinity_cardinality, mountain, context(powerless, immediate, trapped, local)),
    constraint_indexing:constraint_classification(countable_infinity_cardinality, rope, context(institutional, biographical, mobile, global)).

test(rational_enumeration_snare) :-
    % The Rationals feel the extraction of their density via countability logic.
    constraint_indexing:constraint_classification(countable_infinity_cardinality, snare, context(powerless, immediate, constrained, local)).

test(natural_emergence) :-
    domain_priors:emerges_naturally(countable_infinity_cardinality).

:- end_tests(countable_infinity_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * 1. CLASSIFICATION: Countable infinity is a fundamental Mountain of 
 * mathematics. However, its "Perspectival Gap" is significant; it is a 
 * perfect Rope for computer science (arrays, for-loops) but a Snare 
 * for the intuition of set density (Rationals).
 * 2. EXTRACTIVENESS: Set at 0.2. The theorem "takes" the complexity 
 * of the rationals and "shrivels" it into the same size as the integers.
 * 3. AGENT POWER: I characterized the Rationals as "powerless" 
 * to highlight the coercion of the Cantor mapping.
 */

% OMEGA IDENTIFICATION
omega_variable(
    continuum_hypothesis_interaction,
    "Is there a set size between the Mountain of $\aleph_0$ and the Mountain of the Reals?",
    resolution_mechanism("Formal undecidability in ZFC; requires a leap of faith to a specific axiom."),
    impact("If Yes: Countability is a 'Scaffold'. If No: It is a permanent 'Mountain' edge."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Uncountable Sets (The Reals)
 * Viability: Truly continuous, cannot be mapped to N.
 * Suppression: Often "ignored" in discrete algorithmic contexts because 
 * you cannot iterate over them.
 * Evidence: Cantor's Diagonal Argument.
 * * ALTERNATIVE 2: Ultra-Finitism
 * Viability: Denying that infinity exists at all.
 * Suppression: Suppressed by modern analysis and the "Rope" utility 
 * of calculus.
 * * CONCLUSION:
 * The dominance of the Countable "Rope" in computer science effectively 
 * suppresses the viability of truly continuous (uncountable) processing.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Load: ?- [countable_infinity_cardinality].
% Analyze: ?- constraint_indexing:multi_index_report(countable_infinity_cardinality).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: couples_residency_match
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-27
% ============================================================================

:- module(constraint_couples_residency_match, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: couples_residency_match
 * human_readable: The Medical Residency Couples Match Algorithm
 * domain: technological/economic
 * * SUMMARY:
 * The "Couples Match" is a specialized module of the National Resident Matching Program (NRMP) that allows two medical students to link their rank order lists (ROLs). To maintain stability, the algorithm must find a pair of programs that is stable for BOTH partners simultaneously. This significantly increases computational complexity and restricts the available "solution space," forcing couples to often sacrifice individual prestige for geographic proximity.
 * * KEY AGENTS:
 * - The Couple: Two agents acting as a single unit with linked preferences (Subject).
 * - Regional Hospital Systems: Institutions that benefit from attracting and retaining talent that might otherwise leave the area (Beneficiary).
 * - The NRMP/Algorithm Designers: The analytical observer defining the rules of the market.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(couples_residency_match, 0.5). % The system extracts a "choice penalty." To guarantee being together, couples often match at lower-ranked programs than they would individually.
domain_priors:suppression_score(couples_residency_match, 0.95).   % Structural property (raw, unscaled). Like the standard match, side-deals are strictly prohibited and algorithm participation is mandatory.
domain_priors:theater_ratio(couples_residency_match, 0.1).       % The system is highly functional and not performative.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(couples_residency_match, extractiveness, 0.5).
narrative_ontology:constraint_metric(couples_residency_match, suppression_requirement, 0.95).
narrative_ontology:constraint_metric(couples_residency_match, theater_ratio, 0.1).

% Constraint self-claim (what does the constraint claim to be?)
% It claims to be a pure coordination tool to solve a social problem.
narrative_ontology:constraint_claim(couples_residency_match, coordination).

% Binary flags
domain_priors:requires_active_enforcement(couples_residency_match). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
narrative_ontology:constraint_beneficiary(couples_residency_match, regional_hospital_systems).
narrative_ontology:constraint_victim(couples_residency_match, high_achieving_partners).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The couple experiences the constraint as a "Snare" because the number
% of valid stable matches drops exponentially when ROLs are linked.
% The binding nature of the contract means they might be forced into
% their 50th-ranked pair of programs simply because it's the only
% one that works for both, a "voluntary" trap.
constraint_indexing:constraint_classification(couples_residency_match, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Program directors and regional hospital systems see the Couples Match as a "Rope."
% It helps them recruit and retain high-quality candidates who might otherwise
% go to different cities. It coordinates the social needs of residents with the
% labor needs of the hospital system.
constraint_indexing:constraint_classification(couples_residency_match, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(regional))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The system is a textbook Tangled Rope. It has a genuine coordination function
% (helping couples stay together), but this comes at the cost of asymmetric
% extraction (high-achieving partners sacrifice rank for joint stability) and
% requires high suppression (enforced matching rules) to function.
constraint_indexing:constraint_classification(couples_residency_match, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(couples_residency_match_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(couples_residency_match, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(couples_residency_match, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(analytical_classification_is_tangled_rope) :-
    % Verify the analytical view correctly identifies the hybrid nature.
    constraint_indexing:constraint_classification(couples_residency_match, tangled_rope, context(agent_power(analytical), _, _, _)).

test(tangled_rope_structural_requirements_met) :-
    % Verify all three conditions for Tangled Rope are met.
    narrative_ontology:constraint_beneficiary(couples_residency_match, _), % -> has_coordination_function
    narrative_ontology:constraint_victim(couples_residency_match, _),     % -> has_asymmetric_extraction
    domain_priors:requires_active_enforcement(couples_residency_match).

:- end_tests(couples_residency_match_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The core of this constraint is the tension between its stated goal (coordination)
 * and its emergent effect (extraction). The base extractiveness of 0.5 reflects
 * the significant "prestige penalty" that couples pay to match together. The
 * suppression score of 0.95 is inherited from the NRMP itself, which is a
 * highly rigid, non-negotiable market mechanism.
 *
 * The Perspectival Gap is stark:
 * - For the couple (powerless, trapped), the algorithm is a Snare. They enter
 *   it voluntarily to solve a social problem, but the mathematical reality
 *   severely constrains their outcomes, extracting value (their top choices)
 *   in exchange for geographic stability.
 * - For the hospital system (institutional, mobile), it's a Rope. It's a tool
 *   that helps them solve a recruitment problem, attracting pairs of doctors
 *   who become stable, long-term employees.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * An early analysis might misclassify this as a Mountain, citing the NP-hard
 * complexity of the stable matching problem with couples. This is a classic
 * "false natural law" error. The complexity is a property of the *chosen solution*,
 * not an immutable law of nature. The system is a human-constructed market.
 * Classifying it as a Tangled Rope correctly identifies that it has both a
 * legitimate coordination function and a significant, asymmetrically applied
 * extractive component, preventing the mislabeling of its coercive aspects
 * as mere mathematical necessity.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_couples_residency_match,
    'To what extent is the "prestige penalty" a result of mathematical necessity versus a lack of geographic density in high-tier programs?',
    'Analysis of match data, comparing outcomes in dense urban areas (e.g., NYC, Boston) vs. sparse regions.',
    'If due to density, the extraction is a geographic Mountain. If due to math, the algorithm itself is the Snare.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(couples_residency_match, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection. This models the increasing
% competitiveness and formalization of the match over time, leading to a
% gradual increase in the extractive penalty. Theater remains low as the
% system is purely functional.

% Theater ratio over time (metric_substitution detection):
narrative_ontology:measurement(crm_tr_t0, couples_residency_match, theater_ratio, 0, 0.05).
narrative_ontology:measurement(crm_tr_t5, couples_residency_match, theater_ratio, 5, 0.08).
narrative_ontology:measurement(crm_tr_t10, couples_residency_match, theater_ratio, 10, 0.1).

% Extraction over time (extraction_accumulation detection):
narrative_ontology:measurement(crm_ex_t0, couples_residency_match, base_extractiveness, 0, 0.4).
narrative_ontology:measurement(crm_ex_t5, couples_residency_match, base_extractiveness, 5, 0.45).
narrative_ontology:measurement(crm_ex_t10, couples_residency_match, base_extractiveness, 10, 0.5).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% This is a classic resource allocation problem: assigning candidates to positions.
narrative_ontology:coordination_type(couples_residency_match, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: cow_field_poop
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: "Out in the Cow Field of Life" by cafebedouin.org
% ============================================================================

:- module(constraint_cow_field_poop, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: cow_field_poop
 * human_readable: The Cow Field Hazard (Pragmatic Avoidance)
 * domain: social/psychological/environmental
 * temporal_scope: Perennial
 * spatial_scope: Local (The immediate path) to Global (The field of life)
 * 
 * SUMMARY:
 * This constraint defines the presence of "poop" (negative events, social hazards, or 
 * nonsense) as an inherent and diverse feature of existence. It 
 * distinguishes between the analytical act of cataloging these hazards and the 
 * pragmatic necessity of avoiding them.
 * 
 * KEY AGENTS:
 * - The Practical Walker (Individual Moderate): The individual attempting to navigate the field.
 * - Public Works Department / Urban Planner (Institutional): Manages environmental hazards through infrastructure.
 * - The Victim (Individual Powerless): One who has already encountered the hazard.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(cow_field_poop, 0, 10).
narrative_ontology:constraint_claim(cow_field_poop, mountain).

% Base extractiveness: 0.4.
% Encountering a hazard extracts time, emotional energy, and resources (cleaning). 
% Cataloging without avoiding also extracts cognitive bandwidth.
domain_priors:base_extractiveness(cow_field_poop, 0.4).

% Suppression: 0.3.
% The "extraordinary" detail of cataloging can suppress the "ordinary" 
% necessity of simple navigation.
domain_priors:suppression_score(cow_field_poop, 0.3).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(cow_field_poop, extractiveness, 0.4).
narrative_ontology:constraint_metric(cow_field_poop, suppression_requirement, 0.3).

% Enforcement: Emerges naturally from the nature of the "field".
domain_priors:emerges_naturally(cow_field_poop).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(cow_field_poop, effective_navigators).
constraint_victim(cow_field_poop, the_unwary_walker).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE PRACTICAL WALKER - Rope
   --------------------------------------------------------------------------
   WHO: individual_moderate (Has agency to choose where to step)
   WHEN: immediate (The next step in the field)
   WHERE: mobile (Can see hazards and adjust path)
   
   WHY THIS CLASSIFICATION:
   For the navigator, the hazards are a 'Rope'—a functional coordination mechanism. 
   Knowledge of the "poop" is used as a tool to successfully coordinate movement 
   through the field, ensuring a clean passage.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    cow_field_poop,
    rope,
    context(
        agent_power(individual_moderate),
        time_horizon(immediate),
        exit_options(mobile),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: PUBLIC WORKS DEPARTMENT / URBAN PLANNER - Mountain
   --------------------------------------------------------------------------
   WHO: institutional (Manages environmental hazards through infrastructure)
   WHEN: historical (Long-term planning for public health and safety)
   WHERE: analytical (Develops systems to mitigate inherent hazards)
   
   WHY THIS CLCLASSIFICATION:
   For a Public Works Department or Urban Planner, "cow field poop" represents
   a 'Mountain'—an inherent environmental hazard or urban planning challenge
   that must be managed through infrastructure and public policy, not simply
   avoided by individuals. It's a fixed reality that requires systemic solutions.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    cow_field_poop,
    mountain,
    context(
        agent_power(institutional),
        time_horizon(historical),
        exit_options(analytical),
        spatial_scope(regional)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE VICTIM (THE STEPPER) - Snare
   --------------------------------------------------------------------------
   WHO: powerless (Suffers immediate extraction of dignity or cleanliness)
   WHEN: immediate (The moment of impact)
   WHERE: trapped (Bounded by the mess and its consequences)
   
   WHY THIS CLASSIFICATION:
   For the person who has stepped in it, the hazard is a 'Snare'. It has 
   tightened around their foot, extracting their progress and comfort, and 
   requiring immediate "liquidation" of the mess to proceed. This effectively
   strangles their dignity and mobility.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    cow_field_poop,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
).

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(cow_field_poop_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(cow_field_poop, Type1, context(agent_power(individual_moderate), _, _, _)),
    constraint_indexing:constraint_classification(cow_field_poop, Type2, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(cow_field_poop, Type3, context(agent_power(powerless), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3,
    Type1 \= Type3.

:- end_tests(cow_field_poop_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. INSTITUTIONAL PERSPECTIVE: Added 'Public Works Department / Urban Planner'
 *    as the institutional agent. For them, environmental hazards are a 'Mountain'
 *    requiring systemic management.
 *
 * 2. CLASSIFICATION RATIONALE:
 *    - Practical Walker (Rope): A tool for navigation and avoidance.
 *    - Public Works (Mountain): Inherent environmental hazard requiring systemic solutions.
 *    - Victim (Snare): Trapped by the immediate consequences of the hazard.
 * 
 * 3. CORE INSIGHT: Life's "cow field" presents a fundamental 'Mountain' of
 *    unavoidable hazards. While individuals can use a 'Rope' of pragmatic
 *    avoidance, and institutions employ systemic management strategies, the
 *    failure to navigate these hazards can quickly turn into a dignifying 'Snare'
 *    for the unwary.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * The core uncertainty is the utility of detailed hazard cataloging versus pragmatic avoidance.
 */

omega_variable(
    poop_catalog_utility,
    "Does 'describing every detail' of life's hazards eventually provide a 'Rope' for better avoidance and systemic mitigation, or is it a terminal 'Mountain' of academic clutter, distracting from pragmatic action?",
    resolution_mechanism("Audit of navigation success rates in catalogers vs. non-cataloging practitioners; effectiveness of public awareness campaigns versus infrastructure investments in hazard reduction."),
    impact("If beneficial: Cataloging is a 'Rope'. If clutter: It is a 'Snare' for time-extraction and a distraction from real solutions."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */
/**
 * VIABLE ALTERNATIVES
 *
 * ALTERNATIVE 1: Cleaning the Field (Systemic Sanitization)
 *    Viability: Removing the hazards entirely through large-scale environmental engineering or social reform.
 *    Suppression: Often shunted as impossible or prohibitively expensive; the parable assumes the field *contains* the poop, and the only individual agency is avoidance.
 *
 * CONCLUSION:
 * The "cow field" highlights the 'Mountain' of inherent hazards in existence.
 * While individuals develop 'Ropes' of pragmatic avoidance, and institutions
 * seek systemic 'Ropes' (infrastructure), the ultimate solution of 'Cleaning
 * the Field' is often suppressed by its perceived impossibility, leaving
 * many to face the 'Snare' of direct hazard.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/cow_field_poop].
 * 2. Multi-perspective: ?- multi_index_report(cow_field_poop).
 * 3. Run tests: ?- run_tests(cow_field_poop_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: creative_commons_licensing
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: Creative Commons Legal Code / Lessig, L. (2004). Free Culture.
% ============================================================================

:- module(constraint_creative_commons_licensing, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: creative_commons_licensing
 * human_readable: Creative Commons Licensing Framework
 * domain: legal/social/technological
 * temporal_scope: 2001 - Present
 * spatial_scope: Global
 * 
 * SUMMARY:
 * Creative Commons (CC) is a licensing framework that allows creators to move away 
 * from the binary of "Full Copyright" (a Snare) or "Public Domain" (a Mountain). 
 * By using modular terms (Attribution, Non-Commercial, etc.), creators build 
 * a custom "Rope" that defines exactly how their work can be shared and remixed.
 * 
 * KEY AGENTS:
 * - The Student (Individual Powerless): Uses a CC image for a school project.
 * - The Wikipedian (Individual Moderate): Uses CC licenses to build a global commons.
 * - The Traditional Publisher (Institutional): Views CC as a threat to their business model.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (Reality Layer)
   ========================================================================== */

narrative_ontology:interval(creative_commons_licensing, 0, 10).
narrative_ontology:constraint_claim(creative_commons_licensing, rope).

% Base extractiveness score (0.1)
% Low; the creator intentionally gives up "extraction rights" (licensing fees)
% to facilitate broader cultural flow.
domain_priors:base_extractiveness(creative_commons_licensing, 0.1).

% Suppression score (0.1)
% Extremely low; the system is designed for maximum transparency and machine-readability.
domain_priors:suppression_score(creative_commons_licensing, 0.1).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(creative_commons_licensing, extractiveness, 0.1).
narrative_ontology:constraint_metric(creative_commons_licensing, suppression_requirement, 0.1).

% Enforcement: Requires active enforcement (though often self-regulating).
domain_priors:requires_active_enforcement(creative_commons_licensing).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(creative_commons_licensing, remix_culture).
constraint_victim(creative_commons_licensing, legacy_publishers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE STUDENT - Rope
   --------------------------------------------------------------------------
   WHO: powerless (Needs an image for a presentation)
   WHEN: immediate (Project deadline)
   WHERE: trapped (Cannot afford to license a stock photo)
   
   WHY THIS CLASSIFICATION:
   For a student, finding a CC-licensed image is a simple 'Rope'. It allows them
   to complete their school project without worrying about copyright law or
   expensive licensing fees. It's a simple, helpful tool.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    creative_commons_licensing,
    rope,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE WIKIPEDIAN / COLLABORATOR - Rope
   --------------------------------------------------------------------------
   WHO: individual_moderate (Building a shared resource)
   WHEN: biographical (Contributing over a lifetime)
   WHERE: mobile (Can choose which works to contribute or use)
   
   WHY THIS CLASSIFICATION:
   For a contributor to an open project like Wikipedia, CC is the ultimate 
   'Rope.' It provides the coordination infrastructure needed for thousands of 
   strangers to build a single 'Mountain' of knowledge without a single 
   'Snare' of copyright litigation.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    creative_commons_licensing,
    rope,
    context(
        agent_power(individual_moderate),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE TRADITIONAL PUBLISHER - Snare
   --------------------------------------------------------------------------
   WHO: institutional (Business model relies on copyright monopolies)
   WHEN: generational (The slow decline of a business model)
   WHERE: constrained (Cannot compete with "free")
   
   WHY THIS CLASSIFICATION:
   To a legacy academic publisher, CC is a 'Snare.' It strangles their 
   ability to charge paywall fees and maintain an "Exclusive Match" 
   with authors. The rise of "Open Access" (driven by CC) is a slow-motion 
   collapse of their extractive power.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    creative_commons_licensing,
    snare,
    context(
        agent_power(institutional),
        time_horizon(generational),
        exit_options(constrained),
        spatial_scope(global)
    )
).

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(cc_tests).

test(multi_perspective_variance) :-
    % Note: both powerless and moderate see a Rope, but for different reasons.
    % The test only requires 2+ distinct types.
    constraint_indexing:constraint_classification(creative_commons_licensing, Type1, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(creative_commons_licensing, Type2, context(agent_power(institutional), _, _, _)),
    Type1 \= Type2.

:- end_tests(cc_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. PERSPECTIVE SELECTION: Added the 'Student' as the 'powerless'
 *    agent. Their use case is simpler than the Wikipedian's; it's about
 *    immediate, frictionless access, which is a core value proposition of CC.
 *
 * 2. CLASSIFICATION RATIONALE:
 *    - Student/Wikipedian (Rope): A tool for creation and collaboration.
 *    - Publisher (Snare): A threat to an exclusive business model.
 * 
 * 3. CORE INSIGHT: Creative Commons is a "meta-constraint." It uses the rules
 *    of Copyright (a potential 'Snare') to build a collaborative commons (a 'Rope').
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω)
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * The core uncertainty is whether the legal framework can withstand pressure
 * from new technologies that challenge the definition of "use."
 */
omega_variable(
    cc_license_enforcement_vulnerability,
    "Can CC licenses survive a targeted attack by AI companies claiming that training on data constitutes 'Fair Use' and bypasses the license terms (e.g., Share-Alike or Non-Commercial)?",
    resolution_mechanism("Establishment of new case law specifically addressing the use of licensed material in large-scale AI training sets."),
    impact("If Fair Use wins: The CC 'Rope' is broken for AI, and the licenses become a weaker 'Mountain' of ethical guidelines. If CC terms hold: The Rope remains a strong coordination tool for creators."),
    confidence_without_resolution(high)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */
/**
 * VIABLE ALTERNATIVES
 *
 * ALTERNATIVE 1: All Rights Reserved Copyright
 *    Viability: The default legal state for creative works.
 *    Suppression: CC was created specifically to provide a more flexible alternative to this "all or nothing" model.
 *
 * ALTERNATIVE 2: Public Domain
 *    Viability: The state of works after copyright expires.
 *    Suppression: Creators often want some control (like attribution) that the public domain does not provide, making CC a more attractive choice.
 *
 * CONCLUSION:
 * Creative Commons acts as a crucial middle-ground, creating a 'Rope' that is
 * more flexible than the 'Snare' of full copyright but provides more control than
 * the 'Mountain' of the public domain.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/creative_commons_licensing].
 * 2. Multi-perspective: ?- multi_index_report(creative_commons_licensing).
 * 3. Run tests: ?- run_tests(cc_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: crispr_genomic_rewrite_2026
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: "We can rewrite our genetic code" by Michael Le Page (Jan 2026)
% ============================================================================

:- module(constraint_crispr_genomic_rewrite_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: crispr_genomic_rewrite_2026
 * human_readable: CRISPR Genomic Programmability
 * domain: technological/biological
 * temporal_scope: 2012-2026 (The CRISPR Era)
 * spatial_scope: Global (Biological/Agricultural)
 * 
 * SUMMARY:
 * CRISPR is a revolutionary tool enabling specific, targeted changes to DNA,
 * effectively "rewriting" the genetic code. It has transitioned genetic diseases
 * from "impossible to correct" errors into treatable conditions through precise
 * "spelling mistake" correction, expanding into preventative medicine and farming.
 * 
 * KEY AGENTS:
 * - The Cured Patient (Individual Powerless): Subject to severe genetic conditions like sickle cell disease.
 * - The Scientific Institution (Institutional): Developers of CRISPR therapies and agricultural transformations.
 * - The Biological Realist (Analytical): Observer of the genetic "code" and its new programmability.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (Context-Independent)
   ========================================================================== */

narrative_ontology:interval(crispr_genomic_rewrite_2026, 0, 10).
narrative_ontology:constraint_claim(crispr_genomic_rewrite_2026, rope).

% Base extractiveness: 0.4
% Rationale: While curative, the potential for "better versions of ourselves"
% and asymmetric access to genetic enhancement introduces a moderate risk
% of social/biological extraction.
domain_priors:base_extractiveness(crispr_genomic_rewrite_2026, 0.4).

% Suppression: 0.2
% Rationale: Older genetic methods are not being actively suppressed by force,
% but are becoming obsolete through the superior efficacy of CRISPR.
domain_priors:suppression_score(crispr_genomic_rewrite_2026, 0.2).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(crispr_genomic_rewrite_2026, extractiveness, 0.4).
narrative_ontology:constraint_metric(crispr_genomic_rewrite_2026, suppression_requirement, 0.2).

% Enforcement: CRISPR does not occur naturally as a therapy; it requires precise
% targeting and a secondary "change" mechanism.
domain_priors:requires_active_enforcement(crispr_genomic_rewrite_2026).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(crispr_genomic_rewrite_2026, genetic_disease_patients).
constraint_victim(crispr_genomic_rewrite_2026, congenital_disease_legacy).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE CURED PATIENT (Victoria Gray) - Rope
   --------------------------------------------------------------------------
   WHO: powerless (A patient subject to severe disease pain)
   WHEN: biographical (A total shift in life quality: "everything is different")
   WHERE: trapped (Previously bound by sickle cell "freight train" pain)
   
   WHY THIS CLASSIFICATION:
   For the patient, CRISPR is a 'Rope'—a functional tool that allows them
   to pull themselves out of a "trapped" state of chronic disease. It is a
   beneficial coordination mechanism for their biology.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    crispr_genomic_rewrite_2026,
    rope,
    context(
        agent_power(powerless),
        time_horizon(biographical),
        exit_options(trapped),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE SCIENTIFIC INSTITUTION - Rope
   --------------------------------------------------------------------------
   WHO: institutional (Conducting hundreds of clinical trials)
   WHEN: generational (Planning for future routine child genome editing)
   WHERE: mobile (Moving the "cursor" to different places in the genome)
   
   WHY THIS CLASSIFICATION:
   For institutions, CRISPR is a highly flexible 'Rope'—a tool for
   optimizing human and agricultural systems. It is the cursor and
   editor of the biological world, enabling broad societal impact.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    crispr_genomic_rewrite_2026,
    rope,
    context(
        agent_power(institutional),
        time_horizon(generational),
        exit_options(mobile),
        spatial_scope(global)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: BIOLOGICAL REALIST - Mountain
   --------------------------------------------------------------------------
   WHO: analytical (Observer of the genetic "code" and its new programmability)
   WHEN: civilizational (Permanent genetic changes)
   WHERE: analytical (Universal application of the technique)
   
   WHY THIS CLASSIFICATION:
   From an analytical perspective, the ability to rewrite DNA has become
   a 'Mountain'—a fixed reality of the 21st century. The biological
   programmability of life is no longer a choice but a discoverable law of nature.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    crispr_genomic_rewrite_2026,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(civilizational),
        exit_options(analytical),
        spatial_scope(global)
    )
).

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(crispr_genomic_rewrite_2026_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(crispr_genomic_rewrite_2026, Type1, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(crispr_genomic_rewrite_2026, Type2, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(crispr_genomic_rewrite_2026, Type3, context(agent_power(analytical), _, _, _)),
    Type1 \= Type3, % Patient (Rope) vs Realist (Mountain)
    Type2 \= Type3. % Institution (Rope) vs Realist (Mountain)

:- end_tests(crispr_genomic_rewrite_2026_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. EXTRACTIVENESS SCORE (0.4): Chosen because while the direct health benefits
 *    are high, the potential for "making better versions of ourselves"
 *    introduces competitive/extractive asymmetries in the social domain.
 *
 * 2. CLASSIFICATION RATIONALE:
 *    - Patient (Rope): Escaped a biological Snare through a technological Rope.
 *    - Institution (Rope): A highly flexible tool for optimizing biological systems.
 *    - Biological Realist (Mountain): The fact that DNA is now editable is an immutable feature.
 * 
 * 3. CORE INSIGHT: CRISPR transforms "genetic destiny" from a 'Mountain' into
 *    a programmable 'Rope', but this power creates new ethical considerations.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * Core uncertainties around long-term safety and ethical implications.
 */

omega_variable(
    germline_editing_safety_threshold,
    'When will CRISPR be considered safe enough for routine germline editing in children (i.e., making permanent, heritable changes)?',
    resolution_mechanism('Long-term safety data from current somatic clinical trials, and broad regulatory and societal consensus.'),
    impact('If soon: CRISPR is a universal \'Rope\' (prevents common disease). If never: It remains limited to somatic treatment (a weaker \'Rope\').'),
    confidence_without_resolution(medium)
).

omega_variable(
    long_term_metabolic_impacts,
    'What are the unforeseen long-term metabolic impacts of ''permanently lowering'' cholesterol via CRISPR (as mentioned in the source)?',
    resolution_mechanism('30-year longitudinal follow-ups on the ''single dose'' recipients mentioned in the text.'),
    impact('If safe: Universal ''Rope''. If dangerous: Biological ''Snare'' for the treated.'),
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */
/**
 * VIABLE ALTERNATIVES
 *
 * ALTERNATIVE 1: Conventional Genetic Counseling and Symptomatic Treatment
 *    Viability: Historically the standard approach for managing genetic diseases.
 *    Suppression: CRISPR is actively replacing this by offering "correction" of errors,
 *    rendering the alternative less effective and desirable for many conditions.
 *
 * CONCLUSION:
 * CRISPR represents a fundamental paradigm shift that makes previous alternatives
 * less relevant. It transforms "genetic destiny" from a 'Mountain' into a
 * manageable 'Rope'.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/crispr_genomic_rewrite_2026].
 * 2. Multi-perspective: ?- multi_index_report(crispr_genomic_rewrite_2026).
 * 3. Run tests: ?- run_tests(crispr_genomic_rewrite_2026_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: cs_ecmo_bridge
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-22
% ============================================================================

:- module(constraint_cs_ecmo_bridge, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: cs_ecmo_bridge
 * human_readable: ECMO Bridge to Transplant
 * domain: technological
 * * SUMMARY:
 * An artificial lung system (ECMO) allows surgeons to keep a patient alive for a limited time before a lung transplant. This acts as a bridge, providing crucial time to find a suitable organ and perform the complex surgery. While life-saving, it involves immense cost, risk, and dependency for the patient.
 * * KEY AGENTS:
 * - Patient: Subject (Powerless)
 * - Hospital/Surgeons: Beneficiary (Institutional)
 * - Healthcare System Auditor: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(cs_ecmo_bridge, 0.55). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(cs_ecmo_bridge, 0.30).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(cs_ecmo_bridge, 0.10).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(cs_ecmo_bridge, extractiveness, 0.55).
narrative_ontology:constraint_metric(cs_ecmo_bridge, suppression_requirement, 0.30).
narrative_ontology:constraint_metric(cs_ecmo_bridge, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(cs_ecmo_bridge, coordination).

% Binary flags
% narrative_ontology:has_sunset_clause(cs_ecmo_bridge).      % Mandatory if Scaffold
domain_priors:requires_active_enforcement(cs_ecmo_bridge). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(cs_ecmo_bridge, hospital_system).
narrative_ontology:constraint_victim(cs_ecmo_bridge, patient).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The patient is powerless and trapped, facing immense physical, emotional, and
% financial extraction. The technology is their only hope, but it's a high-risk,
% high-cost dependency. Effective extraction χ = 0.55 * 1.5 (powerless) * 1.0 (national) = 0.825.
constraint_indexing:constraint_classification(cs_ecmo_bridge, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The hospital system sees a powerful coordination tool. It enables them to save
% lives that would otherwise be lost, enhancing their capabilities and reputation.
% Effective extraction χ = 0.55 * -0.2 (institutional) * 1.0 (national) = -0.11 (a net benefit).
constraint_indexing:constraint_classification(cs_ecmo_bridge, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees a system with both a genuine coordination function (saving lives)
% and significant asymmetric extraction from the patient. It requires active enforcement
% (medical teams, technology). This is the definition of a Tangled Rope.
% Effective extraction χ = 0.55 * 1.15 (analytical) * 1.2 (global) = 0.759.
constraint_indexing:constraint_classification(cs_ecmo_bridge, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(cs_ecmo_bridge_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(cs_ecmo_bridge, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(cs_ecmo_bridge, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(tangled_rope_conditions) :-
    % Verify the analytical observer sees a tangled_rope.
    constraint_indexing:constraint_classification(cs_ecmo_bridge, tangled_rope, context(agent_power(analytical), _, _, _)),
    % And that the structural conditions are met.
    domain_priors:requires_active_enforcement(cs_ecmo_bridge),
    narrative_ontology:constraint_beneficiary(cs_ecmo_bridge, _),
    narrative_ontology:constraint_victim(cs_ecmo_bridge, _).

test(high_extraction_base) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(cs_ecmo_bridge, ExtMetricName, E),
    E >= 0.46. % Ensures it's high-extraction Snare/Tangled.

:- end_tests(cs_ecmo_bridge_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The ECMO bridge is a classic Tangled Rope. It has a clear, undeniable coordination function: it bridges a patient's biological failure to the availability of a transplant organ, coordinating complex medical resources to save a life. This function is why the hospital (institutional) sees it as a Rope. However, this coordination comes at a massive cost to the patient (powerless), who experiences extreme physical dependency, financial burden, and risk, making it feel like a Snare. The base extractiveness (0.55) reflects this high cost/risk factor, while the moderate suppression (0.30) reflects that while the patient is trapped in their condition, the technology itself is an option, not a mandate. The low theater ratio (0.10) confirms this is a highly functional, non-performative system, making a Piton classification impossible.
 *
 * The analytical perspective, which accounts for both the coordination and the asymmetric extraction, correctly identifies it as a Tangled Rope. This classification is critical because it acknowledges both the life-saving utility and the severe burdens imposed, preventing a simplistic "good" (Rope) or "bad" (Snare) judgment.
 *
 * [RESOLVED MANDATROPHY]
 * The Tangled Rope classification prevents the system from mislabeling the ECMO bridge as a pure Snare. A Snare-only classification would ignore its genuine, life-saving coordination function. By requiring the declaration of a beneficiary, a victim, and active enforcement, the Tangled Rope type correctly models systems that are simultaneously beneficial for one group and extractive for another, which is common in advanced medical technology, finance, and platform economies.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_cs_ecmo_bridge_1,
    'Does the long-term quality of life for survivors justify the immense short-term extraction (cost, risk, suffering)?',
    'Longitudinal studies tracking patient health, quality of life, and survival rates post-transplant against a control group.',
    'If outcomes are poor, the constraint shifts closer to a Snare. If outcomes are excellent, it reinforces the Tangled Rope classification (high extraction for high reward).',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(cs_ecmo_bridge, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection (metric_substitution,
% extraction_accumulation) by providing measurements at multiple time points.
% This models the technology's adoption and cost intensification over time.
% Required for high-extraction constraints (base_extractiveness > 0.46).
%
% Theater ratio over time (remains low as it's a functional system):
narrative_ontology:measurement(cs_ecmo_bridge_tr_t0, cs_ecmo_bridge, theater_ratio, 0, 0.05).
narrative_ontology:measurement(cs_ecmo_bridge_tr_t5, cs_ecmo_bridge, theater_ratio, 5, 0.08).
narrative_ontology:measurement(cs_ecmo_bridge_tr_t10, cs_ecmo_bridge, theater_ratio, 10, 0.10).

% Extraction over time (costs and dependency increase as technology becomes standard):
narrative_ontology:measurement(cs_ecmo_bridge_ex_t0, cs_ecmo_bridge, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(cs_ecmo_bridge_ex_t5, cs_ecmo_bridge, base_extractiveness, 5, 0.53).
narrative_ontology:measurement(cs_ecmo_bridge_ex_t10, cs_ecmo_bridge, base_extractiveness, 10, 0.55).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% This technology is a mechanism for allocating scarce resources (medical
% staff, equipment, and the patient's viability) until another resource
% (a donor organ) becomes available.
narrative_ontology:coordination_type(cs_ecmo_bridge, resource_allocation).

% Boltzmann floor override (only if domain knowledge justifies)
% narrative_ontology:boltzmann_floor_override(cs_ecmo_bridge, 0.0).

% Network relationships (structural influence edges)
% narrative_ontology:affects_constraint(cs_ecmo_bridge, organ_donation_policy).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: cuba_mandatrophic_collapse
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-21
% ============================================================================

:- module(constraint_cuba_mandatrophic_collapse, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: cuba_mandatrophic_collapse
 * human_readable: Cuban Mandatrophy (The GAESA-Infrastructure Divergence)
 * domain: political/economic/technological
 * * SUMMARY:
 * Mandatrophy in Cuba describes the terminal wasting away of national infrastructure and food security caused by the rigid prioritization of the "Military-Tourism Mandate" (GAESA) over the essential "margins" of the civilian state (the energy grid, agriculture, and public health). While the national power grid suffered multiple total collapses in 2024 and 2025 due to zero maintenance, the military conglomerate GAESA continued to extract nearly 40% of state investment into luxury hotel construction.
 * * KEY AGENTS:
 * - GAESA Executive: Beneficiary (Institutional)
 * - Cuban Citizen: Subject (Powerless)
 * - External Analyst: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
% Rationale (Extraction): 0.95. Extreme extraction; GAESA controls 95% of foreign currency transactions and 70% of the economy, yet none of these billions are diverted to fix the failing national power grid.
domain_priors:base_extractiveness(cuba_mandatrophic_collapse, 0.95).
% Rationale (Suppression): 0.85. The "War Economy" declaration suppresses domestic private alternatives, while military presence enforces a "no-protest" constraint.
domain_priors:suppression_score(cuba_mandatrophic_collapse, 0.85).
% Rationale (Theater): 0.10. The extraction is real and functional, not performative. The hotels are built, the money is moved.
domain_priors:theater_ratio(cuba_mandatrophic_collapse, 0.10).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(cuba_mandatrophic_collapse, extractiveness, 0.95).
narrative_ontology:constraint_metric(cuba_mandatrophic_collapse, suppression_requirement, 0.85).
narrative_ontology:constraint_metric(cuba_mandatrophic_collapse, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% The state claims this is a necessary structure for economic survival (enforcement/coordination).
narrative_ontology:constraint_claim(cuba_mandatrophic_collapse, enforcement).

% Binary flags
% Requires heavy active enforcement (CIMEX dollar-stores, military oversight of finance, and police crackdowns).
domain_priors:requires_active_enforcement(cuba_mandatrophic_collapse).

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(cuba_mandatrophic_collapse, gaesa_military_elite).
narrative_ontology:constraint_beneficiary(cuba_mandatrophic_collapse, hotel_construction_sector).
narrative_ontology:constraint_victim(cuba_mandatrophic_collapse, national_electrical_union_une).
narrative_ontology:constraint_victim(cuba_mandatrophic_collapse, cuban_agricultural_producers).
narrative_ontology:constraint_victim(cuba_mandatrophic_collapse, general_population).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE CUBAN CITIZEN (SNARE)
% For the citizen, Mandatrophy is a Snare. The regime's "Mandate" (preserving
% the military-run tourism empire) has extracted their electricity,
% medicine, and food rations. Every peso they earn is "choked" by inflation.
constraint_indexing:constraint_classification(cuba_mandatrophic_collapse, snare,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE GAESA EXECUTIVE (ROPE)
% GAESA views its conglomerate as a Rope—a functional coordination mechanism
% to capture hard currency in an era of sanctions. They see the "extraction"
% of domestic resources into hotel towers as a necessary strategic
% investment to eventually "save" the economy through tourism.
constraint_indexing:constraint_classification(cuba_mandatrophic_collapse, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (SNARE)
% The analytical observer sees a classic Snare. The high base extraction (0.95)
% and suppression (0.85) combined with active enforcement and the existence of
% viable, suppressed alternatives (e.g., agricultural reform, grid maintenance)
% confirm a system of pure extraction, despite its coordination claims.
constraint_indexing:constraint_classification(cuba_mandatrophic_collapse, snare,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(cuba_mandatrophic_collapse_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(cuba_mandatrophic_collapse, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(cuba_mandatrophic_collapse, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(snare_threshold_validation) :-
    % Verify the constraint meets the numerical signature of a Snare.
    config:param(extractiveness_metric_name, ExtMetricName),
    config:param(suppression_metric_name, SuppMetricName),
    narrative_ontology:constraint_metric(cuba_mandatrophic_collapse, ExtMetricName, E),
    narrative_ontology:constraint_metric(cuba_mandatrophic_collapse, SuppMetricName, S),
    E >= 0.46,
    S >= 0.60.

:- end_tests(cuba_mandatrophic_collapse_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The core of this constraint is the extreme divergence between the institutional and powerless perspectives, making it a canonical example of a high-extraction system. The extraction score of 0.95 is justified by GAESA's near-total control over the foreign currency economy, which it uses for its own projects while essential national infrastructure like the power grid collapses. The suppression score of 0.85 reflects the state's "War Economy" declaration and active suppression of protest and private enterprise.
 *
 * PERSPECTIVAL GAP:
 * The GAESA executive sees a Rope: a necessary tool to coordinate the capture of dollars for national survival. The citizen experiences a Snare: a trap that extracts their livelihood, energy, and food to fund projects they will never benefit from. The analytical view confirms the citizen's experience; the metrics point unequivocally to a Snare. The grid engineer's perspective of a "Mountain" (physical collapse) is the *result* of the Snare's long-term operation.
 *
 * [RESOLVED MANDATROPHY]: The system is correctly identified as a Snare from the analytical perspective due to its extreme extraction and suppression metrics, preventing misclassification as a necessary evil or an unchangeable Mountain.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_cuba_mandatrophic_collapse,
    "Does GAESA actually hold $14-18B in liquid reserves, or is this an accounting Mountain used to maintain the illusion of solvency?",
    "Audit of offshore BFI (Banco Financiero Internacional) transactions and GAESA's internal 'dollar gravity' ledgers.",
    "If reserves are real: Mandatrophy is a conscious policy choice (Snare). If reserves are fictional: The entire state is an insolvent Piton approaching a Mountain of collapse.",
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(cuba_mandatrophic_collapse, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This constraint intensified significantly after the 2021 monetary reforms,
% leading to the grid collapses of 2024-2025. The data models this
% accelerating extraction. Theater ratio remains low as the extraction is functional.

% Theater ratio over time (metric_substitution detection):
narrative_ontology:measurement(cmc_tr_t0, cuba_mandatrophic_collapse, theater_ratio, 0, 0.05).
narrative_ontology:measurement(cmc_tr_t5, cuba_mandatrophic_collapse, theater_ratio, 5, 0.08).
narrative_ontology:measurement(cmc_tr_t10, cuba_mandatrophic_collapse, theater_ratio, 10, 0.10).

% Extraction over time (extraction_accumulation detection):
narrative_ontology:measurement(cmc_ex_t0, cuba_mandatrophic_collapse, base_extractiveness, 0, 0.75).
narrative_ontology:measurement(cmc_ex_t5, cuba_mandatrophic_collapse, base_extractiveness, 5, 0.85).
narrative_ontology:measurement(cmc_ex_t10, cuba_mandatrophic_collapse, base_extractiveness, 10, 0.95).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% GAESA's function is a form of centralized, coercive resource allocation.
narrative_ontology:coordination_type(cuba_mandatrophic_collapse, resource_allocation).

% This constraint is structurally dependent on the inflow of foreign currency
% from family remittances, which it then extracts.
narrative_ontology:affects_constraint(cuba_remittance_dependency, cuba_mandatrophic_collapse).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: cuban_missile_crisis_excomm_deliberation
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Cuban Missile Crisis 1962 (Declassified Records/ExComm Transcripts)
% ============================================================================

:- module(constraint_cuban_missile_crisis, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: cuban_missile_crisis_excomm_deliberation
 * human_readable: The ExComm Multi-Channel Deliberation Protocol
 * domain: political/military
 * temporal_scope: October 16–28, 1962
 * spatial_scope: Global (US-USSR-Cuba)
 * * SUMMARY:
 * Following the failure of the Bay of Pigs, President Kennedy established 
 * the Executive Committee of the National Security Council (ExComm). This 
 * constraint functioned as a deliberate "anti-silo" mechanism, forcing 
 * decision-makers to weigh multiple competing options—primarily a 
 * naval blockade (quarantine) vs. a direct air strike—under the 
 * existential constraint of Nuclear Mutually Assured Destruction (MAD) 
 *.
 * * KEY AGENTS:
 * - The Hawks (JCS/LeMay): Proponents of a surgical air strike and 
 * invasion.
 * - The Doves (Robert Kennedy/McNamara): Proponents of the naval blockade 
 * as a "Rope" for de-escalation.
 * - Analytical Observer (The Historian): Evaluates the efficacy of the 
 * ExComm protocol in avoiding nuclear escalation.
 * * NARRATIVE ARC:
 * The discovery of Soviet missiles in Cuba initially appeared as a 
 * Mountain (an unchangeable threat requiring immediate force). Through the 
 * ExComm protocol, this was reframed as a Rope (a coordination problem 
 * requiring a blockade and diplomatic back-channels), successfully 
 * avoiding the Snare of a global thermonuclear exchange.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for [STEP 1] and [STEP 2] of the DR-Audit Suite
narrative_ontology:interval(thirteen_days_crisis, 0, 10).
narrative_ontology:constraint_claim(cuban_missile_crisis_excomm_deliberation, rope).

% Base extractiveness score (0.0 = no extraction, 1.0 = full extraction)
% Rationale: Low (0.2). Unlike the Bay of Pigs, the ExComm process was 
% designed to protect the collective interest of global survival rather 
% than institutional prestige.
domain_priors:base_extractiveness(cuban_missile_crisis_excomm_deliberation, 0.2).

% Suppression score (0.0 = no suppression, 1.0 = full suppression)
% Rationale: Low (0.15). The protocol explicitly encouraged the airing 
% of conflicting viewpoints and dissent to avoid groupthink.
domain_priors:suppression_score(cuban_missile_crisis_excomm_deliberation, 0.15).

% Enforcement requirements
% Requires active enforcement (JFK intentionally removed himself from 
% some meetings to allow for candid discussion).
domain_priors:requires_active_enforcement(cuban_missile_crisis_excomm_deliberation).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(cuban_missile_crisis_excomm_deliberation, global_population).
constraint_beneficiary(cuban_missile_crisis_excomm_deliberation, diplomatic_stability).
constraint_victim(cuban_missile_crisis_excomm_deliberation, castro_regime_autonomy).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE JOINT CHIEFS (The Hawks) - Mountain
   --------------------------------------------------------------------------
   
   WHO: institutional - Military leadership with a rigid doctrine of force.
   WHEN: immediate - Focused on the closing window for a pre-emptive strike.
   WHERE: trapped - View themselves as bound by the military necessity to 
         remove the missile threat immediately.
   SCOPE: continental - Primary focus on the defense of the US mainland.
   
   WHY THIS CLASSIFICATION:
   The Chiefs viewed the missiles as an unchangeable military fact (Mountain). 
   To them, the only "natural" response was physical removal through force, 
   viewing any delay as a failure to adhere to the laws of war.
   
   NARRATIVE EVIDENCE:
   General LeMay argued that the blockade was "weak" and that a military 
   strike was the only way to resolve the crisis effectively.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    cuban_missile_crisis_excomm_deliberation,
    mountain,
    context(
        agent_power(institutional),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(national)
    )
) :-
    domain_priors:requires_active_enforcement(cuban_missile_crisis_excomm_deliberation),
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: ROBERT KENNEDY/MCNAMARA (The Doves) - Rope
   --------------------------------------------------------------------------
   
   WHO: powerful - Strategic advisors to the President.
   WHEN: biographical - Understanding the weight of history and presidential legacy.
   WHERE: mobile - Actively seeking alternatives like the blockade/quarantine.
   SCOPE: global - Managing the risk of total nuclear escalation.
   
   WHY THIS CLASSIFICATION:
   For RFK and McNamara, the ExComm process and the blockade were a 
   Rope—a coordination mechanism that allowed for communication and 
   signaling to Khrushchev without immediate bloodshed.
   
   NARRATIVE EVIDENCE:
   Robert Kennedy emphasized that "an air strike would be a Pearl Harbor 
   in reverse," framing the decision as a choice of coordination/morality 
   over raw force.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    cuban_missile_crisis_excomm_deliberation,
    rope,
    context(
        agent_power(powerful),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :-
    domain_priors:suppression_score(cuban_missile_crisis_excomm_deliberation, S),
    S < 0.3,
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: POST-COLD WAR ANALYST - Analytical
   --------------------------------------------------------------------------
   
   WHO: analytical - Outside observer examining declassified transcripts.
   WHEN: historical - Evaluating the crisis in the context of the 20th century.
   WHERE: analytical - Free from the life-and-death pressures of 1962.
   SCOPE: global - Analyzing the long-term impact on arms control.
   
   WHY THIS CLASSIFICATION:
   From a safe distance, the ExComm is seen as an ideal Rope—a system 
   designed to prevent the "Snare" of a binary choice (Total Surrender vs. 
   Total War) by creating a middle-path mechanism for de-escalation.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    cuban_missile_crisis_excomm_deliberation,
    rope,
    context(
        agent_power(analytical),
        time_horizon(historical),
        exit_options(analytical),
        spatial_scope(global)
    )
) :-
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE GLOBAL CIVILIAN (SUBJECT) - Snare
   --------------------------------------------------------------------------
   WHO: powerless - The billions of subjects with no agency in the room.
   WHEN: immediate - The "Thirteen Days" where every second is a potential end.
   WHERE: trapped - No exit from the reach of global thermonuclear war.
   SCOPE: global - The stakes encompass the entire biosphere.
   
   WHY THIS CLASSIFICATION:
   The "Snare" is the state of nuclear brinkmanship. While EXCOMM uses 
   deliberation as a Rope to pull back from the edge, the individual subject 
   feels the Snare tightening. For them, this is not "coordination" but a 
   passive wait for an existential verdict. The stakes (0.95) and 
   suppression of agency (0.9) create the ultimate structural trap.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    cuban_missile_crisis_excomm_delibration,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(global)
    )
) :-
    domain_priors:base_extractiveness(cuban_missile_crisis_excomm_delibration, E),
    E > 0.8,
    !.

% Explicit priors reflecting the existential stakes for the powerless subject.
domain_priors:base_extractiveness(cuban_missile_crisis_excomm_delibration, 0.9).
domain_priors:suppression_score(cuban_missile_crisis_excomm_delibration, 0.9).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(cuban_missile_crisis_excomm_deliberation, extractiveness, 0.2).
narrative_ontology:constraint_metric(cuban_missile_crisis_excomm_deliberation, suppression_requirement, 0.15).

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(cuban_missile_crisis_tests).

test(multi_perspective_differentiation) :-
    constraint_indexing:constraint_classification(cuban_missile_crisis_excomm_deliberation, T1, context(institutional, immediate, trapped, national)),
    constraint_indexing:constraint_classification(cuban_missile_crisis_excomm_deliberation, T2, context(powerful, biographical, mobile, global)),
    T1 \= T2.

test(low_suppression_verification) :-
    domain_priors:suppression_score(cuban_missile_crisis_excomm_deliberation, S),
    S < 0.2.

:- end_tests(cuban_missile_crisis_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * * KEY DECISIONS MADE BY MODEL:
 * 1. CLASSIFICATION: Labeled as 'Rope' because the ExComm was specifically 
 * created to provide options and coordination where none seemed to exist.
 * 2. SUPPRESSION SCORE (0.15): I chose a very low score to highlight that 
 * the success of the crisis management relied on the *lack* of suppression. 
 * Contrast this with the Bay of Pigs (0.8 suppression).
 */

omega_variable(
    soviet_intent_omega,
    "Would Khrushchev have actually launched if a 'surgical' air strike had occurred?",
    resolution_mechanism("Cross-referencing declassified Politburo minutes with field-level operational orders"),
    impact("If Yes: The ExComm was the only Rope that worked. If No: The Hawks' Mountain was an illusion."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Surgical Air Strike
 * Viability: Highly viable and preferred by the military; could have 
 * physically removed the threat but risked total war.
 * Suppression: Actively debated but rejected by JFK after evaluating 
 * the long-term risks.
 * * CONCLUSION:
 * Unlike the Bay of Pigs, where alternatives were hidden, here they 
 * were interrogated. This transparency is what keeps the ExComm in 
 * the 'Rope' category rather than 'Snare' or 'Mountain'.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% 1. Load: ?- [cuban_missile_crisis_excomm_deliberation].
% 2. Report: ?- multi_index_report(cuban_missile_crisis_excomm_deliberation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */


% --- v3.1 Indexical Relativity Stubs (Fleet Repair) ---
constraint_indexing:constraint_classification(cuban_missile_crisis_excomm_delibration, mountain, agent_power(analytical)).
constraint_indexing:constraint_classification(cuban_missile_crisis_excomm_delibration, rope, agent_power(institutional)).
% ============================================================================
% CONSTRAINT STORY: cultural_refragmentation_2026
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2026-02-05
% ============================================================================

:- module(constraint_cultural_refragmentation_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: cultural_refragmentation_2026
 * human_readable: The Re-Fragmentation Snare (Interesting Times)
 * domain: social/political
 * * SUMMARY:
 * Society is transitioning from a period of consolidation and conformity into a 
 * state of re-fragmentation and heterogeneity. This creates a constraint where 
 * individuals, seeking stability in chaos, cling to tribal identities and 
 * authoritarian "causes," resulting in a low tolerance for ambiguity and a 
 * high extraction of social cohesion.
 * * KEY AGENTS:
 * - Individual Seekers (Legacy Demographics): Subject (Powerless)
 * - Tribal/Authoritarian Movements: Beneficiary (Institutional)
 * - Narrative Engineers ("Tiny slivers of irritation"): Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Extraction is high (0.72). Tribalism extracts individual agency and social 
% peace to maintain the "cause" of the collective identity.
domain_priors:base_extractiveness(cultural_refragmentation_2026, 0.72). 

% Suppression is high (0.85). The "low tolerance for difference and 
% opposing world views" suppresses nuance and heterodox thinking.
domain_priors:suppression_score(cultural_refragmentation_2026, 0.85).   

% Theater ratio is high (0.78). The "focus on identity" is often a 
% theatrical proxy used to mask the underlying chaos of re-fragmentation.
domain_priors:theater_ratio(cultural_refragmentation_2026, 0.78).       

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(cultural_refragmentation_2026, extractiveness, 0.72).
narrative_ontology:constraint_metric(cultural_refragmentation_2026, suppression_requirement, 0.85).
narrative_ontology:constraint_metric(cultural_refragmentation_2026, theater_ratio, 0.78).

% Primary keys for the classification engine
% High-extraction stakeholders
narrative_ontology:constraint_beneficiary(cultural_refragmentation_2026, authoritarian_tribalism).
narrative_ontology:constraint_victim(cultural_refragmentation_2026, social_nuance).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For those trying to maintain "sanity" in the chaos, the environment is a 
% Snare: a predatory trap where they must "fit in" to avoid ostracization.
constraint_indexing:constraint_classification(cultural_refragmentation_2026, snare, 
    context(agent_power(powerless), 
            time_horizon(biographical), 
            exit_options(trapped), 
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Tribal leaders view re-fragmentation as a Rope: a coordination tool to 
% organize their base and protect their specific worldviews.
constraint_indexing:constraint_classification(cultural_refragmentation_2026, rope, 
    context(agent_power(institutional), 
            time_horizon(generational), 
            exit_options(mobile), 
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (PITON)
% Analysts view the current "Identity Focus" as a Piton: an inertial, 
% theatrical maintenance of a non-functional social order.
constraint_indexing:constraint_classification(cultural_refragmentation_2026, piton, 
    context(agent_power(analytical), 
            time_horizon(civilizational), 
            exit_options(arbitrage), 
            spatial_scope(universal))) :-
    domain_priors:theater_ratio(cultural_refragmentation_2026, TR), TR > 0.70.

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(cultural_refragmentation_2026_tests).

test(perspectival_gap) :-
    constraint_indexing:constraint_classification(cultural_refragmentation_2026, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(cultural_refragmentation_2026, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(piton_threshold) :-
    domain_priors:theater_ratio(cultural_refragmentation_2026, TR),
    TR >= 0.70.

:- end_tests(cultural_refragmentation_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The extraction score (0.72) is high because the "clinging to ideas" 
 * and "forming tribes" represents a massive drain on civilizational 
 * tolerance. The Theater Ratio (0.78) identifies the "Causes" and 
 * "Identity focus" as performative masks for the deeper structural decay 
 * of the previous conformity era.
 *
 * * MANDATROPHY ANALYSIS:
 * [RESOLVED MANDATROPHY]
 * The system classifies the observer perspective as a Piton to distinguish 
 * the inertial "noise" of modern identity politics from the functional 
 * "coordination" required for a heterogeneous society.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_local_tolerance,
    'Can "local love" (starting with family) scale into a heterogeneous Rope?',
    'Analysis of cross-tribal collaboration in decentralized local communities.',
    'Success converts the Snare into a new Rope; Failure leads to authoritarian decay.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(cultural_refragmentation_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Modeling the drift from the Consolidation Era (T=0) to Interesting Times (T=10).
% Theater ratio rises as performative "causes" replace functional social dialogue.
narrative_ontology:measurement(frag_tr_t0, cultural_refragmentation_2026, theater_ratio, 0, 0.15).
narrative_ontology:measurement(frag_tr_t5, cultural_refragmentation_2026, theater_ratio, 5, 0.45).
narrative_ontology:measurement(frag_tr_t10, cultural_refragmentation_2026, theater_ratio, 10, 0.78).

% Extraction rises as tribes form and tolerance for difference drops.
narrative_ontology:measurement(frag_ex_t0, cultural_refragmentation_2026, base_extractiveness, 0, 0.10).
narrative_ontology:measurement(frag_ex_t5, cultural_refragmentation_2026, base_extractiveness, 5, 0.40).
narrative_ontology:measurement(frag_ex_t10, cultural_refragmentation_2026, base_extractiveness, 10, 0.72).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: cuny_light_2026
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2026-02-06
% ============================================================================

:- module(constraint_optical_coordination, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: cuny_light_2026
 * human_readable: Metasurface Light Steering (CUNY ASRC)
 * domain: technology/physics
 * * SUMMARY:
 * A paper-thin metasurface chip that steers light without mechanical motion. 
 * This technological breakthrough functions as a "Rope," providing a low-friction 
 * coordination mechanism for optical communications and LiDAR systems, 
 * bypassing the mechanical and bureaucratic "Tangled Ropes" of older systems.
 * * KEY AGENTS:
 * - Researchers/Engineers: Subject (Moderate) - Implementing high-efficiency logic.
 * - Humanity/Civilization: Beneficiary (Institutional) - Gaining frictionless communication.
 * - NASA/Perseverance: Analogous Agent - Demonstrating AI-autonomous coordination.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
% Low extraction and suppression identify this as a "Rope."
domain_priors:base_extractiveness(cuny_light_2026, 0.05).
domain_priors:suppression_score(cuny_light_2026, 0.02).
domain_priors:theater_ratio(cuny_light_2026, 0.15).

% Primary keys for classification engine
narrative_ontology:constraint_metric(cuny_light_2026, extractiveness, 0.05).
narrative_ontology:constraint_metric(cuny_light_2026, suppression_requirement, 0.02).
narrative_ontology:constraint_metric(cuny_light_2026, theater_ratio, 0.15).

% Rope Structural Property Declarations
% Coordination function is established by identifying the civilizational beneficiary.
narrative_ontology:constraint_beneficiary(cuny_light_2026, scientific_community).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE INSTITUTIONAL ADOPTER (ROPE)
% Effective Extraction: 0.05 * -0.2 (institutional) * 1.2 (global) = -0.012.
% Viewed as an essential efficiency gain for global infrastructure.
constraint_indexing:constraint_classification(cuny_light_2026, rope, 
    context(agent_power(institutional), 
            time_horizon(civilizational), 
            exit_options(mobile), 
            spatial_scope(global))).

% PERSPECTIVE 2: THE POWERLESS OBSERVER (ROPE)
% Effective Extraction: 0.05 * 1.5 (powerless) * 1.2 (global) = 0.09.
% χ < 0.10 for a low-E constraint maintains the Rope classification.
constraint_indexing:constraint_classification(cuny_light_2026, rope, 
    context(agent_power(powerless), 
            time_horizon(generational), 
            exit_options(analytical), 
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(optical_coordination_tests).

test(rope_integrity) :-
    % Ropes must have low extraction and low suppression.
    narrative_ontology:constraint_metric(cuny_light_2026, extractiveness, E),
    E =< 0.05,
    domain_priors:suppression_score(cuny_light_2026, S),
    S < 0.10.

test(beneficiary_exists) :-
    % Canonical classifier requires a beneficiary for coordination categories.
    narrative_ontology:constraint_beneficiary(cuny_light_2026, _).

:- end_tests(optical_coordination_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The CUNY metasurface is a high-utility, low-extraction constraint. It 
 * effectively solves the problem of "mechanical friction" in light steering, 
 * which previously required bulkier, more expensive, and less reliable systems. 
 * By reducing the base extraction to 0.05 and the suppression to 0.02, the 
 * technology provides a voluntary "Rope" that agents can use to coordinate 
 * wireless data, medical imaging, and autonomous navigation.
 *
 * AUTONOMOUS ANALOGY:
 * NASA’s Perseverance rover drive (Feb 6, 2026) illustrates the same transition: 
 * moving from high-theater human oversight (a Tangled Rope) to low-extraction 
 * AI-planned coordination (a Rope).
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_metasurface_scaling,
    'Will manufacturing complexities introduce new institutional Snares?',
    'Monitoring of semiconductor yield data for large-scale metasurfaces in 2027.',
    'Success maintains the Rope; failure may require an extractive Scaffold for subsidies.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(cuny_light_2026, 0, 20).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Modeling the drift toward even lower extraction as technology matures.
narrative_ontology:measurement(oc_tr_t0, cuny_light_2026, theater_ratio, 0, 0.15).
narrative_ontology:measurement(oc_tr_t10, cuny_light_2026, theater_ratio, 10, 0.12).
narrative_ontology:measurement(oc_tr_t20, cuny_light_2026, theater_ratio, 20, 0.10).

narrative_ontology:measurement(oc_be_t0, cuny_light_2026, base_extractiveness, 0, 0.05).
narrative_ontology:measurement(oc_be_t10, cuny_light_2026, base_extractiveness, 10, 0.04).
narrative_ontology:measurement(oc_be_t20, cuny_light_2026, base_extractiveness, 20, 0.03).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: currys_paradox
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Logic / Epistemology / Curry's Paradox
% ============================================================================

:- module(constraint_currys_paradox, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    constraint_indexing:constraint_classification/3,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:constraint_metric/3,
    constraint_beneficiary/2,
    constraint_victim/2.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: currys_paradox
 * human_readable: Curry's Paradox
 * domain: analytical/logic/mathematics
 * temporal_scope: Permanent (Historical to Civilizational)
 * spatial_scope: Universal (Formal Systems)
 * * SUMMARY:
 * Curry's Paradox is a logical "trap" that proves any arbitrary claim 
 * (e.g., "The moon is made of cheese") using a self-referential sentence of 
 * the form "If this sentence is true, then X is true." Unlike the Liar 
 * Paradox, it does not require negation, making it a more fundamental threat 
 * to naive set theory and unrestricted comprehension.
 * * KEY AGENTS:
 * - The Foundationalist: Attempting to build a system where only "true" things 
 * can be derived.
 * - The System Architect: Designing programming languages or formal logics 
 * that must avoid trivialism (where everything is provable).
 * - The Trivialist: An agent who accepts all propositions (the "victim" of 
 * total systemic collapse).
 * * NARRATIVE ARC:
 * The paradox acts as a structural "No-Go" theorem. It forces formal systems 
 * to either limit self-reference, restrict the rules of implication (like 
 * contraction), or face "explosion," where the system loses all meaning because 
 * it permits every possible statement to be true.
 */

/* ==========================================================================
   2. BASE PROPERTIES (Reality Layer)
   ========================================================================== */

% Required for structural integration
narrative_ontology:interval(currys_paradox_interval, 0, 10).
narrative_ontology:constraint_claim(currys_paradox, snare).

% Base extractiveness: 0.2 (Low-Moderate)
% Rationale: It extracts "meaning" from a system by making it trivial. If a 
% system is trivialized, the value of every true statement is diluted to zero.
domain_priors:base_extractiveness(currys_paradox, 0.2).

% Suppression score: 0.5 (Moderate)
% Rationale: Alternatives that allow both self-reference and standard 
% implication are actively suppressed because they lead to immediate systemic 
% collapse (Explosion).
domain_priors:suppression_score(currys_paradox, 0.5).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(currys_paradox, extractiveness, 0.2).
narrative_ontology:constraint_metric(currys_paradox, suppression_requirement, 0.5).

% Enforcement requirements: Emerges naturally from the interaction of 
% implication, self-reference, and contraction.
domain_priors:emerges_naturally(currys_paradox).

% Metrics for Executive Summary
% Beneficiaries: Paraconsistent Logicians (those who study systems that 
% tolerate contradictions without collapsing).
constraint_beneficiary(currys_paradox, paraconsistent_logicians).

% Victims: Naive System Architects (those whose systems "explode" under 
% simple self-reference).
constraint_victim(currys_paradox, naive_set_theorists).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE MATHEMATICIAN (Institutional) - MOUNTAIN
   --------------------------------------------------------------------------
   
   WHO: Institutional/Analytical power (The gatekeepers of formal proof).
   WHEN: Civilizational (Permanent structural reality).
   WHERE: Trapped (Mathematics cannot "vote" the paradox away).
   SCOPE: Global/Universal.
   
   WHY THIS CLASSIFICATION:
   For the mathematician, the paradox is a Mountain. It is an inherent feature 
   of the landscape of logic. One does not "fix" Curry's Paradox; one builds 
   fences (types, hierarchies) to ensure they never accidentally walk into it.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    currys_paradox,
    mountain,
    context(
        agent_power(institutional),
        time_horizon(civilizational),
        exit_options(trapped),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE PROGRAMMER (Individual Moderate) - ROPE
   --------------------------------------------------------------------------
   
   WHO: Individual Moderate (Builds software using logical rules).
   WHEN: Biographical/Immediate (Focused on the runtime of a system).
   WHERE: Mobile (Can switch languages or type systems).
   SCOPE: Regional (Specific to a language environment).
   
   WHY THIS CLASSIFICATION:
   To a programmer, the paradox is a Rope. It is a tool for understanding the 
   risks of recursion and untyped lambdas. It is a coordination mechanism 
   that helps them design safer compilers. If a specific logic is "Curry-unstable," 
   they simply exit to a different language.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    currys_paradox,
    rope,
    context(
        agent_power(individual_moderate),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(regional)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE LOGICAL REFORMER (Individual Powerless) - SNARE
   --------------------------------------------------------------------------
   
   WHO: Individual Powerless (Trying to propose new logical foundations).
   WHEN: Historical.
   WHERE: Constrained (By the "Explosion Principle").
   SCOPE: National (Within the academic discipline).
   
   WHY THIS CLASSIFICATION:
   For a reformer who wants to allow natural language's "unrestricted 
   comprehension," Curry's Paradox is a Snare. It is the "threat" used by the 
   establishment to shut down more flexible logics. "If you allow that rule," 
   they say, "the Snare tightens and your entire system explodes into triviality."
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    currys_paradox,
    snare,
    context(
        agent_power(powerless),
        time_horizon(historical),
        exit_options(constrained),
        spatial_scope(national)
    )
) :- !.

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(currys_paradox_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(currys_paradox, Type1, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(currys_paradox, Type2, context(agent_power(individual_moderate), _, _, _)),
    constraint_indexing:constraint_classification(currys_paradox, Type3, context(agent_power(powerless), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3.

test(power_extractiveness_scaling) :-
    % For a powerless reformer, the "explosion" (extraction of meaning) is total.
    % For a powerful institution, they've already mitigated it.
    ContextPowerless = context(powerless, historical, constrained, national),
    ContextPowerful = context(institutional, civilizational, trapped, global),
    domain_priors:base_extractiveness(currys_paradox, Score),
    Score > 0.0.

test(time_immutability) :-
    % Long-term civilizational view = Mountain (immutable)
    constraint_indexing:constraint_classification(currys_paradox, mountain, context(_, civilizational, _, _)).

:- end_tests(currys_paradox_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * * KEY DECISIONS:
 * * 1. EXTRACTIVENESS (0.2): Chose a low-moderate score. While it doesn't 
 * extract labor, it extracts "information utility" by rendering a 
 * system useless if triggered.
 * * 2. SUPPRESSION (0.5): This is higher than the Liar Paradox because the 
 * logical community is very aggressive about suppressing systems that 
 * cannot handle Curry, as "Explosion" is seen as the death of logic.
 * * 3. SNARE SELECTION: The "Snare" classification arises from the way 
 * the paradox is used to gatekeep which logics are "respectable."
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω)
   ========================================================================== */

omega_variable(
    relevance_logic_viability,
    "Can 'Relevance Logic' (which rejects contraction) be a stable foundation for human-AI coordination?",
    resolution_mechanism("Development and large-scale deployment of a relevance-based theorem prover"),
    impact("If Yes: Curry's Paradox moves from Mountain to Rope (optional tool). If No: It remains a Mountain."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Rejecting 'Contraction' (Relevance Logic)
 * Viability: High in niche logic, Low in mainstream math.
 * Suppression: High. Most mathematicians view the rule (A -> (A -> B)) |- (A -> B) 
 * as "natural law."
 * * ALTERNATIVE 2: Fixed-point hierarchies (Tarski-style)
 * Viability: High. The standard way to avoid the paradox.
 * Suppression: Low (it is the dominant paradigm).
 * * CONCLUSION:
 * Because Alternatives exist (like rejecting contraction) but are cognitively 
 * suppressed by the "intuitive" nature of standard implication, the paradox 
 * often functions as a Snare for alternative logical architectures.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * * 1. Load: ?- [constraint_currys_paradox].
 * 2. Run multi-perspective report: ?- constraint_indexing:multi_index_report(currys_paradox).
 * 3. Run tests: ?- run_tests(currys_paradox_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: cz_plea_agreement_2026
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_cz_plea, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: cz_plea_agreement_2026
 * human_readable: CZ and Binance Global Regulatory Settlement
 * domain: economic/political/legal
 * * SUMMARY:
 * This constraint represents the 2023 plea deal where Changpeng Zhao (CZ) pleaded
 * guilty to failing to maintain an effective AML program.
 * It indicates a structural "exit" from the US market for Binance, a multi-billion
 * dollar extraction from the entity, and a lifetime industry ban (later modified
 * by a 2025 pardon).
 * * KEY AGENTS:
 * - [Changpeng Zhao & Binance]: Subject (Powerless/Trapped) - Barred from leadership and
 * fined $4.3B (entity) + $50M (personal).
 * - [US DOJ/FinCEN/CFTC]: Beneficiary (Institutional) - Secured one of the
 * largest corporate resolutions ($4.3B).
 * - [Independent Monitor]: Auditor (Analytical) - Five-year oversight of
 * operations.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Extremely high extraction (0.85) due to the $4.3B penalty and permanent loss of CEO role.
domain_priors:base_extractiveness(cz_plea_agreement_2026, 0.85).

% High suppression (0.78); the agreement mandates a "complete exit from the United States".
domain_priors:suppression_score(cz_plea_agreement_2026, 0.78).

% Low theater (0.25); the monitorship and massive payouts are functional, non-performative limits.
domain_priors:theater_ratio(cz_plea_agreement_2026, 0.25).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(cz_plea_agreement_2026, extractiveness, 0.85).
narrative_ontology:constraint_metric(cz_plea_agreement_2026, suppression_requirement, 0.78).
narrative_ontology:constraint_metric(cz_plea_agreement_2026, theater_ratio, 0.25).

% Constraint self-claim: The plea deal is an enforcement action claiming to coordinate AML standards.
narrative_ontology:constraint_claim(cz_plea_agreement_2026, enforcement).

% Binary flags
domain_priors:requires_active_enforcement(cz_plea_agreement_2026). % Required for Tangled Rope

% Structural property derivation hooks:
% These are required for Tangled Rope classification.
narrative_ontology:constraint_beneficiary(cz_plea_agreement_2026, us_regulatory_agencies).
narrative_ontology:constraint_victim(cz_plea_agreement_2026, binance_and_founder).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For CZ, the plea is a snare: he is "trapped" into a $50M personal fine and
% barred from his life's work at Binance.
constraint_indexing:constraint_classification(cz_plea_agreement_2026, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(global))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For US Regulators, the deal is a rope: it coordinates global AML standards
% and forces one of the largest players into the "regulated rails".
constraint_indexing:constraint_classification(cz_plea_agreement_2026, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Observers detect a hybrid: it stabilizes the market (coordination) but
% functions as an asymmetric extraction of wealth from offshore to onshore.
constraint_indexing:constraint_classification(cz_plea_agreement_2026, tangled_rope,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(cz_plea_tests).

test(perspectival_gap) :-
    % Verify the Subject (CZ) feels a Snare, while the State views it as a Rope.
    constraint_indexing:constraint_classification(cz_plea_agreement_2026, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(cz_plea_agreement_2026, rope, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(cz_plea_agreement_2026, tangled_rope, context(agent_power(analytical), _, _, _)).

test(extraction_threshold) :-
    domain_priors:base_extractiveness(cz_plea_agreement_2026, E),
    E > 0.46. % Triggers high-extraction requirements.

test(tangled_rope_structural_properties) :-
    % Verify all three required properties for Tangled Rope are present.
    domain_priors:requires_active_enforcement(cz_plea_agreement_2026),
    narrative_ontology:constraint_beneficiary(cz_plea_agreement_2026, _),
    narrative_ontology:constraint_victim(cz_plea_agreement_2026, _).

:- end_tests(cz_plea_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The extraction score (0.85) is extreme due to the $4.3 billion entity-level
 * penalty combined with CZ's personal $50M fine and forced resignation.
 * The Perspectival Gap highlights that while the state sees "legal coordination,"
 * the founder experiences the dismantling of his leadership (Snare).
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The Tangled Rope classification prevents viewing this as purely punitive;
 * it acknowledges the genuine coordination function (creating "regulated rails"
 * for the 2026 crypto "Super-Cycle" by removing ambiguity) while also
 * correctly identifying the massive asymmetric extraction involved. This resolves
 * the mandatrophy by not misclassifying a hybrid as a pure Snare.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_pardon_stability,
    'Does the 2025 Presidential Pardon nullify the "Snare" or merely relocate it?',
    'Analysis of CZs 2026 Davos advisory work vs. ongoing monitorship restrictions.',
    'If leadership returns, it was a Scaffold; if ban remains in spirit, it is a Snare.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(cz_plea_agreement_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Model the interval from the 2023 Plea (T=0) to the 2026 Post-Pardon era (T=10).
% Required for high-extraction constraints (base_extractiveness > 0.46).

% Theater ratio: Drops as performative "growth at all costs" is replaced
% by functional, monitored compliance.
narrative_ontology:measurement(cz_tr_t0, cz_plea_agreement_2026, theater_ratio, 0, 0.65).
narrative_ontology:measurement(cz_tr_t5, cz_plea_agreement_2026, theater_ratio, 5, 0.40).
narrative_ontology:measurement(cz_tr_t10, cz_plea_agreement_2026, theater_ratio, 10, 0.25).

% Extraction: Peaks at settlement (T=0) and stabilizes as legal fees
% and fines are paid out.
narrative_ontology:measurement(cz_ex_t0, cz_plea_agreement_2026, base_extractiveness, 0, 0.95).
narrative_ontology:measurement(cz_ex_t5, cz_plea_agreement_2026, base_extractiveness, 5, 0.88).
narrative_ontology:measurement(cz_ex_t10, cz_plea_agreement_2026, base_extractiveness, 10, 0.85).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The plea deal is a form of regulatory enforcement.
narrative_ontology:coordination_type(cz_plea_agreement_2026, enforcement_mechanism).

% Boltzmann floor override (only if domain knowledge justifies)
% narrative_ontology:boltzmann_floor_override(cz_plea_agreement_2026, 0.1).

% Network relationships (structural influence edges)
% narrative_ontology:affects_constraint(cz_plea_agreement_2026, other_constraint_id).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */