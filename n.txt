% ============================================================================
% CONSTRAINT STORY: narcissistic_ego_maintenance
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2026-02-03
% ============================================================================

:- module(constraint_general_narcissism, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: narcissistic_ego_maintenance
 * human_readable: The Mirror Trap
 * domain: psychological/social
 * * SUMMARY:
 * A relational structure where the subject (The Echo) is compelled to provide 
 * constant narcissistic supply to the beneficiary (The Image). The constraint 
 * functions via emotional extraction and the suppression of the subject's 
 * independent agency to maintain the beneficiary's fragile ego stability.
 * * KEY AGENTS:
 * - The Echo: Subject (Powerless) - Providing emotional labor.
 * - The Image: Beneficiary (Institutional) - The rigid self-construct of the narcissist.
 * - The Biographer: Auditor (Analytical) - Tracking the lifecycle of the "Greatness" narrative.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(narcissistic_ego_maintenance, 0.75). 
domain_priors:suppression_score(narcissistic_ego_maintenance, 0.60).   
domain_priors:theater_ratio(narcissistic_ego_maintenance, 0.85).       

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(narcissistic_ego_maintenance, extractiveness, 0.75).
narrative_ontology:constraint_metric(narcissistic_ego_maintenance, suppression_requirement, 0.6).
narrative_ontology:constraint_metric(narcissistic_ego_maintenance, theater_ratio, 0.85).

% Binary flags
domain_priors:requires_active_enforcement(narcissistic_ego_maintenance).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% High extraction ($E=0.75$) felt as an emotional trap with limited exit.
constraint_indexing:constraint_classification(narcissistic_ego_maintenance, snare, 
    context(agent_power(powerless), 
            time_horizon(biographical), 
            exit_options(trapped), 
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The "Image" views this as necessary infrastructure for internal psychological coherence.
constraint_indexing:constraint_classification(narcissistic_ego_maintenance, rope, 
    context(agent_power(institutional), 
            time_horizon(generational), 
            exit_options(mobile), 
            spatial_scope(regional))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (PITON)
% Detects high theater ($TR=0.85$) sustaining a non-functional social bond.
constraint_indexing:constraint_classification(narcissistic_ego_maintenance, piton, 
    context(agent_power(analytical), 
            time_horizon(historical), 
            exit_options(analytical), 
            spatial_scope(global))) :-
    domain_priors:theater_ratio(narcissistic_ego_maintenance, TR), TR > 0.70.

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(narcissism_tests).

test(perspectival_gap) :-
    % Verify the Subject sees a Snare while the internal System sees a Rope.
    constraint_indexing:constraint_classification(narcissistic_ego_maintenance, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(narcissistic_ego_maintenance, rope, context(agent_power(institutional), _, _, _)).

test(extraction_threshold) :-
    domain_priors:base_extractiveness(narcissistic_ego_maintenance, E),

    E >= 0.46.

:- end_tests(narcissism_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The Perspectival Gap exists because the "The Image" perceives the extraction 
 * as a survival requirement (Rope), whereas "The Echo" experiences the 
 * unilateral flow of resources as a predatory trap (Snare). 
 * * [RESOLVED MANDATROPHY]:
 * The high extractiveness ($E=0.75$) is contextualized by the Piton status; 
 * the auditor recognizes that the "social coordination" is purely performative.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_supply_elasticity,
    'What is the true cost to the Subject if the supply is severed?',
    'Longitudinal study of Subject psychological health post-exit.',
    'Determines if the constraint is a Snare (pure extraction) or a Mountain (psychological necessity).',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(narcissistic_ego_maintenance, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Theater ratio over time (The "Idealization" to "Devaluation" drift)
narrative_ontology:measurement(nem_tr_t0, narcissistic_ego_maintenance, theater_ratio, 0, 0.30).
narrative_ontology:measurement(nem_tr_t5, narcissistic_ego_maintenance, theater_ratio, 5, 0.60).
narrative_ontology:measurement(nem_tr_t10, narcissistic_ego_maintenance, theater_ratio, 10, 0.85).

% Extraction over time (Accumulation of emotional debt)
narrative_ontology:measurement(nem_ex_t0, narcissistic_ego_maintenance, base_extractiveness, 0, 0.20).
narrative_ontology:measurement(nem_ex_t5, narcissistic_ego_maintenance, base_extractiveness, 5, 0.50).
narrative_ontology:measurement(nem_ex_t10, narcissistic_ego_maintenance, base_extractiveness, 10, 0.75).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: narrative_engineering_2026
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2026-02-05
% ============================================================================

:- module(constraint_narrative_engineering_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: narrative_engineering_2026
 * human_readable: The Narrative Engineering Stabilization Signal
 * domain: technological/social
 * * SUMMARY:
 * In a post-truth environment characterized by AI-driven manipulation, 
 * Narrative Engineering (Constraint-Based Storytelling) serves as a 
 * "stabilizing signal." By adhering to rigorous structural constraints, 
 * it counters the sensationalist "noise" favored by previous algorithmic 
 * eras, aligning with the February 2026 Google Discover Core Update.
 * * KEY AGENTS:
 * - General Information Consumers: Subject (Powerless)
 * - Narrative Engineers/Architects: Beneficiary (Institutional)
 * - Algorithmic Auditors (Google/Platforms): Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Extraction is low (0.15) because the methodology aims to provide value 
% through clarity rather than rent-seeking.
domain_priors:base_extractiveness(narrative_engineering_2026, 0.15). 

% Suppression is moderate (0.45) as it strictly suppresses sensationalist 
% noise to maintain the signal.
domain_priors:suppression_score(narrative_engineering_2026, 0.45).   

% Theater ratio is near-zero (0.05) as the "Constraint-Based" approach 
% is fundamentally functional and anti-performative.
domain_priors:theater_ratio(narrative_engineering_2026, 0.05).       

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(narrative_engineering_2026, extractiveness, 0.15).
narrative_ontology:constraint_metric(narrative_engineering_2026, suppression_requirement, 0.45).
narrative_ontology:constraint_metric(narrative_engineering_2026, theater_ratio, 0.05).

% Primary keys for the classification engine
% High-fidelity stakeholders
narrative_ontology:constraint_beneficiary(narrative_engineering_2026, epistemic_communities).
narrative_ontology:constraint_victim(narrative_engineering_2026, sensationalist_media_outlets).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (MOUNTAIN)
% For consumers, the structural rigors of Narrative Engineering appear 
% as a Mountain: an immutable physical/logical limit on how information 
% must be formatted to be "true."
constraint_indexing:constraint_classification(narrative_engineering_2026, mountain, 
    context(agent_power(powerless), 
            time_horizon(biographical), 
            exit_options(trapped), 
            spatial_scope(global))).

% PERSPECTIVE 2: THE ARCHITECT (ROPE)
% Narrative Engineers view the methodology as a Rope: essential 
% coordination infrastructure for stabilizing the information environment.
constraint_indexing:constraint_classification(narrative_engineering_2026, rope, 
    context(agent_power(institutional), 
            time_horizon(generational), 
            exit_options(mobile), 
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (SCAFFOLD)
% Analysts view this as a Scaffold: a temporary supportive structure 
% required to bridge the gap until AI-verification becomes native.
constraint_indexing:constraint_classification(narrative_engineering_2026, scaffold,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(global))) :-
    narrative_ontology:has_sunset_clause(narrative_engineering_2026).

% Mandatory sunset clause for the transitional Scaffold
narrative_ontology:has_sunset_clause(narrative_engineering_2026).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(narrative_engineering_2026_tests).

test(low_extraction_validation) :-
    domain_priors:base_extractiveness(narrative_engineering_2026, E),
    E < 0.20.

test(functional_signal) :-
    domain_priors:theater_ratio(narrative_engineering_2026, TR),
    TR < 0.10.

test(perspectival_gap) :-
    constraint_indexing:constraint_classification(narrative_engineering_2026, mountain, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(narrative_engineering_2026, rope, context(agent_power(institutional), _, _, _)).

:- end_tests(narrative_engineering_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The extraction score (0.15) reflects the methodology's intent to serve 
 * as a public good. The near-zero Theater Ratio (0.05) is 
 * essential, as the entire value of Constraint-Based Storytelling lies 
 * in its functional, non-performative nature. It is the antithesis 
 * of the "noise" it seeks to replace.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_narrative_stabilization,
    'Can structural constraints actually resist adversarial AI-driven noise?',
    'Comparative analysis of signal degradation in automatedDiscover feeds.',
    'Success maintains a Rope; failure collapses the system into a Snare.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(narrative_engineering_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Theater ratio remains consistently low as the rigors are strictly enforced.
narrative_ontology:measurement(ne_tr_t0, narrative_engineering_2026, theater_ratio, 0, 0.05).
narrative_ontology:measurement(ne_tr_t5, narrative_engineering_2026, theater_ratio, 5, 0.05).
narrative_ontology:measurement(ne_tr_t10, narrative_engineering_2026, theater_ratio, 10, 0.05).

% Extraction remains low, illustrating the methodology as a non-extractive Rope.
narrative_ontology:measurement(ne_ex_t0, narrative_engineering_2026, base_extractiveness, 0, 0.10).
narrative_ontology:measurement(ne_ex_t5, narrative_engineering_2026, base_extractiveness, 5, 0.12).
narrative_ontology:measurement(ne_ex_t10, narrative_engineering_2026, base_extractiveness, 10, 0.15).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: nasa_faster_better_cheaper
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-27
% ============================================================================

:- module(constraint_nasa_faster_better_cheaper, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: nasa_faster_better_cheaper
 * human_readable: The "Faster, Better, Cheaper" (FBC) Management Paradigm
 * domain: political/economic/technological
 * * SUMMARY:
 * "Faster, Better, Cheaper" (FBC) was a NASA management philosophy from 1992-1999 designed to increase mission frequency and reduce costs by accepting higher technical risk. It constrained engineering behavior by imposing strict, unyielding budget caps and compressed schedules, effectively attempting to optimize all three corners of the traditional management triangle simultaneously. The policy led to notable failures, including the Mars Climate Orbiter and Mars Polar Lander.
 * * KEY AGENTS:
 * - Mission Engineer: Subject (Powerless); forced to cut redundant systems and testing to stay under budget caps.
 * - NASA Administrator (Goldin): Beneficiary (Institutional); the architect of the policy aiming for high-volume scientific output and political capital.
 * - Mishap Investigation Board: Auditor (Analytical); post-mortem body identifying FBC as the cultural root of mission failures.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
% Rationale: High extraction (0.80); FBC "extracted" safety margins, testing budgets, and redundant systems (capital) from missions to produce a higher *number* of launches, even if those launches failed at a higher rate.
domain_priors:base_extractiveness(nasa_faster_better_cheaper, 0.80).
% Rationale: High suppression (0.70); the philosophy actively suppressed traditional "safety-first" engineering alternatives by labeling them as "obsolete," "bureaucratic," or "inefficient."
domain_priors:suppression_score(nasa_faster_better_cheaper, 0.70).
% Rationale: Moderate theater (0.30); while focused on real metrics (launch tempo), the "Better" aspect became performative, prioritizing the appearance of innovation over robust engineering.
domain_priors:theater_ratio(nasa_faster_better_cheaper, 0.30).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(nasa_faster_better_cheaper, extractiveness, 0.80).
narrative_ontology:constraint_metric(nasa_faster_better_cheaper, suppression_requirement, 0.70).
narrative_ontology:constraint_metric(nasa_faster_better_cheaper, theater_ratio, 0.30).

% Constraint self-claim (what does the constraint claim to be?)
% FBC was presented as a pure coordination mechanism for efficiency.
narrative_ontology:constraint_claim(nasa_faster_better_cheaper, coordination).

% Binary flags
% Requires active enforcement via strict budgetary audits and schedule-driven performance reviews.
domain_priors:requires_active_enforcement(nasa_faster_better_cheaper).

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(nasa_faster_better_cheaper, nasa_administration_metrics).
narrative_ontology:constraint_victim(nasa_faster_better_cheaper, mission_success_probability).
narrative_ontology:constraint_victim(nasa_faster_better_cheaper, engineering_safety_margins).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE MISSION ENGINEER (MOUNTAIN)
% For the engineer, the budget cap is a Mountain. It is an unchangeable law
% of the project. If a test is required but not budgeted, it simply does
% not happen. The constraint is treated as an immovable physical limit.
constraint_indexing:constraint_classification(nasa_faster_better_cheaper, mountain,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE NASA ADMINISTRATOR (ROPE)
% Leadership viewed FBC as a Rope—a functional coordination tool to maximize
% scientific return on investment in a post-Cold War budget environment. They
% believed they were "weaving" a more efficient agency.
constraint_indexing:constraint_classification(nasa_faster_better_cheaper, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE MISHAP INVESTIGATION BOARD (SNARE)
% The investigator sees the Snare. The constraint of "Cheaper" extracted
% the safety margin until the mission "choked" on the first unanticipated
% error (like the metric/English unit mismatch). The system guaranteed
% failure by removing the friction required to catch errors.
constraint_indexing:constraint_classification(nasa_faster_better_cheaper, snare,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(nasa_faster_better_cheaper_tests).

test(perspectival_gap) :-
    % Verify the gap between the engineer (Mountain) and administrator (Rope).
    constraint_indexing:constraint_classification(nasa_faster_better_cheaper, TypePowerless,
        context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(nasa_faster_better_cheaper, TypeInstitutional,
        context(agent_power(institutional), _, _, _)),
    assertion(TypePowerless == mountain),
    assertion(TypeInstitutional == rope),
    TypePowerless \= TypeInstitutional.

test(threshold_validation) :-
    % Verify that the base extractiveness qualifies it as a high-extraction constraint.
    narrative_ontology:constraint_metric(nasa_faster_better_cheaper, extractiveness, E),
    assertion(E >= 0.46).

test(analytical_classification_is_snare) :-
    % Verify the analytical observer correctly identifies the Snare.
    constraint_indexing:constraint_classification(nasa_faster_better_cheaper, TypeAnalytical,
        context(agent_power(analytical), _, _, _)),
    assertion(TypeAnalytical == snare).

:- end_tests(nasa_faster_better_cheaper_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect the core tension of FBC. The base extractiveness (0.80) is high because the policy's primary effect was to extract non-monetary capital—safety margins, testing time, and engineering redundancy—to fuel a non-functional metric (launch tempo). The suppression score (0.70) is high because this philosophy was mandated from the top down, actively penalizing traditional, more cautious engineering approaches.
 * The perspectival gap is profound:
 * - For the engineer, the budget is an absolute, unchangeable limit, appearing as a Mountain.
 * - For the administrator, the policy is a coordination tool (Rope) to achieve political and institutional goals.
 * - For the post-mortem analyst, the policy is a Snare that predictably led to failure by removing the system's ability to absorb errors.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * This case is a classic example of a Snare masquerading as a Rope. The analytical classification as a Snare prevents the system from accepting the institutional claim of "coordination" at face value. The high extraction and suppression scores, combined with the documented mission failures, confirm that the primary function was not coordination but the extraction of technical integrity for the sake of performance metrics.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_fbc_better_metric,
    "Was 'Better' ever a measurable, non-rhetorical metric in FBC, or was it purely a marketing term to justify the extraction of safety margins?",
    "A quantitative comparison of scientific data returned per dollar spent during the FBC era versus pre/post-FBC eras, adjusted for mission complexity.",
    "If data/dollar was higher, FBC was a flawed but functional Tangled Rope. If lower or equivalent, FBC was a pure Snare where 'Better' was theatrical.",
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(nasa_faster_better_cheaper, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data models the intensification of the FBC policy over its lifecycle.
% As early missions succeeded under the new paradigm, pressure increased,
% leading to greater extraction of margins and a higher reliance on the
% appearance of success (theater).

% Theater ratio over time (metric_substitution drift):
narrative_ontology:measurement(fbc_tr_t0, nasa_faster_better_cheaper, theater_ratio, 0, 0.10).
narrative_ontology:measurement(fbc_tr_t5, nasa_faster_better_cheaper, theater_ratio, 5, 0.20).
narrative_ontology:measurement(fbc_tr_t10, nasa_faster_better_cheaper, theater_ratio, 10, 0.30).

% Extraction over time (extraction_accumulation drift):
narrative_ontology:measurement(fbc_ex_t0, nasa_faster_better_cheaper, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(fbc_ex_t5, nasa_faster_better_cheaper, base_extractiveness, 5, 0.70).
narrative_ontology:measurement(fbc_ex_t10, nasa_faster_better_cheaper, base_extractiveness, 10, 0.80).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% FBC was implemented through top-down budgetary and scheduling mandates.
narrative_ontology:coordination_type(nasa_faster_better_cheaper, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: nash_equilibrium_coordination
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-27
% ============================================================================

:- module(constraint_nash_equilibrium_coordination, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: nash_equilibrium_coordination
 * human_readable: Nash Equilibrium
 * domain: economic/social
 * * SUMMARY:
 * A Nash Equilibrium is a state in a non-cooperative game where no player can improve their outcome by changing their strategy unilaterally, given the strategies of others. It represents a fundamental structural "gravity" that stabilizes social and economic systems, often at sub-optimal levels. This constraint is the logic that traps agents in patterns like the Prisoner's Dilemma or market price collusion.
 * * KEY AGENTS:
 * - The Strategic Actor: The subject trapped in a state where deviating alone results in a worse personal outcome.
 * - The Institutional Architect: A beneficiary who uses the equilibrium as a "Rope" to design stable market rules or voting systems.
 * - The Collective: The victim whose potential for a better, Pareto-optimal outcome is extracted to maintain individual stability.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(nash_equilibrium_coordination, 0.52). % Extraction of Pareto-optimal potential. High enough for Tangled Rope.
domain_priors:suppression_score(nash_equilibrium_coordination, 0.45).   % Suppresses cooperative alternatives by making them individually irrational.
domain_priors:theater_ratio(nash_equilibrium_coordination, 0.1).       % Low theater; the logic is highly functional.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(nash_equilibrium_coordination, extractiveness, 0.52).
narrative_ontology:constraint_metric(nash_equilibrium_coordination, suppression_requirement, 0.45).
narrative_ontology:constraint_metric(nash_equilibrium_coordination, theater_ratio, 0.1).

% Constraint self-claim (what does the constraint claim to be?)
% It is often presented as an inescapable law of rational behavior.
narrative_ontology:constraint_claim(nash_equilibrium_coordination, natural_law).

% Binary flags
% The equilibrium is "enforced" by the rational calculations of the agents themselves.
% No external police force is needed, but the structure requires this self-enforcement.
domain_priors:requires_active_enforcement(nash_equilibrium_coordination).

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(nash_equilibrium_coordination, incumbents_in_stable_systems).
narrative_ontology:constraint_victim(nash_equilibrium_coordination, collective_potential).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE STRATEGIC ACTOR (MOUNTAIN)
% For an individual shopkeeper or prisoner, the equilibrium is an unchangeable
% fact of their environment. Deviating is irrational and costly.
constraint_indexing:constraint_classification(nash_equilibrium_coordination, mountain,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE INSTITUTIONAL ARCHITECT (ROPE)
% A central banker or market designer sees the equilibrium as a tool for
% coordination, using policy to nudge agents toward a desirable stable state.
constraint_indexing:constraint_classification(nash_equilibrium_coordination, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees both the coordination function (for incumbents) and the
% asymmetric extraction (of collective potential). The logic is self-enforcing.
% This combination is the definition of a Tangled Rope.
constraint_indexing:constraint_classification(nash_equilibrium_coordination, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(nash_equilibrium_coordination_tests).

test(perspectival_gap) :-
    % Verify the gap between the powerless (Mountain), institutional (Rope), and analytical (Tangled Rope) views.
    constraint_indexing:constraint_classification(nash_equilibrium_coordination, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(nash_equilibrium_coordination, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(nash_equilibrium_coordination, TypeAnalytical, context(agent_power(analytical), _, _, _)),
    TypePowerless == mountain,
    TypeInstitutional == rope,
    TypeAnalytical == tangled_rope,
    TypePowerless \= TypeInstitutional.

test(tangled_rope_structural_requirements) :-
    % Verify that all structural requirements for a Tangled Rope are met.
    narrative_ontology:constraint_beneficiary(nash_equilibrium_coordination, _), % -> has_coordination_function
    narrative_ontology:constraint_victim(nash_equilibrium_coordination, _),     % -> has_asymmetric_extraction
    domain_priors:requires_active_enforcement(nash_equilibrium_coordination).

:- end_tests(nash_equilibrium_coordination_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The core of this model is the perspectival gap. To a powerless agent inside the game, the equilibrium is a 'Mountain'—an immutable law of their reality. To an institutional agent who can change the game's payoffs, it's a 'Rope' for achieving stable coordination.
 * The analytical classification is 'Tangled Rope' because the constraint meets all three structural requirements:
 * 1. Coordination Function: It stabilizes outcomes for beneficiaries (e.g., incumbents).
 * 2. Asymmetric Extraction: It extracts the potential for a better collective outcome (Pareto improvement) from the victims (the collective).
 * 3. Active Enforcement: The logic of individual rationality actively enforces the equilibrium, preventing deviation.
 * This prevents the system from misclassifying this complex social phenomenon as either a pure Mountain (ignoring its constructed nature) or a pure Snare (ignoring its genuine coordination function for some agents).
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_nash_equilibrium_coordination,
    'In games with multiple equilibria, what mechanism selects the one a society settles into?',
    'Historical analysis of focal points, cultural path-dependency, and initial conditions.',
    'If path-dependent, the equilibrium is a Snare of history. If purely conventional, it is a Rope that could be changed.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(nash_equilibrium_coordination, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% The concept of Nash Equilibrium has been stable since its formulation.
% The extraction and theater have not significantly drifted over the interval.
%
% Theater ratio over time:
narrative_ontology:measurement(nash_equilibrium_coordination_tr_t0, nash_equilibrium_coordination, theater_ratio, 0, 0.1).
narrative_ontology:measurement(nash_equilibrium_coordination_tr_t5, nash_equilibrium_coordination, theater_ratio, 5, 0.1).
narrative_ontology:measurement(nash_equilibrium_coordination_tr_t10, nash_equilibrium_coordination, theater_ratio, 10, 0.1).

% Extraction over time:
narrative_ontology:measurement(nash_equilibrium_coordination_ex_t0, nash_equilibrium_coordination, base_extractiveness, 0, 0.52).
narrative_ontology:measurement(nash_equilibrium_coordination_ex_t5, nash_equilibrium_coordination, base_extractiveness, 5, 0.52).
narrative_ontology:measurement(nash_equilibrium_coordination_ex_t10, nash_equilibrium_coordination, base_extractiveness, 10, 0.52).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The equilibrium governs how agents allocate strategic choices.
narrative_ontology:coordination_type(nash_equilibrium_coordination, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: necessary_day_job
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-22
% ============================================================================

:- module(constraint_necessary_day_job, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:coordination_type/2.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: necessary_day_job
 * human_readable: The Necessary Day Job for Creatives
 * domain: economic/social
 * * SUMMARY:
 * The "necessary day job" is the economic constraint where creative vocation is
 * decoupled from subsistence labor. Writers, artists, and scholars must perform
 * unrelated, often precarious or underpaid work (e.g., adjunct teaching, service jobs)
 * to fund their creative passions, effectively subsidizing the cultural sphere
 * with their time and non-creative labor.
 * * KEY AGENTS:
 * - The Artist/Adjunct: Subject (Powerless)
 * - The Employer/University: Beneficiary (Institutional)
 * - The Systems Auditor: Observer (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Base extractiveness (0.65): High. Represents the extraction of time, energy,
% and economic security from the creative worker. The value of their labor in
% the "day job" is captured by the employer, while the risk and cost of
% creative production remain with the individual.
domain_priors:base_extractiveness(necessary_day_job, 0.65).

% Suppression score (0.70): High. Economic alternatives (living solely off one's art,
% patronage, stable academic positions like tenure) are rare and have been
% systematically suppressed by market dynamics and institutional policies.
domain_priors:suppression_score(necessary_day_job, 0.70).

% Theater ratio (0.10): Low. While institutions may pay lip service to valuing
% creativity, the primary function of the day job is brutally economic, not
% performative.
domain_priors:theater_ratio(necessary_day_job, 0.10).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(necessary_day_job, extractiveness, 0.65).
narrative_ontology:constraint_metric(necessary_day_job, suppression_requirement, 0.70).
narrative_ontology:constraint_metric(necessary_day_job, theater_ratio, 0.10).

% Constraint self-claim: The system presents this as a constructed necessity,
% an unfortunate but unavoidable feature of a market economy.
narrative_ontology:constraint_claim(necessary_day_job, constructed).

% Binary flags & Structural properties for Tangled Rope
domain_priors:requires_active_enforcement(necessary_day_job).
narrative_ontology:constraint_beneficiary(necessary_day_job, employers_and_institutions).
narrative_ontology:constraint_victim(necessary_day_job, creative_workers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE ARTIST / ADJUNCT (SNARE)
% For the individual creative, the day job is a trap. It consumes the finite
% resources (time, energy) needed for their real work, while offering just
% enough subsistence to perpetuate the cycle.
% χ = 0.65 * π(powerless:1.5) * σ(national:1.0) = 0.975
constraint_indexing:constraint_classification(necessary_day_job, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE EMPLOYER / UNIVERSITY (ROPE)
% From the institutional perspective, a large pool of self-subsidizing talent
% is a pure coordination benefit. It allows for flexible staffing, lower labor
% costs, and access to skilled individuals without long-term commitment.
% χ = 0.65 * π(institutional:-0.2) * σ(national:1.0) = -0.13
constraint_indexing:constraint_classification(necessary_day_job, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees both sides. The system provides a coordination function
% (staffing institutions, producing cultural goods) but does so via asymmetric
% extraction that is actively enforced by economic precarity. It is a functional
% system built on an exploitative foundation.
% χ = 0.65 * π(analytical:1.15) * σ(global:1.2) = 0.897
constraint_indexing:constraint_classification(necessary_day_job, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(necessary_day_job_tests).

test(perspectival_gap_artist_vs_institution, [nondet]) :-
    constraint_indexing:constraint_classification(necessary_day_job, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(necessary_day_job, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless == snare,
    TypeInstitutional == rope,
    TypePowerless \= TypeInstitutional.

test(analytical_observer_sees_tangled_rope, [nondet]) :-
    constraint_indexing:constraint_classification(necessary_day_job, TypeAnalytical, context(agent_power(analytical), _, _, _)),
    TypeAnalytical == tangled_rope.

test(threshold_validation_high_extraction) :-
    narrative_ontology:constraint_metric(necessary_day_job, extractiveness, E),
    E >= 0.46.

:- end_tests(necessary_day_job_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect the modern "gig economy" reality for many creatives. The
 * base extractiveness (0.65) and suppression (0.70) are high because alternatives
 * like patronage or stable tenure have been eroded, forcing creatives into
 * precarious labor markets.
 *
 * The Perspectival Gap is stark:
 * - The powerless artist experiences this as a 'Snare', a time-theft machine that
 *   feels inescapable.
 * - The institutional beneficiary sees it as a 'Rope', an efficient mechanism to
 *   source flexible, low-cost, highly-skilled labor.
 * - The analytical observer, seeing both the coordination function and the
 *   coercive extraction, must classify it as a 'Tangled Rope'.
 *
 * * MANDATROPHY ANALYSIS:
 * [RESOLVED MANDATROPHY] The 'Tangled Rope' classification is critical here. A
 * simpler analysis might label the system a pure 'Snare'. However, that would
 * miss the fact that the system *does* successfully coordinate labor to produce
 * cultural and educational outputs. The Tangled Rope classification correctly
 * identifies that a genuine coordination function exists but is coupled with,
 * and dependent upon, high asymmetric extraction. This prevents mischaracterizing
 * a functional-but-exploitative system as pure, non-functional predation.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% The core uncertainty is whether the struggle of a day job is a net positive
% or negative for the quality of creative output.
omega_variable(
    omega_necessary_day_job,
    'Is the "day job" a necessary crucible that forges better art by grounding it in reality, or is it a filter that primarily suppresses potential masterpieces from ever being created?',
    'Comparative analysis of creative output from systems with high vs. low day-job dependency (e.g., state-funded artist programs vs. market-driven systems).',
    'If crucible, the constraint has a hidden positive externality. If filter, its societal cost is far higher than the direct extraction from individuals.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(necessary_day_job, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% The data models the intensification of this constraint over the last few
% decades, reflecting the decline of tenure and the rise of the gig economy.
% Extraction has increased as stable alternatives have been suppressed.

% Theater ratio over time:
narrative_ontology:measurement(ndj_tr_t0, necessary_day_job, theater_ratio, 0, 0.05).
narrative_ontology:measurement(ndj_tr_t5, necessary_day_job, theater_ratio, 5, 0.08).
narrative_ontology:measurement(ndj_tr_t10, necessary_day_job, theater_ratio, 10, 0.10).

% Extraction over time:
narrative_ontology:measurement(ndj_ex_t0, necessary_day_job, base_extractiveness, 0, 0.60).
narrative_ontology:measurement(ndj_ex_t5, necessary_day_job, base_extractiveness, 5, 0.62).
narrative_ontology:measurement(ndj_ex_t10, necessary_day_job, base_extractiveness, 10, 0.65).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The constraint functions as a mechanism for allocating a resource (skilled
% labor) under conditions of scarcity (funding for the arts/humanities).
narrative_ontology:coordination_type(necessary_day_job, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: negative_emissions_arbitrage
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-27
% ============================================================================

:- module(constraint_negative_emissions_arbitrage, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: negative_emissions_arbitrage
 * human_readable: Negative Emissions Arbitrage Market
 * domain: economic/political/technological
 * * SUMMARY:
 * The scientific consensus that global warming stops only at "net-zero" emissions created a global carbon ledger. This constraint is the market mechanism built upon that ledger, where the high cost of absolute industrial decarbonization is arbitraged against the cost of "equivalent" atmospheric carbon removal technologies. It functions as a coordination mechanism for global capital but extracts value from legacy industries.
 * * KEY AGENTS:
 * - High-Intensity Legacy Emitters: Subject (Powerless) - Industries unable to achieve absolute-zero emissions, forced to buy removals.
 * - Removal Technology Providers: Beneficiary (Institutional) - Carbon capture firms, tech providers, and nations with high carbon-sink capacity who sell removal credits.
 * - Climate Policy Auditor: Auditor (Analytical) - Observers analyzing the market's structure, effectiveness, and extractive properties.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(negative_emissions_arbitrage, 0.82). % Snare extraction >= 0.46
domain_priors:suppression_score(negative_emissions_arbitrage, 0.55).   % Structural property (raw, unscaled).
domain_priors:theater_ratio(negative_emissions_arbitrage, 0.15).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(negative_emissions_arbitrage, extractiveness, 0.82).
narrative_ontology:constraint_metric(negative_emissions_arbitrage, suppression_requirement, 0.55).
narrative_ontology:constraint_metric(negative_emissions_arbitrage, theater_ratio, 0.15).

% Constraint self-claim (what does the constraint claim to be?)
narrative_ontology:constraint_claim(negative_emissions_arbitrage, coordination).

% Binary flags
domain_priors:requires_active_enforcement(negative_emissions_arbitrage). % Required for Tangled Rope

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(negative_emissions_arbitrage, removal_technology_providers).
narrative_ontology:constraint_victim(negative_emissions_arbitrage, high_intensity_legacy_emitters).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE LEGACY EMITTER (SNARE)
% For firms that cannot decarbonize to absolute-zero, the mandatory purchase
% of "equivalent removals" is a Snare, extracting profit to fund another sector.
constraint_indexing:constraint_classification(negative_emissions_arbitrage, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE REMOVAL PROVIDER (ROPE)
% Views the net-zero ledger as a pure Rope—a functional market mechanism to
% coordinate the balancing of emissions and removals, creating a new industry.
constraint_indexing:constraint_classification(negative_emissions_arbitrage, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The system is a Tangled Rope. It has a genuine coordination function (balancing
% the global carbon ledger) but also features high, asymmetric extraction from
% one group (emitters) to another (removers), all maintained by active policy
% enforcement.
constraint_indexing:constraint_classification(negative_emissions_arbitrage, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(negative_emissions_arbitrage_tests).

test(perspectival_gap) :-
    % Verify the gap between the emitter (Snare), provider (Rope), and analyst (Tangled Rope).
    constraint_indexing:constraint_classification(negative_emissions_arbitrage, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(negative_emissions_arbitrage, rope, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(negative_emissions_arbitrage, tangled_rope, context(agent_power(analytical), _, _, _)).

test(tangled_rope_properties) :-
    % A Tangled Rope requires beneficiaries, victims, and active enforcement.
    narrative_ontology:constraint_beneficiary(negative_emissions_arbitrage, _),
    narrative_ontology:constraint_victim(negative_emissions_arbitrage, _),
    domain_priors:requires_active_enforcement(negative_emissions_arbitrage).

:- end_tests(negative_emissions_arbitrage_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The high extraction score (0.82) reflects the mandatory capital flow from legacy emitters to the new carbon removal sector. The suppression score (0.55) reflects how the "net-zero" consensus has displaced alternative frameworks (like a fixed emissions budget).
 * The key insight is the distinction between the underlying physical law and the socio-economic system built upon it. The physical necessity of net-zero to stop warming is a Mountain. However, the *market for arbitrage* created to achieve this is a classic Tangled Rope: it solves a coordination problem (balancing the carbon ledger) while simultaneously enabling massive, asymmetric value extraction, all held in place by active regulation.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * This constraint is a textbook case of mandatrophy resolution via the Tangled Rope classification. A naive analysis might see only the Snare experienced by emitters or the Rope experienced by providers. The Tangled Rope classification correctly identifies that the system possesses *both* a genuine coordination function and a coercive, extractive one. This prevents the system from misclassifying a complex regulatory market as either pure coordination or pure predation.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_negative_emissions_arbitrage_1,
    'Are industrial removals truly equivalent in atmospheric effect and permanence to avoided fossil emissions?',
    'Long-term verification of carbon residence times in geological storage vs. atmospheric cycles.',
    'If equivalent: Tangled Rope holds. If not: The system degrades into a pure Snare based on fraudulent accounting.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(negative_emissions_arbitrage, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This constraint intensified over time as the market matured and became more
% formalized, increasing both its extractive efficiency and performative aspects.
%
% Theater ratio over time (metric_substitution):
narrative_ontology:measurement(nea_tr_t0, negative_emissions_arbitrage, theater_ratio, 0, 0.05).
narrative_ontology:measurement(nea_tr_t5, negative_emissions_arbitrage, theater_ratio, 5, 0.10).
narrative_ontology:measurement(nea_tr_t10, negative_emissions_arbitrage, theater_ratio, 10, 0.15).

% Extraction over time (extraction_accumulation):
narrative_ontology:measurement(nea_ex_t0, negative_emissions_arbitrage, base_extractiveness, 0, 0.60).
narrative_ontology:measurement(nea_ex_t5, negative_emissions_arbitrage, base_extractiveness, 5, 0.75).
narrative_ontology:measurement(nea_ex_t10, negative_emissions_arbitrage, base_extractiveness, 10, 0.82).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type: A carbon market is a form of resource allocation,
% managing the "resource" of atmospheric absorption capacity.
narrative_ontology:coordination_type(negative_emissions_arbitrage, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: net_zero_stabilization
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_net_zero_stabilization, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: net_zero_stabilization
 * human_readable: The Net Zero Carbon Constraint
 * domain: scientific/political/economic
 * * SUMMARY:
 * Before 2005, the scientific consensus was that global temperatures could be stabilized while still allowing for a small budget of CO2 emissions. Research by physicists David Frame and Myles Allen demonstrated that warming only stops when human-caused emissions reach net zero. This discovery fundamentally shifted global climate policy, creating a new, far more demanding constraint on industrial and economic activity.
 * * KEY AGENTS:
 * - Legacy Carbon Emitters: Subjects (Powerless) facing the extraction of their previously assumed "right to emit".
 * - Future Generations/Climate Bodies: Beneficiaries (Institutional) of a stabilized climate.
 * - Climate Scientists: The Analytical observers who discovered and defined the constraint.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(net_zero_stabilization, 0.85). % Snare extraction >= 0.46. Reaching net zero requires total extraction of carbon-emitting capabilities from current systems.
domain_priors:suppression_score(net_zero_stabilization, 0.45).   % The previous consensus (allowing ~2.5Gt emissions) was suppressed by the new model.
domain_priors:theater_ratio(net_zero_stabilization, 0.10).       % The constraint is highly functional, not theatrical.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(net_zero_stabilization, extractiveness, 0.85).
narrative_ontology:constraint_metric(net_zero_stabilization, suppression_requirement, 0.45).
narrative_ontology:constraint_metric(net_zero_stabilization, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% It is presented as a discovery of an immutable physical law.
narrative_ontology:constraint_claim(net_zero_stabilization, natural_law).

% Binary flags
domain_priors:requires_active_enforcement(net_zero_stabilization). % Required for Tangled Rope. Policy, treaties, and carbon markets are all enforcement mechanisms.

% Structural property derivation hooks:
% The Earth System (and future generations) benefit from temperature stability.
narrative_ontology:constraint_beneficiary(net_zero_stabilization, global_climate_stability).
% Carbon-heavy industries and high-emitting nations lose the "fair chunk" of emissions they once believed was safe.
narrative_ontology:constraint_victim(net_zero_stabilization, legacy_carbon_emitters).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For legacy emitters, the rule is a Snare that extracts their ability to operate without costly removals.
constraint_indexing:constraint_classification(net_zero_stabilization, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For institutions representing future generations, it is a pure Rope coordinating global action for survival.
constraint_indexing:constraint_classification(net_zero_stabilization, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Analytically, it's a Tangled Rope: a necessary coordination mechanism (beneficiaries)
% that imposes severe, asymmetric extraction (victims) and requires active enforcement.
constraint_indexing:constraint_classification(net_zero_stabilization, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(net_zero_stabilization_tests).

test(perspectival_gap) :-
    % Verify the gap between the Subject (Snare) and Beneficiary (Rope).
    constraint_indexing:constraint_classification(net_zero_stabilization, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(net_zero_stabilization, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless == snare,
    TypeInstitutional == rope,
    TypePowerless \= TypeInstitutional.

test(threshold_validation_and_analytical_type) :-
    % Verify high extraction and the correct analytical classification.
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(net_zero_stabilization, ExtMetricName, E),
    E >= 0.46,
    constraint_indexing:constraint_classification(net_zero_stabilization, tangled_rope, context(agent_power(analytical), _, _, _)).

:- end_tests(net_zero_stabilization_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness is set to 0.85 to reflect the totalizing nature of the "net zero" requirement, which extracts the entire operational paradigm of the carbon-based economy. The suppression score of 0.45 reflects the scientific and political displacement of the prior, more lenient consensus.
 *
 * The key insight is the perspectival gap. For legacy emitters, this is a pure Snare, removing their ability to operate. For beneficiaries (future generations represented by institutions), it is a pure Rope, coordinating survival. The analytical view must synthesize these facts. Because the constraint has a clear coordination function (stabilizing the climate), has asymmetric victims, and requires intense global enforcement, it is a canonical Tangled Rope. It is not a Mountain, because human policy (the "net" part, involving removals) is required to meet it; the physics alone just describes the problem.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * Classifying this as a pure Snare would be inaccurate, as it would ignore the genuine, world-saving coordination function. Classifying it as a Rope would ignore the immense coercive extraction imposed on specific sectors. The Tangled Rope classification resolves this by acknowledging both facets simultaneously. It correctly models a necessary, beneficial coordination effort that is inextricably tangled with high levels of asymmetric extraction.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_net_zero_stabilization_1,
    "Is the extraction of carbon space a physical necessity (Mountain) or a policy choice that ignores lower-impact alternatives?",
    "Audit of global temperature responses to small, sustained, sub-zero emissions over centuries.",
    "If necessity: Mountain. If choice: Tangled Rope/Snare.",
    confidence_without_resolution(medium)
).

omega_variable(
    omega_net_zero_stabilization_2,
    "Can 'equivalent removals' be achieved at the required gigatonne scale, or is the 'net' in 'net zero' a fiction?",
    "Monitor the deployment and energy-return-on-investment of scaled Carbon Capture and Storage (CCS) technology.",
    "If viable: Tangled Rope. If non-viable: The target becomes a systemic Snare.",
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(net_zero_stabilization, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This models the constraint solidifying from a scientific proposal into a hard policy requirement,
% increasing its effective extractiveness over the interval. Theater remains low.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(net_zero_tr_t0, net_zero_stabilization, theater_ratio, 0, 0.05).
narrative_ontology:measurement(net_zero_tr_t5, net_zero_stabilization, theater_ratio, 5, 0.08).
narrative_ontology:measurement(net_zero_tr_t10, net_zero_stabilization, theater_ratio, 10, 0.10).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(net_zero_ex_t0, net_zero_stabilization, base_extractiveness, 0, 0.55).
narrative_ontology:measurement(net_zero_ex_t5, net_zero_stabilization, base_extractiveness, 5, 0.75).
narrative_ontology:measurement(net_zero_ex_t10, net_zero_stabilization, base_extractiveness, 10, 0.85).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The constraint functions as a global enforcement mechanism for emissions policy.
narrative_ontology:coordination_type(net_zero_stabilization, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: network_effects
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-05-21
% ============================================================================

:- module(constraint_network_effects, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: network_effects
 * human_readable: Network Effects (Demand-Side Economies of Scale)
 * domain: economic/technological
 * * SUMMARY:
 * A phenomenon where a product or service gains additional value as more people
 * use it. This creates a powerful positive feedback loop that often leads to
 * "winner-take-all" dynamics, where a dominant player becomes nearly impossible
 * to displace due to the high cost for users to leave the established network.
 * * KEY AGENTS:
 * - Early Adopter/End User: Subject (Powerless)
 * - Platform Owner: Beneficiary (Institutional)
 * - Strategic Competitor: Subject (Moderate Power)
 * - Systems Auditor: Observer (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
% Extraction is moderate: users gain utility, but the platform owner extracts
% disproportionate value through data, fees, or advertising once lock-in is achieved.
domain_priors:base_extractiveness(network_effects, 0.55).
% Suppression is high: incumbent networks suppress alternatives by preventing
% interoperability, raising switching costs, and leveraging their user base.
domain_priors:suppression_score(network_effects, 0.60).
% Theater is low; the network's function is real, not performative.
domain_priors:theater_ratio(network_effects, 0.1).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(network_effects, extractiveness, 0.55).
narrative_ontology:constraint_metric(network_effects, suppression_requirement, 0.60).
narrative_ontology:constraint_metric(network_effects, theater_ratio, 0.1).

% Constraint self-claim (what does the constraint claim to be?)
% Often framed as an inevitable, natural law of markets (Metcalfe's Law).
narrative_ontology:constraint_claim(network_effects, natural_law).

% Binary flags
% Enforcement is required to maintain the lock-in, e.g., by preventing data portability.
domain_priors:requires_active_enforcement(network_effects).

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(network_effects, platform_owners).
narrative_ontology:constraint_victim(network_effects, innovative_startups).
narrative_ontology:constraint_victim(network_effects, end_users_facing_lock_in).


/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE END USER (SNARE)
% Initially a Rope, but over time becomes a Snare due to high switching costs
% and extractive practices that emerge after the network is dominant.
constraint_indexing:constraint_classification(network_effects, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(global))).

% PERSPECTIVE 2: THE PLATFORM OWNER (ROPE)
% Viewed as a pure coordination mechanism that creates immense value and a
% defensible market position. Extraction is seen as a fair return.
constraint_indexing:constraint_classification(network_effects, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(global))).

% PERSPECTIVE 3: THE STRATEGIC COMPETITOR (MOUNTAIN)
% A startup with a superior product sees the incumbent's network effect as an
% unchangeable law of the market, an insurmountable barrier to entry.
constraint_indexing:constraint_classification(network_effects, mountain,
    context(agent_power(moderate),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 4: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Recognizes both the genuine coordination value (beneficiaries exist) and the
% asymmetric, coercive extraction (victims exist), classifying it as a hybrid.
constraint_indexing:constraint_classification(network_effects, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(network_effects_tests).

test(perspectival_gap_user_vs_owner) :-
    % Verify the user (powerless) and owner (institutional) have different views.
    constraint_indexing:constraint_classification(network_effects, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(network_effects, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless == snare,
    TypeInstitutional == rope,
    TypePowerless \= TypeInstitutional.

test(analytical_observer_is_tangled_rope) :-
    % The analytical view must resolve to Tangled Rope given the metrics.
    constraint_indexing:constraint_classification(network_effects, tangled_rope, context(agent_power(analytical), _, _, _)).

test(competitor_sees_mountain) :-
    constraint_indexing:constraint_classification(network_effects, mountain, context(agent_power(moderate), _, _, _)).

:- end_tests(network_effects_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect the dual nature of network effects. The base extractiveness (0.55)
 * and suppression (0.60) are high enough to qualify for a Snare or Tangled Rope,
 * but not so high as to negate the genuine coordination value it provides.
 *
 * The Perspectival Gap is stark:
 * - For the Platform Owner (Institutional), it's a perfect Rope, a tool for value creation.
 * - For the End User (Powerless), it becomes a Snare as switching costs rise and the platform begins extracting value.
 * - For a Competitor (Moderate), it's a Mountain, an immutable barrier to entry.
 * - The Analytical observer, weighing both the coordination function (beneficiaries) and the coercive extraction (victims, enforcement), correctly identifies it as a Tangled Rope.
 *
 * MANDATROPHY ANALYSIS:
 * Classifying this as a Tangled Rope is critical. A simpler analysis might label it a Snare (focusing only on user lock-in) or a Rope (focusing only on the platform's value creation). The Tangled Rope classification correctly captures the reality that it is BOTH a powerful coordination tool AND an extractive mechanism. This prevents the system from mischaracterizing a constructed market dynamic as either pure malevolence or pure public good.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_network_effects,
    'Are network effects an emergent, natural law of digital physics (Mountain) or a constructed barrier maintained by active suppression of interoperability (Tangled Rope)?',
    'Analysis of markets where interoperability is mandated (e.g., EU via DMA). If new competitors thrive, it supports the "constructed barrier" hypothesis. If the incumbent remains dominant, it supports the "natural law" view.',
    'If Mountain, policy interventions are futile. If Tangled Rope, regulatory action like forced data portability could dismantle the constraint.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(network_effects, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This models the lifecycle of a successful platform: initial low extraction to
% attract users, which then increases as lock-in is achieved.
% Theater ratio remains low, as the function is always real.

% Theater ratio over time (metric_substitution):
narrative_ontology:measurement(network_effects_tr_t0, network_effects, theater_ratio, 0, 0.05).
narrative_ontology:measurement(network_effects_tr_t5, network_effects, theater_ratio, 5, 0.08).
narrative_ontology:measurement(network_effects_tr_t10, network_effects, theater_ratio, 10, 0.1).

% Extraction over time (extraction_accumulation):
narrative_ontology:measurement(network_effects_ex_t0, network_effects, base_extractiveness, 0, 0.15).
narrative_ontology:measurement(network_effects_ex_t5, network_effects, base_extractiveness, 5, 0.40).
narrative_ontology:measurement(network_effects_ex_t10, network_effects, base_extractiveness, 10, 0.55).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% Network effects create a shared digital space and user base.
narrative_ontology:coordination_type(network_effects, global_infrastructure).

% Network relationships (structural influence edges)
% Network effects are a primary driver of platform lock-in.
narrative_ontology:affects_constraint(network_effects, platform_lock_in).
narrative_ontology:affects_constraint(data_portability_mandates, network_effects).


/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: neural_interoperability
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-22
% Status: [RESOLVED MANDATROPHY]
% ============================================================================

:- module(constraint_neural_interoperability, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: neural_interoperability
 * human_readable: The Neural Interoperability Threshold
 * domain: technological
 * * SUMMARY:
 * As research confirms that human brain activity follows the layered hierarchy
 * of large language models, "Neural Interoperability" becomes the requirement for
 * Brain-Computer Interface (BCI) systems to match these signatures to achieve
 * high-fidelity communication. This creates a powerful standard but also a
 * potential chokepoint for control and surveillance.
 * * KEY AGENTS:
 * - BCI Users (e.g., paralyzed patients): Subject (Powerless)
 * - BCI Developers & Platform Owners: Beneficiary (Institutional)
 * - Privacy Auditors: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(neural_interoperability, 0.85). % Mountain <= 0.15, Rope <= 0.15, Snare >= 0.46
domain_priors:suppression_score(neural_interoperability, 0.50).   % Structural property (raw, unscaled).
domain_priors:theater_ratio(neural_interoperability, 0.15).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(neural_interoperability, extractiveness, 0.85).
narrative_ontology:constraint_metric(neural_interoperability, suppression_requirement, 0.50).
narrative_ontology:constraint_metric(neural_interoperability, theater_ratio, 0.15).

% Constraint self-claim (what does the constraint claim to be?)
% It claims to be a necessary coordination standard for technology to work.
narrative_ontology:constraint_claim(neural_interoperability, coordination).

% Binary flags
domain_priors:requires_active_enforcement(neural_interoperability). % Required for Tangled Rope

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(neural_interoperability, bci_developers).
narrative_ontology:constraint_victim(neural_interoperability, bci_users).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For a user dependent on the BCI, the high extraction of their neural data
% for translation creates a trap. Their innermost thoughts are processed by a
% system they don't control.
% χ = 0.85 (ε) * 1.5 (powerless) * 0.8 (local) = 1.02. This is a definitive Snare.
constraint_indexing:constraint_classification(neural_interoperability, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For developers, the standard is pure coordination. It allows an ecosystem of
% compatible hardware and software to emerge, reducing friction and enabling a market.
% χ = 0.85 (ε) * -0.2 (institutional) * 1.2 (global) = -0.204. Negative extraction confirms Rope.
constraint_indexing:constraint_classification(neural_interoperability, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The system has a genuine coordination function (beneficiaries exist) but also
% imposes severe asymmetric extraction (victims exist) and requires active
% enforcement (calibration, software updates). This is a canonical Tangled Rope.
constraint_indexing:constraint_classification(neural_interoperability, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(neural_interoperability_tests).

test(perspectival_gap) :-
    constraint_indexing:constraint_classification(neural_interoperability, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(neural_interoperability, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    assertion(TypePowerless == snare),
    assertion(TypeInstitutional == rope).

test(analytical_classification_is_tangled_rope) :-
    constraint_indexing:constraint_classification(neural_interoperability, tangled_rope, context(agent_power(analytical), _, _, _)).

test(high_extraction_and_enforcement) :-
    domain_priors:base_extractiveness(neural_interoperability, E), E >= 0.46,
    domain_priors:requires_active_enforcement(neural_interoperability).

:- end_tests(neural_interoperability_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness is set to 0.85 to reflect the profound value of
 * accessing and translating the hierarchical structure of human thought. This
 * is one of the highest forms of data extraction imaginable. The suppression
 * score of 0.5 reflects that while older BCI methods exist, they are rapidly
 * becoming non-viable due to the superior performance of this new paradigm.
 *
 * The Perspectival Gap is stark: for developers, it's a coordination standard
 * (Rope) that enables a market. For dependent users, it's a totalizing
 * surveillance system (Snare) they cannot escape.
 *
 * * MANDATROPHY ANALYSIS:
 * The high extraction (0.85) triggers a Mandatrophy review. The resolution
 * comes from the analytical classification as a Tangled Rope. This prevents
 * the system from mischaracterizing the constraint as a pure Snare. It correctly
 * identifies that there is a genuine, valuable coordination function at its
 * core, but one that has been coupled with a severe and asymmetric extractive
 * process. The resolution is to acknowledge both functions exist simultaneously,
 * rather than letting the high extraction value eclipse the coordination role.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_neural_interoperability_1,
    'Is the step-by-step extraction of meaning a predatory design choice or a biological necessity for signal clarity?',
    'Audit of signal fidelity vs. data extraction rates in BCI software; comparison of open vs. closed BCI systems.',
    'If necessity: closer to Mountain. If choice: confirmed Snare.',
    confidence_without_resolution(medium)
).

omega_variable(
    omega_neural_interoperability_2,
    'Can the brain''s contextual meaning be ''encrypted'' or personalized to prevent extraction by generic AI models?',
    'Attempt to identify unique neural ''salts'' or noise patterns that vary by individual and can be used as cryptographic keys.',
    'If yes: User regains agency (Rope). If no: Total extraction (Snare).',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(neural_interoperability, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data for high-extraction constraint (0.85 > 0.46).
% Models the intensification of extraction and slight increase in performative
% compliance as the technology moves from research to commercialization.

% Theater ratio over time:
narrative_ontology:measurement(neural_interop_tr_t0, neural_interoperability, theater_ratio, 0, 0.10).
narrative_ontology:measurement(neural_interop_tr_t5, neural_interoperability, theater_ratio, 5, 0.12).
narrative_ontology:measurement(neural_interop_tr_t10, neural_interoperability, theater_ratio, 10, 0.15).

% Extraction over time:
narrative_ontology:measurement(neural_interop_ex_t0, neural_interoperability, base_extractiveness, 0, 0.75).
narrative_ontology:measurement(neural_interop_ex_t5, neural_interoperability, base_extractiveness, 5, 0.80).
narrative_ontology:measurement(neural_interop_ex_t10, neural_interoperability, base_extractiveness, 10, 0.85).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% This constraint functions as a standard for information exchange.
narrative_ontology:coordination_type(neural_interoperability, information_standard).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: neural_substrate_2026
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-20
% ============================================================================

:- module(constraint_neural_substrate_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: neural_substrate_2026
 * human_readable: Active Manipulation of Consciousness via tFUS
 * domain: technological/biological
 * * SUMMARY:
 * Researchers have transitioned consciousness research from correlation (fMRI/EEG)
 * to active causation using transcranial focused ultrasound (tFUS).
 * While a boon for science, the ability to non-invasively modulate deep-brain
 * targets creates a new constraint on cognitive autonomy, as the causal substrate
 * of experience becomes externally accessible.
 * * KEY AGENTS:
 * - Human Subjects: Subject (Powerless)
 * - Research Institutions: Beneficiary (Institutional)
 * - Ethics Boards & Auditors: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Extraction is high (0.52) due to the non-consensual (in a deep sense) 'extraction'
% of cognitive privacy and causal control over phenomenal experience.
domain_priors:base_extractiveness(neural_substrate_2026, 0.52).
% Suppression is high (0.85) because tFUS is non-invasive, bypasses the skull,
% and offers no simple biological defense or 'exit' for the subject.
domain_priors:suppression_score(neural_substrate_2026, 0.85).
% Theater ratio is low (0.15) as the tool provides high-fidelity causal data
% and is highly functional for its stated scientific purpose.
domain_priors:theater_ratio(neural_substrate_2026, 0.15).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(neural_substrate_2026, extractiveness, 0.52).
narrative_ontology:constraint_metric(neural_substrate_2026, suppression_requirement, 0.85).
narrative_ontology:constraint_metric(neural_substrate_2026, theater_ratio, 0.15).

% Constraint self-claim (what does the constraint claim to be?)
% It is a constructed technological tool, not a natural law.
narrative_ontology:constraint_claim(neural_substrate_2026, constructed).

% Binary flags
% The technology requires active, skilled operation and ethical oversight.
domain_priors:requires_active_enforcement(neural_substrate_2026). % Required for Tangled Rope

% Structural property derivation hooks:
% has_coordination_function/1 is DERIVED from constraint_beneficiary/2
% has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
narrative_ontology:constraint_beneficiary(neural_substrate_2026, neuroscientists).
narrative_ontology:constraint_victim(neural_substrate_2026, individual_cognitive_autonomy).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% From the perspective of the biological subject, tFUS is a Snare:
% non-invasive modulation of the "causal" nature of their experience.
% χ = 0.52 * 1.5 (powerless) * 0.8 (local) = 0.624
constraint_indexing:constraint_classification(neural_substrate_2026, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Research institutions view this as a Rope—essential infrastructure for
% coordinating research and resolving fundamental scientific questions.
% χ = 0.52 * -0.2 (institutional) * 1.0 (national) = -0.104
constraint_indexing:constraint_classification(neural_substrate_2026, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Analysts see a Tangled Rope: Genuine coordination of knowledge mixed with
% asymmetric extraction of neuronal control.
% χ = 0.52 * 1.15 (analytical) * 1.2 (global) = 0.7176
constraint_indexing:constraint_classification(neural_substrate_2026, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(neural_substrate_2026_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(neural_substrate_2026, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(neural_substrate_2026, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(analytical_classification_is_tangled_rope) :-
    % Verify the analytical observer correctly identifies the hybrid nature.
    constraint_indexing:constraint_classification(neural_substrate_2026, tangled_rope, context(agent_power(analytical), _, _, _)).

test(tangled_rope_structural_conditions_met) :-
    % Verify the structural properties for a Tangled Rope are declared.
    domain_priors:requires_active_enforcement(neural_substrate_2026),
    narrative_ontology:constraint_beneficiary(neural_substrate_2026, _), % Derives has_coordination_function
    narrative_ontology:constraint_victim(neural_substrate_2026, _).     % Derives has_asymmetric_extraction

:- end_tests(neural_substrate_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The extraction score (0.52) reflects the transition from observational tools
 * like fMRI to 'Active Manipulation', where causal control over experience is
 * the resource being extracted. The suppression score (0.85) is high because
 * the technology is non-invasive and bypasses conventional biological defenses.
 * The perspectival gap is stark: institutional actors see a tool for discovering
 * truth (Rope), while the subject experiences an external, irresistible override
 * of their cognitive autonomy (Snare).
 *
 * * MANDATROPHY ANALYSIS:
 * The Tangled Rope classification is critical for resolving Mandatrophy. A purely
 * extractive view (Snare) would ignore the genuine scientific progress and
 * coordination function this technology enables. A purely coordination-based
 * view (Rope) would ignore the profound ethical implications and extraction of
 * cognitive autonomy from the subject. Tangled Rope correctly identifies it as
 * a hybrid, forcing a nuanced analysis that balances scientific benefit against
 * individual rights and preventing a collapse into a simplistic "all good" or
 * "all bad" judgment.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_neural_substrate_2026,
    'Is the causal substrate of consciousness primarily subcortical (e.g., thalamus) or frontal-cortical?',
    'Validation of tFUS modulation results across different deep-brain targets and their effect on reported phenomenal experience.',
    'If subcortical, it implies a more centralized, vulnerable control point (Snare risk). If cortical, control is distributed, making manipulation harder (closer to Rope).',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(neural_substrate_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data models the drift from observational correlation (low extraction)
% to causal manipulation (high extraction) over the research interval.
% Theater ratio decreases as the technology proves its effectiveness.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(neu_tr_t0, neural_substrate_2026, theater_ratio, 0, 0.40).
narrative_ontology:measurement(neu_tr_t5, neural_substrate_2026, theater_ratio, 5, 0.25).
narrative_ontology:measurement(neu_tr_t10, neural_substrate_2026, theater_ratio, 10, 0.15).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(neu_ex_t0, neural_substrate_2026, base_extractiveness, 0, 0.10).
narrative_ontology:measurement(neu_ex_t5, neural_substrate_2026, base_extractiveness, 5, 0.35).
narrative_ontology:measurement(neu_ex_t10, neural_substrate_2026, base_extractiveness, 10, 0.52).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The technology coordinates scientific effort towards specific research goals.
narrative_ontology:coordination_type(neural_substrate_2026, resource_allocation).

% Network relationships (structural influence edges)
% This technology directly influences future policy on cognitive liberty.
narrative_ontology:affects_constraint(neural_substrate_2026, cognitive_liberty_policy_2030).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: neurodiversity_spectrum
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-21
% ============================================================================

:- module(constraint_neurodiversity_spectrum, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: neurodiversity_spectrum
 * human_readable: The Social/Medical Model of the Neurodiversity Spectrum
 * domain: social/medical
 * * SUMMARY:
 * This constraint represents the modern social and medical model that reframes
 * neurodevelopmental variation (e.g., autism, ADHD) from a binary "normal vs.
 * abnormal" model to a spectrum. While intended to be supportive, its
 * institutionalization creates both coordination benefits (resource allocation,
 * identity) and extractive effects (pathologization, labeling). The constraint
 * is the *system*, not the underlying biological reality.
 * * KEY AGENTS:
 * - Newly Diagnosed Individual: Subject (Powerless), experiences the label as a trap.
 * - Medical Establishment (e.g., APA): Beneficiary (Institutional), uses the model for coordination.
 * - Systems Analyst: Auditor (Analytical), observes the mixed effects.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(neurodiversity_spectrum, 0.72). % Represents the extraction of autonomy and the friction of pathologization, even in a "supportive" model.
domain_priors:suppression_score(neurodiversity_spectrum, 0.55).   % The model still suppresses alternative, non-medicalized views of identity and enforces conformity to diagnostic criteria.
domain_priors:theater_ratio(neurodiversity_spectrum, 0.20).       % The system is largely functional, not theatrical.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(neurodiversity_spectrum, extractiveness, 0.72).
narrative_ontology:constraint_metric(neurodiversity_spectrum, suppression_requirement, 0.55).
narrative_ontology:constraint_metric(neurodiversity_spectrum, theater_ratio, 0.20).

% Constraint self-claim (what does the constraint claim to be?)
narrative_ontology:constraint_claim(neurodiversity_spectrum, coordination).

% Binary flags
domain_priors:requires_active_enforcement(neurodiversity_spectrum). % Requires diagnosis via frameworks like the DSM-5.

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(neurodiversity_spectrum, neurodivergent_community). % Gains identity, language, and access to support.
narrative_ontology:constraint_victim(neurodiversity_spectrum, individuals_pathologized_by_labeling). % Suffers from stigma, medicalization, and reduced autonomy.

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE NEWLY DIAGNOSED INDIVIDUAL (SNARE)
% For an individual facing the social and professional consequences of a new
% label, the system feels like a Snare. It extracts autonomy and imposes an
% identity, trapping them in a medicalized framework.
% χ = 0.72 * 1.5 (powerless) * 1.0 (national) = 1.08
constraint_indexing:constraint_classification(neurodiversity_spectrum, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE MEDICAL ESTABLISHMENT (ROPE)
% From the perspective of an institution like the APA, the spectrum is a pure
% Rope. It's a coordination mechanism to allocate resources, define support
% levels, and create a standardized language for research and treatment.
% χ = 0.72 * -0.2 (institutional) * 1.2 (global) = -0.17
constraint_indexing:constraint_classification(neurodiversity_spectrum, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees both the coordination function and the asymmetric extraction.
% The system provides real benefits but also imposes significant costs on a
% victim class, and requires active enforcement to maintain. This is the
% canonical definition of a Tangled Rope.
constraint_indexing:constraint_classification(neurodiversity_spectrum, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(neurodiversity_spectrum_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(neurodiversity_spectrum, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(neurodiversity_spectrum, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(analytical_classification_is_tangled_rope) :-
    % Verify the analytical view correctly identifies the hybrid nature.
    constraint_indexing:constraint_classification(neurodiversity_spectrum, tangled_rope, context(agent_power(analytical), _, _, _)).

test(threshold_validation) :-
    % Verify the base extraction is in the high range for Snare/Tangled Rope.
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(neurodiversity_spectrum, ExtMetricName, E),
    E >= 0.46.

:- end_tests(neurodiversity_spectrum_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The original file conflated the biological fact of neurodiversity (a Mountain)
 * with the social/medical system constructed around it. This version models only
 * the latter, revealing it as a classic Tangled Rope. The high base extraction
 * (0.72) reflects the significant cost of pathologization and loss of autonomy,
 * even when the system's intent is supportive.
 *
 * The Perspectival Gap is stark:
 * - For the institution, it's a pure coordination tool (Rope), as the negative
 *   extraction value shows they perceive no cost, only benefit.
 * - For the individual being labeled, it's a coercive trap (Snare), as the high
 *   positive extraction value shows they bear the full cost.
 * - The analytical view, accounting for both sides, correctly identifies it as
 *   a Tangled Rope.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The Tangled Rope classification resolves the mandatrophy by acknowledging
 * both the genuine coordination function (the Rope aspect) and the severe,
 * asymmetric extraction (the Snare aspect). It prevents the system from being
 * misclassified as either a pure Rope (ignoring the victims) or a pure Snare
 * (ignoring the real coordination benefits).
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_neurodiversity_spectrum,
    "Is the historical labeling of neurodivergence as 'illness' a predatory attempt at social conformity, or a genuine (but flawed) attempt at care?",
    "Audit of historical medical outcomes vs. modern quality-of-life improvements in spectrum-based systems.",
    "If predatory: The historical 'Snare' was a tool of social control. If flawed care: The 'Snare' was a misapplied 'Rope'.",
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(neurodiversity_spectrum, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This constraint evolved from an advocacy concept into an institutionalized
% medical framework. This progression shows extraction accumulation as the
% model was formalized, creating new forms of pathologization.
%
% Theater ratio over time (slight increase with bureaucratization):
narrative_ontology:measurement(neurodiversity_spectrum_tr_t0, neurodiversity_spectrum, theater_ratio, 0, 0.10).
narrative_ontology:measurement(neurodiversity_spectrum_tr_t5, neurodiversity_spectrum, theater_ratio, 5, 0.15).
narrative_ontology:measurement(neurodiversity_spectrum_tr_t10, neurodiversity_spectrum, theater_ratio, 10, 0.20).

% Extraction over time (increases as the model becomes institutionalized):
narrative_ontology:measurement(neurodiversity_spectrum_ex_t0, neurodiversity_spectrum, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(neurodiversity_spectrum_ex_t5, neurodiversity_spectrum, base_extractiveness, 5, 0.65).
narrative_ontology:measurement(neurodiversity_spectrum_ex_t10, neurodiversity_spectrum, base_extractiveness, 10, 0.72).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The DSM model is fundamentally a resource allocation and diagnostic tool.
narrative_ontology:coordination_type(neurodiversity_spectrum, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: new_civilizational_rope
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2026-01-28
% ============================================================================

:- module(constraint_civilizational_rope, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: decentralized_infrastructure_rope
 * human_readable: The Auditable Bridge
 * domain: technological/social
 * * SUMMARY:
 * A permanent infrastructure system built on decentralized maintenance protocols 
 * and real-time, auditable AI structural sensors.
 * It functions as a pure Rope, providing maximum coordination (utility) with 
 * minimal extraction (rent-seeking).
 * * KEY AGENTS:
 * - The Citizen: Subject (Powerful) - Holds the "audit keys" to the system.
 * - The Protocol DAO: Architect (Organized) - Managing maintenance via smart contract.
 * - The Systems Analyst: Auditor (Analytical) - Verifying the lack of "Theater."
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(decentralized_infrastructure_rope, 0.08). % Low: Resource use is for maintenance only.
domain_priors:suppression_score(decentralized_infrastructure_rope, 0.25).   % Low: Open-source standards allow for modular alternatives.
domain_priors:theater_ratio(decentralized_infrastructure_rope, 0.02).       % Minimal: Sensor data is public and irreducible.

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(decentralized_infrastructure_rope, extractiveness, 0.08).
narrative_ontology:constraint_metric(decentralized_infrastructure_rope, suppression_requirement, 0.25).
narrative_ontology:constraint_metric(decentralized_infrastructure_rope, theater_ratio, 0.02).

% Binary flags
domain_priors:requires_active_enforcement(decentralized_infrastructure_rope). % Automated protocol enforcement.

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   ========================================================================= */

% PERSPECTIVE 1: THE EMPOWERED USER (ROPE)
% To the citizen, the bridge is a pure Rope—an invisible, reliable utility 
% they can audit at will.
constraint_indexing:constraint_classification(decentralized_infrastructure_rope, rope, 
    context(agent_power(powerless), 
            time_horizon(biographical), 
            exit_options(mobile), 
            spatial_scope(regional))).

% PERSPECTIVE 2: THE INSTITUTIONAL INCUMBENT (SNARE)
% To the old legacy bureaucracy, the new auditable system is a Snare—it 
% prevents them from extracting political rent or hiding decay.
constraint_indexing:constraint_classification(decentralized_infrastructure_rope, snare, 
    context(agent_power(institutional), 
            time_horizon(generational), 
            exit_options(trapped), 
            spatial_scope(national))).

% PERSPECTIVE 3: THE CIVILIZATIONAL OBSERVER (MOUNTAIN)
% Over long horizons, the protocol becomes a Mountain—a fundamental, 
% unchangeable physical/logical limit that society takes for granted.
constraint_indexing:constraint_classification(decentralized_infrastructure_rope, mountain, 
    context(agent_power(analytical), 
            time_horizon(civilizational), 
            exit_options(analytical), 
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(new_rope_tests).

test(low_theater_check) :-
    % Verify the system is not a Piton (Theater Ratio must be < 0.70).
    domain_priors:theater_ratio(decentralized_infrastructure_rope, TR), TR < 0.10.

test(rope_identity) :-
    % Verify the powerless subject perceives a Rope.
    constraint_indexing:constraint_classification(decentralized_infrastructure_rope, rope, context(agent_power(powerless), _, _, _)).

:- end_tests(new_rope_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The low extraction score (0.08) is achieved through "Auditability." By 
 * making the structural health public, the "Theater" of painting over rot 
 * becomes impossible.
 * * [RESOLVED MANDATROPHY]
 * The Mandatrophy is resolved by the high "Degrees of Freedom." Because the 
 * system is open-source and modular (Low Suppression), it is a coordination 
 * Rope chosen by the population, not a Snare forced upon them.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_algorithmic_governance,
    'Can a DAO-based maintenance protocol survive a "Black Swan" event without a human architect?',
    'Stress-test simulations vs. historical response of centralized bureaucracies.',
    'If it fails: Sudden return to Scaffold; If it holds: Permanent Civilizational Rope.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing.
narrative_ontology:interval(decentralized_infrastructure_rope, 0, 10). 

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: new_start_expiration
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_new_start_expiration, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: new_start_expiration
 * human_readable: New START Treaty Expiration
 * domain: political
 * * SUMMARY:
 * The expiration of the New START treaty, which limited US and Russian nuclear arsenals, creates a new constraint landscape. The absence of formal limits and verification protocols establishes a dynamic conducive to a renewed arms race. This new reality diverts resources to military spending and suppresses diplomatic alternatives.
 * * KEY AGENTS:
 * - Global Public: Subject (Powerless), facing increased risk and resource diversion.
 * - Nuclear Arms Industry: Beneficiary (Institutional), profiting from increased defense spending.
 * - Arms Control Community: Auditor (Analytical), observing the degradation of international security norms.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(new_start_expiration, 0.6). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(new_start_expiration, 0.7).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(new_start_expiration, 0.2).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(new_start_expiration, extractiveness, 0.6).
narrative_ontology:constraint_metric(new_start_expiration, suppression_requirement, 0.7).
narrative_ontology:constraint_metric(new_start_expiration, theater_ratio, 0.2).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
% The new dynamic is a constructed reality based on strategic decisions.
narrative_ontology:constraint_claim(new_start_expiration, constructed).

% Binary flags
domain_priors:requires_active_enforcement(new_start_expiration). % Required for Tangled Rope. The arms race dynamic is self-enforcing through mutual suspicion.

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope.
narrative_ontology:constraint_beneficiary(new_start_expiration, nuclear_arms_industry).
narrative_ontology:constraint_victim(new_start_expiration, global_public).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The global public is trapped in a dynamic that extracts public funds for
% private profit and increases existential risk.
% χ = 0.6 * 1.5 (powerless) * 1.2 (global) = 1.08 (Snare)
constraint_indexing:constraint_classification(new_start_expiration, snare,
    context(agent_power(powerless),
            time_horizon(generational),
            exit_options(trapped),
            spatial_scope(global))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The arms industry sees the removal of limits as a coordination mechanism
% for securing large, long-term government contracts.
% χ = 0.6 * -0.2 (institutional) * 1.0 (national) = -0.12 (Rope)
constraint_indexing:constraint_classification(new_start_expiration, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees a system with a residual coordination function (mutual
% deterrence) but which is dominated by asymmetric extraction (public funds
% to private industry) and high suppression of alternatives.
% χ = 0.6 * 1.15 (analytical) * 1.2 (global) = 0.828 (Tangled Rope/Snare)
constraint_indexing:constraint_classification(new_start_expiration, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(new_start_expiration_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(new_start_expiration, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(new_start_expiration, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(threshold_validation) :-
    % Ensures it's a high-extraction constraint.
    narrative_ontology:constraint_metric(new_start_expiration, extractiveness, E),
    E >= 0.46.

test(tangled_rope_properties_present) :-
    % Verify that all structural requirements for a Tangled Rope are declared.
    domain_priors:requires_active_enforcement(new_start_expiration),
    narrative_ontology:constraint_beneficiary(new_start_expiration, _),
    narrative_ontology:constraint_victim(new_start_expiration, _).

:- end_tests(new_start_expiration_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The constraint is not the treaty itself, but the dynamic created by its expiration. This dynamic is an arms race, which is highly extractive (0.6) as it diverts public funds, and highly suppressive (0.7) as it marginalizes diplomatic solutions.
 * The perspectival gap is stark: for the global public (powerless), it's a Snare, trapping them in a high-risk, high-cost reality. For the arms industry (institutional), the lack of limits is a Rope, coordinating state behavior to guarantee profits. The analytical view recognizes both aspects, classifying it as a Tangled Rope: a system with a perverse coordination function (mutual deterrence) that enables massive, asymmetric extraction.
 * * MANDATROPHY ANALYSIS:
 * The Tangled Rope classification is critical here. A simpler model might see only the Snare aspect (the danger and cost to the public). However, that would miss the powerful coordination function that benefits the arms industry. By identifying the beneficiaries and the coordination logic that serves them, the Tangled Rope classification prevents mislabeling the system as pure, chaotic extraction. It correctly identifies it as a constructed, self-stabilizing system of extraction.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_new_start_expiration,
    'Is the post-treaty dynamic a rapid, uncontrolled arms race or a slower, more managed strategic competition?',
    'Monitoring deployed warhead counts, missile tests, and defense budget allocations over a decade.',
    'If rapid race (Snare dominates), global risk increases sharply. If managed competition (Tangled Rope is stable), extraction continues but existential risk is lower.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(new_start_expiration, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data models the gradual emergence of the arms race dynamic after
% the treaty (the prior constraint) expires at T=0.
% Required for high-extraction constraints (base_extractiveness > 0.46).

% Theater ratio over time: Remains low as the arms race is functional, not performative.
narrative_ontology:measurement(new_start_expiration_tr_t0, new_start_expiration, theater_ratio, 0, 0.1).
narrative_ontology:measurement(new_start_expiration_tr_t5, new_start_expiration, theater_ratio, 5, 0.15).
narrative_ontology:measurement(new_start_expiration_tr_t10, new_start_expiration, theater_ratio, 10, 0.2).

% Extraction over time: Ramps up as new weapons programs are funded and deployed.
narrative_ontology:measurement(new_start_expiration_ex_t0, new_start_expiration, base_extractiveness, 0, 0.3).
narrative_ontology:measurement(new_start_expiration_ex_t5, new_start_expiration, base_extractiveness, 5, 0.45).
narrative_ontology:measurement(new_start_expiration_ex_t10, new_start_expiration, base_extractiveness, 10, 0.6).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The residual coordination is the logic of mutual deterrence, a form of
% enforcement mechanism.
narrative_ontology:coordination_type(new_start_expiration, enforcement_mechanism).

% Network relationships (structural influence edges)
% The expiration of the treaty directly influences national defense budgets.
narrative_ontology:affects_constraint(new_start_expiration, global_defense_spending).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: newtons_method_convergence
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Newton-Raphson Method (Numerical Analysis)
% ============================================================================

:- module(constraint_newtons_method, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: newtons_method_convergence
 * human_readable: Newton's Method (Root-Finding)
 * domain: mathematics/technological
 * temporal_scope: 1687 - Present (Civilizational)
 * spatial_scope: Global/Abstract (Differentiable functions)
 * * SUMMARY:
 * Newton's Method is an iterative technique for finding roots of a real-valued 
 * function. It uses the function's derivative to project a tangent line to the 
 * x-axis. While quadratically fast near a root, it is notoriously sensitive 
 * to the initial guess and can diverge or oscillate indefinitely.
 * * KEY AGENTS:
 * - The Iterate (x_n): A powerless agent following a rigid geometric path.
 * - The Algorithm Architect: An institutional agent choosing the method for 
 * its "Rope-like" efficiency in optimized libraries.
 * - The Divergent Case: A "Snare" scenario where the function's geometry 
 * traps the iterate in a cycle or flings it to infinity.
 * * NARRATIVE ARC:
 * Newton's method begins as a "Rope" of extreme speed (quadratic convergence). 
 * As the agent approaches a local extremum where $f'(x) \to 0$, the Rope 
 * tightens into a "Snare," causing the iteration to fail. If the agent is 
 * within the "basin of attraction," the convergence is a "Mountain" of 
 * mathematical inevitability.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION
   ========================================================================== */

% Required for DR-Audit Suite
narrative_ontology:interval(newton_era, 1687, 2026).
narrative_ontology:constraint_claim(newtons_method_convergence, rope).

% Base extractiveness: 0.15
% Rationale: Generally low extraction; it is a "gift" of speed. However, 
% it "extracts" stability in exchange for performance.
domain_priors:base_extractiveness(newtons_method_convergence, 0.15).

% Suppression score: 0.2
% Rationale: It does not hide Bisection or Secant methods, though its 
% ubiquity in engineering makes it a "default" that suppresses slower logic.
domain_priors:suppression_score(newtons_method_convergence, 0.2).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(newtons_method_convergence, extractiveness, 0.15).
narrative_ontology:constraint_metric(newtons_method_convergence, suppression_requirement, 0.2).

% Enforcement: Emerges from the laws of calculus and Euclidean geometry.
domain_priors:emerges_naturally(newtons_method_convergence).

% Metrics
% Beneficiaries & Victims
constraint_beneficiary(newtons_method_convergence, optimized_solvers).
constraint_beneficiary(newtons_method_convergence, real_time_simulation).
constraint_victim(newtons_method_convergence, unstable_initial_guesses).
constraint_victim(newtons_method_convergence, non_differentiable_logic).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE NUMERICAL ITERATE (Within Basin) - Mountain
   --------------------------------------------------------------------------
   WHO: powerless - The value x_n has no agency over the update rule.
   WHEN: immediate - Focused on the single jump to the next x_intercept.
   WHERE: trapped - Locked within the basin of attraction of a specific root.
   SCOPE: local - Immediate neighborhood of the root.
   
   WHY THIS CLASSIFICATION:
   Once the iterate enters the basin of attraction for a simple root, the 
   convergence is guaranteed by the laws of analysis. The "Mountain" of 
   quadratic convergence is unyielding and predictable.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    newtons_method_convergence,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE LIBRARY DEVELOPER - Rope
   --------------------------------------------------------------------------
   WHO: institutional - Power to choose, tune, or fallback to other methods.
   WHEN: biographical - Planning the lifecycle of a software library.
   WHERE: mobile - Can switch to a Secant or Hybrid (Brent's) method if needed.
   SCOPE: global - Designing for a wide range of input functions.
   
   WHY THIS CLASSIFICATION:
   For the developer, Newton's method is a functional "Rope"—a highly efficient 
   coordination tool used to reach a result with fewer cycles than other 
   methods, provided they manage the "attachment point" (initial guess).
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    newtons_method_convergence,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: NEAR-CRITICAL POINT ($f'(x) \approx 0$) - Snare
   --------------------------------------------------------------------------
   WHO: powerless - Trapped by the specific geometry of the function.
   WHEN: immediate - One step can throw the iterate to $x = \infty$.
   WHERE: constrained - The iterate is forced to follow a divergent tangent.
   SCOPE: local - At the flat portion of the curve.
   
   WHY THIS CLASSIFICATION:
   Near a local extremum, the "tangent" becomes nearly horizontal. The 
   update rule $x - f(x)/f'(x)$ produces a massive, uncontrolled jump. 
   The method acts as a "Snare," extracting all computational stability and 
   strangling the possibility of a solution.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    newtons_method_convergence,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(local)
    )
) :-
    domain_priors:base_extractiveness(newtons_method_convergence, E),
    E > 0.1.

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(newtons_method_tests).

test(basin_vs_peak_variance) :-
    % Inside basin -> Mountain
    constraint_indexing:constraint_classification(newtons_method_convergence, Type1, context(powerless, immediate, trapped, local)),
    % Near peak -> Snare (modeled by 'constrained' exit option)
    constraint_indexing:constraint_classification(newtons_method_convergence, Type2, context(powerless, immediate, constrained, local)),
    Type1 = mountain,
    Type2 = snare.

test(developer_rope_flexibility) :-
    constraint_indexing:constraint_classification(newtons_method_convergence, rope, context(institutional, biographical, mobile, global)).

test(natural_emergence) :-
    domain_priors:emerges_naturally(newtons_method_convergence).

:- end_tests(newtons_method_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * * KEY DECISIONS:
 * 1. CLASSIFICATION SHIFT: The core insight is that Newton's method changes 
 * type based on geometry. Near the root, it's a "Mountain" of convergence. 
 * Near a flat spot, it's a "Snare" of divergence.
 * 2. AGENT SELECTION: The "Numerical Iterate" represents the passive subject 
 * of the mathematical law.
 * 3. EXTRACTIVENESS: While "free," the method extracts "computational 
 * reliability" from systems that don't verify derivatives.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω)
   ========================================================================== */

omega_variable(
    basin_of_attraction_boundary,
    "Is the boundary of the basin of attraction a 'Mountain' (smooth) or a 'Fractal' (chaotic)?",
    resolution_mechanism("Plot the Newton Fractal for the specific function $f(z)$."),
    impact("If Fractal: The 'Snare' is everywhere at the boundary. If Smooth: The 'Rope' is robust."),
    confidence_without_resolution(medium)
).



omega_variable(
    derivative_fidelity,
    "Is the 'Mountain' logic sound if the derivative is numerically approximated?",
    resolution_mechanism("Compare convergence of analytical Newton vs Finite-Difference Newton."),
    impact("If Approx: The 'Mountain' is a 'Scaffold' that may collapse into noise."),
    confidence_without_resolution(high)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Bisection Method
 * Viability: Guaranteed convergence (Rope), zero extraction of stability.
 * Suppression: Rejected for speed in high-performance contexts.
 * * ALTERNATIVE 2: Secant Method
 * Viability: Doesn't require a derivative (lighter Rope).
 * Suppression: Slower than Newton (1.618 vs 2.0 convergence order).
 * * CONCLUSION:
 * The existence of safer alternatives (Bisection) confirms that Newton's 
 * method's Divergence Trap is a "Snare" one *chooses* to risk for the "Rope" 
 * of speed.
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: no_cloning_theorem
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Quantum Mechanics / Wootters & Zurek (1982) / Dieks (1982)
% ============================================================================

:- module(constraint_no_cloning_theorem, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: no_cloning_theorem
 * human_readable: The No-Cloning Theorem
 * domain: technological
 * temporal_scope: Permanent (Universal Laws of Physics)
 * spatial_scope: Global (Quantum Information Systems)
 * * SUMMARY:
 * The no-cloning theorem states that it is impossible to create an independent 
 * and identical copy of an arbitrary unknown quantum state. This is a 
 * fundamental consequence of the linearity of quantum mechanics, preventing the 
 * "copy-paste" functionality central to classical information processing.
 * * KEY AGENTS:
 * - The Quantum Physicist: Analytical observer mapping the boundaries of reality.
 * - The Quantum Cryptographer: Institutional agent leveraging the theorem to create unhackable communications.
 * - The Quantum Computer Engineer: Individual agent struggling to implement error correction without state replication.
 * * NARRATIVE ARC:
 * The theorem functions as a "Mountain" of physical necessity. For the 
 * cryptographer, it is a "Rope" for coordination (security through 
 * physical law). However, for the engineer attempting to scale quantum 
 * hardware, it is a "Snare" that strangles the ability to use classical 
 * redundancy and debugging techniques.
 */

/* ==========================================================================
   2. BASE PROPERTIES (Context-Independent)
   ========================================================================== */

% Required for structural identification
narrative_ontology:interval(no_cloning_interval, 0, 10).
narrative_ontology:constraint_claim(no_cloning_theorem, mountain).

% Base extractiveness: 0.2 (Low)
% Rationale: It extracts "reproducibility" from the information system. It 
% doesn't actively steal resources but imposes a high "efficiency cost" on 
% information storage and transmission.
domain_priors:base_extractiveness(no_cloning_theorem, 0.2).

% Suppression: 0.3 (Low)
% Rationale: The classical alternative (perfect copying) is universally 
% visible but physically suppressed in the quantum domain.
domain_priors:suppression_score(no_cloning_theorem, 0.3).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(no_cloning_theorem, extractiveness, 0.2).
narrative_ontology:constraint_metric(no_cloning_theorem, suppression_requirement, 0.3).

% Enforcement: Emerges naturally from the linearity of quantum evolution.
domain_priors:emerges_naturally(no_cloning_theorem).

% BENEFICIARIES & VICTIMS
% Beneficiary: Security protocols (e.g., BB84) that depend on non-clonability.
constraint_beneficiary(no_cloning_theorem, quantum_cryptographers).
% Victim: Hardware architects who must invent complex "Surface Codes" to bypass the lack of copying.
constraint_victim(no_cloning_theorem, quantum_hardware_engineers).

% Metrics for Executive Summary
/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE QUANTUM PHYSICIST - Mountain
   --------------------------------------------------------------------------
   
   WHO: analytical - Observer of the laws of information and matter.
   WHEN: civilizational - Viewing the universe as a permanent substrate.
   WHERE: trapped - Logic and physics cannot bypass the linearity of the Schrödinger equation.
   SCOPE: global - Universal computation.
   
   WHY THIS CLASSIFICATION:
   To the physicist, the theorem is a Mountain. It is an unchangeable 
   consequence of the mathematical structure of quantum mechanics. It is 
   not a policy; it is a fixed peak in the topography of reality that no 
   amount of engineering can level.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    no_cloning_theorem,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(civilizational),
        exit_options(trapped),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE SECURITY ARCHITECT - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional - Power to define and utilize formal rules for trust.
   WHEN: biographical - Achieving secure communication over a project's life.
   WHERE: arbitrage - Can use non-clonability to detect eavesdropping (BB84).
   SCOPE: national - Protecting state or corporate infrastructure.
   
   WHY THIS CLASSIFICATION:
   For the security architect, the theorem is a Rope. It is a coordination 
   mechanism that provides a guarantee of privacy. By knowing that an 
   adversary *cannot* copy a bit without disturbing it, they use the 
   constraint as a tether to pull a secure network into existence.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    no_cloning_theorem,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(arbitrage),
        spatial_scope(national)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE HARDWARE DEBUGGER - Snare
   --------------------------------------------------------------------------
   
   WHO: powerless - Subject to the rules of the quantum lab.
   WHEN: immediate - Today's struggle to identify where a state was lost.
   WHERE: constrained - Cannot "save" or "duplicate" the state for testing.
   SCOPE: local - Immediate workspace.
   
   WHY THIS CLASSIFICATION:
   For the engineer trying to debug a quantum circuit, the theorem is a 
   Snare. They cannot "snapshot" the state for later analysis; the act 
    of measurement destroys it, and the inability to clone prevents 
   redundant backups. The harder they try to isolate errors, the tighter 
   the lack of information replication strangles their progress.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    no_cloning_theorem,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(local)
    )
) :- !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(no_cloning_theorem_tests).

test(multi_perspective_variance) :-
    % Analyst sees Mountain
    constraint_indexing:constraint_classification(no_cloning_theorem, mountain, context(analytical, civilizational, trapped, global)),
    % Institutional sees Rope
    constraint_indexing:constraint_classification(no_cloning_theorem, rope, context(institutional, biographical, arbitrage, national)),
    % Powerless sees Snare
    constraint_indexing:constraint_classification(no_cloning_theorem, snare, context(powerless, immediate, constrained, local)).

test(power_extractiveness_cloning) :-
    % Powerless engineers feel the total extraction of redundancy (Snare).
    % Institutional cryptographers leverage the "theft" of eavesdropping (Rope).
    ContextPowerless = context(powerless, immediate, constrained, local),
    ContextPowerful = context(institutional, biographical, arbitrage, national),
    domain_priors:base_extractiveness(no_cloning_theorem, Score),
    Score > 0.1.

test(time_immutability_physics) :-
    % Long-term civilizational logic = Mountain.
    constraint_indexing:effective_immutability(civilizational, trapped, mountain).

:- end_tests(no_cloning_theorem_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * * 1. EXTRACTIVENESS SCORE (0.2):
 * Reasoning: Low. While the theorem "takes away" the classical luxury of 
 * copying, it is a neutral law of the universe that applies to everyone 
 * equally. Its extraction is felt as an "efficiency tax" on computation.
 * * 2. PERSPECTIVE SELECTION:
 * The Analyst (Physicist) sees the law as a fixed Mountain.
 * The Architect (Cryptographer) sees the law as a useful Rope for security.
 * The Worker (Debugger) sees the law as a Snare strangling their methods.
 * * 3. AMBIGUITIES:
 * - The existence of "Approximate Cloning" creates a boundary condition 
 * where the Snare might be loosened for a high price.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    macro_cloning_threshold,
    "At what scale of system complexity does the no-cloning 'Snare' 
    effectively vanish into classical 'copyability'?",
    resolution_mechanism("Experimental mapping of the quantum-to-classical transition"),
    impact("If Low: Quantum limits are a pervasive Mountain. If High: They are 
    only a local Snare for microscopic systems."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Classical Information (Turing machines)
 * Viability: High. The entire digital world is built on the 
 * viability of cloning bits.
 * Suppression: High in the quantum domain. The laws of physics 
 * actively suppress classical-style copying once superposition is involved.
 * * CONCLUSION:
 * The existence of classical computing as a suppressed alternative for quantum 
 * systems confirms that for the quantum engineer, the theorem is a Snare—they 
 * are denied the very tools (copying) that make classical systems robust.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS CONSTRAINT:
 * * 1. Load: ?- [constraint_no_cloning_theorem].
 * 2. Multi-perspective: ?- multi_index_report(no_cloning_theorem).
 * 3. Run tests: ?- run_tests(no_cloning_theorem_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: noethers_theorem_symmetry
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Emmy Noether (1915) / Lagrangian Mechanics / Physics
% ============================================================================

:- module(constraint_noethers_theorem, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: noethers_theorem_symmetry
 * human_readable: Noether's Theorem (Symmetry-Conservation Link)
 * domain: mathematical/physical/technological
 * temporal_scope: 1915 - Present (Civilizational)
 * spatial_scope: Global/Abstract (Action-based systems)
 * * SUMMARY:
 * Noether's theorem states that every differentiable symmetry of the action 
 * of a physical system has a corresponding conservation law. For example, 
 * time-translation symmetry implies conservation of energy, and spatial-translation 
 * symmetry implies conservation of momentum.
 * * KEY AGENTS:
 * - The Physical Particle (Subject): The powerless agent whose trajectory is 
 * bound by the geometric symmetries of the universe.
 * - The Theoretical Physicist (Institutional): An agent who uses the theorem 
 * as a "Rope" to deduce properties of unknown particles or forces.
 * - The Numerical Simulator (Analyst/Victim): An agent struggling with 
 * discrete systems that "break" the symmetry, turning the theorem into 
 * a "Snare" of unphysical energy drift.
 * * NARRATIVE ARC:
 * Noether's Theorem is the ultimate "Mountain" of physical reality—an 
 * inescapable identity between geometry and substance. In model-building, 
 * it is a "Rope" for coordination. However, in modern computing, the 
 * theorem acts as a "Snare" for programmers who must invent complex "Symplectic 
 * Integrators" to satisfy the conservation laws that the digital 
 * environment naturally tries to violate.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for DR-Audit Suite
narrative_ontology:interval(noether_era, 1915, 2026).
narrative_ontology:constraint_claim(noethers_theorem_symmetry, mountain).

% Base extractiveness score (0.0-1.0)
% Rationale: Low (0.1). Natural laws don't "take" in a social sense, though 
% they extract significant computational effort to preserve in simulation.
domain_priors:base_extractiveness(noethers_theorem_symmetry, 0.1).

% Suppression score (0.0-1.0)
% Rationale: Low (0.1). It is an enabling insight, though it renders 
% "non-conserving" symmetrical systems logically impossible.
domain_priors:suppression_score(noethers_theorem_symmetry, 0.1).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(noethers_theorem_symmetry, extractiveness, 0.1).
narrative_ontology:constraint_metric(noethers_theorem_symmetry, suppression_requirement, 0.1).

% Enforcement: Emerges naturally from the stationary action principle.
domain_priors:emerges_naturally(noethers_theorem_symmetry).

% Metrics for Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(noethers_theorem_symmetry, field_theorists). % Predict unknown symmetries.
constraint_beneficiary(noethers_theorem_symmetry, aerospace_engineers). % Fuel/Momentum predictability.
constraint_victim(noethers_theorem_symmetry, naive_numerical_schemes). % Drift-prone algorithms.

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE PHYSICAL PARTICLE - Mountain
   --------------------------------------------------------------------------
   WHO: powerless - The particle cannot "choose" to violate energy conservation.
   WHEN: immediate - True at every infinitesimal point of the trajectory.
   WHERE: trapped - Bound by the metric and Lagrangian of the space it inhabits.
   SCOPE: local - Immediate neighborhood of the particle's state.
   
   WHY THIS CLASSIFICATION:
   For a particle in a time-invariant field, Energy Conservation is an absolute, 
   unchangeable Mountain. It has no agency to deviate from the conserved 
   surface in phase space.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    noethers_theorem_symmetry,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE THEORETICAL PHYSICIST - Rope
   --------------------------------------------------------------------------
   WHO: institutional - Power to design Lagrangians and predict laws.
   WHEN: biographical - Planning the discovery of a new gauge theory.
   WHERE: mobile - Can "pivot" between different symmetries (U1, SU2, SU3).
   SCOPE: global - Applying the theorem to the entire Standard Model.
   
   WHY THIS CLASSIFICATION:
   For the researcher, the theorem is a "Rope"—a functional coordination 
   mechanism. It allows the researcher to "climb" toward a conservation law 
   simply by identifying a symmetry, providing a standard of achievement for 
   model consistency.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    noethers_theorem_symmetry,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE GAME ENGINE PROGRAMMER - Snare
   --------------------------------------------------------------------------
   WHO: powerless - Bound by the limits of floating-point math.
   WHEN: immediate - Every frame, energy "leaks" out of the system.
   WHERE: constrained - Forced to fulfill the "expectation" of physics by the user.
   SCOPE: local - A specific collision or orbital simulation.
   
   WHY THIS CLASSIFICATION:
   In a discrete simulation, the "Mountain" of Noether is broken. The programmer 
   experiences the theorem as a "Snare"—a coercive limit that punishes simple 
   logic with "unphysical" results. It extracts massive engineering hours 
   to implement symplectic integrators that "tighten" the simulation back to 
   the conserved reality.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    noethers_theorem_symmetry,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(local)
    )
) :- 
    domain_priors:base_extractiveness(noethers_theorem_symmetry, E),
    E >= 0.1,
    !.

/* ==========================================================================
   4. TESTS (Insights into Physical Limits)
   ========================================================================== */

:- begin_tests(noethers_theorem_tests).

test(symmetry_fate_variance) :-
    % Particle -> Mountain
    constraint_indexing:constraint_classification(noethers_theorem_symmetry, Type1, context(powerless, immediate, trapped, local)),
    % Scientist -> Rope
    constraint_indexing:constraint_classification(noethers_theorem_symmetry, Type2, context(institutional, biographical, mobile, global)),
    Type1 = mountain,
    Type2 = rope.

test(numerical_drift_penalty) :-
    % A powerless agent (Programmer) in a constrained context sees the theorem as a Snare.
    constraint_indexing:constraint_classification(noethers_theorem_symmetry, snare, context(powerless, immediate, constrained, local)).

test(natural_emergence) :-
    domain_priors:emerges_naturally(noethers_theorem_symmetry).

:- end_tests(noethers_theorem_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * * 1. PERSPECTIVE SPLIT: 
 * I highlighted the transition from "Analytic Certainty" (Mountain) to 
 * "Numerical Burden" (Snare). This explains why Noether's work is both a 
 * beautiful discovery and a technical headache for simulators.
 * * 2. EXTRACTIVENESS: 
 * Set at 0.1. While math is free, the *preservation* of these laws in 
 * non-natural (digital) systems extracts significant human labor.
 * * 3. AGENT POWER: 
 * Labeled the programmer as `powerless` relative to the theorem's 
 * requirements; they cannot "negotiate" with Energy Conservation if they 
 * want a realistic game.
 */

% OMEGA IDENTIFICATION
omega_variable(
    discrete_noether_validity,
    "Does a true 'Mountain' version of the theorem exist for discrete-time systems (Calculus of Finite Differences)?",
    resolution_mechanism("Verification of Discrete Variational Integrators across 100 benchmark physics scenarios."),
    impact("If Yes: The Snare becomes a Rope for programmers. If No: It is a permanent Snare of approximation."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Non-Action Principles (Aristotelian/Teleological)
 * Viability: Historically practiced; things move because they "want" to reach a goal.
 * Suppression: Rendered invisible by the predictive Mountain of the 
 * Lagrangian framework discovered by Euler/Lagrange/Noether.
 * * ALTERNATIVE 2: Purely Phenomenological Conservation
 * Viability: Observe that energy is conserved without asking why (the pre-1915 state).
 * Status: Noether's theorem "suppressed" this by providing the "why" 
 * (symmetry), turning a Scaffold into a Mountain.
 * * CONCLUSION:
 * The dominance of Noether's Theorem is due to its role as a "Rope" that 
 * connects two previously disparate Mountains (Symmetry and Conservation).
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Load: ?- [noethers_theorem_symmetry].
% Analyze: ?- constraint_indexing:multi_index_report(noethers_theorem_symmetry).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: non_compete_agreements
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-28
% ============================================================================

:- module(constraint_non_compete_agreements, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: non_compete_agreements
 * human_readable: Non-Compete Agreements (Post-Employment Restraint)
 * domain: economic/political
 * * SUMMARY:
 * A non-compete agreement is a legal contract where an employee agrees not to
 * enter into competition with an employer for a specified period and
 * geographic area after the employment relationship ends. It is a direct
 * legal restraint on labor mobility, claiming to protect trade secrets while
 * suppressing wages and worker mobility.
 * * KEY AGENTS:
 * - Transitioning Worker: Subject (Powerless), prevented from using their skills.
 * - Incumbent Corporation: Beneficiary (Institutional), protects market position.
 * - Regulator/Auditor: Analytical observer, weighs economic impacts.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(non_compete_agreements, 0.80). % Snare extraction >= 0.46. Extracts future earning potential.
domain_priors:suppression_score(non_compete_agreements, 0.70).   % High suppression via legal "chilling effects".
domain_priors:theater_ratio(non_compete_agreements, 0.10).       % Low theater; these are actively and functionally enforced.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(non_compete_agreements, extractiveness, 0.80).
narrative_ontology:constraint_metric(non_compete_agreements, suppression_requirement, 0.70).
narrative_ontology:constraint_metric(non_compete_agreements, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% It claims to be a coordination tool to protect intellectual property.
narrative_ontology:constraint_claim(non_compete_agreements, coordination).

% Binary flags
domain_priors:requires_active_enforcement(non_compete_agreements). % Required for Tangled Rope

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(non_compete_agreements, incumbent_corporations).
narrative_ontology:constraint_victim(non_compete_agreements, transitioning_workers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE JUNIOR WORKER (SNARE)
% For a worker with limited savings, a non-compete is a trap. They cannot
% afford to fight it, and the threat of an injunction prevents them from
% taking a new job in their sector. It is a pure extraction of their right to work.
% χ = 0.80 * 1.5 (powerless) * 1.0 (national) = 1.20 (High Snare)
constraint_indexing:constraint_classification(non_compete_agreements, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE INCUMBENT FIRM (ROPE)
% To the corporate strategist, the agreement is a Rope. It coordinates the
% protection of the company's intellectual property and training investments,
% preventing them from being captured by competitors.
% χ = 0.80 * -0.2 (institutional) * 1.0 (national) = -0.16 (Felt as a benefit)
constraint_indexing:constraint_classification(non_compete_agreements, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees both the coordination function (protecting legitimate trade
% secrets) and the asymmetric extraction (suppressing wages and mobility for
% workers who possess no secrets). It requires active enforcement and has clear
% winners and losers, making it a canonical Tangled Rope.
% χ = 0.80 * 1.15 (analytical) * 1.2 (global) = 1.104 (High Tangled Rope)
constraint_indexing:constraint_classification(non_compete_agreements, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(non_compete_agreements_tests).

test(perspectival_gap) :-
    % Verify the gap between the worker (Snare) and the firm (Rope).
    constraint_indexing:constraint_classification(non_compete_agreements, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(non_compete_agreements, rope, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(non_compete_agreements, tangled_rope, context(agent_power(analytical), _, _, _)).

test(tangled_rope_structural_properties) :-
    % Verify that all three conditions for Tangled Rope are met.
    domain_priors:requires_active_enforcement(non_compete_agreements),
    narrative_ontology:constraint_beneficiary(non_compete_agreements, _), % Derives has_coordination_function
    narrative_ontology:constraint_victim(non_compete_agreements, _).     % Derives has_asymmetric_extraction

test(threshold_validation) :-
    % Verify this is correctly identified as a high-extraction constraint.
    narrative_ontology:constraint_metric(non_compete_agreements, extractiveness, E),
    E >= 0.46.

:- end_tests(non_compete_agreements_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness is set to 0.80 because non-competes directly extract
 * future earning potential from workers, often without direct compensation for
 * this restriction. The suppression score of 0.70 reflects the "chilling effect"
 * of potential litigation, which prevents workers from even applying for jobs.
 *
 * The Perspectival Gap is stark:
 * - For the worker (powerless, trapped), it's a Snare that removes their agency.
 * - For the firm (institutional, mobile), it's a Rope that coordinates IP protection.
 * - The analytical view must reconcile these. Because the constraint has a
 *   legitimate coordination function (beneficiaries exist) AND severe asymmetric
 *   extraction (victims exist), and requires active legal enforcement, it is
 *   classified as a Tangled Rope. The original file's classification of
 *   "Mountain" was incorrect, as mountains must have very low extraction.
 *
 * * MANDATROPHY ANALYSIS:
 * [RESOLVED MANDATROPHY] By classifying this as a Tangled Rope, the system avoids
 * two errors. It doesn't dismiss the constraint as a pure Snare (ignoring the
 * coordination claims about IP) nor does it accept the "Rope" claim at face
 * value (ignoring the immense extraction from workers). The Tangled Rope
 * classification correctly identifies it as a hybrid instrument where a
 * coordination mechanism has been weaponized for extraction.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_non_compete_agreements,
    'Will federal bans on non-competes survive judicial review and be effectively enforced?',
    'Supreme Court rulings on administrative agency power and subsequent state-level enforcement data.',
    'If bans are upheld and enforced, the constraint degrades into a Piton (theatrically maintained). If struck down, it remains a powerful Tangled Rope.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(non_compete_agreements, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Modeling the expansion of non-compete usage from high-level executives
% to lower-wage workers over the last decade, increasing its extractive nature.
% Theater ratio remains low as enforcement is functional.

% Theater ratio over time (metric_substitution detection):
narrative_ontology:measurement(nca_tr_t0, non_compete_agreements, theater_ratio, 0, 0.10).
narrative_ontology:measurement(nca_tr_t5, non_compete_agreements, theater_ratio, 5, 0.10).
narrative_ontology:measurement(nca_tr_t10, non_compete_agreements, theater_ratio, 10, 0.10).

% Extraction over time (extraction_accumulation detection):
narrative_ontology:measurement(nca_ex_t0, non_compete_agreements, base_extractiveness, 0, 0.70).
narrative_ontology:measurement(nca_ex_t5, non_compete_agreements, base_extractiveness, 5, 0.75).
narrative_ontology:measurement(nca_ex_t10, non_compete_agreements, base_extractiveness, 10, 0.80).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type: It's a legal tool used to enforce a specific outcome.
narrative_ontology:coordination_type(non_compete_agreements, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: nonstandard_arithmetic_models
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Thoralf Skolem (1934) / Peano Arithmetic / Tennenbaum's Theorem
% ============================================================================

:- module(constraint_nonstandard_arithmetic, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: nonstandard_arithmetic_models
 * human_readable: Nonstandard Models of Arithmetic
 * domain: mathematical/philosophical/technological
 * temporal_scope: 1934 - Present (Civilizational)
 * spatial_scope: Global/Abstract (First-Order Logic)
 * * SUMMARY:
 * Nonstandard models of arithmetic are structures that satisfy all the first-order 
 * axioms of Peano Arithmetic (PA) but are not isomorphic to the standard natural 
 * numbers ($\mathbb{N}$). They contain "non-standard" or "infinite" integers that 
 * reside beyond every finite successor of zero.
 * * KEY AGENTS:
 * - The Nonstandard Integer (Subject): A powerless agent existing beyond the 
 * "standard" horizon, yet bound by every law of arithmetic.
 * - The Model Theorist (Institutional): An agent using non-standard structures 
 * as a "Rope" to explore independence and prove the limits of first-order logic.
 * - The Computability Theorist (Analytical/Victim): An observer for whom these 
 * models are a "Snare," as Tennenbaum's Theorem proves they are fundamentally 
 * non-computable, "strangling" the dream of a recursive transfinite arithmetic.
 * * NARRATIVE ARC:
 * These models represent the "Mountain" of logical incompleteness; because 
 * first-order logic cannot pin down a unique model (Compactness Theorem), 
 * nonstandard realities are inevitable. In non-standard analysis, they provide 
 * a "Rope" for simplifying calculus with infinitesimals. However, for those 
 * seeking a computable foundation, the "Snare" of Tennenbaum's Theorem 
 * extracts the possibility of an algorithmic implementation, "choking" the 
 * utility of the transfinite for digital systems.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Structural Anchor for the DR-Audit Suite
narrative_ontology:interval(skolem_era, 1934, 2026).
narrative_ontology:constraint_claim(nonstandard_arithmetic_models, mountain).

% Base extractiveness score (0.0 = no extraction, 1.0 = full extraction)
% Rationale: 0.25. These models "extract" the uniqueness and categoricity 
% of the natural numbers, forcing a "logical tax" of ambiguity on all 
% first-order systems.
domain_priors:base_extractiveness(nonstandard_arithmetic_models, 0.25).

% Suppression score (0.0 = no suppression, 1.0 = full suppression)
% Rationale: 0.3. They suppress the visibility of "Standard-Only" arithmetic 
% by proving that the standard numbers are just one possible "Scaffold" 
% within a vast, uncomputable landscape.
domain_priors:suppression_score(nonstandard_arithmetic_models, 0.3).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(nonstandard_arithmetic_models, extractiveness, 0.25).
narrative_ontology:constraint_metric(nonstandard_arithmetic_models, suppression_requirement, 0.3).

% Enforcement: Emerges naturally from the Compactness Theorem of First-Order Logic.
domain_priors:emerges_naturally(nonstandard_arithmetic_models).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(nonstandard_arithmetic_models, model_theorists).
constraint_beneficiary(nonstandard_arithmetic_models, nonstandard_analysis_researchers).
constraint_victim(nonstandard_arithmetic_models, foundational_categoricity_seekers).
constraint_victim(nonstandard_arithmetic_models, recursive_arithmetic_purists).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE NONSTANDARD INTEGER ($H$) - Mountain
   --------------------------------------------------------------------------
   
   WHO: powerless - The integer cannot choose its position or properties.
   WHEN: immediate - Its existence is true the moment the model is defined.
   WHERE: trapped - Bound within the non-standard "galaxy" beyond $\mathbb{N}$.
   SCOPE: local - Immediate relationship with its predecessors and successors.
   
   WHY THIS CLASSIFICATION:
   For an "infinite" integer $H$, the laws of PA are an absolute Mountain. 
   It must satisfy $H+1 \neq H$, it must have a predecessor, and it must 
   obey induction. It has zero agency to "exit" the logic of arithmetic or 
   to become "standard," as it is trapped by the transfinite distance 
   from zero.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    nonstandard_arithmetic_models,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE NONSTANDARD ANALYST (e.g. Robinson) - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional - Power to define calculus and proof methods using infinitesimals.
   WHEN: biographical - Spanning the decades of modern analysis development.
   WHERE: mobile - Can "exit" to standard analysis when needed; uses models as tools.
   SCOPE: global - Universal application in mathematics.
   
   WHY THIS CLASSIFICATION:
   For the institutional mathematician, nonstandard models are a "Rope"—a 
   functional coordination tool. They provide a "standard of achievement" 
   for rigorizing Leibniz's infinitesimals, "pulling" complex limits into 
   simple algebraic comparisons.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    nonstandard_arithmetic_models,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE DIGITAL FOUNDATIONALIST - Snare
   --------------------------------------------------------------------------
   
   WHO: individual_moderate - Has the tools to build systems but bound by Tennenbaum's limit.
   WHEN: civilizational - Seeking a computable, complete foundation for mathematics.
   WHERE: constrained - No alternative but to accept that nonstandard models are non-recursive.
   SCOPE: global - Universal limit on computable arithmetic.
   
   WHY THIS CLASSIFICATION:
   For those seeking a recursive transfinite arithmetic, these models are a 
   "Snare." Tennenbaum's Theorem "strangles" the possibility of a computable 
   implementation of addition and multiplication in any nonstandard model. 
   It extracts the "computational utility" (extraction) of the transfinite, 
   "choking" the hope for a digital "Standard of Truth" that goes beyond $\mathbb{N}$.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    nonstandard_arithmetic_models,
    snare,
    context(
        agent_power(individual_moderate),
        time_horizon(civilizational),
        exit_options(constrained),
        spatial_scope(global)
    )
) :- 
    domain_priors:base_extractiveness(nonstandard_arithmetic_models, E),
    E >= 0.2,
    !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(nonstandard_arithmetic_tests).

test(multi_perspective_variance) :-
    % Integer -> Mountain
    constraint_indexing:constraint_classification(nonstandard_arithmetic_models, Type1, context(powerless, immediate, trapped, local)),
    % Analyst -> Rope
    constraint_indexing:constraint_classification(nonstandard_arithmetic_models, Type2, context(institutional, biographical, mobile, global)),
    Type1 \= Type2.

test(computability_snare_insight) :-
    % Demonstrates that the Snare classification is triggered by Tennenbaum's impact
    constraint_indexing:constraint_classification(nonstandard_arithmetic_models, snare, context(individual_moderate, civilizational, constrained, global)).

test(compactness_natural_emergence) :-
    domain_priors:emerges_naturally(nonstandard_arithmetic_models).

:- end_tests(nonstandard_arithmetic_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * * 1. EXTRACTIVENESS SCORE (0.25):
 * The system "extracts" the uniqueness of our most basic object: the 
 * number. This creates a permanent "tax" of ontological ambiguity.
 * * 2. PERSPECTIVE SELECTION:
 * Chose the Nonstandard Integer (Subject), the Analyst (User of the Rope), 
 * and the Foundationalist (Victim of the Snare) to show how 
 * "discovery" leads to "strangulation" of previous hopes.
 * * 3. CLASSIFICATION RATIONALE:
 * The Integer is a "Mountain" because it exists by logical necessity 
 * regardless of human desire. The Analyst uses this necessity as a 
 * "Rope" (tool). The Digital Foundationalist hit the "Snare" because 
 * the non-recursive nature of these models makes them useless for 
 * automated reasoning.
 * * 4. AMBIGUITIES:
 * The status of "Second-Order Logic" is the primary variable; if one 
 * rejects first-order logic as the primary "Mountain," these models 
 * become a mere "Scaffold."
 */

% OMEGA IDENTIFICATION
omega_variable(
    first_order_primacy,
    "Is first-order logic the fundamental 'Mountain' of thought, or just a 'Scaffold' that hides higher-order categoricity?",
    resolution_mechanism("Investigation into the physical or cognitive 'Ropes' that might allow us to perceive second-order categoricity directly."),
    impact("If First-Order: Nonstandard models are a permanent Mountain. If Second-Order: They are an optional Snare."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Second-Order Peano Arithmetic
 * Viability: Second-order PA is "Categorical"—it has only one model ($\mathbb{N}$).
 * Suppression: Actively suppressed by the "Incompleteness" of second-order 
 * logic, which fails to have a complete proof system (making it a "Snare" 
 * for those who need proofs).
 * * ALTERNATIVE 2: Weak Sub-systems of Arithmetic (e.g. Robinson's Q)
 * Viability: Simpler systems that allow even more non-standard variety.
 * * CONCLUSION:
 * The existence of Second-Order Categoricity proves that the "Snare" of 
 * nonstandard models is a price we pay for the "Rope" of first-order 
 * completeness (Gödel's Completeness Theorem).
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 1. Load: ?- [nonstandard_arithmetic_models].
 * 2. Multi-perspective: ?- multi_index_report(nonstandard_arithmetic_models).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: north_korea_songun_mandatrophy
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-22
% ============================================================================
% [RESOLVED MANDATROPHY] This constraint is a textbook case of mandatrophy,
% where the entire civilian margin is extracted to service a non-negotiable
% military mandate. The resolution acknowledges this is not a failed state,
% but a Snare functioning with near-perfect efficiency from the perspective
% of its architects.
% ============================================================================

:- module(constraint_north_korea_songun_mandatrophy, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: north_korea_songun_mandatrophy
 * human_readable: North Korean "Songun" (Military-First) Policy
 * domain: political/economic
 * * SUMMARY:
 * The "Songun" (Military-First) policy in North Korea mandates the absolute
 * prioritization of the Korean People's Army in all affairs of state and
 * resource allocation. This system extracts the vast majority of the nation's
 * productive capacity (the "civilian margin") to fund a massive conventional
 * military and nuclear weapons program, leading to the systemic atrophy of
 * all other state functions, including agriculture, healthcare, and energy.
 * * KEY AGENTS:
 * - DPRK Civilian Population: Subject (Powerless), experiencing the policy as
 *   a totalizing system of extraction and scarcity.
 * - The Kim Regime & KPA Leadership: Beneficiary (Institutional), for whom
 *   the policy is a coordination mechanism for regime survival and power.
 * - People's Republic of China: External Actor (Institutional), which provides
 *   economic lifelines that prevent state collapse, treating the DPRK as a
 *   strategic buffer.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(north_korea_songun_mandatrophy, 0.95). % Snare extraction >= 0.46
domain_priors:suppression_score(north_korea_songun_mandatrophy, 0.95).   % Structural property (raw, unscaled).
domain_priors:theater_ratio(north_korea_songun_mandatrophy, 0.10).       % Not performative; brutally functional.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(north_korea_songun_mandatrophy, extractiveness, 0.95).
narrative_ontology:constraint_metric(north_korea_songun_mandatrophy, suppression_requirement, 0.95).
narrative_ontology:constraint_metric(north_korea_songun_mandatrophy, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
narrative_ontology:constraint_claim(north_korea_songun_mandatrophy, enforcement).

% Binary flags
domain_priors:requires_active_enforcement(north_korea_songun_mandatrophy).

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(north_korea_songun_mandatrophy, kpa_military_leadership).
narrative_ontology:constraint_beneficiary(north_korea_songun_mandatrophy, kim_regime_continuity).
narrative_ontology:constraint_victim(north_korea_songun_mandatrophy, dprk_civilian_population).
narrative_ontology:constraint_victim(north_korea_songun_mandatrophy, civilian_infrastructure).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For the civilian population, the policy is a Snare that consumes their entire
% productive and personal margin for survival.
constraint_indexing:constraint_classification(north_korea_songun_mandatrophy, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For the regime, Songun is a Rope—a necessary coordination mechanism to ensure
% national defense and regime survival in a perceived hostile world.
constraint_indexing:constraint_classification(north_korea_songun_mandatrophy, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (SNARE)
% Analytically, the system's near-total extraction (χ = 0.95 * 1.15 * 1.2 ≈ 1.31)
% and suppression (0.95) classify it as a Snare, where the coordination function
% is entirely subsumed by the extractive one.
constraint_indexing:constraint_classification(north_korea_songun_mandatrophy, snare,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

% PERSPECTIVE 4: THE EXTERNAL STABILIZER (ROPE)
% For China, providing economic support is a Rope. It's a low-cost way to
% maintain a strategic buffer state and prevent a collapse scenario (refugee
% crisis, US troops on its border), which would be far more costly.
constraint_indexing:constraint_classification(north_korea_songun_mandatrophy, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(regional))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(north_korea_songun_mandatrophy_tests).

test(perspectival_gap_subject_vs_beneficiary) :-
    constraint_indexing:constraint_classification(north_korea_songun_mandatrophy, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(north_korea_songun_mandatrophy, rope, context(agent_power(institutional), _, _, _)),
    true.

test(analytical_classification_is_snare) :-
    constraint_indexing:constraint_classification(north_korea_songun_mandatrophy, snare, context(agent_power(analytical), _, _, _)).

test(snare_threshold_validation) :-
    narrative_ontology:constraint_metric(north_korea_songun_mandatrophy, extractiveness, E),
    narrative_ontology:constraint_metric(north_korea_songun_mandatrophy, suppression_requirement, S),
    E >= 0.46,
    S >= 0.60.

:- end_tests(north_korea_songun_mandatrophy_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect a system of near-total extraction (0.95) and suppression
 * (0.95). This is not a dysfunctional state but a highly efficient extractive
 * apparatus. The Perspectival Gap is extreme: the regime experiences it as a
 * Rope for survival (with a felt extraction χ near zero due to the π(institutional)
 * modifier), while the powerless citizen experiences it as an inescapable Snare
 * (with a felt extraction χ > 1.0). The analytical view aligns with the subject,
 * classifying it as a Snare due to the objective metrics.
 *
 * MANDATROPHY ANALYSIS:
 * This file resolves the mandatrophy by classifying the system as a Snare from
 * the analytical perspective. It avoids the error of seeing the system as a
 * "failed Rope" and instead identifies it as a "successful Snare." The mandate
 * (military power) is achieved by design through the complete atrophy of the
 * civilian margin. The external support from China acts as a separate Rope that
 * prevents the Snare from reaching its terminal state (total collapse), creating
 * a state of "brittle stability."
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_nk_mandatrophy,
    'At what point does the mandatrophic depletion of the DPRK become a strategic liability that China can no longer afford to support?',
    'Monitoring the ratio of Chinese energy/food exports to DPRK against the rate of DPRK provocations that trigger costly international escalation.',
    'If support is cut, the external Rope snaps, likely leading to state collapse (Mountain). If support holds, the Rope remains a tool of strategic arbitrage for China.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Interval represents the Songun era, from ~1995 to present.
narrative_ontology:interval(north_korea_songun_mandatrophy, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% The Songun policy intensified after its introduction during the "Arduous March."
% Extraction increased as the military and nuclear programs absorbed more resources.
% Theater ratio remains low; the system is brutally functional, not performative.

% Theater ratio over time:
narrative_ontology:measurement(nk_tr_t0, north_korea_songun_mandatrophy, theater_ratio, 0, 0.10).
narrative_ontology:measurement(nk_tr_t5, north_korea_songun_mandatrophy, theater_ratio, 5, 0.10).
narrative_ontology:measurement(nk_tr_t10, north_korea_songun_mandatrophy, theater_ratio, 10, 0.10).

% Extraction over time:
narrative_ontology:measurement(nk_ex_t0, north_korea_songun_mandatrophy, base_extractiveness, 0, 0.80).
narrative_ontology:measurement(nk_ex_t5, north_korea_songun_mandatrophy, base_extractiveness, 5, 0.90).
narrative_ontology:measurement(nk_ex_t10, north_korea_songun_mandatrophy, base_extractiveness, 10, 0.95).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The Songun policy is, at its core, a mechanism for enforcing resource
% allocation priorities across the entire state.
narrative_ontology:coordination_type(north_korea_songun_mandatrophy, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: notary_ink_dependency
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-05-21
% ============================================================================

:- module(constraint_notary_ink_dependency, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: notary_ink_dependency
 * human_readable: The Notary/Wet-Ink Persistence
 * domain: legal/institutional
 * * SUMMARY:
 * This constraint represents the mandatory requirement for physical
 * presence and manual signatures for high-value legal documents. Despite
 * the existence of superior cryptographic verification, the "Notary"
 * remains a Piton: an inertial anchor used for psychological signaling
 * and institutional risk-mitigation.
 * * KEY AGENTS:
 * - The Signatory: Subject (Powerless). Must travel and pay for a ritual.
 * - The Legal Institution: Beneficiary (Institutional). Relies on the
 * tradition to manage liability and maintain professional gatekeeping.
 * - The Digital Auditor: Auditor (Analytical). Identifies the theater.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(notary_ink_dependency, 0.35). % Mountain <= 0.15, Rope <= 0.15, Snare >= 0.46. This is mid-range.
domain_priors:suppression_score(notary_ink_dependency, 0.88).   % High: Many documents are legally invalid without this specific ritual.
domain_priors:theater_ratio(notary_ink_dependency, 0.92).       % Piton detection (>= 0.70). Very high.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(notary_ink_dependency, extractiveness, 0.35).
narrative_ontology:constraint_metric(notary_ink_dependency, suppression_requirement, 0.88).
narrative_ontology:constraint_metric(notary_ink_dependency, theater_ratio, 0.92).

% Constraint self-claim (what does the constraint claim to be?)
narrative_ontology:constraint_claim(notary_ink_dependency, coordination).

% Binary flags
narrative_ontology:has_sunset_clause(notary_ink_dependency).      % Mandatory if Scaffold. Assumed for e-governance transitions.
domain_priors:requires_active_enforcement(notary_ink_dependency). % Required for Tangled Rope. Courts enforce notary requirements.

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(notary_ink_dependency, legal_institutions).
narrative_ontology:constraint_victim(notary_ink_dependency, signatories).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SIGNATORY (SNARE)
% For the individual, the need to find a physical notary during business
% hours is a Snare—a low-utility friction that restricts movement.
constraint_indexing:constraint_classification(notary_ink_dependency, snare,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BANKING SYSTEM (ROPE)
% Viewed institutionally, the notary is a Rope. It provides a shared
% standard of "High-Trust" that coordinates risk across different jurisdictions.
constraint_indexing:constraint_classification(notary_ink_dependency, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE DIGITAL AUDITOR (PITON)
% Analytically, the notary is a Piton. It is an artifact of the 19th-century
% coordination stack maintained solely by institutional habit.
constraint_indexing:constraint_classification(notary_ink_dependency, piton,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(arbitrage),
            spatial_scope(global))) :-
    domain_priors:theater_ratio(notary_ink_dependency, TR), TR > 0.70.

% PERSPECTIVE 4: THE E-GOVERNANCE ADVOCATE (SCAFFOLD)
% In jurisdictions transitioning to digital-first, the notary is a
% Scaffold—a bridge to keep the system running until DIDs are universal.
constraint_indexing:constraint_classification(notary_ink_dependency, scaffold,
    context(agent_power(organized),
            time_horizon(generational),
            exit_options(constrained),
            spatial_scope(national))) :-
    narrative_ontology:has_sunset_clause(notary_ink_dependency).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(notary_ink_dependency_tests).

test(piton_detection) :-
    % Ensure the analytical perspective identifies this as a Piton due to theater_ratio.
    constraint_indexing:constraint_classification(notary_ink_dependency, piton, context(agent_power(analytical), _, _, _)).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(notary_ink_dependency, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(notary_ink_dependency, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(scaffold_conditions_met) :-
    % Verify scaffold classification is possible because its conditions are met.
    narrative_ontology:has_sunset_clause(notary_ink_dependency),
    narrative_ontology:constraint_beneficiary(notary_ink_dependency, _).

:- end_tests(notary_ink_dependency_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The Notary Ink Dependency is a high-theater constraint (TR = 0.92).
 * It functions as a Piton because its original "Rope" function (manual
 * verification by a trusted witness) has been made obsolete by digital
 * signatures, yet the institutional structure remains "hooked" into it.
 * The Perspectival Gap exists because institutions confuse the "Ritual
 * of Trust" (Rope) with the "Mechanism of Security," while individuals
 * experience only the coercive friction (Snare). The Scaffold perspective
 * acknowledges its temporary utility in a transitional legal system.
 *
 * MANDATROPHY ANALYSIS:
 * This represents "Inertial Mandatrophy." The coordination function
 * (verifying identity) is still performed, but at a vastly higher cost
 * than available alternatives, purely to preserve institutional tradition.
 * The extraction (0.35) consists of "Friction Costs" (time, travel, fees).
 * It is not predatory, but it is no longer optimized for coordination.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_notary_psychological_deterrence,
    'Does the physical act of "wet ink" presence deter fraud more than digital signatures?',
    'Comparative study of fraud rates in e-notary vs. traditional notary states.',
    'If yes, the Piton is actually a Rope; if no, it is a pure Piton.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(notary_ink_dependency, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This constraint is not high-extraction, but temporal data is included to model
% its degradation from a functional Rope into a high-theater Piton.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(notary_ink_dependency_tr_t0, notary_ink_dependency, theater_ratio, 0, 0.20).
narrative_ontology:measurement(notary_ink_dependency_tr_t5, notary_ink_dependency, theater_ratio, 5, 0.65).
narrative_ontology:measurement(notary_ink_dependency_tr_t10, notary_ink_dependency, theater_ratio, 10, 0.92).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(notary_ink_dependency_ex_t0, notary_ink_dependency, base_extractiveness, 0, 0.30).
narrative_ontology:measurement(notary_ink_dependency_ex_t5, notary_ink_dependency, base_extractiveness, 5, 0.33).
narrative_ontology:measurement(notary_ink_dependency_ex_t10, notary_ink_dependency, base_extractiveness, 10, 0.35).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
narrative_ontology:coordination_type(notary_ink_dependency, information_standard).

% Network relationships (structural influence edges)
% The persistence of wet-ink requirements structurally slows the adoption of
% more efficient digital identity systems.
narrative_ontology:affects_constraint(notary_ink_dependency, digital_identity_adoption).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: nuclear_order_2026
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_nuclear_order_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: nuclear_order_2026
 * human_readable: Post-New START Strategic Ambiguity
 * domain: geopolitical/technological
 * * SUMMARY:
 * Following the expiration of the New START treaty on February 5, 2026, the global
 * nuclear framework has shifted from a regulated "Rope" of coordination to a
 * "Tangled Rope" of strategic ambiguity. The loss of mandatory ceilings (1,550 warheads)
 * and verification regimes creates an asymmetric environment where nuclear powers
 * extract security at the cost of global existential risk.
 * * KEY AGENTS:
 * - Non-Nuclear States/Global Population: Subject (Powerless)
 * - Nuclear Weapon States (US/Russia/China): Beneficiary (Institutional)
 * - Arms Control Auditors/IAEA: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
% Extraction is high (0.55) due to resource diversion into arms racing and the extraction of security from non-nuclear states.
domain_priors:base_extractiveness(nuclear_order_2026, 0.55).
% Suppression is high (0.88) as there is no viable alternative to the nuclear state paradigm for non-nuclear states.
domain_priors:suppression_score(nuclear_order_2026, 0.88).
% Theater ratio is high (0.72) post-expiration as shadow talks (Oman/Abu Dhabi) maintain the "theater" of control without legal limits.
domain_priors:theater_ratio(nuclear_order_2026, 0.72).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(nuclear_order_2026, extractiveness, 0.55).
narrative_ontology:constraint_metric(nuclear_order_2026, suppression_requirement, 0.88).
narrative_ontology:constraint_metric(nuclear_order_2026, theater_ratio, 0.72).

% Constraint self-claim (what does the constraint claim to be?)
% It claims to be a mechanism of enforcement (deterrence).
narrative_ontology:constraint_claim(nuclear_order_2026, enforcement).

% Binary flags
narrative_ontology:has_sunset_clause(nuclear_order_2026).      % For the Scaffold perspective on shadow talks.
domain_priors:requires_active_enforcement(nuclear_order_2026). % Required for Tangled Rope; the threat of use is the enforcement.

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(nuclear_order_2026, nuclear_weapon_states).
narrative_ontology:constraint_victim(nuclear_order_2026, non_combatant_populations).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The powerless view the lack of limits as a predatory trap where their safety
% is the extracted variable for superpower posture.
constraint_indexing:constraint_classification(nuclear_order_2026, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(global))).

% PERSPECTIVE 2: THE BENEFICIARY (TANGLED ROPE)
% Institutional actors view this as coordination (Rope) for deterrence,
% but the asymmetric extraction of security makes it "Tangled."
constraint_indexing:constraint_classification(nuclear_order_2026, tangled_rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (PITON)
% The system auditor sees the current "Shadow Diplomacy" as a Piton:
% inertial maintenance of a non-functional order (Theater Ratio > 0.70).
constraint_indexing:constraint_classification(nuclear_order_2026, piton,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))) :-
    domain_priors:theater_ratio(nuclear_order_2026, TR), TR > 0.70.

% PERSPECTIVE 4: THE ARCHITECT (SCAFFOLD)
% The Oman/Abu Dhabi talks are classified as Scaffold: temporary support
% with an implied (though fragile) sunset clause to restore a formal treaty.
constraint_indexing:constraint_classification(nuclear_order_2026, scaffold,
    context(agent_power(organized),
            time_horizon(generational),
            exit_options(constrained),
            spatial_scope(continental))) :-
    narrative_ontology:has_sunset_clause(nuclear_order_2026).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(nuclear_order_2026_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(nuclear_order_2026, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(nuclear_order_2026, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(piton_threshold) :-
    % Verify the theater ratio meets the threshold for Piton classification.
    domain_priors:theater_ratio(nuclear_order_2026, TR),
    TR >= 0.70.

test(tangled_rope_properties) :-
    % Verify all three structural properties for Tangled Rope are present.
    narrative_ontology:constraint_beneficiary(nuclear_order_2026, _),
    narrative_ontology:constraint_victim(nuclear_order_2026, _),
    domain_priors:requires_active_enforcement(nuclear_order_2026).

:- end_tests(nuclear_order_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The classification of 'piton' for the analytical observer stems from the
 * high theater_ratio (0.72). While formal limits have vanished, the
 * performative shell of diplomacy in Oman and Abu Dhabi continues,
 * masking the accumulation of nuclear warheads. The high extraction (0.55) and
 * suppression (0.88) reflect the coercive reality for non-nuclear states.
 * * PERSPECTIVAL GAP & MANDATROPHY ANALYSIS:
 * The 'Subject' (non-nuclear states) sees a Snare because they have zero exit
 * options from a nuclear escalation and bear the existential risk. The
 * 'Institutional' beneficiary (nuclear states) sees a Tangled Rope because they
 * still utilize the "Rope" of hotline communications and shadow talks to
 * prevent total system collapse, while simultaneously extracting security at
 * the expense of global stability. This Tangled Rope classification correctly
 * resolves Mandatrophy by acknowledging both the genuine (if degraded)
 * coordination function and the severe asymmetric extraction, preventing a
 * misclassification as a pure Snare from the institutional view.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_nuclear_2026,
    'Is the shadow diplomacy in Oman a genuine Scaffold or a performative Piton?',
    'Verification of technical data exchange resumption vs. continued silence and unverifiable claims.',
    'Scaffold implies eventual de-escalation; Piton implies permanent managed risk and arms racing.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(nuclear_order_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Modeling the drift from the Treaty Era (T=0) to the post-expiration era.
% Theater ratio rises as formal verification is replaced by "shadow" signaling.
narrative_ontology:measurement(nuc_tr_t0, nuclear_order_2026, theater_ratio, 0, 0.15).
narrative_ontology:measurement(nuc_tr_t5, nuclear_order_2026, theater_ratio, 5, 0.45).
narrative_ontology:measurement(nuc_tr_t10, nuclear_order_2026, theater_ratio, 10, 0.72).

% Extraction rises as the costs of unregulated arms racing and uncertainty accumulate.
narrative_ontology:measurement(nuc_ex_t0, nuclear_order_2026, base_extractiveness, 0, 0.12).
narrative_ontology:measurement(nuc_ex_t5, nuclear_order_2026, base_extractiveness, 5, 0.38).
narrative_ontology:measurement(nuc_ex_t10, nuclear_order_2026, base_extractiveness, 10, 0.55).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The system of deterrence and shadow diplomacy is an enforcement mechanism.
narrative_ontology:coordination_type(nuclear_order_2026, enforcement_mechanism).

% Network relationships (structural influence edges)
% Nuclear instability directly impacts the stability of global trade and logistics.
narrative_ontology:affects_constraint(nuclear_order_2026, global_supply_chains).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: nuclear_vacuum_2026
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2023-10-27
% ============================================================================

:- module(constraint_nuclear_vacuum_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: nuclear_vacuum_2026
 * human_readable: The New START Expiration (Post-Arms Control Era)
 * domain: political
 * * SUMMARY:
 * At 12:00 AM on February 5, 2026, the New START treaty expired, ending 50 years 
 * of structured nuclear arms control between the U.S. and Russia. This creates 
 * a "Strategic Vacuum" where limits on warheads and mandatory inspections 
 * vanish, replaced by "Strategic Ambiguity." The shift encourages a tri-polar 
 * nuclear expansion (U.S., Russia, China) without a legal framework for verification.
 * * KEY AGENTS:
 * - Global Non-Combatants: Subject (Powerless)
 * - Nuclear Superpowers (U.S./Russia/China): Beneficiary (Institutional)
 * - Arms Control Experts/Diplomats: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Extraction is high (0.58) as the lapse diverts civilizational resources 
% into a tri-polar arms race and extracts global security margin.
domain_priors:base_extractiveness(nuclear_vacuum_2026, 0.58).

% Suppression is high (0.85) as the lack of a legal framework suppresses 
% diplomatic alternatives and stabilizes through fear/ambiguity.
domain_priors:suppression_score(nuclear_vacuum_2026, 0.85).

% Theater ratio is moderate (0.42) as various back-channel talks provide a 
% "theater" of diplomacy while the core verifiable limits have dissolved.
domain_priors:theater_ratio(nuclear_vacuum_2026, 0.42).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(nuclear_vacuum_2026, extractiveness, 0.58).
narrative_ontology:constraint_metric(nuclear_vacuum_2026, suppression_requirement, 0.85).
narrative_ontology:constraint_metric(nuclear_vacuum_2026, theater_ratio, 0.42).

% Constraint self-claim: The new state of ambiguity is enforced by mutual threat.
narrative_ontology:constraint_claim(nuclear_vacuum_2026, enforcement).

% Binary flags: The new "stability" requires the active threat of retaliation.
domain_priors:requires_active_enforcement(nuclear_vacuum_2026).

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(nuclear_vacuum_2026, defense_industrial_complexes).
narrative_ontology:constraint_victim(nuclear_vacuum_2026, global_civilian_population).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For the global population, the expiration is a Snare. The effective extraction
% is amplified by their powerlessness (χ = 0.58 * 1.5 * 1.2 = 1.044).
% It is a predatory trap of existential risk where they are "trapped" without any exit option.
constraint_indexing:constraint_classification(nuclear_vacuum_2026, snare,
    context(agent_power(powerless),
            time_horizon(generational),
            exit_options(trapped),
            spatial_scope(global))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Superpowers view this as a Rope. Their institutional power negates the
% extraction (χ = 0.58 * -0.2 * 1.2 = -0.1392), making it appear as pure,
% necessary coordination (mutual deterrence).
constraint_indexing:constraint_classification(nuclear_vacuum_2026, rope,
    context(agent_power(institutional),
            time_horizon(historical),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analytical view computes a Tangled Rope. The base extraction (0.58) is high,
% suppression (0.85) is high, and it has both a coordination function (beneficiary)
% and asymmetric extraction (victim), and requires active enforcement.
% Effective extraction χ = 0.58 * 1.15 * 1.2 = 0.80.
constraint_indexing:constraint_classification(nuclear_vacuum_2026, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(nuclear_vacuum_2026_tests).

test(perspectival_gap_subject_vs_beneficiary) :-
    constraint_indexing:constraint_classification(nuclear_vacuum_2026, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(nuclear_vacuum_2026, rope, context(agent_power(institutional), _, _, _)).

test(analytical_classification_is_tangled_rope) :-
    % Verify the analytical observer correctly identifies the Tangled Rope structure.
    constraint_indexing:constraint_classification(nuclear_vacuum_2026, tangled_rope, context(agent_power(analytical), _, _, _)).

test(tangled_rope_structural_requirements_met) :-
    % A Tangled Rope requires all three of these properties.
    domain_priors:requires_active_enforcement(nuclear_vacuum_2026),
    narrative_ontology:constraint_beneficiary(nuclear_vacuum_2026, _),
    narrative_ontology:constraint_victim(nuclear_vacuum_2026, _).

:- end_tests(nuclear_vacuum_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect the shift from a managed, verifiable arms control regime (low extraction Rope)
 * to an unmanaged "Strategic Ambiguity" that functions as a Tangled Rope. The extraction (0.58)
 * represents the diversion of resources to an arms race and the erosion of global security.
 * The suppression (0.85) reflects how this ambiguity forecloses diplomatic alternatives and
 * enforces stability through existential threat.
 *
 * The Perspectival Gap is stark:
 * - The powerless global population experiences this as a Snare, feeling the full amplified
 *   extraction (χ=1.044) as pure risk imposed upon them.
 * - The institutional nuclear powers experience it as a Rope, as their power inverts the
 *   extraction (χ=-0.14), making the system feel like a cost-free coordination mechanism.
 * - The analytical view, balancing these, identifies the Tangled Rope: a system that performs
 *   a coordination function (deterrence) but does so via high asymmetric extraction and coercion.
 *
 * * MANDATROPHY ANALYSIS:
 * The Tangled Rope classification is critical for Mandatrophy resolution. It prevents the system
 * from accepting the institutional view (Rope) or the subject's view (Snare) at face value.
 * By requiring both a coordination function (beneficiary) and asymmetric extraction (victim),
 * it correctly identifies that this is not pure coordination, nor is it pure predation. It is a
 * hybrid system where a coordination claim is used to legitimize high extraction.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_new_start_2026,
    'Will "Strategic Ambiguity" settle into a stable, tacitly-agreed Rope or decay into a permanent, expansionist Snare?',
    'Analysis of warhead deployment data and launch-on-warning policy shifts from all three superpowers over the next 36 months.',
    'If tacit limits hold, it may re-classify as a Rope. If expansion accelerates, it solidifies as a Snare from all perspectives.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(nuclear_vacuum_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Tracking the drift from the Treaty Regime (T=0) to the post-expiration era.
% Theater ratio rises as "talks" become the only proxy for real limits.
narrative_ontology:measurement(nuc_v_tr_t0, nuclear_vacuum_2026, theater_ratio, 0, 0.10).
narrative_ontology:measurement(nuc_v_tr_t5, nuclear_vacuum_2026, theater_ratio, 5, 0.25).
narrative_ontology:measurement(nuc_v_tr_t10, nuclear_vacuum_2026, theater_ratio, 10, 0.42).

% Extraction spikes as the legal framework dissolves.
narrative_ontology:measurement(nuc_v_ex_t0, nuclear_vacuum_2026, base_extractiveness, 0, 0.15).
narrative_ontology:measurement(nuc_v_ex_t5, nuclear_vacuum_2026, base_extractiveness, 5, 0.38).
narrative_ontology:measurement(nuc_v_ex_t10, nuclear_vacuum_2026, base_extractiveness, 10, 0.58).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type: The system's stability relies on mutual threat.
narrative_ontology:coordination_type(nuclear_vacuum_2026, enforcement_mechanism).

% Network relationships: The state of nuclear stability directly impacts
% the security of global infrastructure and supply chains.
narrative_ontology:affects_constraint(nuclear_vacuum_2026, global_shipping_security).
narrative_ontology:affects_constraint(nuclear_vacuum_2026, semiconductor_supply).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */