% ============================================================================
% CONSTRAINT STORY: radiologic_diagnostic_threshold
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-27
% ============================================================================

:- module(constraint_radiologic_diagnostic_threshold, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: radiologic_diagnostic_threshold
 * human_readable: The Radiologic Diagnostic Threshold
 * domain: medical/technological/legal
 * * SUMMARY:
 * This constraint governs the classification of medical imaging findings into "benign," "incidental," or "critical."
 * It is not a purely biological fact but an indexical classification dependent on the reader's
 * power level, legal exposure, and technological tools. Findings oscillate between "ignore" and "urgent"
 * as contextual priors change. Frontline workers experience the threshold as a Snare of liability,
 * while institutions present it as a Mountain of objective safety.
 * * KEY AGENTS:
 * - Frontline Radiologist: Subject (Powerless), facing high volume and legal pressure.
 * - Hospital Administrator/Guideline Author: Beneficiary (Institutional), defining "standard of care".
 * - Retrospective Audit Panel: Auditor (Analytical), reclassifying past ambiguity with hindsight.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(radiologic_diagnostic_threshold, 0.70). % High extraction from cognitive load and liability shift.
domain_priors:suppression_score(radiologic_diagnostic_threshold, 0.60).   % Alternatives (e.g., probabilistic reporting) are suppressed by legal/billing systems.
domain_priors:theater_ratio(radiologic_diagnostic_threshold, 0.15).       % Low theater; the system is brutally functional, not performative.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(radiologic_diagnostic_threshold, extractiveness, 0.70).
narrative_ontology:constraint_metric(radiologic_diagnostic_threshold, suppression_requirement, 0.60).
narrative_ontology:constraint_metric(radiologic_diagnostic_threshold, theater_ratio, 0.15).

% Constraint self-claim (what does the constraint claim to be?)
% It claims to be an objective, scientific fact (a Mountain).
narrative_ontology:constraint_claim(radiologic_diagnostic_threshold, natural_law).

% Binary flags
domain_priors:requires_active_enforcement(radiologic_diagnostic_threshold). % Malpractice litigation and peer review enforce the thresholds.

% Structural property derivation hooks:
% Required for Tangled Rope classification.
narrative_ontology:constraint_beneficiary(radiologic_diagnostic_threshold, malpractice_insurers).
narrative_ontology:constraint_beneficiary(radiologic_diagnostic_threshold, hospital_administrators).
narrative_ontology:constraint_victim(radiologic_diagnostic_threshold, frontline_radiologists).
narrative_ontology:constraint_victim(radiologic_diagnostic_threshold, overdiagnosed_patients).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The frontline radiologist, facing high volume and legal risk, experiences
% the threshold as a coercive liability trap.
constraint_indexing:constraint_classification(radiologic_diagnostic_threshold, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The hospital administrator or guideline author views the threshold as a
% necessary coordination tool for standardizing care and managing risk.
constraint_indexing:constraint_classification(radiologic_diagnostic_threshold, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The system auditor sees both the coordination function and the asymmetric
% extraction, classifying it as a Tangled Rope.
constraint_indexing:constraint_classification(radiologic_diagnostic_threshold, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(radiologic_diagnostic_threshold_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(radiologic_diagnostic_threshold, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(radiologic_diagnostic_threshold, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless == snare,
    TypeInstitutional == rope,
    TypePowerless \= TypeInstitutional.

test(analytical_classification_is_tangled_rope) :-
    % Verify the analytical observer correctly identifies the Tangled Rope.
    constraint_indexing:constraint_classification(radiologic_diagnostic_threshold, tangled_rope, context(agent_power(analytical), _, _, _)).

test(threshold_validation_high_extraction) :-
    % Verify the base extractiveness is in the Snare/Tangled Rope range.
    narrative_ontology:constraint_metric(radiologic_diagnostic_threshold, extractiveness, E),
    E >= 0.46.

:- end_tests(radiologic_diagnostic_threshold_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect a system that began as a coordination mechanism (Rope) but has
 * become highly extractive. The base extractiveness of 0.70 captures the intense
 * cognitive and legal burden shifted onto frontline radiologists (the "liability tax").
 * The suppression score of 0.60 reflects how legal and billing systems actively punish
 * more nuanced, probabilistic approaches, locking in the current paradigm.
 *
 * The Perspectival Gap is stark:
 * - The Radiologist (powerless) experiences a Snare. Any deviation from the rigid
 *   threshold creates immense personal risk.
 * - The Administrator (institutional) sees a Rope. The thresholds are essential tools
 *   for standardizing care, managing throughput, and defending against litigation.
 * - The Analytical view reveals the Tangled Rope. It is a system with a genuine
 *   coordination function that has been co-opted for asymmetric risk transfer.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * A simple analysis might label this system a pure Snare, focusing only on the
 * harm to clinicians. However, this would be a mandatrophy, ignoring the genuine
 * coordination problem the thresholds solve (i.e., preventing chaotic, non-standard
 * diagnostic practices). The Tangled Rope classification correctly captures this
 * duality: it acknowledges the vital coordination function (the Rope aspect) while
 * simultaneously flagging the severe, asymmetric extraction (the Snare aspect) that
 * makes the system pathological. This prevents the system from recommending a naive
 * "dismantle" solution that would ignore the underlying coordination need.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_radiologic_diagnostic_threshold,
    'Is there an objective, context-free "correct" diagnostic threshold, or is it purely a social/legal construct?',
    'Longitudinal outcome studies comparing systems with different thresholds vs. analysis of legal precedent evolution.',
    'If objective (Mountain), errors are absolute failures. If constructed (Tangled Rope), errors are coordination failures.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(radiologic_diagnostic_threshold, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This constraint intensified as malpractice pressure and patient volume grew.
% The data models extraction accumulation over the last two decades.
%
% Theater ratio over time (slight increase due to bureaucratic checklists):
narrative_ontology:measurement(rdt_tr_t0, radiologic_diagnostic_threshold, theater_ratio, 0, 0.05).
narrative_ontology:measurement(rdt_tr_t5, radiologic_diagnostic_threshold, theater_ratio, 5, 0.10).
narrative_ontology:measurement(rdt_tr_t10, radiologic_diagnostic_threshold, theater_ratio, 10, 0.15).

% Extraction over time (significant increase from liability shift):
narrative_ontology:measurement(rdt_ex_t0, radiologic_diagnostic_threshold, base_extractiveness, 0, 0.40).
narrative_ontology:measurement(rdt_ex_t5, radiologic_diagnostic_threshold, base_extractiveness, 5, 0.62).
narrative_ontology:measurement(rdt_ex_t10, radiologic_diagnostic_threshold, base_extractiveness, 10, 0.70).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The constraint's primary function is to create a shared standard for interpreting medical data.
narrative_ontology:coordination_type(radiologic_diagnostic_threshold, information_standard).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: rafah_crossing_lifeline
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-05-21
% ============================================================================

:- module(constraint_rafah_crossing_lifeline, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: rafah_crossing_lifeline
 * human_readable: The Rafah Medical Bottleneck
 * domain: political/geopolitical
 * * SUMMARY:
 * The Rafah crossing serves as a "literal lifeline" for Palestinians needing 
 * medical treatment. Under a hypothetical 2026 peace plan, it has reopened as a 
 * highly restricted, multi-layered security bottleneck with a strict daily
 * throughput limit. It is a temporary measure tied to demilitarization milestones.
 * * KEY AGENTS:
 * - The Patient: Subject (Powerless) - Individuals like Mohammed Mahdi seeking 
 * urgent medical exit from a pool of thousands.
 * - The Oversight Committee: Beneficiary (Institutional) - A multi-entity security 
 * body (e.g., Israel, Egypt, EU, PA) managing the crossing.
 * - The UN Auditor: Auditor (Analytical) - Tracking the 18,500 people needing 
 * medical evacuation versus the 50-person daily cap.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Extraction is low (not a rent-seeking toll), but Suppression is extreme due to
% the severe throughput limit and security checks.
domain_priors:base_extractiveness(rafah_crossing_lifeline, 0.15).
domain_priors:suppression_score(rafah_crossing_lifeline, 0.95).
domain_priors:theater_ratio(rafah_crossing_lifeline, 0.40).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(rafah_crossing_lifeline, extractiveness, 0.15).
narrative_ontology:constraint_metric(rafah_crossing_lifeline, suppression_requirement, 0.95).
narrative_ontology:constraint_metric(rafah_crossing_lifeline, theater_ratio, 0.40).

% Constraint self-claim: It is presented as a necessary coordination mechanism.
narrative_ontology:constraint_claim(rafah_crossing_lifeline, coordination).

% Binary flags
domain_priors:requires_active_enforcement(rafah_crossing_lifeline).
narrative_ontology:has_sunset_clause(rafah_crossing_lifeline). % Tied to peace plan milestones

% Structural property derivation hooks:
% has_coordination_function/1 is derived from constraint_beneficiary/2
narrative_ontology:constraint_beneficiary(rafah_crossing_lifeline, successful_medical_evacuees).
narrative_ontology:constraint_beneficiary(rafah_crossing_lifeline, regional_security_actors).
narrative_ontology:constraint_victim(rafah_crossing_lifeline, waitlisted_patients).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE PATIENT (MOUNTAIN)
% With extreme suppression (S=0.95) and low extraction, the bottleneck is
% experienced as an immovable, natural-law-like barrier.
constraint_indexing:constraint_classification(rafah_crossing_lifeline, mountain,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE OVERSIGHT COMMITTEE (SCAFFOLD)
% Viewed by authorities as a temporary, high-security bridge to demilitarization,
% a necessary scaffold to support a fragile peace process.
constraint_indexing:constraint_classification(rafah_crossing_lifeline, scaffold,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(constrained),
            spatial_scope(regional))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (ROPE)
% From a global, analytical view, the low extraction (χ = 0.15 * 1.15 * 1.2 = 0.207)
% highlights the coordination function (enabling medical evacuation, however limited)
% over the intense, localized suppression.
constraint_indexing:constraint_classification(rafah_crossing_lifeline, rope,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(rafah_crossing_lifeline_tests).

test(perspectival_gap) :-
    % Verify the gap between the patient (Mountain) and the committee (Scaffold).
    constraint_indexing:constraint_classification(rafah_crossing_lifeline, mountain, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(rafah_crossing_lifeline, scaffold, context(agent_power(institutional), _, _, _)).

test(scaffold_validation) :-
    % Verify it is classified as a Scaffold and has the required sunset clause.
    constraint_indexing:constraint_classification(rafah_crossing_lifeline, scaffold, _),
    narrative_ontology:has_sunset_clause(rafah_crossing_lifeline).

test(suppression_intensity) :-
    domain_priors:suppression_score(rafah_crossing_lifeline, S),
    S > 0.90. % Reflects the multi-layered security bottleneck.

:- end_tests(rafah_crossing_lifeline_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The Perspectival Gap is extreme, driven by the disparity between the constraint's
 * function and its throughput. To a patient with a life-threatening condition,
 * the 50-person daily cap makes the crossing an effective Mountain; it is an
 * immovable object. To the peace plan architects, it is a Scaffold—a temporary,
 * high-friction necessity to enable a political transition. The analytical
 * observer sees a low-extraction Rope, focusing on the coordination function
 * itself, abstracted from the human cost of its inefficiency.
 *
 * * MANDATROPHY ANALYSIS:
 * This is not a Tangled Rope, so Mandatrophy is not the primary risk. However,
 * the Scaffold classification correctly prevents mislabeling. It acknowledges
 * the coordination function (unlike a Snare) but also its temporary, constructed
 * nature (unlike a Mountain), contingent on the sunset clause being honored.
 * If the sunset clause is ignored, it risks degrading into a Piton or Snare.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_rafah_demilitarization,
    'Will the political actors meet the demilitarization milestones required to trigger the sunset clause?',
    'Direct verification by the designated European border-monitoring team.',
    'If False: The Scaffold collapses, likely reverting to a closed border (Mountain/Snare). If True: The Scaffold is dismantled as planned.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(rafah_crossing_lifeline, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Theater ratio: Rises as political posturing and bureaucratic friction
% begin to overshadow the humanitarian function.
narrative_ontology:measurement(rafah_tr_t0, rafah_crossing_lifeline, theater_ratio, 0, 0.10).
narrative_ontology:measurement(rafah_tr_t5, rafah_crossing_lifeline, theater_ratio, 5, 0.25).
narrative_ontology:measurement(rafah_tr_t10, rafah_crossing_lifeline, theater_ratio, 10, 0.40).

% Extraction: Remains low and stable, as the primary goal is security and
% control, not rent-seeking.
narrative_ontology:measurement(rafah_ex_t0, rafah_crossing_lifeline, base_extractiveness, 0, 0.15).
narrative_ontology:measurement(rafah_ex_t5, rafah_crossing_lifeline, base_extractiveness, 5, 0.15).
narrative_ontology:measurement(rafah_ex_t10, rafah_crossing_lifeline, base_extractiveness, 10, 0.15).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type: The crossing allocates a scarce resource (exit permits).
narrative_ontology:coordination_type(rafah_crossing_lifeline, resource_allocation).

% Network relationships: The crossing's existence is contingent on a broader
% political framework. Its failure would impact the framework's viability.
narrative_ontology:affects_constraint(rafah_crossing_lifeline, gaza_peace_plan_2026).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: railway_gauge_standard
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-05-21
% ============================================================================

:- module(constraint_railway_gauge_standard, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: railway_gauge_standard
 * human_readable: The Standard Railway Gauge (4 ft 8.5 in / 1435 mm)
 * domain: technological/economic
 * * SUMMARY:
 * The Standard Gauge is a classic example of technological lock-in and path dependence.
 * It was set by George Stephenson based on existing horse-drawn coal wagons. Despite
 * "Broad Gauge" alternatives offering better stability and speed, the Standard Gauge
 * became a global invariant due to network effects, creating an immutable 'Mountain'
 * of infrastructure that now functions as an inertial 'Piton'.
 * * KEY AGENTS:
 * - The Passenger/Freight User: Subject (Powerless)
 * - The National Transport Authority: Beneficiary (Institutional)
 * - Isambard Kingdom Brunel (Innovator): Subject (Moderate)
 * - The Systems Auditor: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(railway_gauge_standard, 0.30). % Extracts "optimal technical performance" by forcing a sub-optimal standard.
domain_priors:suppression_score(railway_gauge_standard, 0.20).   % Persists via inertia and network effects, not active suppression.
domain_priors:theater_ratio(railway_gauge_standard, 0.75).       % High ratio of performative compliance (maintaining the standard) to functional optimality.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(railway_gauge_standard, extractiveness, 0.30).
narrative_ontology:constraint_metric(railway_gauge_standard, suppression_requirement, 0.20).
narrative_ontology:constraint_metric(railway_gauge_standard, theater_ratio, 0.75).

% Constraint self-claim (what does the constraint claim to be?)
narrative_ontology:constraint_claim(railway_gauge_standard, coordination).

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(railway_gauge_standard, interconnected_logistics_operators).
narrative_ontology:constraint_victim(railway_gauge_standard, high_speed_rail_engineers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE PASSENGER / FREIGHT USER (MOUNTAIN)
% For the ordinary user, the gauge is an immutable fact of the world.
constraint_indexing:constraint_classification(railway_gauge_standard, mountain,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE NATIONAL TRANSPORT AUTHORITY (ROPE)
% For the regulator, the standard is a pure coordination mechanism.
constraint_indexing:constraint_classification(railway_gauge_standard, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(continental))).

% PERSPECTIVE 3: ISAMBARD KINGDOM BRUNEL (THE INNOVATOR) (SNARE)
% For the innovator with a superior but incompatible alternative, the standard is a snare.
constraint_indexing:constraint_classification(railway_gauge_standard, snare,
    context(agent_power(moderate),
            time_horizon(biographical),
            exit_options(constrained),
            spatial_scope(national))).

% PERSPECTIVE 4: THE SYSTEMS AUDITOR (PITON)
% The analyst sees a constraint that was once a functional Rope but now persists
% through inertia, creating more friction than it resolves.
constraint_indexing:constraint_classification(railway_gauge_standard, piton,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))) :-
    domain_priors:theater_ratio(railway_gauge_standard, TR), TR > 0.70.

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(railway_gauge_standard_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between key agents.
    constraint_indexing:constraint_classification(railway_gauge_standard, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(railway_gauge_standard, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(railway_gauge_standard, TypeModerate, context(agent_power(moderate), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypeInstitutional \= TypeModerate.

test(piton_classification_trigger) :-
    % Verify the Piton classification is correctly triggered by the theater ratio.
    domain_priors:theater_ratio(railway_gauge_standard, TR),
    ( TR > 0.70 ->
        constraint_indexing:constraint_classification(railway_gauge_standard, piton, context(agent_power(analytical), _, _, _))
    ;
        \+ constraint_indexing:constraint_classification(railway_gauge_standard, piton, context(agent_power(analytical), _, _, _))
    ).

:- end_tests(railway_gauge_standard_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This constraint is a classic case of path dependence. The scores reflect its dual nature.
 * The base extractiveness (0.30) is moderate, representing the opportunity cost of not using a
 * technically superior gauge. Suppression (0.20) is low because the standard persists due to
 * massive network effects and sunk costs (inertia), not active coercion.
 * The key metric is the high theater_ratio (0.75). This captures the modern reality: immense
 * effort is spent maintaining a sub-optimal standard (performative activity) rather than
 * pursuing a more functional solution. This high ratio is what justifies the Piton classification
 * from an analytical perspective, showing its degradation from a functional Rope.
 *
 * PERSPECTIVAL GAP:
 * - To a user (powerless), it's an unchangeable Mountain.
 * - To a regulator (institutional), it's a valuable Rope for coordination.
 * - To an innovator (moderate), it's a Snare that strangles better technology.
 * - To an analyst (analytical), it's a Piton, a relic maintained by inertia.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_railway_gauge_standard,
    "Can digital 'automatic gauge-changing' wheels truly untie the 'Snare' of the Standard Gauge, or is the cost of retrofitting always an insurmountable 'Mountain'?",
    "Monitor the adoption rate and economic viability of variable-gauge axles in cross-border corridors (e.g., Spain/France).",
    "If successful: Different gauges can coexist more flexibly (Rope). If too costly: Incompatibility remains a permanent 'Mountain' of friction.",
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(railway_gauge_standard, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This constraint did not start as a Piton. It was a functional Rope.
% The theater_ratio increased over time as the standard became more of a
% liability due to technological advances it could not accommodate.
% This drift from functional coordination to inertial maintenance is key.
% Base extractiveness is low, so temporal data is not strictly required, but
% is included for theater_ratio to model the lifecycle drift into a Piton.

% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(rgs_tr_t0, railway_gauge_standard, theater_ratio, 0, 0.10).
narrative_ontology:measurement(rgs_tr_t5, railway_gauge_standard, theater_ratio, 5, 0.45).
narrative_ontology:measurement(rgs_tr_t10, railway_gauge_standard, theater_ratio, 10, 0.75).

% Extraction over time (remains relatively stable):
narrative_ontology:measurement(rgs_ex_t0, railway_gauge_standard, base_extractiveness, 0, 0.30).
narrative_ontology:measurement(rgs_ex_t5, railway_gauge_standard, base_extractiveness, 5, 0.30).
narrative_ontology:measurement(rgs_ex_t10, railway_gauge_standard, base_extractiveness, 10, 0.30).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% A technical gauge is a quintessential information standard.
narrative_ontology:coordination_type(railway_gauge_standard, information_standard).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: rare_earth_coop_2026
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2026-02-06
% ============================================================================

:- module(constraint_rare_earth_coop, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: rare_earth_coop_2026
 * human_readable: Manufacturer-Owned Rare Earth Cooperative (MOREC)
 * domain: economic/industrial
 * * SUMMARY:
 * A horizontal coordination mechanism where manufacturers pool capital to 
 * bypass the profit-seeking mandates of Project Vault. It functions as a 
 * Rope—a voluntary association where the "extraction" is limited to 
 * administrative cost-recovery, ensuring that the agents are the 
 * primary beneficiaries of the coordination.
 * * KEY AGENTS:
 * - Participating Manufacturers: Subject (Moderate) - The owners/users.
 * - Coop Board: Auditor (Analytical) - Ensuring price transparency.
 * - External Markets: Object - The source of physical minerals.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Base extraction is near-zero (cost-recovery only).
domain_priors:base_extractiveness(rare_earth_coop_2026, 0.02). 
domain_priors:suppression_score(rare_earth_coop_2026, 0.15).   % Low suppression; members can leave.
domain_priors:theater_ratio(rare_earth_coop_2026, 0.20).       % Functional transparency over spectacle.

% Primary keys for classification engine
narrative_ontology:constraint_metric(rare_earth_coop_2026, extractiveness, 0.02).
narrative_ontology:constraint_metric(rare_earth_coop_2026, suppression_requirement, 0.15).
narrative_ontology:constraint_metric(rare_earth_coop_2026, theater_ratio, 0.20).

% Rope Structural Property Declarations
% A Rope is characterized by the agent being their own beneficiary.
narrative_ontology:constraint_beneficiary(rare_earth_coop_2026, participating_manufacturers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE MEMBER MANUFACTURER (ROPE)
% Effective Extraction: 0.02 * 1.0 (moderate) * 1.2 (global) = 0.024.
% χ < 0.05 + base_extraction < 0.10 triggers the Rope classification.
constraint_indexing:constraint_classification(rare_earth_coop_2026, rope, 
    context(agent_power(moderate), 
            time_horizon(biographical), 
            exit_options(mobile), 
            spatial_scope(global))).

% PERSPECTIVE 2: THE ANALYTICAL OBSERVER
constraint_indexing:constraint_classification(rare_earth_coop_2026, rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(rare_earth_coop_2026_tests).

test(rope_verification) :-
    % Ropes require low base extraction and low effective extraction.
    narrative_ontology:constraint_metric(rare_earth_coop_2026, extractiveness, E),
    E < 0.05.

test(beneficiary_identity) :-
    % In a Rope, the agent should ideally be the beneficiary.
    narrative_ontology:constraint_beneficiary(rare_earth_coop_2026, participating_manufacturers).

:- end_tests(rare_earth_coop_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The MOREC model resolves the "Project Vault" paradox by removing the 
 * debt-servicing profit mandate. Because the manufacturers own the 
 * infrastructure, the extraction is recursive—funds taken for administrative 
 * overhead (0.02) return as supply security. This qualifies as a "Pure 
 * Coordination" Rope. 
 *
 * ASSUMPTIONS:
 * This model assumes that manufacturers can overcome the "Collective Action" 
 * problem without a central state enforcer, and that anti-trust regulations 
 * are waived for strategic mineral co-ops.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_coop_stability,
    "Will a 'Free Rider' problem emerge if one member leaves during a market dip?",
    "Review of coop bylaw enforcement and member retention data in 2027.",
    "Stability preserves the Rope; defection triggers a Tangled Rope.",
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(rare_earth_coop_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Theater ratio remains low in a functional coop.
narrative_ontology:measurement(rec_tr_t0, rare_earth_coop_2026, theater_ratio, 0, 0.20).
narrative_ontology:measurement(rec_tr_t5, rare_earth_coop_2026, theater_ratio, 5, 0.20).
narrative_ontology:measurement(rec_tr_t10, rare_earth_coop_2026, theater_ratio, 10, 0.25).

% Extraction remains stable and low.
narrative_ontology:measurement(rec_ex_t0, rare_earth_coop_2026, base_extractiveness, 0, 0.02).
narrative_ontology:measurement(rec_ex_t5, rare_earth_coop_2026, base_extractiveness, 5, 0.02).
narrative_ontology:measurement(rec_ex_t10, rare_earth_coop_2026, base_extractiveness, 10, 0.03).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: rare_earth_dependency
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_rare_earth_dependency, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: rare_earth_dependency
 * human_readable: Strategic Rare Earth Element Dependency
 * domain: economic/geopolitical
 * * SUMMARY:
 * A nation's strategic reliance on a single foreign power for critical resources, such as rare earth elements (REEs), creates a significant economic and security vulnerability. This dependency can be weaponized through export controls, price manipulation, or supply disruption, effectively extracting geopolitical concessions or economic rent. The constraint is maintained by high barriers to entry for alternative suppliers, including geological scarcity, technical challenges in extraction/processing, and long investment timelines.
 * * KEY AGENTS:
 * - Dependent Nation's Industries (e.g., Japanese Manufacturers): Subject (Powerless)
 * - Dominant Supplier Nation (e.g., Chinese Government): Beneficiary (Institutional)
 * - International Trade Analysts: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(rare_earth_dependency, 0.60). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(rare_earth_dependency, 0.70).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(rare_earth_dependency, 0.20).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(rare_earth_dependency, extractiveness, 0.60).
narrative_ontology:constraint_metric(rare_earth_dependency, suppression_requirement, 0.70).
narrative_ontology:constraint_metric(rare_earth_dependency, theater_ratio, 0.20).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(rare_earth_dependency, constructed).

% Binary flags
% narrative_ontology:has_sunset_clause(rare_earth_dependency).      % Mandatory if Scaffold
domain_priors:requires_active_enforcement(rare_earth_dependency). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(rare_earth_dependency, dominant_supplier_nation).
narrative_ontology:constraint_victim(rare_earth_dependency, dependent_nations_industries).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% High extraction felt as a predatory trap with no immediate escape.
constraint_indexing:constraint_classification(rare_earth_dependency, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(global))). % Global market context amplifies extraction

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Viewed as a legitimate tool of economic statecraft and a valuable trade relationship.
constraint_indexing:constraint_classification(rare_earth_dependency, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Default analytical context (civilizational/analytical/global).
% Recognizes both the coordination function (trade) and the asymmetric extraction (geopolitical leverage).
constraint_indexing:constraint_classification(rare_earth_dependency, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(rare_earth_dependency_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(rare_earth_dependency, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(rare_earth_dependency, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(tangled_rope_conditions) :-
    % The analytical observer must see this as a tangled_rope.
    constraint_indexing:constraint_classification(rare_earth_dependency, tangled_rope, context(agent_power(analytical), _, _, _)).

test(threshold_validation) :-
    % Ensures it's a high-extraction constraint.
    narrative_ontology:constraint_metric(rare_earth_dependency, extractiveness, E),
    E >= 0.46.

:- end_tests(rare_earth_dependency_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness (0.60) and suppression (0.70) reflect the high strategic cost and lack of immediate alternatives for dependent nations.
 * - For a powerless industry (e.g., Japanese manufacturer), the dependency is a Snare. Their operations are trapped by the risk of supply cuts, leading to high effective extraction (χ = 0.60 * 1.5 * 1.2 = 1.08).
 * - For the institutional beneficiary (e.g., Chinese state), it's a Rope. It's a tool for coordination and economic benefit, with the extractive nature being a feature, not a bug. Their power drastically reduces the felt extraction (χ = 0.60 * -0.2 * 1.2 = -0.144), appearing as a net benefit.
 * - The analytical observer classifies it as a Tangled Rope. It has a genuine coordination function (a global trade market for a necessary resource) but also features clear asymmetric extraction and requires active enforcement (export quotas, state control) to maintain. This classification correctly captures the dual nature of the relationship, preventing a misclassification as a pure Snare (which would ignore the trade benefits) or a pure Rope (which would ignore the coercive power imbalance).
 * * MANDATROPHY ANALYSIS:
 * The Tangled Rope classification is critical here. A simpler model might view this as a pure Snare, but that would miss the fact that the dependent nations *do* receive vital resources, making it a functional (if coercive) system. The `requires_active_enforcement` flag, coupled with the clear beneficiary/victim roles, confirms the hybrid nature. The system isn't just passively extractive; it's an actively managed system of strategic leverage built on a coordination backbone.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_rare_earth_dependency,
    'Will technological breakthroughs (e.g., new magnet tech without REEs, efficient recycling) disrupt the fundamental demand for these elements faster than new supplies can be brought online?',
    'Monitoring R&D in materials science and tracking adoption rates of REE-free technologies in key sectors (EVs, wind turbines).',
    'If True: The constraint dissolves or becomes a Piton as the dependency becomes irrelevant. If False: The constraint remains a potent Tangled Rope/Snare.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(rare_earth_dependency, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data models the intensification of this dependency over the last decade,
% as REEs became more critical for green and digital technologies.
%
% Theater ratio over time (remains low as this is a functional, not performative, constraint):
narrative_ontology:measurement(rare_earth_dependency_tr_t0, rare_earth_dependency, theater_ratio, 0, 0.10).
narrative_ontology:measurement(rare_earth_dependency_tr_t5, rare_earth_dependency, theater_ratio, 5, 0.15).
narrative_ontology:measurement(rare_earth_dependency_tr_t10, rare_earth_dependency, theater_ratio, 10, 0.20).

% Extraction over time (increases as geopolitical leverage is recognized and applied):
narrative_ontology:measurement(rare_earth_dependency_ex_t0, rare_earth_dependency, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(rare_earth_dependency_ex_t5, rare_earth_dependency, base_extractiveness, 5, 0.55).
narrative_ontology:measurement(rare_earth_dependency_ex_t10, rare_earth_dependency, base_extractiveness, 10, 0.60).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% This dependency functions as a mechanism for controlling resource allocation.
narrative_ontology:coordination_type(rare_earth_dependency, resource_allocation).

% Network relationships (structural influence edges)
% The supply of REEs is a direct upstream dependency for semiconductor manufacturing.
narrative_ontology:affects_constraint(rare_earth_dependency, semiconductor_supply_chain).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: rare_earth_seabed_mining
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_rare_earth_seabed_mining, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: rare_earth_seabed_mining
 * human_readable: Deep-Sea Rare Earth Mining
 * domain: economic/technological/environmental
 * * SUMMARY:
 * Japan retrieves rare-earth-bearing seabed sediment in a deep-sea test near Minamitorishima Island. This represents a constraint due to the potential extraction of resources, environmental impact, and the international legal and geopolitical implications of deep-sea mining. The constraint involves balancing resource acquisition with environmental protection and international norms.
 * * KEY AGENTS:
 * - Marine Ecosystem: Subject (Powerless)
 * - Japan/Mining Companies: Beneficiary (Institutional)
 * - International Community/Scientists: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(rare_earth_seabed_mining, 0.65). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(rare_earth_seabed_mining, 0.45).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(rare_earth_seabed_mining, 0.2).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(rare_earth_seabed_mining, extractiveness, 0.65).
narrative_ontology:constraint_metric(rare_earth_seabed_mining, suppression_requirement, 0.45).
narrative_ontology:constraint_metric(rare_earth_seabed_mining, theater_ratio, 0.2).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(rare_earth_seabed_mining, enforcement).

% Binary flags
% narrative_ontology:has_sunset_clause(rare_earth_seabed_mining).      % Mandatory if Scaffold
domain_priors:requires_active_enforcement(rare_earth_seabed_mining). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(rare_earth_seabed_mining, japan_and_mining_consortia).
narrative_ontology:constraint_victim(rare_earth_seabed_mining, marine_ecosystem).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE/MOUNTAIN)
% High extraction felt as an immutable limit or predatory trap.
% The marine ecosystem is powerless and trapped, experiencing the mining as a pure Snare.
% χ = 0.65 * 1.5 (powerless) * 1.2 (global) = 1.17 (Snare)
constraint_indexing:constraint_classification(rare_earth_seabed_mining, snare,
    context(agent_power(powerless),
            time_horizon(generational),
            exit_options(trapped),
            spatial_scope(global))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Viewed as essential infrastructure or coordination.
% For the institutional beneficiary, the extraction feels minimal and the coordination function is primary.
% χ = 0.65 * -0.2 (institutional) * 1.0 (national) = -0.13 (Rope)
constraint_indexing:constraint_classification(rare_earth_seabed_mining, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER
% Default analytical context (civilizational/analytical/global).
% This perspective reveals the hybrid nature: a coordination function (resource security)
% with high asymmetric extraction and required enforcement.
% χ = 0.65 * 1.15 (analytical) * 1.2 (global) = 0.897 (Tangled Rope)
constraint_indexing:constraint_classification(rare_earth_seabed_mining, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

% PERSPECTIVE 4: THE ARCHITECT (SCAFFOLD)
% This perspective is not applicable as the constraint has no sunset clause.
% constraint_indexing:constraint_classification(rare_earth_seabed_mining, scaffold,
%    context(agent_power(organized),
%            time_horizon(generational),
%            exit_options(constrained),
%            spatial_scope(continental))) :-
%    narrative_ontology:has_sunset_clause(rare_earth_seabed_mining).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(rare_earth_seabed_mining_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(rare_earth_seabed_mining, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(rare_earth_seabed_mining, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(threshold_validation) :-
    narrative_ontology:constraint_metric(rare_earth_seabed_mining, extractiveness, E),
    (E =< 0.15 ; E >= 0.46). % Ensures it's either low-extraction or high-extraction.

test(tangled_rope_conditions) :-
    % Verify that the conditions for a tangled_rope classification are met.
    constraint_indexing:constraint_classification(rare_earth_seabed_mining, tangled_rope, _),
    narrative_ontology:constraint_beneficiary(rare_earth_seabed_mining, _),
    narrative_ontology:constraint_victim(rare_earth_seabed_mining, _),
    domain_priors:requires_active_enforcement(rare_earth_seabed_mining).

:- end_tests(rare_earth_seabed_mining_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness is high (0.65) due to the direct removal of valuable resources from a common-pool environment. The suppression score (0.45) reflects the technological and capital barriers that suppress alternative actors and the silencing of the primary victim (the ecosystem). The theater ratio is low (0.2) as the activity is functionally focused on resource extraction, not performance.
 * The perspectival gap is stark: the marine ecosystem (powerless) experiences the mining as a Snare, a destructive and inescapable trap. The state and corporate actors (institutional) view it as a Rope, a necessary coordination mechanism for securing strategic resources vital for technology. The analytical observer, weighing both the coordination function and the asymmetric extraction, classifies it as a Tangled Rope.
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The Tangled Rope classification is critical for preventing Mandatrophy. A simpler model might classify this as a pure Snare, ignoring the legitimate coordination goal of securing a national supply of critical materials. By acknowledging the coordination function (via `constraint_beneficiary`) alongside the asymmetric extraction (`constraint_victim`) and enforcement requirement, the system correctly identifies this as a hybrid constraint. This nuance is essential for policy analysis, which must balance resource needs against environmental costs, rather than simply condemning the act as pure predation.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_rare_earth_seabed_mining,
    'What is the true, long-term ecological cost and recovery potential of the deep-sea ecosystem post-mining?',
    'Decades-long ecological monitoring of mined and control sites, coupled with advances in deep-sea biology.',
    'If cost is catastrophic and irreversible, the base extractiveness approaches 1.0 and it becomes a pure Snare from all but the institutional view. If recovery is faster than expected, extractiveness could be revised downwards.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(rare_earth_seabed_mining, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection (metric_substitution,
% extraction_accumulation) by providing measurements at multiple time points.
% This models the shift from exploratory phases to full-scale industrial extraction.
%
% Required for high-extraction constraints (base_extractiveness > 0.46).
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(rare_earth_seabed_mining_tr_t0, rare_earth_seabed_mining, theater_ratio, 0, 0.1).
narrative_ontology:measurement(rare_earth_seabed_mining_tr_t5, rare_earth_seabed_mining, theater_ratio, 5, 0.15).
narrative_ontology:measurement(rare_earth_seabed_mining_tr_t10, rare_earth_seabed_mining, theater_ratio, 10, 0.2).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(rare_earth_seabed_mining_ex_t0, rare_earth_seabed_mining, base_extractiveness, 0, 0.5).
narrative_ontology:measurement(rare_earth_seabed_mining_ex_t5, rare_earth_seabed_mining, base_extractiveness, 5, 0.6).
narrative_ontology:measurement(rare_earth_seabed_mining_ex_t10, rare_earth_seabed_mining, base_extractiveness, 10, 0.65).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The coordination is around enforcing national resource claims and managing
% the complex logistics of extraction.
narrative_ontology:coordination_type(rare_earth_seabed_mining, enforcement_mechanism).

% Boltzmann floor override (only if domain knowledge justifies)
% narrative_ontology:boltzmann_floor_override(rare_earth_seabed_mining, 0.1).

% Network relationships (structural influence edges)
% The availability of rare earths from this source directly impacts the
% stability and structure of the global technology supply chain.
narrative_ontology:affects_constraint(rare_earth_seabed_mining, global_tech_supply_chain).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: global_hoarding_scaling_laws
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-16
% ============================================================================

:- module(constraint_global_hoarding_scaling_laws, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: global_hoarding_scaling_laws
 * human_readable: The Planetary Siphon
 * domain: economic/political
 * * SUMMARY:
 * An expansion of localized selfishness into a globalized extraction system.
 * As the spatial scope increases, the "suppression score" scales due to the
 * increased distance between the beneficiary and the victims, making the
 * constraint appear as an immutable law of nature to the powerless, while
 * functioning as a highly efficient coordination mechanism for beneficiaries.
 * * KEY AGENTS:
 * - The Global Precariat: Subject (Powerless) - Distributed victims.
 * - The Sovereign Fund: Beneficiary (Institutional) - The global hoarder.
 * - The Forensic Economist: Auditor (Analytical) - Mapping the flow of value.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
% Extraction is severe, and suppression is amplified by the global scope.
domain_priors:base_extractiveness(global_hoarding_scaling_laws, 0.85). % Snare extraction >= 0.46
domain_priors:suppression_score(global_hoarding_scaling_laws, 0.90).   % Structural property (raw, unscaled).
domain_priors:theater_ratio(global_hoarding_scaling_laws, 0.60).       % High but not Piton-level (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(global_hoarding_scaling_laws, extractiveness, 0.85).
narrative_ontology:constraint_metric(global_hoarding_scaling_laws, suppression_requirement, 0.90).
narrative_ontology:constraint_metric(global_hoarding_scaling_laws, theater_ratio, 0.60).

% Constraint self-claim (what does the constraint claim to be?)
% It claims to be a necessary coordination mechanism for the global economy.
narrative_ontology:constraint_claim(global_hoarding_scaling_laws, coordination).

% Binary flags and structural properties for Tangled Rope classification
domain_priors:requires_active_enforcement(global_hoarding_scaling_laws).
narrative_ontology:constraint_beneficiary(global_hoarding_scaling_laws, sovereign_fund).
narrative_ontology:constraint_victim(global_hoarding_scaling_laws, global_precariat).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For the powerless and trapped, the system is a highly coercive trap.
% χ = 0.85 * 1.5 (powerless) * 1.2 (global) = 1.53. This is a severe Snare.
constraint_indexing:constraint_classification(global_hoarding_scaling_laws, snare,
    context(agent_power(powerless),
            time_horizon(generational),
            exit_options(trapped),
            spatial_scope(global))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The Sovereign Fund views the system as essential, beneficial coordination.
% χ = 0.85 * -0.2 (institutional) * 1.2 (global) = -0.204. Negative extraction.
constraint_indexing:constraint_classification(global_hoarding_scaling_laws, rope,
    context(agent_power(institutional),
            time_horizon(historical),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees both the coordination function and the asymmetric extraction.
% χ = 0.85 * 1.15 (analytical) * 1.2 (global) = 1.173. High extraction.
% With beneficiaries, victims, and enforcement, it's a classic Tangled Rope.
constraint_indexing:constraint_classification(global_hoarding_scaling_laws, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(global_hoarding_scaling_laws_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(global_hoarding_scaling_laws, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(global_hoarding_scaling_laws, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(analytical_classification_is_tangled_rope) :-
    % The analytical observer must correctly identify the hybrid nature.
    constraint_indexing:constraint_classification(global_hoarding_scaling_laws, tangled_rope, context(agent_power(analytical), _, _, _)).

test(threshold_validation) :-
    % Verify the base metrics meet the criteria for a high-extraction constraint.
    domain_priors:base_extractiveness(global_hoarding_scaling_laws, E),
    domain_priors:suppression_score(global_hoarding_scaling_laws, S),
    E >= 0.46,
    S >= 0.60.

:- end_tests(global_hoarding_scaling_laws_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This constraint models a system of global resource extraction where the scale itself
 * becomes a tool of suppression. The scores are high (E=0.85, S=0.90) to reflect a
 * mature, highly efficient system.
 *
 * The perspectival gap is extreme:
 * - For the 'global_precariat' (powerless, trapped), the effective extraction is
 *   amplified by their powerlessness and the global scope (χ=1.53), making it a clear 'snare'.
 *   While it may feel like a 'mountain' (an unchangeable fact), its structure is that of a
 *   constructed, enforced trap.
 * - For the 'sovereign_fund' (institutional, mobile), the system provides net benefits
 *   (χ=-0.204), appearing as pure 'rope' (coordination).
 * - The analytical observer, seeing both the coordination for the beneficiaries and the
 *   brutal extraction from the victims, correctly classifies it as a 'tangled_rope'.
 *
 * The original file's 'piton' classification was incorrect, as the system is highly
 * functional, not inertial. The theater_ratio of 0.60 indicates significant performative
 * justification but is below the 0.70 threshold for a Piton.
 *
 * * [RESOLVED MANDATROPHY]:
 * The Tangled Rope classification is the resolution. It prevents the system from being
 * simplified to either a pure Snare (ignoring its coordination function for the powerful)
 * or a pure Rope (ignoring its extractive nature for the powerless). It captures the
 * dual-use nature of the global financial architecture.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_global_coalition,
    'Can the Precariat achieve "organized" power at a global scale?',
    'Detection of cross-border labor/resource coordination events that successfully challenge the sovereign fund.',
    'If True: The Snare classification holds, but the agent power shifts from powerless to organized, reducing felt extraction and enabling resistance. If False: The Snare remains effectively a Mountain from the subject''s view.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(global_hoarding_scaling_laws, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection. This models the system's
% intensification over time. Required for base_extractiveness > 0.46.

% Theater ratio over time (Institutionalization of global justifications)
narrative_ontology:measurement(ghs_tr_t0, global_hoarding_scaling_laws, theater_ratio, 0, 0.25).
narrative_ontology:measurement(ghs_tr_t5, global_hoarding_scaling_laws, theater_ratio, 5, 0.45).
narrative_ontology:measurement(ghs_tr_t10, global_hoarding_scaling_laws, theater_ratio, 10, 0.60).

% Extraction over time (The "Siphon" effect intensifying)
narrative_ontology:measurement(ghs_ex_t0, global_hoarding_scaling_laws, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(ghs_ex_t5, global_hoarding_scaling_laws, base_extractiveness, 5, 0.70).
narrative_ontology:measurement(ghs_ex_t10, global_hoarding_scaling_laws, base_extractiveness, 10, 0.85).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The system functions as a global mechanism for allocating resources.
narrative_ontology:coordination_type(global_hoarding_scaling_laws, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: reciprocity_laws_math
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Gauss's Quadratic Reciprocity (1801); Artin Reciprocity (1927)
% ============================================================================

:- module(constraint_reciprocity_laws, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: reciprocity_laws_math
 * human_readable: Mathematical Reciprocity Laws
 * domain: mathematical/technological
 * temporal_scope: 1801 - Present (Civilizational)
 * spatial_scope: Global/Abstract (Number Fields)
 * * SUMMARY:
 * Reciprocity laws, beginning with Gauss's Quadratic Reciprocity, describe a 
 * deep symmetry in the behavior of prime numbers. They state that the 
 * solvability of an equation $x^2 = p \pmod q$ is intrinsically linked to the 
 * solvability of $x^2 = q \pmod p$. This functions as a structural constraint 
 * on how primes interact across different arithmetic dimensions.
 * * KEY AGENTS:
 * - The Prime Couple (p, q): Powerless subjects whose relationship is 
 * predestined by the law.
 * - The Cryptographer: An institutional agent using the law as a coordination 
 * mechanism for efficient primality testing and key generation.
 * - The Langlands Researcher: An analytical observer seeking a "Grand Unified" 
 * reciprocity that links all of mathematics.
 * * NARRATIVE ARC:
 * To the numbers themselves, the law is a "Mountain"—an unchangeable, 
 * unyielding symmetry of the universe. To the cryptographer, it is a "Rope"—a 
 * tool that allows them to "jump" across complex calculations with ease. 
 * However, in the realm of Higher Reciprocity (Cubic/Quartic), the 
 * complexity of the law acts as a "Snare" for practitioners, extracting 
 * massive cognitive labor to resolve seemingly simple arithmetic questions.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION
   ========================================================================== */

% Required for DR-Audit Suite
narrative_ontology:interval(reciprocity_laws_math, 1801, 2026).
narrative_ontology:constraint_claim(reciprocity_laws_math, mountain).

% Base extractiveness: 0.1
% Rationale: Pure math is largely non-extractive. However, it "extracts" the 
% possibility of asymmetric primality (e.g., p is a residue mod q but q isn't mod p)
% to enforce structural harmony.
domain_priors:base_extractiveness(reciprocity_laws_math, 0.1).

% Suppression score: 0.1
% Rationale: It does not suppress other theories, though it renders 
% "non-reciprocal" universes logically impossible within standard axioms.
domain_priors:suppression_score(reciprocity_laws_math, 0.1).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(reciprocity_laws_math, extractiveness, 0.1).
narrative_ontology:constraint_metric(reciprocity_laws_math, suppression_requirement, 0.1).

% Enforcement: Emerges naturally from the structure of number fields.
domain_priors:emerges_naturally(reciprocity_laws_math).

% Metrics
% Beneficiaries & Victims
constraint_beneficiary(reciprocity_laws_math, asymmetric_cryptography).
constraint_beneficiary(reciprocity_laws_math, analytical_number_theory).
constraint_victim(reciprocity_laws_math, computational_inefficiency). % In the absence of the law.

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE PRIME NUMBER ($p$) - Mountain
   --------------------------------------------------------------------------
   WHO: powerless - The prime has no agency over its residue status.
   WHEN: immediate - The law is true for all primes simultaneously.
   WHERE: trapped - Bound within the rigid structure of the integers.
   SCOPE: global - Applies across all number fields.
   
   WHY THIS CLASSIFICATION:
   For the prime $p$, the fact that its "quadratic character" depends on $q$ 
   is a natural law. It is an unchangeable, fixed feature of its mathematical 
   reality with zero degrees of freedom.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    reciprocity_laws_math,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE RSA CRYPTOGRAPHER - Rope
   --------------------------------------------------------------------------
   WHO: institutional - Power to design standards (NIST, RSA) using the law.
   WHEN: biographical - Planning security for the lifecycle of a system.
   WHERE: mobile - Can choose different primes or reciprocity levels.
   SCOPE: global - Worldwide security coordination.
   
   WHY THIS CLASSIFICATION:
   For the engineer, the law is a "Rope"—a functional tool. It allows for the 
   efficient coordination of prime-finding algorithms (like Miller-Rabin), 
   ensuring that various security sub-systems are pulled toward a standard of 
   "absolute" security.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    reciprocity_laws_math,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: HIGHER RECIPROCITY ANALYST - Snare
   --------------------------------------------------------------------------
   WHO: powerless - A graduate student/researcher bound by complexity.
   WHEN: immediate - Every proof step is a struggle against the abstraction.
   WHERE: constrained - Knowing the law exists but unable to easily compute it.
   SCOPE: local - A specific, intractable problem in class field theory.
   
   WHY THIS CLASSIFICATION:
   In the realm of Cubic or Artin reciprocity, the law becomes a "Snare." 
   It promises a "simple" relationship but extracts immense cognitive energy 
   and years of study (extraction) to yield the result. The practitioner 
   is "strangled" by the very abstraction meant to simplify the field.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    reciprocity_laws_math,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(local)
    )
) :- 
    domain_priors:base_extractiveness(reciprocity_laws_math, E),
    E >= 0.1,
    !.

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(reciprocity_laws_math_tests).

test(symmetry_fate_variance) :-
    % Subject -> Mountain
    constraint_indexing:constraint_classification(reciprocity_laws_math, Type1, context(powerless, immediate, trapped, global)),
    % Cryptographer -> Rope
    constraint_indexing:constraint_classification(reciprocity_laws_math, Type2, context(institutional, biographical, mobile, global)),
    Type1 = mountain,
    Type2 = rope.

test(computational_labor_extraction) :-
    % A researcher (powerless) in a local/constrained context sees the higher law as a Snare.
    constraint_indexing:constraint_classification(reciprocity_laws_math, snare, context(powerless, immediate, constrained, local)).

test(emergence) :-
    domain_priors:emerges_naturally(reciprocity_laws_math).

:- end_tests(reciprocity_laws_math_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * * KEY DECISIONS:
 * 1. CLASSIFICATION: Mathematical laws are the purest form of "Mountain" 
 * (Natural Law). However, their application in technology (Cryptography) 
 * transforms them into "Ropes" (Tools).
 * 2. SNARE ANALOGY: The frustration of "Higher Reciprocity" is a unique form 
 * of intellectual "Snare." It's a promise of symmetry that is so hard to 
 * prove that it extracts a "tithe" of a researcher's life.
 * 3. EXTRACTIVENESS (0.1): Low, because the universe doesn't charge money for 
 * arithmetic, but the *following* of the law requires an "extraction" of 
 * cognitive focus.
 */

% OMEGA IDENTIFICATION
omega_variable(
    non_abelian_generalization,
    "Will the Langlands Program provide a 'Rope' (functional tool) for the non-abelian case, or is it a permanent 'Mountain'?",
    resolution_mechanism("Verification of the global Langlands correspondence for GL(n)."),
    impact("If Yes: The entire number line becomes a navigable 'Rope'. If No: It remains a distant 'Mountain'."),
    confidence_without_resolution(low)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Brute Force Verification (Euler's method before Gauss)
 * Viability: Checking residues manually for every prime.
 * Suppression: Replaced by Gauss because Reciprocity is a more efficient 
 * "Rope" for coordination.
 * * ALTERNATIVE 2: Pure Probabilistic Heuristics
 * Viability: Assuming residues are random.
 * Suppression: Suppressed by the proof of Reciprocity, which shows the 
 * "chaos" of primes is actually a hidden "Mountain" of order.
 * * CONCLUSION:
 * The existence of the Reciprocity Law as a "Mountain" makes the brute-force 
 * "Scaffolds" of the 18th century look like primitive errors.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Load: ?- [reciprocity_laws_math].
% Analyze: ?- constraint_indexing:multi_index_report(reciprocity_laws_math).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: regulatory_capture
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-28
% ============================================================================

:- module(constraint_regulatory_capture, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: regulatory_capture
 * human_readable: Regulatory Capture
 * domain: economic/political
 * * SUMMARY:
 * Regulatory capture occurs when a regulatory agency, created to act in the
 * public interest, instead advances the commercial or political concerns of
 * special interest groups that dominate the industry it is charged with
 * regulating. It represents a corruption of the "referee" into a "player,"
 * creating barriers to entry and extracting consumer surplus.
 * * KEY AGENTS:
 * - Disruptive Entrepreneur: Subject (Powerless) who is blocked by regulations written by incumbents.
 * - Incumbent Firm / Lobbyist: Beneficiary (Institutional) who uses regulation as a tool for market control.
 * - Systems Analyst: Auditor (Analytical) who observes the structural decay and emergent properties.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(regulatory_capture, 0.80). % Extracts consumer surplus and innovation energy into monopoly profits.
domain_priors:suppression_score(regulatory_capture, 0.20).   % Alternatives are suppressed not by force, but by immense legal/bureaucratic complexity.
domain_priors:theater_ratio(regulatory_capture, 0.75).       % The agency performs public-interest duties theatrically, while its real function is gatekeeping.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(regulatory_capture, extractiveness, 0.80).
narrative_ontology:constraint_metric(regulatory_capture, suppression_requirement, 0.20).
narrative_ontology:constraint_metric(regulatory_capture, theater_ratio, 0.75).

% Constraint self-claim (what does the constraint claim to be?)
% The agency claims to be an enforcement mechanism for the public good.
narrative_ontology:constraint_claim(regulatory_capture, enforcement).

% Binary flags
domain_priors:requires_active_enforcement(regulatory_capture). % Required for Tangled Rope; regulations must be actively enforced to function as barriers.

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(regulatory_capture, industry_monopolists).
narrative_ontology:constraint_beneficiary(regulatory_capture, bureaucratic_elites).
narrative_ontology:constraint_victim(regulatory_capture, innovative_startups).
narrative_ontology:constraint_victim(regulatory_capture, general_consumers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE DISRUPTIVE ENTREPRENEUR (SNARE)
% For the innovator, capture is a Snare. They have a better, cheaper
% solution, but the "safety" regulations (written by their competitors)
% make it illegal to operate. The harder they try to compete, the more
% the legal trap tightens.
constraint_indexing:constraint_classification(regulatory_capture, snare,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(constrained),
            spatial_scope(national))).

% PERSPECTIVE 2: THE FORTUNE 500 LOBBYIST (ROPE)
% For the lobbyist, regulation is a Rope. It is a coordination mechanism to
% "standardize" the industry in a way that favors their firm's existing
% infrastructure, pulling up a wall against new entrants.
constraint_indexing:constraint_classification(regulatory_capture, rope,
    context(agent_power(institutional),
            time_horizon(biographical),
            exit_options(arbitrage),
            spatial_scope(national))).

% PERSPECTIVE 3: THE PUBLIC CHOICE ECONOMIST (TANGLED ROPE)
% The analyst sees a system with a genuine coordination function (for incumbents)
% but also massive asymmetric extraction (from the public). It requires active
% enforcement to maintain this structure. This is the definition of a Tangled Rope.
constraint_indexing:constraint_classification(regulatory_capture, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

% PERSPECTIVE 4: THE INSTITUTIONAL ANALYST (PITON)
% This analyst sees the agency as a Piton. Created as a Rope to ensure
% market safety, it has decayed into a liability that persists through
% inertia. Its stated coordinating function is now mostly theater.
constraint_indexing:constraint_classification(regulatory_capture, piton,
    context(agent_power(analytical),
            time_horizon(biographical),
            exit_options(analytical),
            spatial_scope(national))) :-
    domain_priors:theater_ratio(regulatory_capture, TR), TR > 0.70.


/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(regulatory_capture_tests).

test(perspectival_gap) :-
    % Verify the core gap between the powerless (Snare) and institutional (Rope).
    constraint_indexing:constraint_classification(regulatory_capture, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(regulatory_capture, rope, context(agent_power(institutional), _, _, _)).

test(analytical_classification_is_tangled_rope) :-
    % The default analytical view should resolve the conflict as a Tangled Rope.
    constraint_indexing:constraint_classification(regulatory_capture, tangled_rope, context(agent_power(analytical), time_horizon(civilizational), _, _)).

test(piton_classification_requires_high_theater) :-
    % The Piton classification should only trigger if theater_ratio is high.
    domain_priors:theater_ratio(regulatory_capture, TR),
    ( TR > 0.70 ->
        constraint_indexing:constraint_classification(regulatory_capture, piton, context(agent_power(analytical), time_horizon(biographical), _, _))
    ;   \+ constraint_indexing:constraint_classification(regulatory_capture, piton, context(agent_power(analytical), time_horizon(biographical), _, _))
    ).

:- end_tests(regulatory_capture_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect a system that began with a coordination purpose but has since been co-opted for extraction.
 * - Extractiveness (0.80): High, representing the direct transfer of wealth from consumers and innovators to incumbents via price distortions and barriers to entry.
 * - Suppression (0.20): Low, because the system doesn't use overt force. It uses "boring" weapons: legal complexity, high compliance costs, and bureaucratic inertia.
 * - Theater Ratio (0.75): High, as the agency must maintain the performance of serving the public interest to retain its legitimacy, even as its primary function becomes gatekeeping. This justifies the Piton classification from a career-level analyst's perspective.
 *
 * PERSPECTIVAL GAP:
 * The gap is stark: for the incumbent with institutional power, the regulations are a useful 'Rope' to coordinate the market and manage competition. For the startup with no power, the same regulations are an impassable 'Snare' designed to make them fail.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The Tangled Rope classification is crucial. It prevents the system from simplifying this to a pure Snare, which would ignore the genuine (if self-serving) coordination function the regulations provide for the incumbent players. It correctly identifies that the system has BOTH a coordination function AND an asymmetric extraction function, which is the core of sophisticated institutional failure.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_capture_reversibility,
    'Can a captured agency ever be reset to neutral through internal reform, or is total institutional collapse and replacement the only exit?',
    'Comparative historical analysis of anti-trust actions and successful regulatory "house-cleanings" vs. failed reforms.',
    'If irreversible (Mountain-like tendency), then reform efforts are wasted; parallel systems are the only solution. If reversible (Tangled Rope), reform is viable.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(regulatory_capture, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This models the degradation of a public interest agency over time.
% It starts with low extraction and theater (a Rope) and drifts into a high
% extraction, high theater state (a Tangled Rope / Piton).

% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(rc_tr_t0, regulatory_capture, theater_ratio, 0, 0.10).
narrative_ontology:measurement(rc_tr_t5, regulatory_capture, theater_ratio, 5, 0.45).
narrative_ontology:measurement(rc_tr_t10, regulatory_capture, theater_ratio, 10, 0.75).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(rc_ex_t0, regulatory_capture, base_extractiveness, 0, 0.20).
narrative_ontology:measurement(rc_ex_t5, regulatory_capture, base_extractiveness, 5, 0.60).
narrative_ontology:measurement(rc_ex_t10, regulatory_capture, base_extractiveness, 10, 0.80).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The agency's function is to enforce rules, making it an enforcement mechanism.
narrative_ontology:coordination_type(regulatory_capture, enforcement_mechanism).

% Network relationships (structural influence edges)
% Capture in one area often enables or reinforces capture in adjacent domains.
narrative_ontology:affects_constraint(regulatory_capture, media_ownership_rules).
narrative_ontology:affects_constraint(regulatory_capture, pharmaceutical_patents).


/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: relativity_of_simultaneity
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: Relativity: The Special and General Theory by Albert Einstein (1920)
% ============================================================================

:- module(constraint_relativity_of_simultaneity, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: relativity_of_simultaneity
 * human_readable: The Relativity of Simultaneity
 * domain: scientific/physical
 * temporal_scope: 1905 CE - Present
 * spatial_scope: Universal
 * 
 * SUMMARY:
 * This constraint establishes that "simultaneity" is not an absolute property of 
 * the universe but is dependent on the motion of the reference body. 
 * Events that are simultaneous relative to an embankment are not simultaneous 
 * relative to a moving train.
 * 
 * KEY AGENTS:
 * - The Common Observer (Individual Powerless): Subject to intuitive, everyday experience.
 * - National Standards Body (Institutional): Must account for relativistic effects in timekeeping.
 * - The Relativistic Physicist (Analytical): Reconciles the Principle of Relativity with the Law of Light.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(relativity_of_simultaneity, 0, 10).
narrative_ontology:constraint_claim(relativity_of_simultaneity, mountain).

% Base extractiveness: 0.0.
% The law governs the flow of time for all observers equally; 
% there is no asymmetric "theft" of time, only a difference in measurement.
domain_priors:base_extractiveness(relativity_of_simultaneity, 0.0).

% Suppression score: 0.4.
% While not "punished," the alternative (absolute time) is deeply 
% "lodged in our habit of thought" and was "tacitly assumed" for centuries.
domain_priors:suppression_score(relativity_of_simultaneity, 0.4).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(relativity_of_simultaneity, extractiveness, 0.0).
narrative_ontology:constraint_metric(relativity_of_simultaneity, suppression_requirement, 0.4).

% Enforcement: Emerges naturally from the constancy of light velocity.
domain_priors:emerges_naturally(relativity_of_simultaneity).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(relativity_of_simultaneity, modern_physics).
constraint_victim(relativity_of_simultaneity, classical_intuition).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE COMMON OBSERVER - Mountain
   --------------------------------------------------------------------------
   WHO: powerless (Subject to intuitive, everyday experience)
   WHEN: immediate (Local, daily observations)
   WHERE: trapped (Deeply lodged habits of thought)
   
   WHY THIS CLASSIFICATION:
   For the common person, time appears as an absolute, unchangeable 'Mountain.' 
   The idea that events could be simultaneous for one but not another feels 
   "occult" or "mysterious," contradicting deeply ingrained intuition.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    relativity_of_simultaneity,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: NATIONAL STANDARDS BODY (NIST) - Mountain
   --------------------------------------------------------------------------
   WHO: institutional (Responsible for national timekeeping and calibration)
   WHEN: historical (Across decades of scientific advancement)
   WHERE: analytical (Integrates fundamental physics into practical standards)
   
   WHY THIS CLASSIFICATION:
   For a national standards body, the relativity of simultaneity is a 'Mountain'
   of fundamental physical law that must be accounted for in timekeeping and
   navigation systems (e.g., GPS). It is an unchangeable reality that must be
   integrated into their operational models.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    relativity_of_simultaneity,
    mountain,
    context(
        agent_power(institutional),
        time_horizon(historical),
        exit_options(analytical),
        spatial_scope(national)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE RELATIVISTIC PHYSICIST - Rope
   --------------------------------------------------------------------------
   WHO: analytical (The "conscientiously thoughtful physicist")
   WHEN: historical (Long-term theoretical development)
   WHERE: mobile (Conceptual mobility through the Lorentz Transformation)
   
   WHY THIS CLASSIFICATION:
   The relativity of simultaneity is a 'Rope'—a tool for coordination. It 
   allows the physicist to reconcile the Principle of Relativity with the Law 
   of Light, forming a "logically rigid theory." It is a tool to navigate a complex reality.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    relativity_of_simultaneity,
    rope,
    context(
        agent_power(analytical),
        time_horizon(historical),
        exit_options(mobile),
        spatial_scope(global)
    )
).

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(relativity_of_simultaneity_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(relativity_of_simultaneity, Type1, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(relativity_of_simultaneity, Type2, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(relativity_of_simultaneity, Type3, context(agent_power(analytical), _, _, _)),
    Type1 \= Type3, % Common Observer (Mountain) vs Physicist (Rope)
    Type2 \= Type3. % Standards Body (Mountain) vs Physicist (Rope)

:- end_tests(relativity_of_simultaneity_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. INSTITUTIONAL PERSPECTIVE: Added the 'National Standards Body (NIST)' to
 *    represent the institutional agent. For them, it's a 'Mountain' because
 *    they must integrate this fundamental physical law into practical systems.
 *
 * 2. CLASSIFICATION RATIONALE:
 *    - Common Observer (Mountain): Intuition makes it seem absolute.
 *    - Standards Body (Mountain): Must account for immutable physical law.
 *    - Physicist (Rope): Uses the theory to reconcile conflicting observations.
 * 
 * 3. CORE INSIGHT: The relativity of simultaneity is a profound challenge to
 *    common intuition. While it appears as an unchangeable 'Mountain' to most,
 *    it becomes a powerful 'Rope' for those who understand how to navigate
 *    its implications.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * The core uncertainty is the extent to which human intuition can ever truly reconcile with relativistic reality.
 */

omega_variable(
    human_intuition_reconciliation,
    "Can human intuition ever truly grasp and internalize the relativity of simultaneity, or will it always remain a 'Mountain' of abstract mathematical truth, disconnected from direct experience?",
    resolution_mechanism("Neurological studies on the plasticity of time perception in individuals exposed to relativistic thought experiments; long-term educational interventions."),
    impact("If reconciled: The 'Mountain' of intuition collapses into a 'Rope' of understanding. If not: It remains an enduring 'Mountain' for human cognition."),
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */
/**
 * VIABLE ALTERNATIVES
 *
 * ALTERNATIVE 1: Absolute Simultaneity (Newtonian Physics)
 *    Viability: Historically dominant; matches "everyday life" and intuition.
 *    Suppression: Rejected by experimental evidence (e.g., Michelson-Morley) and theoretical consistency with the constancy of the speed of light.
 *
 * CONCLUSION:
 * The "Rope" of relative simultaneity was chosen because the alternative
 * (Absolute Time) created a logical 'Snare' for the laws of physics, leading to
 * fundamental contradictions with empirical observation.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/relativity_of_simultaneity].
 * 2. Multi-perspective: ?- multi_index_report(relativity_of_simultaneity).
 * 3. Run tests: ?- run_tests(relativity_of_simultaneity_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: relativity_physical_invariance
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: Einstein, A. (1920). Relativity: The Special and General Theory.
% ============================================================================

:- module(constraint_relativity_physical_invariance, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: relativity_physical_invariance
 * human_readable: General Relativity (The Spacetime Constraint)
 * domain: technological/scientific
 * temporal_scope: 1905-Present
 * spatial_scope: Universal
 * 
 * SUMMARY:
 * Relativity describes the fundamental constraints of the universe: the 
 * constancy of the speed of light (Special Relativity) and the curvature 
 * of spacetime by matter/energy (General Relativity). It removes the 
 * "Snare" of absolute space and time, replacing it with a "Rope" of 
 * mathematical transformation.
 * 
 * KEY AGENTS:
 * - The Travelling Observer (Individual Powerless): Subject to the limits of the light cone.
 * - GPS Satellite Engineers (Institutional): Must account for relativistic effects for accuracy.
 * - The Coordinating Scientist (Individual Moderate): Uses mathematical transformations to reconcile observations.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(relativity_physical_invariance, 0, 10).
narrative_ontology:constraint_claim(relativity_physical_invariance, mountain).

% Base extractiveness: 0.0.
% Physics does not "extract" value in a social sense, but it limits 
% the "efficiency" of travel/communication.
domain_priors:base_extractiveness(relativity_physical_invariance, 0.0).

% Suppression: 0.1.
% The laws are transparent and universal, though their effects are 
% "suppressed" from common sense by our low-velocity evolution.
domain_priors:suppression_score(relativity_physical_invariance, 0.1).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(relativity_physical_invariance, extractiveness, 0.0).
narrative_ontology:constraint_metric(relativity_physical_invariance, suppression_requirement, 0.1).

% Enforcement: Emerges naturally from the structure of the universe.
domain_priors:emerges_naturally(relativity_physical_invariance).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(relativity_physical_invariance, high_precision_technology).
constraint_victim(relativity_physical_invariance, intuitive_classical_physics).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE TRAVELLING OBSERVER - Snare
   --------------------------------------------------------------------------
   WHO: powerless (Subject to the constant speed of light)
   WHEN: immediate (When attempting to travel at relativistic speeds)
   WHERE: trapped (Within the light cone, unable to exceed 'c')
   
   WHY THIS CLASSIFICATION:
   For an agent attempting to exceed the speed of light, Relativity is a 
   'Snare.' No amount of energy can pull the agent out of their local 
   light cone. Causality strangles the possibility of FTL communication,
   imposing an absolute speed limit on all matter and information.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    relativity_physical_invariance,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(global)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: GPS SATELLITE ENGINEERS - Mountain
   --------------------------------------------------------------------------
   WHO: institutional (Designs and maintains global navigation systems)
   WHEN: historical (Since the advent of satellite navigation)
   WHERE: analytical (Integrates fundamental physics into engineering solutions)
   
   WHY THIS CLASSIFICATION:
   For GPS satellite engineers, relativity is a 'Mountain' – a fundamental
   physical law that they must account for to ensure accurate navigation and
   timing. Relativistic effects (both special and general) cause GPS clocks
   to tick differently than Earth-bound clocks, making these calculations
   an immutable, fixed aspect of their design.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    relativity_physical_invariance,
    mountain,
    context(
        agent_power(institutional),
        time_horizon(historical),
        exit_options(analytical),
        spatial_scope(global)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE COORDINATING SCIENTIST - Rope
   --------------------------------------------------------------------------
   WHO: individual_moderate (Uses mathematical transformations to reconcile observations)
   WHEN: biographical (The lifespan of scientific inquiry)
   WHERE: mobile (Can transform between different reference frames)
   
   WHY THIS CLASSIFICATION:
   To the coordinating scientist, the Principle of Relativity is a 'Rope.' 
   It provides the coordination equations (Lorentz transformations) that allow 
   agreement between two observers moving at different velocities. It 
   turns chaos into a synchronized "Match," allowing for consistent measurements.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    relativity_physical_invariance,
    rope,
    context(
        agent_power(individual_moderate),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
).

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(relativity_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(relativity_physical_invariance, Type1, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(relativity_physical_invariance, Type2, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(relativity_physical_invariance, Type3, context(agent_power(individual_moderate), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3,
    Type1 \= Type3.

:- end_tests(relativity_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. INSTITUTIONAL PERSPECTIVE: Added 'GPS Satellite Engineers' as the
 *    institutional agent. For them, relativity is a 'Mountain' that must be
 *    precisely integrated into their systems.
 *
 * 2. CLASSIFICATION RATIONALE:
 *    - Travelling Observer (Snare): Trapped by the speed of light.
 *    - GPS Engineers (Mountain): Immutable physical laws.
 *    - Coordinating Scientist (Rope): A tool for mathematical reconciliation.
 * 
 * 3. CORE INSIGHT: Einstein's Relativity reveals the universe to be a complex
 *    'Mountain' of physical laws. While it creates a 'Snare' for hypothetical
 *    FTL travel, it also provides a powerful 'Rope' (mathematical tools)
 *    for scientists and engineers to accurately describe and harness its principles.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * The core uncertainty is the unification of Relativity with Quantum Mechanics.
 */

omega_variable(
    quantum_gravity_unification,
    "Will a 'Theory of Everything' reveal Relativity as a mere 'Rope' (a local approximation) within a larger quantum framework, or is it a permanent 'Mountain' of fundamental physics?",
    resolution_mechanism("Experimental detection of gravitons; theoretical breakthroughs in String Theory or Loop Quantum Gravity; successful unification of quantum field theory and general relativity."),
    impact("If unified: Relativity's 'Mountain' becomes a 'Local Rope' within a larger Quantum Mountain. If not: It remains an enduring 'Mountain' for physics."),
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */
/**
 * VIABLE ALTERNATIVES
 *
 * ALTERNATIVE 1: Newtonian Physics (Absolute Space and Time)
 *    Viability: Provides accurate predictions at everyday speeds and scales.
 *    Suppression: Rejected by experimental evidence (e.g., Michelson-Morley experiment) and theoretical inconsistencies at high velocities and strong gravitational fields.
 *
 * CONCLUSION:
 * Newtonian physics, once a foundational 'Mountain', was revealed to be a
 * limited 'Rope' by the advent of Relativity. Einstein's work created a new
 * 'Mountain' of physical reality, which in turn offers a new 'Rope' of
 * mathematical understanding.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/relativity_physical_invariance].
 * 2. Multi-perspective: ?- multi_index_report(relativity_physical_invariance).
 * 3. Run tests: ?- run_tests(relativity_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: tcp_rfc9293_interoperability
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: RFC 9293 - Transmission Control Protocol (TCP)
% ============================================================================

:- module(constraint_tcp_rfc9293_interoperability, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: tcp_rfc9293_interoperability
 * human_readable: TCP Interoperability & Reliability Requirements
 * domain: technological
 * temporal_scope: Decades (Modern Internet era)
 * spatial_scope: Global
 * 
 * SUMMARY:
 * RFC 9293 codifies the requirements for TCP. While often perceived as a 
 * "natural law" of the internet (a Mountain), it is actually a strictly 
 * enforced coordination mechanism. The "interoperability" requirement 
 * ensures that any implementation MUST follow the state machine and 
 * header rules, or be actively "cut" from the network via Reset (RST) segments.
 * 
 * KEY AGENTS:
 * - IETF (Institutional): The rule-maker, views it as a coordination tool.
 * - Application Developer (Individual Moderate): Must implement the "MUSTs", experiences it as a constraint.
 * - Network Application (Individual Powerless): Trapped by the host's stack logic.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (Reality Layer)
   ========================================================================== */

narrative_ontology:interval(tcp_rfc9293_interoperability, 0, 10).
narrative_ontology:constraint_claim(tcp_rfc9293_interoperability, rope).

% Base extractiveness: 0.2. 
% (Header overhead, TCB memory, and processing "tax" for reliability).
domain_priors:base_extractiveness(tcp_rfc9293_interoperability, 0.2).

% Suppression: 0.7. 
% High suppression of alternative behaviors. Middleboxes and stacks 
% actively drop or reset non-conformant packets.
domain_priors:suppression_score(tcp_rfc9293_interoperability, 0.7).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(tcp_rfc9293_interoperability, extractiveness, 0.2).
narrative_ontology:constraint_metric(tcp_rfc9293_interoperability, suppression_requirement, 0.7).

% Active Enforcement: YES.
% The protocol enforces itself through state-mismatch RSTs and timeouts.
domain_priors:requires_active_enforcement(tcp_rfc9293_interoperability).

% Beneficiaries: All internet users (reliable connections).
constraint_beneficiary(tcp_rfc9293_interoperability, global).
% Victims: None (overhead is a design trade-off, not targeted extraction).
constraint_victim(tcp_rfc9293_interoperability, none).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: NETWORK APPLICATION - Snare
   --------------------------------------------------------------------------
   WHO: powerless
   WHEN: immediate
   WHERE: trapped
   
   WHY: For an application, TCP is a Snare. It cannot change the 
   3-way handshake or the TIME-WAIT delay. It is "trapped" within the 
   OS implementation's strict adherence to RFC 9293. If the app tries 
   to ignore the state machine, the connection is killed.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    tcp_rfc9293_interoperability,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(global)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: IETF / PROTOCOL ARCHITECT - Rope
   --------------------------------------------------------------------------
   WHO: institutional
   WHEN: historical
   WHERE: mobile
   
   WHY: To the IETF, the RFC is a Rope—a tool designed to tie disparate 
   systems together into a functional whole. They have the power to 
   update (Obsolete RFC 793) or extend (TCP Fast Open) the constraint.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    tcp_rfc9293_interoperability,
    rope,
    context(
        agent_power(institutional),
        time_horizon(historical),
        exit_options(mobile),
        spatial_scope(global)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: OS STACK DEVELOPER - Tangled Rope
   --------------------------------------------------------------------------
   WHO: individual_moderate
   WHEN: biographical
   WHERE: constrained
   
   WHY: The developer is bound by the legacy of the wire image, which feels
   like a Snare. However, they also benefit from the coordination of a clear
   spec, which acts as a Rope. The combination is a Tangled Rope: a useful
   tool that also severely constrains innovation.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    tcp_rfc9293_interoperability,
    tangled_rope,
    context(
        agent_power(individual_moderate),
        time_horizon(biographical),
        exit_options(constrained),
        spatial_scope(national)
    )
).

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(tcp_interop_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(tcp_rfc9293_interoperability, Type1, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(tcp_rfc9293_interoperability, Type2, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(tcp_rfc9293_interoperability, Type3, context(agent_power(individual_moderate), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3,
    Type1 \= Type3.

:- end_tests(tcp_interop_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. RECLASSIFICATION: Changed the OS Stack Developer from 'Snare' to 'Tangled Rope'. This better captures the dual nature of the RFC: it's a constraint (snare) but also a valuable coordination standard (rope).
 * 
 * 2. PERSPECTIVE SELECTION: Maintained the three core perspectives (rule-maker, rule-follower, rule-user) as they clearly demonstrate the perspectival nature of a technical standard.
 * 
 * 3. AMBIGUITIES: The main ambiguity is whether the protocol's overhead is "extractive." I've classified it as a non-extractive trade-off for reliability, hence `victim(none)`.
 * 
 * 4. CONFIDENCE: High. The dynamics of technical standards like RFCs are a classic example of perspectival constraint classification.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

/**
 * No significant Omega variables identified. The system's behavior is
 * well-defined and its uncertainties are empirical (e.g., specific
 * implementation bugs) rather than fundamental.
 */

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * 
 * The primary alternative to TCP's rigid structure is to move transport
 * logic to the application layer over UDP.
 * 
 * ALTERNATIVE 1: UDP-based protocols (e.g., QUIC)
 *    Viability: Highly viable, now standardized as RFC 9000.
 *    Suppression: Not suppressed, but adoption is slowed by the massive installed base of TCP-optimized hardware and middleboxes. This demonstrates the "gravity" of a successful Rope.
 *    
 * CONCLUSION: The rise of QUIC shows that while the TCP constraint is powerful, it is not a 'Mountain'. It's a very successful 'Rope' whose own success creates the friction that makes it hard to replace, giving it Mountain-like characteristics for many agents.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/tcp_rfc9293_interoperability].
 * 2. Multi-perspective: ?- multi_index_report(tcp_rfc9293_interoperability).
 * 3. Run tests: ?- run_tests(tcp_interop_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: rfc9293_state_machine
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: RFC 9293 - Transmission Control Protocol (TCP)
% ============================================================================

:- module(constraint_rfc9293_state_machine, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: rfc9293_state_machine
 * human_readable: TCP State Machine Constraints
 * domain: technological/institutional
 * temporal_scope: Connection-lifetime (milliseconds to hours) 
 * spatial_scope: Local (endpoint logic) 
 * 
 * SUMMARY:
 * The TCP state machine governs the lifecycle of a connection, from initial 
 * handshake (SYN) to termination (FIN/TIME-WAIT). It enforces 
 * strict transition rules that ensure both peers remain synchronized despite 
 * network delays or reboots.
 * 
 * KEY AGENTS:
 * - Stack Developer (Individual Moderate): Must implement transitions for 11 distinct states.
 * - IETF (Institutional): The governing body of the standard.
 * - Automated Scanner/Script (Individual Powerless): No ability to modify the host's logic.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(rfc9293_state_machine, 0, 10).
narrative_ontology:constraint_claim(rfc9293_state_machine, mountain).

% Base extractiveness: 0.2 (Moderate overhead). 
% Requires memory for Transmission Control Blocks (TCBs) even in idle states.
domain_priors:base_extractiveness(rfc9293_state_machine, 0.2).

% Suppression: 0.6 (High). 
% Deviating from the state machine (e.g., ignoring a FIN) leads to "half-open" 
% connections and potential resource exhaustion.
domain_priors:suppression_score(rfc9293_state_machine, 0.6).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(rfc9293_state_machine, extractiveness, 0.2).
narrative_ontology:constraint_metric(rfc9293_state_machine, suppression_requirement, 0.6).

% Enforcement: The protocol enforces itself through Resets (RST).
% Arriving segments that don't match the current state elicit an RST to 
% "kill" the non-conformant connection.
domain_priors:requires_active_enforcement(rfc9293_state_machine).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(rfc9293_state_machine, protocol_stability).
constraint_victim(rfc9293_state_machine, developer_effort).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: AUTOMATED SCANNER/SCRIPT - Mountain
   --------------------------------------------------------------------------
   WHO: powerless (No ability to modify the host's logic)
   WHEN: immediate (Execution time)
   WHERE: trapped (By the deterministic response of the target host)
   
   WHY THIS CLASSIFICATION:
   To a script, the state machine is an unyielding 'Mountain'. 
   If a port is in LISTEN, it behaves exactly according to Section 3.10.7.2. 
   There is no "negotiation"—only the law of the RFC, a fixed and predictable landscape.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    rfc9293_state_machine,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: INSTITUTIONAL (IETF) - Rope
   --------------------------------------------------------------------------
   WHO: institutional (Governing body of the standard)
   WHEN: historical (40+ year protocol stability)
   WHERE: mobile (Can update and deprecate standards over time)
   
   WHY THIS CLASSIFICATION:
   For the IETF, the state machine is a 'Rope' that provides a common language 
   for diverse machines (from IoT sensors to supercomputers) to 
   coordinate reliable data transfer across the global internet. It is a tool for
   ensuring interoperability and stability.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    rfc9293_state_machine,
    rope,
    context(
        agent_power(institutional),
        time_horizon(historical),
        exit_options(mobile),
        spatial_scope(global)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: STACK DEVELOPER - Snare
   --------------------------------------------------------------------------
   WHO: individual_moderate (Responsible for correct implementation)
   WHEN: biographical (Years spent maintaining/debugging kernel code)
   WHERE: constrained (The "wire image" of TCP is frozen; changes are hard)
   
   WHY THIS CLASSIFICATION:
   For a developer, the state machine acts as a 'Snare' because of the complexity
   involved in "Anomaly" states like Simultaneous Open or Half-Open connections. 
   Failure to handle a rare transition can lead to system hangs or security
   vulnerabilities, strangling the developer with intricate, high-stakes details.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    rfc9293_state_machine,
    snare,
    context(
        agent_power(individual_moderate),
        time_horizon(biographical),
        exit_options(constrained),
        spatial_scope(local)
    )
).

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(rfc9293_state_machine_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(rfc9293_state_machine, Type1, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(rfc9293_state_machine, Type2, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(rfc9293_state_machine, Type3, context(agent_power(individual_moderate), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3,
    Type1 \= Type3.

:- end_tests(rfc9293_state_machine_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. CLASSIFICATION RATIONALE:
 *    - Automated Scanner (Mountain): An immutable set of rules to probe.
 *    - IETF (Rope): A tool for global interoperability.
 *    - Stack Developer (Snare): A complex, high-stakes implementation challenge.
 * 
 * 2. CORE INSIGHT: The TCP state machine is a 'Mountain' of logical necessity
 *    that, when codified by an institution (IETF), becomes a 'Rope' for global
 *    coordination. However, for those tasked with implementing its intricate
 *    details, it can feel like a 'Snare' of complexity.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * The core uncertainty is the conceptual versus actual existence of the 'CLOSED' state.
 */

omega_variable(
    closed_state_reality,
    "Is the TCP 'CLOSED' state a true non-existent state (a conceptual 'Mountain') or a simplification masking underlying resource release complexities (a procedural 'Rope')?",
    resolution_mechanism("Detailed analysis of operating system kernel implementations of TCP termination routines and associated resource management across various platforms."),
    impact("If Mountain: The state machine model is fundamentally complete. If Rope: Resource management beyond the state machine's explicit transitions is critical for robustness."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */
/**
 * VIABLE ALTERNATIVES
 *
 * ALTERNATIVE 1: TCP Fast Open (TFO)
 *    Viability: Allows application data to be sent in the initial SYN segment, improving latency for short-lived connections.
 *    Suppression: Faces challenges with network middlebox interference and security considerations for initial data, limiting its widespread adoption.
 *
 * CONCLUSION:
 * The core TCP state machine remains the dominant 'Rope' for reliable internet
 * communication. While alternatives exist to optimize specific use cases,
 * their suppression due to security and deployment complexities reinforces
 * the enduring necessity of the foundational state machine.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/rfc9293_state_machine].
 * 2. Multi-perspective: ?- multi_index_report(rfc9293_state_machine).
 * 3. Run tests: ?- run_tests(rfc9293_state_machine_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: rices_theorem_undecidability
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Henry Gordon Rice (1953) / Computability Theory
% ============================================================================

:- module(constraint_rices_theorem, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: rices_theorem_undecidability
 * human_readable: Rice's Theorem (Undecidability of Semantic Properties)
 * domain: technological/mathematical
 * temporal_scope: 1953 - Present
 * spatial_scope: Global/Abstract (Universal Computation)
 * * SUMMARY:
 * Rice's Theorem is a fundamental result in computability theory stating that 
 * any non-trivial semantic property of a program (the language recognized by 
 * a Turing machine) is undecidable. This means it is logically impossible to 
 * create a general-purpose tool that can determine behavioral traits of code, 
 * such as "will this program ever crash?" or "is this code malicious?".
 * * KEY AGENTS:
 * - The Turing Machine (Subject): The powerless agent whose behavioral 
 * properties remain fundamentally shrouded from external automated judgment.
 * - The Software Verifier: An institutional agent attempting to coordinate 
 * system safety, for whom the theorem is a functional boundary.
 * - The Malware Analyst: An individual moderate agent who is "strangled" by 
 * the impossibility of a perfect automated detection tool.
 * * NARRATIVE ARC:
 * Rice's Theorem functions as a "Mountain" of logical reality—a wall that 
 * defines the limits of what machines can know about each other. In 
 * professional software engineering, it is a "Rope" for coordination, 
 * allowing developers to accept "heuristic" analysis as the standard of 
 * achievement. However, in cybersecurity, it is a "Snare" that extracts 
 * massive human labor and capital to perform manual audits that the 
 * "Mountain" prevents from being automated.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Structural Anchor for Python extraction
narrative_ontology:interval(rices_era, 1953, 2026).
narrative_ontology:constraint_claim(rices_theorem_undecidability, mountain).

% Base extractiveness score (0.0-1.0)
% Rationale: 0.15. While a mathematical truth, it "extracts" the possibility 
% of absolute automated correctness, forcing a permanent tax of human oversight.
domain_priors:base_extractiveness(rices_theorem_undecidability, 0.15).

% Suppression score (0.0-1.0)
% Rationale: 0.2. It suppresses the hope for "Perfect Verification" tools, 
% rendering them logically impossible and thus functionally invisible.
domain_priors:suppression_score(rices_theorem_undecidability, 0.2).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(rices_theorem_undecidability, extractiveness, 0.15).
narrative_ontology:constraint_metric(rices_theorem_undecidability, suppression_requirement, 0.2).

% Enforcement: Emerges naturally from the logic of the Halting Problem.
domain_priors:emerges_naturally(rices_theorem_undecidability).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(rices_theorem_undecidability, complexity_theorists). % Intellectual stability.
constraint_victim(rices_theorem_undecidability, automated_security_vendors). % Cannot deliver "perfect" results.

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================= */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE EXECUTING PROGRAM - Mountain
   --------------------------------------------------------------------------
   
   WHO: powerless - The program cannot "show" its property to a decider.
   WHEN: immediate - The limit is true for any single execution or analysis.
   WHERE: trapped - Bound by the laws of recursive enumerability.
   SCOPE: local - Immediate neighborhood of the code logic.
   
   WHY THIS CLASSIFICATION:
   For the code itself, the inability for an external algorithm to classify 
   its non-trivial behavior is a natural law. It is an unyielding Mountain; 
   there are zero degrees of freedom where a "perfect decider" could exist.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    rices_theorem_undecidability,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE STATIC ANALYSIS ARCHITECT - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional - Power to define what "Safe" code looks like via Linters.
   WHEN: biographical - Planning the lifecycle of a codebase or language.
   WHERE: mobile - Can choose different subsets of decidable properties to check.
   SCOPE: global - Universal application in software development.
   
   WHY THIS CLASSIFICATION:
   For the architect, Rice's Theorem is a "Rope"—a functional coordination 
   mechanism. It provides the "standard of achievement" that justifies why 
   compilers only give "warnings" or "potential errors." It coordinates the 
   industry's expectations around the fact that perfect proofs are not the goal.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    rices_theorem_undecidability,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE CYBER DEFENSE ENGINEER - Snare
   --------------------------------------------------------------------------
   
   WHO: individual_moderate - Has the tools to analyze but is bound by the theorem.
   WHEN: immediate - Every piece of malware is a new instance of the "Snare."
   WHERE: constrained - Forced to use imperfect heuristics (AV/EDR).
   SCOPE: national - Protecting state infrastructure.
   
   WHY THIS CLASSIFICATION:
   For the engineer, the theorem acts as a "Snare." It "strangles" their 
   ability to provide 100% security. It extracts massive cycles of human 
   analysis (extraction) because the "Mountain" of Rice's Theorem means 
   every new behavioral trait must be manually verified or guessed.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    rices_theorem_undecidability,
    snare,
    context(
        agent_power(individual_moderate),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(national)
    )
) :- 
    domain_priors:base_extractiveness(rices_theorem_undecidability, E),
    E >= 0.1,
    !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(rices_theorem_undecidability_tests).

test(multi_perspective_variance) :-
    % Code -> Mountain
    constraint_indexing:constraint_classification(rices_theorem_undecidability, Type1, context(powerless, immediate, trapped, local)),
    % Architect -> Rope
    constraint_indexing:constraint_classification(rices_theorem_undecidability, Type2, context(institutional, biographical, mobile, global)),
    Type1 = mountain,
    Type2 = rope.

test(extraction_scaling) :-
    ContextPowerless = context(powerless, immediate, trapped, local),
    ContextPowerful = context(institutional, biographical, mobile, global),
    constraint_indexing:extractiveness_for_agent(rices_theorem_undecidability, ContextPowerless, S1),
    constraint_indexing:extractiveness_for_agent(rices_theorem_undecidability, ContextPowerful, S2),
    S1 > S2.

test(natural_emergence) :-
    domain_priors:emerges_naturally(rices_theorem_undecidability).

:- end_tests(rices_theorem_undecidability_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * * 1. EXTRACTIVENESS SCORE (0.15):
 * Reasoning: It is low because it is an abstract law of logic, but not zero 
 * because it creates an "Impossibility Tax" on security.
 * * 2. CLASSIFICATION RATIONALE:
 * Chose Code (Subject), Linter Designer (Utility), and Security Analyst 
 * (Victim) to highlight the gap between "Logic" and "Praxis."
 * * 3. OMEGA IDENTIFICATION:
 * Formalized the uncertainty of "Heuristic Completeness"—can AI 
 * effectively turn this Snare back into a Rope by guessing correctly 
 * 99.9% of the time?
 */

% YOUR OMEGAS HERE:
omega_variable(
    heuristic_asymptotic_completeness,
    "Will Large Language Models or Neural Verifiers provide 99.9% behavioral detection?",
    resolution_mechanism("Audit of false-positive rates in AI-driven static analysis across 10 years."),
    impact("If Yes: The Snare is functionally a Rope. If No: The Snare remains a Mountain."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Domain-Specific Languages (DSLs) with Restricted Logic
 * Viability: By using languages that are NOT Turing-complete (e.g., SQL, regex), 
 * Rice's Theorem no longer applies, and properties become decidable.
 * Suppression: Often rejected for general-purpose programming due to lack 
 * of power, but a vital "Rope" for high-security sub-systems.
 * * ALTERNATIVE 2: Proof-Carrying Code
 * Viability: The code comes with a proof of its properties.
 * Suppression: High "extraction" of developer labor makes it rare in 
 * commercial industry.
 * * CONCLUSION:
 * The existence of DSLs (Alternative 1) proves that Rice's Theorem is a 
 * "Mountain" only if we choose the "Rope" of Turing-completeness.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * * 1. Load: ?- [constraint_rices_theorem].
 * 2. Multi-perspective: ?- multi_index_report(rices_theorem_undecidability).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: riot_incentive_loop_2026
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2026-02-05
% ============================================================================

:- module(constraint_riot_loop, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: riot_incentive_loop_2026
 * human_readable: The Riot-Incentive Loop (State-Managed Chaos)
 * domain: political/social/governance
 * * SUMMARY:
 * This constraint models the feedback loop where state agencies deploy non-lethal 
 * chemical agents (tear gas) to incite panic and aggression. This "chaos" is 
 * then theatrically labeled a "riot" to justify expanded federal funding, 
 * tactical escalation, and the suspension of civic rights. 
 * * KEY AGENTS:
 * - [The Public/Protesters]: Subject (Powerless) - Trapped in a physiological 
 * extraction of breath and safety.
 * - [Security Apparatus]: Beneficiary (Institutional) - Gains budget and 
 * authority through the maintenance of the "riot" state.
 * - [Sarah Jeong / Independent Press]: Auditor (Analytical) - Uncovers the 
 * functional failure of gas as a "dispersal" tool.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Extremely high extraction (0.82) as it consumes civil liberties and 
% physical health for institutional growth.
domain_priors:base_extractiveness(riot_incentive_loop_2026, 0.82). 

% High suppression (0.85); the use of unmarked vans and persistent gas 
% clouds removes the "exit option" of peaceful assembly.
domain_priors:suppression_score(riot_incentive_loop_2026, 0.85).   

% Very high theater ratio (0.90); the "riot" label is a performative mask 
% used to justify force that functionally incites the very behavior it claims to stop.
domain_priors:theater_ratio(riot_incentive_loop_2026, 0.90).       

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(riot_incentive_loop_2026, extractiveness, 0.82).
narrative_ontology:constraint_metric(riot_incentive_loop_2026, suppression_requirement, 0.85).
narrative_ontology:constraint_metric(riot_incentive_loop_2026, theater_ratio, 0.9).

% Requires active enforcement by federal tactical units (CBP, ICE, DHS).
domain_priors:requires_active_enforcement(riot_incentive_loop_2026).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For the civilian, the loop is a snare: an inescapable trap where presence 
% in public leads to chemical extraction and arbitrary detention.
constraint_indexing:constraint_classification(riot_incentive_loop_2026, snare, 
    context(agent_power(powerless), 
            time_horizon(biographical), 
            exit_options(trapped), 
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For the State, the loop is a rope: it coordinates the "protection of property" 
% and the "rule of law" through a standardized tactical response.
constraint_indexing:constraint_classification(riot_incentive_loop_2026, rope, 
    context(agent_power(institutional), 
            time_horizon(generational), 
            exit_options(mobile), 
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (PITON)
% The Auditor identifies this as a Piton: the loop is no longer functional 
% for "dispersal" but exists as an inertial mechanical anchor for governance.
constraint_indexing:constraint_classification(riot_incentive_loop_2026, piton, 
    context(agent_power(analytical), 
            time_horizon(historical), 
            exit_options(arbitrage), 
            spatial_scope(global))) :-
    domain_priors:theater_ratio(riot_incentive_loop_2026, TR), TR > 0.70.

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(riot_loop_tests).

test(piton_detection) :-
    % Verify the Auditor detects the Piton due to high theater ratio.
    constraint_indexing:constraint_classification(riot_incentive_loop_2026, piton, _).

test(perspectival_gap) :-
    % Subject feels a Snare; State sees coordination (Rope).
    constraint_indexing:constraint_classification(riot_incentive_loop_2026, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(riot_incentive_loop_2026, rope, context(agent_power(institutional), _, _, _)).

:- end_tests(riot_loop_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The Riot-Incentive Loop is the quintessential "Piton." While the state claims 
 * the "Rope" of public safety, the high theater_ratio (0.90) indicates that 
 * the "riot" is a manufactured byproduct. 
 *
 * [RESOLVED MANDATROPHY]: Extraction (0.82) is resolved via the "Riot-Incentive" 
 * feedback mechanism—the extraction of rights creates the theater needed to 
 * maintain the institutional anchor.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_incitement_intent,
    'Is the incitement a bug or a feature of modern threat projection?',
    'Analysis of federal agent training manuals regarding "agitation" vs. "dispersal".',
    'If intentional, it is a Snare; if accidental/inertial, it is a Piton.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(riot_incentive_loop_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Model the drift from "Crowd Control" (T=0) to "Riot Incitement" (T=10).

% Theater ratio: Increases as the functional use of gas fails and the 
% performative "riot" narrative becomes the primary output.
narrative_ontology:measurement(riot_tr_t0, riot_incentive_loop_2026, theater_ratio, 0, 0.45).
narrative_ontology:measurement(riot_tr_t5, riot_incentive_loop_2026, theater_ratio, 5, 0.72).
narrative_ontology:measurement(riot_tr_t10, riot_incentive_loop_2026, theater_ratio, 10, 0.90).

% Extraction: Increases as tactical force replaces negotiation, extracting 
% bodily autonomy from larger civilian segments.
narrative_ontology:measurement(riot_ex_t0, riot_incentive_loop_2026, base_extractiveness, 0, 0.38).
narrative_ontology:measurement(riot_ex_t5, riot_incentive_loop_2026, base_extractiveness, 5, 0.65).
narrative_ontology:measurement(riot_ex_t10, riot_incentive_loop_2026, base_extractiveness, 10, 0.82).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: ritual_transition_scaffold
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-23
% ============================================================================

:- module(constraint_ritual_transition_scaffold, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: ritual_transition_scaffold
 * human_readable: The Habit-Building Scaffold
 * domain: social/institutional
 * * SUMMARY:
 * An intentional use of procedural theater to stabilize a chaotic organization.
 * While the rituals themselves may have low direct utility, they act as a Scaffold
 * to re-establish the baseline coordination (Rope) needed for future growth.
 * The structure is explicitly temporary, designed to be dismantled once stable
 * habits are formed.
 * * KEY AGENTS:
 * - The New Hire: Subject (Powerless) - Finding safety in the new "routine."
 * - Senior Management: Beneficiary (Institutional) - Seeing restored order.
 * - The Change Manager: Architect (Organized) - Designing the sunset-bound rituals.
 * - The Efficiency Auditor: Auditor (Analytical) - Monitoring the Scaffold-to-Rope decay.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(ritual_transition_scaffold, 0.35). % Moderate: Labor is used for habit-building, not pure extraction.
domain_priors:suppression_score(ritual_transition_scaffold, 0.60).   % Moderate: Participation is mandatory but justified by crisis.
domain_priors:theater_ratio(ritual_transition_scaffold, 0.72).       % High: The rituals are theatrical by design, but risk hardening into a Piton.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(ritual_transition_scaffold, extractiveness, 0.35).
narrative_ontology:constraint_metric(ritual_transition_scaffold, suppression_requirement, 0.60).
narrative_ontology:constraint_metric(ritual_transition_scaffold, theater_ratio, 0.72).

% Constraint self-claim (what does the constraint claim to be?)
narrative_ontology:constraint_claim(ritual_transition_scaffold, coordination).

% Binary flags
narrative_ontology:has_sunset_clause(ritual_transition_scaffold).      % Mandatory for Scaffold classification.
domain_priors:requires_active_enforcement(ritual_transition_scaffold). % Required for Tangled Rope classification.

% Structural property derivation hooks:
% These are required for Scaffold and Tangled Rope classifications.
narrative_ontology:constraint_beneficiary(ritual_transition_scaffold, organization_members).
narrative_ontology:constraint_victim(ritual_transition_scaffold, new_hires).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE DISORIENTED WORKER (ROPE)
% To someone lost in chaos, the theater provides a "Rope" of predictability.
% The perceived extraction is low because the alternative is high-cost chaos.
constraint_indexing:constraint_classification(ritual_transition_scaffold, rope,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(constrained),
            spatial_scope(local))).

% PERSPECTIVE 2: SENIOR MANAGEMENT (ROPE)
% From an institutional perspective, the restored order and predictability
% are seen as a pure coordination good (Rope). The extraction cost is
% abstracted away and considered negligible for organizational stability.
constraint_indexing:constraint_classification(ritual_transition_scaffold, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE CHANGE ARCHITECT (SCAFFOLD)
% The architect views this as a temporary support structure that must expire.
constraint_indexing:constraint_classification(ritual_transition_scaffold, scaffold,
    context(agent_power(organized),
            time_horizon(generational),
            exit_options(constrained),
            spatial_scope(national))) :-
    narrative_ontology:has_sunset_clause(ritual_transition_scaffold).

% PERSPECTIVE 4: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Detects the hybrid nature: it provides a genuine coordination function
% (beneficiary exists) but does so via enforced, extractive means (victim
% exists, enforcement required).
constraint_indexing:constraint_classification(ritual_transition_scaffold, tangled_rope,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(ritual_transition_scaffold_tests).

test(perspectival_gap) :-
    % Verify a gap between the institutional view (Rope) and analytical view (Tangled Rope).
    constraint_indexing:constraint_classification(ritual_transition_scaffold, rope, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(ritual_transition_scaffold, tangled_rope, context(agent_power(analytical), _, _, _)).

test(scaffold_properties) :-
    % Verify the presence of a sunset clause and beneficiary triggers Scaffold classification.
    constraint_indexing:constraint_classification(ritual_transition_scaffold, scaffold, context(agent_power(organized), _, _, _)),
    narrative_ontology:has_sunset_clause(ritual_transition_scaffold),
    narrative_ontology:constraint_beneficiary(ritual_transition_scaffold, _).

test(tangled_rope_properties) :-
    % Verify the analytical observer correctly identifies a Tangled Rope.
    constraint_indexing:constraint_classification(ritual_transition_scaffold, tangled_rope, context(agent_power(analytical), _, _, _)),
    narrative_ontology:constraint_beneficiary(ritual_transition_scaffold, _),
    narrative_ontology:constraint_victim(ritual_transition_scaffold, _),
    domain_priors:requires_active_enforcement(ritual_transition_scaffold).

:- end_tests(ritual_transition_scaffold_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This constraint models a deliberate, temporary use of high-suppression,
 * theatrical coordination to bootstrap order. The key is its intentional,
 * temporary nature, distinguishing it from a decaying Piton.
 * - The `base_extractiveness` (0.35) is moderate, representing the cost of
 *   time spent on rituals instead of direct productive work.
 * - The `theater_ratio` (0.72) is high by design, as the rituals are symbolic.
 * - The `has_sunset_clause` is critical, as it's the structural guarantee
 *   that prevents the Scaffold from hardening into a permanent, extractive fixture.
 *
 * PERSPECTIVAL GAP:
 * The gap is significant. New hires (`powerless`) and management (`institutional`)
 * both perceive a `Rope` because it solves their immediate problem (chaos for the
 * former, instability for the latter). The architect (`organized`) sees the
 * intended temporary `Scaffold`. The external analyst (`analytical`) sees the
 * underlying structural reality: a `Tangled Rope` that combines real
 * coordination with asymmetric extraction and enforcement.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_scaffold_hardening,
    'Will the rituals be abandoned once stability is reached, or will they harden into a Piton?',
    'Observation of the theater_ratio and enforcement levels 12-24 months post-stability, and checking if the sunset clause is honored.',
    'If abandoned: Successful Scaffold. If hardened: Degrades into a Piton or an extractive Snare.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(ritual_transition_scaffold, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This models the *intended* lifecycle of the scaffold, where its negative
% aspects (extraction and theater) were initially higher and were meant to
% decrease as the organization stabilized. The final values match the
% base properties.

% Theater ratio over time (models intended decay):
narrative_ontology:measurement(rts_tr_t0, ritual_transition_scaffold, theater_ratio, 0, 0.80).
narrative_ontology:measurement(rts_tr_t5, ritual_transition_scaffold, theater_ratio, 5, 0.75).
narrative_ontology:measurement(rts_tr_t10, ritual_transition_scaffold, theater_ratio, 10, 0.72).

% Extraction over time (models decreasing burden):
narrative_ontology:measurement(rts_ex_t0, ritual_transition_scaffold, base_extractiveness, 0, 0.40).
narrative_ontology:measurement(rts_ex_t5, ritual_transition_scaffold, base_extractiveness, 5, 0.38).
narrative_ontology:measurement(rts_ex_t10, ritual_transition_scaffold, base_extractiveness, 10, 0.35).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type: The rituals are a mechanism to enforce new behavioral norms.
narrative_ontology:coordination_type(ritual_transition_scaffold, enforcement_mechanism).

% Network relationships: This scaffold directly influences how new employees are integrated.
narrative_ontology:affects_constraint(ritual_transition_scaffold, employee_onboarding_process).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: rogers_commission_institutional_analysis
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-22
% ============================================================================

:- module(constraint_rogers_commission_institutional_analysis, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: rogers_commission_institutional_analysis
 * human_readable: The Silent Safety Silo (NASA Decision-Making Pre-Challenger)
 * domain: political/technological
 * * SUMMARY:
 * The Rogers Commission identified a "silent safety" constraint where critical
 * technical data regarding O-ring erosion was filtered out before reaching
 * top-level NASA management. This institutional silo created a
 * false perception of safety, treating known technical flaws as "acceptable
 * flight risks" rather than terminal threats. The pressure to maintain a
 * rigorous launch schedule functioned as a Snare, extracting engineering
 * integrity and safety margins.
 * * KEY AGENTS:
 * - Field Engineers (e.g., at Thiokol): Powerless subjects who possessed the critical data but lacked the institutional authority to halt the launch.
 * - NASA Marshall Center Management: Institutional beneficiaries of the launch tempo, who enforced operational pressure and suppressed dissenting technical reports.
 * - The Rogers Commission: The analytical observer, a retrospective body tasked with identifying the structural "failure of communication".
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
% Rationale (Extraction): 0.85. The system extracted engineering integrity,
% safety margins, and ultimately human life to serve the institutional goal
% of maintaining a high-tempo launch schedule.
domain_priors:base_extractiveness(rogers_commission_institutional_analysis, 0.85).
% Rationale (Suppression): 0.75. The Commission found that critical information about
% O-ring erosion was not communicated to the highest levels, effectively
% suppressing alternative risk assessments and reversing the burden of proof.
domain_priors:suppression_score(rogers_commission_institutional_analysis, 0.75).
% Rationale (Theater): 0.10. The safety review process was still functional,
% not purely performative, but its conclusions were marginalized. The theater
% was low, but the suppression of its output was high.
domain_priors:theater_ratio(rogers_commission_institutional_analysis, 0.10).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(rogers_commission_institutional_analysis, extractiveness, 0.85).
narrative_ontology:constraint_metric(rogers_commission_institutional_analysis, suppression_requirement, 0.75).
narrative_ontology:constraint_metric(rogers_commission_institutional_analysis, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% The system claimed to be a coordination mechanism for achieving ambitious goals.
narrative_ontology:constraint_claim(rogers_commission_institutional_analysis, coordination).

% Binary flags
% Requires active enforcement via "Launch Fever" and the marginalization
% of the safety reporting structure. This is a key indicator for Tangled Rope/Snare.
domain_priors:requires_active_enforcement(rogers_commission_institutional_analysis).

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(rogers_commission_institutional_analysis, nasa_institutional_prestige).
narrative_ontology:constraint_victim(rogers_commission_institutional_analysis, engineering_safety_protocol).
narrative_ontology:constraint_victim(rogers_commission_institutional_analysis, crew_safety).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE FIELD ENGINEER (MOUNTAIN)
% To the engineers, the problem was a Mountain of physics (O-ring failure at
% low temperatures). However, the institutional process made this physical
% reality invisible to decision-makers, creating an artificial Mountain: the
% immovable requirement to prove 100% that the launch was unsafe.
constraint_indexing:constraint_classification(rogers_commission_institutional_analysis, mountain,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: NASA MANAGEMENT (ROPE)
% Management viewed the history of O-ring erosion as a manageable technical
% issue that had been "normalized" through prior successful flights. They
% perceived their role as coordinating a complex system towards a necessary
% milestone, making the process a Rope in their view.
constraint_indexing:constraint_classification(rogers_commission_institutional_analysis, rope,
    context(agent_power(institutional),
            time_horizon(biographical),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (SNARE)
% The Rogers Commission's analysis reveals a Snare. By isolating top-level
% management from technical dissent, the institutional structure "choked off"
% the very safety data it was designed to ingest, extracting safety margins
% to the point of catastrophic failure.
constraint_indexing:constraint_classification(rogers_commission_institutional_analysis, snare,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(rogers_commission_institutional_analysis_tests).

test(perspectival_gap_mountain_vs_rope) :-
    % Verify the critical gap between the engineer's view (Mountain) and management's view (Rope).
    constraint_indexing:constraint_classification(rogers_commission_institutional_analysis, mountain, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(rogers_commission_institutional_analysis, rope, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(rogers_commission_institutional_analysis, snare, context(agent_power(analytical), _, _, _)).

test(high_extraction_snare_thresholds) :-
    % Verify the base metrics meet the criteria for a high-extraction Snare.
    domain_priors:base_extractiveness(rogers_commission_institutional_analysis, E),
    domain_priors:suppression_score(rogers_commission_institutional_analysis, S),
    E >= 0.46,
    S >= 0.60.

:- end_tests(rogers_commission_institutional_analysis_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect the findings of the Rogers Commission. The high extraction (0.85)
 * represents the ultimate price paid (human lives and program integrity) for
 * maintaining the launch schedule. The high suppression (0.75) captures the
 * core finding: a "flaw in the decision-making process" that actively filtered
 * out critical safety data. The perspectival gap is profound: engineers saw an
 * immutable physical limit (Mountain), while management saw a routine coordination
 * challenge (Rope). The analytical truth, revealed by the disaster, was a
 * predatory institutional structure (Snare).
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * This case is a classic example of potential Mandatrophy. The powerless agent
 * (the engineer) perceives the constraint as a Mountain—an unchangeable law of
 * physics. However, the *operative constraint* was the institutional Snare that
 * reversed the burden of proof, demanding proof of *certain failure* to stop the
 * launch, rather than proof of *safety* to proceed. This analysis resolves the
 * Mandatrophy by correctly identifying the institutional pressure, not the
 * physical law, as the primary, constructed constraint that led to the disaster.
 * The system correctly classifies the analytical perspective as a Snare, preventing
 * the misattribution of a policy failure to a law of nature.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_rogers_commission_institutional_analysis,
    'Can a Snare-type organizational structure ever truly be reformed into a Rope without a total purge of the leadership that normalized deviance?',
    'Longitudinal study of NASA cultural shifts post-Challenger versus post-Columbia (2003), tracking safety reporting metrics and leadership continuity.',
    'If Yes: Cultural reform is a viable Rope. If No: Institutional failure is a generational Mountain, recurring despite interventions.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(rogers_commission_institutional_analysis, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data models the "normalization of deviance" at NASA. As flawed
% launches succeeded, the perceived risk decreased, and the pressure to
% maintain schedule (extraction) increased.

% Theater ratio over time (safety reviews become slightly more procedural):
narrative_ontology:measurement(rcia_tr_t0, rogers_commission_institutional_analysis, theater_ratio, 0, 0.05).
narrative_ontology:measurement(rcia_tr_t5, rogers_commission_institutional_analysis, theater_ratio, 5, 0.08).
narrative_ontology:measurement(rcia_tr_t10, rogers_commission_institutional_analysis, theater_ratio, 10, 0.10).

% Extraction over time (schedule pressure intensifies, safety margins erode):
narrative_ontology:measurement(rcia_ex_t0, rogers_commission_institutional_analysis, base_extractiveness, 0, 0.40).
narrative_ontology:measurement(rcia_ex_t5, rogers_commission_institutional_analysis, base_extractiveness, 5, 0.65).
narrative_ontology:measurement(rcia_ex_t10, rogers_commission_institutional_analysis, base_extractiveness, 10, 0.85).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The launch schedule is a form of resource allocation (allocating launch
% windows, personnel, and material against a timeline).
narrative_ontology:coordination_type(rogers_commission_institutional_analysis, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: rogue_wave_control_2026
% ============================================================================
% Version: 3.4
% Logic: 3.3
% Generated: 2026-02-05
% ============================================================================

:- module(constraint_rogue_wave_control_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    narrative_ontology:interval/3,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * SUMMARY:
 * Researchers have achieved deterministic control over chaotic "rogue waves" 
 * in VCSEL lasers using a $\lambda/2$-waveplate. This turns a 
 * physical "Mountain" of chaos into a "Rope" of engineered signaling.
 */

/* ==========================================================================
   2. BASE PROPERTIES
   ========================================================================== */

domain_priors:base_extractiveness(rogue_wave_control_2026, 0.15). % Low extraction (Utility).
domain_priors:suppression_score(rogue_wave_control_2026, 0.10).   % Passive physical law.
domain_priors:theater_ratio(rogue_wave_control_2026, 0.05).      % Highly functional control.

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(rogue_wave_control_2026, extractiveness, 0.15).
narrative_ontology:constraint_metric(rogue_wave_control_2026, suppression_requirement, 0.1).
narrative_ontology:constraint_metric(rogue_wave_control_2026, theater_ratio, 0.05).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS
   ========================================================================== */

% PERSPECTIVE 1: THE PHYSICAL SYSTEM (MOUNTAIN)
% To the underlying photonics, the $850nm$ TE/TM mode exchange is a 
% fixed physical limit (Mountain).
constraint_indexing:constraint_classification(rogue_wave_control_2026, mountain, 
    context(agent_power(powerless), 
            time_horizon(historical), 
            exit_options(trapped), 
            spatial_scope(universal))).

% PERSPECTIVE 2: THE ENGINEER (ROPE)
% For cryptography, deterministic control is a Rope of pure coordination.
constraint_indexing:constraint_classification(rogue_wave_control_2026, rope, 
    context(agent_power(institutional), 
            time_horizon(generational), 
            exit_options(mobile), 
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(rogue_wave_control_2026_tests).

test(low_extraction) :-
    domain_priors:base_extractiveness(rogue_wave_control_2026, E),
    E < 0.20.

:- end_tests(rogue_wave_control_2026_tests).

/* ==========================================================================
   5. OMEGA VARIABLES (Ω)
   ========================================================================== */

omega_variable(
    omega_photonics_2026,
    'Can deterministic chaos be reliably distinguished from quantum randomness?',
    'Analysis of correlation coefficients at $50 GSa/s$ sampling rates.',
    'If yes, cryptography is secure; if no, rogue waves remain a Snare for security.',
    confidence_without_resolution(high)
).

narrative_ontology:interval(rogue_wave_control_2026, 0, 10).
% ============================================================================
% CONSTRAINT STORY: rotation_seven_black_soil
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-22
% ============================================================================

:- module(constraint_rotation_seven_black_soil, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: rotation_seven_black_soil
 * human_readable: R7 Black Soil Toxicity
 * domain: biological/environmental
 * * SUMMARY:
 * The "black soil" in a specific sector of a space station contains a biological
 * toxin that causes irreversible kidney failure and death in humans exposed to it.
 * The constraint is the unchangeable biological effect of the toxin on the human
 * body, which dictates individual fates and institutional strategy.
 * * KEY AGENTS:
 * - Sector Seven Residents: Subjects (Powerless) who are exposed to the soil.
 * - Station Management: Beneficiary (Institutional) who manages the crisis via protocols.
 * - High Command: Auditor (Analytical) who views the toxicity as a fixed parameter for strategic planning.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(rotation_seven_black_soil, 0.95). % Mountain/Snare extraction >= 0.46. Extracts life itself.
domain_priors:suppression_score(rotation_seven_black_soil, 0.1).   % Structural property. The effects are physically evident, not suppressed.
domain_priors:theater_ratio(rotation_seven_black_soil, 0.1).       % Not performative; the effects are real.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(rotation_seven_black_soil, extractiveness, 0.95).
narrative_ontology:constraint_metric(rotation_seven_black_soil, suppression_requirement, 0.1).
narrative_ontology:constraint_metric(rotation_seven_black_soil, theater_ratio, 0.1).

% Constraint self-claim (what does the constraint claim to be?)
% The institutional framing is that this is an unchangeable fact of nature.
narrative_ontology:constraint_claim(rotation_seven_black_soil, natural_law).

% Structural property derivation hooks:
% The station's crisis management protocols create a coordination function.
% The victims are those exposed to the soil.
narrative_ontology:constraint_beneficiary(rotation_seven_black_soil, station_management).
narrative_ontology:constraint_victim(rotation_seven_black_soil, sector_seven_residents).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For an exposed resident, the toxicity is a slow, inescapable trap that
% extracts their health and life.
constraint_indexing:constraint_classification(rotation_seven_black_soil, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For station management, the protocols for handling the crisis are a Rope.
% They coordinate the response, manage exposure, and maintain order, even if
% they cannot solve the underlying problem.
constraint_indexing:constraint_classification(rotation_seven_black_soil, rope,
    context(agent_power(institutional),
            time_horizon(immediate),
            exit_options(constrained),
            spatial_scope(local))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (MOUNTAIN)
% From a strategic, long-term perspective, the toxin's biological effect is an
% immutable physical law—a Mountain that dictates policy like abandoning the sector.
constraint_indexing:constraint_classification(rotation_seven_black_soil, mountain,
    context(agent_power(analytical),
            time_horizon(generational),
            exit_options(analytical),
            spatial_scope(regional))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(rotation_seven_black_soil_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless, institutional, and analytical.
    constraint_indexing:constraint_classification(rotation_seven_black_soil, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(rotation_seven_black_soil, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(rotation_seven_black_soil, TypeAnalytical, context(agent_power(analytical), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypeInstitutional \= TypeAnalytical,
    TypePowerless \= TypeAnalytical.

test(threshold_validation) :-
    % Verify the constraint meets the high-extraction threshold for a Snare.
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(rotation_seven_black_soil, ExtMetricName, E),
    E >= 0.46.

:- end_tests(rotation_seven_black_soil_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness is 0.95 because the constraint extracts life itself, the
 * ultimate resource. Suppression is low (0.1) as the effects (illness) are
 * physically obvious. Theater is also low (0.1) as the consequences are real, not performative.
 * The Perspectival Gap is stark:
 * - For the powerless individual, it's a Snare; their body is trapped by a fatal biological process.
 * - For the institutional manager, the *protocols* for dealing with the crisis are a Rope for coordinating a response.
 * - For the analytical strategist, the underlying biological fact is a Mountain—an unchangeable law of nature that forces large-scale strategic decisions.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * This is a classic Mandatrophic Mountain. The extreme extraction (0.95) is not the result
 * of a constructed rule but an immutable physical reality. The system resolves this by
 * correctly identifying the core constraint as a Mountain from the analytical view,
 * while acknowledging its manifestation as a Snare for those directly affected. The
 * institutional 'Rope' is a response to the Mountain, not the constraint itself.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_toxicity_reversibility,
    'Is the black soil toxicity truly an irreversible Mountain, or could a yet-undiscovered technology (e.g., advanced bioremediation, nanomedicine) reverse its effects?',
    'Long-term research into detoxification methods, medical breakthroughs in kidney regeneration, and geological analysis of soil composition.',
    'If irreversible, it remains a Mountain. If remediable, it transforms into a manageable problem, potentially a Tangled Rope (costly cure) or Rope (universal cure).',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(rotation_seven_black_soil, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data for this high-extraction constraint.
% The perceived extractiveness increased as the long-term lethality became clear.
% Theater ratio remained low as the problem was always a physical reality.

% Theater ratio over time (metric_substitution detection):
narrative_ontology:measurement(rotation_seven_black_soil_tr_t0, rotation_seven_black_soil, theater_ratio, 0, 0.1).
narrative_ontology:measurement(rotation_seven_black_soil_tr_t5, rotation_seven_black_soil, theater_ratio, 5, 0.1).
narrative_ontology:measurement(rotation_seven_black_soil_tr_t10, rotation_seven_black_soil, theater_ratio, 10, 0.1).

% Extraction over time (extraction_accumulation detection):
narrative_ontology:measurement(rotation_seven_black_soil_ex_t0, rotation_seven_black_soil, base_extractiveness, 0, 0.80).
narrative_ontology:measurement(rotation_seven_black_soil_ex_t5, rotation_seven_black_soil, base_extractiveness, 5, 0.90).
narrative_ontology:measurement(rotation_seven_black_soil_ex_t10, rotation_seven_black_soil, base_extractiveness, 10, 0.95).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% This constraint is a biological fact, not a coordination mechanism, so
% Boltzmann data is not applicable. No network relationships are specified.

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: rotation_seven_isolation
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-27
% ============================================================================

:- module(constraint_rotation_seven_isolation, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: rotation_seven_isolation
 * human_readable: R7 Medical Isolation Protocol
 * domain: political/technological/social
 * * SUMMARY:
 * The R7 Protocol enforces the immediate removal and isolation of "flagged"
 * individuals under the guise of an unchangeable safety necessity. In reality,
 * it is a highly enforced, extractive mechanism that removes social "friction"
 * by erasing the sick from the station's population, suppressing all
 * alternative care models.
 * * KEY AGENTS:
 * - Anna: The subject being "extracted" and isolated (Powerless).
 * - Nurse Chen: The enforcer maintaining the protocol for station safety (Institutional).
 * - Rina: The observer who identifies the underlying extractive nature (Analytical).
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(rotation_seven_isolation, 0.85). % Snare extraction >= 0.46
domain_priors:suppression_score(rotation_seven_isolation, 0.70).   % Structural property (raw, unscaled).
domain_priors:theater_ratio(rotation_seven_isolation, 0.10).       % Low theater; this is a brutally functional system.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(rotation_seven_isolation, extractiveness, 0.85).
narrative_ontology:constraint_metric(rotation_seven_isolation, suppression_requirement, 0.70).
narrative_ontology:constraint_metric(rotation_seven_isolation, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% It claims to be a necessary coordination mechanism for public health.
narrative_ontology:constraint_claim(rotation_seven_isolation, coordination).

% Binary flags
domain_priors:requires_active_enforcement(rotation_seven_isolation). % Requires monitoring, locked wards, etc.

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(rotation_seven_isolation, station_population_health).
narrative_ontology:constraint_victim(rotation_seven_isolation, isolated_individuals).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% Anna perceives an unyielding, inescapable trap. The protocol's effect is
% total extraction of her social existence.
% χ = 0.85 * π(powerless:1.5) * σ(local:0.8) = 1.02
constraint_indexing:constraint_classification(rotation_seven_isolation, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Nurse Chen sees the protocol as essential coordination for public health.
% From her institutional view, the extraction is a net negative value,
% meaning the system provides more benefit than it costs her role.
% χ = 0.85 * π(institutional:-0.2) * σ(regional:0.9) = -0.153
constraint_indexing:constraint_classification(rotation_seven_isolation, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(constrained),
            spatial_scope(regional))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (SNARE)
% The default analytical context reveals a coercive system. The high base
% extraction and suppression, amplified by global scope, classify it as a Snare.
% χ = 0.85 * π(analytical:1.15) * σ(global:1.2) = 1.173
constraint_indexing:constraint_classification(rotation_seven_isolation, snare,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(rotation_seven_isolation_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(rotation_seven_isolation, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(rotation_seven_isolation, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(snare_threshold_validation) :-
    % Verify the base metrics meet the Snare criteria.
    domain_priors:base_extractiveness(rotation_seven_isolation, E),
    domain_priors:suppression_score(rotation_seven_isolation, S),
    E >= 0.46,
    S >= 0.60.

:- end_tests(rotation_seven_isolation_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect a system of extreme, functional coercion. The base
 * extractiveness (0.85) represents the total removal of an individual from
 * society. The suppression score (0.70) reflects the active denial of
 * alternative care models. The perspectival gap is severe: the enforcer
 * (Nurse Chen) experiences it as a beneficial coordination Rope, while the
 * victim (Anna) and the analytical observer see it as a predatory Snare.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The high extraction (0.85) triggers mandatrophy analysis. The resolution
 * lies in the perspectival classification. The system is not a malfunctioning
 * Rope; it is a highly efficient Snare that functions as a Rope for the
 * institutional agent. Recognizing this duality—that a constraint can be
 * simultaneously Rope and Snare depending on the index—is the core insight
 * that resolves the mandatrophy. It correctly identifies the harm without
 * mislabeling the function perceived by the beneficiary.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_r7_isolation,
    "Is the suppression of alternative care a result of genuine resource impossibility (a Mountain aspect) or a constructed policy choice to maintain efficiency (a Snare aspect)?",
    "A full, independent audit of station resources and medical technology capabilities compared to peer systems.",
    "If a Mountain, the protocol is a tragic necessity. If a Snare, it is a deliberate act of institutional violence.",
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(rotation_seven_isolation, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data for high-extraction constraint (E > 0.46).
% Models a system that was always severe but intensified slightly over time.
%
% Theater ratio over time (remains low, indicating no drift to performance):
narrative_ontology:measurement(r7_iso_tr_t0, rotation_seven_isolation, theater_ratio, 0, 0.10).
narrative_ontology:measurement(r7_iso_tr_t5, rotation_seven_isolation, theater_ratio, 5, 0.10).
narrative_ontology:measurement(r7_iso_tr_t10, rotation_seven_isolation, theater_ratio, 10, 0.10).

% Extraction over time (shows slight intensification of the protocol):
narrative_ontology:measurement(r7_iso_ex_t0, rotation_seven_isolation, base_extractiveness, 0, 0.80).
narrative_ontology:measurement(r7_iso_ex_t5, rotation_seven_isolation, base_extractiveness, 5, 0.82).
narrative_ontology:measurement(r7_iso_ex_t10, rotation_seven_isolation, base_extractiveness, 10, 0.85).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The protocol is a coordination mechanism, enabling Boltzmann analysis.
narrative_ontology:coordination_type(rotation_seven_isolation, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: rotation_seven_kubo_ranking
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-22
% ============================================================================

:- module(constraint_rotation_seven_kubo_ranking, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: rotation_seven_kubo_ranking
 * human_readable: R7 Kubo Credit and Ranking System
 * domain: economic/social
 * * SUMMARY:
 * The Kubo system is a gamified labor-extraction mechanism on a generational starship. It presents a "ladder" of advancement to children, rewarding agricultural output with credits. While it appears as an unchangeable reality to the children (a False Mountain), it is an institutionally maintained system designed to extract maximum labor while suppressing awareness of the severe health costs (e.g., kidney failure from overwork).
 * * KEY AGENTS:
 * - Station Children (e.g., Rina, Anna): Subjects (Powerless)
 * - Supervisor Kwan: Beneficiary/Manager (Institutional)
 * - Station Command: Beneficiary (Institutional)
 * - Systems Auditor: Observer (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
% Extraction is high: essential agricultural labor and biological health are exchanged for non-essential credits.
domain_priors:base_extractiveness(rotation_seven_kubo_ranking, 0.75).
% Suppression is extreme: total enclosure, no memory of Earth, alternatives are non-existent in the conceptual field of the children.
domain_priors:suppression_score(rotation_seven_kubo_ranking, 0.90).
% Theater is low: the system is brutally functional, not performative.
domain_priors:theater_ratio(rotation_seven_kubo_ranking, 0.10).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(rotation_seven_kubo_ranking, extractiveness, 0.75).
narrative_ontology:constraint_metric(rotation_seven_kubo_ranking, suppression_requirement, 0.90).
narrative_ontology:constraint_metric(rotation_seven_kubo_ranking, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% It presents itself as an immutable law of their world to suppress dissent.
narrative_ontology:constraint_claim(rotation_seven_kubo_ranking, natural_law).

% Binary flags
% Enforced via wristbands, medical isolation, and supervisor authority.
domain_priors:requires_active_enforcement(rotation_seven_kubo_ranking).

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(rotation_seven_kubo_ranking, station_command).
narrative_ontology:constraint_victim(rotation_seven_kubo_ranking, station_children).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For the children, the system is a trap. Their health and well-being are
% extracted in a gamified system where the true costs are hidden.
constraint_indexing:constraint_classification(rotation_seven_kubo_ranking, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For Supervisor Kwan, the system is a functional tool (Rope) to manage
% labor, ensure agricultural output, and maintain order. He can adjust
% rankings, using the system to coordinate the workforce effectively.
constraint_indexing:constraint_classification(rotation_seven_kubo_ranking, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(constrained),
            spatial_scope(regional))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Analytically, the system is a Tangled Rope. It has a genuine coordination
% function (managing labor for station survival) but achieves this through
% extreme asymmetric extraction from a captive population. It requires active
% enforcement to maintain. This classification captures both the Rope-like
% function and the Snare-like harm.
constraint_indexing:constraint_classification(rotation_seven_kubo_ranking, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(rotation_seven_kubo_ranking_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(rotation_seven_kubo_ranking, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(rotation_seven_kubo_ranking, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(threshold_validation) :-
    % Verify this is correctly identified as a high-extraction constraint.
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(rotation_seven_kubo_ranking, ExtMetricName, E),
    E >= 0.46.

test(analytical_classification_is_tangled_rope) :-
    % Verify the analytical observer correctly identifies the hybrid nature.
    constraint_indexing:constraint_classification(rotation_seven_kubo_ranking, tangled_rope, context(agent_power(analytical), _, _, _)).

:- end_tests(rotation_seven_kubo_ranking_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base scores (E=0.75, S=0.90) reflect a system of totalizing exploitation.
 * The perspectival gap is stark: for the children, it's a 'Snare' they cannot escape.
 * For the managers, it's a 'Rope' for coordinating essential labor.
 * The analytical classification must be 'Tangled Rope'. A 'Mountain' is impossible
 * given the high extraction and active enforcement. A pure 'Snare' would miss the
 * genuine (if coercive) coordination function that benefits the station's command
 * structure. Tangled Rope correctly identifies this hybrid nature.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * This is a classic Mandatrophic constraint. The system avoids mislabeling it as
 * pure extraction (Snare) by using the Tangled Rope classification from an analytical
 * perspective. This acknowledges the system's functional coordination role for the
 * beneficiaries while fully accounting for the severe, asymmetric extraction
 * imposed on the victims. The constraint's claim to be 'natural_law' is the
 * ideological layer that enables this extraction.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_kubo_system_collapse,
    'What is the critical failure point of the Kubo system: psychological rebellion, biological collapse from overwork, or technological failure?',
    'Long-term monitoring of health data, social unrest metrics, and system-wide agricultural output within the R7 station.',
    'If rebellion: the Snare is cut by victims. If biological collapse: the Snare strangles the entire station. If technological failure: the Rope of control frays.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(rotation_seven_kubo_ranking, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data shows the system becoming more brutally efficient over time,
% shedding any pretense (theater) for pure extraction.
%
% Theater ratio over time (metric_substitution detection):
narrative_ontology:measurement(r7k_tr_t0, rotation_seven_kubo_ranking, theater_ratio, 0, 0.20).
narrative_ontology:measurement(r7k_tr_t5, rotation_seven_kubo_ranking, theater_ratio, 5, 0.15).
narrative_ontology:measurement(r7k_tr_t10, rotation_seven_kubo_ranking, theater_ratio, 10, 0.10).

% Extraction over time (extraction_accumulation detection):
narrative_ontology:measurement(r7k_ex_t0, rotation_seven_kubo_ranking, base_extractiveness, 0, 0.55).
narrative_ontology:measurement(r7k_ex_t5, rotation_seven_kubo_ranking, base_extractiveness, 5, 0.65).
narrative_ontology:measurement(r7k_ex_t10, rotation_seven_kubo_ranking, base_extractiveness, 10, 0.75).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The system allocates labor and rewards, making it a resource allocation mechanism.
narrative_ontology:coordination_type(rotation_seven_kubo_ranking, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: migration_decision_threshold
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Hagen-Zanker, "Why do people migrate? A review of the theoretical 
%         literature," Maastricht Graduate School of Governance (2008).
% ============================================================================

:- module(constraint_migration_decision, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: migration_decision_threshold
 * human_readable: The Migration Decision Threshold (Cost-Benefit Equilibrium)
 * domain: economic/social
 * temporal_scope: Modern Era (Post-Industrial Migration)
 * spatial_scope: Global (Trans-national corridors)
 * * SUMMARY:
 * This constraint represents the threshold at which the expected utility of 
 * migrating exceeds the costs and risks of remaining in the origin country 
 *. According to Neo-classical micro theory, migration 
 * is an individual investment in human capital where the actor must 
 * navigate the "wage differential" Mountain.
 * * KEY AGENTS:
 * - The Potential Migrant: Individual powerless; subject to global wage 
 * disparities and legal border regimes.
 * - The Household: Collective organized; in the New Economics of Labor 
 * Migration (NELM), they use migration as a "Rope" to diversify income and 
 * mitigate local market failures.
 * - The Receiving State: Institutional; enforces the legal Mountain of 
 * visa and entry requirements.
 * * NARRATIVE ARC:
 * To the individual, the wage gap is a Mountain—an unchangeable fact of 
 * the world. To the household, migration is a 
 * Rope—a functional coordination tool to overcome the "Snare" of local 
 * market failures in insurance and credit.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Structural Anchor for index extraction
narrative_ontology:interval(migration_theory_review, 0, 10).
narrative_ontology:constraint_claim(migration_decision_threshold, mountain).

% Base extractiveness score (0.0-1.0)
% Rationale: 0.3. Moderate; migration "extracts" labor from the origin 
% (brain drain) but provides remittances and human capital development.
domain_priors:base_extractiveness(migration_decision_threshold, 0.3).

% Suppression score (0.0-1.0)
% Rationale: 0.4. Moderate; local economic alternatives are often 
% suppressed by "market failures" (lack of credit/insurance) in the 
% origin country.
domain_priors:suppression_score(migration_decision_threshold, 0.4).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(migration_decision_threshold, extractiveness, 0.3).
narrative_ontology:constraint_metric(migration_decision_threshold, suppression_requirement, 0.4).

% Enforcement requirements
% Emerges naturally from global economic inequality and the structural 
% demand for labor in developed nations.
domain_priors:emerges_naturally(migration_decision_threshold).

% Metrics for Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(migration_decision_threshold, destination_labor_markets).
constraint_beneficiary(migration_decision_threshold, migrant_households_remittances).
constraint_victim(migration_decision_threshold, origin_country_local_services).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: INDIVIDUAL MIGRANT - Mountain
   --------------------------------------------------------------------------
   
   WHO: powerless - Must accept the wage gap and legal barriers 
         as they exist.
   WHEN: immediate - Focused on the immediate cost of travel and relocation.
   WHERE: trapped - Bound by the lack of local opportunity in the origin.
   SCOPE: local - A single life-path decision.
   
   WHY THIS CLASSIFICATION:
   For the individual, the global economic landscape is "nature." They 
   cannot "negotiate" with the wage differential between Mexico and the 
   US; they can only choose to climb the Mountain of migration.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    migration_decision_threshold,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :-
    domain_priors:emerges_naturally(migration_decision_threshold),
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE HOUSEHOLD (NELM) - Rope
   --------------------------------------------------------------------------
   
   WHO: collective_organized - Acting as a unit to manage risk.
   WHEN: biographical - Planning for long-term household stability.
   WHERE: mobile - Sending a member to a different market to diversify.
   SCOPE: regional - Connecting origin and destination regions.
   
   WHY THIS CLASSIFICATION:
   In the New Economics of Labor Migration, the decision is a Rope. It is 
   a functional coordination mechanism to circumvent the failure of 
   local capital markets. Migration is wove into the 
   household strategy as a tool for survival.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    migration_decision_threshold,
    rope,
    context(
        agent_power(collective_organized),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(regional)
    )
) :-
    domain_priors:base_extractiveness(migration_decision_threshold, E),
    E < 0.5,
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: WORLD SYSTEMS ANALYST - Snare
   --------------------------------------------------------------------------
   
   WHO: analytical - Observer of the macro-structural "core-periphery" 
         dynamic.
   WHEN: historical - Tracking global capital expansion over centuries.
   WHERE: analytical - Not bound by the individual desire to move.
   SCOPE: global - The entire world economy.
   
   WHY THIS CLASSIFICATION:
   For the World Systems theorist, the system is a Snare. Global 
   capitalist expansion "chokes" traditional local economies, 
   creating a "disrupted" population that has no choice but to 
   migrate to the core as cheap labor.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    migration_decision_threshold,
    snare,
    context(
        agent_power(analytical),
        time_horizon(historical),
        exit_options(analytical),
        spatial_scope(global)
    )
) :-
    domain_priors:suppression_score(migration_decision_threshold, S),
    S > 0.3,
    !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(migration_decision_tests).

test(multi_perspective_conflict) :-
    % Individual (Mountain) vs Household (Rope) vs Theorist (Snare)
    constraint_indexing:constraint_classification(migration_decision_threshold, T1, context(powerless, immediate, trapped, local)),
    constraint_indexing:constraint_classification(migration_decision_threshold, T2, context(collective_organized, biographical, mobile, regional)),
    constraint_indexing:constraint_classification(migration_decision_threshold, T3, context(analytical, historical, analytical, global)),
    T1 \= T2, T2 \= T3.

test(local_market_failure_impact) :-
    % Extraction/Suppression logic: High suppression of local alternatives 
    % signals a move toward Snare/Mountain.
    domain_priors:suppression_score(migration_decision_threshold, S),
    S >= 0.4.

:- end_tests(migration_decision_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * * KEY DECISIONS:
 * 1. CLASSIFICATION: I chose 'Mountain' as the primary claim for the 
 * individual because the document highlights the "wage gap" as a primary 
 * driver in neo-classical theories.
 * 2. PERSPECTIVE: The NELM perspective is critical here—it transforms 
 * migration from an "escape" to a "coordination" tool (Rope) for the 
 * household.
 * 3. SUPPRESSION (0.4): Reflects the paper's point that local market 
 * failures (insurance/credit) suppress the ability to survive without 
 * migrating.
 */

omega_variable(
    market_failure_reversal,
    "Would the fix of local credit markets (Snare removal) transform 
     migration back into a voluntary choice (Rope)?",
    resolution_mechanism("Evaluation of migration rates in regions with 
    newly introduced micro-credit and insurance programs"),
    impact("If rates drop: The threshold was a Snare. If rates stay high: 
            It is a fundamental wage-gap Mountain."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Internal Consumption Smoothing
 * Viability: Diversifying crops or local jobs to manage risk at home.
 * Suppression: Suppressed by systemic lack of local infrastructure and 
 * credit access.
 * * ALTERNATIVE 2: Social Security/State Safety Nets
 * Viability: Government-provided insurance to replace the need for 
 * remittances.
 * * CONCLUSION:
 * The absence of these alternatives in developing nations turns the 
 * Migration Threshold into an unavoidable Mountain for the subject.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% 1. Load: ?- [migration_decision_threshold].
% 2. Analysis: ?- multi_index_report(migration_decision_threshold).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */


% --- v3.1 Indexical Relativity Stubs (Fleet Repair) ---
constraint_indexing:constraint_classification(rotmigration_decision_threshold, mountain, agent_power(analytical)).
constraint_indexing:constraint_classification(rotmigration_decision_threshold, rope, agent_power(institutional)).
constraint_indexing:constraint_classification(rotmigration_decision_threshold, snare, agent_power(powerless)).
% ============================================================================
% CONSTRAINT STORY: royal_navy_middle_east_withdrawal
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-29
% ============================================================================

:- module(constraint_royal_navy_middle_east_withdrawal, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: royal_navy_middle_east_withdrawal
 * human_readable: End of Permanent Royal Navy Presence in the Gulf
 * domain: political/security
 * * SUMMARY:
 * The Royal Navy is withdrawing its last remaining ship from the Middle East,
 * ending a permanent fighting presence in the Gulf for the first time since 1980.
 * This strategic shift is driven by a significant defense funding gap and a
 * shrinking fleet, forcing a reprioritization of naval assets to the North
 * Atlantic to counter Russian activity.
 * * KEY AGENTS:
 * - Commercial Shipping/Regional Partners: Subjects (Powerless) who lose a key
 *   security guarantee against regional threats.
 * - UK Ministry of Defence: Beneficiary (Institutional) who must reallocate
 *   scarce resources to meet perceived higher-priority threats closer to home.
 * - Defence Analysts: Observers (Analytical) who view the withdrawal as the
 *   inevitable consequence of long-term underinvestment.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(royal_navy_middle_east_withdrawal, 0.80). % High extraction: security is removed from regional actors to serve national budget priorities.
domain_priors:suppression_score(royal_navy_middle_east_withdrawal, 0.50).   % Moderate suppression: viable alternatives (e.g., drone warships) are years away.
domain_priors:theater_ratio(royal_navy_middle_east_withdrawal, 0.20).       % Low theater: this is a functional, not performative, withdrawal.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(royal_navy_middle_east_withdrawal, extractiveness, 0.80).
narrative_ontology:constraint_metric(royal_navy_middle_east_withdrawal, suppression_requirement, 0.50).
narrative_ontology:constraint_metric(royal_navy_middle_east_withdrawal, theater_ratio, 0.20).

% Constraint self-claim (what does the constraint claim to be?)
% The government frames this as a deliberate, strategic reallocation.
narrative_ontology:constraint_claim(royal_navy_middle_east_withdrawal, constructed).

% Binary flags
domain_priors:requires_active_enforcement(royal_navy_middle_east_withdrawal). % The withdrawal is an active policy choice.

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(royal_navy_middle_east_withdrawal, hm_treasury).
narrative_ontology:constraint_victim(royal_navy_middle_east_withdrawal, global_shipping_routes).
narrative_ontology:constraint_victim(royal_navy_middle_east_withdrawal, regional_allies_bahrain_uae).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% A merchant captain in the Gulf loses a security guarantee they rely on.
constraint_indexing:constraint_classification(royal_navy_middle_east_withdrawal, snare,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(regional))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The First Sea Lord reallocating a "stretched" fleet to the North Atlantic.
constraint_indexing:constraint_classification(royal_navy_middle_east_withdrawal, rope,
    context(agent_power(institutional),
            time_horizon(biographical),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (MOUNTAIN)
% A defense analyst viewing the withdrawal as the inevitable result of a decade of fleet decline.
constraint_indexing:constraint_classification(royal_navy_middle_east_withdrawal, mountain,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(royal_navy_middle_east_withdrawal_tests).

test(perspectival_gap_is_resolved) :-
    % Verify the gap between powerless (Snare), institutional (Rope), and analytical (Mountain).
    constraint_indexing:constraint_classification(royal_navy_middle_east_withdrawal, snare,
        context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(royal_navy_middle_east_withdrawal, rope,
        context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(royal_navy_middle_east_withdrawal, mountain,
        context(agent_power(analytical), _, _, _)).

test(high_extraction_is_validated) :-
    % The base extraction must be high to justify the Snare/Mountain classifications.
    domain_priors:base_extractiveness(royal_navy_middle_east_withdrawal, E),
    E >= 0.46.

:- end_tests(royal_navy_middle_east_withdrawal_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect a classic perspectival conflict arising from resource scarcity.
 * For regional actors (powerless), the withdrawal is a Snare, removing security
 * without their consent. For the Royal Navy command (institutional), it's a Rope,
 * a painful but necessary coordination of scarce assets. The high extraction (0.80)
 * represents the total loss of a security function for one group to solve a
 * budgetary/strategic problem for another.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The conflict between the Snare and Rope perspectives is resolved by the
 * Analytical view, which classifies the constraint as a Mountain. The high
 * extraction is not merely a malicious or self-serving policy choice that could
 * be reversed; it is the inevitable, physically determined outcome of a fleet
 * that has shrunk below the critical size required for a global presence. The
 * "choice" to withdraw is illusory; the decision was made by years of budget
 * cuts. This identifies the constraint as a structural mandate rather than a
 * simple policy lever, resolving the mandatrophy.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_rn_withdrawal_1,
    'Will autonomous "drone warships" successfully replace manned frigates in Gulf patrol roles?',
    'Monitor the deployment and operational effectiveness of drone-led Operation Kipion rotations in the late 2020s.',
    'If successful, the Snare (lack of protection) could transition to a Rope (coordinated drone security). If not, the security vacuum becomes permanent.',
    confidence_without_resolution(low)
).

omega_variable(
    omega_rn_withdrawal_2,
    'Will the U.S. Fifth Fleet reduce the UK\'s "Deputy Commander" status as Britain\'s physical presence reaches zero?',
    'Observe the next deputy commander appointment in Bahrain and any changes in joint operational command structures.',
    'High impact on UK diplomatic influence and its perceived status as a global military power.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% The interval represents the final decade of decline (e.g., 2016-2026).
narrative_ontology:interval(royal_navy_middle_east_withdrawal, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This constraint intensified over time as the fleet shrank, increasing the
% "extraction" of security from the region.

% Theater ratio over time (remains low as this is a functional, not performative, decline):
narrative_ontology:measurement(rn_withdrawal_tr_t0, royal_navy_middle_east_withdrawal, theater_ratio, 0, 0.10).
narrative_ontology:measurement(rn_withdrawal_tr_t5, royal_navy_middle_east_withdrawal, theater_ratio, 5, 0.15).
narrative_ontology:measurement(rn_withdrawal_tr_t10, royal_navy_middle_east_withdrawal, theater_ratio, 10, 0.20).

% Extraction over time (increases as naval presence is withdrawn):
narrative_ontology:measurement(rn_withdrawal_ex_t0, royal_navy_middle_east_withdrawal, base_extractiveness, 0, 0.20).
narrative_ontology:measurement(rn_withdrawal_ex_t5, royal_navy_middle_east_withdrawal, base_extractiveness, 5, 0.55).
narrative_ontology:measurement(rn_withdrawal_ex_t10, royal_navy_middle_east_withdrawal, base_extractiveness, 10, 0.80).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% This constraint represents the *removal* of a security coordination function,
% so it does not have a coordination_type itself.

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: rules_based_international_order
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_rules_based_international_order, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: rules_based_international_order
 * human_readable: The Rules-Based International Order
 * domain: political/economic
 * * SUMMARY:
 * The international system of institutions (WTO, UN, NATO) and norms that 
 * historically provided predictability and coordination. In the modern era, 
 * this system is increasingly used by great powers as an instrument of 
 * coercion and subordination against middle powers, transforming what was 
 * claimed to be a public good into a mechanism for asymmetric extraction.
 * * KEY AGENTS:
 * - Middle Powers: Subject (Powerless/Moderate)
 * - Great Powers: Beneficiary (Institutional)
 * - Systems Theorist: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(rules_based_international_order, 0.75). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(rules_based_international_order, 0.60).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(rules_based_international_order, 0.15).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(rules_based_international_order, extractiveness, 0.75).
narrative_ontology:constraint_metric(rules_based_international_order, suppression_requirement, 0.60).
narrative_ontology:constraint_metric(rules_based_international_order, theater_ratio, 0.15).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(rules_based_international_order, coordination).

% Binary flags
domain_priors:requires_active_enforcement(rules_based_international_order). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(rules_based_international_order, great_powers).
narrative_ontology:constraint_victim(rules_based_international_order, middle_powers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For a middle power, the order is a trap. Integration becomes a source of
% subordination, where supply chains and tariffs are used as weapons.
% χ = 0.75 (ε) * 1.0 (π(moderate)) * 1.2 (σ(global)) = 0.9. This is a clear Snare.
constraint_indexing:constraint_classification(rules_based_international_order, snare,
    context(agent_power(moderate),
            time_horizon(biographical),
            exit_options(constrained),
            spatial_scope(global))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For a great power, the rules are a functional coordination mechanism to be
% used or discarded strategically. The extractive cost is externalized.
% χ = 0.75 (ε) * -0.2 (π(institutional)) * 1.2 (σ(global)) = -0.18. This is a Rope.
constraint_indexing:constraint_classification(rules_based_international_order, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees both the genuine coordination function (beneficiary exists)
% and the asymmetric extraction (victim exists), maintained by active enforcement.
% This is the canonical definition of a Tangled Rope.
constraint_indexing:constraint_classification(rules_based_international_order, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

% PERSPECTIVE 4: THE PASSIVE PARTICIPANT (SNARE)
% A powerless state or entity participating in the "ritual" of compliance to
% avoid trouble experiences the system as an inescapable, coercive trap.
% χ = 0.75 (ε) * 1.5 (π(powerless)) * 1.0 (σ(national)) = 1.125. A very strong Snare.
constraint_indexing:constraint_classification(rules_based_international_order, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(rules_based_international_order_tests).

test(perspectival_gap_beneficiary_vs_victim) :-
    % Verify the gap between the beneficiary (Great Power) and victim (Middle Power).
    constraint_indexing:constraint_classification(rules_based_international_order, TypeVictim, context(agent_power(moderate), _, _, _)),
    constraint_indexing:constraint_classification(rules_based_international_order, TypeBeneficiary, context(agent_power(institutional), _, _, _)),
    assertion(TypeVictim == snare),
    assertion(TypeBeneficiary == rope),
    TypeVictim \= TypeBeneficiary.

test(analytical_observer_sees_tangled_rope) :-
    % Verify the analytical observer correctly identifies the hybrid nature.
    constraint_indexing:constraint_classification(rules_based_international_order, TypeAnalytical, context(agent_power(analytical), _, _, _)),
    assertion(TypeAnalytical == tangled_rope).

test(tangled_rope_structural_requirements_met) :-
    % A Tangled Rope requires beneficiaries, victims, and active enforcement.
    narrative_ontology:constraint_beneficiary(rules_based_international_order, _),
    narrative_ontology:constraint_victim(rules_based_international_order, _),
    domain_priors:requires_active_enforcement(rules_based_international_order).

:- end_tests(rules_based_international_order_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness (0.75) and suppression (0.60) are high, reflecting
 * the modern use of the international system for coercion (e.g., weaponized
 * tariffs, supply chain control). The theater ratio is low (0.15) because the
 * system is still highly functional, not merely performative.
 *
 * The Perspectival Gap is stark:
 * - For Great Powers (institutional), the system is a 'Rope'. They created it,
 *   can opt out (arbitrage), and externalize the costs. Effective extraction is negative.
 * - For Middle Powers (moderate/powerless), the system is a 'Snare'. They are
 *   trapped by integration, making them vulnerable to coercion. Effective
 *   extraction is amplified to extreme levels.
 * - The Analytical observer, seeing both the coordination and the extraction,
 *   classifies it as a 'Tangled Rope', the correct structural designation.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The high extraction is resolved by the Tangled Rope classification. The system
 * avoids mislabeling the constraint as a pure Snare by acknowledging its
 * genuine (though asymmetric) coordination function, which is precisely what
 * the 'Rope' perspective of the beneficiary captures.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_rbio_intent,
    "Is the high extraction (0.75) an emergent property of great power competition, or a deliberate, designed feature to maintain hegemony?",
    "Declassification of diplomatic cables from the 1945-1960 period showing design intent vs. analysis of modern-day policy papers showing reactive coercion.",
    "If emergent: Tangled Rope (unintended consequence). If designed: Snare (predatory intent from inception).",
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(rules_based_international_order, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data models the system's degradation from a more coordinative
% mechanism into a highly extractive one. This triggers extraction_accumulation
% drift detection.
%
% Theater ratio over time (stable and low):
narrative_ontology:measurement(rbio_tr_t0, rules_based_international_order, theater_ratio, 0, 0.10).
narrative_ontology:measurement(rbio_tr_t5, rules_based_international_order, theater_ratio, 5, 0.12).
narrative_ontology:measurement(rbio_tr_t10, rules_based_international_order, theater_ratio, 10, 0.15).

% Extraction over time (significant increase):
narrative_ontology:measurement(rbio_ex_t0, rules_based_international_order, base_extractiveness, 0, 0.40).
narrative_ontology:measurement(rbio_ex_t5, rules_based_international_order, base_extractiveness, 5, 0.65).
narrative_ontology:measurement(rbio_ex_t10, rules_based_international_order, base_extractiveness, 10, 0.75).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% This system is a form of global infrastructure for diplomacy and trade.
narrative_ontology:coordination_type(rules_based_international_order, global_infrastructure).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: russells_paradox_self_reference
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_russells_paradox_self_reference, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: russells_paradox_self_reference
 * human_readable: Russell's Paradox (Naive Set Theory Collapse)
 * domain: mathematical/logical
 * * SUMMARY:
 * Russell's Paradox arises from considering the set of all sets that do not contain themselves.
 * The paradox is that such a set must contain itself if and only if it does not, a logical contradiction.
 * This discovery invalidated the intuitive foundations of naive set theory (specifically Frege's Basic Law V) and forced the development of more rigorous axiomatic systems like ZFC and Type Theory to avoid such self-references.
 * * KEY AGENTS:
 * - The Naive Set Theorist (e.g., Gottlob Frege): Subject (Powerless/Moderate) whose foundational work is invalidated.
 * - The Axiomatic Architect (e.g., Zermelo, Russell): Beneficiary (Institutional) who uses the paradox to coordinate the development of new, consistent foundations.
 * - The Analytical Logician: Auditor (Analytical) observing the structural properties of formal systems.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
% Rationale: 0.7. The paradox is highly extractive. It "takes" the consistency of any naive system, forcing a massive reinvestment in complex, less intuitive axioms to regain logical "solvency." The cost of avoiding the paradox is the loss of simplicity.
domain_priors:base_extractiveness(russells_paradox_self_reference, 0.7).
% Rationale: 0.4. It suppresses "unrestricted comprehension," the idea that any property can define a set. This intuitive approach is rendered unusable in formal logic.
domain_priors:suppression_score(russells_paradox_self_reference, 0.4).
% Rationale: 0.0. The paradox is a pure, functional, logical constraint with no performative or theatrical component.
domain_priors:theater_ratio(russells_paradox_self_reference, 0.0).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(russells_paradox_self_reference, extractiveness, 0.7).
narrative_ontology:constraint_metric(russells_paradox_self_reference, suppression_requirement, 0.4).
narrative_ontology:constraint_metric(russells_paradox_self_reference, theater_ratio, 0.0).

% Constraint self-claim (what does the constraint claim to be?)
% The paradox doesn't "claim" anything, but its discovery reveals a fundamental, unchangeable feature of logic.
narrative_ontology:constraint_claim(russells_paradox_self_reference, natural_law).

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(russells_paradox_self_reference, axiomatic_set_theorists).
narrative_ontology:constraint_victim(russells_paradox_self_reference, naive_set_theory_proponents).
narrative_ontology:constraint_victim(russells_paradox_self_reference, gottlob_frege).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The naive set theorist (like Frege) whose system is destroyed by the paradox.
% χ = 0.7 (ε) * 1.5 (powerless) * 1.2 (global) = 1.26. This is a definitive Snare.
constraint_indexing:constraint_classification(russells_paradox_self_reference, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(global))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The axiomatic architect who uses the paradox to justify and coordinate the adoption of new, more robust foundations for mathematics.
% χ = 0.7 (ε) * -0.2 (institutional) * 1.2 (global) = -0.168. This is a pure coordination tool with negative perceived extraction.
constraint_indexing:constraint_classification(russells_paradox_self_reference, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (SNARE)
% The default analytical context. The analysis reveals a high-extraction constraint that traps naive systems, classifying it as a Snare.
% χ = 0.7 (ε) * 1.15 (analytical) * 1.2 (global) = 0.966.
constraint_indexing:constraint_classification(russells_paradox_self_reference, snare,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(russells_paradox_self_reference_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between the powerless victim and the institutional beneficiary.
    constraint_indexing:constraint_classification(russells_paradox_self_reference, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(russells_paradox_self_reference, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    assertion(TypePowerless == snare),
    assertion(TypeInstitutional == rope),
    TypePowerless \= TypeInstitutional.

test(threshold_validation) :-
    % Verify the base extractiveness is high enough to trigger Snare/Tangled Rope classifications.
    narrative_ontology:constraint_metric(russells_paradox_self_reference, extractiveness, E),
    assertion(E >= 0.46).

:- end_tests(russells_paradox_self_reference_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The original file incorrectly classified the paradox as a Mountain from the powerless perspective.
 * A Mountain must have base extraction <= 0.15. With an extraction of 0.7, the paradox is fundamentally extractive—it destroys the value (consistency) of naive systems.
 * Therefore, for any agent trapped by it (like Frege or a naive set), it functions as a Snare.
 * The perspectival gap is stark: for those whose work is invalidated, it's a destructive trap (Snare). For those building the next generation of logic, it's an essential coordination point that justifies their work and rallies the community (Rope).
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * This constraint demonstrates how a single phenomenon can be both a Snare and a Rope.
 * Mandatrophy would occur if the system only saw the Snare aspect (the destruction of Frege's system) and missed the massive coordination benefit (the creation of ZFC).
 * By indexing the classification, the system correctly identifies that for the beneficiaries (the community of mathematicians), the paradox functions as a Rope, coordinating the move to safer foundations. This prevents the system from mislabeling a foundational discovery as purely destructive.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_russells_paradox_self_reference,
    "Is there a unique 'True' universe of sets (a Mountain), or is mathematics a pluralism of consistent but arbitrary axiomatic systems (a collection of Scaffolds)?",
    "Further investigation into whether large cardinal axioms eventually settle undecidable statements like the Continuum Hypothesis.",
    "If a true Mountain exists, logic is discovered. If only Scaffolds exist, logic is invented and coordinated.",
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(russells_paradox_self_reference, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data for a timeless logical paradox is static. The paradox's properties do not change.
% This is required because base_extractiveness > 0.46.

% Theater ratio over time (is always zero):
narrative_ontology:measurement(russells_paradox_self_reference_tr_t0, russells_paradox_self_reference, theater_ratio, 0, 0.0).
narrative_ontology:measurement(russells_paradox_self_reference_tr_t5, russells_paradox_self_reference, theater_ratio, 5, 0.0).
narrative_ontology:measurement(russells_paradox_self_reference_tr_t10, russells_paradox_self_reference, theater_ratio, 10, 0.0).

% Extraction over time (is always constant):
narrative_ontology:measurement(russells_paradox_self_reference_ex_t0, russells_paradox_self_reference, base_extractiveness, 0, 0.7).
narrative_ontology:measurement(russells_paradox_self_reference_ex_t5, russells_paradox_self_reference, base_extractiveness, 5, 0.7).
narrative_ontology:measurement(russells_paradox_self_reference_ex_t10, russells_paradox_self_reference, base_extractiveness, 10, 0.7).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The paradox functions as a coordination tool by enforcing a standard of consistency.
narrative_ontology:coordination_type(russells_paradox_self_reference, enforcement_mechanism).

% Network relationships: Russell's Paradox is part of the "foundational crisis" in early 20th-century mathematics, which is structurally linked to Gödel's later work.
narrative_ontology:affects_constraint(russells_paradox_self_reference, goedels_incompleteness).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: russian_war_cannibalization
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-29
% ============================================================================

:- module(constraint_russian_war_cannibalization, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: russian_war_cannibalization
 * human_readable: Russian Military Cannibalization of Civilian Infrastructure
 * domain: political/economic
 * * SUMMARY:
 * This constraint models the "Invisible Mandatrophy" in Russia, where the state's
 * mandate to prosecute the war in Ukraine forces a massive reallocation of
 * resources from the civilian economy to the military-industrial complex. This
 * "Military Keynesianism" provides a veneer of prosperity (e.g., high wages for
 * soldiers) while systematically extracting the maintenance and investment
 * margin from public utilities and civil aviation. The result is a
 * "Cannibalization Economy" where parts are stripped from aircraft and
 * infrastructure funds are diverted, creating a Snare that becomes visible
 * during physical failure events like heating grid collapses or aviation incidents.
 * * KEY AGENTS:
 * - The Kremlin/Siloviki: Beneficiary (Institutional) - Prioritizes the war mandate over civilian welfare.
 * - Regional Residents: Victim (Powerless) - Face collapsing infrastructure (e.g., heating failures in winter).
 * - Analytical Observer: Auditor (Analytical) - Observes the structural decay beneath the war economy's surface.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
% Rationale: High extraction (0.80); the 2025 budget redirects ~40% of all
% federal spending to defense and security, cannibalizing funds for housing,
% communal services, and human capital.
domain_priors:base_extractiveness(russian_war_cannibalization, 0.80).
% Rationale: High suppression (0.75); any effort to redirect funds back to
% civilian priorities is suppressed by the "existential war" narrative and
% active censorship.
domain_priors:suppression_score(russian_war_cannibalization, 0.75).
% Rationale: Low theater (0.15); the extraction is highly functional and
% direct, not performative. The system is efficiently reallocating resources,
% albeit with destructive long-term consequences.
domain_priors:theater_ratio(russian_war_cannibalization, 0.15).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(russian_war_cannibalization, extractiveness, 0.80).
narrative_ontology:constraint_metric(russian_war_cannibalization, suppression_requirement, 0.75).
narrative_ontology:constraint_metric(russian_war_cannibalization, theater_ratio, 0.15).

% Constraint self-claim (what does the constraint claim to be?)
% The state frames this as a necessary coordination effort for national survival.
narrative_ontology:constraint_claim(russian_war_cannibalization, coordination).

% Binary flags
% Requires active enforcement via anti-protest laws, state media control,
% and military censorship to suppress dissent over failing infrastructure.
domain_priors:requires_active_enforcement(russian_war_cannibalization).

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(russian_war_cannibalization, military_industrial_complex).
narrative_ontology:constraint_beneficiary(russian_war_cannibalization, front_line_contractors).
narrative_ontology:constraint_victim(russian_war_cannibalization, civilian_infrastructure_users).
narrative_ontology:constraint_victim(russian_war_cannibalization, domestic_aviation_passengers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE REGIONAL RESIDENT (SNARE)
% For a citizen in a provincial city, the policy is a Snare. The "stimulus"
% of the war has choked the basic survival infrastructure of their hometown,
% leaving them trapped with failing utilities during harsh winters.
constraint_indexing:constraint_classification(russian_war_cannibalization, snare,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE KREMLIN (ROPE)
% The state views the "War Economy" as a Rope—a functional coordination
% mechanism that stimulates economic activity and unifies the population.
% They treat the extraction of civilian margins as a manageable trade-off.
constraint_indexing:constraint_classification(russian_war_cannibalization, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% An analyst sees both the coordination function (resource mobilization for
% the war effort) and the severe, asymmetric extraction from the civilian
% sphere. It requires active enforcement to maintain, fitting the Tangled Rope profile.
constraint_indexing:constraint_classification(russian_war_cannibalization, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(russian_war_cannibalization_tests).

test(perspectival_gap_is_rope_vs_snare) :-
    constraint_indexing:constraint_classification(russian_war_cannibalization, rope,
        context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(russian_war_cannibalization, snare,
        context(agent_power(powerless), _, _, _)).

test(analytical_view_is_tangled_rope) :-
    constraint_indexing:constraint_classification(russian_war_cannibalization, tangled_rope,
        context(agent_power(analytical), _, _, _)).

test(high_extraction_and_suppression_are_set) :-
    narrative_ontology:constraint_metric(russian_war_cannibalization, extractiveness, E),
    narrative_ontology:constraint_metric(russian_war_cannibalization, suppression_requirement, S),
    E >= 0.80,
    S >= 0.75.

:- end_tests(russian_war_cannibalization_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect a system undergoing "mandatrophy"—where a central mandate
 * (the war) consumes the margins necessary for the system's own long-term survival.
 * The base extractiveness (0.80) and suppression (0.75) are high, reflecting the
 * non-negotiable diversion of national resources.
 *
 * The Perspectival Gap is stark:
 * - The Kremlin (Institutional) sees a successful Rope, coordinating the nation for victory.
 * - The Citizen (Powerless) experiences a Snare, as their immediate safety and
 *   quality of life are sacrificed.
 * - The Analyst sees a Tangled Rope, acknowledging the coordination function but
 *   recognizing it is inseparable from coercive, asymmetric extraction that
 *   requires active state enforcement to sustain. This classification prevents
 *   the system from mislabeling the functional coordination as either pure
 *   extraction (Snare) or benign coordination (Rope), capturing the hybrid nature.
 * [RESOLVED MANDATROPHY]: The high extraction is identified as a structural
 * mandate, not a simple policy choice, resolving the ambiguity.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_rwc_threshold,
    'At what point does the cannibalization of civilian systems (aviation, utilities) trigger a cascading failure that threatens regime stability, transforming the perceived Rope into a systemic Snare even for the elite?',
    'Monitoring the rate of major infrastructure failures and aviation incidents against internal polling data on public discontent.',
    'If failures plateau, the Tangled Rope holds. If they accelerate and correlate with unrest, the constraint is approaching a terminal state.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(russian_war_cannibalization, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This constraint intensified significantly after 2022. The data models the
% sharp increase in extraction as the "special military operation" transitioned
% into a full-scale war economy, while theater remained low and functional.
%
% Theater ratio over time (stable and low):
narrative_ontology:measurement(rwc_tr_t0, russian_war_cannibalization, theater_ratio, 0, 0.10).
narrative_ontology:measurement(rwc_tr_t5, russian_war_cannibalization, theater_ratio, 5, 0.12).
narrative_ontology:measurement(rwc_tr_t10, russian_war_cannibalization, theater_ratio, 10, 0.15).

% Extraction over time (sharp increase):
narrative_ontology:measurement(rwc_ex_t0, russian_war_cannibalization, base_extractiveness, 0, 0.35).
narrative_ontology:measurement(rwc_ex_t5, russian_war_cannibalization, base_extractiveness, 5, 0.65).
narrative_ontology:measurement(rwc_ex_t10, russian_war_cannibalization, base_extractiveness, 10, 0.80).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The constraint is a form of top-down resource allocation, a key coordination type.
narrative_ontology:coordination_type(russian_war_cannibalization, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */