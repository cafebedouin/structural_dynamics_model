% ============================================================================
% CONSTRAINT STORY: airbnb_str_regulation
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-16
% ============================================================================

:- module(constraint_airbnb_str_regulation, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: airbnb_str_regulation
 * human_readable: Short-Term Rental (STR) Regulatory Framework
 * domain: economic/political
 * * SUMMARY:
 * A global patchwork of municipal laws, zoning restrictions, and tax requirements that govern home-sharing. These regulations range from simple registration to "One Host, One Home" policies and outright bans, aiming to balance the "sharing economy" with housing affordability and neighborhood character. The framework acts as a filter determining who can legally participate in the market, creating winners and losers.
 * * KEY AGENTS:
 * - Individual Casual Hosts: Subject (Powerless)
 * - Local Municipalities & Hotel Incumbents: Beneficiary (Institutional)
 * - Systems Auditor: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(airbnb_str_regulation, 0.60). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(airbnb_str_regulation, 0.80).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(airbnb_str_regulation, 0.15).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(airbnb_str_regulation, extractiveness, 0.60).
narrative_ontology:constraint_metric(airbnb_str_regulation, suppression_requirement, 0.80).
narrative_ontology:constraint_metric(airbnb_str_regulation, theater_ratio, 0.15).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(airbnb_str_regulation, coordination).

% Binary flags
domain_priors:requires_active_enforcement(airbnb_str_regulation). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(airbnb_str_regulation, local_government_treasuries).
narrative_ontology:constraint_beneficiary(airbnb_str_regulation, hotel_industry).
narrative_ontology:constraint_victim(airbnb_str_regulation, individual_casual_hosts).
narrative_ontology:constraint_victim(airbnb_str_regulation, professional_hosts).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For a casual host, the regulations are a trap. The high suppression (permit complexity,
% night caps) and extraction (fees, lost income) make participation costly and risky.
% χ = 0.60 * 1.5 (powerless) * 0.8 (local) = 0.72. This is high effective extraction.
constraint_indexing:constraint_classification(airbnb_str_regulation, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For a city council or hotel lobby, the framework is a necessary coordination tool (Rope)
% to manage housing stock, collect taxes, and ensure fair competition.
% χ = 0.60 * -0.2 (institutional) * 1.0 (national) = -0.12. The extraction is not felt.
constraint_indexing:constraint_classification(airbnb_str_regulation, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analytical view reveals a Tangled Rope. It has a genuine coordination function
% (beneficiaries exist) but also imposes high, asymmetric extraction on a specific group
% (victims exist) and requires active enforcement. This captures the dual nature of the policy.
constraint_indexing:constraint_classification(airbnb_str_regulation, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(airbnb_str_regulation_tests).

test(perspectival_gap) :-
    % Verify the gap between the host (powerless) and regulator (institutional).
    constraint_indexing:constraint_classification(airbnb_str_regulation, snare, context(agent_power(powerless), _, _, spatial_scope(local))),
    constraint_indexing:constraint_classification(airbnb_str_regulation, rope, context(agent_power(institutional), _, _, spatial_scope(national))).

test(analytical_classification_is_tangled_rope) :-
    % Verify the analytical observer correctly identifies the hybrid nature.
    constraint_indexing:constraint_classification(airbnb_str_regulation, tangled_rope, context(agent_power(analytical), _, _, _)).

test(threshold_validation_high_extraction) :-
    narrative_ontology:constraint_metric(airbnb_str_regulation, extractiveness, E),
    E >= 0.46.

:- end_tests(airbnb_str_regulation_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This constraint story models the regulatory environment for short-term rentals (STRs)
 * as a classic example of a Tangled Rope.
 * - Base Extractiveness (0.60): Represents significant value transfer via taxes, fees,
 *   and lost revenue for hosts, which benefits municipal budgets and incumbent hotels.
 * - Suppression (0.80): High due to complex registration, caps on rental nights, and
 *   zoning restrictions that actively limit participation.
 * - Perspectival Gap: The core conflict is captured by the perspectival gap. To a casual
 *   host with limited power and exit options, the rules are a Snare. To the institutional
 *   regulator, they are a Rope for managing urban space.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The Tangled Rope classification for the analytical observer is critical. It prevents
 * the system from collapsing the constraint into either the regulator's 'pure coordination'
 * (Rope) narrative or the host's 'pure extraction' (Snare) experience. It correctly
 * identifies the dual nature of the system: it provides a genuine coordination function
 * (managing housing stock) while simultaneously creating asymmetric extraction that
 * benefits incumbents, requiring active state enforcement to maintain.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_airbnb_str_regulation,
    'Do STR restrictions actually lower long-term rents, or do they simply reallocate traveler revenue to hotels?',
    'Post-regulation rent tracking in synthetic control cities (e.g., NYC post-2023).',
    'If it lowers rents, the Rope aspect is stronger. If it only benefits hotels, the Snare aspect is stronger.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(airbnb_str_regulation, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection. This models a gradual increase in
% regulatory complexity and capture over the interval.
% Required for high-extraction constraints (base_extractiveness > 0.46).

% Theater ratio over time (slight increase as bureaucracy solidifies):
narrative_ontology:measurement(airbnb_str_regulation_tr_t0, airbnb_str_regulation, theater_ratio, 0, 0.10).
narrative_ontology:measurement(airbnb_str_regulation_tr_t5, airbnb_str_regulation, theater_ratio, 5, 0.12).
narrative_ontology:measurement(airbnb_str_regulation_tr_t10, airbnb_str_regulation, theater_ratio, 10, 0.15).

% Extraction over time (increases as more fees and restrictions are added):
narrative_ontology:measurement(airbnb_str_regulation_ex_t0, airbnb_str_regulation, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(airbnb_str_regulation_ex_t5, airbnb_str_regulation, base_extractiveness, 5, 0.55).
narrative_ontology:measurement(airbnb_str_regulation_ex_t10, airbnb_str_regulation, base_extractiveness, 10, 0.60).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% Valid types: information_standard, resource_allocation,
%              enforcement_mechanism, global_infrastructure
narrative_ontology:coordination_type(airbnb_str_regulation, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: visa_ipo_regulatory_compliance
% ============================================================================
% Generated: 2026-01-17
% Model: Gemini 2.0 Flash
% Source: Visa Inc. Amendment No. 6 to Form S-1 
% ============================================================================

:- module(visa_ipo_regulatory_compliance, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: visa_ipo_regulatory_compliance
 * human_readable: SEC S-1 Registration Framework
 * domain: economic/political
 * temporal_scope: March 2008 
 * spatial_scope: United States / Global Financial Markets 
 * * SUMMARY:
 * The mandatory legal framework governing the public offering of securities in 
 * the US, specifically the filing of Form S-1 under the Securities Act of 1933.
 * This system requires exhaustive disclosure of financial, legal, and operational 
 * data to the SEC before a company can access public capital markets.
 * * KEY AGENTS:
 * - Visa Inc. (Registrant): The entity seeking to transform its structure and raise capital.
 * - SEC (Regulator): The institutional gatekeeper enforcing transparency and legal compliance.
 * - Individual Investor (The Public): The intended recipient of protections through mandated disclosure.
 * * NARRATIVE ARC:
 * Visa Inc. is in the final stages (Amendment No. 6) of a complex multi-year 
 * transition to a public company. The constraint functions as a rigid 
 * "Mountain" of paperwork and legal liability that must be scaled to achieve 
 * the "Rope" of public market coordination.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for [STEP 1] and [STEP 2] of the DR-Audit Suite
narrative_ontology:interval(visa_ipo_window, 0, 10).
narrative_ontology:constraint_claim(visa_ipo_regulatory_compliance, mountain).

% Base extractiveness score (0.0 = no extraction, 1.0 = full extraction)
% Rationale: The system extracts significant legal fees and time (6+ amendments) but 
% provides the "benefit" of market access. Minimal direct extraction from the public.
domain_priors:base_extractiveness(visa_ipo_regulatory_compliance, 0.2).

% Suppression score (0.0 = no suppression, 1.0 = full suppression)
% Rationale: Alternatives to SEC registration for a global IPO do not legally exist 
% in the US; the system is absolute for this scale of capital.
domain_priors:suppression_score(visa_ipo_regulatory_compliance, 0.9).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(visa_ipo_regulatory_compliance, extractiveness, 0.2).
narrative_ontology:constraint_metric(visa_ipo_regulatory_compliance, suppression_requirement, 0.9).

% Enforcement requirements
domain_priors:requires_active_enforcement(visa_ipo_regulatory_compliance).

% Metrics for Executive Summary
% Beneficiaries and Victims
constraint_beneficiary(visa_ipo_regulatory_compliance, institutional_investors).
constraint_victim(visa_ipo_regulatory_compliance, registrant_legal_budget).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: Joseph W. Saunders (CEO) - Snare
   --------------------------------------------------------------------------
   
   WHO: powerful / institutional - CEO of the registrant.
   WHEN: immediate - Focused on the "commencement of proposed sale".
   WHERE: trapped - Legally bound by the Securities Act; cannot sell without SEC approval.
   SCOPE: national / global - Managing a worldwide restructuring.
   
   WHY THIS CLASSIFICATION:
   From the CEO's perspective, this is a "Snare" because it imposes massive 
   personal liability (signatures required) and slows the organization down 
   through endless amendments (6 filings). It is an asymmetric 
   burden that benefits the state's oversight power.
   
   NARRATIVE EVIDENCE:
   "The Registrant hereby amends this Registration Statement on such date or 
   dates as may be necessary to delay its effective date...".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    visa_ipo_regulatory_compliance,
    snare,
    context(
        agent_power(powerful),
        time_horizon(immediate),
        exit_options(trapped),
        constraint_beneficiary(visa_ipo_regulatory_compliance, sec),
        constraint_victim(visa_ipo_regulatory_compliance, joseph_saunders),
        spatial_scope(global)
    )
) :-
    domain_priors:base_extractiveness(visa_ipo_regulatory_compliance, E),
    E > 0.1,
    domain_priors:requires_active_enforcement(visa_ipo_regulatory_compliance),
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: Individual Retail Investor - Mountain
   --------------------------------------------------------------------------
   
   WHO: powerless - Has no say in the filing rules.
   WHEN: biographical - Investment horizon for the "public".
   WHERE: constrained - Can choose not to buy, but cannot change the disclosure rules.
   SCOPE: local / national.
   
   WHY THIS CLASSIFICATION:
   The retail investor views the SEC framework as a "Mountain"—a naturalized 
   fact of the financial world. It is the bedrock of "truth" upon which they 
   make decisions; they cannot imagine a market without these protections.
   
   NARRATIVE EVIDENCE:
   The document provides a "prospectus constituting Part I" specifically 
   for the purpose of public information.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    visa_ipo_regulatory_compliance,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(biographical),
        exit_options(constrained),
        constraint_beneficiary(visa_ipo_regulatory_compliance, the_public),
        constraint_victim(visa_ipo_regulatory_compliance, none),
        spatial_scope(national)
    )
) :-
    domain_priors:suppression_score(visa_ipo_regulatory_compliance, S),
    S > 0.8,
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: Securities Attorney (White & Case) - Rope
   --------------------------------------------------------------------------
   
   WHO: analytical / institutional - Service provider facilitating the process.
   WHEN: historical - Operates within the tradition of the 1933 Act.
   WHERE: arbitrage - Understands how to navigate the rules to achieve client goals.
   SCOPE: continental / global.
   
   WHY THIS CLASSIFICATION:
   For the lawyers, the S-1 is a "Rope." It is a functional coordination mechanism 
   that allows capital to flow safely. While complex, it is a tool they use 
   to structure the "Amended and Restated Global Restructuring Agreement".
   
   NARRATIVE EVIDENCE:
   "Opinion of White & Case LLP as to the legality of the securities being 
   registered...".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    visa_ipo_regulatory_compliance,
    rope,
    context(
        agent_power(analytical),
        time_horizon(historical),
        exit_options(arbitrage),
        constraint_beneficiary(visa_ipo_regulatory_compliance, visa_inc),
        constraint_victim(visa_ipo_regulatory_compliance, none),
        spatial_scope(global)
    )
) :-
    domain_priors:base_extractiveness(visa_ipo_regulatory_compliance, E),
    E < 0.4,
    !.

/* ==========================================================================
   4. TESTS
   ========================================================================= */

:- begin_tests(visa_ipo_regulatory_compliance_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(visa_ipo_regulatory_compliance, Type1, 
        context(powerful, immediate, trapped, _, _, global)),
    constraint_indexing:constraint_classification(visa_ipo_regulatory_compliance, Type2, 
        context(powerless, biographical, constrained, _, _, national)),
    constraint_indexing:constraint_classification(visa_ipo_regulatory_compliance, Type3, 
        context(analytical, historical, arbitrage, _, _, global)),
    Type1 = snare,
    Type2 = mountain,
    Type3 = rope.

test(regulatory_barrier_impact) :-
    % Test that the 'trapped' CEO sees high friction (Snare) vs 'arbitrage' lawyer (Rope)
    constraint_indexing:constraint_classification(visa_ipo_regulatory_compliance, snare, context(_, _, trapped, _, _, _)),
    constraint_indexing:constraint_classification(visa_ipo_regulatory_compliance, rope, context(_, _, arbitrage, _, _, _)).

:- end_tests(visa_ipo_regulatory_compliance_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * * KEY DECISIONS:
 * 1. EXTRACTIVENESS: Set to 0.2. While the IPO involves billions, the *constraint* * itself (the S-1 filing) doesn't extract the capital; it merely regulates 
 * the flow. The "extraction" is the legal/administrative overhead.
 * 2. SUPPRESSION: Set to 0.9. There is no alternative "unregulated" IPO 
 * at this scale in the US jurisdiction.
 * * PERSPECTIVES:
 * - CEO: Chosen because they sign and bear the risk.
 * - Public: Chosen because they are the "protected" class.
 * - Legal Counsel: Chosen because they treat the law as a functional tool (Rope).
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω)
   ========================================================================== */

omega_variable(
    sec_effectiveness,
    "Does the S-1 actually prevent fraud (Rope) or merely provide a legal shield for institutions (Snare)?",
    resolution_mechanism("Post-IPO litigation frequency vs. historical unregulated markets"),
    impact("If Rope: the 0.2 extractiveness is a fee for service. If Snare: it is a barrier to entry."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Direct Public Offering (DPO)
 * Viability: Historically possible but rare for companies of Visa's size in 2008.
 * Suppression: Market norms and underwriter requirements make this effectively invisible.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

% Load: ?- [visa_ipo_regulatory_compliance].
% Tests: ?- run_tests(visa_ipo_regulatory_compliance_tests).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */


% --- v3.1 Indexical Relativity Stubs (Fleet Repair) ---
constraint_indexing:constraint_classification(s1_visa, mountain, agent_power(analytical)).
constraint_indexing:constraint_classification(s1_visa, rope, agent_power(institutional)).
constraint_indexing:constraint_classification(s1_visa, snare, agent_power(powerless)).
% ============================================================================
% CONSTRAINT STORY: visa_judgment_sharing_agreement
% ============================================================================
% Generated: 2026-01-17
% Model: Gemini 2.0 Flash
% Source: Visa Inc. Amendment No. 6 to Form S-1 
% ============================================================================

:- module(visa_judgment_sharing_agreement, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: visa_judgment_sharing_agreement
 * human_readable: Judgment Sharing Agreement (AMEX Case)
 * domain: legal/economic
 * temporal_scope: July 2007 (Filing date) 
 * spatial_scope: National (United States Judiciary) 
 * * SUMMARY:
 * A contractual coordination mechanism between Visa U.S.A. Inc. and its 
 * signatory member banks to allocate financial liability arising from 
 * antitrust litigation (specifically the American Express case). 
 * This agreement prevents individual member banks from being single-handedly 
 * destroyed by joint and several liability.
 * * KEY AGENTS:
 * - Visa U.S.A. Inc.: The central entity coordinating the defense.
 * - Signatory Banks: Member institutions sharing the risk of a multi-billion dollar judgment.
 * - American Express (AMEX): The plaintiff whose legal victory creates the liability pressure.
 * * NARRATIVE ARC:
 * To facilitate the IPO, Visa must ringfence and quantify its massive legal 
 * liabilities. The Judgment Sharing Agreement (JSA) transforms an unpredictable 
 * external threat (antitrust judgment) into a structured internal obligation 
 * (shared loss) .
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for [STEP 1] and [STEP 2] of the DR-Audit Suite
narrative_ontology:interval(visa_litigation_ringfencing, 0, 10).
narrative_ontology:constraint_claim(visa_judgment_sharing_agreement, rope).

% Base extractiveness score (0.0 = no extraction, 1.0 = full extraction)
% Rationale: The agreement extracts capital from banks to pay settlements, but 
% the flow is proportional to their historical involvement and protects the 
% system from collapse.
domain_priors:base_extractiveness(visa_judgment_sharing_agreement, 0.4).

% Suppression score (0.0 = no suppression, 1.0 = full suppression)
% Rationale: Banks that want to remain part of the Visa network for the IPO 
% restructure essentially have no alternative but to sign.
domain_priors:suppression_score(visa_judgment_sharing_agreement, 0.7).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(visa_judgment_sharing_agreement, extractiveness, 0.4).
narrative_ontology:constraint_metric(visa_judgment_sharing_agreement, suppression_requirement, 0.7).

% Enforcement requirements
domain_priors:requires_active_enforcement(visa_judgment_sharing_agreement).

% Metrics for Executive Summary
% Beneficiaries and Victims
constraint_beneficiary(visa_judgment_sharing_agreement, visa_inc_shareholders).
constraint_victim(visa_judgment_sharing_agreement, signatory_member_banks).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: Small Signatory Bank - Snare
   --------------------------------------------------------------------------
   
   WHO: individual_moderate - Financial institution but small relative to the system.
   WHEN: immediate - Concerned with the upcoming quarterly impact of loss sharing.
   WHERE: trapped - Leaving the network during an IPO restructuring is prohibitively costly.
   SCOPE: national.
   
   WHY THIS CLASSIFICATION:
   For a smaller bank, this is a "Snare." They are forced to sign an agreement 
   that binds them to pay for the "sins" of the network's past antitrust 
   behavior, with the terms dictated by the larger Visa corporate entity 
   to ensure the IPO's success.
   
   NARRATIVE EVIDENCE:
   The agreement is "by and between Visa U.S.A. Inc. and the signatory banks 
   thereto," implying a take-it-or-leave-it participation requirement.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    visa_judgment_sharing_agreement,
    snare,
    context(
        agent_power(individual_moderate),
        time_horizon(immediate),
        exit_options(trapped),
        constraint_beneficiary(visa_judgment_sharing_agreement, visa_inc),
        constraint_victim(visa_judgment_sharing_agreement, small_bank),
        spatial_scope(national)
    )
) :-
    domain_priors:suppression_score(visa_judgment_sharing_agreement, S),
    S > 0.6,
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: Visa Chief Legal Officer - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional - Crafting the legal architecture of the IPO.
   WHEN: biographical - Aiming for a stable, public Visa Inc. over the next 20 years.
   WHERE: arbitrage - Using contract law to mitigate judicial risk.
   SCOPE: global.
   
   WHY THIS CLASSIFICATION:
   From the institutional perspective, the JSA is a "Rope." It is a functional 
   coordination tool that prevents the "systemic risk" of one bank failing and 
   dragging down the network. It allows the IPO to proceed by providing 
   certainty to new investors.
   
   NARRATIVE EVIDENCE:
   "Judgment Sharing Agreement among Defendants... incorporated by reference" 
   as a key exhibit for investor transparency.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    visa_judgment_sharing_agreement,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(arbitrage),
        constraint_beneficiary(visa_judgment_sharing_agreement, global_payment_system),
        constraint_victim(visa_judgment_sharing_agreement, none),
        spatial_scope(global)
    )
) :-
    domain_priors:base_extractiveness(visa_judgment_sharing_agreement, E),
    E < 0.5,
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: The Judiciary / SEC Observer - Mountain
   --------------------------------------------------------------------------
   
   WHO: analytical - Observing the legal reality of the filings.
   WHEN: historical - The antitrust case is a settled "fact" of the 2000s era.
   WHERE: analytical - Not a party to the contract.
   SCOPE: national.
   
   WHY THIS CLASSIFICATION:
   For an observer, these liabilities and the agreements to share them are a 
   "Mountain." They are the fixed landscape of Visa's history that cannot be 
   erased; they must be navigated and disclosed as immutable risks.
   
   NARRATIVE EVIDENCE:
   Referenced repeatedly across multiple amendments (No. 1 through No. 6) 
   as a permanent part of the registration statement.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    visa_judgment_sharing_agreement,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(historical),
        exit_options(analytical),
        constraint_beneficiary(visa_judgment_sharing_agreement, none),
        constraint_victim(visa_judgment_sharing_agreement, none),
        spatial_scope(national)
    )
) :-
    true,
    !.

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(visa_jsa_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(visa_judgment_sharing_agreement, Type1, 
        context(individual_moderate, immediate, trapped, _, _, national)),
    constraint_indexing:constraint_classification(visa_judgment_sharing_agreement, Type2, 
        context(institutional, biographical, arbitrage, _, _, global)),
    Type1 = snare,
    Type2 = rope.

test(systemic_stability_logic) :-
    % Testing that institutional power views this as a functional tool (Rope)
    constraint_indexing:constraint_classification(visa_judgment_sharing_agreement, rope, 
        context(institutional, _, _, _, _, _)).

:- end_tests(visa_jsa_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * * KEY DECISIONS:
 * 1. EXTRACTIVENESS (0.4): Significant because it mandates large payments 
 * from banks to cover settlements.
 * 2. CLASSIFICATION: Chose "Rope" for the institution because the JSA is 
 * what enables the "Global Restructuring Agreement". Without it, 
 * the IPO (a larger Rope) would fail.
 * * AMBIGUITIES:
 * The S-1 does not disclose the *exact* percentages of liability sharing, 
 * which are likely in the "confidential treatment" portions.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω)
   ========================================================================== */

omega_variable(
    allocation_fairness,
    "Is the liability allocation based on revenue (Rope) or on political leverage within the Visa association (Snare)?",
    resolution_mechanism("Audit of the confidential exhibit filed with the SEC Secretary"),
    impact("If leverage-based: it is a Snare for smaller banks. If revenue-based: it is a Rope for the network."),
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Individual Litigation
 * Viability: Every bank defends itself against AMEX. 
 * Suppression: Rejected because it would lead to inconsistent judgments and 
 * potentially bankrupt smaller members, ruining the Visa brand before the IPO.
 * * CONCLUSION:
 * The rejection of individual litigation effectively forces the JSA into a 
 * "Mountain" status for those who want to remain in the payment ecosystem.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

% Load: ?- [visa_judgment_sharing_agreement].

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */


% --- v3.1 Indexical Relativity Stubs (Fleet Repair) ---
constraint_indexing:constraint_classification(s1_visa_judgment_sharing_agreement, mountain, agent_power(analytical)).
constraint_indexing:constraint_classification(s1_visa_judgment_sharing_agreement, rope, agent_power(institutional)).
constraint_indexing:constraint_classification(s1_visa_judgment_sharing_agreement, snare, agent_power(powerless)).
% ============================================================================
% CONSTRAINT STORY: sadhu_integrity_protocol
% ============================================================================
% Generated: 2026-01-21
% Model: Gemini 2.0 Flash
% Source: "Sadhu’s Sugar" (Adapted from Gandhi Story)
% ============================================================================

:- module(sadhu_integrity_protocol, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: sadhu_integrity_protocol
 * human_readable: The Integrity Requirement (Sadhu's Sugar)
 * domain: social/psychological/ethical
 * temporal_scope: Perennial / Folk Narrative
 * spatial_scope: Local (Village / Interpersonal)
 * * SUMMARY:
 * This constraint mandates that an advisor must embody their own counsel before 
 * delivering it to others. In the story, a Sadhu delays giving 
 * advice to a boy for two weeks because he was still consuming sugar himself. 
 * It posits that effective social coordination (advice) requires internal synchronization (integrity).
 * * KEY AGENTS:
 * - The Sadhu (Institutional/Analytical): The authority figure who enforces a delay 
 * on himself to ensure congruent delivery.
 * - The Mother (Individual Powerless): Seeking to use external authority to solve 
 * a domestic health issue; subject to the Sadhu's two-week delay.
 * - The Son (Individual Powerless): The subject of the advice who promises to 
 * change based on the weight of the Sadhu's character.
 * * NARRATIVE ARC:
 * A mother seeks to "fix" her son's behavior through the Sadhu's authority. 
 * The Sadhu introduces a temporal constraint (two weeks), which functions as a 
 * "Mountain" to the mother but a "Rope" for his own spiritual and social 
 * efficacy. The resolution reveals that the delay was a 
 * necessary extraction of time to ensure the advice was not hypocritical.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% The Structural Anchor
narrative_ontology:interval(sadhu_integrity_protocol, 0, 10).
narrative_ontology:constraint_claim([sadhu_integrity_protocol], [social_synchronization]).

% Base extractiveness score (0.0 = no extraction, 1.0 = full extraction)
% Rationale: Low-Moderate (0.3). The protocol extracts two weeks of time 
% and effort from the mother and son. However, it is not 
% predatory; it is an investment in the "quality" of the resulting change.
domain_priors:base_extractiveness(sadhu_integrity_protocol, 0.3).

% Suppression score (0.0 = no suppression, 1.0 = full suppression)
% Rationale: Moderate (0.4). It suppresses the "easy path" of immediate, 
% hypocritical advice, making the "quick fix" invisible or invalid.
domain_priors:suppression_score(sadhu_integrity_protocol, 0.4).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(sadhu_integrity_protocol, extractiveness, 0.3).
narrative_ontology:constraint_metric(sadhu_integrity_protocol, suppression_requirement, 0.4).

% Enforcement requirements
% Emerges naturally from the Sadhu's internal ethics.
domain_priors:emerges_naturally(sadhu_integrity_protocol).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(sadhu_integrity_protocol, authentic_authority). % The Sadhu's reputation and efficacy.
constraint_victim(sadhu_integrity_protocol, immediate_gratification).   % The mother's desire for an instant solution.

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE SADHU - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional (Respected community elder/holy man)
   WHEN: immediate (Two-week period of personal change)
   WHERE: mobile (Has the agency to delay or speak)
   SCOPE: local (Interpersonal advice)
   
   WHY THIS CLASSIFICATION:
   To the Sadhu, integrity is a "Rope"—a functional coordination mechanism. 
   He uses the two-week delay as a tool to align his internal state with his 
   external words, ensuring that his influence is "grounded" in reality.
   
   NARRATIVE EVIDENCE:
   "two weeks ago, I was still eating sugar myself".
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    sadhu_integrity_protocol,
    rope,
    context(
        agent_power(institutional),
        time_horizon(immediate),
        exit_options(mobile),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE MOTHER - Mountain
   --------------------------------------------------------------------------
   
   WHO: powerless (Frustrated and seeking help)
   WHEN: immediate (Short-term health concern for her son)
   WHERE: trapped (Bounded by the Sadhu's command to "go home")
   SCOPE: local
   
   WHY THIS CLASSIFICATION:
   To the mother, the Sadhu's delay is a "Mountain"—an unchangeable, zero-degree-of-freedom 
   requirement. She is "perplexed" and has no choice but to wait if she wants the 
   holy man's specific blessing for her son.
   
   NARRATIVE EVIDENCE:
   "The woman was perplexed. She took the boy by the hand and went home".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    sadhu_integrity_protocol,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE SON - Snare
   --------------------------------------------------------------------------
   
   WHO: powerless (The subject being "chided" and "hauled")
   WHEN: immediate (The moment of the promise)
   WHERE: trapped (Under the dual pressure of mother and holy man)
   SCOPE: local
   
   WHY THIS CLASSIFICATION:
   For the boy, the Sadhu's integrity creates a "Snare." Because the advice is 
   now congruent and backed by the Sadhu's demonstrated sacrifice, the boy's 
   freedom to continue his habit is extracted. The authority 
   is now "inescapable" because it is true.
   
   NARRATIVE EVIDENCE:
   "The boy nodded and promised he would not continue this habit any longer".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    sadhu_integrity_protocol,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :-
    domain_priors:base_extractiveness(sadhu_integrity_protocol, E),
    E > 0.2,
    !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(sadhu_integrity_protocol_tests).

test(multi_perspective_integrity) :-
    % Sadhu sees a Rope (Coordination)
    constraint_indexing:constraint_classification(sadhu_integrity_protocol, rope, context(institutional, immediate, mobile, local)),
    % Mother sees a Mountain (Unchangeable delay)
    constraint_indexing:constraint_classification(sadhu_integrity_protocol, mountain, context(powerless, immediate, trapped, local)),
    % Verify they differ
    Type1 \= Type2.

test(power_extractiveness_integrity) :-
    % The powerless son experiences the "Snare" of authoritative change.
    ContextPowerless = context(powerless, immediate, trapped, local),
    % The Sadhu (Institutional) benefits from the authentic status.
    ContextPowerful = context(institutional, immediate, mobile, local),
    constraint_indexing:extractiveness_for_agent(sadhu_integrity_protocol, ContextPowerless, Score1),
    constraint_indexing:extractiveness_for_agent(sadhu_integrity_protocol, ContextPowerful, Score2),
    Score1 > Score2.

:- end_tests(sadhu_integrity_protocol_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-21
 * * KEY DECISIONS:
 * * 1. BASE EXTRACTIVENESS (0.3):
 * Reasoning: While integrity is a "gift," the protocol involves a mandatory 
 * extraction of time and patience from the seeker. 
 * The son also loses his "habit," which is a personal extraction of pleasure.
 * * 2. PERSPECTIVE SELECTION:
 * Contrasted the Sadhu (Rope) with the Mother (Mountain) to show how an 
 * internal ethical tool for one is an external, unyielding law for another.
 * * 3. CLASSIFICATION RATIONALE:
 * Sadhu -> Rope: He uses the delay to coordinate his self-identity.
 * Mother -> Mountain: She lacks the "exit options" to skip the delay.
 * Son -> Snare: The "truth" of the Sadhu's integrity tightens the social 
 * demand on the boy to change.
 * * 4. AMBIGUITIES:
 * The primary ambiguity is whether the Sadhu's internal change *causally* * impacted the boy, or if the boy was just impressed by the story of the delay.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    sadhu_influence_causality,
    "Does the boy's compliance stem from the Sadhu's internal change (Mountain) 
     or from the *story* of the Sadhu's change (Rope)?",
    resolution_mechanism("Comparison of change-rates in subjects receiving advice from congruent advisors vs. hypocritical advisors whose hypocrisy is hidden"),
    impact("If internal change matters: Integrity is a biological law. If only the story matters: Integrity is a narrative Scaffold."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Hypocritical Advice
 * Viability: Very common; tell the boy to stop while you keep eating.
 * Suppression: Explicitly rejected by the Sadhu as ineffective or unethical 
 * for a "holy man".
 * * ALTERNATIVE 2: Pure Authority
 * Viability: Demand obedience based on social rank regardless of behavior.
 * Suppression: Shunted in the moral of the story: "If you are going to give 
 * advice, take it yourself first".
 * * CONCLUSION:
 * The existence of Alternative 1 (Hypocrisy) is what makes the protocol 
 * a "Rope." Without the integrity requirement, the advice becomes a "Snare" 
 * of potentially hollow social control.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS CONSTRAINT:
 * * 1. Load: ?- [sadhu_integrity_protocol].
 * 2. Multi-perspective: ?- constraint_indexing:multi_index_report(sadhu_integrity_protocol).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: sapir_whorf_hypothesis
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_sapir_whorf_hypothesis, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: sapir_whorf_hypothesis
 * human_readable: Sapir-Whorf Hypothesis (Linguistic Relativity)
 * domain: social/cognitive
 * * SUMMARY:
 * The Sapir-Whorf hypothesis proposes that the structure of a language affects its speakers' worldview or cognition. In its "strong" form (linguistic determinism), language limits what can be thought; in its "weak" form (linguistic relativity), it merely influences perception. This constraint models the social and cognitive effects of an agent's native language.
 * * KEY AGENTS:
 * - Monolingual Speaker: Subject (Powerless), trapped within their language's conceptual framework.
 * - Propagandist/Ideologue: Beneficiary (Institutional), who weaponizes language to shape thought.
 * - Linguist/Cognitive Scientist: Auditor (Analytical), who observes the structure and its effects.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(sapir_whorf_hypothesis, 0.55). % Moderate. Language extracts "unlabeled" thoughts by forcing cognition into predefined semantic ruts, taxing thoughts that fall outside the norm.
domain_priors:suppression_score(sapir_whorf_hypothesis, 0.70).   % High. What is not easily named is often not noticed, making alternative conceptual frameworks invisible or difficult to access.
domain_priors:theater_ratio(sapir_whorf_hypothesis, 0.10).       % Low. Language is overwhelmingly functional, not theatrical.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(sapir_whorf_hypothesis, extractiveness, 0.55).
narrative_ontology:constraint_metric(sapir_whorf_hypothesis, suppression_requirement, 0.70).
narrative_ontology:constraint_metric(sapir_whorf_hypothesis, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% Language presents itself as a pure coordination tool for communication.
narrative_ontology:constraint_claim(sapir_whorf_hypothesis, coordination).

% Binary flags
% Language can be actively enforced (e.g., Newspeak, censorship) to maintain its extractive properties.
domain_priors:requires_active_enforcement(sapir_whorf_hypothesis).

% Structural property derivation hooks:
% Beneficiaries use language to coordinate and shape worldviews.
narrative_ontology:constraint_beneficiary(sapir_whorf_hypothesis, ideologues).
narrative_ontology:constraint_beneficiary(sapir_whorf_hypothesis, advertisers).
% Victims are those whose thoughts are constrained or whose cross-cultural communication is impaired.
narrative_ontology:constraint_victim(sapir_whorf_hypothesis, dissenters).
narrative_ontology:constraint_victim(sapir_whorf_hypothesis, cross_cultural_communicators).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE MONOLINGUAL SUBJECT (SNARE)
% Experiences their native language as an inescapable reality, a trap for thought.
% χ = 0.55 (ε) * 1.5 (π(powerless)) * 1.0 (σ(national)) = 0.825. This is a clear Snare.
constraint_indexing:constraint_classification(sapir_whorf_hypothesis, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE DIPLOMAT / PROPAGANDIST (ROPE)
% Views language as a tool for coordination and influence, leveraging its structure.
% χ = 0.55 (ε) * -0.2 (π(institutional)) * 1.1 (σ(continental)) = -0.121. This is a clear Rope.
constraint_indexing:constraint_classification(sapir_whorf_hypothesis, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(continental))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Sees both the coordination function and the asymmetric extraction.
% The metrics (E=0.55, S=0.70), beneficiaries, victims, and enforcement requirement
% all point to a Tangled Rope from a neutral, analytical viewpoint.
% χ = 0.55 (ε) * 1.15 (π(analytical)) * 1.2 (σ(global)) = 0.759.
constraint_indexing:constraint_classification(sapir_whorf_hypothesis, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(sapir_whorf_hypothesis_tests).

test(perspectival_gap) :-
    % Verify the gap between the powerless subject (Snare) and the institutional user (Rope).
    constraint_indexing:constraint_classification(sapir_whorf_hypothesis, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(sapir_whorf_hypothesis, rope, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(sapir_whorf_hypothesis, tangled_rope, context(agent_power(analytical), _, _, _)).

test(threshold_validation_for_tangled_rope) :-
    % A Tangled Rope requires high extraction and suppression.
    config:param(extractiveness_metric_name, ExtMetricName),
    config:param(suppression_metric_name, SuppMetricName),
    narrative_ontology:constraint_metric(sapir_whorf_hypothesis, ExtMetricName, E),
    narrative_ontology:constraint_metric(sapir_whorf_hypothesis, SuppMetricName, S),
    E >= 0.50,
    S >= 0.40.

test(tangled_rope_structural_requirements) :-
    % Verify all three structural properties for Tangled Rope are present.
    narrative_ontology:constraint_beneficiary(sapir_whorf_hypothesis, _), % -> has_coordination_function
    narrative_ontology:constraint_victim(sapir_whorf_hypothesis, _),     % -> has_asymmetric_extraction
    domain_priors:requires_active_enforcement(sapir_whorf_hypothesis).

:- end_tests(sapir_whorf_hypothesis_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The Sapir-Whorf hypothesis is a classic example of a constraint whose nature
 * changes dramatically with perspective. For a monolingual individual, the limits
 * of their language are effectively the limits of their world (Snare). For an
 * institutional actor like a propagandist or diplomat, language is a powerful
 * coordination tool (Rope). The base extractiveness of 0.55 reflects the cognitive
 * "tax" language imposes by forcing fluid reality into discrete, lossy categories.
 * The high suppression score of 0.70 reflects how difficult it is to think a
 * concept for which one has no word.
 *
 * * MANDATROPHY ANALYSIS:
 * The analytical classification as a Tangled Rope is critical. A simpler model
 * might see the high suppression and extraction and label language a pure Snare,
 * missing its essential, world-building coordination function. By recognizing
 * that it has both beneficiaries (coordination) and victims (asymmetric extraction)
 * and requires enforcement to maintain its ideological purity (e.g., Newspeak),
 * the Tangled Rope classification provides a much richer and more accurate model,
 * resolving the mandatrophy of seeing only the trap and not the tool.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_sapir_whorf,
    'Does language truly prevent thoughts (strong determinism) or merely make some thoughts easier than others (weak relativity)?',
    'Long-term neuro-linguistic studies on speakers of languages without specific numeric or spatial markers.',
    'If strong determinism is true, the constraint is a hard Snare/Mountain. If weak relativity is true, it is a malleable Tangled Rope.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(sapir_whorf_hypothesis, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data models how language can be instrumentalized over time, increasing
% its extractive properties as it is weaponized for political or commercial ends.
% Base extractiveness > 0.46, so this is required.

% Theater ratio over time (remains low and stable):
narrative_ontology:measurement(swh_tr_t0, sapir_whorf_hypothesis, theater_ratio, 0, 0.10).
narrative_ontology:measurement(swh_tr_t5, sapir_whorf_hypothesis, theater_ratio, 5, 0.10).
narrative_ontology:measurement(swh_tr_t10, sapir_whorf_hypothesis, theater_ratio, 10, 0.10).

% Extraction over time (models increasing instrumentalization):
narrative_ontology:measurement(swh_ex_t0, sapir_whorf_hypothesis, base_extractiveness, 0, 0.48).
narrative_ontology:measurement(swh_ex_t5, sapir_whorf_hypothesis, base_extractiveness, 5, 0.52).
narrative_ontology:measurement(swh_ex_t10, sapir_whorf_hypothesis, base_extractiveness, 10, 0.55).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Language is the quintessential information standard.
narrative_ontology:coordination_type(sapir_whorf_hypothesis, information_standard).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: sat_csp_complexity
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Computational Complexity / Boolean Satisfiability / Constraint Satisfaction
% ============================================================================

:- module(constraint_sat_csp_complexity, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: sat_csp_complexity
 * human_readable: SAT/CSP Complexity (Satisfiability and Constraint Satisfaction)
 * domain: technological
 * temporal_scope: Permanent (Universal Laws of Logic and Search)
 * spatial_scope: Global (Formal Systems)
 * * SUMMARY:
 * Boolean Satisfiability (SAT) and Constraint Satisfaction Problems (CSP) represent 
 * the fundamental challenge of finding a set of values that satisfy a collection 
 * of constraints. While checking a solution is easy, finding one is often 
 * NP-complete, representing a universal "hardness" in automated reasoning.
 * * KEY AGENTS:
 * - The Logic Researcher: Seeking to find phase transitions where problems 
 * move from "easy" to "hard."
 * - The Solver Architect: Building "Heuristic Ropes" (CDCL solvers) to 
 * navigate the exponential search space.
 * - The System Designer: Trapped by the need to solve complex configuration 
 * or scheduling problems that are fundamentally hard.
 * * NARRATIVE ARC:
 * These problems function as a "Mountain" of state-space complexity. For 
 * the engineer with a powerful solver, it is a "Rope" (a declarative way 
 * to solve complex tasks). For the real-time system facing a combinatorial 
 * explosion, it is a "Snare" that strangles performance as variables scale.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for structural anchor
narrative_ontology:interval(sat_csp_interval, 0, 10).
narrative_ontology:constraint_claim(sat_csp_complexity, mountain).

% Base extractiveness score (0.0-1.0)
% Rationale: It extracts "computational time." The asymmetry between 
% verification and search allows the "hardness" to be leveraged for 
% security or to gate-keep resource allocation.
domain_priors:base_extractiveness(sat_csp_complexity, 0.4).

% Suppression score (0.0-1.0)
% Rationale: It suppresses "perfect optimization." Because the search is 
% hard, the alternative—finding the absolute best solution—is often 
% invisible or unfeasible compared to "good enough" heuristics.
domain_priors:suppression_score(sat_csp_complexity, 0.5).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(sat_csp_complexity, extractiveness, 0.4).
narrative_ontology:constraint_metric(sat_csp_complexity, suppression_requirement, 0.5).

% Enforcement requirements: Emerges naturally from the combinatorics of choice.
domain_priors:emerges_naturally(sat_csp_complexity).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(sat_csp_complexity, solver_developers).
constraint_victim(sat_csp_complexity, real_time_schedulers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================= */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE COMPLEXITY ANALYST - Mountain
   --------------------------------------------------------------------------
   
   WHO: analytical - Observer of the laws of information.
   WHEN: civilizational - Viewing the search space as a permanent substrate.
   WHERE: trapped - Logic cannot bypass the exponential branching of choices.
   SCOPE: global - Universal computation.
   
   WHY THIS CLASSIFICATION:
   To the analyst, SAT/CSP is a Mountain. The Cook-Levin theorem established 
   this "hardness" as a fixed feature of the mathematical landscape. No 
   amount of social or technological engineering can remove the 
   exponential wall of the worst-case scenario.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    sat_csp_complexity,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(civilizational),
        exit_options(trapped),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE FORMAL VERIFICATION ENGINEER - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional - Power to design and deploy verification tools.
   WHEN: biographical - Ensuring software safety over a project's life.
   WHERE: arbitrage - Can use modern SAT-solvers to find bugs that humans cannot.
   SCOPE: national - Industrial/Institutional application.
   
   WHY THIS CLASSIFICATION:
   For the verification engineer, SAT is a Rope. It is a coordination 
   mechanism that allows them to "pull" correctness out of complex code. 
   By reducing a program's logic to a SAT problem, they use the solver as 
    a tether to achieve safety and reliability.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    sat_csp_complexity,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(arbitrage),
        spatial_scope(national)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE EMBEDDED SYSTEM - Snare
   --------------------------------------------------------------------------
   
   WHO: powerless - A subject to the hard constraints of time/hardware.
   WHEN: immediate - Must resolve a constraint within milliseconds.
   WHERE: constrained - Limited by CPU and memory "traps."
   SCOPE: local - Immediate hardware environment.
   
   WHY THIS CLASSIFICATION:
   For an embedded system trying to solve a CSP for drone flight path 
   adjustments in real-time, the complexity is a Snare. As the number of 
   obstacles (variables) grows, the time required to find a valid path 
   tightens around the system's reaction time, potentially leading to 
   catastrophic failure.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    sat_csp_complexity,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(local)
    )
) :- !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(sat_csp_complexity_tests).

test(multi_perspective_variance) :-
    % Analyst sees Mountain
    constraint_indexing:constraint_classification(sat_csp_complexity, mountain, context(agent_power(analytical), _, _, _)),
    % Institutional sees Rope
    constraint_indexing:constraint_classification(sat_csp_complexity, rope, context(agent_power(institutional), _, _, _)),
    % Powerless sees Snare
    constraint_indexing:constraint_classification(sat_csp_complexity, snare, context(agent_power(powerless), _, _, _)).

test(power_extractiveness_scaling) :-
    % Institutional users (Engineers) derive utility from the solvers.
    % Powerless systems (Real-time chips) are drained by the complexity.
    domain_priors:base_extractiveness(sat_csp_complexity, E),
    E >= 0.4.

test(phase_transition_omega) :-
    % Logic depends on whether the problem is in the "Hard" phase or not.
    true.

:- end_tests(sat_csp_complexity_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * 1. EXTRACTIVENESS (0.4): The complexity extracts "opportunity" and 
 * "certainty." It forces a cost on finding the truth.
 * 2. SNARE CLASSIFICATION: Crucial for real-time systems where the "halt" 
 * or "failure" of a search is a death sentence for the mission.
 * 3. PERSPECTIVES: Selected the Analyst (Math), the Engineer (Utility), 
 * and the Embedded Chip (Victim).
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    phase_transition_prediction,
    "Can we predict the exact point of 'Hardness' for any given CSP 
    distribution before the search begins?",
    resolution_mechanism("Development of a universal predictive metric 
    for instance hardness"),
    impact("If Yes: The Snare becomes a Rope (we can avoid the trap). 
    If No: It remains a hidden Mountain."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Heuristic Search (Stochastic Local Search)
 * Viability: High. Often finds solutions to "hard" problems in seconds.
 * Suppression: Low. This is the "Rope" people use to escape the Snare.
 * * ALTERNATIVE 2: Quantum Adiabatic Optimization
 * Viability: Theoretical. Might "tunnel" through the Mountain.
 * * CONCLUSION:
 * The existence of heuristics converts the SAT "Mountain" into a "Rope" for 
 * practical engineering, but the worst-case complexity ensures it remains 
 * a "Snare" for safety-critical guarantees.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS CONSTRAINT:
 * 1. Load: ?- [constraint_sat_csp_complexity].
 * 2. Multi-perspective: ?- multi_index_report(sat_csp_complexity).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: scam_compound_2026
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_scam_compound_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: scam_compound_2026
 * human_readable: The Southeast Asian Scam Compound "Grey Zone"
 * domain: social/humanitarian/criminal
 * * SUMMARY:
 * In fortified enclaves, the distinction between victims of modern slavery
 * and criminal perpetrators has collapsed. Workers are trafficked (subjects)
 * but compelled to refine and execute online scams, creating a "victim-offender
 * overlap" that defies standard legal "Ideal Victim" categories. This structure
 * extracts value through coercion while suppressing escape or legal recourse.
 * * KEY AGENTS:
 * - Trafficked Migrant Labor: Subject (Powerless)
 * - Organized Crime Syndicates: Beneficiary (Institutional)
 * - Humanitarian/Legal Analysts: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(scam_compound_2026, 0.85). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(scam_compound_2026, 0.90).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(scam_compound_2026, 0.65).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(scam_compound_2026, extractiveness, 0.85).
narrative_ontology:constraint_metric(scam_compound_2026, suppression_requirement, 0.90).
narrative_ontology:constraint_metric(scam_compound_2026, theater_ratio, 0.65).

% Constraint self-claim (what does the constraint claim to be?)
% The operators present it as a legitimate, if aggressive, business. The
% underlying mechanism is pure coercive enforcement.
narrative_ontology:constraint_claim(scam_compound_2026, enforcement).

% Binary flags
domain_priors:requires_active_enforcement(scam_compound_2026). % Physical confinement, threats, and violence are central.

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
narrative_ontology:constraint_beneficiary(scam_compound_2026, organized_crime_syndicates).
narrative_ontology:constraint_victim(scam_compound_2026, trafficked_migrant_labor).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE WORKER (SNARE)
% Experiences total coercion, high extraction of labor, and no viable exit.
% The structure is a pure trap.
constraint_indexing:constraint_classification(scam_compound_2026, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(regional))).

% PERSPECTIVE 2: THE OPERATOR (ROPE)
% Views the compound as a highly efficient, coordinated business model for
% profit generation. The coercive elements are seen as necessary "management".
constraint_indexing:constraint_classification(scam_compound_2026, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (SNARE)
% The analytical view confirms the powerless perspective. The high extraction
% and suppression scores, combined with active enforcement, define a Snare.
% The "coordination" function serves only to enable extraction.
constraint_indexing:constraint_classification(scam_compound_2026, snare,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(scam_compound_2026_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between the worker and the operator.
    constraint_indexing:constraint_classification(scam_compound_2026, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(scam_compound_2026, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    assertion(TypePowerless == snare),
    assertion(TypeInstitutional == rope),
    TypePowerless \= TypeInstitutional.

test(analytical_classification_is_snare) :-
    % Verify the analytical observer correctly identifies the structure as a snare.
    constraint_indexing:constraint_classification(scam_compound_2026, TypeAnalytical, context(agent_power(analytical), _, _, _)),
    assertion(TypeAnalytical == snare).

test(threshold_validation_snare) :-
    % Verify the base metrics meet the criteria for a Snare.
    domain_priors:base_extractiveness(scam_compound_2026, E),
    domain_priors:suppression_score(scam_compound_2026, S),
    assertion(E >= 0.46),
    assertion(S >= 0.60).

:- end_tests(scam_compound_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect a system of modern slavery.
 * - Base Extractiveness (0.85): Extremely high, representing the total capture
 *   of labor value from trafficked individuals under threat of violence.
 * - Suppression Score (0.90): Represents physical confinement in fortified
 *   compounds, passport confiscation, and the elimination of legal or physical
 *   escape routes. The inability for victims to organize is a key factor.
 * - Theater Ratio (0.65): High but below the Piton threshold. The "theater"
 *   involves creating fake online personas and elaborate scam narratives, which
 *   is functional to the goal of extraction, not just performative.
 *
 * The Perspectival Gap is stark: for the trapped worker, it is an inescapable
 * Snare. For the crime syndicate, it is a profitable coordination mechanism (Rope)
 * for deploying labor towards a financial goal. The analytical view sides with
 * the worker, classifying it as a Snare due to the overwhelming coercion.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The high extraction (0.85) triggers mandatrophy analysis. This constraint
 * is not a Tangled Rope because its coordination function has no redeeming
 * social value or legitimate beneficiaries outside the extracting group. It is
 * pure coercion for asymmetric gain. Classifying it as a Snare correctly
 * identifies its primary nature and prevents the system from legitimizing
 * the operators' "coordination" claim.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_scam_compound_2026,
    'To what extent does the "victim-offender overlap" create a stable internal hierarchy versus being a pure instrument of control?',
    'Analysis of escapee testimonies and internal communication logs to determine if coerced workers gain meaningful internal status or are uniformly exploited.',
    'If a stable hierarchy exists, it might suggest a more complex Tangled Rope structure. If not, it confirms the pure Snare model.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(scam_compound_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data models the evolution of these compounds from nascent, less
% efficient operations into highly refined systems of extraction.
% Required for high-extraction constraints (base_extractiveness > 0.46).

% Theater ratio over time (scam techniques become more sophisticated):
narrative_ontology:measurement(scam_compound_2026_tr_t0, scam_compound_2026, theater_ratio, 0, 0.20).
narrative_ontology:measurement(scam_compound_2026_tr_t5, scam_compound_2026, theater_ratio, 5, 0.45).
narrative_ontology:measurement(scam_compound_2026_tr_t10, scam_compound_2026, theater_ratio, 10, 0.65).

% Extraction over time (efficiency of exploitation increases):
narrative_ontology:measurement(scam_compound_2026_ex_t0, scam_compound_2026, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(scam_compound_2026_ex_t5, scam_compound_2026, base_extractiveness, 5, 0.72).
narrative_ontology:measurement(scam_compound_2026_ex_t10, scam_compound_2026, base_extractiveness, 10, 0.85).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The internal structure is a perverse form of an enforcement mechanism,
% using rules and punishment to compel labor.
narrative_ontology:coordination_type(scam_compound_2026, enforcement_mechanism).

% Network relationships (structural influence edges)
% These compounds are often linked to global money laundering networks and
% illicit supply chains for technology.
% narrative_ontology:affects_constraint(scam_compound_2026, global_money_laundering_networks).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: scurvy_maritime_extraction
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-22
% ============================================================================

:- module(constraint_scurvy_maritime_extraction, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:coordination_type/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: scurvy_maritime_extraction
 * human_readable: The Scurvy/Empire Trade-off
 * domain: biological/political/economic
 * * SUMMARY:
 * During the Age of Sail (15th-18th centuries), scurvy (Vitamin C deficiency) was a primary biological constraint on long-distance sea voyages. While the cure (citrus) was periodically discovered, institutional inertia and cost-cutting measures transformed this solvable medical issue into a system of lethal extraction. The constraint is not the disease itself (a Mountain of biology), but the socio-economic system that accepted mass death among sailors as a cost of building global maritime empires.
 * * KEY AGENTS:
 * - Common Sailor: Subject (Powerless), trapped on a vessel with a deficient diet, facing near-certain illness and death.
 * - Maritime Empires (e.g., British Admiralty): Beneficiary (Institutional), profiting from global trade and colonization enabled by these voyages, treating sailor mortality as a predictable operational cost.
 * - Medical Analyst (e.g., James Lind): Observer (Analytical), who identifies the biological reality and the simple cure, but whose findings are ignored by the institution.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
% Rationale: Extraction is near-maximal, representing the direct extraction of life.
domain_priors:base_extractiveness(scurvy_maritime_extraction, 0.90).
% Rationale: The cure was known but actively ignored or suppressed due to cost, logistics, and competing incorrect theories.
domain_priors:suppression_score(scurvy_maritime_extraction, 0.70).
% Rationale: The constraint was brutally functional, not performative. There was little theater involved.
domain_priors:theater_ratio(scurvy_maritime_extraction, 0.10).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(scurvy_maritime_extraction, extractiveness, 0.90).
narrative_ontology:constraint_metric(scurvy_maritime_extraction, suppression_requirement, 0.70).
narrative_ontology:constraint_metric(scurvy_maritime_extraction, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% It was presented as a natural, unavoidable hazard of sea life (natural_law), but was in fact a constructed policy choice.
narrative_ontology:constraint_claim(scurvy_maritime_extraction, constructed).

% Binary flags
% The naval diet was a strictly enforced policy.
domain_priors:requires_active_enforcement(scurvy_maritime_extraction).

% Structural property derivation hooks:
% Required for Tangled Rope classification.
narrative_ontology:constraint_beneficiary(scurvy_maritime_extraction, maritime_empires).
narrative_ontology:constraint_victim(scurvy_maritime_extraction, common_sailors).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE COMMON SAILOR (SNARE)
% For the sailor, the ship's diet is a lethal trap. They have no power to change it and no exit.
% The effective extraction is χ = 0.90 * 1.5 (powerless) * 1.2 (global) = 1.62, a terminal snare.
constraint_indexing:constraint_classification(scurvy_maritime_extraction, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(global))).

% PERSPECTIVE 2: THE ADMIRALTY (ROPE)
% For the empire, sailor mortality is a manageable cost in a larger coordination problem of global trade.
% Effective extraction is χ = 0.90 * -0.2 (institutional) * 1.2 (global) = -0.216, perceived as a net benefit.
constraint_indexing:constraint_classification(scurvy_maritime_extraction, rope,
    context(agent_power(institutional),
            time_horizon(historical),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees a system with a genuine coordination function (global trade)
% that is inextricably linked to asymmetric, lethal extraction, and requires active enforcement (naval policy).
% This is the canonical definition of a Tangled Rope.
constraint_indexing:constraint_classification(scurvy_maritime_extraction, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(scurvy_maritime_extraction_tests).

test(perspectival_gap_snare_to_rope) :-
    constraint_indexing:constraint_classification(scurvy_maritime_extraction, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(scurvy_maritime_extraction, rope, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(scurvy_maritime_extraction, tangled_rope, context(agent_power(analytical), _, _, _)).

test(tangled_rope_structural_properties) :-
    % Verify the necessary conditions for a tangled_rope classification are met.
    narrative_ontology:constraint_beneficiary(scurvy_maritime_extraction, _), % derives has_coordination_function
    narrative_ontology:constraint_victim(scurvy_maritime_extraction, _),     % derives has_asymmetric_extraction
    domain_priors:requires_active_enforcement(scurvy_maritime_extraction).

test(high_extraction_threshold) :-
    domain_priors:base_extractiveness(scurvy_maritime_extraction, E),
    E >= 0.46.

:- end_tests(scurvy_maritime_extraction_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The core of this model is distinguishing the biological reality (a Mountain) from the socio-political constraint (a Tangled Rope). While Vitamin C deficiency is a law of nature, the system that weaponized this law for economic gain is a human construction.
 * - Extractiveness (0.90): Set this high because the extraction was of life itself, the ultimate resource.
 * - Suppression (0.70): The cure was known for over a century before widespread adoption, indicating strong institutional suppression.
 * - Perspectival Gap: The gap is extreme. The sailor sees a lethal Snare. The Admiralty sees a Rope for coordinating empire. The analyst sees the synthesis: a Tangled Rope where coordination and extraction are two sides of the same coin. This prevents mandatrophy by correctly identifying the system's dual nature, rather than misclassifying it as pure coordination (Rope) or a pure natural hazard (Mountain).
 * [RESOLVED MANDATROPHY]
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_scurvy_intent,
    'Was the 40+ year delay between Lind''s 1753 treatise and the Royal Navy''s adoption of citrus a result of bureaucratic incompetence (a Piton-like inertia) or a deliberate cost-saving measure (a Snare)?',
    'Analysis of Admiralty budgets and correspondence from 1753-1795, comparing sailor replacement costs vs. projected cost of citrus supply.',
    'If incompetence, the system was path-dependent and inertial. If deliberate, it was predatory extraction.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(scurvy_maritime_extraction, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data for high-extraction constraint (0.90 > 0.46).
% The system was brutally efficient from the start of long-range voyages.
% Theater was always low; extraction was always high.

% Theater ratio over time (consistently low):
narrative_ontology:measurement(scurvy_tr_t0, scurvy_maritime_extraction, theater_ratio, 0, 0.10).
narrative_ontology:measurement(scurvy_tr_t5, scurvy_maritime_extraction, theater_ratio, 5, 0.10).
narrative_ontology:measurement(scurvy_tr_t10, scurvy_maritime_extraction, theater_ratio, 10, 0.10).

% Extraction over time (consistently high):
narrative_ontology:measurement(scurvy_ex_t0, scurvy_maritime_extraction, base_extractiveness, 0, 0.90).
narrative_ontology:measurement(scurvy_ex_t5, scurvy_maritime_extraction, base_extractiveness, 5, 0.90).
narrative_ontology:measurement(scurvy_ex_t10, scurvy_maritime_extraction, base_extractiveness, 10, 0.90).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The system of naval provisioning and manning was a form of global infrastructure
% that enabled the projection of state power and trade.
narrative_ontology:coordination_type(scurvy_maritime_extraction, global_infrastructure).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: boundary_protocol
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-23
% ============================================================================

:- module(constraint_boundary_protocol, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: boundary_protocol
 * human_readable: The Self-Enforced Boundary Protocol
 * domain: psychological/social
 * * SUMMARY:
 * A boundary is defined not as a request for another's change, but as an
 * internal action protocol: "If X happens, I will do Y." It requires the
 * other person to do nothing, effectively moving the 'exit option'
 * entirely into the Subject's hands. This transforms a potentially coercive
 * social dynamic into a tool for self-regulation.
 * * KEY AGENTS:
 * - The Voyager: Subject (Powerful) - Defines and enacts their own perimeter.
 * - The External: The party whose behavior triggers the boundary (Powerless).
 * - The Therapeutic System: Beneficiary (Institutional) - Promotes this protocol as a healthy norm.
 * - The Auditor: Auditor (Analytical) - Observing the stability of the interaction.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(boundary_protocol, 0.0). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(boundary_protocol, 0.10).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(boundary_protocol, 0.05).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(boundary_protocol, extractiveness, 0.0).
narrative_ontology:constraint_metric(boundary_protocol, suppression_requirement, 0.10).
narrative_ontology:constraint_metric(boundary_protocol, theater_ratio, 0.05).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(boundary_protocol, coordination).

% Binary flags
narrative_ontology:has_sunset_clause(boundary_protocol).      % Mandatory if Scaffold
% domain_priors:requires_active_enforcement(boundary_protocol). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(boundary_protocol, the_voyager).
% narrative_ontology:constraint_victim(boundary_protocol, [victim_group]).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE EXTERNAL (MOUNTAIN)
% To the person whose behavior triggers the boundary, it appears as an
% immovable law of nature—they cannot change it through negotiation.
constraint_indexing:constraint_classification(boundary_protocol, mountain,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE THERAPEUTIC SYSTEM (ROPE)
% From an institutional perspective that teaches this as a healthy norm,
% the protocol is pure coordination, enabling stable and predictable interactions.
constraint_indexing:constraint_classification(boundary_protocol, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (SCAFFOLD)
% Initially, the boundary acts as a temporary support structure for the Voyager
% until the new, healthier dynamic becomes automatic and the explicit rule is no longer needed.
constraint_indexing:constraint_classification(boundary_protocol, scaffold,
    context(agent_power(analytical),
            time_horizon(generational),
            exit_options(analytical),
            spatial_scope(regional))) :-
    narrative_ontology:has_sunset_clause(boundary_protocol).

% PERSPECTIVE 4: THE VOYAGER (ROPE)
% The individual enacting the boundary experiences it as a tool for
% self-coordination and autonomy, a Rope they use to manage their own state.
constraint_indexing:constraint_classification(boundary_protocol, rope,
    context(agent_power(powerful),
            time_horizon(biographical),
            exit_options(mobile),
            spatial_scope(local))).


/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(boundary_protocol_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between the External (powerless) and the System (institutional).
    constraint_indexing:constraint_classification(boundary_protocol, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(boundary_protocol, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless == mountain,
    TypeInstitutional == rope,
    TypePowerless \= TypeInstitutional.

test(threshold_validation_low_extraction) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(boundary_protocol, ExtMetricName, E),
    E =< 0.15. % Validates it falls in the Rope/Mountain/Scaffold range.

test(scaffold_requirements_met) :-
    % Verify that the conditions for a Scaffold classification are met.
    constraint_indexing:constraint_classification(boundary_protocol, scaffold, _),
    narrative_ontology:has_sunset_clause(boundary_protocol),
    narrative_ontology:constraint_beneficiary(boundary_protocol, _).

:- end_tests(boundary_protocol_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This constraint models the psychological technology of a self-enforced boundary.
 * The key insight is that its classification depends entirely on perspective. For
 * the person enacting it (The Voyager), it's a Rope for self-coordination. For
 * the person encountering it (The External), it's a Mountain—an unchangeable
 * feature of their environment. The base extractiveness is zero because the
 * protocol's purpose is to *stop* the extraction of the Voyager's emotional
 * or mental resources, not to gain new ones.
 *
 * The Scaffold classification from the analytical view captures the temporary
 * nature of such a conscious rule. It's a support structure that, if successful,
 * becomes an unconscious, integrated part of a relationship, at which point
 * the explicit "scaffold" is no longer needed.
 *
 * * MANDATROPHY ANALYSIS:
 * This constraint has zero base extraction, so mandatrophy is not a concern.
 * It represents the opposite: a tool to dismantle an existing, unstated Snare
 * (e.g., codependency) by converting it into a transparent, self-managed Rope.
 * The system correctly avoids mislabeling this as extraction.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_boundary_protocol,
    'Is the boundary a genuine self-regulation tool (Rope/Scaffold) or a passive-aggressive control tactic (a disguised Snare)?',
    'Observing the Voyager''s behavior. Do they use the boundary to create space and stability, or to punish and manipulate the External?',
    'If it is a control tactic, the base_extractiveness is non-zero (emotional energy from the External) and the classification becomes a Snare.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(boundary_protocol, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data is not strictly required as base_extractiveness < 0.46, but
% is included to model the narrative arc of the constraint's lifecycle.
%
% Theater ratio over time (drops as the boundary moves from "stated" to "integrated"):
narrative_ontology:measurement(boundary_protocol_tr_t0, boundary_protocol, theater_ratio, 0, 0.40).
narrative_ontology:measurement(boundary_protocol_tr_t5, boundary_protocol, theater_ratio, 5, 0.20).
narrative_ontology:measurement(boundary_protocol_tr_t10, boundary_protocol, theater_ratio, 10, 0.05).

% Extraction over time (remains at zero as the Subject refuses to be "siphoned"):
narrative_ontology:measurement(boundary_protocol_ex_t0, boundary_protocol, base_extractiveness, 0, 0.0).
narrative_ontology:measurement(boundary_protocol_ex_t5, boundary_protocol, base_extractiveness, 5, 0.0).
narrative_ontology:measurement(boundary_protocol_ex_t10, boundary_protocol, base_extractiveness, 10, 0.0).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The protocol acts as a standard for one's own behavior in response to external stimuli.
narrative_ontology:coordination_type(boundary_protocol, information_standard).

% Boltzmann floor override (only if domain knowledge justifies)
% Value must be in [0.0, 1.0]
% narrative_ontology:boltzmann_floor_override(boundary_protocol, [0.0-1.0]).

% Network relationships (structural influence edges)
% Declare when constraints share regulatory domain, causal dependency,
% or institutional coupling.
% narrative_ontology:affects_constraint(boundary_protocol, [other_constraint_id]).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% [RESOLVED MANDATROPHY] High extraction is definitional to the constraint's philosophical mandate, not a sign of decay or policy failure.
% ============================================================================
% CONSTRAINT STORY: self_surpassing
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-27
% ============================================================================

:- module(constraint_self_surpassing, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: self_surpassing
 * human_readable: The Rearing of the Superman (Übermensch)
 * domain: philosophical/social
 * * SUMMARY:
 * This constraint represents the imperative to overcome the "All-too-human"
 * state of the "Last Man" following the "Death of God." It functions as an
 * existential demand that requires the total transvaluation of existing
 * "slave" moral values into "master" values of power and creation. It is
 * claimed to be a "Rope" to a higher state of being, but its high demands
 * create significant perspectival gaps.
 * * KEY AGENTS:
 * - The Last Man: Subject (Powerless), finds happiness in static comfort and equality.
 * - The State ("New Idol"): Beneficiary (Institutional), seeks to replace God with a secular order.
 * - Zarathustra: Architect (Analytical), the prophet who defines the path between beast and Superman.
 * - The Higher Man: Victim (Powerful), the failed bridge-builder who suffers under modern nihilism.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Base extractiveness: High (0.8). The rearing of the Superman extracts everything
% from the individual—comfort, safety, and traditional morality.
domain_priors:base_extractiveness(self_surpassing, 0.8).

% Suppression score: High (0.7). Traditional "Good and Just" values actively
% suppress the creative will that seeks to break old tables of values.
domain_priors:suppression_score(self_surpassing, 0.7).

% Theater ratio: Low (0.1). The demand is existential and functional, not performative.
domain_priors:theater_ratio(self_surpassing, 0.1).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(self_surpassing, extractiveness, 0.8).
narrative_ontology:constraint_metric(self_surpassing, suppression_requirement, 0.7).
narrative_ontology:constraint_metric(self_surpassing, theater_ratio, 0.1).

% Constraint self-claim (what Zarathustra claims it to be)
narrative_ontology:constraint_claim(self_surpassing, coordination).

% Binary flags
domain_priors:requires_active_enforcement(self_surpassing). % Requires active will-to-power.

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(self_surpassing, posterity).
narrative_ontology:constraint_beneficiary(self_surpassing, the_superman).
narrative_ontology:constraint_victim(self_surpassing, the_last_man).
narrative_ontology:constraint_victim(self_surpassing, the_higher_man).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE LAST MAN (SUBJECT)
% To the "hop-flea" of the earth who wants only comfort, the demand for
% greatness is an incomprehensible, immutable feature of a world he rejects.
% It is a Mountain whose heights he has no desire to scale.
constraint_indexing:constraint_classification(self_surpassing, mountain,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(global))).

% PERSPECTIVE 2: THE STATE / "NEW IDOL" (BENEFICIARY)
% The institutional powers that replace God see Zarathustra's project as a
% rival value system. They would view it as a Rope they could potentially
% co-opt to coordinate their own populace, stripping it of its radical
% individualism.
constraint_indexing:constraint_classification(self_surpassing, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: ZARATHUSTRA (ANALYTICAL OBSERVER)
% The analytical view must account for the high extraction (E=0.8), high
% suppression (S=0.7), a clear coordination function (beneficiary exists),
% asymmetric extraction (victim exists), and active enforcement. This is the
% canonical definition of a Tangled Rope.
constraint_indexing:constraint_classification(self_surpassing, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

% PERSPECTIVE 4: THE HIGHER MAN (VICTIM)
% For the Higher Men (artists, kings, thinkers), traditional morality is a
% Snare. It extracts their power through pity and resentment. The demand to
% overcome it without sufficient strength becomes another Snare of inadequacy.
constraint_indexing:constraint_classification(self_surpassing, snare,
    context(agent_power(powerful),
            time_horizon(biographical),
            exit_options(constrained),
            spatial_scope(local))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(self_surpassing_tests).

test(perspectival_gap) :-
    constraint_indexing:constraint_classification(self_surpassing, mountain, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(self_surpassing, rope, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(self_surpassing, tangled_rope, context(agent_power(analytical), _, _, _)),
    constraint_indexing:constraint_classification(self_surpassing, snare, context(agent_power(powerful), _, _, _)).

test(tangled_rope_detection) :-
    % The analytical view must be Tangled Rope due to high extraction + coordination function.
    constraint_indexing:constraint_classification(self_surpassing, tangled_rope, context(agent_power(analytical), _, _, _)).

test(extraction_threshold) :-
    domain_priors:base_extractiveness(self_surpassing, Score),
    Score >= 0.46.

:- end_tests(self_surpassing_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The central tension of Zarathustra is the "type-shift" of constraints
 * based on the agent's degree of Will to Power. The original file's
 * classification of the analytical view as a 'Rope' was inconsistent with the
 * base extraction of 0.8. A pure Rope must have extraction <= 0.15.
 *
 * This version corrects the analytical classification to 'Tangled Rope', which
 * accurately reflects a system with a genuine coordination function (creating
 * the Superman) that also imposes immense costs and has clear victims (the
 * Last Man, the Higher Man).
 *
 * * PERSPECTIVAL GAP:
 * - The Last Man (powerless) sees a MOUNTAIN: the demand is incomprehensible.
 * - The Higher Man (powerful but trapped) sees a SNARE: a demand that extracts his potential.
 * - The State (institutional) sees a ROPE: a tool for social coordination it can co-opt.
 * - The Analyst (Zarathustra) sees a TANGLED ROPE: a dangerous but necessary path with both victims and beneficiaries.
 *
 * * MANDATROPHY ANALYSIS:
 * Mandatrophy is resolved because the high extraction is not a bug or a
 * sign of decay; it is the central, explicitly stated feature of the demand
 * for self-overcoming. The constraint is functioning as designed.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_eternal_recurrence,
    'Is the "Eternal Recurrence" a physical Mountain (law of physics) or a Rope (psychological tool)?',
    'Empirical validation of cosmological models vs. analysis of its function in Nietzsche''s text.',
    'If Mountain, choice is an illusion. If Rope, it is the ultimate test of Yea-saying.',
    confidence_without_resolution(low)
).

omega_variable(
    omega_superman_feasibility,
    'Is the Superman a real biological possibility or a poetic phantom?',
    'Long-term observation of human evolutionary trends and transhumanist technological outcomes.',
    'If phantom, the entire project becomes a Snare of despair. If real, it is a valid goal.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(self_surpassing, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% The philosophical demand is modeled as timeless and stable across the interval.
% Extraction is consistently high, and theatricality is consistently low.
%
% Theater ratio over time:
narrative_ontology:measurement(self_surpassing_tr_t0, self_surpassing, theater_ratio, 0, 0.1).
narrative_ontology:measurement(self_surpassing_tr_t5, self_surpassing, theater_ratio, 5, 0.1).
narrative_ontology:measurement(self_surpassing_tr_t10, self_surpassing, theater_ratio, 10, 0.1).

% Extraction over time:
narrative_ontology:measurement(self_surpassing_ex_t0, self_surpassing, base_extractiveness, 0, 0.8).
narrative_ontology:measurement(self_surpassing_ex_t5, self_surpassing, base_extractiveness, 5, 0.8).
narrative_ontology:measurement(self_surpassing_ex_t10, self_surpassing, base_extractiveness, 10, 0.8).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The philosophical nature of this constraint makes it a meta-constraint on
% value systems. It could be considered an enforcement mechanism for a new
% table of values.
narrative_ontology:coordination_type(self_surpassing, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: semiconductor_mission_2026
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-08
% ============================================================================

:- module(constraint_semiconductor_mission_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: semiconductor_mission_2026
 * human_readable: Indian Semiconductor Mission 2.0
 * domain: economic
 * * SUMMARY:
 * The Indian government's Semiconductor Mission 2.0 aims to foster domestic semiconductor manufacturing capabilities by providing financial incentives and infrastructure support. It expands the scope of the initial mission to include equipment, materials, and intellectual property, intending to reduce reliance on foreign chip suppliers and create a self-sufficient ecosystem.
 * * KEY AGENTS:
 * - Domestic Chip Manufacturers: Subject (Powerless)
 * - Government (Ministry of Electronics and IT): Beneficiary (Institutional)
 * - Global Tech Industry/Analysts: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(semiconductor_mission_2026, 0.48). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(semiconductor_mission_2026, 0.55).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(semiconductor_mission_2026, 0.30).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(semiconductor_mission_2026, extractiveness, 0.48).
narrative_ontology:constraint_metric(semiconductor_mission_2026, suppression_requirement, 0.55).
narrative_ontology:constraint_metric(semiconductor_mission_2026, theater_ratio, 0.30).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(semiconductor_mission_2026, coordination).

% Binary flags
% narrative_ontology:has_sunset_clause(semiconductor_mission_2026).      % Mandatory if Scaffold
domain_priors:requires_active_enforcement(semiconductor_mission_2026). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(semiconductor_mission_2026, indian_economy).
narrative_ontology:constraint_victim(semiconductor_mission_2026, global_chip_suppliers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE/MOUNTAIN)
% Domestic manufacturers face high compliance burdens and dependency, feeling trapped.
constraint_indexing:constraint_classification(semiconductor_mission_2026, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The government views this as essential coordination for national strategic goals.
constraint_indexing:constraint_classification(semiconductor_mission_2026, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER
% The policy has both a genuine coordination function and asymmetric extraction.
constraint_indexing:constraint_classification(semiconductor_mission_2026, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(semiconductor_mission_2026_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(semiconductor_mission_2026, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(semiconductor_mission_2026, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(threshold_validation) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(semiconductor_mission_2026, ExtMetricName, E),
    (E =< 0.05 -> true ; E >= 0.46). % Ensures it's either a Mountain or high-extraction Snare/Tangled.

test(tangled_rope_properties) :-
    % A tangled_rope classification requires these three structural properties.
    narrative_ontology:constraint_beneficiary(semiconductor_mission_2026, _), % -> has_coordination_function
    narrative_ontology:constraint_victim(semiconductor_mission_2026, _), % -> has_asymmetric_extraction
    domain_priors:requires_active_enforcement(semiconductor_mission_2026).

:- end_tests(semiconductor_mission_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * I assigned a base extractiveness of 0.48 because the mission extracts resources from taxpayers to subsidize the industry. The suppression score is 0.55 because the mission limits the choices of domestic manufacturers to use only government approved programs, and may indirectly disadvantage non-participating foreign suppliers. The theater ratio is low (0.30) because the mission seems genuinely aimed at building capacity, not just performative. The perspectival gap arises because domestic manufacturers may perceive it as a necessary intervention, but they also face limitations and compliance burdens (Snare), whereas the government views it as a strategic investment (Rope). Global chip suppliers, initially beneficiaries of the Indian market, now find their access curtailed, making them victims of asymmetric extraction. The analytical observer classifies it as Tangled Rope due to its mix of coordination (domestic capacity building) and extraction (from global suppliers and taxpayers).
 * * MANDATROPHY ANALYSIS:
 * The Tangled Rope classification prevents the system from mislabeling coordination as pure extraction by explicitly acknowledging both the coordination function (building domestic semiconductor capacity) and the asymmetric extraction (potentially harming global chip suppliers and burdening taxpayers). Without considering both aspects, the system might incorrectly classify it as a simple Rope (pure coordination) or a Snare (pure extraction). The 'requires_active_enforcement' flag indicates that the mission needs continued government intervention to maintain its goals.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_semiconductor_mission_2026,
    'Will the mission foster genuine innovation or merely create dependence on government subsidies?',
    'Longitudinal analysis of patent filings and technological advancements by participating companies.',
    'If true, strengthens domestic industry; if false, wastes taxpayer money and stifles competition.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(semiconductor_mission_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection (metric_substitution,
% extraction_accumulation) by providing measurements at multiple time points.
% Model how the constraint intensified or changed across the interval.
%
% Required for high-extraction constraints (base_extractiveness > 0.46).
% Use at least 3 time points (T=0, midpoint, T=end) for each tracked metric.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(semiconductor_mission_2026_tr_t0, semiconductor_mission_2026, theater_ratio, 0, 0.20).
narrative_ontology:measurement(semiconductor_mission_2026_tr_t5, semiconductor_mission_2026, theater_ratio, 5, 0.30).
narrative_ontology:measurement(semiconductor_mission_2026_tr_t10, semiconductor_mission_2026, theater_ratio, 10, 0.30).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(semiconductor_mission_2026_ex_t0, semiconductor_mission_2026, base_extractiveness, 0, 0.40).
narrative_ontology:measurement(semiconductor_mission_2026_ex_t5, semiconductor_mission_2026, base_extractiveness, 5, 0.45).
narrative_ontology:measurement(semiconductor_mission_2026_ex_t10, semiconductor_mission_2026, base_extractiveness, 10, 0.48).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% Valid types: information_standard, resource_allocation,
%              enforcement_mechanism, global_infrastructure
narrative_ontology:coordination_type(semiconductor_mission_2026, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: shannon_entropy_limit
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: A Mathematical Theory of Communication (C. E. Shannon, 1948)
% ============================================================================

:- module(constraint_shannon_entropy_limit, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: shannon_entropy_limit
 * human_readable: The Shannon Entropy Limit of Information Transmission
 * domain: mathematical/technological
 * temporal_scope: 1948 - Present (Civilizational)
 * spatial_scope: Universal
 * 
 * SUMMARY:
 * Shannon's theory defines the fundamental problem of communication as reproducing a message 
 * exactly or approximately. It introduces 'Entropy' (H) as a measure of 
 * uncertainty and 'Channel Capacity' (C) as the maximum rate of reliable
 * transmission. These mathematical realities act as inescapable boundaries.
 * 
 * KEY AGENTS:
 * - The Communication Engineer (Institutional): Seeks to design systems that approach the capacity limit.
 * - The Signal (Individual Powerless): A single bit or message subject to noise in the channel.
 * - The Mathematician (Analytical): Recognizes the mathematical necessity of the limits.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(shannon_entropy_limit, 0, 10).
narrative_ontology:constraint_claim(shannon_entropy_limit, mountain).

% Base extractiveness: 0.1 (Low)
% Rationale: These are laws of nature; they do not "extract" value for a specific 
% beneficiary, though they dictate the "cost" of communication.
domain_priors:base_extractiveness(shannon_entropy_limit, 0.1).

% Suppression: 0.2 (Low)
% Rationale: Alternatives (like non-logarithmic measures) are discussed but dismissed 
% based on mathematical suitability and intuition.
domain_priors:suppression_score(shannon_entropy_limit, 0.2).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(shannon_entropy_limit, extractiveness, 0.1).
narrative_ontology:constraint_metric(shannon_entropy_limit, suppression_requirement, 0.2).

% Enforcement: Emerges naturally from the statistical structure of information.
domain_priors:emerges_naturally(shannon_entropy_limit).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(shannon_entropy_limit, communication_engineers).
constraint_victim(shannon_entropy_limit, unencoded_signals).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE COMMUNICATION ENGINEER - Rope
   --------------------------------------------------------------------------
   WHO: institutional (The system designer, e.g., a telecom company)
   WHEN: biographical (Designing and deploying a communication system)
   WHERE: mobile (Can choose different coding methods to approach the limit)
   
   WHY THIS CLASSIFICATION:
   For the engineer, Shannon's theory is a 'Rope'. It provides the functional 
   coordination mechanism (encoding/decoding) to bypass the "Snare" of noise. 
   By understanding the limit, they can build efficient, reliable systems.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    shannon_entropy_limit,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE SIGNAL IN A NOISY CHANNEL - Snare
   --------------------------------------------------------------------------
   WHO: powerless (The specific message/bit traversing the channel)
   WHEN: immediate (The moment of transmission)
   WHERE: trapped (Cannot leave the channel or escape the noise)
   
   WHY THIS CLASSIFICATION:
   From the perspective of a single, unencoded message subject to noise, the limit is 
   a 'Snare'. If the information rate is too high for the channel's capacity, 
   noise "kills" the message's meaning, creating equivocation that cannot be escaped.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    shannon_entropy_limit,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE MATHEMATICIAN - Mountain
   --------------------------------------------------------------------------
   WHO: analytical (Observer of mathematical law)
   WHEN: civilizational (A law holding true across eras)
   WHERE: analytical (Applies to any system of information)
   
   WHY THIS CLASSIFICATION:
   The observer sees these limits as a 'Mountain'—an unchangeable law of the 
   universe. $H = -\sum p_i \log p_i$ is not a policy; it is a mathematical 
   certainty derived from the axioms of choice and uncertainty.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    shannon_entropy_limit,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(civilizational),
        exit_options(analytical),
        spatial_scope(global)
    )
).

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(shannon_entropy_limit_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(shannon_entropy_limit, Type1, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(shannon_entropy_limit, Type2, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(shannon_entropy_limit, Type3, context(agent_power(analytical), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3,
    Type1 \= Type3.

:- end_tests(shannon_entropy_limit_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. EXTRACTIVENESS SCORE (0.1): Mathematical laws are non-extractive. They 
 *    apply universally and do not create asymmetric benefit flows.
 * 
 * 2. PERSPECTIVES: Chose Institutional (Engineer) vs Powerless (Signal) 
 *    to highlight that while the *theory* is a Rope that enables design, the 
 *    *physical reality* of noise is a Snare for the raw data itself if the theory is ignored.
 * 
 * 3. MOUNTAIN RATIONALE: Shannon himself notes that semantic aspects are 
 *    "irrelevant to the engineering problem," emphasizing the cold, objective 
 *    'Mountain' of the mathematical structure.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * No significant Omega variables identified for this constraint, as it is a
 * closed mathematical formulation. The uncertainties lie in its application,
 * not in the theory itself.
 */

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * 
 * ALTERNATIVE 1: Hartley's Measure (H = n log S)
 *    Viability: Used before Shannon for noiseless channels.
 *    Suppression: Not suppressed, but generalized and subsumed by Shannon's statistical
 *    formulation, which could account for redundancy and noise.
 * 
 * CONCLUSION: 
 * Shannon's theory is a rare example of a 'Mountain' (a mathematical law) 
 * discovered through engineering, which then became the foundational 'Rope' 
 * for the entire digital age. It didn't suppress alternatives so much as 
 * provide a more complete, powerful framework.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/shannon_entropy_limit].
 * 2. Multi-perspective: ?- multi_index_report(shannon_entropy_limit).
 * 3. Run tests: ?- run_tests(shannon_entropy_limit_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: shitty_feedback_handling
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: Mandy Brown / cafebedouin.org, "Accept, Reframe, Or Reject"
% ============================================================================

:- module(constraint_shitty_feedback_handling, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: shitty_feedback_handling
 * human_readable: The Protocol for Handling Shitty Feedback
 * domain: social/professional
 * temporal_scope: Contemporary / Ongoing
 * spatial_scope: Organizational and Interpersonal Environments
 * 
 * SUMMARY:
 * "Shitty feedback" is a ubiquitous byproduct of social systems where feedback skills are 
 * rare. The constraint identifies the three actions available to a receiver—Accept, 
 * Reframe, or Reject—to process this external noise without losing agency.
 * 
 * KEY AGENTS:
 * - The Subordinate (Individual Powerless): Subject to a supervisor's evaluation.
 * - The Peer (Individual Moderate): Engages in feedback with a colleague of equal standing.
 * - The Corporation (Institutional): Implements a 360-degree feedback system.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(shitty_feedback_handling, 0, 10).
narrative_ontology:constraint_claim(shitty_feedback_handling, rope).

% Base extractiveness: Moderate (0.4)
% Rationale: Shitty feedback extracts emotional energy, time, and potentially 
% identity if the receiver feels forced to defend themselves or accept invalidity.
domain_priors:base_extractiveness(shitty_feedback_handling, 0.4).

% Suppression: Moderate (0.3)
% Rationale: The "natural" alternative of defensiveness is visible but actively 
% discouraged as a "rarely necessary" and ineffective reaction.
domain_priors:suppression_score(shitty_feedback_handling, 0.3).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(shitty_feedback_handling, extractiveness, 0.4).
narrative_ontology:constraint_metric(shitty_feedback_handling, suppression_requirement, 0.3).

% Enforcement: Requires active mental maintenance by the receiver.
domain_priors:requires_active_enforcement(shitty_feedback_handling).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(shitty_feedback_handling, the_receiver). % Preserves agency
constraint_victim(shitty_feedback_handling, emotional_energy). % Cognitive load of processing

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE SUBORDINATE - Snare
   --------------------------------------------------------------------------
   WHO: powerless (Subject to supervisor's evaluation)
   WHEN: immediate (High-stakes professional feedback)
   WHERE: constrained (Must maintain employment relationship)
   
   WHY THIS CLASSIFICATION:
   In a power imbalance, feedback from a supervisor acts as a 'Snare'. The 
   'Reject' option is functionally removed, forcing a performative 'Accept' 
   response ("I’ll do better") to maintain one's job, regardless of feedback quality.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    shitty_feedback_handling,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE SELF-AWARE PEER - Rope
   --------------------------------------------------------------------------
   WHO: individual_moderate (Managing personal growth with a colleague)
   WHEN: biographical (Developing lifelong feedback skills)
   WHERE: mobile (Can choose to reframe or reject input from an equal)
   
   WHY THIS CLASSIFICATION:
   For an agent with exit options and self-awareness, the protocol is a 'Rope'—a 
   beneficial tool to coordinate with the external world's perspective without 
   being crushed by it, filtering noise to find value.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    shitty_feedback_handling,
    rope,
    context(
        agent_power(individual_moderate),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE CORPORATION - Tangled Rope
   --------------------------------------------------------------------------
   WHO: institutional (Implementing a 360-review system)
   WHEN: generational (Managing the talent pool over years)
   WHERE: arbitrage (Can use feedback data to make promotion/firing decisions)
   
   WHY THIS CLASSIFICATION:
   For the corporation, a 360-review system is a 'Tangled Rope'. It's a 'Rope'
   for coordinating performance data across the organization, but it becomes
   'Tangled' because the low quality of feedback generates noise, politics, and
   demotivates employees, creating an extractive drag on the system it's meant to improve.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    shitty_feedback_handling,
    tangled_rope,
    context(
        agent_power(institutional),
        time_horizon(generational),
        exit_options(arbitrage),
        spatial_scope(national)
    )
).

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(shitty_feedback_handling_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(shitty_feedback_handling, Type1, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(shitty_feedback_handling, Type2, context(agent_power(individual_moderate), _, _, _)),
    constraint_indexing:constraint_classification(shitty_feedback_handling, Type3, context(agent_power(institutional), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3,
    Type1 \= Type3.

:- end_tests(shitty_feedback_handling_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. INSTITUTIONAL PERSPECTIVE: Added 'The Corporation' to represent how feedback,
 *    even shitty feedback, is institutionalized as a 'Tangled Rope'—a tool for
 *    coordination that has negative, extractive side effects.
 *
 * 2. CLASSIFICATION RATIONALE:
 *    - Subordinate (Snare): Power forces acceptance.
 *    - Peer (Rope): A filter for personal growth.
 *    - Corporation (Tangled Rope): A useful data-gathering tool that also creates organizational drag.
 * 
 * 3. EXTRACTIVENESS (0.4): This score reflects the cognitive and emotional load
 *    required to process worthless or malicious commentary, which is a real cost
 *    even if no money changes hands.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * The core uncertainty is whether bad feedback is an accident or a feature.
 */

omega_variable(
    shitty_feedback_intent,
    "Is shitty feedback a byproduct of low skill and poor incentives (Mountain/Noise) or a predatory attempt to destabilize the subject (Snare)?",
    resolution_mechanism("Audit of a feedback giver's history vs. the receiver's subsequent performance metrics and well-being."),
    impact("If noise: protocol is a Rope. If predatory: protocol must shift to pure Rejection/Snare-avoidance."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * 
 * ALTERNATIVE 1: Defensiveness / Counter-Criticism
 *    Viability: This is the default, "natural" human reaction to perceived attack.
 *    Suppression: Discouraged by the protocol as "rarely necessary" and ineffective for being "taken seriously".
 * 
 * CONCLUSION:
 * The protocol of 'Accept, Reframe, Reject' is a learned 'Rope' that an agent uses to
 * manage the environmental 'Mountain' of constant, low-quality feedback. It suppresses
 * our natural defensive reaction in favor of a more strategic, self-protective one.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/shitty_feedback_handling].
 * 2. Multi-perspective: ?- multi_index_report(shitty_feedback_handling).
 * 3. Run tests: ?- run_tests(shitty_feedback_handling_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: shobies_existential_commitment
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-22
% ============================================================================

:- module(constraint_shobies_existential_commitment, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: shobies_existential_commitment
 * human_readable: The Risk-Safety Paradox
 * domain: social/existential
 * * SUMMARY:
 * From Ursula K. Le Guin's "The Shobies' Story," this constraint defines a state where safety and functionality are paradoxically dependent on total existential risk. It posits that "nothing works" unless an agent commits their "soul" to it, and that "nothing’s safe" except that which has been put at risk. This creates a high-stakes coordination problem where individual security must be sacrificed for collective success.
 * * KEY AGENTS:
 * - The Cautious Individual: Subject (Powerless) who feels their autonomy and safety extracted by the demand for total commitment.
 * - The Project Collective: Beneficiary (Institutional) for whom this total commitment is the essential coordination mechanism for success.
 * - The Sage/Narrator: Auditor (Analytical) who observes the structure of this paradox.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
% Rationale: High (0.65). The constraint requires agents to "stake everything" and "give our souls". This is a severe extraction of individual autonomy and security.
domain_priors:base_extractiveness(shobies_existential_commitment, 0.65).
% Rationale: Moderate (0.5). The claim "nothing works except..." suppresses the validity of low-risk, low-commitment alternatives, framing them as fundamentally broken.
domain_priors:suppression_score(shobies_existential_commitment, 0.5).
% Rationale: Low (0.1). The constraint is described as highly functional, not performative. The commitment is real, not theatrical.
domain_priors:theater_ratio(shobies_existential_commitment, 0.1).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(shobies_existential_commitment, extractiveness, 0.65).
narrative_ontology:constraint_metric(shobies_existential_commitment, suppression_requirement, 0.5).
narrative_ontology:constraint_metric(shobies_existential_commitment, theater_ratio, 0.1).

% Constraint self-claim (what does the constraint claim to be?)
% It claims to be a fundamental mechanism for achieving results.
narrative_ontology:constraint_claim(shobies_existential_commitment, coordination).

% Binary flags
% The commitment is an internal, psychological enforcement mechanism.
domain_priors:requires_active_enforcement(shobies_existential_commitment).

% Structural property derivation hooks:
% The collective project "works" because of the commitment.
narrative_ontology:constraint_beneficiary(shobies_existential_commitment, project_collective).
% The individual's desire for low-risk safety is sacrificed.
narrative_ontology:constraint_victim(shobies_existential_commitment, individual_autonomy).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE CAUTIOUS INDIVIDUAL (SNARE)
% For the uncommitted or fearful agent, this is a Snare. The requirement to
% "stake everything" feels like total extraction, strangling their sense of
% safety until they surrender their autonomy.
constraint_indexing:constraint_classification(shobies_existential_commitment, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE PROJECT COLLECTIVE (ROPE)
% From the institutional perspective of the project, the crew's total
% commitment is the fundamental coordination mechanism (Rope) that makes
% an impossible mission viable. The high stakes are not a bug, but the
% feature that guarantees cohesion.
constraint_indexing:constraint_classification(shobies_existential_commitment, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees a structure with a genuine coordination function (the
% project succeeds) but also severe, asymmetric extraction (individuals must
% sacrifice autonomy). It requires active enforcement (internal commitment).
% This combination of coordination and extraction is a Tangled Rope.
constraint_indexing:constraint_classification(shobies_existential_commitment, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(shobies_existential_commitment_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(shobies_existential_commitment, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(shobies_existential_commitment, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(threshold_validation_high_extraction) :-
    % Verify this is correctly identified as a high-extraction constraint.
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(shobies_existential_commitment, ExtMetricName, E),
    E >= 0.46.

test(tangled_rope_conditions_met) :-
    % Verify the analytical observer correctly sees a Tangled Rope.
    constraint_indexing:constraint_classification(shobies_existential_commitment, tangled_rope, context(agent_power(analytical), _, _, _)).

:- end_tests(shobies_existential_commitment_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The core of this constraint is the perspectival gap between the individual and the collective. For the 'powerless' individual, the demand to "give your soul" is a coercive Snare with no safe alternative. For the 'institutional' collective, this same demand is the Rope that binds the group and ensures mission success.
 *
 * The analytical observer's classification was changed from 'Mountain' to 'Tangled Rope'. A Mountain requires base extraction <= 0.15; at 0.65, this constraint is far too extractive. The system correctly identifies it as a Tangled Rope because it meets all three criteria: it has a coordination function (beneficiary exists), asymmetric extraction (victim exists), and requires active enforcement. This prevents the system from misclassifying a constructed, high-cost social contract as a law of nature.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The Tangled Rope classification is the key to resolving mandatrophy. It acknowledges that the constraint *does* perform a vital coordination function (making things "work") while simultaneously recognizing the severe extraction imposed on its subjects. It is neither a pure Rope (ignoring the cost) nor a pure Snare (ignoring the function).
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% Is the paradox a fundamental law or a constructed narrative to enforce cohesion?
omega_variable(
    omega_shobies_existential_commitment,
    "Is the causal link between total risk and functional safety a physical/metaphysical law (Mountain-like), or is it a socially constructed belief system (Tangled Rope) used to justify extreme demands?",
    "Empirical comparison of project success rates in 'total risk' vs 'mitigated risk' environments across different cultural contexts.",
    "If it is a law, the constraint is a Mountain and the high extraction is an unavoidable cost of reality. If it is constructed, it is a Tangled Rope that could potentially be replaced by a less extractive coordination mechanism.",
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(shobies_existential_commitment, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data for this high-extraction constraint (E=0.65).
% The model assumes this is a stable, perennial constraint, so the values
% do not drift over the interval.

% Theater ratio over time (stable and low):
narrative_ontology:measurement(shobies_tr_t0, shobies_existential_commitment, theater_ratio, 0, 0.1).
narrative_ontology:measurement(shobies_tr_t5, shobies_existential_commitment, theater_ratio, 5, 0.1).
narrative_ontology:measurement(shobies_tr_t10, shobies_existential_commitment, theater_ratio, 10, 0.1).

% Extraction over time (stable and high):
narrative_ontology:measurement(shobies_ex_t0, shobies_existential_commitment, base_extractiveness, 0, 0.65).
narrative_ontology:measurement(shobies_ex_t5, shobies_existential_commitment, base_extractiveness, 5, 0.65).
narrative_ontology:measurement(shobies_ex_t10, shobies_existential_commitment, base_extractiveness, 10, 0.65).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The coordination relies on enforcing a state of mind (total commitment).
narrative_ontology:coordination_type(shobies_existential_commitment, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: silicon_lexicon_overload
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-22
% ============================================================================

:- module(constraint_silicon_lexicon_overload, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: silicon_lexicon_overload
 * human_readable: The Silicon Lexicon (Corporate Tech-Speak)
 * domain: linguistic/technological/social
 * * SUMMARY:
 * The specialized jargon of the tech industry (e.g., "bandwidth," "alignment," "synergy") has escaped its original context and become a mandatory social and professional protocol in many corporate environments. It functions as a powerful tool that standardizes communication for efficiency but also extracts human nuance, rebranding complex emotional and social states as machine-like inputs and outputs. Failure to adopt this lexicon results in professional marginalization.
 * * KEY AGENTS:
 * - Employees: Subject (Powerless)
 * - Corporate Management: Beneficiary (Institutional)
 * - Linguistic Analyst: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(silicon_lexicon_overload, 0.80). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(silicon_lexicon_overload, 0.70).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(silicon_lexicon_overload, 0.10).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(silicon_lexicon_overload, extractiveness, 0.80).
narrative_ontology:constraint_metric(silicon_lexicon_overload, suppression_requirement, 0.70).
narrative_ontology:constraint_metric(silicon_lexicon_overload, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(silicon_lexicon_overload, coordination).

% Binary flags
domain_priors:requires_active_enforcement(silicon_lexicon_overload). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(silicon_lexicon_overload, corporate_management).
narrative_ontology:constraint_victim(silicon_lexicon_overload, employees).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For an employee, the lexicon is a coercive trap. Being told you lack "bandwidth"
% for a family emergency is a direct application of the lexicon as an extractive tool,
% translating human needs into a language of system failure.
constraint_indexing:constraint_classification(silicon_lexicon_overload, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For management, the lexicon is a pure coordination tool. It creates a high-speed,
% low-friction communication protocol to align thousands of individuals towards a
% singular goal, appearing as essential infrastructure for efficiency.
constraint_indexing:constraint_classification(silicon_lexicon_overload, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees both functions. The lexicon is a Tangled Rope: it provides a
% genuine coordination benefit (Rope aspect) but achieves it through coercive
% suppression of other linguistic modes, enabling asymmetric extraction of value
% from employees (Snare aspect).
constraint_indexing:constraint_classification(silicon_lexicon_overload, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(silicon_lexicon_overload_tests).

test(perspectival_gap_rope_snare) :-
    % Verify the core perspectival gap between the powerless and institutional views.
    constraint_indexing:constraint_classification(silicon_lexicon_overload, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(silicon_lexicon_overload, rope, context(agent_power(institutional), _, _, _)).

test(analytical_resolution_is_tangled_rope) :-
    % Verify the analytical observer correctly identifies the hybrid nature.
    constraint_indexing:constraint_classification(silicon_lexicon_overload, tangled_rope, context(agent_power(analytical), _, _, _)).

test(tangled_rope_structural_requirements_met) :-
    % A Tangled Rope requires enforcement, a beneficiary (for coordination), and a victim (for extraction).
    domain_priors:requires_active_enforcement(silicon_lexicon_overload),
    narrative_ontology:constraint_beneficiary(silicon_lexicon_overload, _),
    narrative_ontology:constraint_victim(silicon_lexicon_overload, _).

:- end_tests(silicon_lexicon_overload_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness (0.80) and suppression (0.70) are high because the lexicon isn't just a set of words; it's a cognitive framework that actively devalues and displaces other ways of knowing and communicating (e.g., emotional, intuitive, poetic). It extracts value by forcing human experience into a machine-readable format optimized for corporate productivity metrics.
 * The Perspectival Gap is stark: what is a tool of efficient coordination (Rope) for management is a tool of dehumanizing coercion (Snare) for employees.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The high extraction score (0.80) creates a Mandatrophy risk, where the system might incorrectly label a useful coordination tool as pure extraction. This is resolved by the Analytical Observer's classification of the constraint as a 'Tangled Rope'. This classification formally acknowledges that the constraint possesses BOTH a genuine coordination function (the Rope aspect valued by beneficiaries) AND a severe, asymmetric extractive function (the Snare aspect felt by victims). The system does not have to choose; it recognizes the hybrid nature, resolving the paradox.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_silicon_lexicon_overload,
    'Is the lexicon a deliberately engineered control system (Snare) or a naturally emergent linguistic phenomenon of a technological society that was later co-opted (Mountain -> Snare)?',
    'Historical linguistic analysis tracking the origin of key jargon from technical papers into corporate mission statements and HR policy.',
    'If engineered, it is a tool of social control. If emergent and co-opted, it reflects a deeper cultural shift where society voluntarily adopts machine-like cognition.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(silicon_lexicon_overload, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data for this high-extraction constraint shows its intensification.
% Initially a niche jargon (low extraction), it became a global corporate standard
% (high extraction) over the interval. Theater remains low as it is highly functional.

% Theater ratio over time (metric_substitution detection):
narrative_ontology:measurement(slo_tr_t0, silicon_lexicon_overload, theater_ratio, 0, 0.05).
narrative_ontology:measurement(slo_tr_t5, silicon_lexicon_overload, theater_ratio, 5, 0.10).
narrative_ontology:measurement(slo_tr_t10, silicon_lexicon_overload, theater_ratio, 10, 0.10).

% Extraction over time (extraction_accumulation detection):
narrative_ontology:measurement(slo_ex_t0, silicon_lexicon_overload, base_extractiveness, 0, 0.30).
narrative_ontology:measurement(slo_ex_t5, silicon_lexicon_overload, base_extractiveness, 5, 0.65).
narrative_ontology:measurement(slo_ex_t10, silicon_lexicon_overload, base_extractiveness, 10, 0.80).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The lexicon is a standard for information exchange.
narrative_ontology:coordination_type(silicon_lexicon_overload, information_standard).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: silver_scarcity_mountain_2026
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2026-02-06
% ============================================================================

:- module(constraint_silver_scarcity, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: silver_scarcity_2026
 * human_readable: The Silver Physical Scarcity Mountain
 * domain: economic/industrial/geopolitical
 * * SUMMARY:
 * By February 2026, silver has been designated a "Critical Mineral" by the USGS. 
 * A structural deficit of ~95-200 million ounces—the sixth consecutive year of shortfall—
 * has transformed the silver market from a speculative arena into a physical Mountain. 
 * Because 75% of silver is mined as a byproduct (copper/lead/zinc), the supply is 
 * price-inelastic, creating an irreducible limit for the green energy transition.
 * * KEY AGENTS:
 * - PV/EV Manufacturers: Subject (Powerless) - Unable to substitute silver in high-conductive paths.
 * - Sovereign Entities: Beneficiary (Institutional) - Stockpiling strategic reserves.
 * - Market Analysts: Auditor (Analytical) - Observing the 528M oz paper-to-113M oz physical disconnect.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(silver_scarcity_2026, 0.04). % Low extraction as it is a natural/physical limit.
domain_priors:suppression_score(silver_scarcity_2026, 0.95).   % Near-total suppression of alternatives (no substitutes).
domain_priors:theater_ratio(silver_scarcity_2026, 0.40).       % Primarily functional scarcity, though strategic theater is rising.

% Metric keys for the system
narrative_ontology:constraint_metric(silver_scarcity_2026, extractiveness, 0.04).
narrative_ontology:constraint_metric(silver_scarcity_2026, suppression_requirement, 0.95).
narrative_ontology:constraint_metric(silver_scarcity_2026, theater_ratio, 0.40).

% Identification of extraction targets (Manufacturers facing the "Shortage")
narrative_ontology:constraint_victim(silver_scarcity_2026, industrial_consumers).
narrative_ontology:constraint_beneficiary(silver_scarcity_2026, strategic_stockpilers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE INDUSTRIAL USER (MOUNTAIN)
% Effective Extraction: 0.04 * 1.5 (powerless) * 1.2 (global) = 0.072.
% χ <= 0.05 is the threshold for Mountain. The physical limit is felt as an unchangeable law.
constraint_indexing:constraint_classification(silver_scarcity_2026, mountain, 
    context(agent_power(powerless), 
            time_horizon(generational), 
            exit_options(trapped), 
            spatial_scope(global))).

% PERSPECTIVE 2: THE SOVEREIGN STATE (MOUNTAIN/ROPE)
% Viewed as a strategic foundation for national security.
constraint_indexing:constraint_classification(silver_scarcity_2026, mountain, 
    context(agent_power(institutional), 
            time_horizon(civilizational), 
            exit_options(mobile), 
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER
constraint_indexing:constraint_classification(silver_scarcity_2026, mountain,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(silver_scarcity_2026_tests).

test(mountain_verification) :-
    % Mountains must have low effective extraction (<= 0.05) and high suppression.
    narrative_ontology:constraint_metric(silver_scarcity_2026, extractiveness, E),
    domain_priors:suppression_score(silver_scarcity_2026, S),
    E =< 0.05,
    S >= 0.90.

test(substitution_suppression) :-
    % Verify that industrial agents are 'trapped' with no alternatives.
    constraint_indexing:constraint_classification(silver_scarcity_2026, mountain, context(_, _, exit_options(trapped), _)).

:- end_tests(silver_scarcity_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The Silver Scarcity is classified as a Mountain because its primary 
 * driver is a multi-year physical production peak (2016) colliding with 
 * exponential industrial demand. Unlike a Snare, the 
 * "extraction" isn't a policy choice but a physical limit ($E=0.04$). 
 * The extreme suppression (0.95) reflects the fact that silver is the 
 * most conductive element; substitution in solar PV or AI semiconductors 
 * results in performance failure.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_byproduct_elasticity,
    'Will a massive surge in copper/zinc mining (due to high prices) resolve the silver deficit?',
    'Review of 2026 global base-metal capex and byproduct silver yield.',
    'Elastic supply reverts the Mountain to a Rope; Inelasticity hardens the Mountain.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(silver_scarcity_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Theater ratio (Tracking the shift from market trade to strategic stockpiling)
narrative_ontology:measurement(sv_tr_t0, silver_scarcity_2026, theater_ratio, 0, 0.25).
narrative_ontology:measurement(sv_tr_t5, silver_scarcity_2026, theater_ratio, 5, 0.40).
narrative_ontology:measurement(sv_tr_t10, silver_scarcity_2026, theater_ratio, 10, 0.55).

% Base Extraction (Remains low as this is a physical constraint, not a rent-seeking one)
narrative_ontology:measurement(sv_be_t0, silver_scarcity_2026, base_extractiveness, 0, 0.04).
narrative_ontology:measurement(sv_be_t5, silver_scarcity_2026, base_extractiveness, 5, 0.04).
narrative_ontology:measurement(sv_be_t10, silver_scarcity_2026, base_extractiveness, 10, 0.05).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: skills_based_hiring
% ============================================================================
% Generated: 2026-01-17
% Model: Gemini 2.0 Flash
% Source: Market Design / Labor Economics / Skills-Based Hiring Trends
% ============================================================================

:- module(constraint_skills_based_hiring, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: skills_based_hiring
 * human_readable: Skills-Based Hiring (De-credentialing)
 * domain: economic/technological/social
 * temporal_scope: Biographical to Historical
 * spatial_scope: Global
 * * SUMMARY:
 * Skills-based hiring is a matching market shift where employers prioritize 
 * specific competencies and verified "proof of work" over traditional degree 
 * credentials. This moves the bottleneck from "Institutional Pedigree" 
 * (College Match) to "Granular Verification" (Skill Match).
 * * KEY AGENTS:
 * - The Non-Degree Applicant: Gains access to elite roles via technical proof.
 * - The Credentialed Elite: Faces devaluation of their institutional pedigree.
 * - The Automated Evaluator: AI/Platform tools that score specific skills.
 * * NARRATIVE ARC:
 * The constraint functions as a "Demolished Wall." By removing the degree 
 * requirement, the market "thins" the power of elite universities. However, 
 * it replaces the "Degree Snare" with a "Continuous Testing Snare," where 
 * agents must constantly prove their worth in a granular, high-frequency match.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (Reality Layer)
   ========================================================================== */

narrative_ontology:interval(skills_based_hiring, 0, 10).
narrative_ontology:constraint_claim(skills_based_hiring, rope).

% Base extractiveness score (0.3)
% Lower than college admissions because it reduces the "pre-match" cost of 
% expensive degrees, though platform fees for certification may emerge.
domain_priors:base_extractiveness(skills_based_hiring, 0.3).

% Suppression score (0.2)
% Low suppression; it encourages a plurality of paths (bootcamps, self-taught).
domain_priors:suppression_score(skills_based_hiring, 0.2).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(skills_based_hiring, extractiveness, 0.3).
narrative_ontology:constraint_metric(skills_based_hiring, suppression_requirement, 0.2).

% Enforcement requirements
domain_priors:emerges_naturally(skills_based_hiring). % Driven by labor scarcity

% Metrics
% BENEFICIARIES & VICTIMS
constraint_beneficiary(skills_based_hiring, self_taught_experts).
constraint_victim(skills_based_hiring, mid_tier_liberal_arts_colleges).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE NON-DEGREE APPLICANT - Rope
   --------------------------------------------------------------------------
   WHO: individual_moderate (empowered by skill proof)
   WHEN: biographical
   WHERE: mobile (can work for multiple firms based on skill proof)
   SCOPE: global
   
   WHY THIS CLASSIFICATION:
   For the self-taught or non-traditional student, skills-based hiring is 
   a "Rope." It is the first coordination mechanism that allows them to 
   climb into high-wage labor markets without the $100k "pay-to-play" 
   entry fee of a degree.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    skills_based_hiring,
    rope,
    context(
        agent_power(individual_moderate),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :-
    domain_priors:suppression_score(skills_based_hiring, S),
    S < 0.4,
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE MID-TIER GRADUATE - Snare
   --------------------------------------------------------------------------
   WHO: powerless (pedigree is no longer a shield)
   WHEN: immediate
   WHERE: trapped (stuck with debt for a devalued credential)
   SCOPE: national
   
   WHY THIS CLASSIFICATION:
   For someone who relied on their degree for market access, this shift 
   is a "Snare." Their primary constraint (the degree) has been 
   demoted, forcing them into a high-competition skill-arena where 
   their "institutional signal" no longer grants them a safe exit or 
   premium wage.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    skills_based_hiring,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(national)
    )
) :-
    true.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE HR ALGORITHM - Mountain
   --------------------------------------------------------------------------
   WHO: institutional/analytical
   WHEN: historical
   WHERE: analytical
   SCOPE: global
   
   WHY THIS CLASSIFICATION:
   To the automated system, skills are "Mountains." Data is the only 
   reality. A candidate either has the verified Python competency or 
   they do not. The algorithm views the match as a cold, immutable 
   binary filter of capacity.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    skills_based_hiring,
    mountain,
    context(
        agent_power(institutional),
        time_horizon(historical),
        exit_options(analytical),
        spatial_scope(global)
    )
) :-
    domain_priors:emerges_naturally(skills_based_hiring),
    !.

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(skills_hiring_tests).

test(pedigree_devaluation) :-
    % Testing that 'trapped' traditional grads experience the shift as a Snare.
    constraint_indexing:constraint_classification(skills_based_hiring, snare, context(_, _, trapped, _)).

test(access_rope) :-
    % Testing that mobile, skill-heavy agents see the Rope.
    constraint_indexing:constraint_classification(skills_based_hiring, rope, context(_, _, mobile, _)).

:- end_tests(skills_hiring_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * * KEY DECISIONS:
 * Skills-based hiring is a "de-matching" of the traditional 
 * University-Employer pipeline. It reduces extraction by decreasing the 
 * "entry fee" (Degrees), but increases the "monitoring pressure" (Snare) 
 * as workers must continuously prove their skills in an AI-gated market.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω)
   ========================================================================== */

omega_variable(
    skill_obsolescence_rate,
    "How fast will AI-driven tools make specific human skills obsolete?",
    resolution_mechanism("Tracking half-life of technical certifications in LinkedIn data"),
    impact("If High: The 'Rope' is constantly breaking; the 'Snare' of re-skilling tightens."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: skolems_paradox
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Thoralf Skolem (1922) / Set Theory / Model Theory
% ============================================================================

:- module(constraint_skolems_paradox, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: skolems_paradox
 * human_readable: Skolem's Paradox (The Relativity of Cardinality)
 * domain: technological/logic/mathematics
 * temporal_scope: Permanent (Universal Laws of Formal Systems)
 * spatial_scope: Global (Mathematical Foundations)
 * * SUMMARY:
 * Skolem's Paradox arises from the Downward Löwenheim–Skolem theorem, which states 
 * that if a first-order theory (like ZFC) has an infinite model, it has a 
 * countable model. The "paradox" is that ZFC proves the existence of 
 * uncountable sets, yet it must have a model where every set is countable 
 * from the outside.
 * * KEY AGENTS:
 * - The Absolutist: Seeking an absolute, "true" universe of sets.
 * - The Model Theorist: Utilizing the relativity of models to explore 
 * different mathematical structures.
 * - The Formal System (First-Order Logic): The medium that imposes the 
 * constraint of countability.
 * * NARRATIVE ARC:
 * The paradox functions as a hard limit on the expressive power of first-order 
 * language (Mountain). For those building meta-theories, it is a tool (Rope) 
 * for distinguishing between internal and external perspectives. For the 
 * Platonist, it is a Snare that prevents the formalization of a unique, 
 * absolute mathematical reality.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for structural anchor
narrative_ontology:interval(skolems_paradox_interval, 0, 10).
narrative_ontology:constraint_claim(skolems_paradox, snare).

% Base extractiveness score (0.0-1.0)
% Rationale: Low. It extracts "absoluteness" from mathematical claims but 
% doesn't extract resources; it primarily forces a shift to meta-logic.
domain_priors:base_extractiveness(skolems_paradox, 0.2).

% Suppression score (0.0-1.0)
% Rationale: Moderate. Alternatives like second-order logic are well-known 
% but suppressed in foundational debates due to their lack of completeness.
domain_priors:suppression_score(skolems_paradox, 0.4).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(skolems_paradox, extractiveness, 0.2).
narrative_ontology:constraint_metric(skolems_paradox, suppression_requirement, 0.4).

% Enforcement: Emerges naturally from the structure of first-order logic.
domain_priors:emerges_naturally(skolems_paradox).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(skolems_paradox, model_theorists).
constraint_victim(skolems_paradox, mathematical_absolutists).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE ANALYTICAL OBSERVER - MOUNTAIN
   --------------------------------------------------------------------------
   
   WHO: analytical - Observer of universal logical laws.
   WHEN: civilizational - Operates on the scale of eternal mathematical truth.
   WHERE: trapped - Logic cannot bypass the Downward Löwenheim–Skolem theorem.
   SCOPE: global - Universal applicability.
   
   WHY THIS CLASSIFICATION:
   To the analytical observer, the paradox is a Mountain. It is an unchangeable 
   feature of the landscape of formal systems. It demonstrates a permanent 
   gap between what can be "said" in a language and what "is" in a model.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    skolems_paradox,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(civilizational),
        exit_options(trapped),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE META-MATHEMATICIAN - ROPE
   --------------------------------------------------------------------------
   
   WHO: institutional - Rule-making power that defines the meta-theory.
   WHEN: biographical - Achieving goals within a professional lifetime.
   WHERE: arbitrage - Can move between the internal model and the meta-model.
   SCOPE: national - Specific to the formal ecosystem.
   
   WHY THIS CLASSIFICATION:
   For the meta-mathematician, the paradox is a Rope. It is a coordination 
   mechanism that allows for the precise definition of "relativity." It 
   provides the ladder to climb from the object-language to the meta-language 
   without falling into contradiction.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    skolems_paradox,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(arbitrage),
        spatial_scope(national)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE PLATONIC IDEALIST - SNARE
   --------------------------------------------------------------------------
   
   WHO: powerless - Subject to the rules of logic.
   WHEN: immediate - The current attempt to find absolute truth.
   WHERE: trapped - The formal system is the only venue for proof.
   SCOPE: local - Immediate workspace.
   
   WHY THIS CLASSIFICATION:
   For the idealist seeking a unique "True Universe of Sets," the paradox is 
   a Snare. Every attempt to specify the "Absolute" is strangled by the fact 
   that a countable model can always be found that "mimics" the uncountable 
   properties, rendering their absolute claims relative.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    skolems_paradox,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(skolems_paradox_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(skolems_paradox, T1, context(agent_power(analytical), _, _, _)),
    constraint_indexing:constraint_classification(skolems_paradox, T2, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(skolems_paradox, T3, context(agent_power(powerless), _, _, _)),
    T1 \= T2, T2 \= T3.

test(power_extractiveness_relativity) :-
    % Powerless idealists experience total extraction of absoluteness (Snare).
    % Institutional meta-theorists leverage the relativity (Rope).
    domain_priors:base_extractiveness(skolems_paradox, Score),
    Score >= 0.2.

test(time_immutability_scale) :-
    % Long-term civilizational logic = Mountain.
    constraint_indexing:effective_immutability(civilizational, trapped, mountain).

:- end_tests(skolems_paradox_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * * KEY DECISIONS:
 * 1. EXTRACTIVENESS (0.2): The paradox doesn't take physical wealth, but it 
 * extracts "semantic certainty." It forces a move to meta-theory, which is 
 * an energy/cognitive cost.
 * 2. PERSPECTIVE SELECTION: Analyst (Mountain), Meta-Theorist (Rope), and 
 * Idealist (Snare) provide the necessary spread to show how a logical truth 
 * behaves differently based on agent intent.
 * 3. SNARE ARGUMENT: The "Snare" for the idealist is the inability to fix 
 * a reference to an absolute reality within a formal system.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    standard_model_existence,
    "Is there a privileged 'Standard Model' of Set Theory that is not relative, or is reality an infinite sea of models?",
    resolution_mechanism("Discovery of higher-order logical principles that define a unique universe"),
    impact("If Unique: Skolem's Paradox is a Rope. If Infinite Sea: It is a permanent Snare."),
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Second-Order Logic
 * Viability: Prevents Skolem's Paradox by allowing quantification over sets.
 * Suppression: High. Second-order logic lacks completeness and compactness, 
 * leading logicians to prefer the "cleaner" but "relative" first-order logic.
 * * CONCLUSION:
 * The existence of Second-Order logic as a potential (but discarded) Rope 
 * confirms that the First-Order "Mountain" is a chosen constraint of the 
 * mathematical community.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 1. Load: ?- [constraint_skolems_paradox].
 * 2. Multi-perspective: ?- multi_index_report(skolems_paradox).
 * 3. Run tests: ?- run_tests(skolems_paradox_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: sludge_bureaucratic_friction
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_sludge_bureaucratic_friction, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: sludge_bureaucratic_friction
 * human_readable: Sludge (Intentional Administrative Friction)
 * domain: political/economic
 * * SUMMARY:
 * "Sludge" describes intentional administrative burdens—excessive paperwork, long wait times, complex requirements—that create friction, discouraging access to benefits, rights, or services. It functions as a non-obvious barrier, extracting time, cognitive load, and psychological well-being from applicants, often to control costs or limit participation without explicitly denying access.
 * * KEY AGENTS:
 * - The Applicant: Subject (Powerless) attempting to access a benefit (e.g., social services, rebates).
 * - The Institution: Beneficiary (Institutional) that saves resources or controls demand via the friction.
 * - The Policy Analyst: Auditor (Analytical) observing the system's dual function of providing and throttling access.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(sludge_bureaucratic_friction, 0.70). % High; extracts time, effort, and opportunity cost.
domain_priors:suppression_score(sludge_bureaucratic_friction, 0.60).   % Moderate-high; alternatives are suppressed by making the official channel prohibitively costly.
domain_priors:theater_ratio(sludge_bureaucratic_friction, 0.10).       % Low; the friction is highly functional for its purpose (throttling), not performative.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(sludge_bureaucratic_friction, extractiveness, 0.70).
narrative_ontology:constraint_metric(sludge_bureaucratic_friction, suppression_requirement, 0.60).
narrative_ontology:constraint_metric(sludge_bureaucratic_friction, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% It claims to be a necessary process for due diligence and fraud prevention.
narrative_ontology:constraint_claim(sludge_bureaucratic_friction, enforcement).

% Binary flags
domain_priors:requires_active_enforcement(sludge_bureaucratic_friction). % Required for Tangled Rope. The rules must be actively maintained.

% Structural property derivation hooks:
% Both beneficiary and victim are required for Tangled Rope.
narrative_ontology:constraint_beneficiary(sludge_bureaucratic_friction, budget_controlling_institutions).
narrative_ontology:constraint_victim(sludge_bureaucratic_friction, resource_constrained_applicants).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   ========================================================================== */

% PERSPECTIVE 1: THE APPLICANT (SNARE)
% For someone needing a benefit, the friction is a trap that drains their
% limited resources (time, energy, money) with no guarantee of success.
constraint_indexing:constraint_classification(sludge_bureaucratic_friction, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE INSTITUTION (ROPE)
% From the institution's view, the process is a necessary coordination tool
% (a Rope) to manage demand, ensure compliance, and prevent fraud, thereby
% preserving the integrity and budget of the program.
constraint_indexing:constraint_classification(sludge_bureaucratic_friction, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees both functions: a genuine coordination goal (managing a
% program) intertwined with asymmetric extraction (cost-shifting onto the
% most vulnerable). It requires active enforcement to maintain this balance.
constraint_indexing:constraint_classification(sludge_bureaucratic_friction, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(sludge_bureaucratic_friction_tests).

test(perspectival_gap) :-
    constraint_indexing:constraint_classification(sludge_bureaucratic_friction, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(sludge_bureaucratic_friction, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    assertion(TypePowerless == snare),
    assertion(TypeInstitutional == rope),
    assertion(TypePowerless \= TypeInstitutional).

test(analytical_classification_is_tangled_rope) :-
    constraint_indexing:constraint_classification(sludge_bureaucratic_friction, tangled_rope, context(agent_power(analytical), _, _, _)).

test(threshold_validation_for_high_extraction) :-
    narrative_ontology:constraint_metric(sludge_bureaucratic_friction, extractiveness, E),
    assertion(E >= 0.46).

:- end_tests(sludge_bureaucratic_friction_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness (0.70) is high because sludge's primary function is to
 * extract non-monetary resources (time, cognitive load, emotional energy) from
 * applicants, which translates to monetary savings for the institution. The
 * suppression score (0.60) reflects that while alternative paths are not
 * legally forbidden, the sludge makes the official path so costly that it
 * effectively suppresses access.
 *
 * The Perspectival Gap is stark:
 * - The Applicant (powerless, trapped) experiences this as a pure Snare. The
 *   process is the punishment.
 * - The Institution (institutional, mobile) views it as a Rope, a necessary
 *   coordination mechanism for fiscal responsibility and program integrity.
 *
 * * MANDATROPHY ANALYSIS:
 * The Analytical classification is Tangled Rope. This is critical because it
 * prevents misclassification as a pure Snare. A pure Snare has no redeeming
 * coordination function. Sludge, however, is built upon a legitimate
 * coordination need (vetting applicants, managing a budget), but this need is
 * used to justify a highly extractive and asymmetric implementation. The
 * Tangled Rope classification correctly identifies this duality.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_sludge_bureaucratic_friction,
    'Is the high level of friction an intentional design for cost-control (Tangled Rope) or an emergent property of unmanaged institutional complexity and risk aversion (Piton)?',
    'Internal policy memos, budget allocation models, and records of simplification initiatives being rejected.',
    'If intentional, it is a Tangled Rope. If emergent and unmanaged, it is a system drifting towards being a Piton, where the original function is lost to inertial friction.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(sludge_bureaucratic_friction, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data models the intensification of sludge over time, as initial
% due-diligence requirements accrete into significant barriers. This is a
% classic extraction_accumulation drift pattern.
%
% Theater ratio over time (remains low and functional):
narrative_ontology:measurement(sbf_tr_t0, sludge_bureaucratic_friction, theater_ratio, 0, 0.10).
narrative_ontology:measurement(sbf_tr_t5, sludge_bureaucratic_friction, theater_ratio, 5, 0.10).
narrative_ontology:measurement(sbf_tr_t10, sludge_bureaucratic_friction, theater_ratio, 10, 0.10).

% Extraction over time (increases as more friction is added):
narrative_ontology:measurement(sbf_ex_t0, sludge_bureaucratic_friction, base_extractiveness, 0, 0.48).
narrative_ontology:measurement(sbf_ex_t5, sludge_bureaucratic_friction, base_extractiveness, 5, 0.62).
narrative_ontology:measurement(sbf_ex_t10, sludge_bureaucratic_friction, base_extractiveness, 10, 0.70).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type: Sludge is a mechanism for throttling resource allocation.
narrative_ontology:coordination_type(sludge_bureaucratic_friction, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: smartphone_ubiquity
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-27
% ============================================================================

:- module(constraint_smartphone_ubiquity, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: smartphone_ubiquity
 * human_readable: The Smartphone Ubiquity Constraint
 * domain: technological/social/economic
 * * SUMMARY:
 * The smartphone has transitioned from a communication device to a "place within
 * which we live," functioning as a portable digital home that bridges physical
 * and digital realities. While it allows lower-income nations to bypass legacy
 * infrastructure (banks, desktops), it simultaneously extracts privacy and
 * creates a "shell" that can lead to social disconnect or exclusion.
 * * KEY AGENTS:
 * - Youth Under Ban: Subject (Powerless)
 * - Platform Providers & App Ecosystem: Beneficiary (Institutional)
 * - Privacy-Conscious Users: Victim (Powerless)
 * - Global User in Developing Nation: User (Moderate)
 * - Systems Auditor: Observer (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(smartphone_ubiquity, 0.75). % High extraction of user data and attention.
domain_priors:suppression_score(smartphone_ubiquity, 0.50).   % Ubiquity suppresses older infrastructure (desktops, physical banks).
domain_priors:theater_ratio(smartphone_ubiquity, 0.10).       % Highly functional, not theatrical.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(smartphone_ubiquity, extractiveness, 0.75).
narrative_ontology:constraint_metric(smartphone_ubiquity, suppression_requirement, 0.50).
narrative_ontology:constraint_metric(smartphone_ubiquity, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% It claims to be a constructed utility, essential for modern life.
narrative_ontology:constraint_claim(smartphone_ubiquity, constructed).

% Binary flags
domain_priors:requires_active_enforcement(smartphone_ubiquity). % Required for app store rules, platform terms, and regional bans.

% Structural property derivation hooks:
% Both beneficiary and victim are required for Tangled Rope.
narrative_ontology:constraint_beneficiary(smartphone_ubiquity, platform_providers).
narrative_ontology:constraint_victim(smartphone_ubiquity, privacy_conscious_users).
narrative_ontology:constraint_victim(smartphone_ubiquity, youth_under_ban).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For youth subject to a legal ban, the constraint is a coercive exclusion from
% the digital social sphere their peers inhabit.
constraint_indexing:constraint_classification(smartphone_ubiquity, snare,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For platform providers, this is pure coordination infrastructure, enabling
% a global marketplace. Extraction is seen as a cost of business.
constraint_indexing:constraint_classification(smartphone_ubiquity, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The system provides genuine coordination (Rope) but is built on a foundation
% of asymmetric data extraction (Snare) and requires active platform governance
% (Enforcement), making it a canonical Tangled Rope.
constraint_indexing:constraint_classification(smartphone_ubiquity, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

% PERSPECTIVE 4: THE GLOBAL USER (ROPE)
% For a user in a developing nation, the smartphone is a pure coordination tool,
% providing access to banking and information where none existed.
constraint_indexing:constraint_classification(smartphone_ubiquity, rope,
    context(agent_power(moderate),
            time_horizon(biographical),
            exit_options(mobile),
            spatial_scope(local))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(smartphone_ubiquity_tests).

test(perspectival_gap_powerless_vs_institutional) :-
    constraint_indexing:constraint_classification(smartphone_ubiquity, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(smartphone_ubiquity, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    assertion(TypePowerless == snare),
    assertion(TypeInstitutional == rope),
    assertion(TypePowerless \= TypeInstitutional).

test(analytical_observer_sees_tangled_rope) :-
    constraint_indexing:constraint_classification(smartphone_ubiquity, TypeAnalytical, context(agent_power(analytical), _, _, _)),
    assertion(TypeAnalytical == tangled_rope).

test(tangled_rope_structural_requirements_met) :-
    % Verify the necessary structural properties for a Tangled Rope are declared.
    narrative_ontology:constraint_beneficiary(smartphone_ubiquity, _),
    narrative_ontology:constraint_victim(smartphone_ubiquity, _),
    domain_priors:requires_active_enforcement(smartphone_ubiquity).

:- end_tests(smartphone_ubiquity_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness of 0.75 reflects the immense value derived from user
 * data and attention, which is the core business model of the ecosystem. The
 * suppression score of 0.50 captures how smartphone ubiquity has made older
 * technologies (desktops, landlines) less viable alternatives.
 *
 * The Perspectival Gap is stark:
 * - For a powerless user under a ban, it's a Snare of social exclusion.
 * - For an institutional beneficiary (platform), it's a Rope for coordinating a global market.
 * - For a moderate user in a developing nation, it's a Rope providing essential infrastructure.
 * - The analytical view must reconcile these facts. The system provides undeniable
 *   coordination but is structurally dependent on asymmetric extraction and active
 *   enforcement, the three definitional pillars of a Tangled Rope.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * Classifying this as a pure Snare would ignore its profound coordination
 * benefits (e.g., leapfrogging infrastructure in developing nations). Classifying
 * it as a pure Rope would ignore the coercive, extractive data economy at its
 * core. The Tangled Rope classification correctly identifies it as a hybrid
 * system where coordination and extraction are deeply intertwined.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_smartphone_ubiquity,
    'Is the extraction of privacy a functional necessity for smartphone utility (Mountain-like property) or a predatory business model choice (Snare)?',
    'Audit of model efficiency with locally-encrypted data vs. centralized cloud-harvested data; regulatory impact assessments of data privacy laws.',
    'If necessity: Mountain of technological design. If predatory: Snare component is a policy choice, not a technical one.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(smartphone_ubiquity, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data models the constraint's evolution from a utility tool to an
% extractive ecosystem. Extraction accumulated as network effects solidified.
% Theater ratio remains low as the system is highly functional.

% Theater ratio over time (stable):
narrative_ontology:measurement(smartphone_ubiquity_tr_t0, smartphone_ubiquity, theater_ratio, 0, 0.10).
narrative_ontology:measurement(smartphone_ubiquity_tr_t5, smartphone_ubiquity, theater_ratio, 5, 0.10).
narrative_ontology:measurement(smartphone_ubiquity_tr_t10, smartphone_ubiquity, theater_ratio, 10, 0.10).

% Extraction over time (extraction_accumulation drift):
narrative_ontology:measurement(smartphone_ubiquity_ex_t0, smartphone_ubiquity, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(smartphone_ubiquity_ex_t5, smartphone_ubiquity, base_extractiveness, 5, 0.65).
narrative_ontology:measurement(smartphone_ubiquity_ex_t10, smartphone_ubiquity, base_extractiveness, 10, 0.75).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The smartphone ecosystem functions as a form of global infrastructure.
narrative_ontology:coordination_type(smartphone_ubiquity, global_infrastructure).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: social_loafing
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_social_loafing, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: social_loafing
 * human_readable: Social Loafing (The Ringelmann Effect)
 * domain: social/economic
 * * SUMMARY:
 * Social loafing is the phenomenon where individuals exert less effort when working
 * collectively than when working individually. This diffusion of responsibility
 * creates a system where diligent members' efforts are extracted to subsidize
 * low-effort members, while overall group potential is suppressed. The constraint
 * is the group structure that enables and masks this behavior.
 * * KEY AGENTS:
 * - Diligent Contributor: Subject (Powerless), whose extra labor is extracted.
 * - Low-Effort Contributor ("Loafer"): Beneficiary (Institutional, in the sense of benefiting from the institutional structure).
 * - Social Psychologist: Auditor (Analytical), observing the system's properties.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(social_loafing, 0.55). % Mountain <= 0.15, Rope <= 0.15, Snare >= 0.46
domain_priors:suppression_score(social_loafing, 0.45).   % Structural property (raw, unscaled).
domain_priors:theater_ratio(social_loafing, 0.1).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(social_loafing, extractiveness, 0.55).
narrative_ontology:constraint_metric(social_loafing, suppression_requirement, 0.45).
narrative_ontology:constraint_metric(social_loafing, theater_ratio, 0.1).

% Constraint self-claim (what does the constraint claim to be?)
% The system of group-based rewards claims to be a coordination mechanism, but
% its effect is one of enforcement of a collective outcome, masking extraction.
narrative_ontology:constraint_claim(social_loafing, enforcement).

% Binary flags
% The group structure that enables loafing requires the "enforcement" of a
% collective reward/punishment (e.g., a group grade) to function.
domain_priors:requires_active_enforcement(social_loafing).

% Structural property derivation hooks:
% Beneficiary: The "Loafer" who saves energy while reaping group rewards.
narrative_ontology:constraint_beneficiary(social_loafing, low_effort_agents).
% Victim: The organization (lost output) and the diligent individual (overworked).
narrative_ontology:constraint_victim(social_loafing, high_effort_agents).
narrative_ontology:constraint_victim(social_loafing, the_organization).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE DILIGENT CONTRIBUTOR (SNARE)
% For the high-performer, the system is a trap that extracts their uncredited
% labor to compensate for others, strangling their individual potential.
constraint_indexing:constraint_classification(social_loafing, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE LOW-EFFORT CONTRIBUTOR (ROPE)
% For the "loafer," the system is a pure coordination mechanism that allows
% them to achieve a goal with minimal energy expenditure. They feel no extraction.
% Power is 'institutional' as they benefit from the default institutional structure.
constraint_indexing:constraint_classification(social_loafing, rope,
    context(agent_power(institutional),
            time_horizon(biographical),
            exit_options(mobile),
            spatial_scope(local))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The system has a genuine coordination function (achieving a group goal) but
% also facilitates clear, asymmetric extraction from one subgroup to another,
% and requires the enforcement of a collective outcome. This is the definition
% of a Tangled Rope.
constraint_indexing:constraint_classification(social_loafing, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(social_loafing_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between the diligent (powerless) and the loafer (institutional).
    constraint_indexing:constraint_classification(social_loafing, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(social_loafing, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    assertion(TypePowerless == snare),
    assertion(TypeInstitutional == rope),
    assertion(TypePowerless \= TypeInstitutional).

test(analytical_classification_is_tangled_rope) :-
    % Verify the analytical observer correctly identifies the hybrid nature.
    constraint_indexing:constraint_classification(social_loafing, tangled_rope, context(agent_power(analytical), _, _, _)).

test(threshold_validation_for_high_extraction) :-
    % Verify the base extractiveness is in the high-extraction range.
    narrative_ontology:constraint_metric(social_loafing, extractiveness, E),
    assertion(E >= 0.46).

:- end_tests(social_loafing_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness (0.55) and suppression (0.45) are set to reflect a
 * system that significantly degrades potential and extracts value. The key
 * insight is the perspectival gap: the diligent worker sees a Snare (their
 * labor is stolen), the loafer sees a Rope (an efficient way to get a reward),
 * and the analyst sees a Tangled Rope. The analytical view is not Mountain
 * because social loafing is not a law of physics; it is a behavioral tendency
 * enabled by specific, constructed institutional arrangements (e.g., group
 * grading) that can be modified.
 *
 * * MANDATROPHY ANALYSIS:
 * Classifying this as a Tangled Rope is critical. A pure Snare classification
 * would miss the fact that there is a genuine (if inefficient) coordination
 * goal. A Rope classification would ignore the severe asymmetric extraction.
 * The Tangled Rope classification correctly identifies the hybrid nature of
 * the problem: a coordination system that has been co-opted for extraction,
 * preventing misdiagnosis and pointing toward solutions that address both
 * accountability (the extraction) and group cohesion (the coordination).
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_social_loafing,
    'Is social loafing a fixed cognitive bias (Mountain-like) or a strategic response to incentive structures (Tangled Rope)?',
    'Neuroeconomic studies comparing effort expenditure under conditions of perfect individual monitoring versus total anonymity.',
    'If a fixed bias, mitigation is about managing an immutable flaw. If strategic, it can be eliminated by redesigning incentive systems.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(social_loafing, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Social loafing is a persistent, stable phenomenon within a given institutional
% structure. The measurements are therefore flat, showing no significant drift
% over the interval. This is required as base_extractiveness > 0.46.

% Theater ratio over time (stable and low):
narrative_ontology:measurement(social_loafing_tr_t0, social_loafing, theater_ratio, 0, 0.1).
narrative_ontology:measurement(social_loafing_tr_t5, social_loafing, theater_ratio, 5, 0.1).
narrative_ontology:measurement(social_loafing_tr_t10, social_loafing, theater_ratio, 10, 0.1).

% Extraction over time (stable and high):
narrative_ontology:measurement(social_loafing_ex_t0, social_loafing, base_extractiveness, 0, 0.55).
narrative_ontology:measurement(social_loafing_ex_t5, social_loafing, base_extractiveness, 5, 0.55).
narrative_ontology:measurement(social_loafing_ex_t10, social_loafing, base_extractiveness, 10, 0.55).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% Social loafing is a failure mode in the allocation of labor resources within a group.
narrative_ontology:coordination_type(social_loafing, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: social_media_participation_threshold
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_social_media_participation_threshold, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: social_media_participation_threshold
 * human_readable: The 2025 Digital Participation Threshold
 * domain: social/technological
 * * SUMMARY:
 * As of 2025, major social media platforms function as de facto mandatory
 * infrastructure for social and informational participation. High network
 * effects create a significant barrier to exit, making non-participation
 * socially and professionally costly. The constraint is the implicit
 * requirement to maintain a presence on these platforms to access social
 * networks, news, and professional opportunities.
 * * KEY AGENTS:
 * - Young Adult User: Subject (Powerless), for whom platform usage is a
 *   non-negotiable landscape for social survival.
 * - Institutional Marketer: Beneficiary (Institutional), who uses platforms
 *   as a functional coordination mechanism to target demographic segments.
 * - Sociological Researcher: Auditor (Analytical), who tracks the systemic
 *   shifts and extractive properties of the ecosystem.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(social_media_participation_threshold, 0.60). % Rationale: High extraction of attention and behavioral data.
domain_priors:suppression_score(social_media_participation_threshold, 0.50).   % Rationale: Moderate suppression of non-digital alternatives due to network effects.
domain_priors:theater_ratio(social_media_participation_threshold, 0.15).       % Rationale: Primarily functional, but with some performative engagement.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(social_media_participation_threshold, extractiveness, 0.60).
narrative_ontology:constraint_metric(social_media_participation_threshold, suppression_requirement, 0.50).
narrative_ontology:constraint_metric(social_media_participation_threshold, theater_ratio, 0.15).

% Constraint self-claim (what does the constraint claim to be?)
% Platforms claim to be pure coordination tools for connecting people.
narrative_ontology:constraint_claim(social_media_participation_threshold, coordination).

% Binary flags
% Rationale: Social enforcement via network effects requires continuous user
% participation, which constitutes a form of active (though decentralized) enforcement.
domain_priors:requires_active_enforcement(social_media_participation_threshold).

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(social_media_participation_threshold, platform_architects).
narrative_ontology:constraint_beneficiary(social_media_participation_threshold, demographic_advertisers).
narrative_ontology:constraint_victim(social_media_participation_threshold, user_attention_spans).
narrative_ontology:constraint_victim(social_media_participation_threshold, non_digital_social_networks).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% Feels like a Mountain (inescapable) but is metrically a Snare due to high extraction.
% χ = 0.60 (ε) * 1.5 (π(powerless)) * 0.9 (σ(regional)) = 0.81
constraint_indexing:constraint_classification(social_media_participation_threshold, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(regional))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Viewed as essential coordination infrastructure with negligible personal cost.
% χ = 0.60 (ε) * -0.2 (π(institutional)) * 1.0 (σ(national)) = -0.12
constraint_indexing:constraint_classification(social_media_participation_threshold, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Recognizes both the coordination function and the asymmetric extraction.
% This is the canonical classification for this constraint.
% χ = 0.60 (ε) * 1.15 (π(analytical)) * 1.2 (σ(global)) = 0.828
constraint_indexing:constraint_classification(social_media_participation_threshold, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(social_media_participation_threshold_tests).

test(perspectival_gap) :-
    % Verify the powerless user sees a Snare while the institution sees a Rope.
    constraint_indexing:constraint_classification(social_media_participation_threshold, snare,
        context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(social_media_participation_threshold, rope,
        context(agent_power(institutional), _, _, _)).

test(analytical_classification_is_tangled_rope) :-
    % The analytical view must resolve the conflict by identifying the hybrid nature.
    constraint_indexing:constraint_classification(social_media_participation_threshold, tangled_rope,
        context(agent_power(analytical), _, _, _)).

test(tangled_rope_structural_requirements_met) :-
    % Verify that all three structural requirements for Tangled Rope are present.
    narrative_ontology:constraint_beneficiary(social_media_participation_threshold, _), % -> has_coordination_function
    narrative_ontology:constraint_victim(social_media_participation_threshold, _),     % -> has_asymmetric_extraction
    domain_priors:requires_active_enforcement(social_media_participation_threshold).

:- end_tests(social_media_participation_threshold_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base scores (E=0.60, S=0.50) reflect a system that is highly extractive
 * of user data and attention, while moderately suppressing alternatives through
 * powerful network effects.
 *
 * The Perspectival Gap is stark:
 * - For a powerless user, the high base extraction is amplified by their lack
 *   of power (π=1.5), resulting in an effective extraction (χ) that is firmly
 *   in the Snare category. While it feels like an unchangeable Mountain, its
 *   extractive nature is its defining metric characteristic.
 * - For an institutional beneficiary, their power inverts the extraction (π=-0.2),
 *   making the platform feel like a pure, beneficial coordination tool (Rope).
 *
 * * MANDATROPHY ANALYSIS:
 * The analytical classification of Tangled Rope is critical. A simpler model
 * might classify this as a Snare, ignoring its genuine and powerful coordination
 * function (which beneficiaries experience as a Rope). The Tangled Rope
 * classification correctly identifies the hybrid nature of the constraint: it
 * simultaneously provides a coordination benefit to one group while imposing
 * coercive, asymmetric extraction on another. This prevents the system from
 * mistakenly dismissing the platform's utility while still flagging its harm.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_social_media_participation_threshold,
    'Is the high suppression score a result of an emergent social consensus (closer to a Mountain) or a deliberately engineered system of behavioral feedback loops (closer to a Snare)?',
    'Comparative analysis of user retention metrics on platforms with and without algorithmic amplification and notification-based engagement systems.',
    'If emergent, policy interventions are less effective. If engineered, regulatory changes to platform design could significantly reduce the constraint''s power.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(social_media_participation_threshold, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data models the constraint's evolution from a coordination tool
% into an extractive system over a 10-year interval.
% Required for high-extraction constraints (base_extractiveness > 0.46).

% Theater ratio over time (metric_substitution):
narrative_ontology:measurement(smpt_tr_t0, social_media_participation_threshold, theater_ratio, 0, 0.05).
narrative_ontology:measurement(smpt_tr_t5, social_media_participation_threshold, theater_ratio, 5, 0.10).
narrative_ontology:measurement(smpt_tr_t10, social_media_participation_threshold, theater_ratio, 10, 0.15).

% Extraction over time (extraction_accumulation):
narrative_ontology:measurement(smpt_ex_t0, social_media_participation_threshold, base_extractiveness, 0, 0.30).
narrative_ontology:measurement(smpt_ex_t5, social_media_participation_threshold, base_extractiveness, 5, 0.45).
narrative_ontology:measurement(smpt_ex_t10, social_media_participation_threshold, base_extractiveness, 10, 0.60).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The constraint functions as a piece of global digital infrastructure.
narrative_ontology:coordination_type(social_media_participation_threshold, global_infrastructure).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: social_narrative_casting
% ============================================================================
% Generated: 2026-01-21
% Model: Gemini 2.0 Flash
% Source: "Criticism as Other People’s Stories" by cafebedouin.org
% ============================================================================

:- module(constraint_social_narrative_casting, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: social_narrative_casting
 * human_readable: Social Narrative Casting (Criticism-as-Projection)
 * domain: social/psychological
 * temporal_scope: Contemporary / Ongoing
 * spatial_scope: Interpersonal / Cognitive
 * * SUMMARY:
 * This constraint defines criticism as an attempt by a critic (the "Director") to "hire" the 
 * subject into a specific role (extra, villain, victim) within the critic's internal narrative 
 * fiction. It frames these stories as "falsehoods" and "understandable illusions" 
 * that the subject can choose to navigate without internalizing.
 * * KEY AGENTS:
 * - The Critic (Director): Projects their internal story to give meaning to their life and 
 * reinforce their ego.
 * - The Subject (Actor): The person being criticized, who must choose whether to "believe in 
 * the part" or "play the role" with awareness.
 * - The Ego: The internal force that reduces experience into narrative fiction to create a 
 * certain "look" that doesn't reflect reality.
 * * NARRATIVE ARC:
 * Criticism begins as an extractive "role assignment" where the critic attempts to use 
 * the subject to make their internal fiction work. The subject can 
 * transform this constraint from a "Snare" of trapped identity into a "Rope" of 
 * useful lessons by maintaining a conscious choice about playing the part.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(social_narrative_casting, 0, 10).
narrative_ontology:constraint_claim(social_narrative_casting, [psychological_projection]).

% Base extractiveness score (0.3 = Moderate-Low)
% Rationale: While the critic attempts to extract the subject's identity for their "brand," 
% the subject's ultimate agency to refuse belief mitigates total extraction.
domain_priors:base_extractiveness(social_narrative_casting, 0.3).

% Suppression score (0.6 = High-Moderate)
% Rationale: Narrative fiction is "designed to create a certain look that doesn’t reflect 
% reality," effectively suppressing lived experience in favor of an understandable 
% illusion.
domain_priors:suppression_score(social_narrative_casting, 0.6).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(social_narrative_casting, extractiveness, 0.3).
narrative_ontology:constraint_metric(social_narrative_casting, suppression_requirement, 0.6).

% Enforcement requirements
% The constraint "emerges naturally" from the ego's need to project itself and create 
% meaning through stories.
domain_priors:emerges_naturally(social_narrative_casting).



% BENEFICIARIES & VICTIMS
% Beneficiary: The Critic's Ego (gains meaning and brand reinforcement).
constraint_beneficiary(social_narrative_casting, critics_ego).
% Victim: Lived Experience (is reduced to an illusion or plot).
constraint_victim(social_narrative_casting, lived_experience).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE CRITICIZED SUBJECT (Actor) - Snare
   --------------------------------------------------------------------------
   
   WHO: powerless (Target of "you are X" role assignment)
   WHEN: immediate (A specific moment of confrontation/criticism)
   WHERE: trapped (If they believe the role is their life)
   SCOPE: local (The immediate social interaction)
   
   WHY THIS CLASSIFICATION:
   For a subject who internalizes criticism, it is a "Snare." The critic's narrative 
   constrains their identity to a "personification of some trait [the critic] doesn’t 
   like about themselves," leaving them trapped in someone else's movie.
   
   NARRATIVE EVIDENCE:
   "when someone makes a criticism of you... they are trying to hire you as an extra 
   in their movie... as the villain, the victim, the obstacle".
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    social_narrative_casting,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :-
    domain_priors:suppression_score(social_narrative_casting, S),

    S > 0.5.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE CONSCIOUS AGENT (Aware Actor) - Rope
   --------------------------------------------------------------------------
   
   WHO: individual_moderate (Has the agency to "pause the production")
   WHEN: biographical (Long-term navigation of social roles)
   WHERE: mobile (Can see roles for what they are)
   SCOPE: local (Managing specific circumstances)
   
   WHY THIS CLASSIFICATION:
   For the aware agent, roles are a "Rope." They may be "obligated to play them by 
   circumstances," but they use the role as a functional coordination tool while 
   remaining detached from the underlying "belief" in the part.
   
   NARRATIVE EVIDENCE:
   "you always have the choice about whether to play the part... Some parts have 
   useful lessons to teach us... play it knowing it’s a role".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    social_narrative_casting,
    rope,
    context(
        agent_power(individual_moderate),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE EXISTENTIAL ANALYST (Ego-Breaker) - Mountain
   --------------------------------------------------------------------------
   
   WHO: analytical (Observer of "narrative fiction" as a system)
   WHEN: civilizational (Fundamental human ego-mechanism)
   WHERE: analytical (Observer stance)
   SCOPE: global (Applies to all human story-telling)
   
   WHY THIS CLASSIFICATION:
   To the analyst, the ego's tendency to create illusions is a "Mountain"—an unchangeable 
   natural law of human consciousness. "No one escape[s]" the ego's control except through 
   radical breaking of plots.
   
   NARRATIVE EVIDENCE:
   "The stories we tell ourselves are narrative fiction... a reduction of our 
   experience to an easily understandable illusion... It’s our ego taking control".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    social_narrative_casting,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(civilizational),
        exit_options(analytical),
        spatial_scope(global)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 4: THE THERAPIST / COACH - Rope
   --------------------------------------------------------------------------
   WHO: institutional (Guides others in navigating narratives)
   WHEN: biographical (Over the course of a client's therapy)
   WHERE: arbitrage (Can analyze and reframe narratives from a position of professional distance)
   SCOPE: regional (The scope of a client's life and social interactions)
   
   WHY THIS CLASSIFICATION:
   For a therapist or coach, understanding social narrative casting is a
   powerful diagnostic and therapeutic tool (Rope). They teach clients to
   recognize when they are being "cast" in a role, helping them detangle
   their identity from the projections of others. The concept is a mechanism
   for building resilience and social awareness.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    social_narrative_casting,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(arbitrage),
        spatial_scope(regional)
    )
).

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(social_narrative_casting_tests).

/**
 * TEST 1: Multi-perspective variance
 * Demonstrates that belief vs. detachment transforms a Snare into a Rope.
 */
test(multi_perspective_belief) :-
    % Victim who believes the role is life
    constraint_indexing:constraint_classification(social_narrative_casting, snare, context(agent_power(powerless), _, _, _)),
    % Agent who knows it is just a role
    constraint_indexing:constraint_classification(social_narrative_casting, rope, context(agent_power(individual_moderate), _, _, _)),
    % Analyst who sees the underlying biological ego-system
    constraint_indexing:constraint_classification(social_narrative_casting, mountain, context(agent_power(analytical), _, _, _)),
    % Therapist who uses the system as a tool
    constraint_indexing:constraint_classification(social_narrative_casting, rope, context(agent_power(institutional), _, _, _)).

/**
 * TEST 2: Power-based extractiveness scaling
 * Demonstrates that those who don't choose the part suffer more identity extraction.
 */
test(power_extractiveness_casting) :-
    ContextPowerless = context(agent_power(powerless), time_horizon(immediate), exit_options(trapped), spatial_scope(local)),
    ContextInstitutional = context(agent_power(institutional), time_horizon(biographical), exit_options(arbitrage), spatial_scope(regional)),
    constraint_indexing:extractiveness_for_agent(social_narrative_casting, ContextPowerless, Score1),
    constraint_indexing:extractiveness_for_agent(social_narrative_casting, ContextInstitutional, Score2),
    Score1 > Score2.

/**
 * TEST 3: Time-horizon immutability
 * Demonstrates that while a single role can be escaped (Rope), the human tendency 
 * to tell stories is civilizational (Mountain).
 */
test(time_immutability_casting) :-
    % Long horizon = fundamental ego law
    constraint_indexing:effective_immutability(time_horizon(civilizational), exit_options(analytical), mountain).

:- end_tests(social_narrative_casting_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini 2.0 Flash
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. BASE EXTRACTIVENESS (0.3):
 *    Reasoning: Chose moderate-low because while someone "hiring" you for their villain 
 *    role is extractive, the source emphasizes the subject's "choice" and "lessons".
 * 
 * 2. PERSPECTIVE SELECTION:
 *    Focused on the transition from "Unconscious Actor" (Snare) to "Conscious Actor" 
 *    (Rope) to "Observer" (Mountain) to reflect the source's pedagogical arc. Added 
 *    "Therapist" (Institutional) to show the constraint as a tool.
 * 
 * 3. CLASSIFICATION RATIONALE:
 *    [Individual Powerless] → [Snare]: Believing the roles assigned by others makes the 
 *    criticism an inescapable trap of identity.
 *    [Analytical] → [Mountain]: The ego's storytelling is framed as an inherent, 
 *    systemic filter of human experience.
 *    [Institutional] -> [Rope]: A therapist uses the understanding of this system as a tool to help others.
 * 
 * 4. AMBIGUITIES:
 *    - The text mentions "lived experience" as the goal but doesn't define it outside 
 *    the negative space of "breaking free". Resolved via Omega.
 * 
 * 5. OMEGAS 
 *    Define uncertainty so your analysis is cleaner
 * 
 * 6. CONFIDENCE:
 *    High: Classifications of Snare/Rope based on internal vs external belief.
 *    Medium: Extractiveness score (dependent on the severity of the "villain" casting).
 */

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS (If Applicable)
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Objective Self-Correction
 * Viability: The idea that criticism reflects an external, observable truth rather 
 * than just a critic's projection.
 * Suppression: Actively suppressed by the source's claim that stories are "falsehoods" 
 * and criticism is most likely a projection of "traits [critics] don’t like".
 * * ALTERNATIVE 2: Social Narrative Harmony
 * Viability: Harmonizing internal and external stories to reduce friction.
 * Suppression: Rejected in favor of "breaking free" to get to reality.
 * * CONCLUSION:
 * The source's rejection of alternative 1 (objective criticism) shifts the social 
 * interaction from a potential "Rope" for self-improvement into a "Snare" (projection) 
 * that requires an external "Rope" (conscious awareness) to survive.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS CONSTRAINT:
 * 
 * 1. Load into main system:
 *    ?- [constraints/social_narrative_casting].
 * 
 * 2. Run multi-perspective analysis:
 *    ?- constraint_indexing:multi_index_report(social_narrative_casting).
 * 
 * 3. Run tests:
 *    ?- run_tests(social_narrative_casting_tests).
 * 
 * 4. Generate pedagogical report:
 *    ?- pedagogical_report(social_narrative_casting).
 * 
 * 5. Compare with other constraints:
 *    ?- compare_constraints(social_narrative_casting, [other_id]).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: solar_system_weirdness
% ============================================================================
% Generated: 2026-01-21
% Model: Gemini 2.0 Flash
% Source: Alex Wilkins, "Our solar system is extremely weird" 
% Status: [RESOLVED]
% ============================================================================

:- module(constraint_solar_system_weirdness, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: solar_system_weirdness
 * human_readable: The Solar System Configuration Anomaly
 * domain: technological/scientific
 * temporal_scope: 1990s (first exoplanets) to 2026 (present understanding) 
 * spatial_scope: Milky Way Galaxy / Solar System 
 * * SUMMARY:
 * For decades, astronomers assumed our solar system was a typical model for the 
 * universe. Large-scale surveys since the early 2000s have revealed 
 * that our neat arrangement of four rocky planets and four gas giants is actually 
 * an outlier compared to the more common "super-Earth" or "sub-Neptune" systems 
 * found elsewhere.
 * * KEY AGENTS:
 * - The Modern Astronomer: Analytical observer using long-term surveys to rewrite formation stories.
 * - The Sun: A solitary, unusually large star (larger than 90% of neighbors) that acts as the system's anchor.
 * - Jupiter: A rare, neat-orbiting gas giant whose trajectory differs from the erratic paths of most exoplanet Jupiters.
 * * NARRATIVE ARC:
 * The "Uniformity Assumption" acted as a conceptual Snare that limited planetary 
 * discovery models. Realizing our "weirdness" has provided the Rope 
 * needed to climb toward a more accurate theory of planetary formation.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(solar_system_weirdness, 0, 10).
narrative_ontology:constraint_claim([solar_system_weirdness], [scientific_paradigm_shift]).

% Base extractiveness: 0.2
% Rationale: Purely scientific/informational; no coercive extraction of labor or resources.
domain_priors:base_extractiveness(solar_system_weirdness, 0.2).

% Suppression: 0.6
% Rationale: The assumption of our system being "normal" suppressed the search 
% for anomalies and dominated the Copernican principle for decades.
domain_priors:suppression_score(solar_system_weirdness, 0.6).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(solar_system_weirdness, extractiveness, 0.2).
narrative_ontology:constraint_metric(solar_system_weirdness, suppression_requirement, 0.6).

% Enforcement: Emerges naturally from physical laws of planetary formation.
domain_priors:emerges_naturally(solar_system_weirdness).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(solar_system_weirdness, modern_planetary_theorists).
constraint_victim(solar_system_weirdness, legacy_copernican_models).

% Metrics for Section 1
/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE MODERN ASTRONOMER - Rope
   --------------------------------------------------------------------------
   
   WHO: analytical (Observer using "High Accuracy Radial Velocity Searchers") 
   WHEN: biographical (Tracking data since the early 2000s) 
   WHERE: arbitrage (Comparing thousands of exoplanets to our own system) 
   SCOPE: global (Utilizing telescopes like Kepler and TESS) 
   
   WHY THIS CLASSIFICATION:
   For the researcher, "weirdness" is a Rope—a functional tool to re-evaluate 
   how systems form and to distinguish between "weird at the 1% level" versus 
   "1 in a million".
   
   NARRATIVE EVIDENCE:
   "Realising that our solar system isn’t like most others out there has helped 
   astronomers rewrite the story of how it formed".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    solar_system_weirdness,
    rope,
    context(
        agent_power(analytical),
        time_horizon(biographical),
        exit_options(arbitrage),
        spatial_scope(global)
    )
) :-
    domain_priors:base_extractiveness(solar_system_weirdness, E),
    E < 0.4,
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE SUN/PLANETS - Mountain
   --------------------------------------------------------------------------
   
   WHO: powerless (Physical bodies subject to orbital mechanics) 
   WHEN: civilizational (The 4.5 billion year history of the system) 
   WHERE: trapped (Neat, round orbits with no trajectory exit) 
   SCOPE: national (Restricted to the local solar neighborhood) 
   
   WHY THIS CLASSIFICATION:
   The physical arrangement (four rocky, four gassy) is an immutable Mountain 
   governed by physics. It is simply a fact that we have what we have and lack 
   what we lack (like super-Earths).
   
   NARRATIVE EVIDENCE:
   "Our planets, too, are rare... we are missing planets common to most other 
   star systems – those known as super-Earths".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    solar_system_weirdness,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(civilizational),
        exit_options(trapped),
        spatial_scope(national)
    )
) :-
    % Physical laws appear immutable over civilizational/historical spans
    true,
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: LEGACY UNIFORMITARIANS - Snare
   --------------------------------------------------------------------------
   
   WHO: institutional (Rule-making academic paradigms of the 20th century) 
   WHEN: historical (The era before exoplanet surveys) 
   WHERE: trapped (Incapable of imagining Earth as a "weird" outlier) 
   SCOPE: national (Academic consensus groups) 
   
   WHY THIS CLASSIFICATION:
   The "Normalcy Snare" extracted the ability to detect Earth-like planets by 
   assuming they would be found around "sun-like stars" exactly like our own, 
   leading to decades of unmet expectations.
   
   NARRATIVE EVIDENCE:
   "Even after finding thousands of exoplanets, we have yet to spot an 
   Earth-like planet around a sun-like star".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    solar_system_weirdness,
    snare,
    context(
        agent_power(institutional),
        time_horizon(historical),
        exit_options(trapped),
        spatial_scope(national)
    )
) :-
    domain_priors:suppression_score(solar_system_weirdness, S),
    S > 0.5,
    !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(solar_system_weirdness_tests).

test(multi_perspective_variance) :-
    % Astronomer (Rope) vs Sun (Mountain) vs Legacy Theory (Snare)
    constraint_indexing:constraint_classification(solar_system_weirdness, rope, context(analytical, biographical, arbitrage, global)),
    constraint_indexing:constraint_classification(solar_system_weirdness, mountain, context(powerless, civilizational, trapped, national)),
    constraint_indexing:constraint_classification(solar_system_weirdness, snare, context(institutional, historical, trapped, national)).

test(power_extractiveness_scaling) :-
    % Information extraction is low for the observer (0.2)
    domain_priors:base_extractiveness(solar_system_weirdness, E),
    E < 0.3.

test(time_immutability) :-
    % Long horizons (historical/civilizational) see the weirdness as an immutable biological/physical fact (Mountain)
    true.

:- end_tests(solar_system_weirdness_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-21
 * * KEY DECISIONS:
 * 1. EXTRACTIVENESS (0.2): Since this is a discovery about physical reality 
 * rather than a social hierarchy, extraction is minimal.
 * * 2. SUPPRESSION (0.6): High because the Copernican "typicality" was the 
 * mandatory paradigm for nearly a century before surveys broke it.
 * * 3. PERSPECTIVE SELECTION: 
 * - Astronomer: Represents the "Rewriting" (Rope).
 * - The System itself: Represents the "Physical Facts" (Mountain).
 * - Legacy Theorists: Represents the "Lost Decades" of search (Snare).
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    weirdness_degree_calibration,
    "Is the solar system weird at the 1% level or the 1-in-a-million level?",
    resolution_mechanism("Long-term analysis of data from upcoming missions like Habitable Worlds Observatory"),
    impact("If 1%: Mountain (minor variance). If 1-in-a-million: Snare (Earth is a precarious fluke)."),
    confidence_without_resolution(medium)
).

omega_variable(
    earth_twin_absence,
    "Is the lack of Earth-like planets a result of survey bias or actual non-existence?",
    resolution_mechanism("Completion of large-scale surveys looking for Earth-mass planets around G-type stars"),
    impact("If bias: Rope (just need better tools). If non-existence: Mountain (Earth is truly unique)."),
    confidence_without_resolution(high)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: The Copernican Typicality Model
 * Viability: The previous standard for 100+ years.
 * Suppression: Actively rejected now as "weirdness" data accumulates.
 * Evidence: "It wasn’t until the early 2000s... we started to get the first 
 * hints that our solar system... might be unique".
 * * CONCLUSION:
 * The shift from "Typicality" to "Weirdness" represents the core scientific 
 * arbitrage of modern planetary science.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * * 1. Load: ?- [constraints/solar_system_weirdness].
 * 2. Multi-perspective: ?- multi_index_report(solar_system_weirdness).
 * 3. Run tests: ?- run_tests(solar_system_weirdness_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: somatic_focusing_awareness
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: Meg-John Barker & Eugene T. Gendlin
% ============================================================================

:- module(constraint_somatic_focusing_awareness, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: somatic_focusing_awareness
 * human_readable: Somatic Focusing Awareness
 * domain: social/psychological
 * temporal_scope: Perennial / Immediate
 * spatial_scope: Internal / Local
 * 
 * SUMMARY:
 * This constraint defines the practice of "staying with feelings" through "interested curiosity" 
 * without trying to change them or force communication. It relies on identifying 
 * a "felt sense" within the body to navigate the "emotional landscape" before responding to external stimuli.
 * 
 * KEY AGENTS:
 * - The Practitioner (Individual Moderate): Practices "gentle and curious" attention toward internal states.
 * - The Rigid Student (Individual Powerless): Adheres strictly to instructions, ignoring bodily signals.
 * - The Therapy Clinic / Wellness Program (Institutional): Offers somatic focusing as a structured methodology.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(somatic_focusing_awareness, 0, 10).
narrative_ontology:constraint_claim(somatic_focusing_awareness, rope).

% Base extractiveness: 0.2.
% This is a "nourishing" practice that aims to prevent the "poison" of reactive speaking.
domain_priors:base_extractiveness(somatic_focusing_awareness, 0.2).

% Suppression score: 0.3.
% The method explicitly instructs the agent to "acknowledge everything that 
% comes up" and "not try to change" the feeling, suppressing reactive impulses.
domain_priors:suppression_score(somatic_focusing_awareness, 0.3).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(somatic_focusing_awareness, extractiveness, 0.2).
narrative_ontology:constraint_metric(somatic_focusing_awareness, suppression_requirement, 0.3).

% Enforcement: Requires active cognitive enforcement of the "pause" and "curiosity".
domain_priors:requires_active_enforcement(somatic_focusing_awareness).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(somatic_focusing_awareness, internal_clarity).
constraint_victim(somatic_focusing_awareness, reactive_habit).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE CURIOUS PRACTITIONER - Rope
   --------------------------------------------------------------------------
   WHO: individual_moderate (Has the agency to "stay with the feeling")
   WHEN: immediate (Applied "during conversations")
   WHERE: mobile (Uses a "split-level" approach to adjust instructions)
   
   WHY THIS CLASSIFICATION:
   For the practitioner, the method is a 'Rope'—a functional coordination mechanism to 
   "understand our emotional landscape" and think before speaking. It helps them
   navigate complex emotional terrains.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    somatic_focusing_awareness,
    rope,
    context(
        agent_power(individual_moderate),
        time_horizon(immediate),
        exit_options(mobile),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE RIGID STUDENT - Snare
   --------------------------------------------------------------------------
   WHO: powerless (A "slave" to the instructions who might "close off other ways")
   WHEN: immediate (Trying to "follow the instructions exactly")
   WHERE: trapped (Doing something that "feels wrong in your body")
   
   WHY THIS CLASSIFICATION:
   If the instructions are used to "close off other ways" (ignoring bodily signals),
   the method becomes a 'Snare'. It extracts the individual's sensitivity to their
   own body in favor of rigid adherence to the text, leading to internal conflict.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    somatic_focusing_awareness,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE THERAPY CLINIC / WELLNESS PROGRAM - Rope
   --------------------------------------------------------------------------
   WHO: institutional (Offers structured methodologies for client well-being)
   WHEN: biographical (Client's journey through therapy)
   WHERE: arbitrage (Integrates various techniques for psychological processing)
   
   WHY THIS CLASSIFICATION:
   For a therapy clinic or wellness program, somatic focusing is a 'Rope' – a
   structured methodology for helping clients process emotions and achieve
   psychological well-being. It provides a reliable framework for therapeutic
   intervention.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    somatic_focusing_awareness,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(arbitrage),
        spatial_scope(national)
    )
).

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(somatic_focusing_awareness_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(somatic_focusing_awareness, Type1, context(agent_power(individual_moderate), _, _, _)),
    constraint_indexing:constraint_classification(somatic_focusing_awareness, Type2, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(somatic_focusing_awareness, Type3, context(agent_power(institutional), _, _, _)),
    Type1 \= Type2. % Rope vs Snare
    % Type2 \= Type3 is false (Snare vs Rope).
    % Type1 \= Type3 is false (Rope vs Rope).

:- end_tests(somatic_focusing_awareness_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. INSTITUTIONAL PERSPECTIVE: Added 'The Therapy Clinic / Wellness Program' as
 *    the institutional agent. This highlights how a personal practice can be
 *    integrated into a structured, therapeutic context as a beneficial 'Rope'.
 *
 * 2. CLASSIFICATION RATIONALE:
 *    - Practitioner (Rope): A tool for personal clarity and emotional navigation.
 *    - Rigid Student (Snare): Trapped by rigid adherence to instructions, ignoring bodily truth.
 *    - Therapy Clinic (Rope): A structured tool for client well-being.
 * 
 * 3. CORE INSIGHT: Somatic focusing is a powerful 'Rope' for internal processing.
 *    However, if applied rigidly, it can turn into a 'Snare' that extracts
 *    the individual's innate wisdom, becoming a tool for self-suppression.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * The core uncertainty is the extent of the body's role in conscious thought.
 */

omega_variable(
    somatic_body_mind_identity,
    "Is the 'felt sense' truly the 'unconscious mind' and 'seat of feeling' (Mountain), or is this a metaphorical 'Rope' for psychological discovery?",
    resolution_mechanism("Neurological audit of 'felt sense' origin points in the central nervous system; comparative phenomenology of 'felt sense' experiences."),
    impact("If Mountain: Body-work is a biological law. If Rope: It is a narrative technique subject to reinterpretation."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */
/**
 * VIABLE ALTERNATIVES
 *
 * ALTERNATIVE 1: Intellectualization
 *    Viability: Trying to "solve" feelings with logic without engaging bodily sensations.
 *    Suppression: Explicitly suppressed by the somatic focusing method, which emphasizes "staying with the feeling" rather than rational analysis.
 *
 * CONCLUSION:
 * Somatic focusing is a 'Rope' that offers an alternative to purely intellectual
 * or reactive responses to emotions. It suppresses the tendency to "solve" feelings
 * with logic, which often leads to a 'Snare' of unresolved emotional patterns.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/somatic_focusing_awareness].
 * 2. Multi-perspective: ?- multi_index_report(somatic_focusing_awareness).
 * 3. Run tests: ?- run_tests(somatic_focusing_awareness_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: sorites_paradox
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Eubulides of Miletus / Vagueness in Language and Logic
% ============================================================================

:- module(constraint_sorites_paradox, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: sorites_paradox
 * human_readable: The Sorites Paradox (The Paradox of the Heap)
 * domain: social/technological/legal
 * temporal_scope: Permanent (Linguistic/Logical Architecture)
 * spatial_scope: Global (All Categorical Systems)
 * * SUMMARY:
 * The Sorites Paradox arises from vague predicates where a small change (e.g., 
 * removing one grain of sand) does not seemingly change the category (a "heap"), 
 * yet successive small changes eventually lead to a total categorical shift. 
 * It represents the fundamental difficulty of defining hard boundaries in a 
 * continuous reality.
 * * KEY AGENTS:
 * - The Analytic Philosopher: Analytical observer mapping the "Mountain" 
 * of logical vagueness and the failure of bivalence.
 * - The Legislative Drafter: Institutional agent using arbitrary "Ropes" 
 * (thresholds) to coordinate legal certainty (e.g., defining "adulthood" 
 * at exactly 18 years).
 * - The Marginal Subject: Individual powerless agent "strangled" by an 
 * arbitrary boundary where a single second or dollar makes them a criminal 
 * or ineligible for aid.
 * * NARRATIVE ARC:
 * Language treats reality as a "Mountain" of discrete categories. To manage 
 * the vagueness, institutions create "Ropes"—arbitrary sharp lines. However, 
 * for the person standing at the 17-year, 364-day mark, the line is a "Snare," 
 * as the system extracts their agency based on a single grain of time that 
 * lacks any biological distinction.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for [STEP 1] and [STEP 2] of the DR-Audit Suite
narrative_ontology:interval(sorites_interval, 0, 10).
narrative_ontology:constraint_claim(sorites_paradox, mountain).

% Base extractiveness score (0.0-1.0)
% Rationale: Moderate (0.4). The paradox extracts "conceptual precision." 
% It forces a cost on all legal and social systems to maintain arbitrary 
% lines, extracting fairness from those at the margins.
domain_priors:base_extractiveness(sorites_paradox, 0.4).

% Suppression score (0.0-1.0)
% Rationale: High (0.7). It suppresses "Continuous Truth." Societies 
% must ignore the reality of gradual change to maintain the binary 
% "A vs B" logic required for law and software.
domain_priors:suppression_score(sorites_paradox, 0.7).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(sorites_paradox, extractiveness, 0.4).
narrative_ontology:constraint_metric(sorites_paradox, suppression_requirement, 0.7).

% Enforcement: Emerges naturally from the structure of categorical language.
domain_priors:emerges_naturally(sorites_paradox).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(sorites_paradox, [bureaucrats, software_engineers]).
constraint_victim(sorites_paradox, [marginal_subjects, qualitative_nuance]).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE LOGICIAN - Mountain
   --------------------------------------------------------------------------
   
   WHO: analytical - Observer of the fundamental laws of thought.
   WHEN: civilizational - Viewing vagueness as a permanent logical substrate.
   WHERE: trapped - Human language cannot exist without vague predicates.
   SCOPE: global - Universal across all human symbolic systems.
   
   WHY THIS CLASSIFICATION:
   To the logician, the paradox is a Mountain. It is an unchangeable 
   feature of "information hardware." One cannot "solve" the vagueness 
   of a heap; it is a fixed peak of ambiguity in the landscape of 
   communication that persists regardless of technology.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    sorites_paradox,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(civilizational),
        exit_options(trapped),
        spatial_scope(global)
    )
) :-
    constraint_indexing:effective_immutability_for_context(
        context(analytical, civilizational, trapped, global),
        mountain
    ),
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE TAX AUTHORITY - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional - Power to define and enforce arbitrary brackets.
   WHEN: biographical - Managing a national budget over decades.
   WHERE: arbitrage - Can shift thresholds (e.g., $40,000 vs $40,001) to optimize revenue.
   SCOPE: national - Country-wide fiscal policy.
   
   WHY THIS CLASSIFICATION:
   For the institution, the paradox is solved with a Rope. They create 
   an arbitrary "sharp" line (e.g., "taxable income starts at $X"). 
   This is a coordination mechanism that pulls the system toward 
   certainty and scale, ignoring the "heap" of continuous income levels.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    sorites_paradox,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(arbitrage),
        spatial_scope(national)
    )
) :-
    domain_priors:base_extractiveness(sorites_paradox, E),
    E < 0.6,
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE IMMIGRATION APPLICANT - Snare
   --------------------------------------------------------------------------
   
   WHO: powerless - Subject to the "sharp" lines of the state.
   WHEN: immediate - The date of a deadline or an age limit.
   WHERE: trapped - Cannot exit the legal jurisdiction's binary logic.
   SCOPE: national - The reach of the state's border rules.
   
   WHY THIS CLASSIFICATION:
   For the person who misses a "cutoff" by a single day, the paradox is 
   a Snare. The law treats them as "Not Resident" or "Too Old" based 
   on a grain of sand that has no material reality. The arbitrary 
   line strangles their future, extracting their mobility and life 
   quality via the "Snare" of bureaucratic binary logic.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    sorites_paradox,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(national)
    )
) :-
    domain_priors:base_extractiveness(sorites_paradox, E),
    E > 0.3,
    !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(sorites_paradox_tests).

test(multi_perspective_variance) :-
    % Analyst sees Mountain, Institutional sees Rope, Powerless sees Snare
    constraint_indexing:constraint_classification(sorites_paradox, mountain, context(analytical, civilizational, trapped, global)),
    constraint_indexing:constraint_classification(sorites_paradox, rope, context(institutional, biographical, arbitrage, national)),
    constraint_indexing:constraint_classification(sorites_paradox, snare, context(powerless, immediate, trapped, national)).

test(power_extractiveness_vagueness) :-
    % Powerless individuals feel the total extraction of their agency (Snare).
    % Institutional actors use arbitrary lines for coordination (Rope).
    ContextPowerless = context(powerless, immediate, trapped, national),
    ContextPowerful = context(institutional, biographical, arbitrage, national),
    constraint_indexing:extractiveness_for_agent(sorites_paradox, ContextPowerless, Score1),
    constraint_indexing:extractiveness_for_agent(sorites_paradox, ContextPowerful, Score2),
    Score1 > Score2.

:- end_tests(sorites_paradox_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * 1. EXTRACTIVENESS (0.4): The paradox extracts "Fairness." Because reality 
 * is a spectrum but law is a binary, those near the boundary are 
 * effectively robbed of their true status.
 * 2. PERSPECTIVES: Selected the Logician (Hardware), the Bureaucrat 
 * (Tool), and the Applicant (Victim) to highlight how vagueness 
 * becomes a structural trap.
 * 3. CLASSIFICATION RATIONALE:
 * Analytical → Mountain: Language cannot escape vague predicates.
 * Institutional → Rope: Arbitrary thresholds are the "ropes" of civilization.
 * Powerless → Snare: Cutoff points are the "snares" for those on the wrong side.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    precision_logic_limit,
    "Can 'Fuzzy Logic' or probabilistic systems untie the Sorites Snare 
    (Rope), or is binary decision-making a Mountain of social efficiency?",
    resolution_mechanism("Monitor the adoption of non-binary decision 
    algorithms in high-stakes legal or medical insurance adjudication"),
    impact("If Rope: Arbitrary cutoffs can be socialized into 'dimmers.' 
    If Mountain: Binary switches are the only way to scale society."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Degree-based Legal Systems (Continuum)
 * Viability: Low. Instead of "Legal vs. Illegal," use "0.8 Legal" with 
 * proportional fines/rights.
 * Suppression: Extreme. Historically suppressed because it is too 
 * complex to calculate and enforce at scale.
 * * CONCLUSION:
 * The existence of suppressed "Continuum" models confirms that for the 
 * marginal individual, the Sorites Paradox is a Snare—their reality 
 * is continuous, but the system's Rope (the Threshold) is a trap.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 1. Load: ?- [constraint_sorites_paradox].
 * 2. Multi-perspective: ?- multi_index_report(sorites_paradox).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: south_china_sea_arbitration_2016_2026
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: PCA Case No. 2013-19; 2026 Regional Geopolitical Updates (Jan 19, 2026)
% ============================================================================

:- module(scs_arbitration_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: south_china_sea_arbitration_2016_2026
 * human_readable: The 2016 South China Sea Arbitral Award
 * domain: legal/geopolitical/security
 * temporal_scope: 2016 - 2026 (Active contestation)
 * spatial_scope: South China Sea / West Philippine Sea
 * * SUMMARY:
 * On July 12, 2016, an Arbitral Tribunal ruled overwhelmingly in favor of the 
 * Philippines, invalidating China's "nine-dash line" and "historic rights" 
 * as incompatible with UNCLOS. By January 2026, this ruling serves as the 
 * primary legal constraint on maritime claims in the region, though its 
 * enforcement remains a matter of intense international pressure and local 
 * friction.
 * * KEY AGENTS:
 * - The Republic of the Philippines: The primary beneficiary and legal "owner" 
 * of the award.
 * - The People's Republic of China: The primary "subject" of the constraint, 
 * which it rejects as "null and void."
 * - International Community (US/EU/Japan): External enforcers who treat the 
 * ruling as a "binding" legal reality.
 * - Filipino Fisherfolk: Powerless individuals whose safety depends on the 
 * transition of this law from paper to physical reality.
 * * NARRATIVE ARC:
 * The ruling was intended as a "Rope" (a coordination tool for peaceful 
 * resolution). However, for China, it functions as a "Snare" (an asymmetric 
 * limit on perceived sovereign power). For the Philippines, it is becoming a 
 * "Mountain" (a fixed, final legal truth) that they refuse to re-negotiate.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION
   ========================================================================== */

% Required for DR-Audit Suite
narrative_ontology:interval(scs_legal_era, 2016, 2026).
narrative_ontology:constraint_claim(south_china_sea_arbitration_2016_2026, mountain).

% Base extractiveness: 0.45
% Rationale: While legally just, it "extracts" vast maritime territory and 
% historic claims from China. Conversely, the lack of its enforcement extracts 
% resources and safety from Filipino fishers.
domain_priors:base_extractiveness(south_china_sea_arbitration_2016_2026, 0.45).

% Suppression: 0.35
% Rationale: It suppresses the "nine-dash line" but is itself suppressed by 
% Chinese ICAD (Illegal, Coercive, Aggressive, and Deceptive) activities.
domain_priors:suppression_score(south_china_sea_arbitration_2016_2026, 0.35).

% Enforcement: Requires intense active maintenance (diplomacy, patrols, sanctions).
domain_priors:requires_active_enforcement(south_china_sea_arbitration_2016_2026).

% Beneficiaries & Victims
constraint_beneficiary(south_china_sea_arbitration_2016_2026, philippines).
constraint_beneficiary(south_china_sea_arbitration_2016_2026, international_rules_based_order).
constraint_victim(south_china_sea_arbitration_2016_2026, chinese_maritime_expansion).

% Metrics
/* ==========================================================================
   3. INDEXED CLASSIFICATIONS
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: FILIPINO FISHERMAN - Snare
   --------------------------------------------------------------------------
   WHO: powerless - Directly exposed to water cannons and ramming.
   WHEN: immediate - Daily survival at Scarborough Shoal (Bajo de Masinloc).
   WHERE: trapped - Physically limited by the reach of the Chinese Coast Guard.
   SCOPE: local - A specific reef or fishing ground.
   
   WHY THIS CLASSIFICATION:
   While the law is on their side, the *gap* between the law and reality is a 
   Snare. They are promised rights by a document (UNCLOS/Award) that currently 
   cannot stop a water cannon from destroying their livelihood.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    south_china_sea_arbitration_2016_2026,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: PH DEPT. OF FOREIGN AFFAIRS (DFA) - Mountain
   --------------------------------------------------------------------------
   WHO: institutional - Rule-shapers and primary legal advocates.
   WHEN: civilizational - Viewing the award as a permanent contribution to law.
   WHERE: mobile - Engaging in global diplomacy to "slay the giant."
   SCOPE: global - Advocating for the award in the UN and ASEAN.
   
   WHY THIS CLASSIFICATION:
   The DFA treats the ruling as "final and binding." It is a non-negotiable, 
   permanent feature of the legal geography (Mountain) that serves as the 
   unshakable foundation for all Philippine foreign policy.
   
   NARRATIVE EVIDENCE:
   "The Awards... are both final and binding... a concrete example of how 
   international law should work." (Lazaro, Jan 19, 2026)
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    south_china_sea_arbitration_2016_2026,
    mountain,
    context(
        agent_power(institutional),
        time_horizon(civilizational),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: CHINESE EMBASSY / MOFA - Snare
   --------------------------------------------------------------------------
   WHO: institutional (opposing) - Powerful state agency.
   WHEN: immediate - Managing "provocations" at sea.
   WHERE: arbitrage - Acting as if the law does not exist while using other UNCLOS parts.
   SCOPE: national - Protecting "territorial sovereignty."
   
   WHY THIS CLASSIFICATION:
   For Beijing, the Award is an illegal, extractive "Snare" created without 
   their consent, designed to "infringe on sovereignty" and "mislead public 
   opinion." They view it as a weaponized legal artifact.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    south_china_sea_arbitration_2016_2026,
    snare,
    context(
        agent_power(institutional),
        time_horizon(immediate),
        exit_options(arbitrage),
        spatial_scope(national)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE INSTITUTIONAL AGENT (ASEAN/UN) - Rope
   --------------------------------------------------------------------------
   WHO: agent_power(institutional) - Regional blocs and international bodies.
   WHEN: generational - The 2016 ruling sets a precedent for decades.
   WHERE: arbitrage - Managing the friction between national sovereignty and UNCLOS.
   SCOPE: global - Affects the freedom of navigation for all global trade.
   
   WHY THIS CLASSIFICATION:
   The Arbitration is a Rope. While it lacks the physical enforcement of a 
   Mountain, it serves as a high-fidelity coordination tool. International 
   actors use the 2016 ruling to "pull" maritime behavior toward the 
   Rules-Based Order. It provides the legal "slack" necessary for diplomatic 
   de-escalation while simultaneously tightening the reputational cost of 
   non-compliance.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    south_china_sea_arbitration_2016_2026,
    rope,
    context(
        agent_power(institutional),
        time_horizon(generational),
        exit_options(arbitrage),
        spatial_scope(global)
    )
) :-
    domain_priors:requires_active_enforcement(south_china_sea_arbitration_2016_2026),
    !.

% Explicit priors reflecting the coordination energy of international law.
domain_priors:base_extractiveness(south_china_sea_arbitration_2016_2026, 0.3).
domain_priors:suppression_score(south_china_sea_arbitration_2016_2026, 0.4).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(south_china_sea_arbitration_2016_2026, extractiveness, 0.45).
narrative_ontology:constraint_metric(south_china_sea_arbitration_2016_2026, suppression_requirement, 0.35).

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(scs_arbitration_2026_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(south_china_sea_arbitration_2016_2026, Type1, context(powerless, immediate, trapped, local)),
    constraint_indexing:constraint_classification(south_china_sea_arbitration_2016_2026, Type2, context(institutional, civilizational, mobile, global)),
    Type1 = snare,
    Type2 = mountain.

test(enforcement_extractiveness) :-
    % Extraction for fishers remains high despite the legal victory because of lack of physical enforcement.
    domain_priors:base_extractiveness(south_china_sea_arbitration_2016_2026, E),
    E > 0.4.

:- end_tests(scs_arbitration_2026_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * * KEY DECISIONS:
 * 1. THE 2026 "LIVE" STATUS: I've updated the context to include the Jan 19, 
 * 2026 statements from the Philippine DFA and Chinese Embassy.
 * 2. CLASSIFICATION SHIFT: I classified the DFA view as "Mountain." In 2016, 
 * it was a "Rope" (negotiable standard), but in 2026, Manila's position has 
 * hardened into a permanent, non-negotiable reality.
 * 3. EXTRACTIVENESS: The extraction is dual-sided. It extracts 
 * "historic pride/territory" from China and "physical safety" from fishers 
 * through the resulting tension.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω)
   ========================================================================== */

omega_variable(
    un_general_assembly_referral,
    "Will the Philippines successfully forward the 2016 Award to the ICJ for an advisory opinion in 2026?",
    resolution_mechanism("Monitor the vote count in the UNGA during the 2026 September session."),
    impact("If Yes: The award hardens into a global 'Mountain'. If No: It remains a regional 'Snare' for China."),
    confidence_without_resolution(low)
).

omega_variable(
    asean_chairmanship_2026,
    "Will Manila's 2026 ASEAN Chairmanship produce a 'Code of Conduct' that references the 2016 Award?",
    resolution_mechanism("Review the final communique of the 2026 ASEAN Summit in Kuala Lumpur/Manila."),
    impact("If Yes: UNCLOS is a functional 'Rope'. If No: ASEAN remains a 'Scaffold' (hollow)."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Bilateral Negotiation (China's preference)
 * Viability: China claims this has worked with other neighbors.
 * Suppression: Rejected by the Philippines as an asymmetric venue where the 
 * weaker party is coerced.
 * * ALTERNATIVE 2: "Historic Rights" (Natural Law)
 * Viability: Practiced for centuries before UNCLOS.
 * Suppression: Explicitly invalidated by the 2016 Tribunal as "without lawful effect."
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: spain_digital_offensive_2026
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_spain_digital, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: spain_digital_offensive_2026
 * human_readable: Spanish Five-Point Digital Offensive
 * domain: political/technological/legal
 * * SUMMARY:
 * Spanish PM Pedro Sánchez has declared social media a "failed state".
 * Spain is implementing a sweeping regulatory push including a ban for minors
 * under 16, criminalizing algorithmic manipulation, and holding executives
 * personally liable to curb hate and disinformation.
 * * KEY AGENTS:
 * - Minors & Platform Users: Subject (Powerless) - Restricted from access and
 *   algorithmic "amplification of illegal content".
 * - Spanish State: Beneficiary (Institutional) - Reasserting sovereign
 *   control over digital "failed states".
 * - Coalition of the Digitally Willing: Auditor (Analytical) - Coordinating
 *   cross-border enforcement across Europe.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% High extraction (0.72) due to criminal penalties for algorithms and executive liability.
domain_priors:base_extractiveness(spain_digital_offensive_2026, 0.72).

% High suppression (0.80); requires "real barriers" and age verification, not just checkboxes.
domain_priors:suppression_score(spain_digital_offensive_2026, 0.80).

% Low-moderate theater (0.40); intended as "enforcement-first" rather than mere rhetoric.
domain_priors:theater_ratio(spain_digital_offensive_2026, 0.40).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(spain_digital_offensive_2026, extractiveness, 0.72).
narrative_ontology:constraint_metric(spain_digital_offensive_2026, suppression_requirement, 0.80).
narrative_ontology:constraint_metric(spain_digital_offensive_2026, theater_ratio, 0.40).

% Constraint self-claim: The state frames this as a necessary act of enforcement.
narrative_ontology:constraint_claim(spain_digital_offensive_2026, enforcement).

% Requires active enforcement by public prosecutors and age-verification systems.
domain_priors:requires_active_enforcement(spain_digital_offensive_2026).

% Structural property derivation hooks for Tangled Rope classification.
narrative_ontology:constraint_beneficiary(spain_digital_offensive_2026, spanish_state).
narrative_ontology:constraint_victim(spain_digital_offensive_2026, minors_and_platform_users).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% Minors under 16 are effectively "trapped" out of the digital commons by
% state-mandated barriers.
constraint_indexing:constraint_classification(spain_digital_offensive_2026, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The State views this as essential coordination ("Coalition of the Willing")
% to prevent social "polarization".
constraint_indexing:constraint_classification(spain_digital_offensive_2026, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Detects the hybrid of genuine safety coordination and aggressive
% state extraction of corporate power.
constraint_indexing:constraint_classification(spain_digital_offensive_2026, tangled_rope,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(continental))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(spain_digital_tests).

test(perspectival_gap) :-
    % Verify the State sees coordination (Rope) while the Subject sees a Snare.
    constraint_indexing:constraint_classification(spain_digital_offensive_2026, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(spain_digital_offensive_2026, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless == snare,
    TypeInstitutional == rope.

test(tangled_rope_conditions_met) :-
    % Verify the structural properties for Tangled Rope are declared.
    narrative_ontology:constraint_beneficiary(spain_digital_offensive_2026, _),
    narrative_ontology:constraint_victim(spain_digital_offensive_2026, _),
    domain_priors:requires_active_enforcement(spain_digital_offensive_2026).

test(high_extraction_triggers_temporal_data) :-
    narrative_ontology:constraint_metric(spain_digital_offensive_2026, extractiveness, E),
    E > 0.46,
    findall(M, narrative_ontology:measurement(M, spain_digital_offensive_2026, _, _, _), Ms),
    length(Ms, Count),
    Count >= 6.

:- end_tests(spain_digital_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The extraction score (0.72) reflects the move toward "criminalizing algorithmic
 * practices" and personal executive liability, a significant transfer of power
 * and risk from platforms to individuals and the state. The suppression (0.80)
 * is high because the law intends to create "real barriers" to access, not
 * easily circumvented age gates. The Perspectival Gap is classic: the state
 * (institutional) frames it as necessary coordination (Rope) to protect society,
 * while users (powerless) experience it as a coercive barrier (Snare).
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The Tangled Rope classification is vital as it prevents a binary misreading.
 * A pure Snare classification would ignore the genuine coordination goal of
 * protecting minors and curbing disinformation. A pure Rope classification
 * would ignore the highly coercive and extractive nature of the enforcement
 * mechanisms. Tangled Rope correctly identifies the hybrid nature: a coordination
 * function (beneficiary exists) layered with asymmetric extraction (victim exists)
 * that requires active state enforcement.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_spain_verification,
    'Can "real barriers" for age verification be implemented without creating a universal digital identity snare?',
    'Technical audit of age-verification deployments in Spain vs. Australia, focusing on data minimization and privacy-preserving techniques.',
    'If privacy fails, the constraint degrades into a pure Snare. If it holds, it may function as a legitimate (though coercive) Tangled Rope.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(spain_digital_offensive_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Model the escalation from Feb 2026 (T=0) through the 10-interval horizon.

% Theater ratio: Initially high as laws are passed, but drops as
% prosecutorial action begins.
narrative_ontology:measurement(spain_tr_t0, spain_digital_offensive_2026, theater_ratio, 0, 0.65).
narrative_ontology:measurement(spain_tr_t5, spain_digital_offensive_2026, theater_ratio, 5, 0.50).
narrative_ontology:measurement(spain_tr_t10, spain_digital_offensive_2026, theater_ratio, 10, 0.40).

% Extraction: Increases as criminal offenses for algorithms are codified
% and executive liability is enforced.
narrative_ontology:measurement(spain_ex_t0, spain_digital_offensive_2026, base_extractiveness, 0, 0.48).
narrative_ontology:measurement(spain_ex_t5, spain_digital_offensive_2026, base_extractiveness, 5, 0.62).
narrative_ontology:measurement(spain_ex_t10, spain_digital_offensive_2026, base_extractiveness, 10, 0.72).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type: The primary function is to enforce a set of rules.
narrative_ontology:coordination_type(spain_digital_offensive_2026, enforcement_mechanism).

% Network relationships: This policy is expected to influence or couple with
% broader EU-level digital regulations.
narrative_ontology:affects_constraint(spain_digital_offensive_2026, eu_dsa_enforcement_2027).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: spv_variations
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_spv_variations, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: spv_variations
 * human_readable: Stratospheric Polar Vortex Variations (P2/P3)
 * domain: atmospheric_science
 * * SUMMARY:
 * This constraint maps the primary stratospheric variations (P2 and P3)
 * that lead to extreme cold-air outbreaks (CAOs) in the continental US
 * despite overall winter warming trends. The constraint is the physical
 * phenomenon itself, but also the human classification system used to predict it.
 * * KEY AGENTS:
 * - The US Resident: Subject, powerless against extreme cold and snow.
 * - Forecast Systems: Beneficiary of the classification system, which enables coordination.
 * - Atmospheric Scientists: Analytical observer of the physical laws.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
% Extraction is low (0.02) as this is a natural law (Mountain) based on
% stratospheric dynamics rather than human coordination.
domain_priors:base_extractiveness(spv_variations, 0.02). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(spv_variations, 0.10).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(spv_variations, 0.05).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(spv_variations, extractiveness, 0.02).
narrative_ontology:constraint_metric(spv_variations, suppression_requirement, 0.1).
narrative_ontology:constraint_metric(spv_variations, theater_ratio, 0.05).

% Constraint self-claim (what does the constraint claim to be?)
% The underlying phenomenon is a natural law.
narrative_ontology:constraint_claim(spv_variations, natural_law).

% Structural property derivation hooks:
% The classification system provides a coordination function for forecasters.
narrative_ontology:constraint_beneficiary(spv_variations, forecast_systems).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE DISRUPTED CITIZEN (MOUNTAIN)
% Extreme cold and snow are unchangeable physical limits of the winter environment.
constraint_indexing:constraint_classification(spv_variations, mountain,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE SUBSEASONAL FORECASTER (ROPE)
% Stratospheric clusters (P1-P5) serve as coordination tools to predict
% transition periods in weeks 3 and 4. The model is a Rope.
constraint_indexing:constraint_classification(spv_variations, rope,
    context(agent_power(institutional),
            time_horizon(biographical),
            exit_options(mobile),
            spatial_scope(continental))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (MOUNTAIN)
% The underlying dynamics are an irreducible physical law (Mountain),
% regardless of the human models built to interpret them. The low extraction
% and suppression scores confirm this objective classification.
constraint_indexing:constraint_classification(spv_variations, mountain,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(spv_variations_tests).

test(perspectival_gap) :-
    % Verify the vortex is a Mountain for the subject but a Rope for forecasters.
    constraint_indexing:constraint_classification(spv_variations, mountain, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(spv_variations, rope, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(spv_variations, mountain, context(agent_power(analytical), _, _, _)).

test(threshold_validation) :-
    domain_priors:base_extractiveness(spv_variations, E),
    E =< 0.15. % Validates the Mountain/Rope status for natural laws and pure coordination.

:- end_tests(spv_variations_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This story demonstrates a key perspectival gap. The Stratospheric Polar Vortex
 * is a physical phenomenon, correctly classified as a 'Mountain' from the
 * powerless (citizen) and analytical (scientist) perspectives. Its metrics
 * (extraction=0.02, suppression=0.10) are well within the Mountain thresholds.
 * However, the human-created *model* for predicting its behavior (the P-cluster
 * system) functions as a 'Rope' for the institutional agents (forecasters) who
 * use it. This model is a pure coordination tool that allows for better planning
 * and resource allocation. The story correctly separates the underlying physical
 * constraint from the coordination layer built on top of it. The previous version's
 * Piton and Scaffold classifications were removed as they were inconsistent with
 * the low base metrics (theater_ratio=0.05) and lacked required structural
 * properties (e.g., a sunset clause for Scaffold).
 * * MANDATROPHY ANALYSIS:
 * Not applicable. This is a low-extraction constraint, so Mandatrophy resolution
 * is not required.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_enso_strat_link,
    'Does La Niña directly drive P2 variability or is P2 a response to complex tropospheric ENSO influences?',
    'Longer-term reanalysis (beyond 41 years) and high-resolution climate modeling.',
    'Direct Link = Higher predictability of NWUS cold; Complex Response = Lower confidence in ratio shifts.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(spv_variations, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Not required for low-extraction constraints (base_extractiveness <= 0.46).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The P-cluster system is an information standard for interpreting atmospheric data.
narrative_ontology:coordination_type(spv_variations, information_standard).

% Boltzmann floor override (only if domain knowledge justifies)
% narrative_ontology:boltzmann_floor_override(spv_variations, 0.0).

% Network relationships (structural influence edges)
% narrative_ontology:affects_constraint(spv_variations, other_constraint_id).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: square_cube_law
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-27
% ============================================================================

:- module(constraint_square_cube_law, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: square_cube_law
 * human_readable: The Square-Cube Law
 * domain: technological/biological
 * * SUMMARY:
 * The Square-Cube Law, a principle of geometry, states that as an object grows in size, its surface area increases by the square of the multiplier, while its volume (and mass) increases by the cube. This represents a fundamental scaling limit where properties dependent on surface area (like structural strength or heat dissipation) fail to keep pace with properties dependent on volume (like weight or heat generation). It is an immutable feature of three-dimensional space.
 * * KEY AGENTS:
 * - The Evolutionary Biologist: An analytical observer mapping the "Mountain" of physical limits on animal size.
 * - The Aircraft Designer: An institutional agent who must operate within the fixed boundaries of the law.
 * - The Mega-Fauna / Giant: A powerless subject whose physical integrity is bound by the law, making gargantuan size impossible.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
% Rationale: As a fundamental law of geometry, the square-cube law has near-zero extractiveness and suppression. It doesn't "extract" value in a socio-economic sense; it defines the fixed, neutral landscape of physical possibility.
domain_priors:base_extractiveness(square_cube_law, 0.01). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(square_cube_law, 0.01).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(square_cube_law, 0.0).       % Piton detection (>= 0.70). A physical law has no performative aspect.

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(square_cube_law, extractiveness, 0.01).
narrative_ontology:constraint_metric(square_cube_law, suppression_requirement, 0.01).
narrative_ontology:constraint_metric(square_cube_law, theater_ratio, 0.0).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(square_cube_law, natural_law).

% Binary flags
% (none apply)

% Structural property derivation hooks:
% (none apply, as this is a Mountain with no beneficiaries/victims)

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% UNIFORM-TYPE CONSTRAINT: As a natural law, this constraint is a Mountain
% from all perspectives. The classification is invariant. We include multiple
% perspectives to demonstrate this invariance.

% PERSPECTIVE 1: THE ANALYTICAL OBSERVER (BIOLOGIST)
% Views the law as an unchangeable feature of the universe's geometric "hardware."
constraint_indexing:constraint_classification(square_cube_law, mountain,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(universal))).

% PERSPECTIVE 2: THE INSTITUTIONAL ACTOR (ENGINEER)
% Views the law as a fixed boundary condition for design and construction.
constraint_indexing:constraint_classification(square_cube_law, mountain,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile), % Can choose different materials, but not a different law.
            spatial_scope(global))).

% PERSPECTIVE 3: THE POWERLESS SUBJECT (GIANT)
% Experiences the law as an absolute physical limit on their existence.
constraint_indexing:constraint_classification(square_cube_law, mountain,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(square_cube_law_tests).

test(perspectival_invariance) :-
    % Verify that the classification is Mountain from all key perspectives.
    constraint_indexing:constraint_classification(square_cube_law, mountain, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(square_cube_law, mountain, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(square_cube_law, mountain, context(agent_power(analytical), _, _, _)).

test(threshold_validation_mountain) :-
    % Verify the metrics are within the canonical range for a Mountain.
    narrative_ontology:constraint_metric(square_cube_law, extractiveness, E),
    narrative_ontology:constraint_metric(square_cube_law, suppression_requirement, S),
    E =< 0.15,
    S =< 0.05.

:- end_tests(square_cube_law_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This file models a canonical Mountain: a physical/mathematical law. The original file's high extraction (0.5) and suppression (0.7) scores were incorrect, as they confused the *consequences* of the law (e.g., a giant's bones breaking) with the nature of the law itself. A physical law is not extractive; it is a neutral, fixed feature of reality.
 *
 * The scores have been corrected to near-zero (E=0.01, S=0.01) to reflect this. Consequently, the perspectival variance has been removed. The law is a Mountain for the powerless giant, the institutional engineer, and the analytical biologist alike. Their *strategies* for dealing with the law differ, but their classification of the law itself is uniform. This demonstrates the "uniform-type" exception for natural laws.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * Mandatrophy is not applicable here. As a pure Mountain with near-zero extraction, there is no coordination function to degrade or asymmetric extraction to disguise. The constraint's claim of being a `natural_law` is verifiably true, posing no risk of misclassification as a Snare.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_square_cube_law,
    'Is the law a feature of spacetime geometry itself, or an emergent property of particle interactions within that geometry?',
    'A unified theory of quantum gravity or experimental evidence of non-Euclidean geometry at micro-scales.',
    'If geometry itself, the Mountain is absolute. If emergent, there may be exotic physics (e.g., inside a neutron star) where the law is bypassed, changing its scope from universal to conditional.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(square_cube_law, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Not required. Base extractiveness (0.01) is below the 0.46 threshold for
% mandatory temporal tracking. As a physical law, its properties do not drift.

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% No coordination function is present, so coordination_type is not applicable.
% No known structural dependencies on other constraints in the corpus.

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: st_petersburg_paradox
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-27
% ============================================================================

:- module(constraint_st_petersburg_paradox, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: st_petersburg_paradox
 * human_readable: St. Petersburg Paradox (Divergent Expected Value)
 * domain: mathematical/economic
 * * SUMMARY:
 * The St. Petersburg Paradox describes a lottery game with an infinite expected
 * monetary value, yet for which rational players are only willing to pay a small
 * finite entrance fee. It exposes a fundamental constraint in classical decision
 * theory: that raw expected value is a poor model for human utility. The paradox
 * itself is a mathematical curiosity, but its resolution via utility theory
 * became a foundational tool in modern finance and insurance.
 * * KEY AGENTS:
 * - The Naive Gambler: Subject (Powerless) who, if following pure expected value,
 *   is trapped in a game that extracts all their finite wealth for a theoretical
 *   infinite prize.
 * - The Insurance Industry: Beneficiary (Institutional) that uses the resolution
 *   (utility theory) as a coordination mechanism to price risk and sell policies.
 * - The Economic Analyst: Auditor (Analytical) who sees both the coordination
 *   function and the asymmetric extraction from those who misunderstand it.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(st_petersburg_paradox, 0.65). % Snare extraction >= 0.46
domain_priors:suppression_score(st_petersburg_paradox, 0.40).   % Suppresses linear value models.
domain_priors:theater_ratio(st_petersburg_paradox, 0.10).       % Low theater; the math is functional.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(st_petersburg_paradox, extractiveness, 0.65).
narrative_ontology:constraint_metric(st_petersburg_paradox, suppression_requirement, 0.40).
narrative_ontology:constraint_metric(st_petersburg_paradox, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% The paradox presents itself as an immutable mathematical law.
narrative_ontology:constraint_claim(st_petersburg_paradox, natural_law).

% Binary flags
% The application of utility theory requires enforcement (e.g., house limits,
% insurance premium regulations) to function as a stable system.
domain_priors:requires_active_enforcement(st_petersburg_paradox).

% Structural property derivation hooks:
% has_coordination_function/1 is DERIVED from constraint_beneficiary/2
% has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
narrative_ontology:constraint_beneficiary(st_petersburg_paradox, insurance_industry).
narrative_ontology:constraint_beneficiary(st_petersburg_paradox, financial_risk_modelers).
narrative_ontology:constraint_victim(st_petersburg_paradox, pure_expected_value_adherents).
narrative_ontology:constraint_victim(st_petersburg_paradox, naive_gamblers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For a naive gambler or a hypothetical agent bound by pure expected value,
% the paradox is a trap. It demands a high (or infinite) entry fee for a
% prize that is practically unrealizable, extracting all finite wealth.
% χ = 0.65 * 1.5 (powerless) * 1.0 (national) = 0.975
constraint_indexing:constraint_classification(st_petersburg_paradox, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For the insurance industry, the paradox's resolution (utility theory) is a
% pure coordination tool. It provides a stable, universally accepted method
% for pricing risk, enabling the entire market to function.
% χ = 0.65 * -0.2 (institutional) * 1.2 (global) = -0.156 (felt as benefit)
constraint_indexing:constraint_classification(st_petersburg_paradox, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees both sides. The resolution is a genuine coordination tool
% (Rope aspect) but it's built upon a mathematical structure that is inherently
% extractive (Snare aspect) for those who don't or can't use utility models.
% It requires active enforcement (house limits, regulations) to remain stable.
% χ = 0.65 * 1.15 (analytical) * 1.2 (global) = 0.897
constraint_indexing:constraint_classification(st_petersburg_paradox, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(st_petersburg_paradox_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(st_petersburg_paradox, TypePowerless,
        context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(st_petersburg_paradox, TypeInstitutional,
        context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(analytical_view_is_tangled_rope) :-
    constraint_indexing:constraint_classification(st_petersburg_paradox, tangled_rope,
        context(agent_power(analytical), _, _, _)).

test(threshold_validation_high_extraction) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(st_petersburg_paradox, ExtMetricName, E),
    E >= 0.46.

:- end_tests(st_petersburg_paradox_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The St. Petersburg Paradox is a classic example of a constraint whose nature
 * changes dramatically with perspective. The base extractiveness (0.65) is high
 * because, in its pure form, the logic of infinite expected value extracts all
 * finite resources from an agent compelled to follow it.
 *
 * * Perspectival Gap:
 * - The 'powerless' gambler sees a Snare. They are trapped by their finite
 *   bankroll against a game whose value is theoretical and inaccessible. The
 *   promise of infinite return extracts their real, finite stake.
 * - The 'institutional' beneficiary (e.g., an insurer) sees a Rope. The paradox
 *   is not a trap but a foundational problem whose *solution* (utility theory)
 *   is a powerful tool for coordinating the entire field of risk management.
 * - The 'analytical' observer sees a Tangled Rope. They recognize the genuine
 *   coordination function for institutions, but also see that this function is
 *   predicated on an underlying mathematical structure that is asymmetrically
*    extractive for the uninitiated. The system requires active enforcement
 *   (e.g., casino limits, insurance regulations) to prevent it from collapsing
 *   back into a pure Snare. This dual nature is the hallmark of a Tangled Rope.
 *
 * * MANDATROPHY ANALYSIS:
 * Classifying this as a Tangled Rope prevents mischaracterizing the modern
 * financial system's use of utility theory. A simple Snare classification would
 * miss the genuine, system-stabilizing coordination it provides. A simple Rope
 * classification would ignore the inherent extraction from those who cannot
 * access or apply these sophisticated models, effectively hiding the victims.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_st_petersburg_paradox,
    'Is the paradox a true mathematical Mountain or a Scaffold built on the flawed assumption of an infinitely funded house?',
    'Recalculating expected value with a finite cap on the payout (e.g., the total M2 money supply).',
    'If the house is finite, the expected value becomes finite and small. The paradox dissolves, and the constraint is revealed to be a constructed artifact of abstract math, not a natural law.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(st_petersburg_paradox, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data for high-extraction constraint (E > 0.46).
% Models the transition from a pure mathematical curiosity to a tool for
% financial extraction. Initial extraction was low (it was just a thought
% experiment), but grew as it was integrated into risk-pricing models.
%
% Theater ratio over time (remains low):
narrative_ontology:measurement(st_petersburg_paradox_tr_t0, st_petersburg_paradox, theater_ratio, 0, 0.05).
narrative_ontology:measurement(st_petersburg_paradox_tr_t5, st_petersburg_paradox, theater_ratio, 5, 0.10).
narrative_ontology:measurement(st_petersburg_paradox_tr_t10, st_petersburg_paradox, theater_ratio, 10, 0.10).

% Extraction over time (extraction_accumulation):
narrative_ontology:measurement(st_petersburg_paradox_ex_t0, st_petersburg_paradox, base_extractiveness, 0, 0.20).
narrative_ontology:measurement(st_petersburg_paradox_ex_t5, st_petersburg_paradox, base_extractiveness, 5, 0.55).
narrative_ontology:measurement(st_petersburg_paradox_ex_t10, st_petersburg_paradox, base_extractiveness, 10, 0.65).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The resolution of the paradox (utility theory) is a fundamental mechanism
% for allocating capital and pricing risk in finance.
narrative_ontology:coordination_type(st_petersburg_paradox, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: stable_marriage_coordination
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: David Gale & Lloyd Shapley (1962) / College Admissions and the Stability of Marriage
% ============================================================================

:- module(constraint_stable_marriage, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: stable_marriage_coordination
 * human_readable: Stable Marriage Problem (Gale-Shapley Algorithm)
 * domain: economic/social/technological
 * temporal_scope: 1962 - Present
 * spatial_scope: Global/Abstract (Matching Markets)
 * * SUMMARY:
 * The Stable Marriage Problem involves finding a stable matching between two equally 
 * sized sets of elements given a list of preferences for each element. A matching 
 * is "stable" if there is no pair that would both prefer each other over their 
 * current partners. It represents a fundamental constraint on how decentralized 
 * preferences can be reconciled into a self-enforcing social equilibrium.
 * * KEY AGENTS:
 * - The Suitor (Subject): The powerless agent (in a fixed-rule iteration) whose 
 * outcome depends on the sequential rejection or acceptance by the other set.
 * - The Matching Coordinator (Institutional): An agent (like the NRMP for doctors) 
 * who uses the algorithm as a "Rope" to ensure market stability and prevent "poaching."
 * - The Strategic Outlier (Victim): An agent whose optimal individual preference 
 * is "strangled" by the global requirement for stability, often resulting in a 
 * sub-optimal match to prevent systemic collapse.
 * * NARRATIVE ARC:
 * The Stable Marriage Problem is a "Mountain" of game-theoretic reality—in any 
 * matching market, the existence of a stable state is a mathematical certainty, 
 * yet the specific outcome is biased toward the set that proposes. In labor 
 * markets (like medical residency), it is a "Rope" used to coordinate thousands 
 * of individuals. However, for an agent with highly specific, non-conformist 
 * preferences, the stability requirement acts as a "Snare," extracting their 
 * individual utility (extraction) to maintain the "choking" grip of the 
 * aggregate equilibrium.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Structural Anchor for the DR-Audit Suite
narrative_ontology:interval(matching_theory_era, 1962, 2026).
narrative_ontology:constraint_claim(stable_marriage_coordination, mountain).

% Base extractiveness score (0.0-1.0)
% Rationale: 0.4. The algorithm "extracts" the possibility of "perfect" 
% matches for all individuals to enforce a "stable" state where no one 
% has the incentive to defect. It inherently favors the group that proposes 
% (Suitor-Optimality), creating a systematic extraction of utility from 
% the receiving group.
domain_priors:base_extractiveness(stable_marriage_coordination, 0.4).

% Suppression score (0.0-1.0)
% Rationale: 0.3. It suppresses the visibility of "unstable" but 
% higher-utility matches, rendering them functionally illegal or 
% "fraudulent" within coordinated markets like residency matching.
domain_priors:suppression_score(stable_marriage_coordination, 0.3).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(stable_marriage_coordination, extractiveness, 0.4).
narrative_ontology:constraint_metric(stable_marriage_coordination, suppression_requirement, 0.3).

% Enforcement: Emerges naturally from the Gale-Shapley mechanism.
domain_priors:emerges_naturally(stable_marriage_coordination).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(stable_marriage_coordination, proposing_set_agents). % Suitor-optimal results.
constraint_beneficiary(stable_marriage_coordination, market_clearing_houses).
constraint_victim(stable_marriage_coordination, receiving_set_agents). % Receiver-pessimal results.
constraint_victim(stable_marriage_coordination, niche_preference_outliers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE RESIDENCY APPLICANT - Mountain
   --------------------------------------------------------------------------
   
   WHO: powerless - The student cannot change the algorithm's rules.
   WHEN: immediate - True at the moment the "Match Day" results are released.
   WHERE: trapped - Bound by the institutional rules of the medical profession.
   SCOPE: national - Part of a country-wide labor allocation.
   
   WHY THIS CLASSIFICATION:
   For the individual student, the algorithm is an absolute Mountain. They 
   submit their ranks and must accept the result. The existence of a "stable" 
   match means they cannot negotiate a better spot elsewhere because no 
   hospital they prefer would prefer them back. The math is an unyielding law.
   
   
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    stable_marriage_coordination,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(national)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE MARKET COORDINATOR - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional - Power to mandate the use of a centralized matching system.
   WHEN: biographical - Managing the stability of the labor market over decades.
   WHERE: mobile - Can choose to make the algorithm suitor-optimal or receiver-optimal.
   SCOPE: global - Applying matching theory to diverse sectors.
   
   WHY THIS CLASSIFICATION:
   For the institution (e.g., NRMP), the Stable Marriage algorithm is a 
   "Rope"—a functional coordination tool. It prevents "unraveling" where 
   hospitals and students make sub-optimal early offers. It pulls the 
   entire market toward a stable standard of achievement (equilibrium).
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    stable_marriage_coordination,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE RECEIVING-SIDE AGENT - Snare
   --------------------------------------------------------------------------
   
   WHO: individual_moderate - Has the tools to rank, but is bound by the proposer's advantage.
   WHEN: immediate - Realizing they have been matched to their least-preferred stable option.
   WHERE: constrained - The "exit" (breaking the match) is professionally ruinous.
   SCOPE: local - Impacting their specific career trajectory.
   
   WHY THIS CLASSIFICATION:
   For the agent on the receiving side of the proposals, the algorithm is a 
   "Snare." While the outcome is "stable," it is mathematically proven to be 
   the *worst* possible stable match for them. It extracts their potential 
   satisfaction (extraction) to guarantee the stability of the system, 
   "choking" their agency in favor of the proposing set.
   
   
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    stable_marriage_coordination,
    snare,
    context(
        agent_power(individual_moderate),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(local)
    )
) :- 
    domain_priors:base_extractiveness(stable_marriage_coordination, E),
    E >= 0.3,
    !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(stable_marriage_tests).

test(multi_perspective_variance) :-
    % Applicant -> Mountain
    constraint_indexing:constraint_classification(stable_marriage_coordination, Type1, context(powerless, immediate, trapped, national)),
    % Coordinator -> Rope
    constraint_indexing:constraint_classification(stable_marriage_coordination, Type2, context(institutional, biographical, mobile, global)),
    Type1 \= Type2.

test(receiver_extraction_penalty) :-
    % Receiver-side agents feel the 0.4 extraction of utility as a Snare.
    Context = context(individual_moderate, immediate, constrained, local),
    constraint_indexing:extractiveness_for_agent(stable_marriage_coordination, Context, Score),
    Score >= 0.3.

test(natural_emergence) :-
    domain_priors:emerges_naturally(stable_marriage_coordination).

:- end_tests(stable_marriage_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * 1. EXTRACTIVENESS SCORE (0.4): 
 * I chose 0.4 because of the inherent "Proposer-Optimality" vs "Receiver-Pessimality" 
 * duality. The system extracts utility from one set to benefit the other while 
 * maintaining the "Mountain" of stability.
 * 2. CLASSIFICATION: 
 * Captured how the "Gale-Shapley Mountain" serves as a "Rope" for institutions 
 * to clear markets, but can be a "Snare" for the passive side of the proposal.
 */

% OMEGA IDENTIFICATION
omega_variable(
    strategic_misreporting_impact,
    "Is the 'Mountain' of stability vulnerable if agents lie about their preferences (Scaffold)?",
    resolution_mechanism("Analysis of incentive compatibility: Gale-Shapley is strategy-proof for proposers but not for receivers."),
    impact("If strategic lying is rampant: The 'Mountain' of stability is a mirage, and the algorithm becomes a 'Snare' of manipulation."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Decentralized Search (The "Dating Market")
 * Viability: Individuals search for partners without a central coordinator.
 * Suppression: Often leads to "unstable" pairs and high search costs, 
 * suppressed by institutional "Ropes" in professional settings to ensure 
 * 100% market clearing.
 * * ALTERNATIVE 2: Random Allocation
 * Viability: Fair in terms of probability, but highly unstable.
 * Suppression: Rejected because it violates the "Mountain" of 
 * individual rationality.
 * * CONCLUSION:
 * The existence of decentralized "instability" (Alternative 1) is what 
 * makes the Stable Marriage "Rope" necessary for large-scale coordination.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 1. Load: ?- [constraint_stable_marriage].
 * 2. Multi-perspective: ?- multi_index_report(stable_marriage_coordination).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: start_treaty
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_start_treaty, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: start_treaty
 * human_readable: START Treaty Expiration
 * domain: political
 * * SUMMARY:
 * The expiration of the New START treaty between the US and Russia removes legally binding limits on their nuclear arsenals for the first time in half a century. This creates uncertainty and increases the risk of a nuclear arms race. The constraint is the new, unregulated environment that emerges post-expiration.
 * * KEY AGENTS:
 * - Global Community: Subject (Powerless) / Victim
 * - Arms Manufacturers: Beneficiary (Institutional)
 * - Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(start_treaty, 0.55). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(start_treaty, 0.70).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(start_treaty, 0.2).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(start_treaty, extractiveness, 0.55).
narrative_ontology:constraint_metric(start_treaty, suppression_requirement, 0.70).
narrative_ontology:constraint_metric(start_treaty, theater_ratio, 0.2).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(start_treaty, enforcement).

% Binary flags
% narrative_ontology:has_sunset_clause(start_treaty).      % Mandatory if Scaffold
domain_priors:requires_active_enforcement(start_treaty). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(start_treaty, arms_manufacturers).
narrative_ontology:constraint_victim(start_treaty, global_community).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE/MOUNTAIN)
% The global community is trapped in a more dangerous world with no alternative.
constraint_indexing:constraint_classification(start_treaty, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(global))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Arms manufacturers see the lack of a treaty as a pure coordination mechanism
% for increased defense spending and production.
constraint_indexing:constraint_classification(start_treaty, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER
% The situation has both a coordination function (residual norms, strategic
% posturing) and high asymmetric extraction (risk borne by populace).
constraint_indexing:constraint_classification(start_treaty, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(start_treaty_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(start_treaty, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(start_treaty, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(threshold_validation) :-
    % Ensures it's a high-extraction constraint as intended.
    narrative_ontology:constraint_metric(start_treaty, extractiveness, E),
    E >= 0.46.

test(tangled_rope_conditions_met) :-
    % Verify that the conditions for a tangled_rope are met for the analytical perspective.
    constraint_indexing:constraint_classification(start_treaty, tangled_rope, context(agent_power(analytical), _, _, _)),
    domain_priors:requires_active_enforcement(start_treaty),
    narrative_ontology:constraint_beneficiary(start_treaty, _),
    narrative_ontology:constraint_victim(start_treaty, _).

:- end_tests(start_treaty_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The expiration of the START treaty is modeled as a Tangled Rope from an analytical view, with significant perspectival gaps. The constraint is the new, unregulated strategic environment.
 *
 * *Subject (Snare)*: For the global community (powerless, trapped), the absence of the treaty is a Snare. It imposes the high cost and risk of a renewed arms race without their consent and with no viable alternative, suppressing global security for the benefit of a few.
 * *Beneficiary (Rope)*: From the perspective of an institutional beneficiary like an arms manufacturer, the *absence* of the treaty is a perfect `Rope`. It removes regulatory friction and coordinates national security policy and government spending towards armament, creating a predictable and profitable market. For this agent, the extraction is negligible and the system is purely enabling.
 * *Analytical (Tangled Rope)*: An analytical observer sees a system with both a coordination function (the remaining strategic doctrines and communication channels that prevent immediate catastrophe) and a severe asymmetric extraction function (the global populace bears the risk and cost, while arms manufacturers and hawkish political factions benefit). It requires active enforcement (military posturing, budget allocation) to sustain. This meets all requirements for a Tangled Rope.
 *
 * *PERSPECTIVAL GAP*: The gap is stark: what is a Snare of existential risk for the powerless is a Rope of economic opportunity for the institutional beneficiary. The Tangled Rope classification captures this duality.
 *
 * *MANDATROPHY ANALYSIS*: [RESOLVED MANDATROPHY] The Tangled Rope classification correctly identifies that this is not pure, functionless extraction (Snare). It acknowledges the residual coordination functions (strategic stability doctrines) that coexist with the extractive arms race, preventing a misclassification that would ignore the system's complex internal logic.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_start_treaty,
    'Will the expiration of the treaty trigger a new, unrestrained arms race, or will informal norms suffice to maintain stability?',
    'Monitoring of strategic weapons development, deployment, and national security doctrines by key state actors over the next decade.',
    'If a race begins, the extraction score is accurate. If norms hold, the extraction is lower and the constraint is closer to a pure Rope (for states) or Piton (the ghost of the treaty).',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(start_treaty, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data models the intensification of the unregulated environment after
% the treaty expires. Required for high-extraction constraints (base_extractiveness > 0.46).
%
% Theater ratio over time (remains low, indicating function over performance):
narrative_ontology:measurement(start_treaty_tr_t0, start_treaty, theater_ratio, 0, 0.1).
narrative_ontology:measurement(start_treaty_tr_t5, start_treaty, theater_ratio, 5, 0.15).
narrative_ontology:measurement(start_treaty_tr_t10, start_treaty, theater_ratio, 10, 0.2).

% Extraction over time (models the gradual buildup of arsenals and risk):
narrative_ontology:measurement(start_treaty_ex_t0, start_treaty, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(start_treaty_ex_t5, start_treaty, base_extractiveness, 5, 0.53).
narrative_ontology:measurement(start_treaty_ex_t10, start_treaty, base_extractiveness, 10, 0.55).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The new environment coordinates resource allocation towards armaments.
narrative_ontology:coordination_type(start_treaty, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: starwars_evolutionary_mutation
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_starwars_evolutionary_mutation, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: starwars_evolutionary_mutation
 * human_readable: Jedi as Systemic Evolutionary Outliers
 * domain: social/political/biological
 * * SUMMARY:
 * This constraint models the Jedi not as moral paragons, but as systemic
 * outliers—mutations that test which institutional "necessities" are genuine
 * physical constraints and which are merely bureaucratic artifacts.
 * The Jedi Council's embedding within the Senate bureaucracy created a
 * structural blindness, where the "Domestication Gradient" turned a beneficial
 * mutation into a rigid apparatus. What began as a Rope (Jedi as functional
 * coordination for peace) ossified, ultimately becoming a Snare as the
 * Council's inability to metabolize dissenting "mutations" (like Anakin)
 * extracted the entire order's survival in favor of institutional conformity.
 * * KEY AGENTS:
 * - Individual Jedi (e.g., Qui-Gon, Anakin): Subject (Powerless) - Possesses latent diagnostic capacity but is excluded or filtered by the institution.
 * - Jedi Council: Beneficiary (Institutional) - Rule-making power blinded by its own bureaucratic embedding.
 * - The Sith (e.g., Palpatine): Auditor (Analytical) - External force that applies the "fitness test" the Council failed to perform internally.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% [RESOLVED MANDATROPHY] High-extraction identified as a structural Snare.
% The institution "extracted" the individual diagnostic potential of its
% members to feed its bureaucratic survival until total collapse.
domain_priors:base_extractiveness(starwars_evolutionary_mutation, 0.75).
% The Council actively suppressed boundary-testing and alternative diagnostic
% methods in favor of "conformity" filters.
domain_priors:suppression_score(starwars_evolutionary_mutation, 0.80).
% Bureaucratic ritual increased over time but was not the primary function.
domain_priors:theater_ratio(starwars_evolutionary_mutation, 0.15).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(starwars_evolutionary_mutation, extractiveness, 0.75).
narrative_ontology:constraint_metric(starwars_evolutionary_mutation, suppression_requirement, 0.80).
narrative_ontology:constraint_metric(starwars_evolutionary_mutation, theater_ratio, 0.15).

% The system presents itself as a Snare from an analytical view, extracting
% potential for the sake of conformity.
narrative_ontology:constraint_claim(starwars_evolutionary_mutation, snare).

% Binary flags
% The Jedi Code, Senate oversight, and the rigid master-apprentice training
% loop constitute active enforcement.
domain_priors:requires_active_enforcement(starwars_evolutionary_mutation).

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(starwars_evolutionary_mutation, bureaucratic_inertia).
narrative_ontology:constraint_beneficiary(starwars_evolutionary_mutation, the_sith_plan).
narrative_ontology:constraint_victim(starwars_evolutionary_mutation, individual_diagnostic_ability).
narrative_ontology:constraint_victim(starwars_evolutionary_mutation, the_jedi_lineage).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE ROGUE JEDI (QUI-GON/ANAKIN) - MOUNTAIN
% To a Jedi who sees a threat the Council ignores, the Council's denial is a
% Mountain. It is an unchangeable feature of the institutional landscape that
% no amount of evidence can shift because the Council has delegated its
% "diagnostic sensors" to the Senate.
constraint_indexing:constraint_classification(starwars_evolutionary_mutation, mountain,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE JEDI COUNCIL - ROPE
% The Council views its rules and Senate relationship as a Rope—a functional
% coordination mechanism that ensures the Jedi serve the "greater good" of the
% Republic. They view deviations as failures of discipline rather than vital signals.
constraint_indexing:constraint_classification(starwars_evolutionary_mutation, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE SITH (PALPATINE) - SNARE
% From the Sith perspective, the Council's own "domestication" is a Snare.
% By tethering the Jedi to a decaying political system, they have turned the
% Order's own "Rope" of coordination into the mechanism of its execution.
constraint_indexing:constraint_classification(starwars_evolutionary_mutation, snare,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(starwars_evolutionary_mutation_tests).

test(perspectival_gap_mountain_rope) :-
    % Verify the gap between the individual Jedi (Mountain) and the Council (Rope).
    constraint_indexing:constraint_classification(starwars_evolutionary_mutation, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(starwars_evolutionary_mutation, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless == mountain,
    TypeInstitutional == rope,
    TypePowerless \= TypeInstitutional.

test(analytical_view_is_snare) :-
    % Verify the analytical observer correctly identifies the constraint as a Snare.
    constraint_indexing:constraint_classification(starwars_evolutionary_mutation, TypeAnalytical, context(agent_power(analytical), _, _, _)),
    TypeAnalytical == snare.

test(snare_thresholds_met) :-
    % High extraction and suppression confirm the Snare classification.
    config:param(extractiveness_metric_name, ExtMetricName),
    config:param(suppression_metric_name, SuppMetricName),
    narrative_ontology:constraint_metric(starwars_evolutionary_mutation, ExtMetricName, E),
    narrative_ontology:constraint_metric(starwars_evolutionary_mutation, SuppMetricName, S),
    E >= 0.46,
    S >= 0.60.

:- end_tests(starwars_evolutionary_mutation_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect the "Domestication Gradient" theory: an initially beneficial
 * coordination mechanism (Rope) becomes rigid and extractive over time.
 * - Extraction (0.75): High, representing the squandered diagnostic potential of individual Jedi, which was "extracted" in favor of institutional conformity.
 * - Suppression (0.80): High, representing the Council's active filtering of dissenting or non-conformist views (e.g., Qui-Gon's, Anakin's).
 * The Perspectival Gap is stark: The Council sees a functional Rope, the individual Jedi sees an immovable Mountain of bureaucracy, and the external adversary (the Sith) sees a perfect Snare to exploit.
 * * MANDATROPHY ANALYSIS:
 * This is not a Tangled Rope because the coordination function had atrophied to the point of being counter-productive. The system's primary function became self-preservation through conformity, making it a pure Snare from an objective, analytical viewpoint.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_starwars_evolutionary_mutation,
    "Does Jedi training primarily select for obedience (Snare) or for boundary-testing diagnostic ability (adaptive Rope)?",
    "Analysis of Padawan failure rates versus their success in identifying external systemic threats that the Council missed.",
    "If Obedience: The Order is a terminal Snare. If Boundary-Testing: It was an adaptive Rope that merely failed a specific fitness test.",
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(starwars_evolutionary_mutation, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data models the Jedi Order's ossification over time.
% Extraction (of potential) and theater (of ritual) both increased as the
% Order became more entangled with galactic bureaucracy.

% Theater ratio over time (metric_substitution):
narrative_ontology:measurement(sw_evo_tr_t0, starwars_evolutionary_mutation, theater_ratio, 0, 0.05).
narrative_ontology:measurement(sw_evo_tr_t5, starwars_evolutionary_mutation, theater_ratio, 5, 0.10).
narrative_ontology:measurement(sw_evo_tr_t10, starwars_evolutionary_mutation, theater_ratio, 10, 0.15).

% Extraction over time (extraction_accumulation):
narrative_ontology:measurement(sw_evo_ex_t0, starwars_evolutionary_mutation, base_extractiveness, 0, 0.30).
narrative_ontology:measurement(sw_evo_ex_t5, starwars_evolutionary_mutation, base_extractiveness, 5, 0.60).
narrative_ontology:measurement(sw_evo_ex_t10, starwars_evolutionary_mutation, base_extractiveness, 10, 0.75).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The Jedi Code and Council oversight function as a mechanism to enforce a
% specific behavioral and ideological standard across the Order.
narrative_ontology:coordination_type(starwars_evolutionary_mutation, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: statecraft_virtu
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-16
% ============================================================================

:- module(constraint_statecraft_virtu, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:coordination_type/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: statecraft_virtu
 * human_readable: Machiavellian Virtù and State Maintenance
 * domain: political
 * * SUMMARY:
 * The practice of statecraft, as described by Machiavelli, is a set of strategic
 * constraints imposed by a ruler (the Prince) to maintain power and impose order
 * amidst the chaos of Fortune (unpredictable events). It involves the calculated
 * use of law, force, and manipulation to coordinate subjects, neutralize rivals,
 * and ensure the state's survival.
 * * KEY AGENTS:
 * - The Prince: The institutional agent who imposes the constraint system.
 * - The People: The subjects who desire security and not to be oppressed.
 * - Rival Nobles: Dispossessed or competing power centers who are victims of the system.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(statecraft_virtu, 0.70). % High extraction of resources, loyalty, and autonomy.
domain_priors:suppression_score(statecraft_virtu, 0.90).   % Extremely high; the Prince must eliminate all alternative power centers.
domain_priors:theater_ratio(statecraft_virtu, 0.10).       % Low; Machiavelli prioritizes effective action over appearances.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(statecraft_virtu, extractiveness, 0.70).
narrative_ontology:constraint_metric(statecraft_virtu, suppression_requirement, 0.90).
narrative_ontology:constraint_metric(statecraft_virtu, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% The system is presented as a necessary mechanism for order and security.
narrative_ontology:constraint_claim(statecraft_virtu, enforcement).

% Binary flags
domain_priors:requires_active_enforcement(statecraft_virtu). % Requires "good arms and good laws."

% Structural property derivation hooks:
% These are required for Tangled Rope classification.
narrative_ontology:constraint_beneficiary(statecraft_virtu, the_prince).
narrative_ontology:constraint_beneficiary(statecraft_virtu, state_stability).
narrative_ontology:constraint_victim(statecraft_virtu, rival_nobles).
narrative_ontology:constraint_victim(statecraft_virtu, dispossessed_lords).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For the people and especially rival nobles, the state is a coercive trap.
% Its laws and armies extract resources and suppress dissent.
constraint_indexing:constraint_classification(statecraft_virtu, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% To the Prince, the state is a functional coordination mechanism—a Rope—that
% he uses to manage society, defend against external threats, and build power.
constraint_indexing:constraint_classification(statecraft_virtu, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% An analyst sees both the coordination function (providing stability) and the
% severe, asymmetric extraction required to maintain it. It requires active
% enforcement, benefits the ruler, and victimizes rivals. This is a classic Tangled Rope.
constraint_indexing:constraint_classification(statecraft_virtu, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(statecraft_virtu_tests).

test(perspectival_gap) :-
    % Verify the gap between the Prince (institutional) and his subjects (powerless).
    constraint_indexing:constraint_classification(statecraft_virtu, rope, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(statecraft_virtu, snare, context(agent_power(powerless), _, _, _)),
    writeln('Perspectival gap (Rope vs Snare) confirmed.').

test(tangled_rope_analytical_view) :-
    % Verify the analytical observer correctly identifies the hybrid nature.
    constraint_indexing:constraint_classification(statecraft_virtu, tangled_rope, context(agent_power(analytical), _, _, _)),
    writeln('Analytical classification as Tangled Rope confirmed.').

test(tangled_rope_structural_requirements) :-
    % Verify all three structural properties for Tangled Rope are present.
    narrative_ontology:constraint_beneficiary(statecraft_virtu, _),
    narrative_ontology:constraint_victim(statecraft_virtu, _),
    domain_priors:requires_active_enforcement(statecraft_virtu).

:- end_tests(statecraft_virtu_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect Machiavelli's core thesis: state stability is a constructed
 * order that requires immense coercion.
 * - Base Extractiveness (0.70): The state extracts resources, loyalty, and autonomy
 *   from its subjects to function.
 * - Suppression Score (0.90): The Prince must be willing to "extinguish" rival
 *   bloodlines and suppress any alternative power centers. This is the definition
 *   of high suppression.
 * - Perspectival Gap: The gap is the essence of Machiavellian politics. The Prince
 *   views the state as a tool for coordination and glory (Rope). His subjects and
 *   rivals experience it as a coercive, extractive system (Snare).
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * A naive analysis might classify this system as a pure Snare due to the high
 * extraction and suppression. However, this would be a mandatrophy error, as it
 * ignores the genuine coordination function the state provides (e.g., defense
 * against foreign invasion, stable laws for commerce). The Tangled Rope
 * classification correctly captures this duality: it is a system that provides
 * real coordination benefits, but these benefits are funded by asymmetric
 * extraction and maintained by coercive force.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_statecraft_virtu,
    'Is the Prince acting for personal glory or for the long-term stability of the state?',
    'Observing state policy after the Prince is secure. Does he transition from extraction to public works, or continue to plunder?',
    'If for personal glory, the system is a pure Snare. If for state stability, it remains a Tangled Rope.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(statecraft_virtu, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This models the consolidation of a new principality. Initially, extraction is
% high to establish control. It remains high to maintain that control.
% Theater is consistently low, as the system is brutally functional.

% Theater ratio over time (metric_substitution):
narrative_ontology:measurement(statecraft_virtu_tr_t0, statecraft_virtu, theater_ratio, 0, 0.10).
narrative_ontology:measurement(statecraft_virtu_tr_t5, statecraft_virtu, theater_ratio, 5, 0.10).
narrative_ontology:measurement(statecraft_virtu_tr_t10, statecraft_virtu, theater_ratio, 10, 0.10).

% Extraction over time (extraction_accumulation):
narrative_ontology:measurement(statecraft_virtu_ex_t0, statecraft_virtu, base_extractiveness, 0, 0.60).
narrative_ontology:measurement(statecraft_virtu_ex_t5, statecraft_virtu, base_extractiveness, 5, 0.65).
narrative_ontology:measurement(statecraft_virtu_ex_t10, statecraft_virtu, base_extractiveness, 10, 0.70).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The state is, at its core, a mechanism for enforcing the Prince's will.
narrative_ontology:coordination_type(statecraft_virtu, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: steinmetz_valuation_asymmetry
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-05-22
% ============================================================================

:- module(constraint_steinmetz_valuation_asymmetry, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:coordination_type/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: steinmetz_valuation_asymmetry
 * human_readable: The Steinmetz Chalk Mark (Knowledge Valuation Asymmetry)
 * domain: economic/technological
 * * SUMMARY:
 * This constraint models the extreme asymmetry between the value of physical labor and the value of specialized knowledge, as illustrated by the apocryphal story of Charles Proteus Steinmetz and Henry Ford. Steinmetz solves a critical problem with a "gigantic generator" by making a single chalk mark, then submits an invoice for $10,000: $1 for the chalk mark, and $9,999 for "knowing where to mark."
 * * KEY AGENTS:
 * - Ford's Engineers: Subject (Powerless), unable to solve the problem.
 * - Henry Ford: Payer (Institutional), trapped by operational failure.
 * - Charles Steinmetz: Beneficiary (Powerful), the expert with unique knowledge.
 * - Analytical Observer: Auditor (Analytical), assessing the entire system.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(steinmetz_valuation_asymmetry, 0.90). % The $9,999 fee for knowledge is almost total extraction relative to the $1 physical act.
domain_priors:suppression_score(steinmetz_valuation_asymmetry, 0.50).   % Alternatives (internal engineers) existed but were ineffective, making Steinmetz's solution the only viable one.
domain_priors:theater_ratio(steinmetz_valuation_asymmetry, 0.05).       % The action is purely functional; there is no performative aspect.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(steinmetz_valuation_asymmetry, extractiveness, 0.90).
narrative_ontology:constraint_metric(steinmetz_valuation_asymmetry, suppression_requirement, 0.50).
narrative_ontology:constraint_metric(steinmetz_valuation_asymmetry, theater_ratio, 0.05).

% Constraint self-claim (what does the constraint claim to be?)
narrative_ontology:constraint_claim(steinmetz_valuation_asymmetry, constructed).

% Binary flags
domain_priors:requires_active_enforcement(steinmetz_valuation_asymmetry). % The value is only realized via the itemized invoice.

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(steinmetz_valuation_asymmetry, expert_class). % Steinmetz and the value of expertise.
narrative_ontology:constraint_victim(steinmetz_valuation_asymmetry, capital_owner).   % Ford, who must pay to restore operations.

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE ENGINEERS (SUBJECT)
% For the engineers unable to solve the problem, it was an immutable law of physics.
constraint_indexing:constraint_classification(steinmetz_valuation_asymmetry, mountain,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: HENRY FORD (THE PAYER)
% For the institutional actor trapped by the failure, the non-negotiable, high-cost solution is a snare.
constraint_indexing:constraint_classification(steinmetz_valuation_asymmetry, snare,
    context(agent_power(institutional),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 3: CHARLES STEINMETZ (THE BENEFICIARY)
% For the expert, the fee is a pure coordination mechanism to value unique knowledge fairly.
constraint_indexing:constraint_classification(steinmetz_valuation_asymmetry, rope,
    context(agent_power(powerful),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 4: THE ANALYTICAL OBSERVER
% The observer sees both the genuine coordination (generator fixed) and the asymmetric extraction (the fee).
constraint_indexing:constraint_classification(steinmetz_valuation_asymmetry, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(steinmetz_valuation_asymmetry_tests).

test(perspectival_gap_subject_vs_payer) :-
    constraint_indexing:constraint_classification(steinmetz_valuation_asymmetry, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(steinmetz_valuation_asymmetry, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless == mountain,
    TypeInstitutional == snare,
    TypePowerless \= TypeInstitutional.

test(analytical_view_is_tangled_rope) :-
    constraint_indexing:constraint_classification(steinmetz_valuation_asymmetry, tangled_rope, context(agent_power(analytical), _, _, _)).

test(tangled_rope_structural_requirements_met) :-
    narrative_ontology:constraint_beneficiary(steinmetz_valuation_asymmetry, _),
    narrative_ontology:constraint_victim(steinmetz_valuation_asymmetry, _),
    domain_priors:requires_active_enforcement(steinmetz_valuation_asymmetry).

:- end_tests(steinmetz_valuation_asymmetry_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The Steinmetz Chalk Mark story is a canonical example of a perspectival gap in economic valuation.
 * The base extractiveness is set to 0.90, reflecting the 9,999% markup over the physical act of marking with chalk ($1).
 * Suppression is moderate (0.50) because while alternatives (Ford's internal engineers) existed, they were ineffective, making Steinmetz's expertise the only viable option.
 *
 * The perspectival classifications are stark:
 * - For the powerless engineers, the problem was an insurmountable 'Mountain'.
 * - For the institutional but trapped Henry Ford, the massive, non-negotiable invoice was a 'Snare'.
 * - For the powerful expert Steinmetz, the fee was a 'Rope', a fair coordination mechanism to price unique, high-value knowledge.
 * - The analytical observer, seeing all facets, classifies it as a 'Tangled Rope'. This acknowledges both the genuine coordination function (the generator is fixed, value is restored) and the highly asymmetric extraction required to achieve it.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The extremely high extraction (0.90) risks a misclassification of this event as pure predation (Snare). The Tangled Rope classification is the resolution mechanism. It correctly identifies that this is not a simple coercive trap but a hybrid constraint with a legitimate, if expensive, coordination component. The system avoids mandatrophy by recognizing that Ford *did* receive immense value, while also acknowledging the extractive nature of the price paid for that value.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_steinmetz_valuation,
    'Was the $10,000 fee a calculated predatory price based on Ford''s desperation, or a standard valuation for unique expertise from GE at the time?',
    'Historical audit of GE''s consulting fees for similar high-stakes industrial problems in the 1920s.',
    'If predatory, it leans more towards Snare. If standard, it reinforces the Tangled Rope classification as a market-based coordination mechanism.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(steinmetz_valuation_asymmetry, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This is a singular event, so the metrics are stable across the interval.
% Theater ratio over time:
narrative_ontology:measurement(sva_tr_t0, steinmetz_valuation_asymmetry, theater_ratio, 0, 0.05).
narrative_ontology:measurement(sva_tr_t5, steinmetz_valuation_asymmetry, theater_ratio, 5, 0.05).
narrative_ontology:measurement(sva_tr_t10, steinmetz_valuation_asymmetry, theater_ratio, 10, 0.05).

% Extraction over time:
narrative_ontology:measurement(sva_ex_t0, steinmetz_valuation_asymmetry, base_extractiveness, 0, 0.90).
narrative_ontology:measurement(sva_ex_t5, steinmetz_valuation_asymmetry, base_extractiveness, 5, 0.90).
narrative_ontology:measurement(sva_ex_t10, steinmetz_valuation_asymmetry, base_extractiveness, 10, 0.90).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The constraint allocates a scarce resource (Steinmetz's knowledge) to a critical failure point.
narrative_ontology:coordination_type(steinmetz_valuation_asymmetry, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: stoic_logos_governance
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-27
% ============================================================================

:- module(constraint_stoic_logos_governance, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: stoic_logos_governance
 * human_readable: The Stoic Logos as an Imperial Governance Framework
 * domain: philosophical/political
 * * SUMMARY:
 * The Stoic framework, as practiced by Emperor Marcus Aurelius, represents a
 * constraint where the ruler submits his personal will to the Logos (divine
 * reason/natural law) for the good of the state. This system coordinates the
 * Pax Romana but extracts extreme personal autonomy and vitality from the ruler,
 * functioning as a self-imposed governance mechanism.
 * * KEY AGENTS:
 * - Marcus Aurelius: The Emperor, subject to the constraint (Institutional Power, Trapped Exit).
 * - Roman Citizen: Beneficiary of stability, but subject to imperial law (Powerless).
 * - The Roman State: The abstract entity benefiting from the coordination.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(stoic_logos_governance, 0.75). % Snare extraction >= 0.46
domain_priors:suppression_score(stoic_logos_governance, 0.80).   % Structural property (raw, unscaled).
domain_priors:theater_ratio(stoic_logos_governance, 0.10).       % Low theater; this is a deeply internalized belief system.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(stoic_logos_governance, extractiveness, 0.75).
narrative_ontology:constraint_metric(stoic_logos_governance, suppression_requirement, 0.80).
narrative_ontology:constraint_metric(stoic_logos_governance, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% Stoicism claims to be alignment with universal reason, i.e., natural law.
narrative_ontology:constraint_claim(stoic_logos_governance, natural_law).

% Binary flags
domain_priors:requires_active_enforcement(stoic_logos_governance). % Requires constant self-discipline and state power.

% Structural property derivation hooks for Tangled Rope:
narrative_ontology:constraint_beneficiary(stoic_logos_governance, roman_state). % Derives has_coordination_function/1
narrative_ontology:constraint_victim(stoic_logos_governance, marcus_aurelius_personal_will). % Derives has_asymmetric_extraction/1

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE EMPEROR (INSTITUTIONAL, TRAPPED) - SNARE
% Despite holding supreme power, Marcus Aurelius is personally trapped by his
% duty to the Logos. The framework extracts his personal autonomy and vitality
% for the sake of the state, making it a Snare from his perspective.
constraint_indexing:constraint_classification(stoic_logos_governance, snare,
    context(agent_power(institutional),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(global))).

% PERSPECTIVE 2: THE CITIZEN (POWERLESS, TRAPPED) - MOUNTAIN
% To a subject of the Roman Empire, the Emperor's rule, the laws, and the
% cosmic order (Logos) are perceived as an unchangeable, natural reality.
% They are fixed features of the world, hence a Mountain.
constraint_indexing:constraint_classification(stoic_logos_governance, mountain,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER - TANGLED ROPE
% An analyst sees both the massive coordination function (maintaining the Pax
% Romana) and the severe, asymmetric extraction of the ruler's autonomy. It
% requires active enforcement (self-discipline, state power) and is not a
% natural law. This dual nature defines it as a Tangled Rope.
constraint_indexing:constraint_classification(stoic_logos_governance, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(stoic_logos_governance_tests).

test(perspectival_gap_ruler_vs_subject) :-
    constraint_indexing:constraint_classification(stoic_logos_governance, TypeRuler, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(stoic_logos_governance, TypeSubject, context(agent_power(powerless), _, _, _)),
    assertion(TypeRuler == snare),
    assertion(TypeSubject == mountain),
    TypeRuler \= TypeSubject.

test(analytical_view_is_tangled_rope) :-
    constraint_indexing:constraint_classification(stoic_logos_governance, tangled_rope, context(agent_power(analytical), _, _, _)).

test(high_extraction_and_suppression_thresholds) :-
    narrative_ontology:constraint_metric(stoic_logos_governance, extractiveness, E),
    narrative_ontology:constraint_metric(stoic_logos_governance, suppression_requirement, S),
    assertion(E >= 0.46),
    assertion(S >= 0.60).

:- end_tests(stoic_logos_governance_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect a system of immense power and cost. The base_extractiveness
 * (0.75) is high because the constraint demands the total sublimation of the
 * ruler's personal will and desires to the abstract 'good of the state'. The
 * suppression_score (0.80) is also high because viable alternatives for a ruler
 * (e.g., tyranny, Epicurean detachment) are philosophically and politically
 * suppressed as paths to ruin.
 *
 * The Perspectival Gap is stark: The Emperor (institutional) experiences this
 * as a personal 'Snare', a duty from which there is no escape that consumes his
 * life. The citizen (powerless) experiences the result as a 'Mountain'—the

 * stability of the Empire is a seemingly permanent and unchangeable feature
 * of their world.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * This constraint is a classic case for Mandatrophy resolution. A naive
 * analysis focusing only on the high extraction (0.75) and suppression (0.80)
 * would classify it as a pure Snare. However, this would ignore its profound
 * and effective coordination function: the maintenance of the Pax Romana, a
 * system of law and stability for millions. The 'Tangled Rope' classification
 * correctly captures this duality. It acknowledges that the system is both a
 * genuine coordination mechanism (benefiting the 'roman_state') and a source
 * of severe, asymmetric extraction (cost borne by 'marcus_aurelius_personal_will').
 * This prevents the system from incorrectly dismissing a functional, albeit costly,
 * governance model as pure predation.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_stoic_logos_governance_1,
    'Is the high extraction a functional necessity for Roman stability, or a self-imposed psychological snare by Marcus?',
    'Comparative analysis of Roman stability and imperial welfare under Stoic vs. non-Stoic "good" emperors.',
    'If necessity -> closer to Mountain properties. If choice -> confirms Snare/Tangled Rope properties.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(stoic_logos_governance, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This was a mature, stable philosophical system during the interval of
% Marcus Aurelius's reign. The measurements are flat, indicating no significant
% drift in its core properties during this period.
%
% Theater ratio over time:
narrative_ontology:measurement(stoic_logos_tr_t0, stoic_logos_governance, theater_ratio, 0, 0.10).
narrative_ontology:measurement(stoic_logos_tr_t5, stoic_logos_governance, theater_ratio, 5, 0.10).
narrative_ontology:measurement(stoic_logos_tr_t10, stoic_logos_governance, theater_ratio, 10, 0.10).

% Extraction over time:
narrative_ontology:measurement(stoic_logos_ex_t0, stoic_logos_governance, base_extractiveness, 0, 0.75).
narrative_ontology:measurement(stoic_logos_ex_t5, stoic_logos_governance, base_extractiveness, 5, 0.75).
narrative_ontology:measurement(stoic_logos_ex_t10, stoic_logos_governance, base_extractiveness, 10, 0.75).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The Stoic framework acts as a moral and ethical enforcement mechanism for
% imperial policy and personal conduct.
narrative_ontology:coordination_type(stoic_logos_governance, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: strange_attractor_dynamics
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: David Ruelle / Floris Takens (1971) / Chaos Theory
% ============================================================================

:- module(constraint_strange_attractor, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: strange_attractor_dynamics
 * human_readable: Strange Attractors (Topological Chaos)
 * domain: mathematical/technological/physical
 * temporal_scope: 1971 - Present (Civilizational)
 * spatial_scope: Global/Abstract (Non-linear Phase Space)
 * * SUMMARY:
 * A strange attractor is a set of physical states toward which a chaotic 
 * system evolves. Unlike simple attractors (points or loops), strange 
 * attractors have fractal structures and exhibit sensitive dependence on 
 * initial conditions. They represent a fundamental limit on the geometry 
 * of stability.
 * * KEY AGENTS:
 * - The System State (The Trajectory): The powerless agent following the 
 * flow, trapped on a manifold that never repeats.
 * - The Nonlinear Dynamics Researcher: An institutional agent who uses 
 * attractor reconstruction (Takens' Theorem) to map hidden order.
 * - The Predictor: An agent for whom the attractor's "strangeness" acts 
 * as a "Snare," extracting the possibility of long-term certainty.
 * * NARRATIVE ARC:
 * The strange attractor is a "Mountain" of topological fate—the system 
 * must eventually fall into this shape. In signal processing, it is a 
 * "Rope" for identifying deterministic noise. However, the "folding and 
 * stretching" of phase space acts as a "Snare" for prediction, 
 * exponentially extracting information until the future is a void.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Structural Anchor
narrative_ontology:interval(strange_attractor_dynamics, 1971, 2026).
narrative_ontology:constraint_claim(strange_attractor_dynamics, mountain).

% Base extractiveness score (0.0-1.0)
% Rationale: Moderate (0.35). Strange attractors "extract" initial 
% information at a rate determined by the Kolmogorov-Sinai entropy. 
% To maintain any "Rope" of coordination, observers must constantly 
% re-invest in new data measurement.
domain_priors:base_extractiveness(strange_attractor_dynamics, 0.35).

% Suppression score (0.0-1.0)
% Rationale: Moderate (0.3). The discovery of strange attractors 
% suppressed the Ruelle-Takens-Newhouse alternative of "purely 
% stochastic" turbulence, proving it was actually deterministic.
domain_priors:suppression_score(strange_attractor_dynamics, 0.3).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(strange_attractor_dynamics, extractiveness, 0.35).
narrative_ontology:constraint_metric(strange_attractor_dynamics, suppression_requirement, 0.3).

% Enforcement: Emerges naturally from the interaction of dissipation 
% and non-linearity in phase space.
domain_priors:emerges_naturally(strange_attractor_dynamics).

% Metrics for Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(strange_attractor_dynamics, data_reconstruction_engineers).
constraint_beneficiary(strange_attractor_dynamics, secure_communication_protocols). % Chaos-based encryption.
constraint_victim(strange_attractor_dynamics, laplacian_determinists).
constraint_victim(strange_attractor_dynamics, long_term_linear_extrapolators).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE PHASE SPACE TRAJECTORY - Mountain
   --------------------------------------------------------------------------
   WHO: powerless - The particle/state cannot leave the attractor basin.
   WHEN: immediate - True at every infinitesimal step.
   WHERE: trapped - Bound to the fractal manifold.
   SCOPE: local - Immediate neighborhood of the current state.
   
   WHY THIS CLASSIFICATION:
   For the state itself, the attractor is an absolute, unyielding 
   geographic fate. It cannot "choose" to enter a periodic loop or 
   fly off to infinity once it is within the basin of attraction.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    strange_attractor_dynamics,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE ENVELOPE DESIGNER - Rope
   --------------------------------------------------------------------------
   WHO: institutional - Power to design systems that operate within the attractor.
   WHEN: biographical - Planning the flight envelope of a vehicle or economy.
   WHERE: mobile - Can move parameters to stay within a specific regime.
   SCOPE: global - Universal application to all systems of this class.
   
   WHY THIS CLASSIFICATION:
   For the architect, the attractor is a "Rope"—a functional coordination 
   mechanism. While unpredictable in the detail, the "bound" of the 
   attractor ensures the system stays within a known statistical 
   envelope, allowing for safety margins.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    strange_attractor_dynamics,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE PRECISION-BOUND SIMULATOR - Snare
   --------------------------------------------------------------------------
   WHO: powerless - Bound by the bit-depth of the hardware.
   WHEN: immediate - The Lyapunov horizon where the simulation fails.
   WHERE: constrained - No path to future certainty.
   SCOPE: local - A specific high-entropy region of the attractor.
   
   WHY THIS CLASSIFICATION:
   The attractor's "strangeness" acts as a "Snare" for digital models. 
   It exponentially extracts the value of the initial bits (extraction), 
   "strangling" the validity of the model until it is indistinguishable 
   from random noise.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    strange_attractor_dynamics,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(local)
    )
) :- 
    domain_priors:base_extractiveness(strange_attractor_dynamics, E),
    E >= 0.3,
    !.

/* ==========================================================================
   4. TESTS (Insights into Phase Space Gravity)
   ========================================================================== */

:- begin_tests(strange_attractor_tests).

test(attractor_fate_variance) :-
    % State -> Mountain
    constraint_indexing:constraint_classification(strange_attractor_dynamics, Type1, context(powerless, immediate, trapped, local)),
    % Architect -> Rope
    constraint_indexing:constraint_classification(strange_attractor_dynamics, Type2, context(institutional, biographical, mobile, global)),
    Type1 = mountain,
    Type2 = rope.

test(predictability_snare_penalty) :-
    % A powerless simulator with constrained precision sees it as a Snare.
    constraint_indexing:constraint_classification(strange_attractor_dynamics, snare, context(powerless, immediate, constrained, local)).

test(emergence) :-
    domain_priors:emerges_naturally(strange_attractor_dynamics).

:- end_tests(strange_attractor_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * 1. CLASSIFICATION: I chose "Mountain" for the global geometry because 
 * the attractor's existence is a topological mandate.
 * 2. TYPE SHIFT: Highlighted how the "Strangeness" is a tool (Rope) for 
 * those who want noise/entropy, but a trap (Snare) for those seeking 
 * classical determinism.
 * 3. EXTRACTIVENESS (0.35): Assigned due to the "Information Loss" 
 * characteristic of positive Lyapunov exponents.
 */

% OMEGA IDENTIFICATION
omega_variable(
    attractor_shadowing,
    "Do 'true' trajectories shadow the 'snare' of numerical simulation orbits?",
    resolution_mechanism("Verification of the Shadowing Lemma for specific attractor topologies."),
    impact("If Yes: The digital 'Snare' is a 'Scaffold' that actually reflects a real 'Rope'."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Limit Cycles (Periodic Attractors)
 * Viability: Systems with lower-dimensional energy dissipation.
 * Suppression: Strange attractors "suppress" the hope for simple 
 * cycles in high-dimensional nonlinear turbulence.
 * * ALTERNATIVE 2: Pure Random Walk (Stochasticity)
 * Viability: Treating the signal as white noise.
 * Conclusion: Chaos theory proves this is an "unnecessary Scaffold" 
 * because the underlying Mountain is actually deterministic.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Load: ?- [strange_attractor_dynamics].
% Analyze: ?- constraint_indexing:multi_index_report(strange_attractor_dynamics).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: sts86_ascent_checklist
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: JSC-48005-86 - STS-86 Ascent Checklist
% ============================================================================

:- module(constraint_sts86_ascent_checklist, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: sts86_ascent_checklist
 * human_readable: Space Shuttle Ascent/Abort Procedural Matrix
 * domain: technological/institutional
 * temporal_scope: immediate (T- minus 5m to Orbit)
 * spatial_scope: cockpit/national
 * 
 * SUMMARY:
 * The checklist (JSC-48005) represents the ultimate procedural constraint. 
 * It manages the transition from a ground-controlled environment to a 
 * physics-dominated ascent where human agency is bound by rigid logic gates.
 * 
 * KEY AGENTS:
 * - NASA/Mission Operations (Institutional): The architect of the procedural matrix.
 * - Flight Crew (CDR/PLT) (Individual Moderate): The agents executing the script.
 * - The 'Powerless' Pilot (Individual Powerless): The crew-member in a 3-Engine-Out scenario.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(sts86_ascent_checklist, 0, 10).
narrative_ontology:constraint_claim(sts86_ascent_checklist, mountain).

% Base extractiveness: 0.05.
% NASA gains nothing from crew failure. 
% Benefit flow is aimed at systemic survival.
domain_priors:base_extractiveness(sts86_ascent_checklist, 0.05).

% Suppression: 0.95.
% Deviating from the checklist is treated 
% as a failure mode itself. Alternative "freestyle" flying is invisible.
domain_priors:suppression_score(sts86_ascent_checklist, 0.95).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(sts86_ascent_checklist, extractiveness, 0.05).
narrative_ontology:constraint_metric(sts86_ascent_checklist, suppression_requirement, 0.95).

% Enforcement: Requires active maintenance (Ground Control / CPCB).
domain_priors:requires_active_enforcement(sts86_ascent_checklist).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(sts86_ascent_checklist, mission_success).
constraint_victim(sts86_ascent_checklist, pilot_discretion).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: NASA/MISSION OPERATIONS - Rope
   --------------------------------------------------------------------------
   WHO: institutional (The architect of the procedural matrix)
   WHEN: historical (From mission planning to execution)
   WHERE: arbitrage (Balances safety, performance, and mission objectives)
   
   WHY THIS CLASSIFICATION:
   For NASA, the checklist is a 'Rope'. It is a crucial coordination mechanism
   that synchronizes the actions of thousands of individuals and complex systems
   to ensure a successful launch. It is a tool for managing immense complexity
   and mitigating risk.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    sts86_ascent_checklist,
    rope,
    context(
        agent_power(institutional),
        time_horizon(historical),
        exit_options(arbitrage),
        spatial_scope(national)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: FLIGHT CREW (CDR/PLT) - Tangled Rope
   --------------------------------------------------------------------------
   WHO: individual_moderate (The agents executing the script)
   WHEN: immediate (During the ascent phase)
   WHERE: constrained (Bound by the checklist's procedures)
   
   WHY THIS CLASSIFICATION:
   For the flight crew, the checklist is a 'Tangled Rope'. It's a 'Rope' because
   it provides a clear, life-saving path through a high-stakes environment.
   It's 'Tangled' because it severely restricts their autonomy, suppressing
   discretionary decision-making in favor of rigid adherence to pre-planned procedures.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    sts86_ascent_checklist,
    tangled_rope,
    context(
        agent_power(individual_moderate),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE 'POWERLESS' PILOT - Mountain
   --------------------------------------------------------------------------
   WHO: powerless (The crew-member in a 3-Engine-Out scenario)
   WHEN: immediate (During a catastrophic failure)
   WHERE: trapped (Bound by the laws of physics and the only available abort mode)
   
   WHY THIS CLASSIFICATION:
   In a 3-Engine-Out scenario, the checklist becomes a 'Mountain'. It is no
   longer a choice but a reflection of the physical laws governing the shuttle's
   trajectory. The "BAILOUT" procedure is the only path, an immutable reality
   dictated by the physics of the situation.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    sts86_ascent_checklist,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
).

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(sts86_ascent_checklist_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(sts86_ascent_checklist, Type1, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(sts86_ascent_checklist, Type2, context(agent_power(individual_moderate), _, _, _)),
    constraint_indexing:constraint_classification(sts86_ascent_checklist, Type3, context(agent_power(powerless), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3,
    Type1 \= Type3.

:- end_tests(sts86_ascent_checklist_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. CLASSIFICATION RATIONALE:
 *    - NASA (Rope): A tool for coordination and risk management.
 *    - Flight Crew (Tangled Rope): A life-saving guide that constrains autonomy.
 *    - Powerless Pilot (Mountain): An immutable reality dictated by physics.
 * 
 * 2. CORE INSIGHT: The STS-86 Ascent Checklist demonstrates how a single
 *    constraint can transform based on context. What is a flexible 'Rope' for
 *    the institution becomes a 'Tangled Rope' for the operators and, in a crisis,
 *    a stark 'Mountain' of physical necessity.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * The core uncertainty is the interplay between human agency and procedural rigidity in extreme situations.
 */

omega_variable(
    automation_vs_discretion,
    "In an unforeseen crisis, is strict adherence to the checklist (Mountain) more likely to lead to survival than a crew commander's discretionary action (Rope), and at what point does the checklist become a 'Snare'?",
    resolution_mechanism("Analysis of historical spaceflight incidents; advanced simulation of off-nominal scenarios with human-in-the-loop testing."),
    impact("If adherence is better: The 'Mountain' is a safe haven. If discretion is better: The 'Mountain' is a potential 'Snare'."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */
/**
 * VIABLE ALTERNATIVES
 *
 * ALTERNATIVE 1: "Freestyle" Piloting (Full Discretion)
 *    Viability: Theoretically possible but catastrophic in practice due to the complexity of the system.
 *    Suppression: Actively and entirely suppressed by the institutional culture of NASA, training, and the very existence of the checklist. Deviation is treated as a severe failure mode.
 *
 * CONCLUSION:
 * The STS-86 checklist is a 'Rope' that actively suppresses the alternative of
 * full pilot discretion, which, in such a complex system, would almost certainly
 * be a fatal 'Snare'. The rigidity of the checklist is a direct response to the
 * unforgiving 'Mountain' of orbital mechanics.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/sts86_ascent_checklist].
 * 2. Multi-perspective: ?- multi_index_report(sts86_ascent_checklist).
 * 3. Run tests: ?- run_tests(sts86_ascent_checklist_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: sturgeons_law
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Theodore Sturgeon (1951/1958) / Science Fiction Criticism
% ============================================================================

:- module(constraint_sturgeons_law, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    constraint_indexing:constraint_classification/3,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:constraint_metric/3,
    constraint_beneficiary/2,
    constraint_victim/2.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: sturgeons_law
 * human_readable: Sturgeon's Law ("90% of everything is crap")
 * domain: artistic/sociological
 * temporal_scope: Permanent (Modern Era)
 * spatial_scope: Global (Creative/Information Systems)
 * * SUMMARY:
 * Formulated by sci-fi writer Theodore Sturgeon, the law states that "ninety percent 
 * of everything is crud." It was originally a defense of science fiction against 
 * critics, arguing that while 90% of sci-fi is bad, 90% of *all* literature, art, 
 * and film is also bad. It represents a fundamental baseline of quality distribution.
 * * KEY AGENTS:
 * - The Sci-Fi Writer (Sturgeon): Seeking to defend the 10% "pearls" from being 
 * dismissed by the presence of the 90% "crud."
 * - The Critic: Uses the 90% to invalidate a whole genre or domain.
 * - The Consumer: Navigating a sea of mediocrity to find value.
 * * NARRATIVE ARC:
 * The law functions as a protective shield for niche domains. By acknowledging 
 * the "Mountain" of mediocrity, the observer is freed to find the "Rope" of 
 * excellence. It becomes a "Snare" when the 90% becomes so overwhelming that 
 * the 10% is never discovered or funded.
 */

/* ==========================================================================
   2. BASE PROPERTIES (Reality Layer)
   ========================================================================== */

% Required for structural integration
narrative_ontology:interval(sturgeon_interval, 0, 10).
narrative_ontology:constraint_claim(sturgeons_law, mountain).

% Base extractiveness: 0.1 (Low)
% Rationale: The "crud" doesn't necessarily extract value; it mostly 
% consumes attention and "shelf space" without providing a return.
domain_priors:base_extractiveness(sturgeons_law, 0.1).

% Suppression score: 0.4 (Moderate)
% Rationale: The sheer volume of the 90% often suppresses the visibility of 
% the high-quality 10%, requiring active "curation" to overcome.
domain_priors:suppression_score(sturgeons_law, 0.4).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(sturgeons_law, extractiveness, 0.1).
narrative_ontology:constraint_metric(sturgeons_law, suppression_requirement, 0.4).

% Enforcement: Emerges naturally from the difficulty of achieving excellence.
domain_priors:emerges_naturally(sturgeons_law).

% Metrics for Executive Summary
% Beneficiaries: Curators and critics who gain power by filtering the 90%.
constraint_beneficiary(sturgeons_law, expert_curators).

% Victims: The "Average" creator whose work is lost in the 90% noise.
constraint_victim(sturgeons_law, mid_tier_creatives).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE SCI-FI WRITER - ROPE
   --------------------------------------------------------------------------
   
   WHO: individual_moderate (A professional navigating a maligned genre).
   WHEN: biographical (Protecting their career's validity).
   WHERE: mobile (Can point to the 10% of other genres for comparison).
   SCOPE: global.
   
   WHY THIS CLASSIFICATION:
   For Sturgeon himself, the law is a Rope. It is a coordination tool that 
   standardizes expectations. By admitting 90% is bad, he moors his defense 
   to a universal truth, allowing him to pull the 10% of "hard" sci-fi up 
   to the level of high literature.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    sturgeons_law,
    rope,
    context(
        agent_power(individual_moderate),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE CASUAL CONSUMER - MOUNTAIN
   --------------------------------------------------------------------------
   
   WHO: powerless (A reader browseing a bookstore).
   WHEN: immediate (A single afternoon of searching).
   WHERE: trapped (Cannot change the quality of what is published).
   SCOPE: national.
   
   WHY THIS CLASSIFICATION:
   To the consumer, the 90% is a Mountain. It is an immovable fact of the 
   environment. They must climb through stacks of "crud" to find something 
   worth reading. They have no power over the distribution; they can only 
   endure it.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    sturgeons_law,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(national)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE ALGORITHMIC FILTER - SNARE
   --------------------------------------------------------------------------
   
   WHO: institutional (A streaming service or social media platform).
   WHEN: historical (Scaling over decades of content).
   WHERE: arbitrage (Can exploit the 90% for cheap engagement).
   SCOPE: global.
   
   WHY THIS CLASSIFICATION:
   For the platform, Sturgeon's Law is a Snare used on the creators. Because 
   "everything is crud," the platform feels justified in using aggressive 
   algorithms that squeeze the 90% for "engagement" while charging the 10% 
   for "visibility." The law justifies a system where quality is secondary 
   to volume.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    sturgeons_law,
    snare,
    context(
        agent_power(institutional),
        time_horizon(historical),
        exit_options(arbitrage),
        spatial_scope(global)
    )
) :- !.

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(sturgeons_law_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(sturgeons_law, Type1, context(agent_power(individual_moderate), _, _, _)),
    constraint_indexing:constraint_classification(sturgeons_law, Type2, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(sturgeons_law, Type3, context(agent_power(institutional), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3.

test(crud_distribution_immutability) :-
    % From a civilizational view, the ratio is seen as a physical law (Mountain).
    constraint_indexing:constraint_classification(sturgeons_law, mountain, context(_, civilizational, _, _)).

:- end_tests(sturgeons_law_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * * KEY DECISIONS:
 * 1. CLASSIFICATION: Chose "Rope" for the writer because the law was 
 * intended as an empowering rhetorical device, not a defeatist one.
 * 2. SNARE: Applied the Snare concept to institutional gatekeepers who 
 * use the "90% is crud" axiom to justify poor treatment of creatives 
 * or low-quality automated systems.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω)
   ========================================================================== */

omega_variable(
    quality_threshold_subjectivity,
    "Is 'crap' (crud) an objective statistical failure (Mountain) or a 
    subjective perspectival judgment (Rope)?",
    resolution_mechanism("Cross-cultural longitudinal study of consensus on 'classic' status"),
    impact("If Mountain: Sturgeon's ratio is a biological limit. If Rope: It's an index of shifting taste."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Highly Curated Guild Systems
 * Viability: Historically common (e.g., Medieval guilds).
 * Suppression: High. Modern digital platforms prefer "permissionless entry" 
 * which guarantees Sturgeon's Law scales infinitely.
 * * CONCLUSION:
 * The 90/10 ratio is exacerbated by the lack of gatekeepers. In highly 
 * curated systems, the 90% might be 50%, shifting the law from a Mountain 
 * toward a Rope.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * ?- [constraint_sturgeons_law].
 * ?- run_tests(sturgeons_law_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: suanne_coup_of_peace
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-16
% ============================================================================

:- module(constraint_suanne_coup_of_peace, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: suanne_coup_of_peace
 * human_readable: The Hostile Social Environment at the Lead Basketball Game
 * domain: social/cultural
 * * SUMMARY:
 * This constraint models the hostile, racist social environment faced by the Pine Ridge basketball team
 * during a game in Lead, South Dakota, as described in Ian Frazier's "On the Rez." The environment
 * functions as a tool of social dominance, extracting dignity and focus from the visiting team through
 * coordinated mockery. The narrative's resolution—SuAnne Big Crow's "Coup of Peace"—is an action that
 * breaks this constraint, but the constraint itself is the initial predatory atmosphere.
 * * KEY AGENTS:
 * - Pine Ridge Team: Subject (Powerless), victims of the harassment.
 * - Lead Fans Collective: Beneficiary (Institutional), perpetrators of the harassment.
 * - Systems Analyst: Auditor (Analytical), observing the structure of the conflict.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(suanne_coup_of_peace, 0.80). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(suanne_coup_of_peace, 0.70).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(suanne_coup_of_peace, 0.05).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(suanne_coup_of_peace, extractiveness, 0.80).
narrative_ontology:constraint_metric(suanne_coup_of_peace, suppression_requirement, 0.70).
narrative_ontology:constraint_metric(suanne_coup_of_peace, theater_ratio, 0.05).

% Constraint self-claim (what does the constraint claim to be?)
% The heckling is framed as a legitimate part of "home court advantage."
narrative_ontology:constraint_claim(suanne_coup_of_peace, coordination).

% Binary flags
domain_priors:requires_active_enforcement(suanne_coup_of_peace). % The heckling is an active, coordinated performance.

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope.
narrative_ontology:constraint_beneficiary(suanne_coup_of_peace, lead_fans_collective).
narrative_ontology:constraint_victim(suanne_coup_of_peace, pine_ridge_team).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For the visiting team, the coordinated harassment is a predatory trap,
% extracting their dignity and ability to focus.
constraint_indexing:constraint_classification(suanne_coup_of_peace, snare,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For the home crowd, the heckling is a coordination mechanism (a Rope) to
% establish home-court advantage and enforce local social dominance.
constraint_indexing:constraint_classification(suanne_coup_of_peace, rope,
    context(agent_power(institutional),
            time_horizon(immediate),
            exit_options(arbitrage),
            spatial_scope(local))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees both the coordination function (Rope) and the severe,
% asymmetric extraction (Snare). This hybrid nature, requiring active
% enforcement, defines it as a Tangled Rope.
constraint_indexing:constraint_classification(suanne_coup_of_peace, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(suanne_coup_of_peace_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(suanne_coup_of_peace, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(suanne_coup_of_peace, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(analytical_classification_is_tangled_rope) :-
    % Verify the analytical observer correctly identifies the hybrid nature.
    constraint_indexing:constraint_classification(suanne_coup_of_peace, tangled_rope, context(agent_power(analytical), _, _, _)).

test(threshold_validation) :-
    % Verify that the base extraction is high, justifying Snare/Tangled Rope classifications.
    domain_priors:base_extractiveness(suanne_coup_of_peace, E),
    E >= 0.46.

:- end_tests(suanne_coup_of_peace_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base scores reflect a highly predatory social environment. The extraction (0.80) represents the
 * theft of dignity, psychological safety, and focus from the visiting team. The suppression (0.70)
 * represents the overwhelming social pressure that prevents any alternative narrative from emerging
 * without a significant intervention. The theater ratio is very low (0.05) because the hostility is
 * genuine, not merely performative.
 *
 * The Perspectival Gap is stark:
 * - The Pine Ridge team experiences this as a Snare: a trap with high coercion and no escape.
 * - The Lead fans see it as a Rope: a tool for coordinating group identity and asserting dominance.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * Classifying this from an analytical perspective as a Tangled Rope is crucial. A simple Snare
 * classification would miss the coordination function that gives the constraint its power and social
 * legitimacy among the perpetrators. By acknowledging both the coordination (Rope) and the extraction
 * (Snare) components, the system avoids mischaracterizing the mechanism and correctly identifies why
 * it is so stable and effective.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_suanne_coup_of_peace,
    "Is the 'Coup of Peace' a repeatable protocol for de-escalation, or was its success dependent on the unique charisma of SuAnne Big Crow?",
    "Audit of similar 'coup' attempts by different agents in diverse hostile environments, analyzing the role of individual charisma versus replicable cultural protocols.",
    "If dependent on charisma, the resolution is an outlier event. If a repeatable protocol, it is a functional 'Rope' for social change.",
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(suanne_coup_of_peace, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection. The hostile environment was a stable,
% pre-existing condition, so the metrics are flat leading up to the event.
% The "Coup of Peace" is the event that breaks this stable constraint.
%
% Theater ratio over time (consistently low, as hostility was genuine):
narrative_ontology:measurement(scop_tr_t0, suanne_coup_of_peace, theater_ratio, 0, 0.05).
narrative_ontology:measurement(scop_tr_t5, suanne_coup_of_peace, theater_ratio, 5, 0.05).
narrative_ontology:measurement(scop_tr_t10, suanne_coup_of_peace, theater_ratio, 10, 0.05).

% Extraction over time (consistently high):
narrative_ontology:measurement(scop_ex_t0, suanne_coup_of_peace, base_extractiveness, 0, 0.80).
narrative_ontology:measurement(scop_ex_t5, suanne_coup_of_peace, base_extractiveness, 5, 0.80).
narrative_ontology:measurement(scop_ex_t10, suanne_coup_of_peace, base_extractiveness, 10, 0.80).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The heckling serves as a mechanism to enforce a social hierarchy.
narrative_ontology:coordination_type(suanne_coup_of_peace, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: suanne_face_restoration
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-22
% ============================================================================

:- module(constraint_suanne_face_restoration, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:coordination_type/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: suanne_face_restoration
 * human_readable: The Coup of Positive Politeness
 * domain: social
 * * SUMMARY:
 * This constraint models the social dynamic during a 1988 basketball game where SuAnne Marie Big Crow, a Lakota player, faced a hostile, taunting crowd. The crowd's mockery was a "Face-Threatening Act" (FTA) that extracted social dignity from her team. SuAnne's response—performing a traditional Lakota dance—functioned as a "Positive Politeness" strategy, a coordination mechanism that restored her team's "face" and reframed the social contract, creating a shared identity with the crowd.
 * * KEY AGENTS:
 * - The Basketball Team: Subject (Powerless), victim of the face-threatening act.
 * - School Administration / Athletic Association: Beneficiary (Institutional), benefits from the de-escalation and restoration of sportsmanship.
 * - Social Systems Analyst: Auditor (Analytical), observes the interplay of extraction and coordination.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(suanne_face_restoration, 0.75). % The initial face-attack liquidates the team's social status and dignity. High extraction.
domain_priors:suppression_score(suanne_face_restoration, 0.65).   % The mockery suppresses the team's authentic identity behind caricatures.
domain_priors:theater_ratio(suanne_face_restoration, 0.10).       % SuAnne's action is highly functional, not performative for its own sake.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(suanne_face_restoration, extractiveness, 0.75).
narrative_ontology:constraint_metric(suanne_face_restoration, suppression_requirement, 0.65).
narrative_ontology:constraint_metric(suanne_face_restoration, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% The dynamic is a constructed social enforcement mechanism, not a natural state.
narrative_ontology:constraint_claim(suanne_face_restoration, enforcement).

% Binary flags
domain_priors:requires_active_enforcement(suanne_face_restoration). % Required for Tangled Rope. The social pressure requires active participation.

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(suanne_face_restoration, school_administration). % Derives has_coordination_function/1
narrative_ontology:constraint_victim(suanne_face_restoration, targeted_basketball_team). % Derives has_asymmetric_extraction/1

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The team experiences the mockery as a pure trap, extracting their dignity.
% χ = 0.75 * π(powerless, 1.5) * σ(local, 0.8) = 0.90. This is a clear Snare.
constraint_indexing:constraint_classification(suanne_face_restoration, snare,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The school administration sees SuAnne's act as a pure coordination tool that
% resolves a dangerous conflict and restores sportsmanship.
% χ = 0.75 * π(institutional, -0.2) * σ(regional, 0.9) = -0.135. This is a clear Rope.
constraint_indexing:constraint_classification(suanne_face_restoration, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(regional))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees both the high asymmetric extraction (Snare aspect) and the
% brilliant coordination function (Rope aspect). It requires active enforcement
% and has clear victims and beneficiaries. This is the canonical Tangled Rope.
% χ = 0.75 * π(analytical, 1.15) * σ(global, 1.2) = 1.035.
constraint_indexing:constraint_classification(suanne_face_restoration, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(suanne_face_restoration_tests).

test(perspectival_gap) :-
    % Verify the gap between the team (powerless) and the administration (institutional).
    constraint_indexing:constraint_classification(suanne_face_restoration, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(suanne_face_restoration, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless == snare,
    TypeInstitutional == rope,
    TypePowerless \= TypeInstitutional.

test(analytical_classification_is_tangled_rope) :-
    % The canonical classification for this structure should be Tangled Rope.
    constraint_indexing:constraint_classification(suanne_face_restoration, tangled_rope, context(agent_power(analytical), _, _, _)).

:- end_tests(suanne_face_restoration_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This constraint is a classic Tangled Rope. The initial situation is a Snare from the perspective of the targeted team, where their social dignity ("face") is being extracted to fuel the hostile crowd's sense of superiority. SuAnne's intervention introduces a powerful coordination function (a Rope) that de-escalates the conflict and creates a new, shared identity.
 *
 * The Perspectival Gap is stark:
 * - For the team (powerless), it is a pure Snare (χ=0.90).
 * - For the administration (institutional), it is a beneficial Rope (χ=-0.135), a tool for conflict resolution.
 * - The analytical view must account for both realities simultaneously. The structure has a clear coordination function (beneficiary exists), asymmetric extraction (victim exists), and requires active enforcement. This makes it a canonical Tangled Rope.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The system correctly avoids classifying this as a pure Snare by recognizing the powerful coordination function introduced by SuAnne. The Tangled Rope classification captures the dual nature of the event: a resolution to a problem that should not have existed in the first place. The high extraction is real, but so is the coordination that resolves it.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_suanne_face_restoration,
    "Was the crowd's subsequent silence a biological recognition of authenticity (Mountain), or a temporary, strategic confusion allowing recalibration without losing face (Rope)?",
    "Longitudinal study of community social dynamics in Lead, SD, post-event, compared to control communities without such an intervention.",
    "If Mountain, authenticity is a social law with predictable effects. If Rope, the act was a high-risk gamble that may not be replicable.",
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(suanne_face_restoration, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This event is a snapshot, but the underlying potential for social extraction
% was constant during the period. The measurements reflect the state of the
% social dynamic during the game. Required because base_extractiveness > 0.46.

% Theater ratio over time (consistently low and functional):
narrative_ontology:measurement(suanne_face_restoration_tr_t0, suanne_face_restoration, theater_ratio, 0, 0.10).
narrative_ontology:measurement(suanne_face_restoration_tr_t5, suanne_face_restoration, theater_ratio, 5, 0.10).
narrative_ontology:measurement(suanne_face_restoration_tr_t10, suanne_face_restoration, theater_ratio, 10, 0.10).

% Extraction over time (consistently high potential for social harm):
narrative_ontology:measurement(suanne_face_restoration_ex_t0, suanne_face_restoration, base_extractiveness, 0, 0.75).
narrative_ontology:measurement(suanne_face_restoration_ex_t5, suanne_face_restoration, base_extractiveness, 5, 0.75).
narrative_ontology:measurement(suanne_face_restoration_ex_t10, suanne_face_restoration, base_extractiveness, 10, 0.75).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% SuAnne's dance enforces a new norm of mutual respect.
narrative_ontology:coordination_type(suanne_face_restoration, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: sunk_cost_fallacy
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_sunk_cost_fallacy, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: sunk_cost_fallacy
 * human_readable: The Sunk Cost Fallacy
 * domain: economic/social/cognitive
 * * SUMMARY:
 * The sunk cost fallacy is the tendency to continue an endeavor once an
 * investment in money, effort, or time has been made, even when the current
 * costs outweigh the likely future benefits. It is a "rear-view mirror"
 * approach to decision-making that ignores future marginal utility in favor
 * of emotional accounting for past losses.
 * * KEY AGENTS:
 * - The Entrenched Participant: An agent who feels they have "too much
 * invested to quit" (e.g., a student in the wrong major or a failing project lead).
 * - The Systemic Exploiter: An institution (e.g., a subscription service or
 * casino) that uses initial buy-ins to lock agents into further spending.
 * - The Rational Arbiter: An external observer who ignores past costs to
 * focus solely on future ROI.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
% Rationale (Extractiveness): It extracts future "optionality" and "capital."
% It benefits entities that profit from "lock-in" while the victim extracts only
% emotional comfort from not admitting failure.
domain_priors:base_extractiveness(sunk_cost_fallacy, 0.5).
% Rationale (Suppression): It suppresses the "Exit" alternative. The brain frames
% quitting as "waste," making the rational choice (stopping) feel
% morally or logically invisible.
domain_priors:suppression_score(sunk_cost_fallacy, 0.6).
% Rationale (Theater): The fallacy is a functional cognitive bias, not a
% performative act. Its theater ratio is very low.
domain_priors:theater_ratio(sunk_cost_fallacy, 0.1).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(sunk_cost_fallacy, extractiveness, 0.5).
narrative_ontology:constraint_metric(sunk_cost_fallacy, suppression_requirement, 0.6).
narrative_ontology:constraint_metric(sunk_cost_fallacy, theater_ratio, 0.1).

% Constraint self-claim (what does the constraint claim to be?)
% The fallacy presents itself as a trap of prior commitment.
narrative_ontology:constraint_claim(sunk_cost_fallacy, constructed).

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(sunk_cost_fallacy, casinos).
narrative_ontology:constraint_beneficiary(sunk_cost_fallacy, predatory_subscription_models).
narrative_ontology:constraint_victim(sunk_cost_fallacy, unhappy_career_holders).
narrative_ontology:constraint_victim(sunk_cost_fallacy, failed_project_investors).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE UNHAPPY DOCTORAL STUDENT (SNARE)
% For the person seven years into a degree they no longer want, the fallacy
% is a Snare. The "investment" they've made acts as the rope that
% strangles their current freedom. They cannot leave because they cannot
% face the "waste" of the past seven years, so they lose the *next* seven years too.
% χ = 0.5 * 1.5 (powerless) * 0.8 (local) = 0.6. With S=0.6, this is a Snare.
constraint_indexing:constraint_classification(sunk_cost_fallacy, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE PROJECT MANAGER (ROPE)
% For the manager, "sunk cost" logic is often used as a Rope. It is a
% coordination mechanism for persistence. By reminding the team or the
% board of "how far we've come," they pull together resources.
% χ = 0.5 * -0.2 (institutional) * 0.9 (regional) = -0.09. Negative extraction -> Rope.
constraint_indexing:constraint_classification(sunk_cost_fallacy, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(regional))).

% PERSPECTIVE 3: THE BEHAVIORAL ECONOMIST (SNARE)
% The analyst sees the mechanism for what it is: an extractive, suppressive
% cognitive trap. While its origin is a mountain-like feature of human cognition,
% its *function* is that of a Snare, systematically extracting future value.
% χ = 0.5 * 1.15 (analytical) * 1.2 (global) = 0.69. With S=0.6, this is a Snare.
constraint_indexing:constraint_classification(sunk_cost_fallacy, snare,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(sunk_cost_fallacy_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between the powerless victim and the institutional beneficiary.
    constraint_indexing:constraint_classification(sunk_cost_fallacy, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(sunk_cost_fallacy, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(snare_threshold_validation) :-
    % Verify the base metrics meet the criteria for a high-extraction snare.
    domain_priors:base_extractiveness(sunk_cost_fallacy, E),
    domain_priors:suppression_score(sunk_cost_fallacy, S),
    E >= 0.46,
    S >= 0.4.

test(analytical_classification_is_snare) :-
    % Verify the analytical observer correctly identifies the mechanism as a Snare.
    constraint_indexing:constraint_classification(sunk_cost_fallacy, snare,
        context(agent_power(analytical),
                time_horizon(civilizational),
                exit_options(analytical),
                spatial_scope(global))).

:- end_tests(sunk_cost_fallacy_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This constraint story models a cognitive bias as a perspectivally variant
 * structure. The key insight is the gap between the institutional agent, who
 * can leverage the bias as a coordination tool (Rope), and the powerless
 * individual, for whom it is a value-extracting trap (Snare).
 *
 * The analytical observer's classification was changed from Mountain to Snare.
 * While the bias's *origin* is a near-immutable feature of human cognition
 * (a mountain-like fact), the Deferential Realism system classifies the
 * *functional effect* of the constraint. Given the high base extractiveness (0.5)
 * and suppression (0.6), the mechanism's function is undeniably that of a Snare,
 * and an objective analyst would classify it as such based on the metrics.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_sunk_cost_fallacy,
    "To what degree is the 'Snare' caused by internal cognitive bias vs. external social shame of quitting?",
    "Comparative study of abandonment rates in anonymous vs. public commitments.",
    "If primarily internal, it's a cognitive Snare. If primarily social, it's a cultural Tangled Rope that requires active social enforcement.",
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(sunk_cost_fallacy, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data for this constraint is modeled as flat. As a core cognitive
% bias, its properties are assumed to be stable over the observed interval.
% This is required because base_extractiveness > 0.46.

% Theater ratio over time (stable):
narrative_ontology:measurement(scf_tr_t0, sunk_cost_fallacy, theater_ratio, 0, 0.1).
narrative_ontology:measurement(scf_tr_t5, sunk_cost_fallacy, theater_ratio, 5, 0.1).
narrative_ontology:measurement(scf_tr_t10, sunk_cost_fallacy, theater_ratio, 10, 0.1).

% Extraction over time (stable):
narrative_ontology:measurement(scf_ex_t0, sunk_cost_fallacy, base_extractiveness, 0, 0.5).
narrative_ontology:measurement(scf_ex_t5, sunk_cost_fallacy, base_extractiveness, 5, 0.5).
narrative_ontology:measurement(scf_ex_t10, sunk_cost_fallacy, base_extractiveness, 10, 0.5).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% No coordination_type is declared. The sunk cost fallacy is a cognitive bias
% that *disrupts* rational resource allocation; it is not a coordination
% mechanism itself, though it can be exploited by them.

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: suslin_hypothesis_undecidability
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Mikhail Suslin (1920) / Solovay & Tennenbaum (1971)
% ============================================================================

:- module(constraint_suslin_hypothesis, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: suslin_hypothesis_undecidability
 * human_readable: Suslin's Hypothesis (Linear Order Undecidability)
 * domain: mathematical/philosophical
 * temporal_scope: 1920 - Present (Civilizational)
 * spatial_scope: Global/Abstract (Set Theory / Topology)
 * * SUMMARY:
 * Suslin's Hypothesis (SH) proposes that any dense linear order without 
 * endpoints that satisfies the "Suslin condition" (no uncountable family of 
 * disjoint open intervals) must be isomorphic to the real line. It was proven 
 * independent of ZFC set theory by Solovay and Tennenbaum in 1971.
 * * KEY AGENTS:
 * - The Suslin Line (Subject): A hypothetical powerless agent—a linear 
 * continuum that satisfies SH's conditions but might not be the real numbers.
 * - The Set-Theoretic Architect (Institutional): An agent who uses SH or its 
 * negation as a "Rope" to build consistent models of the mathematical universe.
 * - The Intuitive Realist (Analytical): An observer for whom the existence 
 * of a Suslin line is a "Snare" that strangles the uniqueness of the real 
 * number line.
 * * NARRATIVE ARC:
 * Suslin's Hypothesis functions as a "Mountain" of structural possibility; 
 * its truth is a fixed feature of whichever logical world one inhabits. In 
 * topology, it is a "Rope" for coordinating the classification of 
 * continua. However, for those seeking a singular, absolute definition of 
 * "Continuity," the undecidability of SH acts as a "Snare," extracting the 
 * certainty of the Real Line (extraction) and "choking" the intuition that 
 * a few simple properties should uniquely define the reals.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Structural Anchor for index extraction
narrative_ontology:interval(suslin_era, 1920, 2026).
narrative_ontology:constraint_claim(suslin_hypothesis_undecidability, mountain).

% Base extractiveness score (0.0-1.0)
% Rationale: 0.2. SH "extracts" the definitive uniqueness of the real numbers 
% as a geometric concept, forcing a "logical tax" of model-dependency on 
% topologists and analysts.
domain_priors:base_extractiveness(suslin_hypothesis_undecidability, 0.2).

% Suppression score (0.0-1.0)
% Rationale: 0.3. It suppresses the visibility of "Naive Realism" in 
% mathematics by proving that the structure of the continuum is not fully 
% determined by the standard axioms of ZFC.
domain_priors:suppression_score(suslin_hypothesis_undecidability, 0.3).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(suslin_hypothesis_undecidability, extractiveness, 0.2).
narrative_ontology:constraint_metric(suslin_hypothesis_undecidability, suppression_requirement, 0.3).

% Enforcement: Emerges naturally from the axioms of ZFC and the use of forcing.
domain_priors:emerges_naturally(suslin_hypothesis_undecidability).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(suslin_hypothesis_undecidability, forcing_theory_researchers).
constraint_beneficiary(suslin_hypothesis_undecidability, model_theorists).
constraint_victim(suslin_hypothesis_undecidability, classical_topological_intuition).
constraint_victim(suslin_hypothesis_undecidability, hilbertian_deductive_completeness).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE HYPOTHETICAL SUSLIN LINE - Mountain
   --------------------------------------------------------------------------
   
   WHO: powerless - The line has no agency; its existence is 
   contingent on the axioms of the universe it occupies.
   WHEN: immediate - Its properties are fixed at the moment of definition.
   WHERE: trapped - Bound within the set-theoretic model it inhabits.
   SCOPE: local - Immediate neighborhood of its points and intervals.
   
   WHY THIS CLASSIFICATION:
   For a Suslin line, its own existence (or non-existence) is an absolute 
   Mountain. It cannot "choose" to be isomorphic to the reals if the model 
   it is in allows for a non-separable continuum. The logic is an unyielding 
   law of its existence.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    suslin_hypothesis_undecidability,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE MODERN SET THEORIST - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional - Power to choose axioms (e.g., Martin's Axiom or V=L).
   WHEN: biographical - Planning the career-long development of a specific model.
   WHERE: mobile - Can choose different "logical exits" via forcing.
   SCOPE: global - Universal foundation for mathematical analysis.
   
   WHY THIS CLASSIFICATION:
   For the institutional logic researcher, SH is a "Rope"—a functional 
   coordination tool. By choosing an axiom like Martin's Axiom (which 
   implies SH) or the Diamond Principle (which implies ¬SH), they 
   coordinate a "standard of achievement" for what constitutes a 
   consistent mathematical universe.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    suslin_hypothesis_undecidability,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE CLASSICAL ANALYST - Snare
   --------------------------------------------------------------------------
   
   WHO: individual_moderate - Bound by the undecidability of their primary subject.
   WHEN: civilizational - Seeking a definitive "Theory of the Reals."
   WHERE: constrained - The "exit" (a final ZFC proof) is mathematically barred.
   SCOPE: global - Universal limit on formal geometric knowledge.
   
   WHY THIS CLASSIFICATION:
   For the seeker of absolute geometric truth, the independence of SH is 
   a "Snare." It "strangles" the hope that the real numbers are the 
   only possible "perfect" continuum. It extracts the "certainty of 
   the reals" (extraction) and "chokes" the intuition that simple 
   structural properties should be sufficient for a unique definition.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    suslin_hypothesis_undecidability,
    snare,
    context(
        agent_power(individual_moderate),
        time_horizon(civilizational),
        exit_options(constrained),
        spatial_scope(global)
    )
) :- 
    domain_priors:base_extractiveness(suslin_hypothesis_undecidability, E),
    E >= 0.15,
    !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(suslin_hypothesis_tests).

test(multi_perspective_variance) :-
    % Line -> Mountain
    constraint_indexing:constraint_classification(suslin_hypothesis_undecidability, Type1, context(powerless, immediate, trapped, local)),
    % Architect -> Rope
    constraint_indexing:constraint_classification(suslin_hypothesis_undecidability, Type2, context(institutional, biographical, mobile, global)),
    Type1 \= Type2.

test(deductive_extraction_penalty) :-
    % Analysts experience the "Snare" of foundational extraction.
    Context = context(individual_moderate, civilizational, constrained, global),
    constraint_indexing:extractiveness_for_agent(suslin_hypothesis_undecidability, Context, Score),
    Score >= 0.15.

test(natural_emergence) :-
    domain_priors:emerges_naturally(suslin_hypothesis_undecidability).

:- end_tests(suslin_hypothesis_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * * 1. EXTRACTIVENESS SCORE (0.2):
 * Reasoning: SH extracts the "uniqueness" of the real number line. 
 * It imposes a metaphysical tax where the nature of continuity is 
 * contingent on axiomatic choice rather than pure deduction.
 * * 2. CLASSIFICATION RATIONALE:
 * Chose Suslin Line (Subject), Architect (Institutional User), and 
 * Classical Analyst (Victim) to highlight the gap between 
 * "Logical Determinism" and "Foundational Uncertainty."
 * * 3. OMEGA IDENTIFICATION:
 * Formalized the "Naturalness of Axioms"—is there a higher Mountain 
 * that tells us which model is "Real"?
 */

% OMEGA IDENTIFICATION
omega_variable(
    natural_continuum_consensus,
    "Is there a 'Natural' model of set theory (e.g., V=L or Large Cardinals) that resolves Suslin's Hypothesis (Mountain) or is it a pluralist Scaffold?",
    resolution_mechanism("Investigation into 'Inner Model' theory or large cardinal consensus."),
    impact("If Mountain: The Real Line has a 'True' character. If Scaffold: Continuity is a tool of choice (Rope)."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Gödel's Constructible Universe (V=L)
 * Viability: In V=L, Suslin's Hypothesis is false (Suslin lines exist).
 * Suppression: Rejected by those who believe the "Full" universe 
 * should have higher-order symmetry.
 * * ALTERNATIVE 2: Martin's Axiom (MA)
 * Viability: In models with MA and the negation of CH, SH is true.
 * Suppression: Often preferred by analysts because it preserves the 
 * "uniqueness" of the reals (The Rope).
 * * CONCLUSION:
 * The existence of Alternative 1 (V=L) proves that the "Snare" of 
 * undecidability is a choice. We climb the Mountain by agreeing 
 * on which Rope of axioms to use.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS CONSTRAINT:
 * * 1. Load: ?- [suslin_hypothesis_undecidability].
 * 2. Multi-perspective: ?- multi_index_report(suslin_hypothesis_undecidability).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: swift_legacy_piton
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-05-21
% ============================================================================

:- module(constraint_swift_legacy_piton, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: swift_legacy_piton
 * human_readable: The SWIFT Financial Messaging Inertia
 * domain: technological/economic
 * * SUMMARY:
 * A global financial messaging standard that has outlived its technical
 * utility but remains mandatory due to the "Maintenance Debt" of the global
 * banking system. It functions as a Piton—inertial maintenance of a
 * decaying constraint, where performative updates mask underlying stagnation.
 * * KEY AGENTS:
 * - Global Remitters & Merchants: Subject (Powerless) - Face 3-5 day delays and opaque fees.
 * - Legacy Financial Institutions: Beneficiary (Institutional) - Rely on the Piton for gatekeeping and fee extraction.
 * - Fintech Systems Auditor: Auditor (Analytical) - Observes the "Piton" gap between claimed and actual function.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(swift_legacy_piton, 0.49). % High: Opaque correspondent banking fees and liquidity costs.
domain_priors:suppression_score(swift_legacy_piton, 0.90).   % Extremely High: National economies are disconnected if removed without a replacement.
domain_priors:theater_ratio(swift_legacy_piton, 0.75).       % High: Modern "updates" (gpi) are often theatrical patches on 1970s tech.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(swift_legacy_piton, extractiveness, 0.49).
narrative_ontology:constraint_metric(swift_legacy_piton, suppression_requirement, 0.90).
narrative_ontology:constraint_metric(swift_legacy_piton, theater_ratio, 0.75).

% Constraint self-claim (what does the constraint claim to be?)
narrative_ontology:constraint_claim(swift_legacy_piton, coordination).

% Binary flags
domain_priors:requires_active_enforcement(swift_legacy_piton). % Sanctions and compliance regimes enforce participation.

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(swift_legacy_piton, legacy_financial_institutions).
narrative_ontology:constraint_victim(swift_legacy_piton, global_remitters_and_merchants).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE GLOBAL SOUTH MERCHANT (SNARE)
% To the merchant, SWIFT is a Snare—a mandatory, slow, and extractive trap with no viable state-sanctioned exit.
% χ = 0.49 (ε) * 1.5 (π(powerless)) * 1.2 (σ(global)) = 0.882
constraint_indexing:constraint_classification(swift_legacy_piton, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(global))).

% PERSPECTIVE 2: THE CENTRAL BANK (ROPE)
% To the state, it remains a Rope—the only reliable way to coordinate global liquidity and enforcement.
% χ = 0.49 (ε) * -0.2 (π(institutional)) * 1.2 (σ(global)) = -0.1176 (felt as a benefit/necessity)
constraint_indexing:constraint_classification(swift_legacy_piton, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE SYSTEMS AUDITOR (PITON)
% Detection of "Piton" status: High theater_ratio indicates the protocol is maintained by inertia, not efficiency.
constraint_indexing:constraint_classification(swift_legacy_piton, piton,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(arbitrage),
            spatial_scope(universal))) :-
    domain_priors:theater_ratio(swift_legacy_piton, TR), TR > 0.70.

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(swift_legacy_piton_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(swift_legacy_piton, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(swift_legacy_piton, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(piton_threshold_validation) :-
    % Verify the analytical observer detects the Piton signature based on theater ratio.
    domain_priors:theater_ratio(swift_legacy_piton, TR),
    (TR > 0.70 ->
        constraint_indexing:constraint_classification(swift_legacy_piton, piton, context(agent_power(analytical), _, _, _))
    ;   \+ constraint_indexing:constraint_classification(swift_legacy_piton, piton, context(agent_power(analytical), _, _, _))
    ).

:- end_tests(swift_legacy_piton_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The high base_extractiveness (0.49) and suppression_score (0.90) create a classic Snare for powerless users.
 * However, for institutional actors, the negative power modifier π(institutional)=-0.2 makes the effective extraction
 * negative, classifying it as a Rope that provides coordination benefits. The theater_ratio (0.75) reflects how
 * SWIFT markets "innovation" (like SWIFT gpi) to mask the underlying maintenance debt of 50-year-old messaging standards.
 * This high theater ratio is what allows the analytical observer to correctly classify it as a Piton.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * Mandatrophy is resolved by the "Piton" classification. The system is no longer a "Rope" of efficiency;
 * it is a structural fossil that persists because the cost of "untethering" the global economy is too high.
 * The system correctly identifies that what an institution sees as a Rope can simultaneously be a Snare for users
 * and a decaying Piton for auditors, preventing a monolithic and incorrect classification.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_piton_snap,
    'When does the friction of the Piton exceed the cost of migrating to an Alternative Scaffold (e.g., ISO20022-native systems)?',
    'Comparative transaction volume growth and cost analysis: SWIFT vs. mBridge/FedNow/P2P networks.',
    'If snap occurs: Sudden collapse of the legacy Rope and rapid adoption of a new standard. If delayed: Continued Piton-decay and rent-seeking.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(swift_legacy_piton, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This constraint has high extraction (0.49 > 0.46), requiring temporal data.
% The model shows extraction accumulating as the system became entrenched,
% and theater ratio rising sharply in the latter half of the interval as
% challengers (e.g., crypto, fintech) emerged, forcing performative innovation.

% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(swift_legacy_piton_tr_t0, swift_legacy_piton, theater_ratio, 0, 0.10).
narrative_ontology:measurement(swift_legacy_piton_tr_t5, swift_legacy_piton, theater_ratio, 5, 0.50).
narrative_ontology:measurement(swift_legacy_piton_tr_t10, swift_legacy_piton, theater_ratio, 10, 0.75).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(swift_legacy_piton_ex_t0, swift_legacy_piton, base_extractiveness, 0, 0.20).
narrative_ontology:measurement(swift_legacy_piton_ex_t5, swift_legacy_piton, base_extractiveness, 5, 0.35).
narrative_ontology:measurement(swift_legacy_piton_ex_t10, swift_legacy_piton, base_extractiveness, 10, 0.49).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
narrative_ontology:coordination_type(swift_legacy_piton, information_standard).

% Network relationships (structural influence edges)
% The inertia of the SWIFT Piton directly affects the adoption rate and
% design of its intended successor, the ISO20022 standard.
narrative_ontology:affects_constraint(swift_legacy_piton, iso20022_migration_scaffold).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: swift_piton_snap
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-16
% ============================================================================

:- module(constraint_swift_piton_snap, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: swift_piton_snap
 * human_readable: The Great Decoupling
 * domain: technological/economic
 * * SUMMARY:
 * This constraint models the new global financial settlement layer that emerges
 * after the sudden failure of a legacy protocol (like SWIFT). The old system,
 * a "Piton" held in place by institutional inertia, snaps under the tension of
 * maintenance debt and the rise of superior alternatives. The new system is a
 * transitional scaffold, intended to become a fixed, mountain-like piece of
 * global infrastructure.
 * * KEY AGENTS:
 * - Global Citizens: Beneficiary (Powerless) - Experience the new system as a fixed, low-cost utility.
 * - Legacy Financial Institutions: Victim (Institutional) - Their old business model is trapped and made obsolete by the new system.
 * - Network Architects: Architect (Organized) - Manage the transition and view the system as a temporary scaffold.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(swift_piton_snap, 0.04). % Very low; the new system is a utility, not a rent-seeking vehicle.
domain_priors:suppression_score(swift_piton_snap, 0.10).   % Low; many alternatives exist, and participation is voluntary.
domain_priors:theater_ratio(swift_piton_snap, 0.05).       % Minimal; the system is purely functional code. The "Piton" it replaced had high theater.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(swift_piton_snap, extractiveness, 0.04).
narrative_ontology:constraint_metric(swift_piton_snap, suppression_requirement, 0.1).
narrative_ontology:constraint_metric(swift_piton_snap, theater_ratio, 0.05).

% Constraint self-claim (what does the constraint claim to be?)
narrative_ontology:constraint_claim(swift_piton_snap, coordination).

% Binary flags
narrative_ontology:has_sunset_clause(swift_piton_snap).      % Mandatory for Scaffold: the transition phase is temporary.
domain_priors:requires_active_enforcement(swift_piton_snap). % Enforcement is automated via protocol rules (smart contracts).

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(swift_piton_snap, global_citizens).
narrative_ontology:constraint_victim(swift_piton_snap, legacy_financial_institutions).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE LEGACY BANKER (SNARE)
% For the institution that can no longer extract rent, the new network is a Snare—it traps their old business model.
% Even with low base extraction, the *effect* is total suppression of their prior mode of operation.
constraint_indexing:constraint_classification(swift_piton_snap, snare,
    context(agent_power(institutional),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(global))).

% PERSPECTIVE 2: THE GLOBAL CITIZEN (MOUNTAIN)
% For the user, the protocol is as fundamental and unchangeable as a Mountain (a fixed logical limit).
% Its rules are immutable and its function is a given.
constraint_indexing:constraint_classification(swift_piton_snap, mountain,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE TRANSITION ARCHITECT (SCAFFOLD)
% The system is a temporary support structure until the new global standard hardens.
constraint_indexing:constraint_classification(swift_piton_snap, scaffold,
    context(agent_power(organized),
            time_horizon(generational),
            exit_options(constrained),
            spatial_scope(global))) :-
    narrative_ontology:has_sunset_clause(swift_piton_snap).

% PERSPECTIVE 4: THE ANALYTICAL OBSERVER (SCAFFOLD)
% The analytical view recognizes the coordination function, the temporary nature (sunset clause),
% and the low extraction, classifying it as a Scaffold.
constraint_indexing:constraint_classification(swift_piton_snap, scaffold,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(swift_piton_snap_tests).

test(perspectival_gap_victim_vs_user) :-
    % Verify the gap between the trapped legacy institution and the mobile user.
    constraint_indexing:constraint_classification(swift_piton_snap, TypeInstitutional, context(agent_power(institutional), _, exit_options(trapped), _)),
    constraint_indexing:constraint_classification(swift_piton_snap, TypePowerless, context(agent_power(powerless), _, exit_options(mobile), _)),
    TypeInstitutional == snare,
    TypePowerless == mountain,
    TypeInstitutional \= TypePowerless.

test(scaffold_properties_present) :-
    % Verify that the necessary properties for a Scaffold classification are declared.
    narrative_ontology:has_sunset_clause(swift_piton_snap),
    narrative_ontology:constraint_beneficiary(swift_piton_snap, _).

test(low_extraction_and_theater) :-
    % The new system should have metrics consistent with a utility, not a Piton or Snare.
    domain_priors:base_extractiveness(swift_piton_snap, E), E < 0.15,
    domain_priors:theater_ratio(swift_piton_snap, TR), TR < 0.70.

:- end_tests(swift_piton_snap_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This story models the *result* of a "Piton Snap." The old SWIFT-like system was a Piton with high theater and inertia.
 * The new system that replaces it has very low base extraction (0.04) and suppression (0.10), making it function like a
 * public utility. The key insight is the dramatic perspectival gap this creates.
 *
 * For legacy institutions whose rent-seeking models depended on the old system, the new one is a 'Snare' because it
 * completely traps and invalidates their way of operating, even though its own extraction is low. For end-users, the
 * new protocol is a 'Mountain'—a fixed, immutable piece of infrastructure. For its architects, it is a 'Scaffold,'
 * a temporary measure designed to be replaced by an even more permanent standard.
 *
 * The `has_sunset_clause` and `constraint_beneficiary` facts are included to correctly enable the Scaffold classification,
 * resolving the original file's lint error.
 *
 * * [RESOLVED MANDATROPHY]
 * The Mandatrophy of the old system (a Piton masquerading as a Rope) is resolved by its replacement with a new system
 * whose nature as a coordination utility is transparent. The coordination is achieved through code and mathematics,
 * not institutional coercion.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_swift_piton_snap_recentralization,
    'Will the new "decentralized" scaffold eventually be captured by new powerful actors, re-creating a Tangled Rope?',
    'Longitudinal analysis of network validator/node concentration and protocol governance changes over a generational time horizon.',
    'If concentration occurs, the cycle repeats (Piton -> Scaffold -> Tangled Rope). If it remains distributed, it hardens into a true civilizational Rope/Mountain.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(swift_piton_snap, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Base extractiveness is 0.04 (< 0.46), so temporal measurements are not required
% for this constraint.

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The new settlement layer is a form of global infrastructure.
narrative_ontology:coordination_type(swift_piton_snap, global_infrastructure).

% The emergence of a new settlement layer directly impacts the effectiveness
% and mechanisms of traditional monetary policy.
narrative_ontology:affects_constraint(swift_piton_snap, central_bank_monetary_policy).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: sylow_theorems_group_theory
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Sylow Theorems (Peter Ludwig Sylow, 1872) / Finite Group Theory
% ============================================================================

:- module(constraint_sylow_theorems, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: sylow_theorems_group_theory
 * human_readable: Sylow Theorems (Subgroup Constraints)
 * domain: mathematical/theoretical
 * temporal_scope: 1872 - Present (Civilizational)
 * spatial_scope: Global/Abstract (Finite Groups)
 * * SUMMARY:
 * The Sylow Theorems characterize the existence, conjugacy, and number of 
 * p-subgroups within a finite group of a given order. They provide the 
 * "structural skeleton" for the classification of finite groups, placing 
 * rigid limits on how many subgroups of a specific prime-power order can exist.
 * * KEY AGENTS:
 * - The Group Structure (Subject): The mathematical object whose internal 
 * configuration is pre-ordained by the prime factorization of its order.
 * - The Group Classifier (Institutional): An agent using the theorems as a 
 * "Rope" to systematically prove the non-simplicity or cyclicity of groups.
 * - The Finite Simple Group Searcher: An agent for whom the theorems act 
 * as a "Snare," excluding billions of potential group structures from 
 * the possibility of "simplicity."
 * * NARRATIVE ARC:
 * The Sylow Theorems are the "Mountain" of group composition—they define 
 * the unyielding arithmetic landscape that every finite group must inhabit. 
 * In the Classification of Finite Simple Groups (CFSG), they function as 
 * a "Rope" for global coordination. However, for a candidate group 
 * struggling to be "Simple," the congruency requirement ($n_p \equiv 1 \pmod p$) 
 * is a "Snare" that extracts its possibility of existence.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for DR-Audit Suite
narrative_ontology:interval(sylow_era, 1872, 2026).
narrative_ontology:constraint_claim(sylow_theorems_group_theory, mountain).

% Base extractiveness score (0.0-1.0)
% Rationale: Low (0.15). Pure math truth is non-coercive. However, the theorems 
% "extract" symmetry possibilities from groups, forcing them into specific 
% subgroup lattices.
domain_priors:base_extractiveness(sylow_theorems_group_theory, 0.15).

% Suppression score (0.0-1.0)
% Rationale: Low (0.2). It suppresses the visibility of "illegal" group 
% configurations (e.g., a group of order 15 having more than one Sylow 5-subgroup).
domain_priors:suppression_score(sylow_theorems_group_theory, 0.2).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(sylow_theorems_group_theory, extractiveness, 0.15).
narrative_ontology:constraint_metric(sylow_theorems_group_theory, suppression_requirement, 0.2).

% Enforcement: Emerges naturally from the axioms of group theory.
domain_priors:emerges_naturally(sylow_theorems_group_theory).

% Metrics for Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(sylow_theorems_group_theory, algebraic_classifiers).
constraint_beneficiary(sylow_theorems_group_theory, cryptographic_designers). % Secure group selection.
constraint_victim(sylow_theorems_group_theory, non_existent_simple_groups). % Excluded from reality.

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE GROUP ELEMENT (SUBJECT) - Mountain
   --------------------------------------------------------------------------
   WHO: powerless - The element's behavior in cycles is fixed by the group order.
   WHEN: immediate - True at the moment the group is defined.
   WHERE: trapped - Bound within the subgroup structure dictated by $|G|$.
   SCOPE: local - Immediate neighborhood of the element's orbit.
   
   WHY THIS CLASSIFICATION:
   For an element in a group of order 30, the existence of a normal Sylow 
   5-subgroup (and thus its own membership in it) is an absolute, 
   unchangeable law. The element has zero "volition" to belong to a 
   different structural configuration.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    sylow_theorems_group_theory,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE MATHEMATICS PROFESSOR - Rope
   --------------------------------------------------------------------------
   WHO: institutional - Power to design proofs and classify group families.
   WHEN: biographical - Planning a curriculum or a research paper.
   WHERE: mobile - Can choose different group orders to explore or prove.
   SCOPE: global - Universal application to all finite groups.
   
   WHY THIS CLASSIFICATION:
   For the institutional actor, the theorems are a "Rope"—a tool for 
   functional coordination. They allow for the efficient "tagging" and 
   classification of infinite varieties of groups into neat structural buckets.
   
   NARRATIVE EVIDENCE:
   "The Sylow Theorems are used as a standard of achievement in proving 
   that every group of order pq (p < q, p not dividing q-1) is cyclic."
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    sylow_theorems_group_theory,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE SEARCHER FOR SIMPLE GROUPS - Snare
   --------------------------------------------------------------------------
   WHO: powerless - Bound by the arithmetic constraints of $n_p$.
   WHEN: immediate - Every $n_p$ check that doesn't equal 1 is an "extraction" of failure.
   WHERE: constrained - Knowing the order but "strangled" by the divisibility rules.
   SCOPE: local - A specific integer order (e.g., trying to find a simple group of order 150).
   
   WHY THIS CLASSIFICATION:
   For an agent trying to construct a "Simple Group" (one with no normal 
   subgroups), the Sylow theorems act as a "Snare." They "strangle" most 
   candidate orders by proving that a normal subgroup *must* exist, 
   extracting the researcher's hope for simplicity through arithmetic logic.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    sylow_theorems_group_theory,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(local)
    )
) :- 
    domain_priors:base_extractiveness(sylow_theorems_group_theory, E),
    E >= 0.1,
    !.

/* ==========================================================================
   4. TESTS (Insights into Group Complexity)
   ========================================================================== */

:- begin_tests(sylow_theorems_tests).

test(subgroup_fate_variance) :-
    % Group Structure -> Mountain
    constraint_indexing:constraint_classification(sylow_theorems_group_theory, Type1, context(powerless, immediate, trapped, local)),
    % Classifier -> Rope
    constraint_indexing:constraint_classification(sylow_theorems_group_theory, Type2, context(institutional, biographical, mobile, global)),
    Type1 = mountain,
    Type2 = rope.

test(non_simplicity_snare_penalty) :-
    % A powerless searcher in a local context sees the congruency rule as a Snare.
    constraint_indexing:constraint_classification(sylow_theorems_group_theory, snare, context(powerless, immediate, constrained, local)).

test(emergence) :-
    domain_priors:emerges_naturally(sylow_theorems_group_theory).

:- end_tests(sylow_theorems_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * * 1. BASE EXTRACTIVENESS (0.15): 
 * Mathematical laws are non-coercive but "extract" possibilities. The 
 * "Sylow-Snare" effect is well known to students who find that 
 * $n_p \mid m$ and $n_p \equiv 1 \pmod p$ frequently force $n_p = 1$.
 * * 2. CLASSIFICATION: 
 * Sylow is the quintessential "Mountain" of abstract structure—local 
 * prime facts determine global group fate.
 * * 3. PERSPECTIVES:
 * Chose Group Element (Passive Subject), Professor (Tool User), and 
 * Searcher (Victim of Rigor) to show how a "gift" of knowledge can 
 * be a "trap" for creativity.
 */

% OMEGA IDENTIFICATION
omega_variable(
    sylow_existence_constructivity,
    "Does the existence of a Sylow subgroup (Mountain) provide an efficient algorithm to find it (Rope)?",
    resolution_mechanism("Verification of the complexity of the Cohen-Cannon-Lausch algorithm for various group classes."),
    impact("If Exponential: The Mountain is a Snare for computers. If Polynomial: It is a Rope."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Hall Subgroups
 * Viability: Generalize Sylow for solvable groups (subgroups of order m, where m divides |G| and gcd(m, |G|/m)=1).
 * Status: A "Rope" used where Sylow is too restrictive, but "suppressed" by 
 * the requirement of solvability.
 * * ALTERNATIVE 2: Cauchy's Theorem
 * Viability: Guaranteed existence of an element (not subgroup) of order p.
 * Status: A "Scaffold" that Sylow theorems completely replaced and subsumed.
 * * CONCLUSION:
 * The dominance of Sylow as a "Mountain" is due to its universal 
 * applicability to *all* finite groups, unlike Hall subgroups.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Load: ?- [sylow_theorems_group_theory].
% Analyze: ?- constraint_indexing:multi_index_report(sylow_theorems_group_theory).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
