% ============================================================================
% CONSTRAINT STORY: p_vs_np
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Stephen Cook (1971) / Computational Complexity Theory
% ============================================================================

:- module(constraint_p_vs_np, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: p_vs_np
 * human_readable: P vs. NP Problem
 * domain: technological
 * temporal_scope: Permanent (Laws of Computation)
 * spatial_scope: Global (Universal Mathematics)
 * * SUMMARY:
 * P vs. NP is a major unsolved problem in theoretical computer science. It asks 
 * whether every problem whose solution can be quickly verified (NP) can also 
 * be quickly solved (P). This constraint represents the fundamental boundary 
 * between "easy" (polynomial time) and "hard" (exponential time) computation.
 * * KEY AGENTS:
 * - The Complexity Theorist: Investigating the deep structure of the P vs. NP 
 * landscape to find a formal proof.
 * - The Cryptographer: Relies on the assumption that P != NP to ensure 
 * that breaking encryption remains computationally "hard."
 * - The Optimization Engineer: Faces NP-hard problems (like the Traveling 
 * Salesman) and must find heuristics to bypass the computational wall.
 * * NARRATIVE ARC:
 * The P vs. NP gap functions as a "Mountain" of physical reality for 
 * computation—if P != NP, certain tasks are forever hard. For the security 
 * architect, it is a "Rope" (the bedrock of modern trust). For the 
 * programmer stuck with an NP-hard task and a deadline, it is a "Snare" 
 * that strangles their ability to provide an optimal solution.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for structural extraction
narrative_ontology:interval(p_vs_np_interval, 0, 10).
narrative_ontology:constraint_claim(p_vs_np, mountain).

% Base extractiveness: 0.4 (Moderate)
% Rationale: It extracts "efficiency." The asymmetry of verification vs. 
% calculation creates a rent where those with valid "witnesses" (solutions) 
% hold power over those who must find them.
domain_priors:base_extractiveness(p_vs_np, 0.4).

% Suppression: 0.2 (Low)
% Rationale: Alternatives (like Quantum computing or P = NP) are widely 
% discussed and visible, though currently unproven for breaking the constraint.
domain_priors:suppression_score(p_vs_np, 0.2).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(p_vs_np, extractiveness, 0.4).
narrative_ontology:constraint_metric(p_vs_np, suppression_requirement, 0.2).

% Enforcement: Emerges naturally from the structure of logical state space.
domain_priors:emerges_naturally(p_vs_np).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(p_vs_np, cryptographers).
constraint_victim(p_vs_np, [brute_force_attackers, optimization_solvers]).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE COMPLEXITY THEORIST - Mountain
   --------------------------------------------------------------------------
   
   WHO: analytical (The observer of systemic limits)
   WHEN: civilizational (A permanent feature of mathematical truth)
   WHERE: trapped (Logic cannot bypass the complexity of state space)
   SCOPE: global (Universal computation)
   
   WHY THIS CLASSIFICATION:
   To the theorist, P vs. NP is a Mountain. It represents an objective 
   difficulty in the fabric of the universe. Regardless of technology, 
   the branching of possible solutions creates a fixed physical barrier 
   to efficiency that must be mapped, not bypassed.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    p_vs_np,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(civilizational),
        exit_options(trapped),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE SECURITY ARCHITECT - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional (In charge of protecting a system)
   WHEN: biographical (Ensuring safety over a project's life)
   WHERE: arbitrage (Can use different hard problems for different needs)
   SCOPE: national (The reach of their infrastructure)
   
   WHY THIS CLASSIFICATION:
   For the architect, the hardness of NP is a Rope. It is the coordination 
   mechanism that allows for public-key cryptography. Without this 
   computational asymmetry, digital trust would collapse. They use this 
   difficulty as a tether to secure the entire internet.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    p_vs_np,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(arbitrage),
        spatial_scope(national)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE DISPERATE PROGRAMMER - Snare
   --------------------------------------------------------------------------
   
   WHO: powerless (A subject to the math's complexity)
   WHEN: immediate (A deadline that requires a fast solution)
   WHERE: constrained (Cannot change the nature of the problem)
   SCOPE: local (Immediate workspace)
   
   WHY THIS CLASSIFICATION:
   For the coder tasked with finding an optimal route for 50 cities by 
   tomorrow, the P vs. NP gap is a Snare. They know the solution exists, 
   but the "exponential wall" strangles their ability to find it in 
   time. The harder they push for perfection, the more the complexity 
   tightens around their compute budget.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    p_vs_np,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(local)
    )
) :- !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(p_vs_np_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(p_vs_np, T1, context(agent_power(analytical), _, _, _)),
    constraint_indexing:constraint_classification(p_vs_np, T2, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(p_vs_np, T3, context(agent_power(powerless), _, _, _)),
    T1 \= T2, T2 \= T3.

test(power_extractiveness_security) :-
    % Institutional actors (Architects) derive security from the gap (lower felt extraction).
    % Powerless actors feel the drain of unfeasible goals (higher felt extraction).
    domain_priors:base_extractiveness(p_vs_np, E),
    E >= 0.3.

test(time_immutability) :-
    % Civilizational horizon views mathematical invariants as Mountains.
    constraint_indexing:effective_immutability(civilizational, trapped, mountain).

:- end_tests(p_vs_np_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * * KEY DECISIONS:
 * 1. EXTRACTIVENESS (0.4): The gap extracts "possibility." It ensures that 
 * brute force is always more expensive than verifying a result, which 
 * is a fundamental asymmetry of energy.
 * 2. SNARE CLASSIFICATION: I used this for the "Disperate Programmer" 
 * because NP-completeness is often a wall that forces people to settle 
 * for "good enough," strangling the ideal of perfection.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    p_is_np_consequence,
    "If P = NP were proven to be true, would the algorithm be 
    computationally efficient enough to be usable, or would the constant 
    factors be too large (creating a new Mountain)?",
    resolution_mechanism("A formal constructive proof of P = NP"),
    impact("If Usable: Cryptography dies (Snare). If Unusable: The P vs. NP 
    Mountain remains effectively intact."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Quantum Computing (BQP)
 * Viability: Can solve *some* NP problems (like factoring) faster, 
 * but likely not all NP-complete problems.
 * Suppression: Low. Massive global investment.
 * * ALTERNATIVE 2: Heuristics and Approximation
 * Viability: High. Used every day to bypass the "Snare" of NP-hardness.
 * * CONCLUSION:
 * The existence of heuristics as a "Rope" allows workers to escape the 
 * "Snare" of NP-completeness, shifting the constraint from an 
 * unmanageable trap to a manageable engineering challenge.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS CONSTRAINT:
 * 1. Load: ?- [constraint_p_vs_np].
 * 2. Multi-perspective: ?- multi_index_report(p_vs_np).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: panama_canal_ports
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_panama_canal_ports, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: panama_canal_ports
 * human_readable: Panama Canal Port Control
 * domain: political/economic
 * * SUMMARY:
 * The US and China are vying for control of ports along the Panama Canal. This competition creates a strategic chokepoint with implications for global trade and security, granting undue influence to the controlling party. The situation presents a complex interplay of economic interests and geopolitical power.
 * * KEY AGENTS:
 * - Panama: Subject (Powerless)
 * - China/US: Beneficiary (Institutional)
 * - Global Trade Auditors: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(panama_canal_ports, 0.65). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(panama_canal_ports, 0.70).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(panama_canal_ports, 0.20).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(panama_canal_ports, extractiveness, 0.65).
narrative_ontology:constraint_metric(panama_canal_ports, suppression_requirement, 0.70).
narrative_ontology:constraint_metric(panama_canal_ports, theater_ratio, 0.20).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(panama_canal_ports, enforcement).

% Binary flags
% narrative_ontology:has_sunset_clause(panama_canal_ports).      % Mandatory if Scaffold
domain_priors:requires_active_enforcement(panama_canal_ports). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(panama_canal_ports, global_powers).
narrative_ontology:constraint_victim(panama_canal_ports, panama).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE/MOUNTAIN)
% High extraction felt as an immutable limit or predatory trap.
% NOTE: This may be upgraded to 'organized' power if a critical mass of victims exists.
constraint_indexing:constraint_classification(panama_canal_ports, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Viewed as essential infrastructure or coordination.
constraint_indexing:constraint_classification(panama_canal_ports, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER
% Default analytical context (civilizational/analytical/global).
% This perspective is used by the bridge to derive constraint_claim.
% Type should reflect what the metrics compute: mountain, rope, tangled_rope, snare, scaffold, or piton.
constraint_indexing:constraint_classification(panama_canal_ports, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

% PERSPECTIVE 4: THE ARCHITECT (SCAFFOLD)
% This constraint is not a scaffold; it has no sunset clause and is not intended
% to be temporary.
% constraint_indexing:constraint_classification(panama_canal_ports, scaffold,
%    context(agent_power(organized),
%            time_horizon(generational),
%            exit_options(constrained),
%            spatial_scope(continental))) :-
%    narrative_ontology:has_sunset_clause(panama_canal_ports).

% PERSPECTIVE 5: THE SYSTEMS AUDITOR (PITON)
% This constraint is not a piton. It is actively functional and enforced, not
% inertial or theatrical. The theater_ratio is low (0.20), well below the
% piton threshold of 0.70.

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(panama_canal_ports_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(panama_canal_ports, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(panama_canal_ports, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(threshold_validation_is_high_extraction) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(panama_canal_ports, ExtMetricName, E),
    E >= 0.46. % Ensures it's a high-extraction Snare/Tangled Rope.

test(tangled_rope_conditions_met) :-
    % A tangled_rope classification requires these three structural properties.
    domain_priors:requires_active_enforcement(panama_canal_ports),
    narrative_ontology:constraint_beneficiary(panama_canal_ports, _), % derives has_coordination_function
    narrative_ontology:constraint_victim(panama_canal_ports, _). % derives has_asymmetric_extraction

:- end_tests(panama_canal_ports_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The Panama Canal port control is classified as a Snare from Panama's perspective (powerless, trapped), as they perceive limited alternatives and high extraction of sovereignty and economic potential. The global powers (institutional beneficiary) view it as a Rope, a vital coordination mechanism for global trade. The Analytical Observer classifies it as a Tangled Rope because it possesses both a genuine coordination function (facilitating international trade) and clear asymmetric extraction, backed by geopolitical power (active enforcement). The high extraction (0.65) and suppression (0.70) scores reflect the strategic importance and coercive potential of controlling this chokepoint. The low theater ratio (0.20) indicates this is an active, functional system, not a performative or inertial one.
 * * MANDATROPHY ANALYSIS:
 * The Tangled Rope classification is critical here. It prevents the system from mislabeling the genuine coordination benefits (smoother global shipping) as the constraint's sole purpose, which would incorrectly classify it as a pure Rope. It correctly identifies that this coordination is coupled with significant, asymmetric extraction from Panama and requires active geopolitical maneuvering (enforcement) to maintain, distinguishing it from a purely voluntary or equitable system.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_panama_canal_ports,
    'To what extent can Panama leverage the competition between foreign powers to retain sovereignty versus being exploited by it?',
    'Longitudinal analysis of port management contracts, revenue sharing agreements, and instances of political pressure or intervention.',
    'High leverage: Panama negotiates favorable terms, becoming a Scaffold for its own development. Low leverage: Foreign powers dominate, solidifying the constraint as a Snare.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(panama_canal_ports, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection (metric_substitution,
% extraction_accumulation) by providing measurements at multiple time points.
% Required for high-extraction constraints (base_extractiveness > 0.46).
% The data models the intensification of geopolitical competition over the interval.

% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(panama_canal_ports_tr_t0, panama_canal_ports, theater_ratio, 0, 0.10).
narrative_ontology:measurement(panama_canal_ports_tr_t5, panama_canal_ports, theater_ratio, 5, 0.15).
narrative_ontology:measurement(panama_canal_ports_tr_t10, panama_canal_ports, theater_ratio, 10, 0.20).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(panama_canal_ports_ex_t0, panama_canal_ports, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(panama_canal_ports_ex_t5, panama_canal_ports, base_extractiveness, 5, 0.58).
narrative_ontology:measurement(panama_canal_ports_ex_t10, panama_canal_ports, base_extractiveness, 10, 0.65).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% Valid types: information_standard, resource_allocation,
%              enforcement_mechanism, global_infrastructure
narrative_ontology:coordination_type(panama_canal_ports, global_infrastructure).

% Boltzmann floor override (only if domain knowledge justifies)
% Value must be in [0.0, 1.0]
% narrative_ontology:boltzmann_floor_override(panama_canal_ports, 0.1).

% Network relationships (structural influence edges)
% Declare when constraints share regulatory domain, causal dependency,
% or institutional coupling.
narrative_ontology:affects_constraint(panama_canal_ports, global_shipping_lanes).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: parable_fish_turtle
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-16
% ============================================================================

:- module(constraint_parable_fish_turtle, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: parable_fish_turtle
 * human_readable: The Ontological Lake (Fish and Turtle Parable)
 * domain: philosophical/social
 * * SUMMARY:
 * This constraint models the limits of understanding based on lived experience, as illustrated by the parable of the fish and the turtle. A fish, trapped in an aquatic ontology, cannot conceptualize "dry land" because it lacks the only attributes the fish knows (wetness, buoyancy). The turtle, who can traverse both domains, fails to communicate its experience, revealing a fundamental constraint on knowledge transfer.
 * * KEY AGENTS:
 * - The Fish: Subject (Powerless), trapped in its experiential domain.
 * - The Educator/Institution: Beneficiary (Institutional), uses the parable as a tool for teaching.
 * - The Systems Analyst: Auditor (Analytical), observes the structure of the cognitive trap.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(parable_fish_turtle, 0.70). % The aquatic ontology extracts the totality of terrestrial reality from the fish's universe.
domain_priors:suppression_score(parable_fish_turtle, 0.85).   % The experience of being "wet" completely suppresses the possibility of a "dry" reality.
domain_priors:theater_ratio(parable_fish_turtle, 0.10).       % The parable is a functional teaching tool, not performative.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(parable_fish_turtle, extractiveness, 0.70).
narrative_ontology:constraint_metric(parable_fish_turtle, suppression_requirement, 0.85).
narrative_ontology:constraint_metric(parable_fish_turtle, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% The parable presents itself as a constructed lesson about natural limits.
narrative_ontology:constraint_claim(parable_fish_turtle, constructed).

% Binary flags
% The "rules" of the fish's world are enforced by physics (it cannot breathe air).
domain_priors:requires_active_enforcement(parable_fish_turtle).

% Structural property derivation hooks:
% The Educator benefits from the parable's existence as a teaching tool.
narrative_ontology:constraint_beneficiary(parable_fish_turtle, educators).
% The Fish is a victim of the cognitive trap the parable describes.
narrative_ontology:constraint_victim(parable_fish_turtle, ontologically_trapped_agents).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The fish is trapped by its own perceptual framework.
constraint_indexing:constraint_classification(parable_fish_turtle, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The educator uses the parable as a pure coordination tool for teaching.
constraint_indexing:constraint_classification(parable_fish_turtle, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees both the pedagogical function (coordination) and the
% severe cognitive extraction imposed on the subject.
constraint_indexing:constraint_classification(parable_fish_turtle, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(universal))).

% PERSPECTIVE 4: THE TURTLE (ROPE)
% The turtle, able to move between worlds, experiences the boundary as a simple
% coordination problem, not a trap.
constraint_indexing:constraint_classification(parable_fish_turtle, rope,
    context(agent_power(moderate),
            time_horizon(biographical),
            exit_options(mobile),
            spatial_scope(regional))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(parable_fish_turtle_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between the fish (powerless) and the educator (institutional).
    constraint_indexing:constraint_classification(parable_fish_turtle, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(parable_fish_turtle, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    assertion(TypePowerless == snare),
    assertion(TypeInstitutional == rope),
    TypePowerless \= TypeInstitutional.

test(analytical_classification_is_tangled_rope) :-
    % The analytical observer should see the full picture.
    constraint_indexing:constraint_classification(parable_fish_turtle, TypeAnalytical, context(agent_power(analytical), _, _, _)),
    assertion(TypeAnalytical == tangled_rope).

test(threshold_validation_high_extraction) :-
    narrative_ontology:constraint_metric(parable_fish_turtle, extractiveness, E),
    assertion(E >= 0.46).

:- end_tests(parable_fish_turtle_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness (0.70) is high because the fish's ontology completely
 * extracts the possibility of another form of existence. The suppression (0.85)
 * is also high, as the physical reality of water prevents any alternative experience.
 *
 * The Perspectival Gap is stark:
 * - For the Fish (powerless, trapped), this is a Snare. Its own biology and
 *   conceptual framework form a trap that liquidates external truths.
 * - For the Educator (institutional, mobile), the parable itself is a Rope. It's a
 *   perfect, low-cost tool to coordinate a shared understanding of cognitive limits.
 * - The Analytical observer sees both sides. The parable has a valid coordination
 *   function (teaching) but is built upon a scenario of asymmetric extraction
 *   (the fish's reality being invalidated). This duality, combined with the
 *   physical enforcement (the fish can't breathe air), makes it a canonical
 *   Tangled Rope.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * A naive analysis might label the fish's situation a Mountain (an immutable
 * law of biology). However, the Tangled Rope classification is superior because
 * it captures the social/pedagogical layer built on top of this physical limit.
 * The constraint is not just the physical limit, but the *parable about the limit*,
 * which has both beneficiaries (educators) and victims (the fish as a symbol
 * for the intellectually trapped). This prevents misclassifying a constructed
 * teaching tool as a pure natural law.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_fish_turtle,
    'Is the fishs cognitive limit a permanent biological Mountain, or a solvable conceptual Rope that could be untangled with a different communication protocol?',
    'Comparative neurobiology of sensory integration and abstract thought in species with radically different environments.',
    'If Mountain, the parable describes a hard limit on empathy/understanding. If Rope, it describes a communication failure.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(parable_fish_turtle, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This is a perennial parable, so its core metrics are stable over time.
% The lifecycle data reflects this stability, showing no drift.
%
% Theater ratio over time:
narrative_ontology:measurement(parable_fish_turtle_tr_t0, parable_fish_turtle, theater_ratio, 0, 0.10).
narrative_ontology:measurement(parable_fish_turtle_tr_t5, parable_fish_turtle, theater_ratio, 5, 0.10).
narrative_ontology:measurement(parable_fish_turtle_tr_t10, parable_fish_turtle, theater_ratio, 10, 0.10).

% Extraction over time:
narrative_ontology:measurement(parable_fish_turtle_ex_t0, parable_fish_turtle, base_extractiveness, 0, 0.70).
narrative_ontology:measurement(parable_fish_turtle_ex_t5, parable_fish_turtle, base_extractiveness, 5, 0.70).
narrative_ontology:measurement(parable_fish_turtle_ex_t10, parable_fish_turtle, base_extractiveness, 10, 0.70).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The fish's internal, experience-based worldview acts as an information standard.
% Any new data (from the turtle) is validated against this standard and rejected.
narrative_ontology:coordination_type(parable_fish_turtle, information_standard).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: pareto_principle
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: Statistical Observation / Vilfredo Pareto (1896)
% ============================================================================

:- module(constraint_pareto_principle, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: pareto_principle
 * human_readable: The Pareto Principle (80/20 Rule)
 * domain: economic/social/statistical
 * temporal_scope: Permanent (Universal Law of Power Distributions)
 * spatial_scope: Global (Systems with Cumulative Advantage)
 * 
 * SUMMARY:
 * The Pareto Principle states that for many outcomes, roughly 80% of consequences 
 * come from 20% of causes. This power-law distribution manifests in wealth, 
 * software bugs, city sizes, and biological populations. It represents a 
 * fundamental asymmetry in how value or effort is distributed within a system.
 * 
 * KEY AGENTS:
 * - The Bottom-Tier Competitor (Individual Powerless): Struggles for survival in a winner-take-all market.
 * - The Business Manager (Individual Moderate): Seeks to identify the high-leverage 20% to maximize ROI.
 * - The Government Policy Maker (Institutional): Designs policies that interact with wealth distribution.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(pareto_principle, 0, 10).
narrative_ontology:constraint_claim(pareto_principle, mountain).

% Base extractiveness: 0.4 (Moderate)
% It describes an inherent asymmetry where a small group of inputs 
% "extracts" or captures the majority of the outputs.
domain_priors:base_extractiveness(pareto_principle, 0.4).

% Suppression score: 0.3 (Low)
% Alternatives (Normal distributions) are visible and frequent in 
% nature, but in complex networks, the Pareto distribution 
% is rarely successfully "suppressed" for long.
domain_priors:suppression_score(pareto_principle, 0.3).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(pareto_principle, extractiveness, 0.4).
narrative_ontology:constraint_metric(pareto_principle, suppression_requirement, 0.3).

% Enforcement: Emerges naturally from preferential attachment and power laws.
domain_priors:emerges_naturally(pareto_principle).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(pareto_principle, vital_few).
constraint_victim(pareto_principle, trivial_many).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE BOTTOM-TIER COMPETITOR - Snare
   --------------------------------------------------------------------------
   WHO: powerless (A small creator or worker in the tail end).
   WHEN: immediate (Fighting for survival in a winner-take-all market).
   WHERE: constrained (Locked into a system where rewards are centralized).
   
   WHY THIS CLASSIFICATION:
   For someone in the "long tail," the principle is a 'Snare'. The more the system 
   grows, the more value concentrates at the top (The 20%). This makes it 
   increasingly difficult for those at the bottom to gain traction, as the 
   distribution naturally "strangles" those without initial leverage.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    pareto_principle,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE BUSINESS MANAGER - Rope
   --------------------------------------------------------------------------
   WHO: individual_moderate (A professional optimizing a system).
   WHEN: biographical (Achieving goals within a career).
   WHERE: mobile (Can shift focus to different inputs).
   
   WHY THIS CLASSIFICATION:
   For the manager, the principle is a 'Rope'. It is a coordination mechanism for 
   productivity. By focusing on the "vital few" customers or tasks, they can 
   achieve disproportionate results with minimal effort. It is a tool for 
   leveraging reality.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    pareto_principle,
    rope,
    context(
        agent_power(individual_moderate),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(national)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE GOVERNMENT POLICY MAKER - Mountain
   --------------------------------------------------------------------------
   WHO: institutional (Designs policies affecting wealth distribution).
   WHEN: generational (Planning for long-term societal well-being).
   WHERE: analytical (Observing economic trends as immutable facts).
   
   WHY THIS CLASSIFICATION:
   For a government policy maker, the Pareto principle is a 'Mountain' – an
   immutable demographic reality they must plan around for long-term policy
   (e.g., taxation, social welfare). It is an unchangeable input to their models.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    pareto_principle,
    mountain,
    context(
        agent_power(institutional),
        time_horizon(generational),
        exit_options(analytical),
        spatial_scope(national)
    )
).

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(pareto_principle_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(pareto_principle, Type1, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(pareto_principle, Type2, context(agent_power(individual_moderate), _, _, _)),
    constraint_indexing:constraint_classification(pareto_principle, Type3, context(agent_power(institutional), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3,
    Type1 \= Type3.

:- end_tests(pareto_principle_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. INSTITUTIONAL PERSPECTIVE: Added the 'Government Policy Maker' as the
 *    institutional agent. For such a body, the Pareto principle is a 'Mountain'
 *    of statistical reality that must be acknowledged when designing policies.
 *
 * 2. CLASSIFICATION RATIONALE:
 *    - Bottom-Tier (Snare): Trapped by wealth concentration.
 *    - Business Manager (Rope): A tool for efficient resource allocation.
 *    - Policy Maker (Mountain): An immutable statistical reality.
 * 
 * 3. CORE INSIGHT: The Pareto Principle is a 'Mountain' of statistical reality
 *    that has profound implications for how resources are distributed. What is a
 *    tool ('Rope') for some can be a trap ('Snare') for others.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * The core uncertainty is whether the Pareto distribution is an immutable law
 * or a manipulable consequence of system design.
 */

omega_variable(
    preferential_attachment_origin,
    "Is the 80/20 distribution a result of inherent initial skill/quality (Mountain) or pure stochastic luck exacerbated by preferential attachment (Snare)?",
    resolution_mechanism("Simulating high-fidelity agents with varying initial conditions vs. luck ratios in a preferential attachment model."),
    impact("If Skill: The distribution is a 'Rope' for meritocracy. If Luck: It is a 'Snare' of unfair advantage."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */
/**
 * VIABLE ALTERNATIVES
 *
 * ALTERNATIVE 1: Normal Distribution (Gaussian)
 *    Viability: Occurs naturally in physical traits (e.g., height).
 *    Suppression: Rarely observed in information or wealth systems with cumulative advantage. It is not actively "suppressed" so much as it simply doesn't emerge.
 *
 * ALTERNATIVE 2: Radical Egalitarian Redistribution
 *    Viability: Mathematically suppresses the Pareto tail (e.g., progressive taxation, universal basic income).
 *    Suppression: High. Often viewed as economically inefficient or coercive by those who benefit from the Pareto distribution.
 *
 * CONCLUSION:
 * While the Pareto Principle is a natural 'Mountain' for observers, the
 * suppression of egalitarian alternatives makes it function as a 'Snare'
 * for the bottom 80%.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/pareto_principle].
 * 2. Multi-perspective: ?- multi_index_report(pareto_principle).
 * 3. Run tests: ?- run_tests(pareto_principle_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: parkinsons_law
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_parkinsons_law, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: parkinsons_law
 * human_readable: Parkinson's Law
 * domain: organizational/economic
 * * SUMMARY:
 * Parkinson's Law states that "work expands so as to fill the time available for its completion." It describes the inherent tendency of bureaucracies to generate work for themselves and expand their personnel, regardless of the actual amount of productive work to be done. This extracts time and capital from productive ends to maintain the scale and status of the administrative class.
 * * KEY AGENTS:
 * - Productive Contributor: Subject (Powerless), whose time is consumed by administrative overhead.
 * - Middle Management: Beneficiary (Institutional), who uses the law to justify budget and headcount increases.
 * - Systems Auditor: Observer (Analytical), who sees both the coordination claims and the extractive reality.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(parkinsons_law, 0.50). % Extracts time and capital from productive ends.
domain_priors:suppression_score(parkinsons_law, 0.40).   % Alternatives (e.g., ROWE) are suppressed by the bureaucracy's self-preservation logic.
domain_priors:theater_ratio(parkinsons_law, 0.10).       % The work is genuinely performed, just not productive. Low theater.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(parkinsons_law, extractiveness, 0.50).
narrative_ontology:constraint_metric(parkinsons_law, suppression_requirement, 0.40).
narrative_ontology:constraint_metric(parkinsons_law, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% The bureaucracy claims its processes are necessary for coordination.
narrative_ontology:constraint_claim(parkinsons_law, coordination).

% Binary flags
domain_priors:requires_active_enforcement(parkinsons_law). % Required for Tangled Rope. Enforced via HR policies, performance reviews, etc.

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(parkinsons_law, middle_management).
narrative_ontology:constraint_victim(parkinsons_law, productive_contributors).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The productive worker sees their time and energy consumed by non-productive tasks.
constraint_indexing:constraint_classification(parkinsons_law, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The manager uses the law as a coordination tool to justify resource allocation.
constraint_indexing:constraint_classification(parkinsons_law, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees both the coordination function (for managers) and the
% asymmetric extraction (from producers), enforced by internal rules.
constraint_indexing:constraint_classification(parkinsons_law, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(parkinsons_law_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(parkinsons_law, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(parkinsons_law, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(tangled_rope_analytical_view) :-
    % The analytical view must resolve the conflict into a Tangled Rope.
    constraint_indexing:constraint_classification(parkinsons_law, tangled_rope, context(agent_power(analytical), _, _, _)).

test(threshold_validation) :-
    % Verify the base extractiveness is in the high-extraction range for Snare/Tangled Rope.
    narrative_ontology:constraint_metric(parkinsons_law, extractiveness, E),
    E >= 0.46.

:- end_tests(parkinsons_law_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * Parkinson's Law is a classic example of a perspectivally variant constraint.
 * - To the 'Productive Contributor' (powerless, trapped), the endless expansion of administrative tasks is a Snare that consumes their time and prevents meaningful work.
 * - To 'Middle Management' (institutional, mobile), this same expansion is a Rope—a coordination mechanism used to justify larger budgets and more subordinates, which is the primary path to career advancement in a bureaucracy.
 * - The Analytical observer, seeing both sides, classifies it as a Tangled Rope. It has a genuine coordination function (resource acquisition for the managerial class) but also imposes a severe asymmetric extraction (wasted time and effort for the productive class). This duality is its defining feature. The claim that it is a 'Mountain' (an inevitable law of nature) is a common misinterpretation that masks the agency of the beneficiaries who perpetuate it.
 *
 * * MANDATROPHY ANALYSIS:
 * The Tangled Rope classification is critical for resolving Mandatrophy. A naive analysis might label Parkinson's Law a pure Snare, ignoring the real coordination benefits it provides to managers. Conversely, accepting the managerial view would misclassify it as a benign Rope. The Tangled Rope acknowledges both the coordination claim and the extractive reality, correctly identifying it as a constructed system with winners and losers, rather than an immutable law or a purely predatory structure.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_parkinsons_law,
    'Will AI and automation break the personnel expansion loop, or simply create new, more complex administrative "oversight" work?',
    'Longitudinal tracking of administrative-to-production headcount ratios in large organizations post-AI implementation.',
    'If the loop breaks, the law may degrade into a Piton or be replaced. If it adapts, it remains a durable Tangled Rope.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(parkinsons_law, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Parkinson's Law emerges and intensifies as an organization matures and
% its bureaucracy calcifies. Extraction grows as more processes are added.
% Theater remains low because the administrative work is genuinely performed.

% Theater ratio over time (remains low):
narrative_ontology:measurement(parkinsons_law_tr_t0, parkinsons_law, theater_ratio, 0, 0.05).
narrative_ontology:measurement(parkinsons_law_tr_t5, parkinsons_law, theater_ratio, 5, 0.08).
narrative_ontology:measurement(parkinsons_law_tr_t10, parkinsons_law, theater_ratio, 10, 0.10).

% Extraction over time (increases as bureaucracy grows):
narrative_ontology:measurement(parkinsons_law_ex_t0, parkinsons_law, base_extractiveness, 0, 0.20).
narrative_ontology:measurement(parkinsons_law_ex_t5, parkinsons_law, base_extractiveness, 5, 0.35).
narrative_ontology:measurement(parkinsons_law_ex_t10, parkinsons_law, base_extractiveness, 10, 0.50).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The law's function is to justify and manage the allocation of time and budget.
narrative_ontology:coordination_type(parkinsons_law, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: peano_curve_mapping
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Giuseppe Peano (1890) / Space-Filling Curves
% ============================================================================

:- module(constraint_peano_curve, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: peano_curve_mapping
 * human_readable: Peano Space-Filling Curve
 * domain: mathematical/technological
 * temporal_scope: 1890 - Present (Civilizational)
 * spatial_scope: Global/Abstract (Unit Interval to Unit Square)
 * * SUMMARY:
 * The Peano Curve is the first discovered space-filling curve, a continuous 
 * mapping from a one-dimensional interval onto a two-dimensional square. It 
 * represents a fundamental constraint on the relationship between dimension 
 * and cardinality, proving that a 1D line can "occupy" all points in a 2D space.
 * * KEY AGENTS:
 * - The Mapping Point (Subject): A powerless agent whose position in 2D space 
 * is strictly determined by its 1D "time" parameter.
 * - The Database Architect (Institutional): An agent using space-filling 
 * logic (e.g., Z-order or Hilbert curves) as a "Rope" for data locality.
 * - Geometric Intuition (Victim): The observer whose common-sense 
 * distinction between 1D and 2D is "strangled" by the mapping.
 * * NARRATIVE ARC:
 * Originally a "pathological" counter-example to intuition, the Peano Curve 
 * is a "Mountain" of topological reality. In modern computing, it is a 
 * "Rope" for functional coordination in spatial indexing. However, for 
 * the 1D parameter, the mapping is a "Snare"—it extracts its 1D simplicity 
 * and forces it to assume the burden of a 2D existence, creating 
 * locality-breaking "jumps" in higher dimensions.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for DR-Audit Suite
narrative_ontology:interval(peano_era, 1890, 2026).
narrative_ontology:constraint_claim(peano_curve_mapping, mountain).

% Base extractiveness score (0.0-1.0)
% Rationale: 0.25. The curve "extracts" 1D locality (points that are close 
% in 1D may be far in 2D) to satisfy the space-filling requirement.
domain_priors:base_extractiveness(peano_curve_mapping, 0.25).

% Suppression score (0.0-1.0)
% Rationale: 0.2. It suppresses the intuitive topological distinction 
% between dimensions, rendering the "1D is not 2D" argument invalid.
domain_priors:suppression_score(peano_curve_mapping, 0.2).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(peano_curve_mapping, extractiveness, 0.25).
narrative_ontology:constraint_metric(peano_curve_mapping, suppression_requirement, 0.2).

% Enforcement: Emerges naturally from the axioms of continuity and set theory.
domain_priors:emerges_naturally(peano_curve_mapping).

% Metrics for Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(peano_curve_mapping, spatial_database_indexing). % Efficient 2D range queries.
constraint_beneficiary(peano_curve_mapping, image_compression_algorithms). 
constraint_victim(peano_curve_mapping, classical_dimension_intuition). % Strangled by the surjective mapping.

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE MAPPING POINT - Mountain
   --------------------------------------------------------------------------
   WHO: powerless - The point on the line has no agency over the map.
   WHEN: immediate - True at every infinitesimal step of the parameter t.
   WHERE: trapped - Bound within the surjective mapping f: [0,1] -> [0,1]^2.
   SCOPE: local - Immediate coordinate mapping.
   
   WHY THIS CLASSIFICATION:
   For the point moving along the curve, the mapping is an unyielding law. 
   If it is at time 't', it *must* be at coordinate (x,y). There are zero 
   degrees of freedom to avoid the 2D "destiny" dictated by the fractal limit.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    peano_curve_mapping,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE GIS ENGINEER - Rope
   --------------------------------------------------------------------------
   WHO: institutional - Power to choose the mapping (Peano, Hilbert, or Morton).
   WHEN: biographical - Planning the architecture of a geographic system.
   WHERE: mobile - Can adjust the depth of recursion or the type of curve.
   SCOPE: global - Universal application in spatial data.
   
   WHY THIS CLASSIFICATION:
   For the engineer, the space-filling curve is a "Rope"—a tool for functional 
   coordination. It allows them to "pull" 2D spatial data into a 1D 
   linear order (the database index) without losing too much locality, 
   facilitating efficient range searches.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    peano_curve_mapping,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE LOCALITY PRESERVATION - Snare
   --------------------------------------------------------------------------
   WHO: powerless - The sequence of points bound by the 1D line.
   WHEN: immediate - Encountering a "jump" where 2D neighbors are 1D strangers.
   WHERE: constrained - The topological limit of f is continuous but not 
        homeomorphic (no 1D-2D isomorphism is a homeomorphism).
   SCOPE: local - A specific discontinuous "jump" in the mapping.
   
   WHY THIS CLASSIFICATION:
   The Peano mapping acts as a "Snare" for locality. Because a 1D line 
   cannot be continuously mapped to a 2D square in a way that preserves 
   all neighborhood relations (Netto's Theorem), the curve "strangles" 
   locality. It extracts the 1D proximity of points, forcing distant 1D 
   neighbors to be 2D neighbors and vice versa.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    peano_curve_mapping,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(local)
    )
) :- 
    domain_priors:base_extractiveness(peano_curve_mapping, E),
    E >= 0.2,
    !.

/* ==========================================================================
   4. TESTS (Insights into Space-Filling Logic)
   ========================================================================== */

:- begin_tests(peano_curve_tests).

test(perspective_variance) :-
    % Point -> Mountain
    constraint_indexing:constraint_classification(peano_curve_mapping, Type1, context(powerless, immediate, trapped, local)),
    % Engineer -> Rope
    constraint_indexing:constraint_classification(peano_curve_mapping, Type2, context(institutional, biographical, mobile, global)),
    Type1 = mountain,
    Type2 = rope.

test(locality_snare_penalty) :-
    % A powerless data sequence (constrained) sees the loss of locality as a Snare.
    constraint_indexing:constraint_classification(peano_curve_mapping, snare, context(powerless, immediate, constrained, local)).

test(natural_emergence) :-
    domain_priors:emerges_naturally(peano_curve_mapping).

:- end_tests(peano_curve_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * 1. CLASSIFICATION: I classified the Peano mapping as a Mountain for the 
 * individual point because topologicalSurjectivity is non-negotiable. 
 * 2. TYPE SHIFT: I highlighted how the "Rope" of spatial indexing depends on 
 * the "Snare" of locality loss. You cannot fill space (Rope) without 
 * breaking the 1D-2D neighborhood equivalence (Snare).
 * 3. EXTRACTIVENESS (0.25): Assigned due to the "Tax" on locality. Any 
 * space-filling curve must "extract" some level of linear order to 
 * satisfy the higher-dimensional density.
 */

% OMEGA IDENTIFICATION
omega_variable(
    locality_preservation_limit,
    "Is there a 'Rope' (a different curve) that preserves locality better than Peano?",
    resolution_mechanism("Comparison of Peano vs Hilbert vs Morton curves using the 'Clustering Factor' metric."),
    impact("If Hilbert is superior: Peano is a 'Snare' compared to the Hilbert 'Rope'."),
    confidence_without_resolution(high)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Hilbert Curve
 * Viability: Better locality preservation than Peano's original construction.
 * Suppression: Often preferred in engineering, making Peano's original 
 * construction a "Snare" by comparison for practical use.
 * * ALTERNATIVE 2: Morton Order (Z-order)
 * Viability: Simpler to compute (bit-interleaving).
 * Status: A "Rope" used in many low-level CPU operations.
 * * CONCLUSION:
 * The existence of the Hilbert Curve (Alternative 1) transforms the 
 * original Peano Curve into a "Snare" for performance-seeking engineers, 
 * as it extracts more locality for the same space-filling result.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Load: ?- [peano_curve_mapping].
% Analyze: ?- constraint_indexing:multi_index_report(peano_curve_mapping).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: permissive_software_licensing
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: MIT License / Apache License 2.0 / BSD Licenses
% ============================================================================

:- module(constraint_permissive_software_licensing, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: permissive_software_licensing
 * human_readable: Permissive Software Licenses (e.g., MIT, Apache)
 * domain: technological/legal/economic
 * temporal_scope: 1980s - Present
 * spatial_scope: Global
 * 
 * SUMMARY:
 * Permissive licenses (like MIT or Apache) allow users to do almost anything with 
 * source code—copy, modify, and redistribute it—even as part of proprietary, 
 * closed-source software. The only common requirement is to include the original 
 * copyright and license notice.
 * 
 * KEY AGENTS:
 * - The Corporate Developer (Institutional): Seeks to incorporate open-source code into proprietary products.
 * - The Copyleft Ideologue (Individual Powerful): Believes software freedom requires sharing modifications.
 * - The Hobbyist Developer (Individual Powerless): Uses free code for personal projects without legal burden.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (Reality Layer)
   ========================================================================== */

narrative_ontology:interval(permissive_software_licensing, 0, 10).
narrative_ontology:constraint_claim(permissive_software_licensing, rope).

% Base extractiveness score (0.2)
% Slightly higher than Copyleft because it allows private entities to 
% extract profit from the work without sharing their modifications back.
domain_priors:base_extractiveness(permissive_software_licensing, 0.2).

% Suppression score (0.1)
% Extremely low; the licenses are famously short and transparent.
domain_priors:suppression_score(permissive_software_licensing, 0.1).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(permissive_software_licensing, extractiveness, 0.2).
narrative_ontology:constraint_metric(permissive_software_licensing, suppression_requirement, 0.1).

% Enforcement: Requires minimal enforcement (Notice requirement only).
domain_priors:requires_active_enforcement(permissive_software_licensing).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(permissive_software_licensing, commercial_software_vendors).
constraint_victim(permissive_software_licensing, reciprocal_commons).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE HOBBYIST DEVELOPER - Mountain
   --------------------------------------------------------------------------
   WHO: powerless (No legal team, limited resources)
   WHEN: immediate (Needs a library for a personal project)
   WHERE: trapped (Cannot afford paid software, avoids complex licenses)
   
   WHY THIS CLASSIFICATION:
   For a hobbyist, permissive licenses make the software landscape a 'Mountain'
   of free, usable resources. The code is just 'there' to be used, like a rock
   or a tree, without any complex thought about legal obligations.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    permissive_software_licensing,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE STARTUP FOUNDER / CORPORATE DEVELOPER - Rope
   --------------------------------------------------------------------------
   WHO: institutional (Building a proprietary product)
   WHEN: biographical (Product lifecycle)
   WHERE: mobile (Can choose from thousands of libraries)
   
   WHY THIS CLASSIFICATION:
   For a business, permissive licenses are a 'Rope.' They allow the company to 
   build on world-class infrastructure (React, Go, etc.) with zero legal friction,
   accelerating development without the "viral" risk of copyleft forcing them
   to open-source their own proprietary code.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    permissive_software_licensing,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE COPYLEFT IDEOLOGUE - Snare
   --------------------------------------------------------------------------
   WHO: powerful (e.g., Richard Stallman; intellectual influence)
   WHEN: generational (Concerned with the long-term freedom of the commons)
   WHERE: constrained (Must compete with the ease of permissive licenses)
   
   WHY THIS CLASSIFICATION:
   To a free software advocate, permissive licenses are a 'Snare' for the community.
   They allow corporations to "strip-mine" the commons—taking community work, 
   closing it off in proprietary products, and selling it back, strangling the
   virtuous cycle of shared improvements.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    permissive_software_licensing,
    snare,
    context(
        agent_power(powerful),
        time_horizon(generational),
        exit_options(constrained),
        spatial_scope(global)
    )
).

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(permissive_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(permissive_software_licensing, Type1, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(permissive_software_licensing, Type2, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(permissive_software_licensing, Type3, context(agent_power(powerful), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3,
    Type1 \= Type3.

:- end_tests(permissive_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. PERSPECTIVE SELECTION: Added the 'Hobbyist Developer' as the 'powerless'
 *    agent. This shows how for a non-commercial actor, the license's permissiveness
 *    makes it feel like a simple, unchangeable feature of the landscape ('Mountain').
 * 
 * 2. CLASSIFICATION RATIONALE:
 *    - Hobbyist (Mountain): A free, unchanging resource to be used without thought.
 *    - Corporation (Rope): A tool for rapid, low-risk product development.
 *    - Ideologue (Snare): A tool for privatizing the commons.
 *
 * 3. EXTRACTIVENESS (0.2): This reflects the value capture by commercial entities
 *    that is not reciprocated back to the commons, which is the core of the
 *    ideological conflict with copyleft.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * The core uncertainty is whether this model of licensing is sustainable as major
 * corporations become the primary beneficiaries of unpaid community labor.
 */

omega_variable(
    re_licensing_trend,
    "Will more permissive projects move to copyleft or 'Business Source' licenses (BSL) as cloud providers extract more value from them?",
    resolution_mechanism("Tracking license changes in major open source databases and infrastructure projects (e.g., Redis, Terraform) over the next 5-10 years."),
    impact("If Yes: The permissive 'Mountain' for hobbyists and 'Rope' for startups collapses into a 'Snare' of commercial gatekeeping."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * 
 * ALTERNATIVE 1: Copyleft Licenses (e.g., GPL)
 *    Viability: The primary alternative, used by foundational projects like Linux.
 *    Suppression: Not suppressed, but its "viral" nature (requiring derivative works to also be open)
 *    is actively avoided by corporations, which has led to the dominance of permissive licenses
 *    in corporate-backed open source.
 *
 * CONCLUSION:
 * Permissive licensing became the dominant model specifically because it is a better 'Rope'
 * for commercial interests. It prioritizes frictionless adoption over the reciprocal freedom
 * enforced by the copyleft 'Snare' (from a corporate perspective).
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/permissive_software_licensing].
 * 2. Multi-perspective: ?- multi_index_report(permissive_software_licensing).
 * 3. Run tests: ?- run_tests(permissive_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: perseverance_ai_drive
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2024-02-29
% ============================================================================

:- module(constraint_perseverance_ai_drive, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: perseverance_ai_drive
 * human_readable: AI-Driven Martian Rover Autonomy
 * domain: technological
 * * SUMMARY:
 * NASA's Perseverance rover successfully completed its first AI-planned drive on Mars, autonomously navigating a 200-foot (61-meter) path. The constraint lies in the rover's limited resources (processing power, energy) for navigation and decision-making, requiring a balance between autonomy and reliance on Earth-based commands.
 * * KEY AGENTS:
 * - Rover Resources: Subject (Powerless)
 * - NASA Engineers: Beneficiary (Institutional)
 * - Scientific Community: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(perseverance_ai_drive, 0.25). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(perseverance_ai_drive, 0.10).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(perseverance_ai_drive, 0.05).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(perseverance_ai_drive, extractiveness, 0.25).
narrative_ontology:constraint_metric(perseverance_ai_drive, suppression_requirement, 0.10).
narrative_ontology:constraint_metric(perseverance_ai_drive, theater_ratio, 0.05).

% Binary flags
% narrative_ontology:has_sunset_clause(perseverance_ai_drive).      % Mandatory if Scaffold
% domain_priors:requires_active_enforcement(perseverance_ai_drive). % Required for Tangled Rope

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(perseverance_ai_drive, nasa_engineers).
% narrative_ontology:constraint_victim(perseverance_ai_drive, rover_resources).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE/MOUNTAIN)
% High extraction felt as an immutable limit or predatory trap.
% NOTE: This may be upgraded to 'organized' power if a critical mass of victims exists.
constraint_indexing:constraint_classification(perseverance_ai_drive, mountain,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Viewed as essential infrastructure or coordination.
constraint_indexing:constraint_classification(perseverance_ai_drive, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(universal))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER
% Default analytical context (civilizational/analytical/global).
% This perspective is used by the bridge to derive constraint_claim.
% Type should reflect what the metrics compute: mountain, rope, tangled_rope, snare, scaffold, or piton.
constraint_indexing:constraint_classification(perseverance_ai_drive, rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(perseverance_ai_drive_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(perseverance_ai_drive, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(perseverance_ai_drive, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(threshold_validation) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(perseverance_ai_drive, ExtMetricName, E),
    E =< 0.15. % Ensures it's a Rope or Mountain.

:- end_tests(perseverance_ai_drive_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The rover's limited resources (power, processing) are viewed as a *Mountain* from its perspective, a fundamental constraint.  NASA engineers, however, view the AI-driven autonomy as a *Rope* that allows the rover to accomplish more science with less direct control, enabling more exploration. The analytical perspective also sees it as a Rope, improving efficiency and exploration capacity. The perspectival gap arises from the differing levels of control and impact.  The rover *experiences* resource limitations; the engineers *leverage* the AI to overcome those limitations.
 * * MANDATROPHY ANALYSIS:
 * The system avoids mislabeling this coordination as pure extraction because there is no explicit victim group declared. While the rover experiences limitations, it is not being actively exploited in the traditional sense. The AI autonomy serves to expand the rover's capabilities, not to extract resources from it against its "will."
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_perseverance_ai_drive,
    'How reliable will the AI's autonomous navigation be in the long term?',
    'Accumulation of operational data and fault analysis.',
    'Improved science return vs. increased mission risk and potential for rover damage.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(perseverance_ai_drive, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection (metric_substitution,
% extraction_accumulation) by providing measurements at multiple time points.
% Model how the constraint intensified or changed across the interval.
%
% Required for high-extraction constraints (base_extractiveness > 0.46).
% Use at least 3 time points (T=0, midpoint, T=end) for each tracked metric.
% No measurement required since base_extractiveness < 0.46

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: perseverance_rover_autonomy
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-28
% ============================================================================

:- module(constraint_perseverance_rover_autonomy, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: perseverance_rover_autonomy
 * human_readable: Perseverance Rover Autonomy
 * domain: technological
 * * SUMMARY:
 * The Perseverance rover's autonomous exploration capability on Mars presents a constraint on direct, real-time human control. This is a case of delegated decision-making to an AI agent, necessitated by communication latency, which limits the immediate intervention capabilities of Earth-based scientists but vastly increases mission efficiency.
 * * KEY AGENTS:
 * - The Rover: Subject (Powerless) - acting on its programming within physical and mission limits.
 * - NASA Scientists: Beneficiary (Institutional) - enabling more efficient and extensive exploration.
 * - Mars Environment: Analytical Context - the physical reality in which the autonomy operates.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(perseverance_rover_autonomy, 0.10). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(perseverance_rover_autonomy, 0.15).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(perseverance_rover_autonomy, 0.05).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(perseverance_rover_autonomy, extractiveness, 0.10).
narrative_ontology:constraint_metric(perseverance_rover_autonomy, suppression_requirement, 0.15).
narrative_ontology:constraint_metric(perseverance_rover_autonomy, theater_ratio, 0.05).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(perseverance_rover_autonomy, coordination).

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
narrative_ontology:constraint_beneficiary(perseverance_rover_autonomy, nasa_scientists).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% This is a uniform-type constraint (Rope-only). The classification is the
% same from all perspectives because the system is a pure coordination
% mechanism with negligible asymmetric extraction.

% PERSPECTIVE 1: THE SUBJECT (THE ROVER)
% The rover's programming is a constraint, but one that enables its function.
constraint_indexing:constraint_classification(perseverance_rover_autonomy, rope,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (NASA)
% Viewed as essential infrastructure for mission success.
constraint_indexing:constraint_classification(perseverance_rover_autonomy, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(universal))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER
% The system is seen as a pure coordination solution to the problem of
% light-speed delay in interplanetary communication.
constraint_indexing:constraint_classification(perseverance_rover_autonomy, rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(perseverance_rover_autonomy_tests).

test(perspectival_consistency) :-
    % Verify there is no perspectival gap because this is a uniform-type Rope.
    constraint_indexing:constraint_classification(perseverance_rover_autonomy, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(perseverance_rover_autonomy, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless == TypeInstitutional,
    TypePowerless == rope.

test(threshold_validation) :-
    % Verify the base extractiveness is within the Rope threshold.
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(perseverance_rover_autonomy, ExtMetricName, E),
    E =< 0.15.

test(theater_ratio_validation) :-
    % Verify the theater ratio is low, indicating high functionality.
    config:param(theater_metric_name, TheaterMetricName),
    narrative_ontology:constraint_metric(perseverance_rover_autonomy, TheaterMetricName, TR),
    TR < 0.70.

:- end_tests(perseverance_rover_autonomy_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The Perseverance rover's autonomy is classified as a pure Rope. The base extractiveness is set very low (0.10) because its primary function is to enable scientific discovery, not to extract value from an agent for the benefit of another. The "extraction" is the loss of direct, real-time control by scientists, but this is a necessary trade-off for operating under significant communication latency and is vastly outweighed by the coordination benefit: enabling autonomous, efficient exploration. The suppression score (0.15) is also low; while it constrains direct control, it opens up far greater possibilities for data collection.
 *
 * This is a uniform-type constraint, classifying as a Rope from all perspectives. For the rover ("powerless"), the autonomy is its mode of function. For NASA ("institutional"), it is the core enabling technology of the mission. There is no victim group, so it cannot be a Tangled Rope or Snare. The theater ratio (0.05) is minimal, as the system is highly functional and not performative, ruling out a Piton classification.
 *
 * [RESOLVED MANDATROPHY]: This is not a high-extraction constraint, so Mandatrophy is not a concern. The Rope classification correctly identifies the system as a coordination solution to a physical problem (light-speed delay), preventing mischaracterization as an extractive mechanism.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_perseverance_rover_autonomy,
    'Could future, more advanced AI autonomy on interplanetary probes create unforeseen ethical dilemmas or catastrophic failure modes not present in this system?',
    'Long-term monitoring of AI decision-making, comparative analysis with future autonomous missions, and formal verification of safety-critical AI systems.',
    'If true: The "Rope" of today could become the seed of a future "Snare" if AI goals diverge from human scientific goals. If false: Advanced autonomy remains a robust coordination tool for science.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(perseverance_rover_autonomy, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This is a low-extraction constraint, so temporal data is not strictly
% required. However, it is included to model the system's stability over its
% operational interval. Both extraction and theater ratio are expected to
% remain low and stable.

% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(perseverance_rover_autonomy_tr_t0, perseverance_rover_autonomy, theater_ratio, 0, 0.05).
narrative_ontology:measurement(perseverance_rover_autonomy_tr_t5, perseverance_rover_autonomy, theater_ratio, 5, 0.05).
narrative_ontology:measurement(perseverance_rover_autonomy_tr_t10, perseverance_rover_autonomy, theater_ratio, 10, 0.05).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(perseverance_rover_autonomy_ex_t0, perseverance_rover_autonomy, base_extractiveness, 0, 0.10).
narrative_ontology:measurement(perseverance_rover_autonomy_ex_t5, perseverance_rover_autonomy, base_extractiveness, 5, 0.10).
narrative_ontology:measurement(perseverance_rover_autonomy_ex_t10, perseverance_rover_autonomy, base_extractiveness, 10, 0.10).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% This system is a unique piece of scientific infrastructure.
narrative_ontology:coordination_type(perseverance_rover_autonomy, global_infrastructure).

% Network relationships (structural influence edges)
% The rover's autonomy is dependent on the communication infrastructure.
narrative_ontology:affects_constraint(deep_space_network_bandwidth, perseverance_rover_autonomy).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: personalized_nutritional_arbitrage
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_personalized_nutritional_arbitrage, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: pna
 * human_readable: Personalized Nutritional Arbitrage
 * domain: economic/technological/healthcare
 * * SUMMARY:
 * This constraint describes the system of personalized nutrition platforms (e.g., Zoe)
 * that use microbiome and blood sugar data to provide tailored dietary advice.
 * It creates a two-tiered system: those with access can optimize their health
 * (a coordination benefit), while the platforms extract valuable biological data
 * for research and product development. Those without access remain subject to
 * generic, often suboptimal, public health guidelines.
 * * KEY AGENTS:
 * - Generic Diet Follower: Subject (Powerless), follows one-size-fits-all advice.
 * - Nutrition Platform: Beneficiary (Institutional), monetizes data and insights.
 * - Health Systems Analyst: Auditor (Analytical), evaluates the system's net effect.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(pna, 0.65). % High extraction via data monetization and subscription fees.
domain_priors:suppression_score(pna, 0.40).   % Moderate suppression of alternatives (generic advice is still dominant but less effective).
domain_priors:theater_ratio(pna, 0.15).       % Low theater; the service is primarily functional.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(pna, extractiveness, 0.65).
narrative_ontology:constraint_metric(pna, suppression_requirement, 0.40).
narrative_ontology:constraint_metric(pna, theater_ratio, 0.15).

% Constraint self-claim (what does the constraint claim to be?)
% Platforms market themselves as a pure coordination tool for health.
narrative_ontology:constraint_claim(pna, coordination).

% Binary flags
domain_priors:requires_active_enforcement(pna). % Requires active user data logging and sample submission.

% Structural property derivation hooks:
% has_coordination_function/1 is DERIVED from constraint_beneficiary/2
% has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
narrative_ontology:constraint_beneficiary(pna, nutrition_tech_platforms).
narrative_ontology:constraint_victim(pna, generic_diet_followers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For the user without access, the existence of a superior, personalized system
% renders generic public health advice a trap that extracts health and agency.
% χ = 0.65 * π(powerless, 1.5) * σ(national, 1.0) = 0.975
constraint_indexing:constraint_classification(pna, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For the platform, the system is a pure coordination mechanism, generating
% revenue and research data while providing a valuable service.
% χ = 0.65 * π(institutional, -0.2) * σ(global, 1.2) = -0.156
constraint_indexing:constraint_classification(pna, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees both the genuine coordination function and the asymmetric
% data extraction, classifying it as a Tangled Rope.
% χ = 0.65 * π(analytical, 1.15) * σ(global, 1.2) = 0.897
constraint_indexing:constraint_classification(pna, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(pna_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(pna, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(pna, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(threshold_validation_high_extraction) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(pna, ExtMetricName, E),
    E >= 0.46.

test(tangled_rope_conditions_met) :-
    % Verify the analytical observer correctly identifies a Tangled Rope.
    constraint_indexing:constraint_classification(pna, tangled_rope, context(agent_power(analytical), _, _, _)),
    domain_priors:requires_active_enforcement(pna),
    narrative_ontology:constraint_beneficiary(pna, _),
    narrative_ontology:constraint_victim(pna, _).

:- end_tests(pna_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness of 0.65 reflects the high value of proprietary biological
 * data sets and the subscription-based business model. The suppression score of 0.40
 * acknowledges that while generic advice is the default, it is not coercively
 * enforced; the suppression comes from its demonstrated inferiority.
 *
 * The Perspectival Gap is stark:
 * - The `powerless` user, unable to afford or access the platform, is trapped in an
 *   inferior system. The existence of a better, inaccessible alternative turns their
 *   situation into a Snare, where their health outcomes are extracted relative to
 *   the "optimized" cohort.
 * - The `institutional` platform experiences negative extraction (χ = -0.156), viewing
 *   the system as a highly efficient Rope for coordinating user health and data assets.
 * - The `analytical` observer, seeing both sides, correctly identifies the structure
 *   as a Tangled Rope: a system with a real coordination function (the Rope part)
 *   that is inseparable from its high, asymmetric extraction (the Snare part).
 *
 * * MANDATROPHY ANALYSIS:
 * This classification prevents mislabeling the system as a pure Snare. While highly
 * extractive, it provides a genuine, novel coordination function (matching diet to
 * unique biology) that cannot be dismissed. The Tangled Rope classification
 * correctly captures this duality, forcing an analysis of both its benefits and its
 * costs, preventing the system from collapsing the distinction.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_pna,
    'Is the extracted biological data primarily a public good (for research) or a private asset (for profit), and can users control this designation?',
    'Audit of platform terms of service, data-sharing agreements with research institutions, and regulatory frameworks for biological data ownership (e.g., GDPR extensions).',
    'If primarily a public good with user control -> closer to Rope. If primarily a private asset without user control -> closer to Snare.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(pna, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Extraction grew as the business model shifted from research to a direct-to-consumer
% subscription service, monetizing the data more effectively.
% Theater ratio remains low and stable, as the service is functional.

% Theater ratio over time (metric_substitution detection):
narrative_ontology:measurement(pna_tr_t0, pna, theater_ratio, 0, 0.10).
narrative_ontology:measurement(pna_tr_t5, pna, theater_ratio, 5, 0.12).
narrative_ontology:measurement(pna_tr_t10, pna, theater_ratio, 10, 0.15).

% Extraction over time (extraction_accumulation detection):
narrative_ontology:measurement(pna_ex_t0, pna, base_extractiveness, 0, 0.48).
narrative_ontology:measurement(pna_ex_t5, pna, base_extractiveness, 5, 0.55).
narrative_ontology:measurement(pna_ex_t10, pna, base_extractiveness, 10, 0.65).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The system allocates a resource (personalized advice) based on data.
narrative_ontology:coordination_type(pna, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: peter_principle
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-21
% ============================================================================

:- module(constraint_peter_principle, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: peter_principle
 * human_readable: The Peter Principle (Promotion to Incompetence)
 * domain: organizational/social
 * * SUMMARY:
 * The Peter Principle states that "in a hierarchy, every employee tends to rise
 * to their level of incompetence." People are promoted based on performance in
 * their current role, not aptitude for the next, eventually reaching a position
 * where they are ineffective and remain, extracting value (salary, status) while
 * reducing overall organizational utility.
 * * KEY AGENTS:
 * - The Incompetent Manager: Subject (Powerless), trapped in a role they cannot perform.
 * - The Organization's HR/Leadership: Beneficiary (Institutional), using the promotion ladder as a standard coordination tool.
 * - The Systems Analyst: Auditor (Analytical), observing the dysfunctional hybrid of coordination and extraction.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(peter_principle, 0.55). % Extracts organizational efficiency and subordinate well-being. Snare >= 0.46.
domain_priors:suppression_score(peter_principle, 0.60).   % Alternatives (demotion without stigma, dual-track careers) are culturally suppressed.
domain_priors:theater_ratio(peter_principle, 0.20).       % Low theater; the dysfunction is real, not performative.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(peter_principle, extractiveness, 0.55).
narrative_ontology:constraint_metric(peter_principle, suppression_requirement, 0.60).
narrative_ontology:constraint_metric(peter_principle, theater_ratio, 0.20).

% Constraint self-claim (what does the constraint claim to be?)
% It's presented as a constructed, meritocratic system of advancement.
narrative_ontology:constraint_claim(peter_principle, constructed).

% Binary flags
domain_priors:requires_active_enforcement(peter_principle). % Required for Tangled Rope. Enforced by HR policy and cultural norms.

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(peter_principle, senior_management_who_benefit_from_stable_hierarchy).
narrative_ontology:constraint_victim(peter_principle, organizational_efficiency_and_subordinates).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The manager promoted to their level of incompetence. They are trapped,
% unable to perform effectively but also unable to be demoted without severe
% social and financial penalty. The system extracts their well-being and their
% team's productivity.
constraint_indexing:constraint_classification(peter_principle, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% From the perspective of the institutional hierarchy (e.g., HR, senior leadership),
% the promotion ladder is a standard, necessary coordination mechanism (a Rope)
% for incentivizing performance and filling roles. The negative externalities are
% accepted as a cost of doing business.
constraint_indexing:constraint_classification(peter_principle, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees both the coordination function (the Rope of career progression)
% and the severe asymmetric extraction (the Snare of promoting incompetence).
% Because it has both functions and requires active enforcement through cultural
% norms and HR policy, it is a Tangled Rope.
constraint_indexing:constraint_classification(peter_principle, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(peter_principle_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(peter_principle, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(peter_principle, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(analytical_classification_is_tangled_rope) :-
    constraint_indexing:constraint_classification(peter_principle, tangled_rope, context(agent_power(analytical), _, _, _)).

test(threshold_validation) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(peter_principle, ExtMetricName, E),
    E >= 0.46. % Ensures it qualifies as a high-extraction constraint.

:- end_tests(peter_principle_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The Peter Principle is a classic example of a Tangled Rope. It has a genuine
 * coordination function: the promotion ladder is how organizations structure
 * ambition and allocate human resources. This is why institutional agents see it
 * as a Rope. However, its core mechanism—promoting based on past, not future,
 * performance—creates a severe asymmetric extraction. Value is extracted from
 * the organization's overall efficiency and from the well-being of both the
 * over-promoted manager and their subordinates. This is the Snare felt by the
 * powerless. The analytical view must account for both, hence Tangled Rope.
 *
 * The base extractiveness is set to 0.55, reflecting significant harm to
 * organizational utility. Suppression is 0.60 because alternatives like
 * dual-track career paths or graceful demotions are strongly resisted by
 * cultural norms that equate promotion with success.
 *
 * * MANDATROPHY ANALYSIS:
 * Classifying this as a pure Snare would be a mistake, as it would ignore the
 * coordination function that gives the system its stability and perceived
 * legitimacy. The Tangled Rope classification correctly identifies that the
 * system is a hybrid, preventing Mandatrophy by acknowledging that the
 * participants (like HR) are not simply malicious but are operating a flawed
 * coordination system. The path to resolution is not to destroy the ladder,
 * but to untangle it—for instance, by changing promotion criteria.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% The core uncertainty is whether this is an emergent, unavoidable property of
% any hierarchy (a Mountain) or a culturally constructed one that can be fixed (a Tangled Rope).
omega_variable(
    omega_peter_principle,
    'Is the Peter Principle an inevitable emergent property of all large hierarchies, or a contingent outcome of specific cultural assumptions about promotion and success?',
    'Comparative analysis of organizations with radically different promotion structures (e.g., flat hierarchies, dual-track careers, project-based roles) vs. traditional ones.',
    'If inevitable, it is a Mountain of social physics. If contingent, it is a Tangled Rope that can be redesigned.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(peter_principle, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data for a high-extraction constraint (E > 0.46).
% Models the principle becoming more entrenched in bureaucratic culture over time,
% with a slight increase in extraction as organizational slack is reduced.
%
% Theater ratio over time (remains low):
narrative_ontology:measurement(peter_principle_tr_t0, peter_principle, theater_ratio, 0, 0.15).
narrative_ontology:measurement(peter_principle_tr_t5, peter_principle, theater_ratio, 5, 0.18).
narrative_ontology:measurement(peter_principle_tr_t10, peter_principle, theater_ratio, 10, 0.20).

% Extraction over time (extraction_accumulation drift):
narrative_ontology:measurement(peter_principle_ex_t0, peter_principle, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(peter_principle_ex_t5, peter_principle, base_extractiveness, 5, 0.53).
narrative_ontology:measurement(peter_principle_ex_t10, peter_principle, base_extractiveness, 10, 0.55).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The promotion ladder is a primary mechanism for allocating status, salary,
% and responsibility within an organization.
narrative_ontology:coordination_type(peter_principle, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: planetary_boundaries
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_planetary_boundaries, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:coordination_type/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: planetary_boundaries
 * human_readable: Planetary Boundaries Framework
 * domain: environmental/economic
 * * SUMMARY:
 * The Planetary Boundaries framework defines a "safe operating space for humanity"
 * based on nine critical Earth system processes. While presented as a set of
 * biophysical limits (natural law), the policy frameworks derived from it create
 * a global coordination system that asymmetrically extracts development potential
 * from industrializing nations to maintain stability for the global system.
 * * KEY AGENTS:
 * - Developing Economies: Subject (Powerless), experience capped growth potential.
 * - Global Governance Bodies: Beneficiary (Institutional), use the framework for policy coordination.
 * - Systems Auditor: Observer (Analytical), assesses the full structure.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(planetary_boundaries, 0.80). % High extraction of future development potential.
domain_priors:suppression_score(planetary_boundaries, 0.80).   % Biophysical limits strongly suppress unlimited growth alternatives.
domain_priors:theater_ratio(planetary_boundaries, 0.10).       % Low theater; the functions and impacts are direct.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(planetary_boundaries, extractiveness, 0.80).
narrative_ontology:constraint_metric(planetary_boundaries, suppression_requirement, 0.80).
narrative_ontology:constraint_metric(planetary_boundaries, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% It claims to be an objective, unchangeable feature of reality.
narrative_ontology:constraint_claim(planetary_boundaries, natural_law).

% Binary flags
domain_priors:requires_active_enforcement(planetary_boundaries). % Required for Tangled Rope

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(planetary_boundaries, global_civilization).
narrative_ontology:constraint_victim(planetary_boundaries, developing_economies).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For developing economies, the framework is a trap that caps their industrial
% and economic growth potential, enforcing a developmental ceiling.
constraint_indexing:constraint_classification(planetary_boundaries, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For global governance bodies, it is a pure coordination tool, providing a
% scientific basis for international treaties and sustainable development goals.
constraint_indexing:constraint_classification(planetary_boundaries, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Analytically, the framework is a Tangled Rope. It has a genuine and necessary
% coordination function (beneficiary exists) but also imposes severe, asymmetric
% extraction (victim exists) and requires active political enforcement.
constraint_indexing:constraint_classification(planetary_boundaries, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(planetary_boundaries_tests).

test(perspectival_gap) :-
    constraint_indexing:constraint_classification(planetary_boundaries, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(planetary_boundaries, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    assertion(TypePowerless == snare),
    assertion(TypeInstitutional == rope),
    assertion(TypePowerless \= TypeInstitutional).

test(analytical_classification_is_tangled_rope) :-
    constraint_indexing:constraint_classification(planetary_boundaries, TypeAnalytical, context(agent_power(analytical), _, _, _)),
    assertion(TypeAnalytical == tangled_rope).

test(high_extraction_threshold) :-
    domain_priors:base_extractiveness(planetary_boundaries, E),
    assertion(E >= 0.46).

:- end_tests(planetary_boundaries_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness (0.8) is high because the constraint effectively
 * appropriates the future development potential of industrializing nations to
 * maintain the stability of the current global system. The suppression score
 * (0.8) is also high because the biophysical limits are presented as non-negotiable,
 * suppressing the alternative of resource-intensive growth paths followed by
 * currently developed nations.
 *
 * The perspectival gap is stark: for institutional actors, it's a 'Rope' for
 * coordinating global policy. For those with limited development options, it's
 * a 'Snare' that locks them into a lower economic ceiling.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * This constraint is a classic case of potential Mandatrophy. A naive analysis
 * focusing only on the victims would label it a pure 'Snare'. However, this
 * would miss its critical coordination function. The 'Tangled Rope'
 * classification from the analytical perspective resolves this by structurally
 * acknowledging both functions: it is a necessary coordination mechanism
 * ('Rope' aspect) that has severe, asymmetrically distributed extractive costs
 * ('Snare' aspect). This prevents the system from incorrectly dismissing the
 * entire framework as purely predatory.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_planetary_boundaries,
    'Are the boundaries truly fixed biophysical Mountains, or are they constructed policy Snares whose thresholds could be altered by radical technological innovation (e.g., fusion, carbon capture)?',
    'Empirical observation of Earth system responses vs. demonstrated efficacy of breakthrough technologies at planetary scale.',
    'If Mountain, the extraction is non-negotiable. If Snare, the extraction is a policy choice that could be technologically obviated.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(planetary_boundaries, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% The constraint's extractive pressure has increased over the interval as
% planetary limits are approached and policy enforcement has tightened.
% Theater ratio remains low and stable.

% Theater ratio over time:
narrative_ontology:measurement(pb_tr_t0, planetary_boundaries, theater_ratio, 0, 0.05).
narrative_ontology:measurement(pb_tr_t5, planetary_boundaries, theater_ratio, 5, 0.08).
narrative_ontology:measurement(pb_tr_t10, planetary_boundaries, theater_ratio, 10, 0.10).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(pb_ex_t0, planetary_boundaries, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(pb_ex_t5, planetary_boundaries, base_extractiveness, 5, 0.70).
narrative_ontology:measurement(pb_ex_t10, planetary_boundaries, base_extractiveness, 10, 0.80).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type: The framework functions to allocate finite global budgets
% (e.g., carbon, nitrogen) among competing actors.
narrative_ontology:coordination_type(planetary_boundaries, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: planetary_diet_constraint_2026
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: "The one diet that’s good for everything" by Carissa Wong (Jan 2026)
% ============================================================================

:- module(constraint_planetary_diet_constraint_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: planetary_diet_constraint_2026
 * human_readable: Planetary Boundary Dietary Alignment
 * domain: ecological/economic/social
 * temporal_scope: 2020-2050 (The Great Transition)
 * spatial_scope: Global
 * 
 * SUMMARY:
 * The article identifies the Mediterranean diet as being "good for the planet." 
 * This creates a "Planetary Health" constraint where individual 
 * consumption is indexed against global ecological survival. The constraint 
 * shifts from a personal health choice to a collective survival mandate, 
 * where high-meat and high-dairy consumption are increasingly classified 
 * as ecological "theft" or systemically unviable.
 * 
 * KEY AGENTS:
 * - Citizen in a High-Meat Culture (Individual Powerless): Faces pressure to change ingrained dietary habits.
 * - Institutional Planner (Institutional): Global governance/Climate Scientist who views the diet as a necessary Rope.
 * - Industrial Meat Producer (Individual Powerful): Views the constraint as a Snare strangling their business model.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(planetary_diet_constraint_2026, 0, 10).
narrative_ontology:constraint_claim(planetary_diet_constraint_2026, tangled_rope).

% Base extractiveness: 0.1 (Very Low)
% The benefit is largely communal/existential (planetary health). 
% Extraction is directed away from future generations and toward current 
% sustainable habits.
domain_priors:base_extractiveness(planetary_diet_constraint_2026, 0.1).

% Suppression: 0.6 (High-Moderate)
% Scientific consensus is increasingly marginalizing high-emission 
% dietary paths as "unsustainable" or "dangerous" to the biophysical 
% stability of the Earth.
domain_priors:suppression_score(planetary_diet_constraint_2026, 0.6).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(planetary_diet_constraint_2026, extractiveness, 0.1).
narrative_ontology:constraint_metric(planetary_diet_constraint_2026, suppression_requirement, 0.6).

% Enforcement: Requires active enforcement (Carbon taxes, subsidies, cultural shaming).
domain_priors:requires_active_enforcement(planetary_diet_constraint_2026).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(planetary_diet_constraint_2026, future_humanity).
constraint_victim(planetary_diet_constraint_2026, industrial_animal_agriculture).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: CITIZEN IN A HIGH-MEAT CULTURE - Snare
   --------------------------------------------------------------------------
   WHO: powerless (Ingrained cultural and dietary habits)
   WHEN: immediate (Facing daily choices about food consumption)
   WHERE: constrained (Limited by availability and affordability of alternatives)
   
   WHY THIS CLASSIFICATION:
   For a citizen in a high-meat culture, the dietary shift is a 'Snare'. It 
   strangles their cultural traditions, personal preferences, and often
   their economic habits (e.g., traditional farming). The pressure to change
   feels like an unwanted and potentially impossible imposition.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    planetary_diet_constraint_2026,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: INSTITUTIONAL PLANNER - Rope
   --------------------------------------------------------------------------
   WHO: institutional (Policy makers/Climate scientists)
   WHEN: historical (100-year plan for planetary stability)
   WHERE: arbitrage (Moving resources between sectors)
   
   WHY THIS CLASSIFICATION:
   For the planner, dietary shifts are a 'Rope'—a tool for managing the 
   global carbon budget. It is a functional coordination mechanism to 
   reach net-zero goals without total systemic collapse.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    planetary_diet_constraint_2026,
    rope,
    context(
        agent_power(institutional),
        time_horizon(historical),
        exit_options(arbitrage),
        spatial_scope(global)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: INDUSTRIAL MEAT PRODUCER - Snare
   --------------------------------------------------------------------------
   WHO: powerful (Large-scale business interests)
   WHEN: biographical (Short-term ROI/Business life)
   WHERE: constrained (Capital is tied up in physical infrastructure)
   
   WHY THIS CLASSIFICATION:
   The mandatory shift toward "minimal meat and dairy" acts as a 
   'Snare' for the producer. It is an extractive mechanism that devalues 
   their assets and forces a transition they may not survive.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    planetary_diet_constraint_2026,
    snare,
    context(
        agent_power(powerful),
        time_horizon(biographical),
        exit_options(constrained),
        spatial_scope(national)
    )
).

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(planetary_diet_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(planetary_diet_constraint_2026, Type1, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(planetary_diet_constraint_2026, Type2, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(planetary_diet_constraint_2026, Type3, context(agent_power(powerful), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3.

:- end_tests(planetary_diet_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. INDIVIDUAL POWERLESS PERSPECTIVE: Added 'Citizen in a High-Meat Culture'
 *    to represent the individual experiencing the dietary shift as a 'Snare'
 *    that impacts their daily life and cultural traditions.
 *
 * 2. CLASSIFICATION RATIONALE:
 *    - Citizen (Snare): Cultural and personal habits are strangled.
 *    - Planner (Rope): A tool for global coordination.
 *    - Producer (Snare): Business model is threatened.
 * 
 * 3. TANGLED ROPE: The planetary diet is a 'Tangled Rope'. It's a vital 'Rope'
 *    for global ecological health, but its implementation creates a 'Snare'
 *    for individuals and industries deeply ingrained in high-meat consumption.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * The core uncertainty is the physical attainability and social acceptability of the dietary transition.
 */

omega_variable(
    planetary_diet_scalability,
    "Is it biophysically possible to feed 10 billion people the 'Mediterranean gold standard' without exceeding other planetary boundaries (e.g., phosphorus or water)?",
    resolution_mechanism("Integrated assessment models comparing Mediterranean crop yields and water requirements at scale."),
    impact("If no: The 'Rope' is actually a 'Snare' for the global south, creating new forms of food insecurity. If yes: It remains a viable global 'Rope'."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */
/**
 * VIABLE ALTERNATIVES
 *
 * ALTERNATIVE 1: High-Tech Veganism (Precision Fermentation)
 *    Viability: Potentially lower land-use footprint than Mediterranean, but still niche.
 *    Suppression: Often ignored in favor of "Whole Foods" Mediterranean narratives, or cultural resistance to processed alternatives.
 *
 * CONCLUSION:
 * The planetary diet is a 'Tangled Rope' that attempts to coordinate human consumption
 * with ecological limits. The suppression of high-meat diets creates a 'Snare'
 * for certain industries and cultures, but is presented as a necessary 'Rope'
 * for planetary survival.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/planetary_diet_constraint_2026].
 * 2. Multi-perspective: ?- multi_index_report(planetary_diet_constraint_2026).
 * 3. Run tests: ?- run_tests(planetary_diet_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: planning_fallacy
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_planning_fallacy, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: planning_fallacy
 * human_readable: The Planning Fallacy
 * domain: economic/social/technological
 * * SUMMARY:
 * The planning fallacy is a cognitive bias where predictions about the time needed to complete a task exhibit an optimism bias, underestimating the actual time required. This occurs even when planners know similar past tasks took longer. The constraint is the institutional exploitation of this bias to extract labor and justify resource allocation.
 * * KEY AGENTS:
 * - Individual Contributor: Subject (Powerless), forced to absorb time debt via crunch.
 * - Project Manager/Founder: Beneficiary (Institutional), uses optimistic timelines to secure funding and motivate teams.
 * - Cognitive Scientist: Observer (Analytical), views the bias as a fundamental feature of human cognition.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(planning_fallacy, 0.55). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(planning_fallacy, 0.60).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(planning_fallacy, 0.10).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(planning_fallacy, extractiveness, 0.55).
narrative_ontology:constraint_metric(planning_fallacy, suppression_requirement, 0.60).
narrative_ontology:constraint_metric(planning_fallacy, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(planning_fallacy, coordination).

% Binary flags
domain_priors:requires_active_enforcement(planning_fallacy). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(planning_fallacy, institutional_planners).
narrative_ontology:constraint_beneficiary(planning_fallacy, capital_allocators).
narrative_ontology:constraint_victim(planning_fallacy, individual_contributors).
narrative_ontology:constraint_victim(planning_fallacy, project_laborers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE INDIVIDUAL CONTRIBUTOR (SNARE)
% The initial underestimation creates an impossible deadline, extracting unpaid
% overtime ("crunch") to compensate.
constraint_indexing:constraint_classification(planning_fallacy, snare,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(constrained),
            spatial_scope(local))).

% PERSPECTIVE 2: THE PROJECT MANAGER / FOUNDER (ROPE)
% Viewed as a necessary tool for optimism and coordination. Without it, the
% daunting reality of a project's true cost might prevent it from ever starting.
constraint_indexing:constraint_classification(planning_fallacy, rope,
    context(agent_power(institutional),
            time_horizon(biographical),
            exit_options(arbitrage),
            spatial_scope(national))).

% PERSPECTIVE 3: THE COGNITIVE SCIENTIST (MOUNTAIN)
% To the scientist, the underlying bias is a Mountain—an apparently unchangeable
% feature of human cognition (the "Inside View") that favors specific plans
% over statistical base rates.
constraint_indexing:constraint_classification(planning_fallacy, mountain,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(trapped),
            spatial_scope(universal))).

% PERSPECTIVE 4: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The default analytical context reveals a hybrid structure. It has a genuine
% coordination function (getting projects started) but also enables asymmetric
% extraction (labor exploitation) and requires active enforcement (suppressing
% realistic forecasts).
constraint_indexing:constraint_classification(planning_fallacy, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(planning_fallacy_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(planning_fallacy, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(planning_fallacy, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(threshold_validation) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(planning_fallacy, ExtMetricName, E),
    (E =< 0.15 -> fail ; E >= 0.46). % Ensures it's a high-extraction constraint.

test(tangled_rope_structural_properties) :-
    % Verify the analytical observer sees a Tangled Rope due to the correct structural properties.
    constraint_indexing:constraint_classification(planning_fallacy, tangled_rope, context(agent_power(analytical), _, _, _)),
    narrative_ontology:constraint_beneficiary(planning_fallacy, _), % -> has_coordination_function
    narrative_ontology:constraint_victim(planning_fallacy, _),     % -> has_asymmetric_extraction
    domain_priors:requires_active_enforcement(planning_fallacy).

:- end_tests(planning_fallacy_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The planning fallacy is a classic example of a multi-type constraint. Its classification depends entirely on the agent's relationship to the flow of time and labor.
 * - Base Extractiveness (0.55): Set above the Snare threshold (0.46) because the institutionalization of this bias systematically extracts "buffer time" and personal well-being from laborers to meet unrealistic deadlines.
 * - Suppression Score (0.60): High because overcoming the fallacy requires using "Reference Class Forecasting" (looking at historical data), a practice often actively suppressed in organizations that value optimism and speed over accuracy.
 * - Perspectival Gap: The core conflict is between the manager who uses the fallacy as a Rope to coordinate optimistic action and the laborer who experiences the consequences as a Snare of inescapable crunch time. The cognitive scientist sees the underlying bias as a Mountain, a fixed feature of human psychology, creating a three-way perspectival split.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * A naive analysis might label this a pure Snare (deceptive schedules) or a pure Mountain (it's just how brains work). The Tangled Rope classification from the analytical perspective is crucial for resolving this. It correctly identifies that the constraint has a genuine coordination function (the Rope aspect) that is inextricably linked to its extractive function (the Snare aspect). This prevents the system from mislabeling the coordination as pure extraction or ignoring the extraction as a natural consequence of a cognitive limit.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_planning_fallacy,
    "To what degree is the fallacy an unconscious cognitive bias (Mountain) versus a deliberate, strategic tool for securing funding and compelling labor (Snare)?",
    "Analysis of internal vs. external project timeline communications; comparing private estimates with public funding requests across a large dataset of projects.",
    "If primarily strategic, it's a pure Snare of deception. If primarily cognitive, it's a Mountain whose effects are captured by a Snare-like system.",
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(planning_fallacy, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection. Here, we model the fallacy moving
% from a simple cognitive bias to an institutionalized tool for extraction.
% Required for high-extraction constraints (base_extractiveness > 0.46).

% Theater ratio over time (remains low; the fallacy is functional, not performative)
narrative_ontology:measurement(planning_fallacy_tr_t0, planning_fallacy, theater_ratio, 0, 0.10).
narrative_ontology:measurement(planning_fallacy_tr_t5, planning_fallacy, theater_ratio, 5, 0.10).
narrative_ontology:measurement(planning_fallacy_tr_t10, planning_fallacy, theater_ratio, 10, 0.10).

% Extraction over time (increases as the bias is weaponized by management systems)
narrative_ontology:measurement(planning_fallacy_ex_t0, planning_fallacy, base_extractiveness, 0, 0.20).
narrative_ontology:measurement(planning_fallacy_ex_t5, planning_fallacy, base_extractiveness, 5, 0.45).
narrative_ontology:measurement(planning_fallacy_ex_t10, planning_fallacy, base_extractiveness, 10, 0.55).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The fallacy is used to coordinate the allocation of capital and labor towards
% ambitious goals that might otherwise seem too costly.
narrative_ontology:coordination_type(planning_fallacy, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: platform_cooperativism_governance
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: Domain Analysis of Worker-Owned Platforms (e.g., The Drivers Cooperative, Stocksy)
% ============================================================================

:- module(constraint_platform_cooperativism_governance, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: platform_cooperativism_governance
 * human_readable: Democratic Worker Governance in Platform Cooperativism
 * domain: economic/social/technological
 * temporal_scope: 2014-Present
 * spatial_scope: Global (Distributed Digital Labor)
 * 
 * SUMMARY:
 * Platform Cooperativism is a model where a digital platform is owned and governed 
 * by its workers. The core constraint is a "democratic mandate" that requires profits 
 * to be distributed to members and algorithms to be accountable to the collective.
 * 
 * KEY AGENTS:
 * - The Worker-Owner (Individual Moderate): Possesses voting rights and a share of the surplus.
 * - The VC-Backed Competitor (Institutional): Views the coop's lack of "blitzscaling" as a weakness.
 * - The Non-Member Gig Worker (Individual Powerless): Works for a competitor like Uber, sees the coop as an inaccessible alternative.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(platform_cooperativism_governance, 0, 10).
narrative_ontology:constraint_claim(platform_cooperativism_governance, rope).

% Base extractiveness score: 0.05 (Very Low)
% Rationale: By design, extraction is minimized as the surplus is returned 
% to the creators of the value (the workers).
domain_priors:base_extractiveness(platform_cooperativism_governance, 0.05).

% Suppression score: 0.2 (Low)
% Rationale: Transparency is a core tenet. Alternatives (proprietary platforms) 
% are visible but rejected on ideological grounds by members.
domain_priors:suppression_score(platform_cooperativism_governance, 0.2).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(platform_cooperativism_governance, extractiveness, 0.05).
narrative_ontology:constraint_metric(platform_cooperativism_governance, suppression_requirement, 0.2).

% Enforcement: Requires active enforcement via bylaws, democratic voting, and transparent accounting.
domain_priors:requires_active_enforcement(platform_cooperativism_governance).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(platform_cooperativism_governance, worker_members).
constraint_victim(platform_cooperativism_governance, external_capital_investors).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE COOP MEMBER (WORKER-OWNER) - Rope
   --------------------------------------------------------------------------
   WHO: individual_moderate - Has agency through voting and ownership.
   WHEN: biographical - Investing in a long-term, stable livelihood.
   WHERE: mobile - While committed, the lack of extraction makes them less trapped.
   
   WHY THIS CLASSIFICATION:
   For the member, the coop is a 'Rope'. It is a coordination mechanism that 
   secures their labor, guarantees fair payment, and ensures they aren't 
   "algorithmically deactivated" without recourse. It provides a stable economic structure.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    platform_cooperativism_governance,
    rope,
    context(
        agent_power(individual_moderate),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(regional)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE NON-MEMBER GIG WORKER - Mountain
   --------------------------------------------------------------------------
   WHO: powerless - Works for a competitor like Uber or DoorDash.
   WHEN: immediate - Focused on the next gig and daily earnings.
   WHERE: trapped - Subject to the algorithm of their current platform.
   
   WHY THIS CLASSIFICATION:
   For a worker on an extractive platform, the nearby cooperative is a 'Mountain'.
   It is a separate, inaccessible system with high barriers to entry (membership fees,
   democratic participation requirements) that seems distant and irrelevant to their
   immediate reality of algorithmic management.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    platform_cooperativism_governance,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE VC-BACKED COMPETITOR - Snare
   --------------------------------------------------------------------------
   WHO: institutional - Powerful incumbent with massive capital.
   WHEN: generational - Protecting a dominant market model.
   WHERE: arbitrage - Uses capital to lower prices and squeeze out the coop.
   
   WHY THIS CLASSIFICATION:
   To the incumbent, the coop's mandate is a 'Snare'—not for the workers, but 
   for the business model itself. Because the coop cannot extract profit to 
   subsidize predatory pricing, the incumbent views the coop's own fairness 
   rules as the very thing that will "choke" its ability to compete on capital.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    platform_cooperativism_governance,
    snare,
    context(
        agent_power(institutional),
        time_horizon(generational),
        exit_options(arbitrage),
        spatial_scope(global)
    )
).

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(platform_coop_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(platform_cooperativism_governance, Type1, context(agent_power(individual_moderate), _, _, _)),
    constraint_indexing:constraint_classification(platform_cooperativism_governance, Type2, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(platform_cooperativism_governance, Type3, context(agent_power(institutional), _, _, _)),
    Type1 \= Type2,
    Type1 \= Type3,
    Type2 \= Type3.

:- end_tests(platform_coop_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. PERSPECTIVE SELECTION: Added the 'Non-Member Gig Worker' as the required
 *    'powerless' agent. This highlights that even a beneficial 'Rope'
 *    can appear as an inaccessible 'Mountain' to those outside its system.
 *
 * 2. CLASSIFICATION RATIONALE:
 *    - Member (Rope): A tool for economic self-determination.
 *    - Non-Member (Mountain): An irrelevant, inaccessible alternative.
 *    - Competitor (Snare): A business model that cannot engage in extractive, hyper-competitive practices.
 * 
 * 3. EXTRACTIVENESS (0.05): This is the defining feature. By design, 
 *    cooperatives aim for zero surplus extraction by outside capital. The primary
 *    conflict is structural and ideological, not extractive.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * The core uncertainty is whether this non-extractive model can survive in an
 * ecosystem dominated by extractive capital.
 */
omega_variable(
    capital_access_omega,
    "Can a non-extractive Rope (Coop) scale and survive in a financial ecosystem designed for extractive Snares (VC funding)?",
    resolution_mechanism("Monitor survival and market-share rates of platform coops vs. venture-backed startups in the same sector over a 10-year period."),
    impact("If Yes: The Coop is a viable Rope for the future of work. If No: The Coop is a niche Mountain that cannot achieve systemic scale."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * 
 * ALTERNATIVE 1: Venture-Capital Backed Gig Platforms (e.g., Uber, DoorDash)
 *    Viability: The dominant, default model for digital platforms.
 *    Suppression: Not suppressed; it is the incumbent. The cooperative model is the one attempting to challenge this alternative.
 *
 * CONCLUSION:
 * Platform Cooperativism is an attempt to build a 'Rope' for workers in an environment
 * dominated by extractive 'Snares'. Its success depends on whether the coordination 
 * benefits of the 'Rope' (trust, lower churn, worker loyalty) can overcome the 
 * 'Mountain' of capital-access friction in a VC-dominated world.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/platform_cooperativism_governance].
 * 2. Multi-perspective: ?- multi_index_report(platform_cooperativism_governance).
 * 3. Run tests: ?- run_tests(platform_coop_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: poetic_verse_and_past
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-22
% ============================================================================

:- module(constraint_poetic_verse_and_past, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: poetic_verse_and_past
 * human_readable: The Inescapable Tale of Institutional Expectation
 * domain: social/cultural
 * * SUMMARY:
 * This constraint models the rigid institutional and familial expectations at a preparatory school, as depicted in "Dead Poets Society". The system demands conformity to a narrow set of "noble pursuits" (medicine, law, business), actively suppressing individual expression and alternative life paths. This creates a system that coordinates students towards socially-approved roles while extracting their individuality and autonomy.
 * * KEY AGENTS:
 * - The Students (e.g., Neil Perry): Subject (Powerless)
 * - The School Administration & Parents: Beneficiary (Institutional)
 * - Systems Theorist: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(poetic_verse_and_past, 0.75). % The system extracts individual identity, autonomy, and in the extreme, life itself.
domain_priors:suppression_score(poetic_verse_and_past, 0.60).   % Parental authority and school rules actively punish deviation from the prescribed path.
domain_priors:theater_ratio(poetic_verse_and_past, 0.15).       % The enforcement is functional, not performative. The goals are real.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(poetic_verse_and_past, extractiveness, 0.75).
narrative_ontology:constraint_metric(poetic_verse_and_past, suppression_requirement, 0.60).
narrative_ontology:constraint_metric(poetic_verse_and_past, theater_ratio, 0.15).

% Constraint self-claim (what does the constraint claim to be?)
% The institution claims its rules are for coordination towards a successful future.
narrative_ontology:constraint_claim(poetic_verse_and_past, coordination).

% Binary flags
domain_priors:requires_active_enforcement(poetic_verse_and_past). % Requires active enforcement by parents and the school board.

% Structural property derivation hooks:
% has_coordination_function/1 is DERIVED from constraint_beneficiary/2
% has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
narrative_ontology:constraint_beneficiary(poetic_verse_and_past, institutional_order).
narrative_ontology:constraint_victim(poetic_verse_and_past, individual_identity).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For a student like Neil Perry, the constraint is a lethal trap.
% χ = 0.75 * 1.5 (powerless) * 0.8 (local) = 0.90. This is a clear Snare.
constraint_indexing:constraint_classification(poetic_verse_and_past, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The school administration sees the rules as a necessary tool for coordination.
% χ = 0.75 * -0.2 (institutional) * 0.9 (regional) = -0.135. This is a clear Rope.
constraint_indexing:constraint_classification(poetic_verse_and_past, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(regional))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% An analyst sees both the coordination function and the asymmetric extraction.
% χ = 0.75 * 1.15 (analytical) * 1.2 (global) = 1.035.
% With high extraction, high suppression, enforcement, and both beneficiaries
% and victims, the structure is a textbook Tangled Rope.
constraint_indexing:constraint_classification(poetic_verse_and_past, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(poetic_verse_and_past_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(poetic_verse_and_past, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(poetic_verse_and_past, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(analytical_classification_is_tangled_rope) :-
    % Verify the analytical observer correctly identifies the Tangled Rope structure.
    constraint_indexing:constraint_classification(poetic_verse_and_past, tangled_rope, context(agent_power(analytical), _, _, _)).

test(threshold_validation) :-
    % High-extraction constraints must meet the Snare/Tangled Rope threshold.
    domain_priors:base_extractiveness(poetic_verse_and_past, E),
    E >= 0.46.

:- end_tests(poetic_verse_and_past_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This constraint is a classic example of a Tangled Rope. The base extractiveness (0.75) is severe, representing the theft of individual futures. The suppression score (0.60) reflects the active, coercive measures used to enforce conformity.
 *
 * The Perspectival Gap is profound:
 * - For the institution (school, parents), the system is a 'Rope' that coordinates students into stable, high-status professions, ensuring the continuation of their legacy. The negative extraction felt by this index (-0.135) shows they perceive it as a net benefit.
 * - For the student (Neil), the same system is a 'Snare' with no viable exit, leading to the ultimate tragedy. The high effective extraction (0.90) reflects this crushing weight.
 * - The analytical observer, seeing both the coordination function for the beneficiaries and the severe asymmetric extraction imposed on the victims, correctly classifies it as a 'Tangled Rope'.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The system avoids misclassifying this as a pure Snare by acknowledging its genuine (though coercive) coordination function for the institutional beneficiaries. The Tangled Rope classification correctly captures this duality: a mechanism that is simultaneously a tool of order for one group and a tool of destruction for another. The tragedy arises precisely from this entanglement, not from simple malice.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_poetic_verse_and_past,
    "Is the institutional pressure a necessary evil for societal stability (a harsh but functional Tangled Rope) or a purely destructive force that creates no value (a pure Snare disguised as coordination)?",
    "Longitudinal studies comparing life outcomes of students from such institutions versus those from more liberal systems, controlling for socioeconomic background.",
    "If necessary evil, the classification remains Tangled Rope. If purely destructive, the coordination claim is false, and it should be re-classified as a Snare from all non-beneficiary perspectives.",
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(poetic_verse_and_past, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data for this high-extraction constraint. The model assumes the
% institutional pressure intensified over the school's history.
%
% Theater ratio over time (remains low and functional):
narrative_ontology:measurement(poetic_verse_and_past_tr_t0, poetic_verse_and_past, theater_ratio, 0, 0.10).
narrative_ontology:measurement(poetic_verse_and_past_tr_t5, poetic_verse_and_past, theater_ratio, 5, 0.12).
narrative_ontology:measurement(poetic_verse_and_past_tr_t10, poetic_verse_and_past, theater_ratio, 10, 0.15).

% Extraction over time (intensifies as standards become more rigid):
narrative_ontology:measurement(poetic_verse_and_past_ex_t0, poetic_verse_and_past, base_extractiveness, 0, 0.65).
narrative_ontology:measurement(poetic_verse_and_past_ex_t5, poetic_verse_and_past, base_extractiveness, 5, 0.70).
narrative_ontology:measurement(poetic_verse_and_past_ex_t10, poetic_verse_and_past, base_extractiveness, 10, 0.75).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The constraint uses rules and authority to enforce a specific life path.
narrative_ontology:coordination_type(poetic_verse_and_past, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: poincare_conjecture
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Poincaré Conjecture / Perelman's Proof (Ricci Flow with Surgery)
% ============================================================================

:- module(constraint_poincare_conjecture, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: poincare_conjecture
 * human_readable: The Poincaré Conjecture
 * domain: mathematical/topological
 * temporal_scope: 1904 - Present (Civilizational)
 * spatial_scope: Global/Abstract (3-Manifolds)
 * * SUMMARY:
 * The Poincaré Conjecture characterizes the 3-sphere (the hypersphere that 
 * bounds the unit ball in 4D space). It asserts that every simply connected, 
 * closed 3-manifold is homeomorphic to the 3-sphere. Proven by Grigori 
 * Perelman in 2003, it serves as the foundational classification of "simple" 
 * 3D space.
 * * KEY AGENTS:
 * - The 3-Manifold: The powerless subject whose identity is fixed by its 
 * topological properties (simply connected, closed).
 * - Grigori Perelman: The analytical analyst who used Ricci Flow to navigate 
 * the geometry toward the topological truth.
 * - The Mathematical Establishment (Clay Institute): The institutional agent 
 * offering prizes and validation, which Perelman famously rejected.
 * * NARRATIVE ARC:
 * For a century, the conjecture was a "Mountain" of unproven but suspected 
 * natural law. Perelman converted it into a "Rope" by providing a constructive 
 * path via Ricci Flow with surgery. However, the social "Snare" of the 
 * Millennium Prize and Fields Medal caused Perelman to exit the system 
 * entirely, viewing the professional validation mechanism as extractive.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION
   ========================================================================== */

% Required for DR-Audit Suite
narrative_ontology:interval(poincare_era, 1904, 2026).
narrative_ontology:constraint_claim(poincare_conjecture, mountain).

% Base extractiveness: 0.2
% Rationale: Mathematical truth itself is non-extractive, but the social 
% apparatus of "Prizes" (Millennium Prize) extracts prestige and personal 
% peace from the mathematician.
domain_priors:base_extractiveness(poincare_conjecture, 0.2).

% Suppression score: 0.1
% Rationale: It defines what is possible in 3D topology, rendering "fake" 
% 3-spheres impossible, but it does not hide other mathematical theories.
domain_priors:suppression_score(poincare_conjecture, 0.1).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(poincare_conjecture, extractiveness, 0.2).
narrative_ontology:constraint_metric(poincare_conjecture, suppression_requirement, 0.1).

% Enforcement: Emerges from the fundamental axioms of topology.
domain_priors:emerges_naturally(poincare_conjecture).

% Metrics
% Beneficiaries & Victims
constraint_beneficiary(poincare_conjecture, topological_physics).
constraint_beneficiary(poincare_conjecture, geometrical_analysts).
constraint_victim(poincare_conjecture, perelman_social_peace). % Social pressure of the prize.

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE 3-MANIFOLD (THE SUBJECT) - Mountain
   --------------------------------------------------------------------------
   WHO: powerless - The manifold cannot change its topology.
   WHEN: immediate - True throughout its existence.
   WHERE: trapped - Bound by its own connectivity and closure.
   SCOPE: local - Immediate neighborhood of its points.
   
   WHY THIS CLASSIFICATION:
   If a 3D space is simply connected and closed, it *is* a 3-sphere. This is 
   not a choice; it is an unyielding Mountain of topological fate.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    poincare_conjecture,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE RESEARCH MATHEMATICIAN - Rope
   --------------------------------------------------------------------------
   WHO: institutional - Power to use the theorem to classify new systems.
   WHEN: civilizational - Long-term development of geometry.
   WHERE: mobile - Can apply the theorem to various physical models.
   SCOPE: global - Universal application.
   
   WHY THIS CLASSIFICATION:
   For the working mathematician, the proven conjecture is a "Rope"—a tool 
   of coordination. It allows them to "anchor" their work in a known reality, 
   ensuring that their classification of 3D spaces is robust.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    poincare_conjecture,
    rope,
    context(
        agent_power(institutional),
        time_horizon(civilizational),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: PERELMAN (THE MILLENNIUM PRIZE) - Snare
   --------------------------------------------------------------------------
   WHO: powerless - Perelman, despite his genius, felt subject 
        to a corrupt social order of prizes.
   WHEN: biographical - The decision to reject the prize defined his life.
   WHERE: constrained - Surrounded by media and social pressure.
   SCOPE: local - His personal interaction with the mathematical community.
   
   WHY THIS CLASSIFICATION:
   The prize was a "Snare." To accept it was to validate a social system of 
   prestige he found "completely irrelevant." The prize attempted to extract 
   his compliance with professional norms in exchange for money.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    poincare_conjecture,
    snare,
    context(
        agent_power(powerless),
        time_horizon(biographical),
        exit_options(constrained),
        spatial_scope(local)
    )
) :-
    domain_priors:base_extractiveness(poincare_conjecture, E),
    E > 0.15. % The extraction is social, not mathematical.

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(poincare_conjecture_tests).

test(topology_fate_variance) :-
    % Manifold -> Mountain
    constraint_indexing:constraint_classification(poincare_conjecture, Type1, context(powerless, immediate, trapped, local)),
    % Community -> Rope
    constraint_indexing:constraint_classification(poincare_conjecture, Type2, context(institutional, civilizational, mobile, global)),
    Type1 = mountain,
    Type2 = rope.

test(perelman_exit_logic) :-
    % Perelman's rejection of the prize represents a constrained individual seeing a Snare.
    constraint_indexing:constraint_classification(poincare_conjecture, snare, context(powerless, biographical, constrained, local)).

test(natural_emergence) :-
    domain_priors:emerges_naturally(poincare_conjecture).

:- end_tests(poincare_conjecture_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * * 1. PERSPECTIVE SPLIT: 
 * I chose to split the "Mathematical Truth" (Mountain) from the 
 * "Social Validation" (Snare). This is essential to explain why 
 * the discoverer of a "gift to humanity" (Rope) would feel strangled 
 * by it.
 * * 2. EXTRACTIVENESS: 
 * Set at 0.2 because math is pure, but the *discovery process* in 
 * a professional setting is extractive of the discoverer's peace.
 * * 3. AGENT POWER: 
 * Labeled Perelman as `powerless` in the social context, 
 * reflecting his inability to stop the world from awarding him 
 * things he didn't want.
 */

% OMEGA IDENTIFICATION
omega_variable(
    professional_recognition_toxicity,
    "Does the 'Snare' of professional recognition prevent future geniuses from sharing proofs?",
    resolution_mechanism("Monitor the frequency of anonymous vs credited publications of 'unsolvable' problems."),
    impact("If Yes: The social order is a Snare. If No: It is a functional Rope."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Thurston's Geometrization Conjecture
 * Viability: The broader framework that Poincare fits into.
 * Suppression: None; Perelman's proof of Geometrization included Poincare.
 * * ALTERNATIVE 2: Anonymous Publication (arXiv)
 * Viability: How Perelman actually released the work.
 * Suppression: The community attempted to force him back into the 
 * "peer review/prize" Rope, which he experienced as a Snare.
 * * CONCLUSION:
 * Perelman's use of arXiv (Alternative 2) was a "mobile" exit option that 
 * temporarily turned the Snare back into a Rope, but the community's 
 * reaction tried to tighten it again.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Load: ?- [poincare_conjecture].
% Analyze: ?- constraint_indexing:multi_index_report(poincare_conjecture).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */


% --- v3.1 Indexical Relativity Stubs (Fleet Repair) ---
constraint_indexing:constraint_classification(poincare_conjucture, mountain, agent_power(analytical)).
constraint_indexing:constraint_classification(poincare_conjucture, rope, agent_power(institutional)).
constraint_indexing:constraint_classification(poincare_conjucture, snare, agent_power(powerless)).
% ============================================================================
% CONSTRAINT STORY: politeness_face_negotiation
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-16
% ============================================================================

:- module(constraint_politeness_face_negotiation, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:coordination_type/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: politeness_face_negotiation
 * human_readable: The Face Negotiation Constraint (Politeness Theory)
 * domain: social
 * * SUMMARY:
 * Politeness is a universal social constraint where individuals manage a "face"—a social self-image
 * categorized into "Positive Face" (desire for acceptance) and "Negative Face"
 * (desire for autonomy). Social interactions are a constant, often coercive, negotiation of these faces,
 * coordinating social harmony at the cost of individual expression and autonomy.
 * * KEY AGENTS:
 * - The Marginalized Individual: Subject (Powerless), experiences politeness as an oppressive snare.
 * - The Diplomat: Beneficiary (Institutional), uses politeness as a critical tool for statecraft.
 * - The Sociologist: Auditor (Analytical), observes the dual coordination/extraction function.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(politeness_face_negotiation, 0.65). % Snare extraction >= 0.46
domain_priors:suppression_score(politeness_face_negotiation, 0.50).   % Structural property (raw, unscaled).
domain_priors:theater_ratio(politeness_face_negotiation, 0.20).       % Low theater; the function is real, not performative.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(politeness_face_negotiation, extractiveness, 0.65).
narrative_ontology:constraint_metric(politeness_face_negotiation, suppression_requirement, 0.50).
narrative_ontology:constraint_metric(politeness_face_negotiation, theater_ratio, 0.20).

% Constraint self-claim (what does the constraint claim to be?)
% Politeness presents itself as a pure coordination mechanism for social harmony.
narrative_ontology:constraint_claim(politeness_face_negotiation, coordination).

% Binary flags
domain_priors:requires_active_enforcement(politeness_face_negotiation). % Required for Tangled Rope

% Structural property derivation hooks:
% has_coordination_function/1 is DERIVED from constraint_beneficiary/2
% has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
narrative_ontology:constraint_beneficiary(politeness_face_negotiation, social_groups_enforcing_harmony).
narrative_ontology:constraint_victim(politeness_face_negotiation, individual_dissenters).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   ========================================================================== */

% PERSPECTIVE 1: THE MARGINALIZED INDIVIDUAL (SNARE)
% For those whose identity is misread or suppressed, politeness is a Snare. The social
% requirement to "not impose" is used to silence their identity and enforce a harmful
% status quo. The extraction of their self-image is immediate and coercive.
constraint_indexing:constraint_classification(politeness_face_negotiation, snare,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE DIPLOMAT (ROPE)
% For a diplomat, politeness is a critical Rope. It is the primary tool for
% managing international relations, avoiding conflict, and building coalitions.
% Face-saving is the essence of statecraft, and the extraction is negligible.
constraint_indexing:constraint_classification(politeness_face_negotiation, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The sociologist sees both functions. Politeness is a genuine coordination mechanism
% (beneficiary exists) but also imposes asymmetric costs (victim exists) and requires
% active social enforcement. The high extraction and suppression scores confirm this.
constraint_indexing:constraint_classification(politeness_face_negotiation, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(politeness_face_negotiation_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(politeness_face_negotiation, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(politeness_face_negotiation, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(analytical_classification_is_tangled_rope) :-
    % Verify the analytical observer correctly identifies the Tangled Rope.
    constraint_indexing:constraint_classification(politeness_face_negotiation, tangled_rope, context(agent_power(analytical), _, _, _)).

test(threshold_validation_high_extraction) :-
    % Verify the base extraction meets the threshold for a Snare/Tangled Rope.
    domain_priors:base_extractiveness(politeness_face_negotiation, E),
    E >= 0.46.

:- end_tests(politeness_face_negotiation_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The original file incorrectly classified the analytical perspective as a Mountain. This is inconsistent
 * with the high base extractiveness (0.65), which far exceeds the Mountain threshold of 0.15. The correct
 * analytical classification is Tangled Rope, as the constraint possesses all three required structural
 * properties: a coordination function (beneficiary), asymmetric extraction (victim), and active enforcement.
 *
 * The perspectival gap is stark: for the institutional agent (diplomat), politeness is a pure coordination
 * Rope with low perceived extraction (χ = 0.65 * π(institutional) * σ(global) = 0.65 * -0.2 * 1.2 = -0.156, felt as a benefit).
 * For the powerless agent, it is a Snare with amplified extraction (χ = 0.65 * π(powerless) * σ(local) = 0.65 * 1.5 * 0.8 = 0.78).
 * This file has been corrected to reflect the Tangled Rope classification and add the required temporal data for
 * high-extraction constraints.
 *
 * * MANDATROPHY ANALYSIS:
 * [RESOLVED MANDATROPHY] The Tangled Rope classification resolves the mandatrophy by acknowledging both the
 * legitimate coordination function (preventing misclassification as a pure Snare) and the significant,
 * asymmetric extraction (preventing misclassification as a pure Rope).
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% Is 'face' a functional biological necessity or a culturally constructed snare?
omega_variable(
    omega_politeness_face_negotiation,
    'Is face-negotiation a biological necessity for social survival (Mountain) or a culturally constructed tool for enforcing hierarchy (Snare)?',
    'Cross-cultural audit of social/economic outcomes for face-ignoring vs. face-observing individuals.',
    'If biological, it is a Mountain. If cultural, it is a Tangled Rope or Snare depending on the power index.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(politeness_face_negotiation, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data for high-extraction constraint (E > 0.46).
% Models a slight intensification of the constraint over the interval.

% Theater ratio over time:
narrative_ontology:measurement(pfn_tr_t0, politeness_face_negotiation, theater_ratio, 0, 0.15).
narrative_ontology:measurement(pfn_tr_t5, politeness_face_negotiation, theater_ratio, 5, 0.18).
narrative_ontology:measurement(pfn_tr_t10, politeness_face_negotiation, theater_ratio, 10, 0.20).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(pfn_ex_t0, politeness_face_negotiation, base_extractiveness, 0, 0.60).
narrative_ontology:measurement(pfn_ex_t5, politeness_face_negotiation, base_extractiveness, 5, 0.62).
narrative_ontology:measurement(pfn_ex_t10, politeness_face_negotiation, base_extractiveness, 10, 0.65).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% Social pressure and exclusion are the primary enforcement tools.
narrative_ontology:coordination_type(politeness_face_negotiation, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: portugal_ad_stability_2026
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_portugal_ad_stability_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: portugal_ad_stability_2026
 * human_readable: The AD Minority Government Stability (The "Presidential" Scaffold)
 * domain: political
 * * SUMMARY:
 * The stability of the Aliança Democrática (AD) minority government functions
 * as a Scaffold. It relies on the mediating influence of the outgoing President,
 * Marcelo Rebelo de Sousa, and a temporary truce between the PS and PSD.
 * This constraint has an implicit sunset clause: the January 2026 Presidential
 * election. The outcome of the election—specifically whether the new President
 * is a "stabilizer" or a "disruptor"—will determine if this scaffold is
 * replaced by a more permanent coordination (Rope) or collapses into a Snare.
 * * KEY AGENTS:
 * - Luís Montenegro (AD Government): Architect (Organized) - Managing the fragile minority balance.
 * - Political Establishment: Beneficiary (Institutional) - Benefits from avoiding a constitutional crisis.
 * - Opposition Voters/Civil Service: Subject (Powerless) - Dependent on budget stability, but unable to challenge policies.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Extraction is moderate; the government coordinates but requires suppression of dissent.
domain_priors:base_extractiveness(portugal_ad_stability_2026, 0.35).
% Suppression: Significant; parties are discouraged from "rocking the boat" before the election.
domain_priors:suppression_score(portugal_ad_stability_2026, 0.45).
% Theater: Moderate; constant negotiations are partially performative for the electorate.
domain_priors:theater_ratio(portugal_ad_stability_2026, 0.30).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(portugal_ad_stability_2026, extractiveness, 0.35).
narrative_ontology:constraint_metric(portugal_ad_stability_2026, suppression_requirement, 0.45).
narrative_ontology:constraint_metric(portugal_ad_stability_2026, theater_ratio, 0.30).

% Constraint self-claim (what does the constraint claim to be?)
narrative_ontology:constraint_claim(portugal_ad_stability_2026, coordination).

% Binary flags
domain_priors:requires_active_enforcement(portugal_ad_stability_2026).
narrative_ontology:has_sunset_clause(portugal_ad_stability_2026). % Mandatory for Scaffold

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(portugal_ad_stability_2026, political_establishment).
narrative_ontology:constraint_victim(portugal_ad_stability_2026, opposition_voters).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE ARCHITECT (SCAFFOLD)
% Tolerated high suppression of political rivalry only because it expires with the new mandate.
constraint_indexing:constraint_classification(portugal_ad_stability_2026, scaffold,
    context(agent_power(organized),
            time_horizon(immediate),
            exit_options(constrained),
            spatial_scope(national))) :-
    narrative_ontology:has_sunset_clause(portugal_ad_stability_2026).

% PERSPECTIVE 2: THE INSTITUTIONAL LOYALIST (ROPE)
% Viewed as necessary coordination to avoid a mid-cycle constitutional crisis.
constraint_indexing:constraint_classification(portugal_ad_stability_2026, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE POLICY CRITIC (SNARE)
% Viewed as a trap where the need for "stability" is used to extract concessions and suppress dissent.
constraint_indexing:constraint_classification(portugal_ad_stability_2026, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(portugal_ad_stability_2026_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(portugal_ad_stability_2026, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(portugal_ad_stability_2026, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(scaffold_validation) :-
    % Verify that the scaffold is correctly identified with its sunset clause.
    constraint_indexing:constraint_classification(portugal_ad_stability_2026, scaffold, context(agent_power(organized), _, _, _)),
    narrative_ontology:has_sunset_clause(portugal_ad_stability_2026).

:- end_tests(portugal_ad_stability_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The AD government is classified as a Scaffold because its survival is
 * conditional on the current presidential term. The sunset clause is the
 * January 2026 presidential election date. Once the new President is sworn
 * in, the "coordination" provided by Marcelo's mediation expires.
 * The base extractiveness (0.35) and suppression (0.45) are significant but
 * below the thresholds for a pure Snare, reflecting the temporary and negotiated
 * nature of the arrangement. The presence of a beneficiary (political establishment)
 * confirms its coordination function, a requirement for Scaffold classification.
 *
 * PERSPECTIVAL GAP:
 * The government (Architect, Organized) sees a necessary Scaffold to pass budgets.
 * The institutional establishment sees a Rope, a necessary tool for national stability.
 * Opposition voters (Subject, Powerless) see a Snare that limits their ability to
 * challenge austerity or specific AD policies under the guise of "national interest".
 *
 * MANDATROPHY ANALYSIS:
 * The Scaffold classification is critical here. It prevents the system from
 * mislabeling this temporary, high-suppression coordination as either a permanent
 * Snare (ignoring its coordination function) or a permanent Tangled Rope (ignoring
 * its explicit expiry date). The `has_sunset_clause/1` fact is the key differentiator
 * that correctly identifies this as a transitional state.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_presidential_dissolution,
    'Will the winner of the 2026 election dismantle the AD stability scaffold by calling early legislative elections?',
    'Observation of the new President\'s first speech to the Council of State.',
    'Collapse (Scaffold removed) vs Solidification (Scaffold becomes Rope)',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(portugal_ad_stability_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Base extractiveness is < 0.46, so temporal measurements are not required
% for lifecycle drift detection under current system rules.

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% This political arrangement acts as a mechanism to enforce stability and
% suppress challenges, making it an enforcement mechanism.
narrative_ontology:coordination_type(portugal_ad_stability_2026, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: portuguese_presidential_term_limits
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-05-22
% ============================================================================

:- module(constraint_portuguese_presidential_term_limits, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: portuguese_presidential_term_limits
 * human_readable: Portuguese Constitutional Term Limits (Article 123)
 * domain: political/legal
 * * SUMMARY:
 * Under the Portuguese Constitution, a President cannot serve a third
 * consecutive term. This creates an absolute "Mountain"
 * constraint for the 2026 election, as the highly popular incumbent,
 * Marcelo Rebelo de Sousa, is ineligible to run.
 * This structural limit forces a total reconfiguration of the political
 * field, transitioning from a stable incumbency to an open, multi-polar race.
 * * KEY AGENTS:
 * - Portuguese Electorate: Subject (Powerless) - Forbidden from voting for their most preferred candidate due to legal limits.
 * - Marcelo Rebelo de Sousa: Subject (Institutional) - The popular incumbent barred from re-election.
 * - Potential Presidential Candidates: Beneficiary (Organized) - Benefit from the open field created by the incumbent's ineligibility.
 * - Legal System: Auditor (Analytical) - Upholds the constitution as a fixed rule.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Mountain status: Extraction is effectively zero as it is a fixed constitutional rule.
domain_priors:base_extractiveness(portuguese_presidential_term_limits, 0.02).
% Suppression: Absolute. No legal "exit" exists for a third term.
domain_priors:suppression_score(portuguese_presidential_term_limits, 0.98).
% Theater: Low. The rule is strictly enforced by the Constitutional Court.
domain_priors:theater_ratio(portuguese_presidential_term_limits, 0.05).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(portuguese_presidential_term_limits, extractiveness, 0.02).
narrative_ontology:constraint_metric(portuguese_presidential_term_limits, suppression_requirement, 0.98).
narrative_ontology:constraint_metric(portuguese_presidential_term_limits, theater_ratio, 0.05).

% Constraint self-claim: It claims to be a coordination mechanism for democratic turnover.
narrative_ontology:constraint_claim(portuguese_presidential_term_limits, coordination).

% Binary flags
domain_priors:requires_active_enforcement(portuguese_presidential_term_limits).

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(portuguese_presidential_term_limits, potential_presidential_candidates).
narrative_ontology:constraint_victim(portuguese_presidential_term_limits, electorate_preferring_incumbent).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (POWERLESS VOTER) -> MOUNTAIN
% For a voter who wishes to re-elect the incumbent, the law is not a predatory
% snare (as extraction is near-zero), but an unchangeable, absolute limit
% on their democratic choice. The high suppression score is what they experience.
constraint_indexing:constraint_classification(portuguese_presidential_term_limits, mountain,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ORGANIZED CANDIDATE) -> ROPE
% For a new candidate, the term limit is a pure coordination mechanism (Rope)
% that guarantees an open field, prevents entrenched power, and ensures
% healthy democratic turnover.
constraint_indexing:constraint_classification(portuguese_presidential_term_limits, rope,
    context(agent_power(organized),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER -> MOUNTAIN
% Viewed as an irreducible, physical-like limit of the democratic cycle.
constraint_indexing:constraint_classification(portuguese_presidential_term_limits, mountain,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(global))).

% PERSPECTIVE 4: THE INCUMBENT (INSTITUTIONAL) -> MOUNTAIN
% From the perspective of the incumbent president, the constitutional rule is
% an absolute, non-negotiable barrier to continuing in office. It is a Mountain.
constraint_indexing:constraint_classification(portuguese_presidential_term_limits, mountain,
    context(agent_power(institutional),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(portuguese_presidential_term_limits_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between the powerless voter and the organized candidate.
    constraint_indexing:constraint_classification(portuguese_presidential_term_limits, mountain, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(portuguese_presidential_term_limits, rope, context(agent_power(organized), _, _, _)),
    constraint_indexing:constraint_classification(portuguese_presidential_term_limits, mountain, context(agent_power(institutional), _, _, _)).

test(mountain_threshold_validation) :-
    % Verify the constraint meets the low-extraction, high-suppression signature of a Mountain.
    domain_priors:base_extractiveness(portuguese_presidential_term_limits, E),
    domain_priors:suppression_score(portuguese_presidential_term_limits, S),
    E =< 0.15,
    S >= 0.90.

:- end_tests(portuguese_presidential_term_limits_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This constraint demonstrates a key perspectival gap between a Mountain and a
 * Rope. The base metrics (ε=0.02, S=0.98) are a classic Mountain signature: an
 * unchangeable rule with very high suppression but negligible extraction.
 * For most agents (the incumbent, voters, analysts), it functions as this
 * immutable limit.
 *
 * However, for the set of agents who benefit from the turnover it enforces
 * (i.e., new presidential candidates), the rule is a pure coordination
 * mechanism (a Rope). It solves the collective action problem of how to
 * prevent permanent incumbency, creating opportunities for others. This
 * Mountain/Rope divergence is characteristic of foundational rules in stable
 * political systems. The original file's classification of 'Snare' for the
 * voter was incorrect, as the feeling of suppressed choice is captured by the
 * high suppression score, not by extraction.
 *
 * [RESOLVED MANDATROPHY]
 * Extraction is low (0.02), avoiding the high-extraction triggers. The
 * perspectival gap is explained by the dual function of the rule as both a
 * hard limit (Mountain) and a coordination device (Rope).
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_portugal_nonpartisan,
    'Will the "Mountain" of term limits lead to a permanent shift toward non-partisan Presidents?',
    'Analyzing the performance and governance style of the 2026 election winner versus party-backed predecessors.',
    'Structural Shift (Rope evolves) vs Party Restoration (Return to status quo)',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(portuguese_presidential_term_limits, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Base extractiveness is < 0.46, so temporal measurements are not required.

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type: Term limits are a mechanism to enforce democratic turnover.
narrative_ontology:coordination_type(portuguese_presidential_term_limits, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: postman_survival_protocol
% ============================================================================
% Generated: 2026-01-21
% Model: Gemini 2.0 Flash
% Source: Neil Postman's "Advice on How to Live the Rest of Your Life"
% Status: [RESOLVED MANDATROPHY]
% ============================================================================

:- module(constraint_postman_survival_protocol, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: postman_survival_protocol
 * human_readable: Postman's Protocol for Informational Hygiene
 * domain: social/technological
 * temporal_scope: Contemporary / Digital Era
 * spatial_scope: Global / Modern America
 * * SUMMARY:
 * This constraint set is a defensive protocol designed by Neil Postman to protect individual 
 * agency against the "constant change" and "hostility" of large technological bureaucracies. 
 * It posits that survival requires regularizing the trivial through routine, distrusting 
 * large groups, and rejecting the "magical power" of quantification.
 * * KEY AGENTS:
 * - The Individual Subject: The person attempting to maintain sanity and humor in a "nonsense" saturated world.
 * - The Bureaucracy: An institutional agent characterized by a lack of feelings and a "hostility to individual differences".
 * - The Acquaintance: A person who has not "perjured themselves for you," occupying the space outside deep friendship.
 * * NARRATIVE ARC:
 * The individual is bombarded by technological change and "hardenings of categories". 
 * Postman's rules function as a "Rope" for the subject to navigate a society that is 
 * functionally a "Snare" (bureaucracy) or a "Mountain" (the prevalence of nonsense).
 */

/* ==========================================================================
   2. BASE PROPERTIES (Context-Independent)
   ========================================================================== */

narrative_ontology:interval(postman_survival_interval, 0, 10).
narrative_ontology:constraint_claim([postman_survival_protocol], [social_hygiene]).

% Base extractiveness: Moderate (0.4)
% Rationale: The protocol itself is a gift of wisdom, but the systems it describes (Bureaucracy) 
% have high extractiveness (0.8+), necessitating the protocol's existence.
domain_priors:base_extractiveness(postman_survival_protocol, 0.4).

% Suppression: Moderate (0.5)
% Rationale: The protocol advocates for "concealing thoughts" and avoiding "-ists," 
% actively suppressing certain social "virtues" like plain honesty to avoid pain.
domain_priors:suppression_score(postman_survival_protocol, 0.5).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(postman_survival_protocol, extractiveness, 0.4).
narrative_ontology:constraint_metric(postman_survival_protocol, suppression_requirement, 0.5).

% Enforcement: Emerging naturally vs Active
% The bureaucracy's hostility emerges naturally from its size; the protocol 
% requires active individual enforcement to maintain.
domain_priors:requires_active_enforcement(postman_survival_protocol).

% BENEFICIARIES & VICTIMS
% Who benefits from this protocol? The Individual Subject (agency/humor).
constraint_beneficiary(postman_survival_protocol, individual_subject).
% Who/What is the victim? The Institutional Bureaucracy (it loses its grip on the subject).
constraint_victim(postman_survival_protocol, institutional_bureaucracy).

% Metrics required for Section 1 of the Executive Summary
/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE INDIVIDUAL SUBJECT - Rope
   --------------------------------------------------------------------------
   
   WHO: powerless (Facing large-scale technological change and bureaucracies)
   WHEN: biographical (Living the rest of your life)
   WHERE: mobile (Choosing to adopt routines and select friends)
   SCOPE: local (Interpersonal relations and personal habits)
   
   WHY THIS CLASSIFICATION:
   For the individual, Postman's advice is a "Rope"—a functional coordination mechanism. 
   By regularizing the trivial, the individual gains the agency to cope with 
   significant changes.
   
   NARRATIVE EVIDENCE:
   "Establish as many regular routines as possible... Regularize the trivial to 
   cope with the significant".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    postman_survival_protocol,
    rope,
    context(
        agent_power(powerless),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE BUREAUCRACY (Read's Law) - Snare
   --------------------------------------------------------------------------
   
   WHO: institutional (Large groups/bureaucracies)
   WHEN: historical (Systemic rules that outlast individual members)
   WHERE: trapped (Hostile to individual differences)
   SCOPE: national (Modern America / Bureaucracies at scale)
   
   WHY THIS CLASSIFICATION:
   From the perspective of the individual subject, the bureaucracy is a "Snare." 
   It extracts individual differences to satisfy the rules of the system and 
   lacks human traits like loyalty or compassion.
   
   NARRATIVE EVIDENCE:
   "Bureaucracies are by nature hostile to individual differences... institutions 
   do not have loyalty, compassion, or feelings".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    postman_survival_protocol,
    snare,
    context(
        agent_power(institutional),
        time_horizon(historical),
        exit_options(trapped),
        spatial_scope(national)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE SAGE (Weingartner/Postman) - Mountain
   --------------------------------------------------------------------------
   
   WHO: analytical (Observer of civilizational trends)
   WHEN: civilizational (The 95% nonsense rule)
   WHERE: analytical (Observer stance)
   SCOPE: global (The human condition in a technological society)
   
   WHY THIS CLASSIFICATION:
   To the analytical observer, the prevalence of nonsense and the nature of 
   institutions are "Mountains"—unchangeable natural laws of the current 
   historical moment. One does not "fix" these; one simply learns to survive 
   around them.
   
   NARRATIVE EVIDENCE:
   "95% of everything is nonsense... Quantification... represents pure 
   superstition... America is based on counting".
   -------------------------------------------------------------------------- */


constraint_indexing:constraint_classification(
    postman_survival_protocol,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(civilizational),
        exit_options(analytical),
        spatial_scope(global)
    )
) :- !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(postman_survival_protocol_tests).

test(multi_perspective_hygiene) :-
    % Individual Subject sees Rope
    constraint_indexing:constraint_classification(postman_survival_protocol, Type1, context(powerless, biographical, mobile, local)),
    % Bureaucracy acts as Snare
    constraint_indexing:constraint_classification(postman_survival_protocol, Type2, context(institutional, historical, trapped, national)),
    % Sage sees Mountain
    constraint_indexing:constraint_classification(postman_survival_protocol, Type3, context(analytical, civilizational, analytical, global)),
    Type1 \= Type2,
    Type2 \= Type3.

test(power_extractiveness_hygiene) :-
    % The individual subject experiences extraction of "autonomy" from the system
    ContextPowerless = context(powerless, biographical, mobile, local),
    ContextInstitutional = context(institutional, historical, trapped, national),
    constraint_indexing:extractiveness_for_agent(postman_survival_protocol, ContextPowerless, Score1),
    constraint_indexing:extractiveness_for_agent(postman_survival_protocol, ContextInstitutional, Score2),
    Score1 > Score2.

test(time_immutability) :-
    % In the immediate horizon, routines are a Rope (changeable)
    constraint_indexing:effective_immutability(biographical, mobile, rope),
    % In the historical horizon, bureaucratic nature is a Mountain (unchangeable)
    constraint_indexing:effective_immutability(historical, trapped, mountain).

:- end_tests(postman_survival_protocol_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-21
 * * KEY DECISIONS:
 * * 1. EXTRACTIVENESS SCORE (0.4):
 * Reasoning: The protocol itself is low-extraction (it's a tool for agency). However, 
 * the *asymmetry* between the individual and the bureaucracy it responds to 
 * is high (0.8). I resolved this by marking the protocol as a "Rope" for the 
 * individual to avoid the "Snare" of the institution.
 * * 2. SUPPRESSION SCORE (0.5):
 * Reasoning: Postman explicitly advises suppressing "plain speaking" and 
 * numerical "superstition". This suppression is intentional and 
 * pedagogical.
 * * 3. PERSPECTIVE SELECTION:
 * The Individual, the Bureaucracy, and the Sage capture the three states of 
 * interaction with these constraints: usage, enforcement, and observation.
 * * 4. AMBIGUITIES:
 * - Honesty vs. Deception: Postman calls honesty "the first refuge of the scoundrel". 
 * I resolved this by classifying his advice as an "anti-ventilation theory" 
 * aimed at minimizing pain rather than maximizing truth.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% Mandatory Omega for high-extraction (systemic) constraints:
omega_variable(
    postman_concealment_efficacy,
    "Is language as a tool for concealment (Rope) a functional necessity for social peace or a predatory Snare for truth-seekers?",
    resolution_mechanism("Audit of interpersonal trust levels in high-honesty vs. high-tact cultures"),
    impact("If necessity: Social Mountain. If predatory: Mandatrophy Snare."),
    confidence_without_resolution(medium)
).

omega_variable(
    quantification_superstition,
    "Is the passion for numbers truly medieval superstition (Mountain) or an emerging coordination Rope we have not yet mastered?",
    resolution_mechanism("Long-term verification of numerical intelligence/beauty predictive power vs. human intuition"),
    impact("If superstition: Mountain. If coordination: Rope."),
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Radical Honesty / Plain Speaking
 * Viability: The conventional virtue.
 * Suppression: Actively rejected by Nugget #5 as "overrated" and potentially 
 * causing "pain to others".
 * * ALTERNATIVE 2: Scientific Quantification (Counting)
 * Viability: America's base logic.
 * Suppression: Rejected by Rule 19 as "medieval superstition" with 
 * "limited effectiveness" in human affairs.
 * * CONCLUSION:
 * The existence of these alternatives (Honesty, Quantification) shifts Postman's 
 * protocol into a "Rope" of informational hygiene. Without his rules, 
 * the individual is easily ensnared by the "Snare" of these alternatives.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

% Load: ?- [postman_survival_protocol].
% Multi-perspective: ?- multi_index_report(postman_survival_protocol).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: prime_number_theorem
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Prime Number Theorem (PNT) / Asymptotic Distribution of Primes
% ============================================================================

:- module(constraint_pnt, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: prime_number_theorem
 * human_readable: Prime Number Theorem (Asymptotic Density)
 * domain: mathematical/technological
 * temporal_scope: 1896 - Present (Civilizational)
 * spatial_scope: Global/Abstract (The Number Line)
 * * SUMMARY:
 * The Prime Number Theorem (PNT) describes the asymptotic distribution of prime 
 * numbers among the positive integers. It formalizes the intuitive idea that 
 * primes become less frequent as they become larger, specifically stating that 
 * the number of primes less than x is approximately x/ln(x).
 * * KEY AGENTS:
 * - The Prime Number (Subject): The mathematical entity whose density and 
 * occurrence are dictated by the laws of arithmetic.
 * - The Cryptographer (Institutional): An agent who uses the predictable 
 * distribution of primes to coordinate global security (RSA/ECC).
 * - The Search Algorithm (Individual Powerless): A computational process 
 * searching for large primes, subject to the "thinning" reality of PNT.
 * * NARRATIVE ARC:
 * PNT is the ultimate "Mountain" of number theory—an inescapable density law. 
 * For the cryptographer, it functions as a "Rope," providing a coordination 
 * mechanism that ensures enough "raw material" (primes) exists to secure the 
 * world's data. However, for a high-precision algorithm, the logarithmic 
 * decay is a "Snare," extracting ever-increasing computational energy for 
 * diminishing returns in search results.
 */

/* ==========================================================================
   2. BASE PROPERTIES
   ========================================================================== */

% Required for DR-Audit Suite
narrative_ontology:interval(pnt_era, 1896, 2026).
narrative_ontology:constraint_claim(prime_number_theorem, mountain).

% Base extractiveness: 0.15
% Rationale: While mathematical truth is free, the realization of PNT 
% "extracts" computational resources (time/energy) as the logarithmic 
% density decreases at scale.
domain_priors:base_extractiveness(prime_number_theorem, 0.15).

% Suppression score: 0.1
% Rationale: It does not suppress other truths, but it renders alternative 
% prime distributions (e.g., linear density) logically impossible.
domain_priors:suppression_score(prime_number_theorem, 0.1).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(prime_number_theorem, extractiveness, 0.15).
narrative_ontology:constraint_metric(prime_number_theorem, suppression_requirement, 0.1).

% Enforcement: Emerges naturally from the structure of the integers.
domain_priors:emerges_naturally(prime_number_theorem).

% Metrics
% Beneficiaries & Victims
constraint_beneficiary(prime_number_theorem, system_security). % RSA reliability.
constraint_beneficiary(prime_number_theorem, mathematicians). % Proof-of-concept for chaos/order.
constraint_victim(prime_number_theorem, computational_efficiency). % Search time at high x.

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE PRIME NUMBER (SUBJECT) - Mountain
   --------------------------------------------------------------------------
   WHO: powerless - The prime has no choice in its density or location.
   WHEN: immediate - The law applies across the entire number line simultaneously.
   WHERE: trapped - Bound within the logical structure of the integers.
   SCOPE: global - Applies to all integers to infinity.
   
   WHY THIS CLASSIFICATION:
   For the numbers themselves, the distribution is a "Mountain." There is no 
   volition or agency; the density is an unchangeable feature of the universe.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    prime_number_theorem,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE CRYPTOGRAPHER - Rope
   --------------------------------------------------------------------------
   WHO: institutional - Power to design standards (NIST/ISO) based on this law.
   WHEN: biographical - Planning security for the lifecycle of modern encryption.
   WHERE: mobile - Can choose different prime sizes or algorithms to adjust.
   SCOPE: global - Managing the security of the global internet.
   
   WHY THIS CLASSIFICATION:
   For the architect of security systems, PNT is a "Rope." It is a functional 
   coordination tool that guarantees a sufficient supply of large primes 
   exists to make key collision statistically impossible.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    prime_number_theorem,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE LARGE-PRIME SEARCHER - Snare
   --------------------------------------------------------------------------
   WHO: powerless - A single CPU/GPU bound by the search space.
   WHEN: immediate - Each cycle spent in a "prime desert" is an extraction.
   WHERE: constrained - Knowing a prime exists but unable to jump to it.
   SCOPE: local - A specific range of the number line (e.g., near 2^82,589,933 - 1).
   
   WHY THIS CLASSIFICATION:
   When searching for the next Mersenne prime or high-bit RSA factor, PNT acts 
   as a "Snare." It proves that the "space" of freedom (primes) is getting 
   smaller, extracting massive energy (FLOPs) while tightening the difficulty 
   of the search.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    prime_number_theorem,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(local)
    )
) :- 
    domain_priors:base_extractiveness(prime_number_theorem, E),
    E >= 0.1,
    !.

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(pnt_tests).

test(multi_perspective_variance) :-
    % Subject -> Mountain
    constraint_indexing:constraint_classification(prime_number_theorem, Type1, context(powerless, immediate, trapped, global)),
    % Architect -> Rope
    constraint_indexing:constraint_classification(prime_number_theorem, Type2, context(institutional, biographical, mobile, global)),
    Type1 = mountain,
    Type2 = rope.

test(computational_snare_penalty) :-
    % A powerless searcher in a local range sees it as a Snare.
    constraint_indexing:constraint_classification(prime_number_theorem, snare, context(powerless, immediate, constrained, local)).

test(extraction_scaling) :-
    % Extraction should be non-zero for mathematical existence checks.
    domain_priors:base_extractiveness(prime_number_theorem, E),
    E > 0.1.

:- end_tests(pnt_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * * KEY DECISIONS:
 * 1. CLASSIFICATION: PNT is the perfect example of a "Mountain" (Natural Law) 
 * that is used as a "Rope" (Tool) by those in power. 
 * 2. SNARE ANALOGY: The "Snare" classification for the search algorithm is a 
 * critical realization. As x -> infinity, the probability of finding a 
 * prime is 1/ln(x). This logarithmic tightening is a literal resource 
 * extraction (FLOPs/Electricity) for the "individual" search agent.
 * 3. EXTRACTIVENESS: Set at 0.15 to reflect that while the law is free, the 
 * *following* of the law at high magnitudes is computationally expensive.
 */

% OMEGA IDENTIFICATION
omega_variable(
    riemann_hypothesis_link,
    "Does the 'Mountain' remain stable if the Riemann Hypothesis is proven or disproven?",
    resolution_mechanism("Verification of the error term bound Li(x) - pi(x)."),
    impact("If RH is true: The Mountain is smooth and predictable. If false: The Mountain has chaotic spikes."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Chebyshev's Bounds
 * Viability: Provides upper and lower bounds but lacks the asymptotic equality.
 * Suppression: Replaced by PNT for higher-precision coordination (Rope).
 * * ALTERNATIVE 2: Pure Probabilistic Models (Cramér's Model)
 * Viability: Primes as a random walk.
 * Suppression: Useful as a heuristic, but "suppressed" by the definitive proof 
 * of PNT for rigorous structural engineering.
 * * CONCLUSION:
 * The existence of PNT as a "Mountain" makes the probabilistic "Ropes" of 
 * earlier eras look like "Scaffolds"—temporary structures used until the 
 * final truth was reached.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Load: ?- [prime_number_theorem].
% Report: ?- constraint_indexing:multi_index_report(prime_number_theorem).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: prisoners_dilemma_equilibrium
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-25
% ============================================================================

:- module(constraint_prisoners_dilemma_equilibrium, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: prisoners_dilemma_equilibrium
 * human_readable: The Prisoner's Dilemma (Nash Equilibrium)
 * domain: logical/economic/social
 * * SUMMARY:
 * The Prisoner's Dilemma is a foundational concept in game theory demonstrating
 * why two rational individuals might not cooperate, even if it appears to be in
 * their best interest. The constraint is the Nash Equilibrium itself—the logical
 * gravity that pulls isolated, self-interested agents toward mutual defection.
 * This equilibrium is a structural limit on non-cooperative games, functioning
 * as a Mountain of logic.
 * * KEY AGENTS:
 * - The Prisoner (Subject): An agent trapped by the logic of the payoff matrix.
 * - The Institutional Designer: An agent observing the dilemma's structure.
 * - The Analytical Observer: An auditor classifying the dilemma's abstract form.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
% Rationale: The dilemma's logical structure itself is not extractive; it merely
% describes a scenario where potential value is lost. The extraction occurs in
% real-world instantiations, not the abstract model. This is a pure Mountain.
domain_priors:base_extractiveness(prisoners_dilemma_equilibrium, 0.1).
% Rationale: The equilibrium doesn't suppress alternatives through coercion,
% but through pure logic, making cooperation appear irrational.
domain_priors:suppression_score(prisoners_dilemma_equilibrium, 0.05).
% Rationale: The concept is purely functional, with no performative aspect.
domain_priors:theater_ratio(prisoners_dilemma_equilibrium, 0.0).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(prisoners_dilemma_equilibrium, extractiveness, 0.1).
narrative_ontology:constraint_metric(prisoners_dilemma_equilibrium, suppression_requirement, 0.05).
narrative_ontology:constraint_metric(prisoners_dilemma_equilibrium, theater_ratio, 0.0).

% Constraint self-claim (what does the constraint claim to be?)
% The Nash Equilibrium is presented as a logical, mathematical inevitability.
narrative_ontology:constraint_claim(prisoners_dilemma_equilibrium, natural_law).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   As a Mountain, the classification is invariant across all perspectives.
   ========================================================================== */

% PERSPECTIVE 1: THE TRAPPED PRISONER (MOUNTAIN)
% For the prisoner, the incentive to defect is a natural law of survival.
% The logic of the payoff matrix is an unyielding, inescapable Mountain.
constraint_indexing:constraint_classification(prisoners_dilemma_equilibrium, mountain,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE INSTITUTIONAL DESIGNER (MOUNTAIN)
% For a legislator or system designer, the dilemma is a fixed feature of the
% landscape (a Mountain) that must be engineered around with new constraints
% (e.g., laws, which are Ropes or Snares).
constraint_indexing:constraint_classification(prisoners_dilemma_equilibrium, mountain,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (MOUNTAIN)
% From a detached analytical view, the dilemma is a pure mathematical and
% logical limit, the very definition of a Mountain in this system.
constraint_indexing:constraint_classification(prisoners_dilemma_equilibrium, mountain,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(universal))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(prisoners_dilemma_equilibrium_tests).

test(perspectival_invariance) :-
    % Verify that the classification is Mountain from all key perspectives.
    constraint_indexing:constraint_classification(prisoners_dilemma_equilibrium, TypePowerless,
        context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(prisoners_dilemma_equilibrium, TypeInstitutional,
        context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(prisoners_dilemma_equilibrium, TypeAnalytical,
        context(agent_power(analytical), _, _, _)),
    TypePowerless == mountain,
    TypeInstitutional == mountain,
    TypeAnalytical == mountain.

test(mountain_threshold_adherence) :-
    % Verify the base metrics are within the defined limits for a Mountain.
    config:param(extractiveness_metric_name, ExtMetricName),
    config:param(suppression_metric_name, SuppMetricName),
    narrative_ontology:constraint_metric(prisoners_dilemma_equilibrium, ExtMetricName, E),
    narrative_ontology:constraint_metric(prisoners_dilemma_equilibrium, SuppMetricName, S),
    E =< 0.15,
    S =< 0.05.

:- end_tests(prisoners_dilemma_equilibrium_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This file models the Prisoner's Dilemma equilibrium as a pure Mountain. The
 * original file made a category error by assigning a high extraction score (0.7),
 * conflating the *outcome* of the dilemma (lost cooperative surplus) with
 * extraction *by the constraint itself*. The constraint is the logical structure,
 * which is non-extractive and non-coercive; it is a mathematical truth.
 *
 * By reclassifying it as a Mountain with low base extraction (0.1) and low
 * suppression (0.05), the model becomes internally consistent. Real-world
 * scenarios that instantiate the dilemma (like an arms race) are separate
 * constraints (often Snares) that are built upon this foundational Mountain.
 * Laws and contracts are Ropes designed to allow agents to escape the Mountain's
 * logical gravity.
 *
 * * MANDATROPHY ANALYSIS:
 * [RESOLVED MANDATROPHY] The Mandatrophy issue is resolved by correctly
 * identifying the constraint as a Mountain. The high extraction score that
 * triggered the alert was based on a misinterpretation. Since the constraint
 * is a logical limit, not an extractive mechanism, there is no perspectival
 * gap between a "beneficiary" and a "victim" to resolve. All agents perceive
 * the same immutable logical structure.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% As this is a low-extraction Mountain based on a formal model, there are no
% significant structural ambiguities requiring an omega_variable. The linter
% requirement for high-extraction constraints does not apply.

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(prisoners_dilemma_equilibrium, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% As a low-extraction constraint, temporal measurements for drift detection
% are not required by the linter. The logical structure of the dilemma is
% considered static over the interval.

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% As a Mountain, this constraint has no coordination function and therefore no
% coordination_type. It represents a fundamental limit *around which*
% coordination mechanisms are built.

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: private_identity_integration
% ============================================================================
% Generated: 2026-01-21
% Model: Gemini 2.0 Flash
% Source: "No. 1 Rule: Keep Your Shit to Yourself" by cafebedouin.org
% ============================================================================

:- module(constraint_private_identity_integration, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: private_identity_integration
 * human_readable: The Closed-Door Identity Protocol
 * domain: social/psychological
 * temporal_scope: Contemporary / Identity Formation
 * spatial_scope: Local (Interpersonal) to Global (Digital Public)
 * * SUMMARY:
 * This constraint mandates that new insights regarding needs, wants, and 
 * identity should be kept private for several years while they are 
 * integrated. It posits that public display of raw emotional 
 * processing or "issues" is a breach of social hygiene that serves 
 * neither the subject nor the audience.
 * * KEY AGENTS:
 * - The Novice (Sharer): One discovering "solo polyamory" or other new 
 * identity labels.
 * - The Experienced Mentor: The observer who advocates for the "closed door" 
 * as a survival and social hygiene strategy.
 * - The Public (Twitter): The digital audience where "sophomoric" 
 * displays generate "discussion".
 * * NARRATIVE ARC:
 * An individual discovers a new self-description and immediately "throws 
 * open the door" through a public email or article. The mentor 
 * identifies this as "inept" and "sophomoric," suggesting that the real 
 * work of identity is a "closed-door" process of integration that takes 
 * years to complete.
 */

/* ==========================================================================
   2. BASE PROPERTIES (Context-Independent)
   ========================================================================== */

/* ==========================================================================
   2. BASE PROPERTIES (Context-Independent)
   ========================================================================== */

% Required for [STEP 1] and [STEP 2] of the DR-Audit Suite
narrative_ontology:interval(private_identity_integration, 0, 10).

% Updated to valid v3.1 ontology pillar: [rope]
narrative_ontology:constraint_claim(private_identity_integration, rope).

% Base extractiveness: Moderate (0.4)
% Rationale: Premature public sharing extracts attention and emotional 
% energy from the public for "sophomoric" processing that "isn't doing 
% anyone any favors".
domain_priors:base_extractiveness(private_identity_integration, 0.4).

% Suppression: Moderate (0.5)
% Rationale: The rule suppresses the modern impulse for radical 
% transparency and "ventilation" in favor of "courtesy" and private 
% integration.
domain_priors:suppression_score(private_identity_integration, 0.5).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(private_identity_integration, extractiveness, 0.4).
narrative_ontology:constraint_metric(private_identity_integration, suppression_requirement, 0.5).

% Enforcement: Requires active individual enforcement ("Keep that shit to 
% yourself").
domain_priors:requires_active_enforcement(private_identity_integration).

% BENEFICIARIES & VICTIMS
% Beneficiary: The Social Fabric (protected from unnecessary drama).
constraint_beneficiary(private_identity_integration, social_hygiene).
% Victim: The Raw Impulse (denied immediate public validation/expression).
constraint_victim(private_identity_integration, radical_transparency).

% Metrics required for Section 1 of the Executive Summary
/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE NOVICE (Haili) - Snare
   --------------------------------------------------------------------------
   
   WHO: powerless (Consumed by "fantasies that were force-fed")
   WHEN: immediate (The moment of discovery of "solo polyamory")
   WHERE: trapped (Feeling "confined" by relationship limits)
   SCOPE: local (Personal relationship/girlhood)
   
   WHY THIS CLASSIFICATION:
   For the novice, traditional relationship limits and the lack of identity 
   labels are a "Snare" that makes them feel "confined" and "narrow". 
   They attempt to break this Snare through public declaration, which the 
   mentor views as a further entanglement in "sophomoric" error.
   
   NARRATIVE EVIDENCE:
   "My entire girlhood had been consumed by fantasies that were force-fed... 
   I had felt confined".
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    private_identity_integration,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE EXPERIENCED MENTOR - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional (Providing the "obvious" rules of life experience)
   WHEN: biographical (Integrating insights over "a few years")
   WHERE: mobile (Can "close the door" and choose what to share)
   SCOPE: local (Interpersonal hygiene)
   
   WHY THIS CLASSIFICATION:
   For the mentor, Rule No. 1 is a "Rope"—a functional coordination 
   mechanism for the self. It protects the process of identity 
   formation and ensures that the eventual re-emergence is refined rather 
   than messy.
   
   NARRATIVE EVIDENCE:
   "Integrating insights is hard work, and it takes time... Keep that shit 
   to yourself. Work it out. Flush when you’re done".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    private_identity_integration,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE ANALYTICAL OBSERVER - Mountain
   --------------------------------------------------------------------------
   
   WHO: analytical (Observer of the nature of relationships)
   WHEN: historical (The "normal course" of breakups and life experience)
   WHERE: analytical (Observer of the "limits" that define identity)
   SCOPE: global (The "human race" and its social constraints)
   
   WHY THIS CLASSIFICATION:
   To the observer, the fact that "relationships imply limits" is a "Mountain"—an 
   unchangeable natural law of human sociality. One does not escape 
   confinement; one merely chooses which constraints will define their 
   freedom.
   
   NARRATIVE EVIDENCE:
   "At some point, you choose or time chooses for you... relationships 
   imply limits".
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    private_identity_integration,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(historical),
        exit_options(analytical),
        spatial_scope(global)
    )
) :- !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(private_identity_integration_tests).

test(multi_perspective_hygiene) :-
    % Novice sees Snare (Confinement)
    constraint_indexing:constraint_classification(private_identity_integration, Type1, context(powerless, immediate, trapped, local)),
    % Mentor sees Rope (Survival Protocol)
    constraint_indexing:constraint_classification(private_identity_integration, Type2, context(institutional, biographical, mobile, local)),
    % Observer sees Mountain (Relationship Law)
    constraint_indexing:constraint_classification(private_identity_integration, Type3, context(analytical, historical, analytical, global)),
    Type1 \= Type2,
    Type2 \= Type3.

test(power_extractiveness_hygiene) :-
    % The novice (powerless) experiences the extraction of their raw identity 
    % by social "fantasies," while the mentor (institutional wisdom) 
    % experiences the "dividends" of the rule.
    ContextPowerless = context(powerless, immediate, trapped, local),
    ContextPowerful = context(institutional, biographical, mobile, local),
    constraint_indexing:extractiveness_for_agent(private_identity_integration, ContextPowerless, Score1),
    constraint_indexing:extractiveness_for_agent(private_identity_integration, ContextPowerful, Score2),
    Score1 > Score2.

test(time_immutability) :-
    % In the short term, identity is a "Snare" of force-fed fantasies.
    constraint_indexing:effective_immutability(immediate, trapped, mountain),
    % Over biographical time, "Keep it to yourself" is a Rope (changeable).
    constraint_indexing:effective_immutability(biographical, mobile, rope).

:- end_tests(private_identity_integration_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-21
 * * KEY DECISIONS:
 * * 1. EXTRACTIVENESS SCORE (0.4):
 * Reasoning: Chose moderate because premature sharing "isn't doing 
 * anyone any favors," effectively wasting the social bandwidth of the 
 * public for unintegrated personal issues.
 * * 2. PERSPECTIVE SELECTION:
 * Chose the Novice (Snare), the Mentor (Rope), and the Observer (Mountain) 
 * to reflect the source's pedagogical arc: from feeling trapped by 
 * limits to using them as a tool for refined identity.
 * * 3. CLASSIFICATION RATIONALE:
 * Novice -> Snare: They feel "confined" by traditional binaries and 
 * "force-fed" fantasies.
 * Mentor -> Rope: Rule No. 1 is presented as a "good idea" and a survival 
 * mechanism to "work it out" privately.
 * Observer -> Mountain: The blog author posits that "relationships 
 * imply limits" as a fundamental, inescapable truth.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    identity_integration_threshold,
    "How many 'years' are required for raw insight to transform from a 
     socially 'toxic' display into an integrated 'extraordinary' story?",
    resolution_mechanism("Audit of long-term social standing for sharers vs. private integrators"),
    impact("If years=0: Radical transparency is a Rope. If years>0: It is a Snare."),
    confidence_without_resolution(medium)
).

omega_variable(
    relationship_limit_nature,
    "Are relationship 'limits' a biological Mountain (necessity) or a 
     social Snare (constraint) that can be optimized away by solo polyamory?",
    resolution_mechanism("Longitudinal happiness metrics of solo polyamorists vs. traditionalists"),
    impact("If Mountain: Solo polyamory is a deceptive Rope. If Snare: It is a true escape."),
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Radical Transparency ("Throwing open the door")
 * Viability: Effectively what the NYT author did.
 * Suppression: Rejected by the blog author as "sophomoric" and 
 * lacking "life experience".
 * * ALTERNATIVE 2: Solo Polyamory
 * Viability: A term describing non-escalating commitments.
 * Suppression: Shunted as a potential fantasy or "force-fed" alternative 
 * to marriage/loneliness.
 * * CONCLUSION:
 * The existence of Alternative 1 (Sharing) is identified as a "Snare" 
 * for the subject, making Rule No. 1 a functional "Rope" for survival 
 * in a judgmental social environment.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * * 1. Load: ?- [constraint_private_identity_integration].
 * 2. Multi-perspective: ?- multi_index_report(private_identity_integration).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: procedural_compliance_theater
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-27
% ============================================================================

:- module(constraint_procedural_compliance_theater, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: procedural_compliance_theater
 * human_readable: The Checklist Trap
 * domain: institutional
 * * SUMMARY:
 * A condition where adherence to bureaucratic process becomes the primary goal,
 * regardless of whether that process achieves its intended outcome. It
 * transforms a once-functional coordination mechanism into a "Piton" that
 * exists to shield the institution from liability rather than to produce value.
 * * KEY AGENTS:
 * - The Worker: Subject (Powerless) - Completing forms that no one reads.
 * - The Institution/Compliance Officer: Beneficiary (Institutional) - Validated by the volume of completed forms.
 * - The Efficiency Auditor: Auditor (Analytical) - Observing the "Theater Ratio."
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(procedural_compliance_theater, 0.58). % High: Time/labor extracted for zero utility.
domain_priors:suppression_score(procedural_compliance_theater, 0.75).   % High: Compliance is mandatory for employment/legitimacy.
domain_priors:theater_ratio(procedural_compliance_theater, 0.88).       % Extremely High: Diagnostic of a Piton.

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(procedural_compliance_theater, extractiveness, 0.58).
narrative_ontology:constraint_metric(procedural_compliance_theater, suppression_requirement, 0.75).
narrative_ontology:constraint_metric(procedural_compliance_theater, theater_ratio, 0.88).

% Constraint self-claim (what does the constraint claim to be?)
% The system claims to be a necessary coordination mechanism for legal/regulatory compliance.
narrative_ontology:constraint_claim(procedural_compliance_theater, coordination).

% Binary flags
domain_priors:requires_active_enforcement(procedural_compliance_theater).

% Structural property derivation hooks:
% has_coordination_function/1 is DERIVED from constraint_beneficiary/2
% has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
narrative_ontology:constraint_beneficiary(procedural_compliance_theater, institution).
narrative_ontology:constraint_victim(procedural_compliance_theater, worker).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For the worker, the checklist is a Snare—a predatory extraction of cognitive
% bandwidth with no exit.
% χ = 0.58 * 1.5 (powerless) * 0.8 (local) = 0.696
constraint_indexing:constraint_classification(procedural_compliance_theater, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For the institution, the theater is a Rope—it provides the "coordination"
% necessary to satisfy external regulators and mitigate legal risk.
% χ = 0.58 * -0.2 (institutional) * 1.0 (national) = -0.116 (felt as a net benefit)
constraint_indexing:constraint_classification(procedural_compliance_theater, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (PITON)
% Detection of "Piton" status: high theater_ratio (0.88) identifies the
% constraint as functionally inert but structurally persistent.
constraint_indexing:constraint_classification(procedural_compliance_theater, piton,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(arbitrage),
            spatial_scope(global))) :-
    domain_priors:theater_ratio(procedural_compliance_theater, TR), TR > 0.70.

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(procedural_compliance_theater_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(procedural_compliance_theater, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(procedural_compliance_theater, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(piton_threshold_validation) :-
    % Verify the auditor classifies this as a Piton due to theater_ratio > 0.70.
    constraint_indexing:constraint_classification(procedural_compliance_theater, piton, context(agent_power(analytical), _, _, _)).

test(high_extraction_metrics_present) :-
    % High extraction requires victim/beneficiary declarations.
    narrative_ontology:constraint_beneficiary(procedural_compliance_theater, _),
    narrative_ontology:constraint_victim(procedural_compliance_theater, _).

:- end_tests(procedural_compliance_theater_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The extraction score (0.58) reflects the "tax" on human attention and labor
 * wasted on non-productive checks. The suppression score (0.75) reflects the
 * mandatory nature of this compliance within an organizational hierarchy.
 * The key diagnostic is the theater_ratio of 0.88, which is the primary
 * signal for a Piton classification from an analytical perspective.
 *
 * PERSPECTIVAL GAP:
 * The worker experiences this as a Snare, a pure extraction of their time and
 * effort for no discernible benefit. The institution, however, perceives it as
 * a Rope, as it successfully coordinates the appearance of diligence, thereby
 * satisfying external auditors and insulating itself from legal liability.
 * This gap is the core pathology of compliance theater.
 *
 * [RESOLVED MANDATROPHY]
 * The Mandatrophy is resolved by the "Piton" classification. Unlike a "Mountain"
 * of necessary safety rules (e.g., flight checklists), "Theater" is identified
 * by its lack of actual effectiveness despite high formal compliance. The high
 * theater_ratio allows the system to distinguish between functional, necessary
 * bureaucracy and its degraded, inertial form.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_procedural_compliance_theater,
    'Does the theater provide a "Legal Rope" that protects the system from collapse, even if the "Technical Rope" is broken?',
    'Analysis of insurance premiums and legal acquittal rates vs. procedural adherence.',
    'If protection exists: It is a Tangled Rope (providing real coordination value to one party); If no protection: It is a pure Snare/Piton.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(procedural_compliance_theater, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection. This model shows a once-useful
% procedure degrading over time, with performative aspects (theater) and
% extractive overhead growing as its original function atrophies.
% Required for high-extraction constraints (base_extractiveness > 0.46).

% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(pct_tr_t0, procedural_compliance_theater, theater_ratio, 0, 0.15).
narrative_ontology:measurement(pct_tr_t5, procedural_compliance_theater, theater_ratio, 5, 0.60).
narrative_ontology:measurement(pct_tr_t10, procedural_compliance_theater, theater_ratio, 10, 0.88).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(pct_ex_t0, procedural_compliance_theater, base_extractiveness, 0, 0.20).
narrative_ontology:measurement(pct_ex_t5, procedural_compliance_theater, base_extractiveness, 5, 0.45).
narrative_ontology:measurement(pct_ex_t10, procedural_compliance_theater, base_extractiveness, 10, 0.58).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The constraint is a set of rules for demonstrating compliance.
narrative_ontology:coordination_type(procedural_compliance_theater, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: project_vault_2026
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2026-02-06
% ============================================================================

:- module(constraint_project_vault, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: project_vault_2026
 * human_readable: Project Vault Strategic Mineral Reserve
 * domain: economic/geopolitical
 * * SUMMARY:
 * A $12B strategic reserve (announced Feb 2, 2026) designed to shield U.S. 
 * manufacturers from China’s rare earth monopoly. Financed via a $10B EXIM 
 * loan with a "make a profit" mandate, it creates a captive market where 
 * protection and extraction are inseparable.
 * * KEY AGENTS:
 * - Manufacturers: Subject (Powerless) - Captive buyers with no exit options.
 * - EXIM Bank/Gov: Beneficiary (Institutional) - Profit-seeking auditor of security.
 * - Private Investors: Beneficiary (Institutional) - $2B capital de-risked by captive pricing.
 * * THEORETICAL MODEL:
 * The extraction $E$ is a function of the debt-servicing requirements $D$ 
 * relative to the marginal security utility $U$:
 * $$E_{vault} = \frac{D_{exim} + P_{profit}}{U_{security}}$$
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Base extraction is high (> 0.46) due to the explicit profit mandate 
% and the transfer of risk to manufacturers via captive pricing.
domain_priors:base_extractiveness(project_vault_2026, 0.55). 
domain_priors:suppression_score(project_vault_2026, 0.94).   % 94% Chinese magnet monopoly.
domain_priors:theater_ratio(project_vault_2026, 0.65).       % National security framing.

% Primary keys for classification engine
narrative_ontology:constraint_metric(project_vault_2026, extractiveness, 0.55).
narrative_ontology:constraint_metric(project_vault_2026, suppression_requirement, 0.94).
narrative_ontology:constraint_metric(project_vault_2026, theater_ratio, 0.65).

% Scaffold/Tangled Rope Requirements
domain_priors:requires_active_enforcement(project_vault_2026). % Mandatory buy-in contracts.
narrative_ontology:has_sunset_clause(project_vault_2026).       % Bridge to 10-18 year capacity dev.
narrative_ontology:constraint_beneficiary(project_vault_2026, exim_bank).
narrative_ontology:constraint_victim(project_vault_2026, manufacturers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE MANUFACTURER (SNARE)
% Effective Extraction: 0.55 * 1.5 (powerless) * 1.2 (global) = 0.99.
% At χ ≈ 1.0, the manufacturer is in a state of total extraction/captivity.
constraint_indexing:constraint_classification(project_vault_2026, snare, 
    context(agent_power(powerless), 
            time_horizon(biographical), 
            exit_options(trapped), 
            spatial_scope(global))).

% PERSPECTIVE 2: THE GOVERNMENT (SCAFFOLD)
% Effective Extraction: 0.55 * -0.2 (institutional) * 1.2 = -0.132.
% Viewed as a net-gain coordination structure to build domestic independence.
constraint_indexing:constraint_classification(project_vault_2026, scaffold, 
    context(agent_power(institutional), 
            time_horizon(generational), 
            exit_options(mobile), 
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER
% Identifies the "Tangled Rope" transition as extraction intensifies.
constraint_indexing:constraint_classification(project_vault_2026, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(project_vault_2026_tests).

test(extraction_paradox) :-
    % Verify that the same policy yields a Snare and a Scaffold based on power.
    constraint_indexing:constraint_classification(project_vault_2026, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(project_vault_2026, scaffold, context(agent_power(institutional), _, _, _)).

test(scaffold_integrity) :-
    % Scaffold requires coordination (beneficiary) and a sunset.
    narrative_ontology:has_sunset_clause(project_vault_2026),
    narrative_ontology:constraint_beneficiary(project_vault_2026, _).

:- end_tests(project_vault_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * Project Vault represents the financialization of national security. By replacing 
 * traditional appropriations with an EXIM loan, the government creates a 
 * "Yield-bearing Scaffold." The 0.55 base extraction is the "insurance premium" 
 * for safety, but because manufacturers have zero exit options ($\sigma=1.2, 
 * \pi=1.5$), this coordination structure collapses into a Snare for the subject.
 *
 * MANDATROPHY RESOLUTION:
 * The "Mandatrophy" arises because the protection is real but the extraction 
 * is coerced. The classification system resolves this by mapping it as 
 * simultaneously a Scaffold (coordination) and a Snare (predation). 
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_vault_sufficiency,
    "Is $12B sufficient to prevent shutdowns during a 12-month cutoff?",
    "Stress-test modeling inventory vs. demand across a 24-month disruption.",
    "Sufficiency maintains the Scaffold; insufficiency reveals a fraudulent Piton.",
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(project_vault_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Extraction Drift (Modeling intensification as profit mandates normalize)
narrative_ontology:measurement(pv_ex_t0, project_vault_2026, base_extractiveness, 0, 0.45).
narrative_ontology:measurement(pv_ex_t5, project_vault_2026, base_extractiveness, 5, 0.55).
narrative_ontology:measurement(pv_ex_t10, project_vault_2026, base_extractiveness, 10, 0.65).

% Theater Ratio (Modeling the shift from crisis response to institutionalization)
narrative_ontology:measurement(pv_tr_t0, project_vault_2026, theater_ratio, 0, 0.75).
narrative_ontology:measurement(pv_tr_t5, project_vault_2026, theater_ratio, 5, 0.65).
narrative_ontology:measurement(pv_tr_t10, project_vault_2026, theater_ratio, 10, 0.50).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: project_vault_extraction_2026
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-05-21
% ============================================================================

:- module(constraint_project_vault_extraction_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: project_vault_extraction_2026
 * human_readable: Project Vault: Debt-Financed Strategic Extraction
 * domain: economic/political
 * * SUMMARY:
 * Project Vault is a $12 billion critical minerals reserve funded by a $10 billion
 * EXIM Bank loan with an explicit profit mandate. While it shields
 * manufacturers from China's 90% processing monopoly, the debt-based structure
 * creates a captive market where manufacturers must pre-commit to purchase at
 * government-set prices.
 * * KEY AGENTS:
 * - [U.S. Manufacturers]: Subject (Powerless) - Trapped in a "monopsony"
 * requirement with no alternatives for 10-18 years.
 * - [EXIM Bank / U.S. Govt]: Beneficiary (Institutional) - Capturing yield
 * from industrial vulnerability.
 * - [Geopolitical Auditor]: Auditor (Analytical) - Observing the "financialization
 * of national security".
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% High extraction (0.78) due to the explicit "make a profit" mandate and
% captive pricing mechanism.
domain_priors:base_extractiveness(project_vault_extraction_2026, 0.78).

% High suppression (0.84); manufacturers have no alternative for rare
% earth magnets for 10-18 years.
domain_priors:suppression_score(project_vault_extraction_2026, 0.84).

% Moderate-High theater (0.65) predicted as institutional capture
% prioritizes yield over genuine supply safety.
domain_priors:theater_ratio(project_vault_extraction_2026, 0.65).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(project_vault_extraction_2026, extractiveness, 0.78).
narrative_ontology:constraint_metric(project_vault_extraction_2026, suppression_requirement, 0.84).
narrative_ontology:constraint_metric(project_vault_extraction_2026, theater_ratio, 0.65).

% Constraint self-claim: It claims to be a coordination mechanism for national security.
narrative_ontology:constraint_claim(project_vault_extraction_2026, coordination).

% Binary flags
domain_priors:requires_active_enforcement(project_vault_extraction_2026). % Required for Tangled Rope

% Structural property derivation hooks:
% These are required for Tangled Rope classification.
narrative_ontology:constraint_beneficiary(project_vault_extraction_2026, exim_bank_us_govt).
narrative_ontology:constraint_victim(project_vault_extraction_2026, us_manufacturers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% Manufacturers view the reserve as a "trap with no exit," paying
% "permanently elevated prices" to avoid factory shutdowns.
constraint_indexing:constraint_classification(project_vault_extraction_2026, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Government officials see "strategic infrastructure" that provides
% negotiating leverage and taxpayer returns.
constraint_indexing:constraint_classification(project_vault_extraction_2026, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Coordination (security) and extraction (profit) are inseparable due to
% the debt-financed SPV structure.
constraint_indexing:constraint_classification(project_vault_extraction_2026, tangled_rope,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(project_vault_extraction_2026_tests).

test(perspectival_gap) :-
    % Verify the "coerced exchange" between subject (Snare) and beneficiary (Rope).
    constraint_indexing:constraint_classification(project_vault_extraction_2026, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(project_vault_extraction_2026, rope, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(project_vault_extraction_2026, tangled_rope, context(agent_power(analytical), _, _, _)).

test(tangled_rope_structural_properties) :-
    % Ensure all three required properties for Tangled Rope are present.
    domain_priors:requires_active_enforcement(project_vault_extraction_2026),
    narrative_ontology:constraint_beneficiary(project_vault_extraction_2026, _),
    narrative_ontology:constraint_victim(project_vault_extraction_2026, _).

:- end_tests(project_vault_extraction_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The extraction score (0.78) is anchored in the "make a profit" signal, which
 * implies surplus capture beyond mere cost-recovery for infrastructure.
 * The Perspectival Gap is extreme because while the institution captures
 * "upside" yield, the manufacturer bears the "operational risk" and
 * mandatory markups.
 *
 * * MANDATROPHY ANALYSIS:
 * The Tangled Rope classification resolves the mandatrophy by acknowledging that
 * the reserve's "protection" function is genuine and necessary (preventing
 * shutdowns), even while its debt-based financing mechanism is highly
 * extractive. This prevents the system from misclassifying it as a pure Snare,
 * which would ignore the coordination benefit, or a pure Rope, which would
 * ignore the asymmetric extraction. [RESOLVED MANDATROPHY]
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_vault_sufficiency,
    'Is the $12bn stockpile actually sufficient to prevent shutdowns during a 12-month cutoff?',
    'Stress-test modeling of inventory quantities vs. total manufacturing demand.',
    'If sufficient, it is a Tangled Rope; if insufficient, it is a Piton (pure theater).',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(project_vault_extraction_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Required for extraction (0.78) > 0.46.
% Interval: T=0 (2026 Launch) to T=10 (Institutional Capture Phase).

% Theater ratio: Increases as "normalization" and "institutional capture"
% favor yield over emergency response.
narrative_ontology:measurement(pv_tr_t0, project_vault_extraction_2026, theater_ratio, 0, 0.15).
narrative_ontology:measurement(pv_tr_t5, project_vault_extraction_2026, theater_ratio, 5, 0.45).
narrative_ontology:measurement(pv_tr_t10, project_vault_extraction_2026, theater_ratio, 10, 0.65).

% Extraction: Intensifies as EXIM Bank optimizes pricing to maximize returns
% on its largest-ever loan portfolio.
narrative_ontology:measurement(pv_ex_t0, project_vault_extraction_2026, base_extractiveness, 0, 0.40).
narrative_ontology:measurement(pv_ex_t5, project_vault_extraction_2026, base_extractiveness, 5, 0.60).
narrative_ontology:measurement(pv_ex_t10, project_vault_extraction_2026, base_extractiveness, 10, 0.78).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The reserve is a strategic resource allocation mechanism.
narrative_ontology:coordination_type(project_vault_extraction_2026, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: proof_of_work_consensus
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: Bitcoin: A Peer-to-Peer Electronic Cash System (Satoshi Nakamoto)
% ============================================================================

:- module(constraint_proof_of_work_consensus, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: proof_of_work_consensus
 * human_readable: Hash-Based Proof-of-Work
 * domain: technological/economic/social
 * temporal_scope: 2008 - Present (Digital Era)
 * spatial_scope: Global (Distributed Network)
 * 
 * SUMMARY:
 * A distributed consensus mechanism that replaces trusted third parties with 
 * computational proof. It timestamps transactions by hashing them into an 
 * ongoing chain of hash-based proof-of-work, forming a record that cannot 
 * be changed without redoing the work.
 * 
 * KEY AGENTS:
 * - Non-Mining User (Individual Powerless): Relies on the network's security without contributing hash power.
 * - The Network Protocol (Institutional): The rule-set that defines validity and incentive structures.
 * - The Honest Node (Individual Moderate): Contributes CPU power to extend the blockchain.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(proof_of_work_consensus, 0, 10).
narrative_ontology:constraint_claim(proof_of_work_consensus, rope).

% Base extractiveness: 0.2.
% The system does not "extract" value in a zero-sum sense; 
% instead, it consumes energy to produce the "security" of the ledger, 
% rewarding participants with new coins.
domain_priors:base_extractiveness(proof_of_work_consensus, 0.2).

% Suppression score: 0.9.
% The mechanism makes it "computationally impractical" for 
% an attacker to change the record once it is buried under subsequent 
% blocks.
domain_priors:suppression_score(proof_of_work_consensus, 0.9).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(proof_of_work_consensus, extractiveness, 0.2).
narrative_ontology:constraint_metric(proof_of_work_consensus, suppression_requirement, 0.9).

% Enforcement: Emerges naturally from computation and rules.
domain_priors:emerges_naturally(proof_of_work_consensus).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(proof_of_work_consensus, peer_to_peer_network).
constraint_victim(proof_of_work_consensus, double_spenders).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: NON-MINING USER - Mountain
   --------------------------------------------------------------------------
   WHO: powerless (Relies on the network's security without contributing hash power)
   WHEN: biographical (Long-term trust in the ledger's immutability)
   WHERE: trapped (Cannot alter the blockchain without immense computational resources)
   
   WHY THIS CLASSIFICATION:
   For a non-mining user, the Proof-of-Work consensus is a 'Mountain'. They 
   rely on the immutable mathematical difficulty of reversing transactions. 
   This forms an unchangeable foundation of trust, a fixed reality that ensures
   the integrity of their digital assets without their direct involvement.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    proof_of_work_consensus,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(biographical),
        exit_options(trapped),
        spatial_scope(global)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE NETWORK PROTOCOL - Rope
   --------------------------------------------------------------------------
   WHO: institutional (The rule-set that defines validity and incentive structures)
   WHEN: historical (From whitepaper inception to ongoing development)
   WHERE: arbitrage (Balances security, decentralization, and scalability)
   
   WHY THIS CLASSIFICATION:
   For the Network Protocol itself, Proof-of-Work is a 'Rope'. It is the
   functional coordination mechanism that ensures distributed consensus.
   It leverages computational work to secure the ledger, align incentives,
   and resist attacks, creating a robust, trustless system.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    proof_of_work_consensus,
    rope,
    context(
        agent_power(institutional),
        time_horizon(historical),
        exit_options(arbitrage),
        spatial_scope(global)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE ATTACKER - Snare
   --------------------------------------------------------------------------
   WHO: powerful (An entity seeking to subvert the system)
   WHEN: immediate (The moment of the "race" against the honest network)
   WHERE: constrained (Prevented from succeeding by the cumulative work)
   
   WHY THIS CLASSIFICATION:
   To the attacker, the Proof-of-Work is a 'Snare'. It is a coercive 
   mechanism that "penalizes" their behavior by making the cost of 
   cheating (energy and CPU) likely higher than the potential gain. 
   It strangles their ability to profitably manipulate the ledger.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    proof_of_work_consensus,
    snare,
    context(
        agent_power(powerful),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(global)
    )
).

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(proof_of_work_consensus_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(proof_of_work_consensus, Type1, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(proof_of_work_consensus, Type2, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(proof_of_work_consensus, Type3, context(agent_power(powerful), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3,
    Type1 \= Type3.

:- end_tests(proof_of_work_consensus_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. INDIVIDUAL POWERLESS PERSPECTIVE: Added 'Non-Mining User' as the
 *    individual powerless agent. For them, the Proof-of-Work is a 'Mountain',
 *    an immutable foundation of trust.
 *
 * 2. INSTITUTIONAL PERSPECTIVE: Added 'The Network Protocol' as the
 *    institutional agent. For them, Proof-of-Work is a 'Rope', the core
 *    coordination mechanism of the system.
 *
 * 3. CLASSIFICATION RATIONALE:
 *    - Non-Mining User (Mountain): Immutable trust in computational difficulty.
 *    - Network Protocol (Rope): Mechanism for distributed consensus.
 *    - Attacker (Snare): Computationally impractical to subvert.
 * 
 * 4. CORE INSIGHT: Proof-of-Work creates a powerful 'Rope' of trustless
 *    coordination by leveraging a 'Mountain' of computational difficulty.
 *    This simultaneously acts as a 'Snare' for malicious actors and provides
 *    an immutable foundation for passive users.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * The core uncertainty revolves around the long-term security and sustainability of the Proof-of-Work mechanism.
 */

omega_variable(
    fifty_one_percent_threshold,
    "What happens when the 'majority of CPU power' on the network is no longer controlled by honest participants, leading to a 51% attack?",
    resolution_mechanism("Requires continuous monitoring of network hash distribution and decentralization metrics; analysis of economic incentives for honest mining versus attacking."),
    impact("If majority is attacker-controlled: The 'Rope' snaps, and the Ledger becomes a 'Snare' for all users, eroding trust. If always honest: The 'Rope' remains secure."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */
/**
 * VIABLE ALTERNATIVES
 *
 * ALTERNATIVE 1: Trusted Third Parties (e.g., Banks, Financial Intermediaries)
 *    Viability: The traditional system for managing electronic cash, relying on central authorities for trust.
 *    Suppression: Rejected by Nakamoto due to the "double-spending problem" and the need for a trustless, peer-to-peer system, effectively turning this "Rope" into a "Snare" for users.
 *
 * CONCLUSION:
 * Proof-of-Work fundamentally suppresses the traditional 'Rope' of trusted
 * third parties, instead building a new 'Rope' of trustless consensus.
 * This shift transforms the "double-spending problem" from an unavoidable
 * 'Mountain' into a solvable constraint.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/proof_of_work_consensus].
 * 2. Multi-perspective: ?- multi_index_report(proof_of_work_consensus).
 * 3. Run tests: ?- run_tests(proof_of_work_consensus_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: public_domain_commons
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: Copyright Law / Creative Commons / Public Domain Status
% ============================================================================

:- module(constraint_public_domain_commons, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: public_domain_commons
 * human_readable: The Public Domain (Cultural Commons)
 * domain: social/economic/legal
 * temporal_scope: Civilizational (Permanent / Post-Copyright)
 * spatial_scope: Global
 * 
 * SUMMARY:
 * The Public Domain consists of all creative work to which no exclusive 
 * intellectual property rights apply. These works are free for anyone to use, 
 * remix, and build upon. It is the "default" state of information before or 
 * after the artificial constraint of Copyright is applied.
 * 
 * KEY AGENTS:
 * - The Student (Individual Powerless): Accesses public domain works for education.
 * - The Remix Artist (Individual Moderate): Uses the commons as raw material for new creations.
 * - The Corporate Rights-Holder (Institutional): Views the public domain as a threat to their business model.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (Reality Layer)
   ========================================================================== */

narrative_ontology:interval(public_domain_commons, 0, 10).
narrative_ontology:constraint_claim(public_domain_commons, mountain).

% Base extractiveness score (0.0)
% By definition, the public domain is non-extractive.
domain_priors:base_extractiveness(public_domain_commons, 0.0).

% Suppression score (0.3)
% While the works are legally free, they are often suppressed by "copyfraud" 
% (false copyright claims by legacy estates) or are difficult to access.
domain_priors:suppression_score(public_domain_commons, 0.3).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(public_domain_commons, extractiveness, 0.0).
narrative_ontology:constraint_metric(public_domain_commons, suppression_requirement, 0.3).

% Enforcement: Emerges naturally once copyright expires.
domain_priors:emerges_naturally(public_domain_commons).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(public_domain_commons, general_public).
constraint_victim(public_domain_commons, none).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE STUDENT - Mountain
   --------------------------------------------------------------------------
   WHO: powerless (Limited funds, needs access to knowledge)
   WHEN: immediate (Needs to read a classic for a class)
   WHERE: trapped (Cannot afford to buy every book)
   
   WHY THIS CLASSIFICATION:
   For a student, the public domain is a 'Mountain' of free knowledge. Classic
   literature, historical documents, and scientific papers are simply 'there'
   to be accessed and used, like a natural feature of the educational landscape.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    public_domain_commons,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE INDIE DEVELOPER / REMIX ARTIST - Rope
   --------------------------------------------------------------------------
   WHO: individual_moderate (A creator with agency)
   WHEN: biographical (Building a career or product)
   WHERE: mobile (Can choose which public domain works to use)
   
   WHY THIS CLASSIFICATION:
   For a small creator, the Public Domain is a 'Rope.' They can use the 
   characters of Shakespeare, the music of Beethoven, or historical images as a 
   coordination tool to build their own products without the 'Snare' of licensing fees.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    public_domain_commons,
    rope,
    context(
        agent_power(individual_moderate),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE DISNEY LAWYER (INSTITUTIONAL) - Snare
   --------------------------------------------------------------------------
   WHO: institutional (Represents a legacy media giant)
   WHEN: generational (Business model relies on IP exclusivity)
   WHERE: constrained (Cannot stop copyright from expiring eventually)
   
   WHY THIS CLASSIFICATION:
   From the perspective of a rights-holding corporation, the Public Domain is a 
   'Snare' for their profit margins. It represents the "death" of their 
   monopoly. As works like Steamboat Willie enter the commons, the 
   exclusive control that protected their revenue is "strangled."
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    public_domain_commons,
    snare,
    context(
        agent_power(institutional),
        time_horizon(generational),
        exit_options(constrained),
        spatial_scope(global)
    )
).

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(public_domain_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(public_domain_commons, Type1, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(public_domain_commons, Type2, context(agent_power(individual_moderate), _, _, _)),
    constraint_indexing:constraint_classification(public_domain_commons, Type3, context(agent_power(institutional), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3,
    Type1 \= Type3.

test(non_extractive_nature) :-
    domain_priors:base_extractiveness(public_domain_commons, E),

    E < 0.1.

:- end_tests(public_domain_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. PERSPECTIVE SELECTION: Added the 'Student' as the 'powerless'
 *    agent. This captures the idea of the public domain as a foundational,
 *    unquestioned resource for those entering a field of knowledge.
 *
 * 2. CLASSIFICATION RATIONALE:
 *    - Student (Mountain): An immutable source of free knowledge.
 *    - Artist (Rope): A tool for creating new works.
 *    - Corporation (Snare): A threat to a monopoly business model.
 * 
 * 3. EXTRACTIVENESS (0.0): The Public Domain is the conceptual baseline for a
 *    non-extractive information system. The conflict arises from others trying
 *    to re-impose extractive constraints (copyright) upon it.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * The core uncertainty is whether AI will respect or erase the public domain.
 */

omega_variable(
    sovereign_ai_datasets,
    "Will AI models trained on public domain data be able to compete with those trained on vast copyrighted datasets, or will the latter create an insurmountable advantage?",
    resolution_mechanism("Benchmarking performance of open-weights models trained on public data vs. closed-weights models trained on proprietary data over time."),
    impact("If public data is sufficient: The 'Mountain' of the commons becomes the primary 'Rope' for future tech development. If not: The commons becomes a quaint but irrelevant starting point."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * 
 * ALTERNATIVE 1: Perpetual Copyright
 *    Viability: Not currently legal, but consistently lobbied for by large rights-holders.
 *    Suppression: Suppressed by a centuries-long legal and philosophical tradition that sees
 *    copyright as a temporary, limited monopoly to encourage creativity, not a permanent property right.
 *
 * CONCLUSION:
 * The public domain is the default state. The constraint is 'copyright', which acts
 * as a temporary 'Snare' on the public's right to use information. The constant
 * battle over copyright term extension is an attempt by institutional agents to
 * prevent their 'Rope' (a marketable character) from dissolving back into the
 * 'Mountain' of the commons.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/public_domain_commons].
 * 2. Multi-perspective: ?- multi_index_report(public_domain_commons).
 * 3. Run tests: ?- run_tests(public_domain_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: pythagorean_geometric_constancy
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Pythagoras of Samos (c. 570–495 BC) / Euclidean Geometry
% ============================================================================

:- module(constraint_pythagorean_theorem, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: pythagorean_geometric_constancy
 * human_readable: The Pythagorean Theorem
 * domain: technological/mathematical
 * temporal_scope: c. 500 BC - Present (Civilizational)
 * spatial_scope: Global/Abstract (Euclidean Space)
 * * SUMMARY:
 * The Pythagorean Theorem states that in a right-angled triangle, the square of 
 * the hypotenuse is equal to the sum of the squares of the other two sides ($a^2 + b^2 = c^2$). 
 * It represents an immutable geometric constraint on the relationship between 
 * linear distance and orthogonal orientation in flat space.
 * * KEY AGENTS:
 * - The Right Triangle (Subject): A powerless agent whose dimensions are 
 * strictly bound by the laws of Euclidean geometry.
 * - The Architect/Engineer (Institutional): An agent who uses the theorem 
 * as a "Rope" to coordinate stable structures, navigation, and land surveys.
 * - The Non-Euclidean Navigator (Analytical): An observer for whom the 
 * theorem acts as a "Snare" or limit when attempting to map curved spaces 
 * (like the Earth's surface) using flat-space logic.
 * * NARRATIVE ARC:
 * The Pythagorean Theorem is the quintessential "Mountain"—a natural law 
 * that remains unyielding across millennia. In construction and navigation, 
 * it is a "Rope" for functional coordination, providing a "standard of 
 * achievement" for structural integrity. However, for those transitioning 
 * to global scales or general relativity, the theorem becomes a "Snare," 
 * extracting precision (extraction) and "strangling" calculations that 
 * fail to account for the "Mountain" of spacetime curvature.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Structural Anchor for the DR-Audit Suite
narrative_ontology:interval(pythagorean_era, -500, 2026).
narrative_ontology:constraint_claim(pythagorean_geometric_constancy, mountain).

% Base extractiveness score (0.0-1.0)
% Rationale: 0.1. Extremely low. The theorem is primarily a "gift" of 
% predictability. It only "extracts" the possibility of "impossible" triangles, 
% which is a trivial tax on creative freedom.
domain_priors:base_extractiveness(pythagorean_geometric_constancy, 0.1).

% Suppression score (0.0-1.0)
% Rationale: 0.3. It suppresses the visibility of non-Euclidean alternatives 
% in everyday human perception, rendering the idea of "curved space" 
% counter-intuitive for the average agent.
domain_priors:suppression_score(pythagorean_geometric_constancy, 0.3).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(pythagorean_geometric_constancy, extractiveness, 0.1).
narrative_ontology:constraint_metric(pythagorean_geometric_constancy, suppression_requirement, 0.3).

% Enforcement: Emerges naturally from the axioms of flat space.
domain_priors:emerges_naturally(pythagorean_geometric_constancy).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(pythagorean_geometric_constancy, civil_engineers).
constraint_beneficiary(pythagorean_geometric_constancy, gps_system_designers).
constraint_victim(pythagorean_geometric_constancy, spherical_geometry_intuition).
constraint_victim(pythagorean_geometric_constancy, architectural_anarchists).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE CARPENTER - Rope
   --------------------------------------------------------------------------
   
   WHO: individual_moderate - Has the tools to measure and the agency to build.
   WHEN: biographical - Spanning the career of a builder.
   WHERE: mobile - Can apply the 3-4-5 rule to any corner on a job site.
   SCOPE: local - Immediate physical environment of the build.
   
   WHY THIS CLASSIFICATION:
   For the carpenter, the theorem is a "Rope"—a functional coordination tool. 
   By using a 3-4-5 triangle, they coordinate a "standard of achievement" 
   (a perfect right angle), pulling the structure toward stability and 
   aesthetic alignment. It is a reliable tool for agency.
   
   NARRATIVE EVIDENCE:
   The "3-4-5 rule" has been the standard for ensuring square corners since 
   ancient Egypt and remains the primary "Rope" for modern masonry and framing.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    pythagorean_geometric_constancy,
    rope,
    context(
        agent_power(individual_moderate),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE HYPOTENUSE - Mountain
   --------------------------------------------------------------------------
   
   WHO: powerless - The line segment has no agency to deviate.
   WHEN: immediate - The length is fixed the moment the legs are defined.
   WHERE: trapped - Bound within the Euclidean plane.
   SCOPE: local - Immediate geometric relationship.
   
   WHY THIS CLASSIFICATION:
   For the hypotenuse itself, the theorem is an absolute Mountain. If the 
   legs are 3 and 4, the hypotenuse *must* be 5. It cannot "negotiate" or 
   "exit" this relationship. The arithmetic of its length is a natural law 
   of the space it inhabits.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    pythagorean_geometric_constancy,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE GEODETIC SURVEYOR - Snare
   --------------------------------------------------------------------------
   
   WHO: institutional - Power to map whole continents but bound by Earth's shape.
   WHEN: historical - Spanning the effort to map the globe accurately.
   WHERE: constrained - The "exit" (switching to spherical trig) is required.
   SCOPE: continental - Mapping distances across the horizon.
   
   WHY THIS CLASSIFICATION:
   For the surveyor mapping large distances, the theorem acts as a "Snare." 
   If they rely on flat-earth Pythagorean math, the curvature of the Earth 
   "strangles" their accuracy. It extracts precision (extraction), forcing 
   the surveyor to abandon the simple "Rope" of $a^2+b^2=c^2$ for the 
   more complex "Mountain" of spherical trigonometry.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    pythagorean_geometric_constancy,
    snare,
    context(
        agent_power(institutional),
        time_horizon(historical),
        exit_options(constrained),
        spatial_scope(continental)
    )
) :- 
    domain_priors:base_extractiveness(pythagorean_geometric_constancy, E),
    E >= 0.1,
    !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(pythagorean_theorem_tests).

test(multi_perspective_variance) :-
    % Carpenter -> Rope
    constraint_indexing:constraint_classification(pythagorean_geometric_constancy, Type1, context(individual_moderate, biographical, mobile, local)),
    % Hypotenuse -> Mountain
    constraint_indexing:constraint_classification(pythagorean_geometric_constancy, Type2, context(powerless, immediate, trapped, local)),
    Type1 \= Type2.

test(scale_based_extraction) :-
    % Demonstrates that for the surveyor (institutional), the "Snare" effect is felt.
    constraint_indexing:constraint_classification(pythagorean_geometric_constancy, snare, context(institutional, historical, constrained, continental)).

test(natural_emergence) :-
    domain_priors:emerges_naturally(pythagorean_geometric_constancy).

:- end_tests(pythagorean_theorem_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * 1. EXTRACTIVENESS SCORE (0.1): 
 * Chose 0.1 because math is generally a "gift." The only "extraction" 
 * is the loss of fidelity when the model is applied to the wrong 
 * domain (curvature).
 * 2. CLASSIFICATION: 
 * Showed how a "Rope" for a carpenter becomes a "Snare" for a 
 * surveyor, highlighting that a tool's utility is scale-dependent.
 */

% OMEGA IDENTIFICATION
omega_variable(
    euclidean_primacy_bias,
    "Is the 'Mountain' of Euclidean geometry a fundamental property of the universe (Mountain) or just a 'Scaffold' of human scale (Scaffold)?",
    resolution_mechanism("Investigation of quantum-scale geometry to see if Pythagorean laws hold at the Planck length."),
    impact("If Scaffold: The theorem is a 'Snare' for high-energy physics. If Mountain: It is a universal invariant."),
    confidence_without_resolution(high)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Spherical Trigonometry (The Haversine Formula)
 * Viability: Essential for long-distance navigation.
 * Suppression: Often suppressed in basic education to simplify the 
 * "Mountain" of flat-space logic.
 * * ALTERNATIVE 2: Taxicab Geometry (Manhattan Distance)
 * Viability: Calculating distance on a grid ($|x_1-x_2| + |y_1-y_2|$).
 * Suppression: Useful in urban planning but suppressed as "not real math" 
 * in classical Euclidean contexts.
 * * CONCLUSION:
 * The existence of Alternative 1 (Spherical Trig) is what turns the 
 * Pythagorean "Mountain" into a "Snare" for those navigating the 
 * actual surface of the Earth.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 1. Load: ?- [pythagorean_geometric_constancy].
 * 2. Multi-perspective: ?- multi_index_report(pythagorean_geometric_constancy).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */


% --- v3.1 Indexical Relativity Stubs (Fleet Repair) ---
constraint_indexing:constraint_classification(pythagorean_theorem_geometric_constancy, mountain, agent_power(analytical)).
constraint_indexing:constraint_classification(pythagorean_theorem_geometric_constancy, rope, agent_power(institutional)).
constraint_indexing:constraint_classification(pythagorean_theorem_geometric_constancy, snare, agent_power(powerless)).
