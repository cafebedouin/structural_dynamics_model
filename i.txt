% ============================================================================
% CONSTRAINT STORY: ibm_shield_2026
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-05-21
% ============================================================================

:- module(constraint_ibm_shield_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: ibm_shield_2026
 * human_readable: IBM SHIELD Program (MDA Contract)
 * domain: political/technological
 * * SUMMARY:
 * IBM's $151B SHIELD contract with the Missile Defense Agency (MDA) operationalizes
 * AI-enabled sensing for national defense. While providing a critical coordination
 * function (protecting the nation), the IDIQ contract structure and mission-grade
 * security create a "Snare" of technological and budgetary opacity for the public,
 * leading to a Tangled Rope classification from an analytical perspective.
 * * KEY AGENTS:
 * - General Public: Subject (Powerless)
 * - IBM / MDA: Beneficiary (Institutional)
 * - Defense Auditors: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(ibm_shield_2026, 0.62). % High due to the massive capital allocation ($151B) and proprietary AI governance.
domain_priors:suppression_score(ibm_shield_2026, 0.75).   % High as "mission-grade security" limits public oversight and alternative vendors.
domain_priors:theater_ratio(ibm_shield_2026, 0.20).       % Low because the contract focuses on rapid, functional delivery to the warfighter.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(ibm_shield_2026, extractiveness, 0.62).
narrative_ontology:constraint_metric(ibm_shield_2026, suppression_requirement, 0.75).
narrative_ontology:constraint_metric(ibm_shield_2026, theater_ratio, 0.20).

% Constraint self-claim (what does the constraint claim to be?)
% It claims to be an enforcement mechanism for national security.
narrative_ontology:constraint_claim(ibm_shield_2026, enforcement).

% Binary flags
domain_priors:requires_active_enforcement(ibm_shield_2026). % Required for Tangled Rope. The contract is enforced by federal law and security protocols.

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
narrative_ontology:constraint_beneficiary(ibm_shield_2026, national_security_apparatus).
narrative_ontology:constraint_victim(ibm_shield_2026, public_budgetary_transparency).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The public sees the SHIELD program as a Snare: a massive, opaque financial
% commitment they cannot exit or influence.
% χ = 0.62 * 1.5 (powerless) * 1.0 (national) = 0.93
constraint_indexing:constraint_classification(ibm_shield_2026, snare,
    context(agent_power(powerless),
            time_horizon(generational),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% MDA and IBM view this as a Rope—essential coordination of sensing and AI
% to ensure national survival, with low perceived extraction.
% χ = 0.62 * -0.2 (institutional) * 1.0 (national) = -0.124 (felt as a benefit)
constraint_indexing:constraint_classification(ibm_shield_2026, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Analysts see a Tangled Rope: Genuine existential security coordination
% mixed with high rent-extraction from the IDIQ structure.
% χ = 0.62 * 1.15 (analytical) * 1.2 (global) = 0.8556
constraint_indexing:constraint_classification(ibm_shield_2026, tangled_rope,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(ibm_shield_2026_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(ibm_shield_2026, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(ibm_shield_2026, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless == snare,
    TypeInstitutional == rope,
    TypePowerless \= TypeInstitutional.

test(tangled_rope_conditions_met) :-
    % Verify that the conditions for a Tangled Rope are met.
    domain_priors:requires_active_enforcement(ibm_shield_2026),
    narrative_ontology:constraint_beneficiary(ibm_shield_2026, _), % Derives has_coordination_function
    narrative_ontology:constraint_victim(ibm_shield_2026, _).     % Derives has_asymmetric_extraction

test(high_extraction_threshold) :-
    narrative_ontology:constraint_metric(ibm_shield_2026, extractiveness, E),
    E >= 0.46.

:- end_tests(ibm_shield_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness of 0.62 reflects the enormous $151B budget, a significant
 * diversion of public funds into a private entity's proprietary systems. The high
 * suppression score of 0.75 is due to the "mission-grade security" classification,
 * which effectively prevents public oversight, audits, and competition, locking the
 * government into a single vendor.
 *
 * The Perspectival Gap is stark:
 * - For the 'powerless' public, the effective extraction is amplified (χ=0.93),
 *   making it a clear Snare. They bear the cost without transparency or control.
 * - For the 'institutional' beneficiary (MDA/IBM), the extraction is inverted
 *   (χ=-0.124), perceived as a resource or benefit. It's a Rope that coordinates
 *   national defense, a critical function.
 * - The 'analytical' observer sees both sides. The system provides real coordination
 *   (beneficiary exists) but also has asymmetric extraction (victim exists) and
 *   requires active enforcement. This combination is the textbook definition of a
 *   Tangled Rope.
 *
 * MANDATROPHY ANALYSIS:
 * This constraint is a classic case where Mandatrophy could occur if the system
 * only looked at the victim's perspective (pure Snare) or the beneficiary's
 * (pure Rope). The Tangled Rope classification is the resolution mechanism. It
 * correctly identifies that a valid, even essential, coordination function
 * (national defense) is coupled with a highly extractive, suppressive implementation.
 * This prevents the system from dismissing the constraint's function while still
 * flagging its severe extractive properties.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_shield_2026,
    'Will "mission-grade security" prevent effective civilian AI governance, or is it a necessary shield for national security secrets?',
    'Declassification and review of built-in AI governance protocols by a trusted, independent non-defense agency (e.g., NIST).',
    'If protocols are robust and auditable, it leans towards a complex Rope. If they are opaque and self-serving, it confirms a permanent Snare for AI ethics.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(ibm_shield_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data models the constraint's evolution from initial award (T=0)
% to full operationalization (T=10). This is a high-extraction constraint,
% so lifecycle data is required.

% Theater ratio over time (remains low and stable, indicating functionality):
narrative_ontology:measurement(ibm_shield_2026_tr_t0, ibm_shield_2026, theater_ratio, 0, 0.15).
narrative_ontology:measurement(ibm_shield_2026_tr_t5, ibm_shield_2026, theater_ratio, 5, 0.18).
narrative_ontology:measurement(ibm_shield_2026_tr_t10, ibm_shield_2026, theater_ratio, 10, 0.20).

% Extraction over time (grows as the program scales and locks in its position):
narrative_ontology:measurement(ibm_shield_2026_ex_t0, ibm_shield_2026, base_extractiveness, 0, 0.20).
narrative_ontology:measurement(ibm_shield_2026_ex_t5, ibm_shield_2026, base_extractiveness, 5, 0.45).
narrative_ontology:measurement(ibm_shield_2026_ex_t10, ibm_shield_2026, base_extractiveness, 10, 0.62).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% As a defense system, it functions as an enforcement mechanism.
narrative_ontology:coordination_type(ibm_shield_2026, enforcement_mechanism).

% Network relationships (structural influence edges)
% This massive defense AI contract directly influences the development and
% regulation of AI ethics within the defense sector.
narrative_ontology:affects_constraint(ibm_shield_2026, ai_ethics_in_defense).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: ibm_shield_contract_2026
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_ibm_shield_contract_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: ibm_shield_contract_2026
 * human_readable: IBM SHIELD IDIQ Program Contract
 * domain: technological/political
 * * SUMMARY:
 * IBM has secured a massive IDIQ (Indefinite Delivery, Indefinite Quantity)
 * contract for the SHIELD program, intended to automate the military OODA loop
 * (Observe, Orient, Decide, Act) via AI-enabled sensing and command. While
 * framed as a "Rope" for national survival, the "mission-grade security" and
 * proprietary nature create a high-extraction environment that benefits the
 * contractor and military apparatus while suppressing democratic oversight.
 * * KEY AGENTS:
 * - Democratic Oversight Bodies: Subject (Powerless)
 * - Defense Contractors & Military Leadership: Beneficiary (Institutional)
 * - Systems Auditor: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(ibm_shield_contract_2026, 0.62). % High capital allocation away from public funds.
domain_priors:suppression_score(ibm_shield_contract_2026, 0.78).   % Mission-grade secrecy suppresses alternatives and oversight.
domain_priors:theater_ratio(ibm_shield_contract_2026, 0.18).       % High functional delivery, not just performative.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(ibm_shield_contract_2026, extractiveness, 0.62).
narrative_ontology:constraint_metric(ibm_shield_contract_2026, suppression_requirement, 0.78).
narrative_ontology:constraint_metric(ibm_shield_contract_2026, theater_ratio, 0.18).

% Constraint self-claim (what does the constraint claim to be?)
narrative_ontology:constraint_claim(ibm_shield_contract_2026, enforcement).

% Binary flags
domain_priors:requires_active_enforcement(ibm_shield_contract_2026). % Contractual obligations and security protocols require active maintenance.

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(ibm_shield_contract_2026, defense_contractors).
narrative_ontology:constraint_victim(ibm_shield_contract_2026, democratic_oversight).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For oversight bodies, the contract is a Snare. The high suppression (secrecy)
% and extraction (diversion of funds and decision-making power) trap them,
% making meaningful review impossible.
% χ = 0.62 * π(powerless, 1.5) * σ(national, 1.0) = 0.93
constraint_indexing:constraint_classification(ibm_shield_contract_2026, snare,
    context(agent_power(powerless),
            time_horizon(generational),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For the institutional beneficiaries (contractors, military), the program is
% a pure Rope, coordinating vast resources towards a critical security goal.
% The extraction is perceived as investment, not loss.
% χ = 0.62 * π(institutional, -0.2) * σ(national, 1.0) = -0.124 (felt as a benefit)
constraint_indexing:constraint_classification(ibm_shield_contract_2026, rope,
    context(agent_power(institutional),
            time_horizon(historical),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analytical view recognizes both functions. It is a genuine coordination
% mechanism (Rope-like) but also features high, asymmetric extraction and
% requires active enforcement to maintain its structure, classifying it as a
% Tangled Rope.
% χ = 0.62 * π(analytical, 1.15) * σ(global, 1.2) = 0.8556
constraint_indexing:constraint_classification(ibm_shield_contract_2026, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(ibm_shield_contract_2026_tests).

test(perspectival_gap) :-
    constraint_indexing:constraint_classification(ibm_shield_contract_2026, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(ibm_shield_contract_2026, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless == snare,
    TypeInstitutional == rope,
    TypePowerless \= TypeInstitutional.

test(analytical_classification_is_tangled_rope) :-
    constraint_indexing:constraint_classification(ibm_shield_contract_2026, tangled_rope, context(agent_power(analytical), _, _, _)).

test(tangled_rope_structural_requirements_met) :-
    narrative_ontology:constraint_beneficiary(ibm_shield_contract_2026, _), % -> has_coordination_function
    narrative_ontology:constraint_victim(ibm_shield_contract_2026, _),     % -> has_asymmetric_extraction
    domain_priors:requires_active_enforcement(ibm_shield_contract_2026).

:- end_tests(ibm_shield_contract_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This constraint models a large-scale, technologically advanced defense
 * contract. The scores reflect its dual nature.
 * - Base Extractiveness (0.62) is high, representing the immense redirection of
 *   public capital and decision-making authority to a private-public entity.
 * - Suppression Score (0.78) is also high, stemming from national security
 *   classifications that prevent public scrutiny and competitive alternatives.
 * - Theater Ratio (0.18) is low because the program is expected to be highly
 *   functional, not merely performative.
 *
 * The Perspectival Gap is stark:
 * - For oversight bodies (`powerless`), it's a `Snare`. They are trapped by
 *   secrecy and complexity, unable to perform their function.
 * - For contractors (`institutional`), it's a `Rope`. It's a tool for organizing
 *   resources to achieve a stated, valuable goal.
 *
 * * MANDATROPHY ANALYSIS:
 * The `Tangled Rope` classification from the analytical perspective is crucial.
 * It prevents the system from simplifying the situation into either a pure
 * `Rope` (ignoring the victims) or a pure `Snare` (ignoring the genuine
 * coordination function for national defense). It correctly identifies the
 * hybrid nature where a coordination goal is used to justify and sustain a
 * system of asymmetric extraction.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_shield_contract_2026,
    'Does the AI automation component functionally remove human-in-the-loop veto power over lethal action, despite policy claims to the contrary?',
    'Red-team audits of the SHIELD command-and-control architecture and decision latency data under simulated crisis conditions.',
    'If true, the constraint becomes a near-Mountain of automated violence, escalating its Snare properties. If false, it remains a Tangled Rope where human judgment is the final arbiter.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(ibm_shield_contract_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This constraint has high extraction (0.62 > 0.46), requiring temporal data.
% The model shows extraction accumulating as the program becomes more embedded,
% while theater ratio slightly decreases as initial inefficiencies are resolved.

% Theater ratio over time (metric_substitution detection):
narrative_ontology:measurement(isc26_tr_t0, ibm_shield_contract_2026, theater_ratio, 0, 0.25).
narrative_ontology:measurement(isc26_tr_t5, ibm_shield_contract_2026, theater_ratio, 5, 0.20).
narrative_ontology:measurement(isc26_tr_t10, ibm_shield_contract_2026, theater_ratio, 10, 0.18).

% Extraction over time (extraction_accumulation detection):
narrative_ontology:measurement(isc26_ex_t0, ibm_shield_contract_2026, base_extractiveness, 0, 0.45).
narrative_ontology:measurement(isc26_ex_t5, ibm_shield_contract_2026, base_extractiveness, 5, 0.55).
narrative_ontology:measurement(isc26_ex_t10, ibm_shield_contract_2026, base_extractiveness, 10, 0.62).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The SHIELD program is a command-and-control system, making it a form of
% enforcement mechanism.
narrative_ontology:coordination_type(ibm_shield_contract_2026, enforcement_mechanism).

% This contract would have significant downstream effects on regulations
% concerning AI in warfare and technology export controls.
narrative_ontology:affects_constraint(ibm_shield_contract_2026, ai_weapon_system_export_controls).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: indexical_relativity_core
% ============================================================================
% Generated: 2026-01-21
% Model: Gemini 2.0 Flash
% Source: indexical_relativity.md
% ============================================================================

:- module(constraint_indexical_relativity, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: indexical_relativity_core
 * human_readable: The Law of Indexical Relativity
 * domain: philosophical/epistemological
 * temporal_scope: Permanent (Analytical)
 * spatial_scope: Universal
 * * SUMMARY:
 * This constraint establishes that the classification of any social or physical 
 * limitation as a Mountain, Rope, or Snare is not an intrinsic property of 
 * the object itself. Instead, it is a function of the observer's power level, 
 * time horizon, and exit options.
 * * KEY AGENTS:
 * - The Powerless Subject: Experiences constraints as immutable "Natural Law" (Mountain).
 * - The Institutional Architect: Experiences constraints as "Choice-based Coordination" (Rope).
 * - The Analytical Historian: Experiences constraints as "Extractive Structures" (Snare/Rope).
 * * NARRATIVE ARC:
 * As an agent's power or time horizon increases, Mountains "melt" into Ropes. 
 * Conversely, as power decreases, coordination Ropes tighten into coercive Snares 
 * or unchangeable Mountains.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(meta_logic_01, 0, 10).
narrative_ontology:constraint_claim(indexical_relativity_core, rope).

% Base extractiveness score (0.1: It is a logical framework, not inherently extractive)
domain_priors:base_extractiveness(indexical_relativity_core, 0.1).

% Suppression score (0.2: Low, though often ignored in favor of 'objective' universalism)
domain_priors:suppression_score(indexical_relativity_core, 0.2).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(indexical_relativity_core, extractiveness, 0.1).
narrative_ontology:constraint_metric(indexical_relativity_core, suppression_requirement, 0.2).

% This is an analytical truth that emerges from the structure of power
domain_priors:emerges_naturally(indexical_relativity_core).

% Metrics for Section 1
% Beneficiaries of understanding this:
constraint_beneficiary(indexical_relativity_core, [analytical_observers, strategic_planners]).
% Victims of ignoring this:
constraint_victim(indexical_relativity_core, [those_mistaking_snares_for_mountains]).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: The Powerless Individual - Mountain
   --------------------------------------------------------------------------
   WHO: powerless (No ability to shape the rule)
   WHEN: biographical (Single lifetime)
   WHERE: trapped (No exit options)
   
   WHY THIS CLASSIFICATION:
   For the powerless, a constraint is a Mountain because they lack the agency 
   to alter it and the time to see it decay. It functions as "natural law".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    indexical_relativity_core,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(biographical),
        exit_options(trapped),
        spatial_scope(local)
    )
) :-
    % Mountain for powerless individuals within a single lifetime
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: The Institution / Pope - Rope
   --------------------------------------------------------------------------
   WHO: institutional (Rule-making power)
   WHEN: generational (Maintained over decades/centuries)
   WHERE: arbitrage (Can modify the system)
   
   WHY THIS CLASSIFICATION:
   For the architect, the constraint is a Rope. It is a coordination mechanism 
   maintained by choice to achieve specific functional goals.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    indexical_relativity_core,
    rope,
    context(
        agent_power(institutional),
        time_horizon(generational),
        exit_options(arbitrage),
        spatial_scope(global)
    )
) :-
    % Rope for those with rule-making power
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: The Historian / Observer - Snare
   --------------------------------------------------------------------------
   WHO: analytical (Non-participant observer)
   WHEN: historical (Centuries-long view)
   WHERE: analytical (Unconstrained by the system)
   
   WHY THIS CLASSIFICATION:
   The historian sees a Snare or a decayed Rope. They observe the extractive 
   nature and the eventual collapse of constraints that others saw as 
   permanent.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    indexical_relativity_core,
    snare,
    context(
        agent_power(analytical),
        time_horizon(historical),
        exit_options(analytical),
        spatial_scope(global)
    )
) :-
    % Snare when analyzing long-term extractiveness and collapse
    !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(indexical_relativity_tests).

/**
 * TEST: The Melting Point of Mountains
 * Demonstrates that increasing power/time horizon changes Mountain to Rope.
 */
test(mountain_melting_point) :-
    % Powerless see Mountain
    constraint_indexing:constraint_classification(indexical_relativity_core, mountain, 
        context(powerless, biographical, trapped, local)),
    % Institutional see Rope
    constraint_indexing:constraint_classification(indexical_relativity_core, rope, 
        context(institutional, generational, arbitrage, global)).

/**
 * TEST: Objective Truth Persistence
 * Verifies that each indexed classification is objectively true for its context.
 */
test(objective_indexed_truth) :-
    constraint_indexing:constraint_classification(indexical_relativity_core, Type, 
        context(powerless, biographical, trapped, local)),
    Type == mountain.

:- end_tests(indexical_relativity_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * * KEY DECISIONS:
 * 1. PERSPECTIVE SELECTION: Used the "Medieval Church" example from the source 
 * to ground the abstract theory in its primary use-case.
 * 2. CORE OMEGA:
 * omega_variable(agent_perception_lag,
 * "How quickly does an agent realize their status has shifted from Powerless to Powerful?",
 * resolution_mechanism("Measure latency between agency acquisition and constraint re-classification"),
 * impact("Determines if the system is 'sticky' or fluid."),
 * confidence_without_resolution(medium)
 * ).
 * * CONFIDENCE ASSESSMENT:
 * High: The source material explicitly defines these three perspectives.
 */

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Objective Universalism
 * Viability: The belief that a constraint is "actually" one type for everyone.
 * Suppression: Actively challenged by the Indexical Relativity framework, 
 * which labels universalism as a "perspective blind-spot".
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS CORE LOGIC:
 * 1. Load: ?- [constraint_indexical_relativity].
 * 2. Audit: ?- constraint_indexing:multi_index_report(indexical_relativity_core).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: india_semi_mission
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2024-02-29
% ============================================================================

:- module(constraint_india_semi_mission, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: india_semi_mission
 * human_readable: India Semiconductor Mission 2.0
 * domain: economic
 * * SUMMARY:
 * The India Semiconductor Mission 2.0 aims to boost the domestic chip industry through financial incentives, infrastructure development, and skill training. This constraint involves significant government investment and regulation, creating potential for both coordination and extraction.
 * * KEY AGENTS:
 * - Local Chip Designers: Subject (Powerless/Organized)
 * - Government of India: Beneficiary (Institutional)
 * - Global Semiconductor Market: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(india_semi_mission, 0.65). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(india_semi_mission, 0.50).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(india_semi_mission, 0.20).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(india_semi_mission, extractiveness, 0.65).
narrative_ontology:constraint_metric(india_semi_mission, suppression_requirement, 0.50).
narrative_ontology:constraint_metric(india_semi_mission, theater_ratio, 0.20).

% Binary flags
domain_priors:requires_active_enforcement(india_semi_mission). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(india_semi_mission, indian_economy).
narrative_ontology:constraint_victim(india_semi_mission, local_chip_designers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE/MOUNTAIN)
% High extraction felt as an immutable limit or predatory trap.
% NOTE: This may be upgraded to 'organized' power if a critical mass of victims exists.
%
% UNIFORM-TYPE EXCEPTION: For natural law constraints (mountain-only) or pure
% coordination constraints (rope-only), perspectives 1 and 2 may use any power
% atoms — the classification is the same from all perspectives.  Include at
% least 2-3 perspectives to demonstrate the invariance.
constraint_indexing:constraint_classification(india_semi_mission, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Viewed as essential infrastructure or coordination.
constraint_indexing:constraint_classification(india_semi_mission, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER
% Default analytical context (civilizational/analytical/global).
% This perspective is used by the bridge to derive constraint_claim.
% Type should reflect what the metrics compute: mountain, rope, tangled_rope, snare, scaffold, or piton.
constraint_indexing:constraint_classification(india_semi_mission, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(india_semi_mission_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(india_semi_mission, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(india_semi_mission, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(threshold_validation) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(india_semi_mission, ExtMetricName, E),
    (E =< 0.05 -> true ; E >= 0.46). % Ensures it's either a Mountain or high-extraction Snare/Tangled.

test(tangled_rope_properties) :-
  narrative_ontology:constraint_beneficiary(india_semi_mission, _),
  narrative_ontology:constraint_victim(india_semi_mission, _),
  domain_priors:requires_active_enforcement(india_semi_mission).

:- end_tests(india_semi_mission_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The high base extractiveness reflects the potential for rent-seeking and regulatory capture within the semiconductor industry. The powerless chip designers may feel trapped by regulations favoring large corporations, while the government views the mission as a vital coordinating effort. The analytical perspective identifies it as a Tangled Rope due to the coordination function (boosting the economy) and asymmetric extraction (potentially harming small designers). The suppression score reflects the barriers to entry and the potential for the mission to stifle innovation by smaller players. The perspectival gap arises from the unequal distribution of benefits and burdens.
 * * MANDATROPHY ANALYSIS:
 * The Tangled Rope classification prevents the system from mislabeling the semiconductor mission as pure extraction (Snare). While there's potential for exploitation, the mission also aims to provide a coordination function by attracting investment and developing the domestic semiconductor industry. A Snare classification would overlook the intended coordination benefits and exaggerate the negative impacts. The beneficiaries and victims are explicitly labeled to satisfy the coordination and asymmetric extraction conditions.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_india_semi_mission,
    'Will the incentives primarily benefit large, established firms, or will they foster innovation among smaller players?',
    'Tracking the distribution of subsidies and the number of new semiconductor startups created',
    'If large firms: rent-seeking, low innovation. If small players: more dynamism and innovation.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(india_semi_mission, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection (metric_substitution,
% extraction_accumulation) by providing measurements at multiple time points.
% Model how the constraint intensified or changed across the interval.
%
% Required for high-extraction constraints (base_extractiveness > 0.46).
% Use at least 3 time points (T=0, midpoint, T=end) for each tracked metric.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(india_semi_mission_tr_t0, india_semi_mission, theater_ratio, 0, 0.10).
narrative_ontology:measurement(india_semi_mission_tr_t5, india_semi_mission, theater_ratio, 5, 0.20).
narrative_ontology:measurement(india_semi_mission_tr_t10, india_semi_mission, theater_ratio, 10, 0.20).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(india_semi_mission_ex_t0, india_semi_mission, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(india_semi_mission_ex_t5, india_semi_mission, base_extractiveness, 5, 0.60).
narrative_ontology:measurement(india_semi_mission_ex_t10, india_semi_mission, base_extractiveness, 10, 0.65).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: individual_revolution_autonomy
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2026-02-06
% Status: [RESOLVED MANDATROPHY]
% ============================================================================

:- module(constraint_individual_revolution_autonomy, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: individual_revolution_autonomy
 * human_readable: The One-Man Revolution
 * domain: political/social
 * * SUMMARY:
 * This constraint contrasts the "futile" pursuit of mass socio-political revolution with the "fertile" 
 * pursuit of individual autonomy. It posits that mass institutional change is often co-opted, 
 * making the "only revolution that is coming" an internal, individual shift in values.
 * * KEY AGENTS:
 * - The Subject (Citizen): Powerless agent trapped in mass-culture narratives.
 * - The Beneficiary (Elite): Institutional agent maintaining status-quo coordination.
 * - The Auditor (Historian): Analytical observer tracking cycles of control.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(individual_revolution_autonomy, 0.75). % High extraction (Snare/Tangled territory)
domain_priors:suppression_score(individual_revolution_autonomy, 0.80).   % High suppression of alternatives
domain_priors:theater_ratio(individual_revolution_autonomy, 0.45).       % Significant but not yet Piton-level inertia

% Primary keys for the classification engine
narrative_ontology:constraint_metric(individual_revolution_autonomy, extractiveness, 0.75).
narrative_ontology:constraint_metric(individual_revolution_autonomy, suppression_requirement, 0.80).
narrative_ontology:constraint_metric(individual_revolution_autonomy, theater_ratio, 0.45).

% Structural property derivation hooks
% High extraction (> 0.46) requires beneficiary/victim declaration for proper modeling.
narrative_ontology:constraint_beneficiary(individual_revolution_autonomy, elite_institutional_class).
narrative_ontology:constraint_victim(individual_revolution_autonomy, disengaged_citizenry).
domain_priors:requires_active_enforcement(individual_revolution_autonomy).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE DISENGAGED CITIZEN (SNARE)
% χ = 0.75 * 1.5 (powerless) * 1.0 (national) = 1.125
% Perceived as a predatory trap with no viable exit.
constraint_indexing:constraint_classification(individual_revolution_autonomy, snare,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE INSTITUTIONAL MANAGER (ROPE)
% χ = 0.75 * -0.2 (institutional) * 1.2 (global) = -0.18
% Viewed as essential (if coercive) infrastructure for global stability.
constraint_indexing:constraint_classification(individual_revolution_autonomy, rope,
    context(agent_power(institutional),
            time_horizon(historical),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ONE-MAN REVOLUTIONARY (ROPE)
% χ = 0.75 * 0.4 (organized/individual_moderate) * 0.8 (local) = 0.24
% By narrowing scope and organizing internal power, extraction becomes manageable coordination.
constraint_indexing:constraint_classification(individual_revolution_autonomy, rope,
    context(agent_power(organized),
            time_horizon(biographical),
            exit_options(mobile),
            spatial_scope(local))).

% PERSPECTIVE 4: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% χ = 0.75 * 1.15 (analytical) * 1.2 (global) = 1.035
% High extraction + High suppression + Presence of Coordination (via beneficiary) = Tangled Rope.
constraint_indexing:constraint_classification(individual_revolution_autonomy, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(individual_revolution_autonomy_tests).

test(perspectival_gap) :-
    constraint_indexing:constraint_classification(individual_revolution_autonomy, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(individual_revolution_autonomy, rope, context(agent_power(institutional), _, _, _)).

test(extraction_scaling) :-
    % Verify that the powerless feel significantly more extraction than the analytical observer
    % (Due to π(powerless)=1.5 vs π(analytical)=1.15)
    constraint_indexing:effective_extraction(individual_revolution_autonomy, context(agent_power(powerless), _, _, national), ChiPowerless),
    constraint_indexing:effective_extraction(individual_revolution_autonomy, context(agent_power(analytical), _, _, national), ChiAnalytical),
    ChiPowerless > ChiAnalytical.

:- end_tests(individual_revolution_autonomy_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The 0.75 base extraction reflects the source's claim that mass movements are "elite projects." 
 * The perspectival gap is extreme: the system is a 'Snare' to the trapped citizen but a 'Rope' 
 * (essential coordination) to the elite. The "One-Man Revolution" works by reducing S (Scope) 
 * to 'local' and increasing P (Power) to 'organized' autonomy, which drops effective 
 * extraction (χ) into the Rope category.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω)
   ========================================================================== */

omega_variable(
    omega_autonomy_viability,
    'Can individual autonomy reach a critical mass to trigger systemic decoupling?',
    'Trace whether individual identity shifts (Amish-style) trigger measurable institutional resource-diversion.',
    'If True: Transition to Scaffold. If False: Remains a Snare/Tangled Rope.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(individual_revolution_autonomy, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Required for high-extraction constraints (base_extractiveness 0.75 > 0.46)
% Tracks the intensification of extraction and the rise of "theatrical" management.

% Theater ratio: Rising over time indicates metric substitution (Goodhart drift).
narrative_ontology:measurement(ira_tr_t0, individual_revolution_autonomy, theater_ratio, 0, 0.20).
narrative_ontology:measurement(ira_tr_t5, individual_revolution_autonomy, theater_ratio, 5, 0.35).
narrative_ontology:measurement(ira_tr_t10, individual_revolution_autonomy, theater_ratio, 10, 0.45).

% Extraction: Tracking extraction accumulation (rent-seeking layering).
narrative_ontology:measurement(ira_ex_t0, individual_revolution_autonomy, base_extractiveness, 0, 0.55).
narrative_ontology:measurement(ira_ex_t5, individual_revolution_autonomy, base_extractiveness, 5, 0.65).
narrative_ontology:measurement(ira_ex_t10, individual_revolution_autonomy, base_extractiveness, 10, 0.75).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: information_foraging_theory
% ============================================================================
% Generated: 2026-01-17
% Model: Gemini 2.0 Flash
% Source: Pirolli, P., & Card, S. (1999). Information foraging.
% ============================================================================

:- module(constraint_info_foraging, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: information_foraging_theory
 * human_readable: Information Foraging (Optimal Search Logic)
 * domain: technological/biological/social
 * temporal_scope: Immediate to Biographical
 * spatial_scope: Global
 * * SUMMARY:
 * IFT posits that humans use built-in biological heuristics to maximize their 
 * "Information Gain" per unit of "Interaction Cost." It explains why we 
 * skim, why we click certain links, and when we decide to abandon a 
 * "patch" (like a long article) to find a new one.
 * * KEY AGENTS:
 * - The Forager: The individual seeking information to solve a problem.
 * - The Information Patch: A concentrated source of data (a web page, a library).
 * - The Information Scent: The cues (links, keywords) that hint at the value 
 * of a potential path.
 * * NARRATIVE ARC:
 * IFT functions as a "Metabolic Rope." It coordinates human attention by 
 * calculating the "return on investment" for every click. It acts as an 
 * invisible Mountain that dictates the design of the entire internet.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (Reality Layer)
   ========================================================================== */

narrative_ontology:interval(information_foraging_theory, 0, 10).
narrative_ontology:constraint_claim(information_foraging_theory, rope).

% Base extractiveness score (0.2)
% Low extraction; it is a theory of efficiency, though platforms may 
% "hijack" scent to extract attention.
domain_priors:base_extractiveness(information_foraging_theory, 0.2).

% Suppression score (0.1)
% Information "scent" is the opposite of suppression; it is a strategy 
% of high-visibility signaling.
domain_priors:suppression_score(information_foraging_theory, 0.1).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(information_foraging_theory, extractiveness, 0.2).
narrative_ontology:constraint_metric(information_foraging_theory, suppression_requirement, 0.1).

% Enforcement: Emerges naturally from evolutionary energy conservation.
domain_priors:emerges_naturally(information_foraging_theory).

% Metrics
/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE USER - Rope
   --------------------------------------------------------------------------
   WHO: individual_moderate
   WHEN: immediate
   WHERE: mobile (high navigation freedom)
   SCOPE: local
   
   WHY THIS CLASSIFICATION:
   For the user, IFT is a "Rope." It is the mental coordination tool that 
   allows them to navigate the infinite "Mountain" of the web. By following 
   "Information Scent," they find the shortest path to their goal, 
   minimizing their cognitive load.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    information_foraging_theory,
    rope,
    context(agent_power(individual_moderate), time_horizon(immediate), exit_options(mobile), spatial_scope(local))
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE UX DESIGNER - Mountain
   --------------------------------------------------------------------------
   WHO: analytical/institutional
   WHEN: biographical
   WHERE: analytical
   SCOPE: national
   
   WHY THIS CLASSIFICATION:
   To a designer, IFT is a "Mountain." You cannot ignore it. If a website 
   has poor "Information Scent" (unclear navigation), users will 
   predictably "evaporate" (The Dead Sea Effect) to a better patch. 
   The theory is an immutable law of user behavior.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    information_foraging_theory,
    mountain,
    context(agent_power(institutional), time_horizon(biographical), exit_options(analytical), spatial_scope(national))
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE ATTENTION FARMER - Snare
   --------------------------------------------------------------------------
   WHO: powerless (the user being farmed)
   WHEN: immediate
   WHERE: trapped (in a 'sticky' platform)
   SCOPE: global
   
   WHY THIS CLASSIFICATION:
   When a platform uses IFT to maximize "Time on Site" rather than 
   "Goal Completion," the theory becomes a "Snare." By providing 
   continuous "micro-scents" (infinite scrolls, notifications), they 
   trap the forager in a loop of low-value exploration, strangling 
   their productivity.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    information_foraging_theory,
    snare,
    context(agent_power(powerless), time_horizon(immediate), exit_options(trapped), spatial_scope(global))
) :- !.

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: informational_time_2026
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2026-02-06
% ============================================================================

:- module(constraint_informational_time_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: informational_time_2026
 * human_readable: The Emergent Time/Information Constraint
 * domain: scientific/physical
 * * SUMMARY:
 * A quiet revolution in physics identifies time as an emergent phenomenon 
 * rather than a fundamental part of reality. Time is the cumulative 
 * record of physical interactions written into the structure of the universe; 
 * informational order, rooted in irreversibility, defines the arrow of time 
 *. This redefines spacetime as a storage medium for quantum 
 * information.
 * * KEY AGENTS:
 * - Subject (Humans/Particles): Subject (Powerless against irreversible imprinting)
 * - Research Academics (Florian Neukart/Claude Shannon): Beneficiary (Institutional)
 * - Information Theory Frameworks: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Extraction is extreme (0.78). Every interaction irreversibly extracts "possibility" 
% to record "actuality" in the structure of the universe.
domain_priors:base_extractiveness(informational_time_2026, 0.78). 

% Suppression is moderate-high (0.65). The emergent framework suppresses 
% classical "background clock" models in favor of discrete information cells.
domain_priors:suppression_score(informational_time_2026, 0.65).   

% Theater ratio is moderate (0.45). Smooth spacetime geometry is a theatrical 
% abstraction for underlying discrete informational entanglement.
domain_priors:theater_ratio(informational_time_2026, 0.45).       

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(informational_time_2026, extractiveness, 0.78).
narrative_ontology:constraint_metric(informational_time_2026, suppression_requirement, 0.65).
narrative_ontology:constraint_metric(informational_time_2026, theater_ratio, 0.45).

% Primary keys for the classification engine
% Stakeholder declarations
narrative_ontology:constraint_beneficiary(informational_time_2026, information_theoretical_physics).
narrative_ontology:constraint_victim(informational_time_2026, fundamental_background_time).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For any observer or particle, the arrow of time is a Snare: an 
% inescapable trap where information cannot be globally unwritten.
constraint_indexing:constraint_classification(informational_time_2026, snare, 
    context(agent_power(powerless), 
            time_horizon(civilizational), 
            exit_options(trapped), 
            spatial_scope(universal))).

% PERSPECTIVE 2: THE SCIENTIST (ROPE)
% Physicists view information as a Rope: a coordination tool (Theory of 
% Everything) that links gravity, thermodynamics, and quantum mechanics.
constraint_indexing:constraint_classification(informational_time_2026, rope, 
    context(agent_power(institutional), 
            time_horizon(generational), 
            exit_options(mobile), 
            spatial_scope(global))).

% PERSPECTIVE 3: THE RECORDING COSMOS (MOUNTAIN)
% From the view of fundamental reality, informational imprinting is a 
% Mountain: an irreducible physical limit from which spacetime geometry emerges.
constraint_indexing:constraint_classification(informational_time_2026, mountain,
    context(agent_power(analytical),
            time_horizon(universal),
            exit_options(analytical),
            spatial_scope(universal))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(informational_time_2026_tests).

test(perspectival_gap) :-
    constraint_indexing:constraint_classification(informational_time_2026, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(informational_time_2026, rope, context(agent_power(institutional), _, _, _)).

test(high_extraction_verification) :-
    domain_priors:base_extractiveness(informational_time_2026, E),
    E >= 0.70.

:- end_tests(informational_time_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The extraction score (0.78) is anchored by the "thermodynamic cost" of 
 * storing information. The Snare classification reflects that 
 * recovering spread information is physically impossible.
 *
 * * MANDATROPHY ANALYSIS:
 * [RESOLVED MANDATROPHY]
 * The system identifies the Mountain by noting that while basic quantum 
 * equations are reversible, real interactions leave permanent imprints 
 * that define a "natural ordering" of events.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_time_erasure,
    'Can informational imprints be "unwritten" without violating the foundations of physics?',
    'Analysis of Hawking radiation structure and black hole information recovery.',
    'Success converts the Snare into a Scaffold; failure confirms the permanent Mountain.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(informational_time_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Theater ratio rises as "smooth spacetime" is increasingly modeled as an emergent abstraction.
narrative_ontology:measurement(it_tr_t0, informational_time_2026, theater_ratio, 0, 0.15).
narrative_ontology:measurement(it_tr_t5, informational_time_2026, theater_ratio, 5, 0.35).
narrative_ontology:measurement(it_tr_t10, informational_time_2026, theater_ratio, 10, 0.45).

% Extraction rises as every interaction irreversibly imprints the structure of the universe.
narrative_ontology:measurement(it_ex_t0, informational_time_2026, base_extractiveness, 0, 0.40).
narrative_ontology:measurement(it_ex_t5, informational_time_2026, base_extractiveness, 5, 0.65).
narrative_ontology:measurement(it_ex_t10, informational_time_2026, base_extractiveness, 10, 0.78).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: infrastructure_decay_piton
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-05-21
% ============================================================================

:- module(constraint_infrastructure_decay_piton, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: infrastructure_decay_piton
 * human_readable: The Painted Ruins
 * domain: technological/political
 * * SUMMARY:
 * A state of physical infrastructure where superficial maintenance is
 * prioritized to satisfy public visibility and political metrics, while
 * internal structural integrity is neglected. This is a classic
 * Piton: a legacy constraint maintained by the theater of appearance
 * despite functional failure. The original function (a Rope for safe transit)
 * has atrophied, but the institutional form remains.
 * * KEY AGENTS:
 * - The Commuter: Subject (Powerless) - Crosses a bridge they assume is safe.
 * - The Public Works Director: Beneficiary (Institutional) - Keeps metrics green.
 * - The Structural Engineer: Auditor (Analytical) - Warns of the invisible rot.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(infrastructure_decay_piton, 0.08). % Low: The direct extraction is minimal (e.g., part of a general tax), but the neglect represents a theft of future safety.
domain_priors:suppression_score(infrastructure_decay_piton, 0.85).   % High: Commuters often have no alternative route.
domain_priors:theater_ratio(infrastructure_decay_piton, 0.92).       % Extreme: The "maintenance" is almost entirely aesthetic, satisfying only visible metrics.

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(infrastructure_decay_piton, extractiveness, 0.08).
narrative_ontology:constraint_metric(infrastructure_decay_piton, suppression_requirement, 0.85).
narrative_ontology:constraint_metric(infrastructure_decay_piton, theater_ratio, 0.92).

% Constraint self-claim (what does the constraint claim to be?)
% The institution claims it is providing a coordination good (safe transit).
narrative_ontology:constraint_claim(infrastructure_decay_piton, coordination).

% Structural property derivation hooks:
% The Public Works department benefits from the appearance of action.
% Commuters are victims of the underlying neglect and risk.
narrative_ontology:constraint_beneficiary(infrastructure_decay_piton, public_works_bureaucracy).
narrative_ontology:constraint_victim(infrastructure_decay_piton, regional_commuters).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (ROPE)
% To the commuter, the bridge appears to be a functional Rope. They see the
% fresh paint and assume it provides the coordination benefit of safe passage.
% They are unaware of the high theater ratio.
constraint_indexing:constraint_classification(infrastructure_decay_piton, rope,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(regional))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% To the department, the painting program is a Rope—it coordinates public
% approval and prevents political "friction" regarding the budget, successfully
% managing appearances.
constraint_indexing:constraint_classification(infrastructure_decay_piton, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (PITON)
% The analytical observer, aware of the high theater_ratio, correctly
% identifies the constraint as a Piton. The original function has atrophied,
% leaving only performative maintenance.
constraint_indexing:constraint_classification(infrastructure_decay_piton, piton,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(infrastructure_decay_piton_tests).

test(perspectival_gap_analytical) :-
    % Verify the analytical observer sees a Piton while others see a Rope.
    constraint_indexing:constraint_classification(infrastructure_decay_piton, rope, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(infrastructure_decay_piton, piton, context(agent_power(analytical), _, _, _)),
    constraint_indexing:constraint_classification(infrastructure_decay_piton, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(infrastructure_decay_piton, TypeAnalytical, context(agent_power(analytical), _, _, _)),
    TypePowerless \= TypeAnalytical.

test(piton_threshold_validation) :-
    % Verify the Piton classification is justified by a high theater ratio.
    config:param(theater_metric_name, TheaterMetricName),
    narrative_ontology:constraint_metric(infrastructure_decay_piton, TheaterMetricName, TR),
    TR >= 0.70.

:- end_tests(infrastructure_decay_piton_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This constraint is defined by its high theater_ratio (0.92) and low base
 * extractiveness (0.08). The original function—a Rope providing safe transit—has
 * degraded, but the institutional form remains. This is the essence of a Piton.
 * The perspectival gap is not one of felt extraction, but of information:
 * both the powerless commuter and the institutional director perceive a Rope,
 * one out of ignorance and the other out of a focus on political metrics.
 * Only the analytical observer, who can measure the theater ratio, correctly
 * identifies the system as a non-functional Piton. The high suppression score
 * (0.85) reflects the lack of alternatives for commuters, trapping them in a
 * system whose risk they cannot perceive.
 * * MANDATROPHY ANALYSIS:
 * This case avoids Mandatrophy by correctly identifying the constraint as a
 * Piton rather than a high-extraction Snare. The harm is not in direct
 * extraction but in the catastrophic risk introduced by systemic neglect,
 * a consequence of metric substitution (Goodhart's Law). The temporal data
 * shows this drift from a functional Rope to a theatrical Piton.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_infrastructure_decay_piton,
    'At what point does the invisible structural rot exceed the load-bearing capacity of the "Theater," causing catastrophic failure?',
    'Comparison of official inspection reports (theater) vs. independent non-destructive testing (NDT) data (ground truth).',
    'If threshold is crossed: Sudden failure, revealing the Rope was an illusion. If not: Continued decay as a Piton.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(infrastructure_decay_piton, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data shows the drift from a functional Rope to a theatrical Piton.
% This is a classic case of metric substitution, where the proxy for health
% (fresh paint) replaces the actual goal (structural integrity).
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(idp_tr_t0, infrastructure_decay_piton, theater_ratio, 0, 0.10).
narrative_ontology:measurement(idp_tr_t5, infrastructure_decay_piton, theater_ratio, 5, 0.65).
narrative_ontology:measurement(idp_tr_t10, infrastructure_decay_piton, theater_ratio, 10, 0.92).

% Extraction over time (remains low, as this is about neglect, not rent-seeking):
narrative_ontology:measurement(idp_ex_t0, infrastructure_decay_piton, base_extractiveness, 0, 0.12).
narrative_ontology:measurement(idp_ex_t5, infrastructure_decay_piton, base_extractiveness, 5, 0.10).
narrative_ontology:measurement(idp_ex_t10, infrastructure_decay_piton, base_extractiveness, 10, 0.08).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The bridge is a physical asset for resource (traffic) allocation.
narrative_ontology:coordination_type(infrastructure_decay_piton, resource_allocation).

% Network relationships (structural influence edges)
% The decay of physical infrastructure directly impacts the viability and
% funding priorities of public transit systems that might rely on it.
narrative_ontology:affects_constraint(infrastructure_decay_piton, public_transit_funding).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: inner_model_theory_constraints
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Kurt Gödel (1938) / Ronald Jensen (1972) / Inner Model Theory
% ============================================================================

:- module(constraint_inner_models, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: inner_model_theory_constraints
 * human_readable: Inner Model Theory (L and its Descendants)
 * domain: mathematical/philosophical
 * temporal_scope: 1938 - Present (Civilizational)
 * spatial_scope: Global/Abstract (Transfinite Set Theory)
 * * SUMMARY:
 * Inner Model Theory studies sub-universes of the set-theoretic universe (V) 
 * that satisfy the axioms of ZFC. The archetypal inner model is Gödel's 
 * Constructible Universe (L), which imposes a "Mountain" of absolute 
 * determinacy on the transfinite, fixing independence results like the 
 * Continuum Hypothesis.
 * * KEY AGENTS:
 * - The Constructible Set (Subject): A powerless agent whose existence is 
 * strictly defined by previously constructed stages (The "L-Hierarchy").
 * - The Model Theorist (Institutional): An agent who uses Inner Models as 
 * a "Rope" to prove consistency results and map the "Consistency Strength" 
 * of large cardinals.
 * - The Pluralist Realist (Analytical): An observer for whom a specific 
 * inner model acts as a "Snare," as it "strangles" the rich variety of 
 * the full universe (V) to enforce a rigid, predictable structure.
 * * NARRATIVE ARC:
 * Inner Model Theory represents the "Mountain" of minimal, canonical reality 
 * within set theory. For the logician, it is a "Rope"—a functional 
 * coordination tool that allows for the "bootstrapping" of consistency. 
 * However, for those who believe the universe should be "rich" (e.g., the 
 * Axiom of Determinacy or large cardinals), the rigid constraints of $V=L$ 
 * act as a "Snare," extracting the "Fullness of V" (extraction) and 
 * "choking" the possibility of higher-order symmetry.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for structural anchor extraction
narrative_ontology:interval(inner_model_era, 1938, 2026).
narrative_ontology:constraint_claim(inner_model_theory_constraints, mountain).

% Base extractiveness score (0.0-1.0)
% Rationale: 0.3. Inner models "extract" the combinatorial richness of the 
% full universe (V) to provide a "clean" sub-model. This imposes a 
% "complexity tax" by forcing researchers to differentiate between what 
% is true in "L" vs what is true in "V."
domain_priors:base_extractiveness(inner_model_theory_constraints, 0.3).

% Suppression score (0.0-1.0)
% Rationale: 0.5. Historically, $V=L$ suppressed the visibility of 
% non-constructible sets, rendering them "pathological" or "non-existent" 
% until forcing and large cardinals revealed the broader landscape.
domain_priors:suppression_score(inner_model_theory_constraints, 0.5).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(inner_model_theory_constraints, extractiveness, 0.3).
narrative_ontology:constraint_metric(inner_model_theory_constraints, suppression_requirement, 0.5).

% Enforcement: Emerges naturally from the definition of ordinal-indexed construction.
domain_priors:emerges_naturally(inner_model_theory_constraints).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(inner_model_theory_constraints, consistency_proof_developers).
constraint_beneficiary(inner_model_theory_constraints, fine_structure_theorists).
constraint_victim(inner_model_theory_constraints, large_cardinal_pluralists).
constraint_victim(inner_model_theory_constraints, geometric_intuition).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE CONSTRUCTIBLE SET (x ∈ L) - Mountain
   --------------------------------------------------------------------------
   
   WHO: powerless - The set cannot choose to be non-constructible.
   WHEN: immediate - Its membership is fixed at the ordinal stage $\alpha+1$.
   WHERE: trapped - Bound within the hierarchy of $L$.
   SCOPE: local - Immediate definition via first-order logic.
   
   WHY THIS CLASSIFICATION:
   For a set within $L$, the constraints of Inner Model Theory are a 
   Mountain. It exists only because it was "named" by a formula at a 
   specific level. It cannot "exit" to the outer universe (V) if $V=L$ 
   is the law. Its identity is an unyielding geometric fact.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    inner_model_theory_constraints,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE CONSISTENCY RESEARCHER - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional - Power to design proofs and define the working model.
   WHEN: biographical - Spanning the effort to prove the consistency of AC/CH.
   WHERE: mobile - Can choose to work in L, L[U], or Core Models.
   SCOPE: global - Universal foundation for consistency results.
   
   WHY THIS CLASSIFICATION:
   For the researcher, the Inner Model is a "Rope"—a functional coordination 
   mechanism. It allows them to coordinate a "standard of achievement" 
   (e.g., proving $Con(ZFC)$ implies $Con(ZFC+CH)$), pulling the 
   field toward a stable understanding of relative consistency.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    inner_model_theory_constraints,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE LARGE CARDINAL PROPONENT - Snare
   --------------------------------------------------------------------------
   
   WHO: individual_moderate - Has the intelligence to define but is bound by L's limit.
   WHEN: civilizational - Seeking a "Large" universe where Measurable Cardinals exist.
   WHERE: constrained - $V=L$ is a "Snare" because it denies the existence of $0^{\#}$.
   SCOPE: global - Universal limit on set-theoretic ontology.
   
   WHY THIS CLASSIFICATION:
   For those seeking a "Large" universe, the constraint of $V=L$ is a "Snare." 
   It "strangles" the possibility of Measurable Cardinals (Scott's Theorem). 
   It extracts the "Richness of V" (extraction), "choking" the 
   growth of the transfinite to maintain a "thin" constructible line.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    inner_model_theory_constraints,
    snare,
    context(
        agent_power(individual_moderate),
        time_horizon(civilizational),
        exit_options(constrained),
        spatial_scope(global)
    )
) :- 
    domain_priors:base_extractiveness(inner_model_theory_constraints, E),
    E >= 0.25,
    !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(inner_model_theory_tests).

test(multi_perspective_variance) :-
    % Set -> Mountain
    constraint_indexing:constraint_classification(inner_model_theory_constraints, Type1, context(powerless, immediate, trapped, local)),
    % Researcher -> Rope
    constraint_indexing:constraint_classification(inner_model_theory_constraints, Type2, context(institutional, biographical, mobile, global)),
    Type1 \= Type2.

test(ontological_extraction_penalty) :-
    % Pluralists feel the 0.3 extraction of "Richness" as a Snare.
    Context = context(individual_moderate, civilizational, constrained, global),
    constraint_indexing:extractiveness_for_agent(inner_model_theory_constraints, Context, Score),
    Score >= 0.25.

test(natural_emergence) :-
    domain_priors:emerges_naturally(inner_model_theory_constraints).

:- end_tests(inner_model_theory_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * * 1. BASE EXTRACTIVENESS (0.3):
 * Reasoning: Inner models are "lossy" compressions of V. They extract 
 * the potential for non-constructible variety to provide a safe, 
 * consistent sub-universe.
 * * 2. CLASSIFICATION RATIONALE:
 * Captured the transition from the "Mountain" of Gödel's L to the 
 * "Snare" it became for those discovering the "Large Cardinal" hierarchy.
 */

% OMEGA IDENTIFICATION
omega_variable(
    inner_model_limit,
    "Does there exist an inner model for a Supercompact Cardinal (Mountain) or is it a logical Scaffold?",
    resolution_mechanism("Development of the 'Ultimate L' conjecture or higher core model theories."),
    impact("If Mountain: We can reconcile Large Cardinals with Inner Models. If Snare: The two remain forever in conflict."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Forcing (The "Rich" Universe)
 * Viability: Creating new sets that do not belong to L.
 * Suppression: Actively suppressed within the "Axiom of Constructibility" ($V=L$) 
 * framework to ensure a "Mountain" of decidability.
 * * ALTERNATIVE 2: The Core Model (K)
 * Viability: A "Rope" designed to accommodate larger cardinals while 
 * keeping the "L-like" structure.
 * * CONCLUSION:
 * The existence of Forcing (Alternative 1) is what turns the $V=L$ 
 * "Mountain" into a "Snare" for modern set theorists.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS CONSTRAINT:
 * 1. Load: ?- [constraint_inner_models].
 * 2. Multi-perspective: ?- multi_index_report(inner_model_theory_constraints).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: innovators_dilemma
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_innovators_dilemma, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:coordination_type/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: innovators_dilemma
 * human_readable: The Innovator's Dilemma
 * domain: economic/technological
 * * SUMMARY:
 * The Innovator's Dilemma describes how successful companies, by rationally
 * listening to their best customers and investing in high-margin products,
 * create a structural inability to respond to "disruptive" technologies that
 * start in low-margin, niche markets. It is a structural conflict between
 * sustaining current success and embracing future viability.
 * * KEY AGENTS:
 * - Incumbent Manager: Subject (Powerless), trapped by internal resource allocation processes.
 * - Institutional Investor: Beneficiary (Institutional), arbitrages between incumbents and disruptors.
 * - Market Historian: Auditor (Analytical), observes the pattern of market disruption.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(innovators_dilemma, 0.55). % Extracts future viability from the incumbent firm.
domain_priors:suppression_score(innovators_dilemma, 0.70).   % Resource allocation processes actively suppress low-margin disruptive projects.
domain_priors:theater_ratio(innovators_dilemma, 0.10).       % The processes are highly functional, not theatrical.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(innovators_dilemma, extractiveness, 0.55).
narrative_ontology:constraint_metric(innovators_dilemma, suppression_requirement, 0.70).
narrative_ontology:constraint_metric(innovators_dilemma, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% The internal logic of the firm frames its resource allocation as rational coordination.
narrative_ontology:constraint_claim(innovators_dilemma, coordination).

% Binary flags
% The dilemma is enforced by the firm's own rational processes.
domain_priors:requires_active_enforcement(innovators_dilemma).

% Structural property derivation hooks for Tangled Rope:
narrative_ontology:constraint_beneficiary(innovators_dilemma, disruptive_entrants).
narrative_ontology:constraint_victim(innovators_dilemma, incumbent_firms).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   ========================================================================== */

% PERSPECTIVE 1: THE INCUMBENT MANAGER (SNARE)
% Trapped by KPIs and resource allocation systems that prevent investment in
% the firm's long-term survival.
constraint_indexing:constraint_classification(innovators_dilemma, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE INSTITUTIONAL INVESTOR (ROPE)
% Views the dilemma as a coordination mechanism for capital efficiency,
% demanding high returns from incumbents while funding disruptors separately.
constraint_indexing:constraint_classification(innovators_dilemma, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Recognizes the dilemma as a hybrid system: it has a genuine coordination
% function (focusing resources) but also produces asymmetric extraction
% (transferring market value from incumbents to disruptors) and requires
% active enforcement (budgeting processes that kill innovation).
constraint_indexing:constraint_classification(innovators_dilemma, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(innovators_dilemma_tests).

test(perspectival_gap) :-
    % Verify the manager (Snare) and investor (Rope) have different views.
    constraint_indexing:constraint_classification(innovators_dilemma, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(innovators_dilemma, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    assertion(TypePowerless == snare),
    assertion(TypeInstitutional == rope),
    TypePowerless \= TypeInstitutional.

test(analytical_classification_is_tangled_rope) :-
    % The analytical view must resolve the conflict as a Tangled Rope.
    constraint_indexing:constraint_classification(innovators_dilemma, tangled_rope, context(agent_power(analytical), _, _, _)).

test(threshold_validation_for_tangled_rope) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(innovators_dilemma, ExtMetricName, E),
    assertion(E >= 0.46).

:- end_tests(innovators_dilemma_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The Innovator's Dilemma is a canonical example of a Tangled Rope. It is not a
 * Mountain (a law of physics), but a constructed feature of a specific type of
 * market economy. Its internal logic is presented as pure coordination (a Rope
 * for focusing on profitable customers), but this coordination produces a
 * highly predictable, asymmetric extraction of value from incumbents to new
 * entrants, making it a Snare for those trapped within the incumbent firm.
 *
 * The Perspectival Gap is stark:
 * - The Manager (powerless, trapped) experiences the system as a Snare that
 *   extracts their agency and the firm's future.
 * - The Investor (institutional, mobile) uses the system as a Rope to coordinate
 *   capital, extracting returns from the incumbent's focus while simultaneously
 *   funding the disruptor that will replace it.
 * - The Analyst sees both functions and classifies it as a Tangled Rope.
 *
 * * MANDATROPHY ANALYSIS:
 * Classifying this as a Tangled Rope prevents the system from making two key
 * errors. It avoids mislabeling it as a Mountain, which would imply the outcome
 * is inevitable and unchangeable. It also avoids reducing it to a simple Snare,
 * which would ignore the very real, rational, and initially beneficial
 * coordination function that makes the dilemma so difficult to solve. The
 * Tangled Rope classification correctly identifies that the mechanism of
 * coordination is also the mechanism of extraction.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_innovators_dilemma,
    'Is the dilemma a fundamental feature of shareholder capitalism, or a contingent artifact of 20th-century management theory?',
    'Comparative analysis of disruption patterns in non-shareholder economic models (e.g., state-owned enterprises, large cooperatives).',
    'If fundamental (Mountain-like), then solutions are limited to managing decline. If contingent (Tangled Rope), then governance structures can be redesigned to solve it.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(innovators_dilemma, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% The dilemma's extractive force intensifies as a firm becomes more successful
% and its processes become more rigid. Theater ratio remains low as the
% processes are genuinely efficient at their stated (sustaining) goals.
%
% Theater ratio over time (stable):
narrative_ontology:measurement(innovators_dilemma_tr_t0, innovators_dilemma, theater_ratio, 0, 0.10).
narrative_ontology:measurement(innovators_dilemma_tr_t5, innovators_dilemma, theater_ratio, 5, 0.10).
narrative_ontology:measurement(innovators_dilemma_tr_t10, innovators_dilemma, theater_ratio, 10, 0.10).

% Extraction over time (intensifying):
narrative_ontology:measurement(innovators_dilemma_ex_t0, innovators_dilemma, base_extractiveness, 0, 0.48).
narrative_ontology:measurement(innovators_dilemma_ex_t5, innovators_dilemma, base_extractiveness, 5, 0.52).
narrative_ontology:measurement(innovators_dilemma_ex_t10, innovators_dilemma, base_extractiveness, 10, 0.55).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The dilemma's coordination mechanism is the firm's resource allocation process.
narrative_ontology:coordination_type(innovators_dilemma, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: institutional_mutation_domestication
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-27
% ============================================================================

:- module(constraint_institutional_mutation_domestication, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: institutional_mutation_domestication
 * human_readable: The Jedi Bureaucratic Capture
 * domain: political/social
 * * SUMMARY:
 * This constraint represents the process by which a high-agency "mutation" (the Jedi)
 * is integrated into a stable bureaucratic structure (the Galactic Republic). It functions
 * as a selective pressure that prioritizes institutional compliance over the
 * adaptive capacity (Force-sensitivity) that originally justified the Jedi's role.
 * The system provides genuine coordination (peacekeeping) but extracts the Jedi's
 * autonomy and ultimately their existence to maintain bureaucratic stability.
 * * KEY AGENTS:
 * - The Padawan (e.g., young Anakin): Subject (Powerless)
 * - The Jedi Council (e.g., Mace Windu): Beneficiary (Institutional)
 * - The System Auditor (e.g., Palpatine, or an external analyst): Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(institutional_mutation_domestication, 0.70). % Mountain <= 0.15, Rope <= 0.15, Snare >= 0.46
domain_priors:suppression_score(institutional_mutation_domestication, 0.80).   % Structural property (raw, unscaled).
domain_priors:theater_ratio(institutional_mutation_domestication, 0.40).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(institutional_mutation_domestication, extractiveness, 0.70).
narrative_ontology:constraint_metric(institutional_mutation_domestication, suppression_requirement, 0.80).
narrative_ontology:constraint_metric(institutional_mutation_domestication, theater_ratio, 0.40).

% Constraint self-claim (what does the constraint claim to be?)
narrative_ontology:constraint_claim(institutional_mutation_domestication, coordination).

% Binary flags
domain_priors:requires_active_enforcement(institutional_mutation_domestication). % Required for Tangled Rope

% Structural property derivation hooks for Tangled Rope:
narrative_ontology:constraint_beneficiary(institutional_mutation_domestication, galactic_republic_bureaucracy).
narrative_ontology:constraint_victim(institutional_mutation_domestication, force_sensitive_innovators).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For a young Padawan, the Jedi Order is an inescapable trap. They are taken as
% children, their identity is tied to the institution, and deviation is punished.
% The high extraction (lifelong service) and suppression (no alternatives)
% are felt directly.
constraint_indexing:constraint_classification(institutional_mutation_domestication, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The Jedi Council, as institutional actors, view their rules and allegiance to
% the Senate as a necessary coordination mechanism (Rope) for galactic peace.
% They do not perceive the extraction, seeing it as willing service.
constraint_indexing:constraint_classification(institutional_mutation_domestication, rope,
    context(agent_power(institutional),
            time_horizon(historical),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% An analyst sees both the genuine coordination function (peacekeeping) and the
% asymmetric extraction (consuming the Jedi's autonomy and potential). The need
% for active enforcement confirms it is not pure coordination. It is a Tangled Rope.
constraint_indexing:constraint_classification(institutional_mutation_domestication, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(institutional_mutation_domestication_tests).

test(perspectival_gap_council_vs_padawan) :-
    constraint_indexing:constraint_classification(institutional_mutation_domestication, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(institutional_mutation_domestication, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    assertion(TypePowerless == snare),
    assertion(TypeInstitutional == rope),
    assertion(TypePowerless \= TypeInstitutional).

test(analytical_resolution_is_tangled_rope) :-
    constraint_indexing:constraint_classification(institutional_mutation_domestication, TypeAnalytical, context(agent_power(analytical), _, _, _)),
    assertion(TypeAnalytical == tangled_rope).

test(tangled_rope_structural_properties_present) :-
    narrative_ontology:constraint_beneficiary(institutional_mutation_domestication, _),
    narrative_ontology:constraint_victim(institutional_mutation_domestication, _),
    domain_priors:requires_active_enforcement(institutional_mutation_domestication).

:- end_tests(institutional_mutation_domestication_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect a system that began with a coordination purpose (Jedi as
 * peacekeepers) but evolved into an extractive one. The base extractiveness (0.70)
 * represents the Republic consuming the Jedi's adaptive capacity for its own
 * bureaucratic stability. The high suppression (0.80) reflects the active
 * discouragement of alternative Force traditions (e.g., Grey Jedi).
 *
 * The Perspectival Gap is stark: the Council (institutional) sees a Rope, essential
 * for order. The Padawan (powerless) experiences a Snare, an inescapable fate.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The analytical classification as a Tangled Rope is critical. A simple Snare
 * classification would miss the genuine, if decaying, coordination function the
 * Jedi provided. This prevents the system from mislabeling a complex, co-opted
 * institution as pure, malicious extraction. It correctly identifies the hybrid
 * nature of the constraint.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_institutional_mutation_domestication,
    'Was the Jedi Order''s decline an inevitable result of its biological premise (midichlorians creating a rigid caste) or a contingent outcome of its political capture by the Senate?',
    'Analysis of other systems where high-skill groups were either integrated or remained autonomous, comparing their long-term adaptability.',
    'If inevitable (Mountain-like), then reform was impossible. If contingent (Tangled Rope), then alternative structures could have saved both the Jedi and the Republic.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(institutional_mutation_domestication, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This data models the gradual decay of the Jedi Order into a tool of the
% Republic. Extraction and performative theater increase as its original
% purpose is subverted.

% Theater ratio over time (metric_substitution):
narrative_ontology:measurement(imd_tr_t0, institutional_mutation_domestication, theater_ratio, 0, 0.10).
narrative_ontology:measurement(imd_tr_t5, institutional_mutation_domestication, theater_ratio, 5, 0.25).
narrative_ontology:measurement(imd_tr_t10, institutional_mutation_domestication, theater_ratio, 10, 0.40).

% Extraction over time (extraction_accumulation):
narrative_ontology:measurement(imd_ex_t0, institutional_mutation_domestication, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(imd_ex_t5, institutional_mutation_domestication, base_extractiveness, 5, 0.60).
narrative_ontology:measurement(imd_ex_t10, institutional_mutation_domestication, base_extractiveness, 10, 0.70).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The Jedi Order's primary function for the Republic was as a peacekeeping force.
narrative_ontology:coordination_type(institutional_mutation_domestication, enforcement_mechanism).

% The decay of the Jedi Order is structurally coupled with rising corruption
% in the political body it serves.
narrative_ontology:affects_constraint(institutional_mutation_domestication, senate_corruption).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: institutional_trust_decay
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-23
% ============================================================================

:- module(constraint_institutional_trust_decay, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: institutional_trust_decay
 * human_readable: The Legitimacy Void
 * domain: social
 * * SUMMARY:
 * A systemic condition where the shared belief in institutional competence and
 * integrity evaporates. This transforms social "Ropes" into perceived "Snares,"
 * as coordination becomes indistinguishable from coercion. The institution's
 * actions become performative, maintaining the appearance of function while
 * the underlying social contract has failed.
 * * KEY AGENTS:
 * - The Dissident (General Populace): Subject (Powerless) - Views all official data as a predatory trap.
 * - The Press Secretary (Institutional Actors): Beneficiary (Institutional) - Managing the theatrical "Piton" of authority.
 * - The Sociometrician: Auditor (Analytical) - Quantifying the gap between signal and belief.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(institutional_trust_decay, 0.68). % High: The cost of non-cooperation extracts social capital.
domain_priors:suppression_score(institutional_trust_decay, 0.55).   % High: Lack of trusted alternative institutions.
domain_priors:theater_ratio(institutional_trust_decay, 0.88).       % Extremely High: Indicators of a Piton status.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(institutional_trust_decay, extractiveness, 0.68).
narrative_ontology:constraint_metric(institutional_trust_decay, suppression_requirement, 0.55).
narrative_ontology:constraint_metric(institutional_trust_decay, theater_ratio, 0.88).

% Constraint self-claim (what does the constraint claim to be?)
% The institution claims its structures are for coordination, hiding the decay.
narrative_ontology:constraint_claim(institutional_trust_decay, coordination).

% Binary flags
domain_priors:requires_active_enforcement(institutional_trust_decay).

% Structural property derivation hooks (required for high extraction)
narrative_ontology:constraint_beneficiary(institutional_trust_decay, institutional_actors).
narrative_ontology:constraint_victim(institutional_trust_decay, general_populace).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The individual feels trapped in a system that no longer yields a ROI on trust.
constraint_indexing:constraint_classification(institutional_trust_decay, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The institution maintains that the structures are still essential coordination mechanisms.
constraint_indexing:constraint_classification(institutional_trust_decay, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (PITON)
% Detection of "Piton" status: high theater_ratio indicates inert structures.
constraint_indexing:constraint_classification(institutional_trust_decay, piton,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))) :-
    domain_priors:theater_ratio(institutional_trust_decay, TR), TR >= 0.70.

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(institutional_trust_decay_tests).

test(perspectival_gap) :-
    % Verify variance: Snare for the subject, Rope for the institution.
    constraint_indexing:constraint_classification(institutional_trust_decay, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(institutional_trust_decay, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(piton_analysis) :-
    % Verify that the analytical observer detects a Piton due to high theater_ratio.
    constraint_indexing:constraint_classification(institutional_trust_decay, piton, context(agent_power(analytical), _, _, _)).

test(threshold_validation) :-
    % Verify the constraint meets the high-extraction threshold.
    narrative_ontology:constraint_metric(institutional_trust_decay, extractiveness, E),
    E >= 0.46.

:- end_tests(institutional_trust_decay_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * Base extractiveness (0.68) captures the "trust tax" where transactions
 * require expensive verification instead of low-cost social capital. Suppression
 * (0.55) reflects the difficulty of establishing alternative, trusted institutions.
 * * [RESOLVED MANDATROPHY]
 * The Mandatrophy is resolved by the high Theater Ratio (0.88). The system
 * identifies that while the institution acts as if it is a "Rope," it is
 * functionally a "Piton" kept alive by administrative inertia and performative
 * acts of governance. The analytical observer correctly classifies it as a Piton,
 * preventing a misclassification as a functional Snare or Tangled Rope.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_institutional_trust_decay,
    'Can trust be restored via reform (Scaffold), or is the decay a physical Mountain of entropy?',
    'Historical comparison of reformist vs. revolutionary outcomes in trust-depleted states.',
    'If reform: Transition to Scaffold; If entropy: Descent into Snare-totalitarianism.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(institutional_trust_decay, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data models the decay of trust over the interval. Initially, the
% institution was more functional (lower extraction, lower theater), but it
% degraded over time into a performative shell.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(itd_tr_t0, institutional_trust_decay, theater_ratio, 0, 0.22).
narrative_ontology:measurement(itd_tr_t5, institutional_trust_decay, theater_ratio, 5, 0.65).
narrative_ontology:measurement(itd_tr_t10, institutional_trust_decay, theater_ratio, 10, 0.88).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(itd_ex_t0, institutional_trust_decay, base_extractiveness, 0, 0.31).
narrative_ontology:measurement(itd_ex_t5, institutional_trust_decay, base_extractiveness, 5, 0.54).
narrative_ontology:measurement(itd_ex_t10, institutional_trust_decay, base_extractiveness, 10, 0.68).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The constraint represents the decay of what was once an enforcement mechanism
% for social contracts.
narrative_ontology:coordination_type(institutional_trust_decay, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: insult_wisdom_training
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-05-21
% Status: [RESOLVED MANDATROPHY]
% ============================================================================

:- module(constraint_insult_wisdom_training, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:coordination_type/2.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: insult_wisdom_training
 * human_readable: The Odd Assignment (Paying for Insults)
 * domain: religious/social/philosophical
 * * SUMMARY:
 * A disciple is commanded by his Master to pay anyone who insults him for three years as a prerequisite for wisdom. This artificial constraint forces a radical decoupling of ego from social feedback, transforming a galling extraction into a state of "free" resilience where insults no longer have coercive power. The high extraction is justified by its pedagogical function, which is only apparent over a longer time horizon.
 * * KEY AGENTS:
 * - The Disciple: Subject (Powerless) who undergoes the trial.
 * - The Master: Beneficiary (Institutional) who designs the trial as a tool.
 * - Analytical Observer: Auditor who assesses the structure of the trial.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(insult_wisdom_training, 0.75). % High extraction: financial and emotional cost.
domain_priors:suppression_score(insult_wisdom_training, 0.50).   % Suppresses natural self-defense instinct.
domain_priors:theater_ratio(insult_wisdom_training, 0.05).       % Highly functional, not performative.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(insult_wisdom_training, extractiveness, 0.75).
narrative_ontology:constraint_metric(insult_wisdom_training, suppression_requirement, 0.50).
narrative_ontology:constraint_metric(insult_wisdom_training, theater_ratio, 0.05).

% Constraint self-claim (what does the constraint claim to be?)
% It is a constructed pedagogical tool, not a natural law.
narrative_ontology:constraint_claim(insult_wisdom_training, constructed).

% Binary flags
domain_priors:requires_active_enforcement(insult_wisdom_training). % The Master's command must be obeyed.

% Structural property derivation hooks:
% The disciple's future self (wisdom) is the beneficiary.
narrative_ontology:constraint_beneficiary(insult_wisdom_training, disciple_future_self).
% The disciple's present self (ego, finances) is the victim.
narrative_ontology:constraint_victim(insult_wisdom_training, disciple_present_self).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE DISCIPLE (DURING THE TRIAL)
% From an immediate, trapped perspective, the constant extraction of money and
% dignity feels like a predatory trap with no escape.
constraint_indexing:constraint_classification(insult_wisdom_training, snare,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE MASTER (THE ARCHITECT/BENEFICIARY)
% From the institutional perspective of the teacher, the constraint is a
% functional tool (a Rope) for achieving a specific outcome. The high
% extraction is seen as a necessary cost for the benefit it produces.
% The institutional power modifier π(-0.2) makes effective extraction negative.
constraint_indexing:constraint_classification(insult_wisdom_training, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(analytical),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (POST-HOC)
% An analyst sees both the genuine coordination function (recalibrating the
% ego) and the asymmetric extraction. It requires active enforcement and has
% clear beneficiaries and victims. This is the definition of a Tangled Rope.
constraint_indexing:constraint_classification(insult_wisdom_training, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(insult_wisdom_training_tests).

test(perspectival_gap_snare_to_rope) :-
    % Verify the key perspectival gap between the subject and the beneficiary.
    constraint_indexing:constraint_classification(insult_wisdom_training, snare,
        context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(insult_wisdom_training, rope,
        context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(insult_wisdom_training, tangled_rope,
        context(agent_power(analytical), _, _, _)).

test(threshold_validation_high_extraction) :-
    % Verify the base extractiveness is in the high-extraction range for a Snare/Tangled Rope.
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(insult_wisdom_training, ExtMetricName, E),
    E >= 0.46.

:- end_tests(insult_wisdom_training_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The core of this story is the transformation of a constraint's perceived nature
 * through time and perspective. The base extractiveness is set high (0.75) to
 * reflect the literal, sustained cost (financial and emotional) to the disciple.
 *
 * The Perspectival Gap is stark:
 * - For the 'powerless' disciple in the 'immediate' timeframe, it is an inescapable Snare.
 * - For the 'institutional' Master, it is a functional Rope—a tool for producing wisdom.
 * - For the 'analytical' observer, its dual nature (coordination + extraction) makes it a Tangled Rope.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED]
 * The high extraction (0.75) poses a risk of being a Mandatrophy (a purely
 * extractive system with no function). This is resolved by the time horizon.
 * The constraint's function is not immediate gratification but long-term
 * transformation. The final scene, where the disciple laughs at a "free"
 * insult, proves the pedagogical function was real. The Snare was, in fact,
 * a component of a larger, functional Tangled Rope designed for a specific
 * purpose. The system correctly identifies this by classifying it differently
 * across time horizons and power levels.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_insult_wisdom_training,
    'Is the three-year trial a functional necessity for ego-liquidation, or an arbitrary hazing ritual by the Master?',
    'Comparative analysis of pedagogical outcomes from this method versus less extractive methods.',
    'If necessity, it is a harsh but valid Tangled Rope. If arbitrary, it is a pure Snare disguised as pedagogy.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(insult_wisdom_training, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This is a high-extraction constraint (E=0.75), requiring temporal data.
% The constraint itself is static during the three-year trial; the disciple's
% perception of it changes. Therefore, the base metrics are constant.
%
% Theater ratio over time (consistently low and functional):
narrative_ontology:measurement(iwt_tr_t0, insult_wisdom_training, theater_ratio, 0, 0.05).
narrative_ontology:measurement(iwt_tr_t5, insult_wisdom_training, theater_ratio, 5, 0.05).
narrative_ontology:measurement(iwt_tr_t10, insult_wisdom_training, theater_ratio, 10, 0.05).

% Extraction over time (consistently high and costly):
narrative_ontology:measurement(iwt_ex_t0, insult_wisdom_training, base_extractiveness, 0, 0.75).
narrative_ontology:measurement(iwt_ex_t5, insult_wisdom_training, base_extractiveness, 5, 0.75).
narrative_ontology:measurement(iwt_ex_t10, insult_wisdom_training, base_extractiveness, 10, 0.75).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The constraint functions as a tool to re-allocate the disciple's internal
% resources (attention, emotional energy) away from ego-defense.
narrative_ontology:coordination_type(insult_wisdom_training, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: integrated_digital_governance_stack
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-27
% ============================================================================

:- module(constraint_integrated_digital_governance_stack, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: integrated_digital_governance_stack
 * human_readable: The Integrated Digital Governance Stack
 * domain: technological/political
 * * SUMMARY:
 * This meta-constraint represents the convergence of AI Surveillance (Sensor), 
 * Digital Credentialing (Authentication), Social Credit (Logic), and Central Bank
 * Digital Currencies (Execution). It functions as a single, unified "operating 
 * system" for societal participation, where actions in one domain have immediate
 * consequences in all others.
 * * KEY AGENTS:
 * - Individual Autonomy / Informal Actors: Subject (Powerless)
 * - Sovereign Logic Architects / Institutional Hubs: Beneficiary (Institutional)
 * - Systems Theorist: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
% Rationale (Extraction): Near-total capture of agentic surplus. The stack enables precise 
% extraction of behavioral data, financial capital, and social compliance.
domain_priors:base_extractiveness(integrated_digital_governance_stack, 0.90).
% Rationale (Suppression): Absolute suppression of non-digital alternatives ensures the 
% exit options for the individual approach zero. Participation is non-optional.
domain_priors:suppression_score(integrated_digital_governance_stack, 0.95).
% Rationale (Theater): The system is brutally functional; there is little to no
% performative activity. Its purpose is direct control and extraction.
domain_priors:theater_ratio(integrated_digital_governance_stack, 0.05).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(integrated_digital_governance_stack, extractiveness, 0.90).
narrative_ontology:constraint_metric(integrated_digital_governance_stack, suppression_requirement, 0.95).
narrative_ontology:constraint_metric(integrated_digital_governance_stack, theater_ratio, 0.05).

% Constraint self-claim: It is presented as a necessary coordination mechanism for a complex global society.
narrative_ontology:constraint_claim(integrated_digital_governance_stack, coordination).

% Binary flags
% Enforcement emerges from the technological interoperability of sub-constraints.
domain_priors:requires_active_enforcement(integrated_digital_governance_stack).

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(integrated_digital_governance_stack, sovereign_logic_architects).
narrative_ontology:constraint_victim(integrated_digital_governance_stack, individual_autonomy).
narrative_ontology:constraint_victim(integrated_digital_governance_stack, informal_economic_actors).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For a flagged outlier or anyone operating in the informal economy, the stack is
% the ultimate trap. A low social score (Logic) can instantly freeze assets (Execution)
% and revoke credentials (Authentication).
% χ = 0.90 * 1.5 (powerless) * 1.0 (national) = 1.35 (Snare)
constraint_indexing:constraint_classification(integrated_digital_governance_stack, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For the institutional architects, the stack is the perfect coordination tool. It
% provides frictionless governance, total information awareness, and efficient
% resource allocation, appearing as pure infrastructure.
% χ = 0.90 * -0.2 (institutional) * 1.2 (global) = -0.216 (Rope)
constraint_indexing:constraint_classification(integrated_digital_governance_stack, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees both the powerful coordination function (beneficiaries exist)
% and the severe asymmetric extraction (victims exist). The system requires
% active enforcement to maintain its integrity. This combination of high-efficiency
% coordination and high-coercion extraction is the definition of a Tangled Rope.
% χ = 0.90 * 1.15 (analytical) * 1.2 (global) = 1.242 (Tangled Rope)
constraint_indexing:constraint_classification(integrated_digital_governance_stack, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(integrated_digital_governance_stack_tests).

test(perspectival_gap) :-
    % Verify the gap between the subject (Snare) and beneficiary (Rope).
    constraint_indexing:constraint_classification(integrated_digital_governance_stack, TypePowerless,
        context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(integrated_digital_governance_stack, TypeInstitutional,
        context(agent_power(institutional), _, _, _)),
    TypePowerless == snare,
    TypeInstitutional == rope,
    TypePowerless \= TypeInstitutional.

test(analytical_classification_is_tangled_rope) :-
    % Verify the analytical observer correctly identifies the Tangled Rope structure.
    constraint_indexing:constraint_classification(integrated_digital_governance_stack, TypeAnalytical,
        context(agent_power(analytical), _, _, _)),
    TypeAnalytical == tangled_rope.

test(threshold_validation_high_extraction) :-
    % Verify the extreme extraction score is correctly registered.
    narrative_ontology:constraint_metric(integrated_digital_governance_stack, extractiveness, E),
    E >= 0.90.

:- end_tests(integrated_digital_governance_stack_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This constraint is a canonical example of a Tangled Rope at a civilizational
 * scale. Its base extraction (0.90) and suppression (0.95) are extremely high,
 * reflecting its totalizing nature.
 *
 * The Perspectival Gap is maximal:
 * - To the 'powerless' victim, it is an inescapable 'snare' where any deviation
 *   results in systemic exclusion.
 * - To the 'institutional' architect, the negative effective extraction (-0.216)
 *   means it feels like it *produces* order and stability, making it a perfect 'rope'.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * A simpler model might classify this as a pure Snare due to the 0.90 extraction.
 * However, the Tangled Rope classification is crucial because it acknowledges the
 * system's undeniable and powerful *coordination function* for its beneficiaries.
 * The system isn't just predatory; it's a new form of hyper-efficient, coercive
 * order. The Mandatrophy is resolved by recognizing that the system is only
 * extractive to those it is designed to control or exclude, while being purely
 * coordinative for its designers.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_integrated_digital_governance_stack,
    'Will the stack eventually automate the "Architect" role, turning them from beneficiaries into subjects?',
    'Monitor the degree of AI-driven policy generation and overrides of human-defined parameters within the stack.',
    'If true, the constraint evolves from a Tangled Rope into a Mountain for all human agents, including former architects. If false, it remains a Tangled Rope.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(integrated_digital_governance_stack, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This constraint likely emerged from initially separate systems that were later
% integrated, with extraction capabilities increasing as interoperability grew.
% Theater ratio remains low throughout, as it is a functional system.

% Theater ratio over time (metric_substitution detection):
narrative_ontology:measurement(idgs_tr_t0, integrated_digital_governance_stack, theater_ratio, 0, 0.05).
narrative_ontology:measurement(idgs_tr_t5, integrated_digital_governance_stack, theater_ratio, 5, 0.05).
narrative_ontology:measurement(idgs_tr_t10, integrated_digital_governance_stack, theater_ratio, 10, 0.05).

% Extraction over time (extraction_accumulation detection):
narrative_ontology:measurement(idgs_ex_t0, integrated_digital_governance_stack, base_extractiveness, 0, 0.60).
narrative_ontology:measurement(idgs_ex_t5, integrated_digital_governance_stack, base_extractiveness, 5, 0.80).
narrative_ontology:measurement(idgs_ex_t10, integrated_digital_governance_stack, base_extractiveness, 10, 0.90).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type: This is the ultimate form of global infrastructure.
narrative_ontology:coordination_type(integrated_digital_governance_stack, global_infrastructure).

% Network relationships: This meta-constraint integrates and amplifies several sub-constraints.
narrative_ontology:affects_constraint(integrated_digital_governance_stack, ai_surveillance_grid).
narrative_ontology:affects_constraint(integrated_digital_governance_stack, universal_digital_identity).
narrative_ontology:affects_constraint(integrated_digital_governance_stack, social_credit_systems).
narrative_ontology:affects_constraint(integrated_digital_governance_stack, central_bank_digital_currency).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: iran_mandatrophic_collapse
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-16
% ============================================================================

:- module(constraint_iran_mandatrophic_collapse, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: iran_mandatrophic_collapse
 * human_readable: Iranian Mandatrophy (The Water-Economic Choke)
 * domain: political/economic/technological
 * * SUMMARY:
 * Mandatrophy in Iran describes the systemic wasting away of ecological and
 * economic resilience caused by the rigid prioritization of the "Revolutionary
 * Mandate" (regional proxy funding, nuclear ambition, and ideological self-
 * sufficiency) over the organic "margins" of the state (aquifers, currency
 * stability, and social trust). The "Water Mafia"—primarily the IRGC's
 * construction conglomerate Khatam al-Anbiya—has extracted the nation's
 * hydrologic margin through a massive dam-building program, leading to
 * "water bankruptcy" and irreversible land subsidence.
 * * KEY AGENTS:
 * - IRGC Commander: Beneficiary (Institutional); architects of the
 * "Resistance Economy" who profit from the extraction of natural and fiscal margins.
 * - Iranian Citizen: Subject (Powerless); subject to hyperinflation, dry taps,
 * and frequent electricity blackouts.
 * - Environmental Analyst: Auditor (Analytical); observer identifying the
 * "mandatrophic" loop where short-term mandate wins lead to terminal systemic choking.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(iran_mandatrophic_collapse, 0.90). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(iran_mandatrophic_collapse, 0.85).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(iran_mandatrophic_collapse, 0.20).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(iran_mandatrophic_collapse, extractiveness, 0.90).
narrative_ontology:constraint_metric(iran_mandatrophic_collapse, suppression_requirement, 0.85).
narrative_ontology:constraint_metric(iran_mandatrophic_collapse, theater_ratio, 0.20).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
% The regime frames its actions as necessary enforcement for national survival.
narrative_ontology:constraint_claim(iran_mandatrophic_collapse, enforcement).

% Binary flags
domain_priors:requires_active_enforcement(iran_mandatrophic_collapse). % Requires heavy active enforcement (Basij crackdowns, surveillance).

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
narrative_ontology:constraint_beneficiary(iran_mandatrophic_collapse, irgc_khatam_al_anbiya).
narrative_ontology:constraint_beneficiary(iran_mandatrophic_collapse, axis_of_resistance_proxies).
narrative_ontology:constraint_victim(iran_mandatrophic_collapse, iranian_ecological_future).
narrative_ontology:constraint_victim(iran_mandatrophic_collapse, iranian_citizenry).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The citizen experiences the system as a Snare. The regime's "Mandate"
% extracts their water, electricity, and savings, choking their ability to live.
constraint_indexing:constraint_classification(iran_mandatrophic_collapse, snare,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The IRGC views its control as a Rope—a necessary coordination tool to bypass
% international sanctions and maintain state survival against external threats.
constraint_indexing:constraint_classification(iran_mandatrophic_collapse, rope,
    context(agent_power(institutional),
            time_horizon(biographical),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (MOUNTAIN)
% The analyst identifies the current state as a Mountain. The geological damage
% to aquifers is permanent, and "Water Bankruptcy" is an unyielding physical
% limit that no policy can bypass. The Snare has hit a physical wall.
constraint_indexing:constraint_classification(iran_mandatrophic_collapse, mountain,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(iran_mandatrophic_collapse_tests).

test(perspectival_gap_rope_vs_snare) :-
    % Verify the core perspectival gap between the powerless citizen and the institutional beneficiary.
    constraint_indexing:constraint_classification(iran_mandatrophic_collapse, TypePowerless,
        context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(iran_mandatrophic_collapse, TypeInstitutional,
        context(agent_power(institutional), _, _, _)),
    TypePowerless == snare,
    TypeInstitutional == rope,
    TypePowerless \= TypeInstitutional.

test(analytical_view_is_mountain) :-
    % Verify the analytical observer sees the terminal state as a Mountain.
    constraint_indexing:constraint_classification(iran_mandatrophic_collapse, TypeAnalytical,
        context(agent_power(analytical), _, _, _)),
    TypeAnalytical == mountain.

test(threshold_validation_high_extraction) :-
    % Mandatrophy requires extreme extraction of the "margin" (water/capital).
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(iran_mandatrophic_collapse, ExtMetricName, E),
    E >= 0.46.

:- end_tests(iran_mandatrophic_collapse_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect a system in a terminal state. The base extractiveness (0.90)
 * represents the near-total consumption of the nation's ecological and economic
 * margins (water, currency stability) to fund the "Revolutionary Mandate." The
 * suppression score (0.85) reflects the active crushing of alternatives like
 * technocratic water management or diplomatic de-escalation.
 *
 * The Perspectival Gap is profound:
 * - The IRGC (Institutional) sees its control as a Rope, a necessary tool for
 *   coordinating national survival against sanctions and foreign enemies.
 * - The Citizen (Powerless) experiences this as a Snare, where their livelihood
 *   is extracted to fund a mandate from which they derive no benefit.
 * - The Analyst (Analytical) sees the outcome: a Mountain. The long-running Snare
 *   has extracted so much that it has created an irreversible physical limit—
 *   aquifers are permanently destroyed, and the land is sinking. The political
 *   problem has become a geological fact.
 *
 * * MANDATROPHY ANALYSIS:
 * [RESOLVED MANDATROPHY] This case is a classic example of Mandatrophy, where
 * a state's ideological mandate consumes its own physical capacity to exist.
 * The classification as a Mountain from the analytical perspective resolves the
 * ambiguity. While the *mechanism* is a Snare (a constructed policy), its
 * *consequences* have become a Mountain (an unchangeable physical reality).
 * The system correctly identifies that the constraint is no longer a matter of
 * policy choice but of confronting a terminal physical state.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_iran_mandatrophic_collapse,
    'To what degree is the collapse caused by external sanctions versus internal mismanagement?',
    'Comparative analysis of GDP impact from sanctions vs. estimated value lost from water mismanagement and corruption.',
    'If sanctions dominate, the constraint is an external Snare. If mismanagement dominates, it is a self-inflicted Mountain.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(iran_mandatrophic_collapse, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection. This models how the "Resistance
% Economy" began as a coordination mechanism and degenerated into pure extraction.
% Required for high-extraction constraints (base_extractiveness > 0.46).

% Theater ratio over time (low, as the extraction is direct, not performative):
narrative_ontology:measurement(imc_tr_t0, iran_mandatrophic_collapse, theater_ratio, 0, 0.10).
narrative_ontology:measurement(imc_tr_t5, iran_mandatrophic_collapse, theater_ratio, 5, 0.15).
narrative_ontology:measurement(imc_tr_t10, iran_mandatrophic_collapse, theater_ratio, 10, 0.20).

% Extraction over time (shows intensification as margins are depleted):
narrative_ontology:measurement(imc_ex_t0, iran_mandatrophic_collapse, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(imc_ex_t5, iran_mandatrophic_collapse, base_extractiveness, 5, 0.75).
narrative_ontology:measurement(imc_ex_t10, iran_mandatrophic_collapse, base_extractiveness, 10, 0.90).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The "Resistance Economy" is a resource allocation mechanism, albeit a highly extractive one.
narrative_ontology:coordination_type(iran_mandatrophic_collapse, resource_allocation).

% Boltzmann floor override (only if domain knowledge justifies)
% Value must be in [0.0, 1.0]
% narrative_ontology:boltzmann_floor_override(iran_mandatrophic_collapse, 0.0).

% Network relationships (structural influence edges)
% narrative_ontology:affects_constraint(iran_mandatrophic_collapse, some_other_constraint).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: iron_law_of_oligarchy
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-27
% ============================================================================

:- module(constraint_iron_law_of_oligarchy, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: iron_law_of_oligarchy
 * human_readable: The Iron Law of Oligarchy
 * domain: political/social
 * * SUMMARY:
 * Proposed by Robert Michels, this principle states that all complex organizations,
 * regardless of how democratic at the start, eventually develop into oligarchies.
 * The necessity of bureaucracy and specialized knowledge creates a leadership class
 * that prioritizes its own survival over the group's original goals.
 * * KEY AGENTS:
 * - Rank-and-File Member: Subject (Powerless), the original source of power who becomes alienated.
 * - Leadership Elite: Beneficiary (Institutional), benefits from control of the administrative apparatus.
 * - Organizational Scientist: Auditor (Analytical), observes the shift from horizontal ideals to vertical hierarchies.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(iron_law_of_oligarchy, 0.60). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(iron_law_of_oligarchy, 0.60).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(iron_law_of_oligarchy, 0.15).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(iron_law_of_oligarchy, extractiveness, 0.60).
narrative_ontology:constraint_metric(iron_law_of_oligarchy, suppression_requirement, 0.60).
narrative_ontology:constraint_metric(iron_law_of_oligarchy, theater_ratio, 0.15).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(iron_law_of_oligarchy, natural_law).

% Binary flags
domain_priors:requires_active_enforcement(iron_law_of_oligarchy). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(iron_law_of_oligarchy, leadership_elite).
narrative_ontology:constraint_victim(iron_law_of_oligarchy, rank_and_file_members).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE RANK-AND-FILE MEMBER (SNARE)
% The hierarchy that was meant to empower the collective now strangles dissent
% and extracts value (power, status, resources) for the leadership.
% χ = 0.60 * 1.5 (powerless) * 0.8 (local) = 0.72.
constraint_indexing:constraint_classification(iron_law_of_oligarchy, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE LEADERSHIP ELITE (ROPE)
% For the leadership, the hierarchy is a necessary tool for coordination.
% It enables the organization to function effectively at scale.
% χ = 0.60 * -0.2 (institutional) * 1.0 (national) = -0.12.
constraint_indexing:constraint_classification(iron_law_of_oligarchy, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The observer sees both the necessary coordination function (Rope) and the
% asymmetric extraction (Snare). The structure requires active enforcement to
% maintain the leadership's position, making it a canonical Tangled Rope.
% χ = 0.60 * 1.15 (analytical) * 1.2 (global) = 0.828.
constraint_indexing:constraint_classification(iron_law_of_oligarchy, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(iron_law_of_oligarchy_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(iron_law_of_oligarchy, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(iron_law_of_oligarchy, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(analytical_classification_is_tangled_rope) :-
    % Verify the analytical observer correctly identifies the hybrid nature.
    constraint_indexing:constraint_classification(iron_law_of_oligarchy, tangled_rope, context(agent_power(analytical), _, _, _)).

test(threshold_validation) :-
    % Verify base metrics meet the criteria for a high-extraction constraint.
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(iron_law_of_oligarchy, ExtMetricName, E),
    E >= 0.46.

:- end_tests(iron_law_of_oligarchy_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The Iron Law of Oligarchy is a classic example of a constraint that appears
 * as a natural law (Mountain) but functions as a hybrid (Tangled Rope).
 * - Base Extractiveness (0.60): High. The leadership class extracts power, status,
 *   and control over resources from the rank-and-file.
 * - Suppression Score (0.60): High. Alternatives like pure horizontalism are
 *   suppressed by the argument of "technical necessity" and "efficiency" at scale.
 * - Perspectival Gap: The leadership experiences the hierarchy as a pure
 *   coordination tool (Rope), essential for achieving goals. The members, however,
 *   experience it as a Snare, where their power has been co-opted by an entrenched elite.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The system resolves the mandatrophy of this constraint by classifying it as a
 * Tangled Rope from the analytical perspective. A simpler analysis might see only
 * the Snare (from the victim's view) or accept the constraint's claim to be a
 * Mountain/natural law. The Tangled Rope classification correctly identifies that
 * there is a *genuine coordination function* (the organization can do things)
 * that is *coupled with asymmetric extraction* (the leaders benefit disproportionately).
 * This prevents mislabeling a necessary, if flawed, structure as purely predatory.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_iron_law_of_oligarchy,
    'Do modern communication technologies (e.g., DAOs, liquid democracy) fundamentally break the technical necessity of oligarchy, or do they just create new forms of elite capture?',
    'Longitudinal study of large-scale DAOs, tracking Gini coefficients of governance token holdings and decision-making power over a decade.',
    'If technology breaks the law, the constraint is a Scaffold of a low-bandwidth era. If not, it is a deep-seated Mountain of social physics.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(iron_law_of_oligarchy, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data shows the oligarchy hardening over time. Initially, extraction
% is lower as the organization is more aligned with its goals. As the leadership
% class solidifies, extraction and performative bureaucracy increase.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(ilo_tr_t0, iron_law_of_oligarchy, theater_ratio, 0, 0.10).
narrative_ontology:measurement(ilo_tr_t5, iron_law_of_oligarchy, theater_ratio, 5, 0.12).
narrative_ontology:measurement(ilo_tr_t10, iron_law_of_oligarchy, theater_ratio, 10, 0.15).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(ilo_ex_t0, iron_law_of_oligarchy, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(ilo_ex_t5, iron_law_of_oligarchy, base_extractiveness, 5, 0.55).
narrative_ontology:measurement(ilo_ex_t10, iron_law_of_oligarchy, base_extractiveness, 10, 0.60).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The oligarchy's primary function is to direct the organization's assets and efforts.
narrative_ontology:coordination_type(iron_law_of_oligarchy, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: isa_education_scaffold
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_isa_education_scaffold, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: isa_education_scaffold
 * human_readable: Income Share Agreement (ISA) Funding for Education
 * domain: economic/educational
 * * SUMMARY:
 * An Income Share Agreement (ISA) allows students to access education with
 * zero upfront cost in exchange for a fixed percentage of future earnings
 * over a set term. It acts as a Scaffold (temporary support) that enables
 * upward mobility but creates a localized Snare (income extraction) during
 * the repayment window. Its classification depends heavily on the presence
 * and robustness of its sunset clause.
 * * KEY AGENTS:
 * - The Repaying Graduate: Subject (Powerless). Capital-constrained, feels the extraction directly.
 * - The ISA Provider/Funder: Beneficiary (Institutional). Underwrites the risk for a share of the upside.
 * - The Policy Analyst: Auditor (Analytical). Evaluates the structure's net social benefit.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(isa_education_scaffold, 0.42). % Below Snare threshold but high enough to be felt.
domain_priors:suppression_score(isa_education_scaffold, 0.45).   % Moderate: Traditional loans or self-funding are alternatives.
domain_priors:theater_ratio(isa_education_scaffold, 0.20).       % Low: The contract is functional and direct.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(isa_education_scaffold, extractiveness, 0.42).
narrative_ontology:constraint_metric(isa_education_scaffold, suppression_requirement, 0.45).
narrative_ontology:constraint_metric(isa_education_scaffold, theater_ratio, 0.20).

% Constraint self-claim (what does the constraint claim to be?)
narrative_ontology:constraint_claim(isa_education_scaffold, coordination).

% Binary flags
narrative_ontology:has_sunset_clause(isa_education_scaffold).      % Mandatory for Scaffold classification.
domain_priors:requires_active_enforcement(isa_education_scaffold). % Required for income collection.

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(isa_education_scaffold, isa_provider).
narrative_ontology:constraint_victim(isa_education_scaffold, repaying_graduate).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   ========================================================================== */

% PERSPECTIVE 1: THE REPAYING GRADUATE (SNARE)
% During the repayment window, the graduate feels the income share as a Snare.
% Effective extraction χ = 0.42 * π(powerless:1.5) * σ(national:1.0) = 0.63.
% This high perceived extraction limits biographical mobility and savings.
constraint_indexing:constraint_classification(isa_education_scaffold, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE ISA PROVIDER (ROPE)
% The funder sees the ISA as a Rope, coordinating capital with talent and
% diversifying risk across a cohort.
% Effective extraction χ = 0.42 * π(institutional:-0.2) * σ(global:1.2) = -0.10.
% The negative value indicates it's seen as a value-generating investment.
constraint_indexing:constraint_classification(isa_education_scaffold, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE POLICY ANALYST (SCAFFOLD)
% Analytically, the constraint is a Scaffold. Its primary function is temporary
% support, and its existence is contingent on the sunset clause which prevents
% it from becoming a permanent Snare.
constraint_indexing:constraint_classification(isa_education_scaffold, scaffold,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(national))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(isa_education_scaffold_tests).

test(perspectival_gap_snare_vs_rope) :-
    % Verify the core perspectival gap between the subject and beneficiary.
    constraint_indexing:constraint_classification(isa_education_scaffold, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(isa_education_scaffold, rope, context(agent_power(institutional), _, _, _)).

test(scaffold_structural_validation) :-
    % A constraint can only be a Scaffold if a sunset clause is declared.
    (   narrative_ontology:has_sunset_clause(isa_education_scaffold)
    ->  constraint_indexing:constraint_classification(isa_education_scaffold, scaffold, _)
    ;   \+ constraint_indexing:constraint_classification(isa_education_scaffold, scaffold, _)
    ).

test(beneficiary_and_victim_declared) :-
    % Scaffolds and high-extraction constraints require beneficiaries and victims.
    narrative_ontology:constraint_beneficiary(isa_education_scaffold, _),
    narrative_ontology:constraint_victim(isa_education_scaffold, _).

:- end_tests(isa_education_scaffold_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The ISA is a canonical example of a constraint whose classification is
 * dominated by its temporal features. The base extractiveness (0.42) is
 * moderate, but when amplified by the powerless index (χ=0.63), it is
 * perceived as a Snare by the graduate during their repayment years.
 * Conversely, the institutional funder perceives it as a pure Rope (χ=-0.10),
 * a mechanism for productive coordination.
 *
 * The analytical classification resolves this tension by identifying the
 * constraint's temporary nature. The `has_sunset_clause/1` fact is critical;
 * without it, the system would classify as a Tangled Rope or Snare from the
 * analytical perspective. The ISA is therefore a Scaffold: a temporary,
 * high-support structure with a defined end.
 *
 * MANDATROPHY ANALYSIS:
 * This structure avoids Mandatrophy by tying extraction directly to the
 * value it creates (income). However, a risk remains: if the education
 * provided ceases to generate a sufficient income premium, the coordination
 * function fails, but the extraction mechanism remains. This would degrade
 * the Scaffold into a pure Snare. The sunset clause provides a hard backstop
 * against this failure mode.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_isa_mobility_threshold,
    'At what level of income does the specified percentage extraction become a net-negative for social mobility, negating the benefit of the education?',
    'Longitudinal study comparing lifetime earnings and wealth accumulation of ISA-funded graduates vs. traditionally-funded peers in high-earning fields.',
    'If extraction outweighs mobility gain, the Scaffold is a mis-classified Snare.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(isa_education_scaffold, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Although extraction is below the 0.46 threshold, temporal data is included
% to model the lifecycle of this borderline constraint. Here we model stable
% extraction terms but a slight increase in marketing/administrative overhead
% (theater_ratio).

% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(isa_tr_t0, isa_education_scaffold, theater_ratio, 0, 0.15).
narrative_ontology:measurement(isa_tr_t5, isa_education_scaffold, theater_ratio, 5, 0.18).
narrative_ontology:measurement(isa_tr_t10, isa_education_scaffold, theater_ratio, 10, 0.20).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(isa_ex_t0, isa_education_scaffold, base_extractiveness, 0, 0.42).
narrative_ontology:measurement(isa_ex_t5, isa_education_scaffold, base_extractiveness, 5, 0.42).
narrative_ontology:measurement(isa_ex_t10, isa_education_scaffold, base_extractiveness, 10, 0.42).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
narrative_ontology:coordination_type(isa_education_scaffold, resource_allocation).

% Network relationships (structural influence edges)
% ISAs are an alternative to, and thus influence, the broader system of student debt.
narrative_ontology:affects_constraint(isa_education_scaffold, student_debt_burden).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: israel_gaza_ceasefire_violation
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2024-02-29
% ============================================================================

:- module(constraint_israel_gaza_ceasefire_violation, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: israel_gaza_ceasefire_violation
 * human_readable: Israel-Gaza Ceasefire Violation
 * domain: political
 * * SUMMARY:
 * Following a ceasefire agreement, Hamas's violation of the agreement by launching rockets into Israel triggers retaliatory strikes from Israel on Gaza. This cycle represents a constraint on sustainable peace, defined by the agreement's perceived utility and enforceability for each party.
 * * KEY AGENTS:
 * - Gazan Civilians: Subject (Powerless)
 * - Israeli Government: Beneficiary (Institutional)
 * - International Observers: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(israel_gaza_ceasefire_violation, 0.6). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(israel_gaza_ceasefire_violation, 0.7).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(israel_gaza_ceasefire_violation, 0.2).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(israel_gaza_ceasefire_violation, extractiveness, 0.6).
narrative_ontology:constraint_metric(israel_gaza_ceasefire_violation, suppression_requirement, 0.7).
narrative_ontology:constraint_metric(israel_gaza_ceasefire_violation, theater_ratio, 0.2).

% Binary flags
domain_priors:requires_active_enforcement(israel_gaza_ceasefire_violation). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(israel_gaza_ceasefire_violation, israeli_citizens).
narrative_ontology:constraint_victim(israel_gaza_ceasefire_violation, gazan_civilians).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE/MOUNTAIN)
% High extraction felt as an immutable limit or predatory trap.
% NOTE: This may be upgraded to 'organized' power if a critical mass of victims exists.
constraint_indexing:constraint_classification(israel_gaza_ceasefire_violation, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(regional))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Viewed as essential infrastructure or coordination.
constraint_indexing:constraint_classification(israel_gaza_ceasefire_violation, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER
% Default analytical context (civilizational/analytical/global).
% This perspective is used by the bridge to derive constraint_claim.
% Type should reflect what the metrics compute: mountain, rope, tangled_rope, snare, scaffold, or piton.
constraint_indexing:constraint_classification(israel_gaza_ceasefire_violation, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(israel_gaza_ceasefire_violation_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(israel_gaza_ceasefire_violation, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(israel_gaza_ceasefire_violation, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(threshold_validation) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(israel_gaza_ceasefire_violation, ExtMetricName, E),
    (E =< 0.05 -> true ; E >= 0.46). % Ensures it's either a Mountain or high-extraction Snare/Tangled.

:- end_tests(israel_gaza_ceasefire_violation_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The ceasefire agreement is a high-extraction constraint because it requires significant concessions from both sides and the violation leads to immediate detrimental consequences (retaliatory strikes). The suppression score is high due to the limited alternative options available to Gazan civilians and Hamas, given the blockade and ongoing conflict. The perspectival gap emerges because the Israeli government, with its institutional power, views the ceasefire as a necessary, albeit fragile, rope for managing the conflict and protecting its citizens. On the other hand, Gazan civilians, trapped in a cycle of violence and limited resources, experience the ceasefire (and its violation) as a snare.
 * * MANDATROPHY ANALYSIS:
 * The Tangled Rope classification prevents mislabeling coordination as pure extraction by recognizing that the ceasefire agreement is intended to reduce violence and provide a framework for future negotiations (coordination function), even though it entails asymmetric extraction (disproportionate impact on Gazan civilians due to violations and subsequent Israeli responses). The active enforcement requirement underscores the need for external monitoring and pressure to maintain the agreement.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_israel_gaza,
    'Is the ceasefire violation a strategic decision by Hamas, or a result of splinter group actions?',
    'Intelligence gathering and analysis of Hamas communication.',
    'If strategic, the ceasefire is less likely to hold. If splinter groups, greater external pressure on Hamas might be effective.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(israel_gaza_ceasefire_violation, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection (metric_substitution,
% extraction_accumulation) by providing measurements at multiple time points.
% Model how the constraint intensified or changed across the interval.
%
% Required for high-extraction constraints (base_extractiveness > 0.46).
% Use at least 3 time points (T=0, midpoint, T=end) for each tracked metric.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(israel_gaza_ceasefire_violation_tr_t0, israel_gaza_ceasefire_violation, theater_ratio, 0, 0.1).
narrative_ontology:measurement(israel_gaza_ceasefire_violation_tr_t5, israel_gaza_ceasefire_violation, theater_ratio, 5, 0.2).
narrative_ontology:measurement(israel_gaza_ceasefire_violation_tr_t10, israel_gaza_ceasefire_violation, theater_ratio, 10, 0.2).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(israel_gaza_ceasefire_violation_ex_t0, israel_gaza_ceasefire_violation, base_extractiveness, 0, 0.5).
narrative_ontology:measurement(israel_gaza_ceasefire_violation_ex_t5, israel_gaza_ceasefire_violation, base_extractiveness, 5, 0.6).
narrative_ontology:measurement(israel_gaza_ceasefire_violation_ex_t10, israel_gaza_ceasefire_violation, base_extractiveness, 10, 0.6).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */