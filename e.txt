% ============================================================================
% CONSTRAINT STORY: e2ee_digital_privacy_2026
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: "End-to-end encryption: Best ideas of the century" by Matthew Sparkes
% ============================================================================

:- module(constraint_e2ee_digital_privacy_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: e2ee_digital_privacy_2026
 * human_readable: End-to-End Encryption (E2EE)
 * domain: technological/political/social
 * temporal_scope: 1977-2026
 * spatial_scope: Global (Digital)
 * 
 * SUMMARY:
 * End-to-end encryption (E2EE) is a digital "wall" that ensures messages are only 
 * readable by the sender and recipient, rendering them "meaningless gibberish" 
 * during transmission. It provides a technological safeguard for privacy by
 * relying on "immutable mathematics" rather than the promises of service providers.
 * 
 * KEY AGENTS:
 * - The Vulnerable Individual (Individual Powerless): Relies on E2EE for physical safety.
 * - The Surveillance State (Institutional): A spy agency or police force unable to access communications.
 * - The Mathematician (Analytical): Observer of the underlying mathematical laws.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(e2ee_digital_privacy_2026, 0, 10).
narrative_ontology:constraint_claim(e2ee_digital_privacy_2026, rope).

% Base extractiveness: 0.05 (Very Low)
% Rationale: E2EE is fundamentally protective rather than extractive; it prevents 
% the extraction of information by unauthorized parties.
domain_priors:base_extractiveness(e2ee_digital_privacy_2026, 0.05).

% Suppression score: 0.5 (Moderate)
% Rationale: It suppresses the visibility of intermediaries and states over 
% private communication, effectively "hiding" the alternative of surveillance.
domain_priors:suppression_score(e2ee_digital_privacy_2026, 0.5).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(e2ee_digital_privacy_2026, extractiveness, 0.05).
narrative_ontology:constraint_metric(e2ee_digital_privacy_2026, suppression_requirement, 0.5).

% Enforcement: Requires active software implementation.
domain_priors:requires_active_enforcement(e2ee_digital_privacy_2026).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(e2ee_digital_privacy_2026, individual_users).
constraint_victim(e2ee_digital_privacy_2026, institutional_surveillance).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE VULNERABLE INDIVIDUAL - Rope
   --------------------------------------------------------------------------
   WHO: powerless (e.g., a dissident or journalist in a hostile regime)
   WHEN: immediate (Protection from imminent harm)
   WHERE: trapped (Physically located in a dangerous region)
   
   WHY THIS CLASSIFICATION:
   For this user, E2EE is a life-saving 'Rope'. It is the essential tool that
   coordinates their private communication, protecting them from a state that
   wishes to harm them. Their physical survival depends on it.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    e2ee_digital_privacy_2026,
    rope,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE SURVEILLANCE STATE - Snare
   --------------------------------------------------------------------------
   WHO: institutional (State power/Police/Spy agencies)
   WHEN: immediate (Short-term investigations/surveillance)
   WHERE: constrained (Blocked by the technological "wall")
   
   WHY THIS CLASSIFICATION:
   For the state seeking access, E2EE is a 'Snare' that constrains their 
   power. It renders their traditional tools—demands, blackmail, or 
   threats—ineffective against "impenetrable gibberish".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    e2ee_digital_privacy_2026,
    snare,
    context(
        agent_power(institutional),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(national)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE MATHEMATICIAN - Mountain
   --------------------------------------------------------------------------
   WHO: analytical (Observer of cryptographic constants)
   WHEN: historical (From RSA 1977 foundations onward)
   WHERE: analytical (Observing universal laws of logic/prime numbers)
   
   WHY THIS CLASSIFICATION:
   To the mathematician, the cryptographic foundation of E2EE is a 'Mountain'—an 
   immutable reality grounded in the fundamental difficulty of factoring large 
   numbers. It is a zero-degree-of-freedom constraint of logic.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    e2ee_digital_privacy_2026,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(historical),
        exit_options(analytical),
        spatial_scope(global)
    )
).

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(e2ee_digital_privacy_2026_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(e2ee_digital_privacy_2026, Type1, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(e2ee_digital_privacy_2026, Type2, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(e2ee_digital_privacy_2026, Type3, context(agent_power(analytical), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3.

:- end_tests(e2ee_digital_privacy_2026_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. PERSPECTIVE SELECTION: Added the 'Vulnerable Individual' as the required
 *    'powerless' agent. This highlights the most critical use case
 *    for E2EE, where it acts as a 'Rope' for survival, not just convenience.
 * 
 * 2. CLASSIFICATION RATIONALE:
 *    - Vulnerable User (Rope): A tool for survival.
 *    - Surveillance State (Snare): A barrier to their power.
 *    - Mathematician (Mountain): An expression of immutable mathematical truth.
 * 
 * 3. EXTRACTIVENESS (0.05): Kept extremely low. E2EE is a shield against extraction,
 *    not a tool of it. The primary conflict is over control and visibility.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * Core uncertainties about the long-term viability of the mathematical 'Mountain'.
 */

omega_variable(
    quantum_decryption_risk,
    "Will the rise of quantum computing render current 'hard-to-crack' mathematics (the Mountain) solvable?",
    resolution_mechanism("Experimental verification of Shor's algorithm at a scale capable of breaking current cryptographic standards."),
    impact("If yes: The protective 'Mountain' of current cryptography collapses into a temporary 'Scaffold', and the Rope breaks."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * 
 * ALTERNATIVE 1: Custodial Encryption (Managed Keys by a third party)
 *    Viability: Was the default for most early internet services.
 *    Suppression: Actively rejected by the E2EE model, which removes the trusted (or untrusted) third party from the key management process.
 *    Evidence: "Providers... cannot see your communications".
 * 
 * CONCLUSION:
 * The explicit rejection of custodial models demonstrates that E2EE is an intentional
 * design choice to shift power. It turns the "Managed Secret" (a 'Rope' for the state) 
 * into a "Private Secret" (a 'Rope' for the individual), creating a 'Snare' for the surveillant.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/e2ee_digital_privacy_2026].
 * 2. Multi-perspective: ?- multi_index_report(e2ee_digital_privacy_2026).
 * 3. Run tests: ?- run_tests(e2ee_digital_privacy_2026_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: edelman_2026_developed_stagnation
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-16
% ============================================================================

:- module(constraint_edelman_2026_developed_stagnation, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: edelman_2026_developed_stagnation
 * human_readable: The Developed Market Stagnation Trap
 * domain: economic/social
 * * SUMMARY:
 * A socio-economic condition in developed nations characterized by high distrust, economic pessimism, and extreme insularity. A significant "Mass-Class" trust gap (up to 29 points) creates asymmetric outcomes, where institutional actors benefit from localized trust while the general populace experiences stagnation and lack of opportunity.
 * * KEY AGENTS:
 * - Low-Income Worker: Subject (Powerless) - Faces a 29pt trust gap, job threats from AI (66%), and believes the system is failing them.
 * - Local Brand CEO: Beneficiary (Institutional) - Gains from a 31pt domestic trust advantage and insular market dynamics.
 * - Systems Auditor: Auditor (Analytical) - Observes the structural properties of the system, noting that only a small fraction (6-21%) believe in a better future.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(edelman_2026_developed_stagnation, 0.58). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(edelman_2026_developed_stagnation, 0.85).   % Structural property (raw, unscaled). Scaled by extreme insularity in Japan (90%) and Germany (81%).
domain_priors:theater_ratio(edelman_2026_developed_stagnation, 0.62).       % Piton detection (>= 0.70). Reflects "Trust Brokering" as a corporate survival tactic, not pure theater.

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(edelman_2026_developed_stagnation, extractiveness, 0.58).
narrative_ontology:constraint_metric(edelman_2026_developed_stagnation, suppression_requirement, 0.85).
narrative_ontology:constraint_metric(edelman_2026_developed_stagnation, theater_ratio, 0.62).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(edelman_2026_developed_stagnation, constructed).

% Binary flags
domain_priors:requires_active_enforcement(edelman_2026_developed_stagnation). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope.
narrative_ontology:constraint_beneficiary(edelman_2026_developed_stagnation, institutional_elites).
narrative_ontology:constraint_victim(edelman_2026_developed_stagnation, low_income_workers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE DISPLACED WORKER (SNARE)
% Viewed as an inescapable trap where AI and trade wars threaten jobs (66%).
% Effective extraction χ = 0.58 * 1.5 (powerless) * 1.0 (national) = 0.87.
constraint_indexing:constraint_classification(edelman_2026_developed_stagnation, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE INSTITUTIONAL LEADER (ROPE)
% Viewed as a necessary coordination mechanism (managing local trust) that ensures stability.
% Effective extraction χ = 0.58 * -0.2 (institutional) * 1.2 (global) = -0.139.
constraint_indexing:constraint_classification(edelman_2026_developed_stagnation, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The system has a genuine coordination function (local trust) but also features
% high asymmetric extraction and requires active enforcement to maintain.
% Effective extraction χ = 0.58 * 1.15 (analytical) * 1.2 (global) = 0.80.
constraint_indexing:constraint_classification(edelman_2026_developed_stagnation, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(edelman_2026_developed_stagnation_tests).

test(perspectival_gap_is_snare_vs_rope) :-
    % Verify the core perspectival gap between the powerless (Snare) and institutional (Rope).
    constraint_indexing:constraint_classification(edelman_2026_developed_stagnation, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(edelman_2026_developed_stagnation, rope, context(agent_power(institutional), _, _, _)).

test(tangled_rope_structural_validation) :-
    % Verify that the analytical observer correctly identifies a Tangled Rope.
    constraint_indexing:constraint_classification(edelman_2026_developed_stagnation, tangled_rope, context(agent_power(analytical), _, _, _)),
    % And that the necessary structural properties are declared.
    narrative_ontology:constraint_beneficiary(edelman_2026_developed_stagnation, _),
    narrative_ontology:constraint_victim(edelman_2026_developed_stagnation, _),
    domain_priors:requires_active_enforcement(edelman_2026_developed_stagnation).

:- end_tests(edelman_2026_developed_stagnation_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The original file misclassified this constraint. The high base extraction (0.58) and suppression (0.85) make Mountain and Piton classifications impossible. The Piton classification was specifically incorrect due to the theater_ratio (0.62) being below the 0.70 threshold, and more importantly, the extraction being far too high for an inertial constraint.
 *
 * The corrected analysis identifies a classic Tangled Rope. There is a genuine coordination function: institutional actors and local brands manage consumer trust in an insular environment, which benefits them (Rope perspective). However, this coordination is coupled with severe asymmetric extraction from low-income populations, who are trapped by economic pessimism and lack of alternatives (Snare perspective). The analytical view must therefore be Tangled Rope, as it acknowledges both the coordination and the extraction.
 *
 * * MANDATROPHY ANALYSIS:
 * The Tangled Rope classification is critical for preventing mandatrophy. A pure Snare classification would ignore the coordination function that gives the system its legitimacy and stability. A pure Rope classification would ignore the immense extraction and suppression felt by its victims. Tangled Rope correctly models the reality: a system where coordination for one group is predicated on extraction from another.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_edelman_2026,
    'Can "My Employer" (trusted by 78%) effectively replace the State as a trust broker, or is this a temporary transfer of trust that will also erode?',
    'Tracking the performance-expectation gap for employers bridging social divides (currently -17pts) over a 5-year period.',
    'Success: A new, corporate-led social contract emerges. Failure: Trust collapses entirely, leading to total societal fragmentation.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(edelman_2026_developed_stagnation, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection (metric_substitution,
% extraction_accumulation) by providing measurements at multiple time points.
% Required for high-extraction constraints (base_extractiveness > 0.46).

% Theater ratio rising as institutions "act" competent despite 15-point ethical gaps.
narrative_ontology:measurement(dev_tr_t0, edelman_2026_developed_stagnation, theater_ratio, 0, 0.40).
narrative_ontology:measurement(dev_tr_t5, edelman_2026_developed_stagnation, theater_ratio, 5, 0.55).
narrative_ontology:measurement(dev_tr_t10, edelman_2026_developed_stagnation, theater_ratio, 10, 0.62).

% Extraction increasing as the mass-class gap doubled since 2012.
narrative_ontology:measurement(dev_ex_t0, edelman_2026_developed_stagnation, base_extractiveness, 0, 0.25).
narrative_ontology:measurement(dev_ex_t5, edelman_2026_developed_stagnation, base_extractiveness, 5, 0.45).
narrative_ontology:measurement(dev_ex_t10, edelman_2026_developed_stagnation, base_extractiveness, 10, 0.58).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The system enforces insularity and manages trust as a resource.
narrative_ontology:coordination_type(edelman_2026_developed_stagnation, enforcement_mechanism).

% Network relationships (structural influence edges)
% This form of stagnation directly impacts a nation's ability to address other large-scale challenges.
narrative_ontology:affects_constraint(edelman_2026_developed_stagnation, national_debt_ceiling).
narrative_ontology:affects_constraint(edelman_2026_developed_stagnation, tech_labor_shortage).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: edelman_2026_developing_volatility
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-22
% ============================================================================

:- module(constraint_edelman_2026_developing_volatility, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: edelman_2026_developing_volatility
 * human_readable: The Developing Market Trust Surge
 * domain: economic/technological
 * * SUMMARY:
 * Developing markets like India (74), UAE (80), and Nigeria (72) show
 * high trust levels but face a "Snare" of foreign disinformation (75% in UAE)
 * and AI-driven displacement fears. This creates a protectionist environment where
 * high trust in local institutions is coupled with high suspicion of external forces.
 * * KEY AGENTS:
 * - Emerging Professional: Subject (Powerless) - High trust in business (82% in India)
 * but fears job loss to international trade conflicts (66%).
 * - State-Linked Enterprise: Beneficiary (Institutional) - Operates in high-trust
 * environments and benefits from rising nationalist/protectionist sentiments.
 * - Foreign Investor: Victim (Institutional) - Faces market access challenges and
 * popular support for reducing foreign presence.
 * - Global Auditor: Auditor (Analytical) - Notes double-digit declines in
 * optimism in India and China despite high base trust.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Extraction (0.52) reflects the cost of "Protectionist Support" and
% high fear of foreign media contamination.
domain_priors:base_extractiveness(edelman_2026_developing_volatility, 0.52).
% Suppression (0.45) is moderate, as 65% in Nigeria still believe they will
% be better off, indicating alternatives are still perceived to exist.
domain_priors:suppression_score(edelman_2026_developing_volatility, 0.45).
% Theater ratio (0.35) reflects genuine coordination, though "Trust Brokering"
% is becoming a mandated corporate performance.
domain_priors:theater_ratio(edelman_2026_developing_volatility, 0.35).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(edelman_2026_developing_volatility, extractiveness, 0.52).
narrative_ontology:constraint_metric(edelman_2026_developing_volatility, suppression_requirement, 0.45).
narrative_ontology:constraint_metric(edelman_2026_developing_volatility, theater_ratio, 0.35).

% Constraint self-claim: The system claims to be an enforcement mechanism for
% national interests and stability against foreign interference.
narrative_ontology:constraint_claim(edelman_2026_developing_volatility, enforcement).

% Binary flags and structural properties for Tangled Rope classification
domain_priors:requires_active_enforcement(edelman_2026_developing_volatility).

% Structural property derivation hooks:
% has_coordination_function/1 is derived from constraint_beneficiary/2
% has_asymmetric_extraction/1 is derived from constraint_victim/2
narrative_ontology:constraint_beneficiary(edelman_2026_developing_volatility, state_linked_enterprise).
narrative_ontology:constraint_victim(edelman_2026_developing_volatility, emerging_professional).
narrative_ontology:constraint_victim(edelman_2026_developing_volatility, foreign_investor).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE EMERGING PROFESSIONAL (ROPE)
% Trust is high; local business is viewed as a reliable partner for progress,
% making the system feel like pure coordination despite underlying anxieties.
constraint_indexing:constraint_classification(edelman_2026_developing_volatility, rope,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(constrained),
            spatial_scope(national))).

% PERSPECTIVE 2: THE FOREIGN INVESTOR (SNARE)
% Faced with 34% of people supporting reduced foreign presence even if
% prices rise, the market appears as an extraction trap for external capital.
constraint_indexing:constraint_classification(edelman_2026_developing_volatility, snare,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(constrained),
            spatial_scope(global))).

% PERSPECTIVE 3: THE SYSTEMS ANALYST (TANGLED ROPE)
% High trust creates coordination (Rope), but the "Mass-Class" gap,
% disinformation fears, and protectionism create asymmetric extraction (Snare).
constraint_indexing:constraint_classification(edelman_2026_developing_volatility, tangled_rope,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(edelman_2026_developing_volatility_tests).

test(perspectival_gap_rope_snare) :-
    % Verify the key perspectival gap between the local professional and foreign investor.
    constraint_indexing:constraint_classification(edelman_2026_developing_volatility, rope, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(edelman_2026_developing_volatility, snare, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(edelman_2026_developing_volatility, tangled_rope, context(agent_power(analytical), _, _, _)).

test(tangled_rope_structural_requirements) :-
    % Verify that all structural requirements for a Tangled Rope are met.
    narrative_ontology:constraint_beneficiary(edelman_2026_developing_volatility, _), % -> has_coordination_function
    narrative_ontology:constraint_victim(edelman_2026_developing_volatility, _),     % -> has_asymmetric_extraction
    domain_priors:requires_active_enforcement(edelman_2026_developing_volatility).

test(high_extraction_threshold) :-
    % Verify base extractiveness is in the Snare/Tangled Rope range.
    domain_priors:base_extractiveness(edelman_2026_developing_volatility, E),
    E >= 0.46.

:- end_tests(edelman_2026_developing_volatility_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * This constraint captures a paradox in developing markets: high institutional trust
 * (Index 66) coexists with significant economic anxiety and protectionist sentiment.
 * The perspectival gap is stark: for a local professional, the system is a Rope of
 * opportunity built on trust. For a foreign investor, it's a Snare of nationalist
 * policy and unpredictable public opinion. The base extraction of 0.52 reflects
 * the economic cost of this protectionism and the resources spent managing
 * disinformation fears.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The Tangled Rope classification is critical for resolving mandatrophy. A simpler
 * analysis might incorrectly classify the system as a pure Rope (focusing only on
 * high trust scores) or a pure Snare (focusing only on protectionism). The
 * Tangled Rope classification correctly identifies that the coordination function
 * (high trust) is inextricably linked to an asymmetric extraction mechanism
 * (protectionism that benefits state-linked enterprises at the expense of
 * foreign investors and, potentially, consumers via higher prices).
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_developing_2026,
    'Will high institutional trust survive the double-digit drop in future optimism?',
    'Tracking the 2026-2027 Trust Index in India and China relative to inflation and foreign direct investment flows.',
    'If trust holds, the Tangled Rope solidifies. If it collapses, the system may degrade into a pure Snare as coercion replaces coordination.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(edelman_2026_developing_volatility, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Theater ratio: Rising as "Polynational" local-hiring becomes a performance metric.
narrative_ontology:measurement(dev_tr_t0, edelman_2026_developing_volatility, theater_ratio, 0, 0.20).
narrative_ontology:measurement(dev_tr_t5, edelman_2026_developing_volatility, theater_ratio, 5, 0.28).
narrative_ontology:measurement(dev_tr_t10, edelman_2026_developing_volatility, theater_ratio, 10, 0.35).

% Extraction: Rising sharply due to the +11pt jump in disinformation fears, which
% justifies greater protectionist extraction.
narrative_ontology:measurement(dev_ex_t0, edelman_2026_developing_volatility, base_extractiveness, 0, 0.32).
narrative_ontology:measurement(dev_ex_t5, edelman_2026_developing_volatility, base_extractiveness, 5, 0.45).
narrative_ontology:measurement(dev_ex_t10, edelman_2026_developing_volatility, base_extractiveness, 10, 0.52).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type: The mechanism coordinates market behavior and public
% sentiment to enforce a preference for local enterprises over foreign ones.
narrative_ontology:coordination_type(edelman_2026_developing_volatility, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: edelman_2026_insularity
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-23
% ============================================================================

:- module(constraint_edelman_2026_insularity, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: edelman_2026_insularity
 * human_readable: The Insular Trust Mindset
 * domain: social/economic
 * * SUMMARY:
 * A global condition where a majority of individuals are unwilling or hesitant to trust
 * those with different values, sources, or backgrounds. This insularity
 * acts as a "Snare" for the powerless by limiting economic mobility and
 * as a "Rope" for institutions attempting to broker local stability.
 * * KEY AGENTS:
 * - Low-Income Citizen: Subject (Powerless) - Faces a 15pt trust gap vs high income[cite: 263].
 * - Multi-national Employer: Beneficiary (Institutional) - Seen as the most trusted
 * entity to bridge divides[cite: 826, 972].
 * - Edelman Analyst: Auditor (Analytical) - Measures the erosion of shared reality[cite: 72].
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% High extraction (0.55) reflecting lost productivity (34%) and workplace conflict[cite: 624, 630].
domain_priors:base_extractiveness(edelman_2026_insularity, 0.55).
% High suppression (0.65) as 71% of low-income fear being left behind by AI[cite: 408, 434].
domain_priors:suppression_score(edelman_2026_insularity, 0.65).
% Theater ratio (0.42) reflecting significant but not yet dominant performative "Trust Brokering"[cite: 835].
domain_priors:theater_ratio(edelman_2026_insularity, 0.42).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(edelman_2026_insularity, extractiveness, 0.55).
narrative_ontology:constraint_metric(edelman_2026_insularity, suppression_requirement, 0.65).
narrative_ontology:constraint_metric(edelman_2026_insularity, theater_ratio, 0.42).

% Constraint self-claim (what does the constraint claim to be?)
% It presents as a natural social condition but is a constructed reality.
narrative_ontology:constraint_claim(edelman_2026_insularity, constructed).

% Binary flags
% Enforcement is social and economic (e.g., hiring bias, social exclusion), which is active.
domain_priors:requires_active_enforcement(edelman_2026_insularity). % Required for Tangled Rope

% Structural property derivation hooks:
% has_coordination_function/1 is DERIVED from constraint_beneficiary/2
% has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
narrative_ontology:constraint_beneficiary(edelman_2026_insularity, multi_national_employers).
narrative_ontology:constraint_victim(edelman_2026_insularity, low_income_citizens).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The low-income subject feels trapped by a system they believe favors the rich[cite: 667, 1385].
constraint_indexing:constraint_classification(edelman_2026_insularity, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Employers view the constraint as a coordination challenge to be managed via
% "Trust Brokering" and shared identity[cite: 778, 890].
constraint_indexing:constraint_classification(edelman_2026_insularity, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Detects the hybrid nature of insularity: it provides local safety but extracts
% global progress[cite: 584, 595].
constraint_indexing:constraint_classification(edelman_2026_insularity, tangled_rope,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(edelman_2026_insularity_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(edelman_2026_insularity, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(edelman_2026_insularity, rope, context(agent_power(institutional), _, _, _)).

test(analytical_classification_is_tangled_rope) :-
    constraint_indexing:constraint_classification(edelman_2026_insularity, tangled_rope, context(agent_power(analytical), _, _, _)).

test(threshold_validation) :-
    domain_priors:base_extractiveness(edelman_2026_insularity, E),
    E >= 0.46.

:- end_tests(edelman_2026_insularity_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The 0.55 extraction score is grounded in the "Loss of Productivity" metric (34%)
 * where employees put less effort into teams led by those with different beliefs[cite: 624, 630].
 * The Perspectival Gap exists because institutions see insularity as a problem
 * to be solved through "polynational" models[cite: 965], which they can afford to implement,
 * viewing it as a coordination challenge (Rope). The powerless experience it as a
 * "rigged system"[cite: 132] that limits their mobility and opportunities (Snare).
 *
 * * MANDATROPHY ANALYSIS:
 * The Tangled Rope classification is critical here. A simpler model might classify this
 * as a pure Snare, focusing only on the harm to low-income citizens. However, that
 * would miss the genuine coordination function that "Trust Brokering" provides for
 * multi-national employers, allowing them to maintain operational stability in a
 * polarized world. Tangled Rope correctly identifies both the coordination benefit
 * for the powerful and the asymmetric extraction from the powerless, preventing
 * misclassification and providing a more accurate model of the system's dynamics.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_edelman_2026,
    'Is insularity a psychological defense (Mountain) or a manufactured state (Snare)?',
    'Analysis of the 11pt rise in fears of foreign disinformation[cite: 465, 478].',
    'If defense, trust brokering succeeds; if manufactured, insularity is an extraction tool.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(edelman_2026_insularity, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection (metric_substitution,
% extraction_accumulation) by providing measurements at multiple time points.
% Required for high-extraction constraints (base_extractiveness > 0.46).

% Theater ratio over time: Rising as "Trust Brokering" becomes a corporate mandate[cite: 826].
narrative_ontology:measurement(ed_tr_t0, edelman_2026_insularity, theater_ratio, 0, 0.25).
narrative_ontology:measurement(ed_tr_t5, edelman_2026_insularity, theater_ratio, 5, 0.35).
narrative_ontology:measurement(ed_tr_t10, edelman_2026_insularity, theater_ratio, 10, 0.42).

% Extraction over time: Increasing as shared reality erodes over 20 years[cite: 72].
narrative_ontology:measurement(ed_ex_t0, edelman_2026_insularity, base_extractiveness, 0, 0.30).
narrative_ontology:measurement(ed_ex_t5, edelman_2026_insularity, base_extractiveness, 5, 0.48).
narrative_ontology:measurement(ed_ex_t10, edelman_2026_insularity, base_extractiveness, 10, 0.55).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% "Trust Brokering" by employers is a form of social resource allocation.
narrative_ontology:coordination_type(edelman_2026_insularity, resource_allocation).

% Network relationships (structural influence edges)
% Widespread social insularity directly fuels and is fueled by political polarization.
narrative_ontology:affects_constraint(edelman_2026_insularity, political_polarization_2026).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: education_unbundling_implementation
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Implementation Roadmap / Internal Logic Synthesis
% ============================================================================

:- module(education_unbundling_implementation, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: education_unbundling_implementation
 * human_readable: The Modular Credentialing Transition
 * domain: technological/educational/economic
 * temporal_scope: 2026-2030 (Implementation Phase)
 * spatial_scope: Global Interoperable Networks
 * * SUMMARY:
 * This constraint represents the active "Phase Implementation" of unbundling 
 * education. It focuses on the shift from institutional gatekeeping (Mountain) 
 * to a decentralized "Rope" system based on verifiable digital credentials 
 * and AI-assisted mastery.
 * * KEY AGENTS:
 * - The System Architect: Designing the interoperable "Rope" (The Roadmap).
 * - The Legacy Institution: Protecting the "Mountain" of bundled degrees.
 * - The Independent Learner: Navigating the new "Small Unit" landscape.
 * * NARRATIVE ARC:
 * The roadmap attempts to move education through three phases: (1) Protocol 
 * selection, (2) Unbundling pilot, and (3) Market validation. The goal is 
 * to resolve the "Credential Legitimacy Omega" by making micro-achievements 
 * as portable and valuable as traditional degrees.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(implementation_window_2026, 0, 10).
narrative_ontology:constraint_claim(education_unbundling_implementation, rope).

% Base extractiveness score (0.4): Moderate-Low.
% Rationale: The goal of the roadmap is to reduce extraction by 
% enabling individuals to "stack" only the learning they need.
domain_priors:base_extractiveness(education_unbundling_implementation, 0.4).

% Suppression score (0.3): Low.
% Rationale: The roadmap explicitly seeks to reveal and validate 
% alternatives to the "factory model."
domain_priors:suppression_score(education_unbundling_implementation, 0.3).

% Enforcement requirements
% Requires active enforcement: Interoperability standards (blockchain/digital 
% certificates) must be actively maintained to prevent platform re-centralization.
domain_priors:requires_active_enforcement(education_unbundling_implementation).

% Metrics
% Beneficiaries & Victims
constraint_beneficiary(education_unbundling_implementation, independent_learners).
constraint_beneficiary(education_unbundling_implementation, skills_based_employers).
constraint_victim(education_unbundling_implementation, administrative_bureaucracies).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE ARCHITECT (ROADMAP DESIGNER) - Rope
   --------------------------------------------------------------------------
   
   WHO: analytical - Not a participant in the current struggle, but a designer of the new system.
   WHEN: historical - Viewing the transition away from the Industrial Revolution "bigness."
   WHERE: arbitrage - Playing systems against each other to find the most efficient path.
   SCOPE: global - Designing for universal standards.
   
   WHY THIS CLASSIFICATION:
   For the architect, the roadmap is a Rope—a functional tool for coordination. 
   It is designed to be changeable, modular, and beneficial to all participants 
   who adopt the standards.
   
   NARRATIVE EVIDENCE:
   "The goal is to move records from single-institution gatekeepers to a 
   distributed architecture... moving from standardized 'factory-model' bundles".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    education_unbundling_implementation,
    rope,
    context(
        agent_power(analytical),
        time_horizon(historical),
        exit_options(arbitrage),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE LEGACY ADMISSIONS OFFICER - Snare
   --------------------------------------------------------------------------
   
   WHO: institutional - Enforcer of current institutional standards.
   WHEN: biographical - Their career is tied to the prestige of the "bundle."
   WHERE: trapped - Bound by current regulations and institutional culture.
   SCOPE: national - Bound by accrediting bodies and degree-granting laws.
   
   WHY THIS CLASSIFICATION:
   For a legacy officer, unbundling is a Snare. It threatens to extract the 
   "prestige value" from their institution, bypasses their gatekeeping power, 
   and "forces" them to recognize signals they cannot control.
   
   NARRATIVE EVIDENCE:
   "Regulatory friction: accreditation monopolies... link funding and 
   legitimacy exclusively to 'bundled' institutional accreditation".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    education_unbundling_implementation,
    snare,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(trapped),
        spatial_scope(national)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE ANALYTICAL OBSERVER (LEARNING SCIENTIST) - Mountain
   --------------------------------------------------------------------------
   WHO: agent_power(analytical) - Observes the biological limits of learning.
   WHEN: biographical - Skill acquisition takes years of sustained effort.
   WHERE: arbitrage - Managing the transition between bundled and unbundled.
   SCOPE: global - Cognitive limits are a universal human invariant.
   
   WHY THIS CLASSIFICATION:
   The "Mountain" is the biological reality of cognitive load. Unbundling 
   may provide institutional flexibility, but it cannot negotiate with the 
   human brain's fixed capacity for information processing. Deep mastery 
   requires a time-horizon that unbundled modules often ignore. This 
   creates an unyielding structural limit on how far "personalization" 
   can go before it breaks the coherence of the learning experience.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    educational_unbundling_implementation,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(biographical),
        exit_options(arbitrage),
        spatial_scope(global)
    )
) :-
    domain_priors:suppression_score(educational_unbundling_implementation, S),
    S > 0.4.

% Explicit priors reflecting the biological limits of cognitive bandwidth.
domain_priors:base_extractiveness(educational_unbundling_implementation, 0.2).
domain_priors:suppression_score(educational_unbundling_implementation, 0.5).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(education_unbundling_implementation, extractiveness, 0.4).
narrative_ontology:constraint_metric(education_unbundling_implementation, suppression_requirement, 0.3).

/* ==========================================================================
   4. TESTS (What We Learn)
   ========================================================================== */

:- begin_tests(unbundling_implementation_tests).

test(decoupling_efficacy) :-
    % Test that "Market Validation" (Phase 3) reduces the "Mountain" status 
    % of legacy degrees.
    domain_priors:suppression_score(education_unbundling_implementation, S),
    S < 0.5.

test(interoperability_necessity) :-
    % Roadmap success depends on active enforcement of open standards.
    domain_priors:requires_active_enforcement(education_unbundling_implementation).

:- end_tests(unbundling_implementation_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * * KEY DECISIONS:
 * 1. CLASSIFICATION: I chose "Rope" for the implementation phase itself, 
 * as the roadmap is a tool for coordination, not a static law.
 * * 2. OMEGA RESOLUTION: The roadmap is specifically designed to kill 
 * the "Legitimacy Omega" through Phase 3 (Market Validation).
 * * 3. PERSPECTIVE: Contrast between the "Architect" and "Admissions Officer" 
 * reveals the gap between functional progress and institutional preservation.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    adoption_threshold_omega,
    "At what percentage of market adoption does the 'Rope' become the new 'Mountain' (standard)?",
    resolution_mechanism("Monitor the tipping point where employers prioritize microcredentials over degrees."),
    impact("If Tipping Point reached: Systemic shift. If not: Persistent hybrid friction."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Status Quo (The Bundle)
 * Viability: High inertia in 20th-century institutions.
 * Suppression: Naturally suppressed by the rising costs and "mismatch" of 
 * factory-model schooling.
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */


% --- v3.1 Indexical Relativity Stubs (Fleet Repair) ---
constraint_indexing:constraint_classification(educational_unbundling_implementation, rope, agent_power(institutional)).
constraint_indexing:constraint_classification(educational_unbundling_implementation, snare, agent_power(powerless)).
% ============================================================================
% CONSTRAINT STORY: electrification_scale_2026
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: "The electrification of everything" by Chris Stokel-Walker
% ============================================================================

:- module(constraint_electrification_scale_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: electrification_scale_2026
 * human_readable: Industrial Scale Electrification
 * domain: technological/economic/environmental
 * temporal_scope: 2010s-2026
 * spatial_scope: Global (initially Nevada/Tesla)
 * 
 * SUMMARY:
 * The transition from fossil fuels to renewables catalyzed by "gigafactories"
 * that leverage economies of scale and supply-chain integration.
 * This constraint represents the shift from fossil fuel-powered infrastructure
 * to a dispatchable solar and electric vehicle ecosystem.
 * 
 * KEY AGENTS:
 * - Coal Miner / Oil Rig Worker (Individual Powerless): Faces job displacement and livelihood threats.
 * - Energy Planner (Institutional): Views electrification as a tool for dispatchable power.
 * - Legacy Auto/Oil Industry (Individual Powerful): Views the shift as a disruptive Snare.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(electrification_scale_2026, 0, 10).
narrative_ontology:constraint_claim(electrification_scale_2026, tangled_rope).

% Base extractiveness: 0.15 (Low)
% The system extracts energy from the sun rather than from labor
% or subjects, though mineral extraction for batteries is an externalized
% factor not deeply explored in the source.
domain_priors:base_extractiveness(electrification_scale_2026, 0.15).

% Suppression: 0.5 (Moderate)
% Renewables are becoming "competitive with fossil fuels,"
% effectively suppressing the economic viability of the older model.
domain_priors:suppression_score(electrification_scale_2026, 0.5).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(electrification_scale_2026, extractiveness, 0.15).
narrative_ontology:constraint_metric(electrification_scale_2026, suppression_requirement, 0.5).

% Enforcement: Requires active enforcement: Scaling to "giga" levels requires massive capital
% integration "under one roof".
domain_priors:requires_active_enforcement(electrification_scale_2026).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(electrification_scale_2026, renewable_energy_sector).
constraint_victim(electrification_scale_2026, fossil_fuel_workers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: COAL MINER / OIL RIG WORKER - Snare
   --------------------------------------------------------------------------
   WHO: powerless (Faces job displacement and livelihood threats)
   WHEN: immediate (Short-term economic disruption)
   WHERE: trapped (Dependent on declining fossil fuel industries)
   
   WHY THIS CLASSIFICATION:
   For a coal miner or oil rig worker, electrification is a 'Snare'. The rapid 
   shift to renewables threatens their livelihoods, communities, and traditional
   ways of life, leaving them with limited viable exit options within their existing skill sets.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    electrification_scale_2026,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: ENERGY PLANNER - Rope
   --------------------------------------------------------------------------
   WHO: institutional (Rule-shaping/Planning for national energy infrastructure)
   WHEN: biographical (Planning for the 2010s-2026 transition)
   WHERE: mobile (Can navigate global energy markets and technological shifts)
   
   WHY THIS CLASSIFICATION:
   For the institutional energy planner, electrification is a 'Rope'—a coordination
   mechanism that finally makes solar "dispatchable" through battery
   integration. It provides a way to move the energy system
   from one state to another using technological leverage.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    electrification_scale_2026,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(national)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: LEGACY AUTO/OIL INDUSTRY - Snare
   --------------------------------------------------------------------------
   WHO: powerful (Legacy industrial leaders with entrenched infrastructure)
   WHEN: immediate (Short-term loss of competitiveness and market share)
   WHERE: constrained (Tied to fossil fuel reserves/combustion tech)
   
   WHY THIS CLASSIFICATION:
   As solar electricity becomes competitive and EV production scales, the legacy
   fossil fuel system faces a 'Snare'. Their exit options are costly as the
   "turning point" makes their model increasingly obsolete. This threatens their
   long-term viability and market dominance.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    electrification_scale_2026,
    snare,
    context(
        agent_power(powerful),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(global)
    )
).

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(electrification_scale_2026_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(electrification_scale_2026, Type1, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(electrification_scale_2026, Type2, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(electrification_scale_2026, Type3, context(agent_power(powerful), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3,
    Type1 \= Type3.

:- end_tests(electrification_scale_2026_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. INDIVIDUAL POWERLESS PERSPECTIVE: Added 'Coal Miner / Oil Rig Worker' to
 *    represent the human cost of the energy transition, experiencing it as a 'Snare'.
 *
 * 2. CLASSIFICATION RATIONALE:
 *    - Coal Miner (Snare): Job displacement, livelihood threats.
 *    - Energy Planner (Rope): A tool for building a new energy system.
 *    - Legacy Industry (Snare): Obsolete model, loss of market share.
 * 
 * 3. TANGLED ROPE: Electrification is a 'Tangled Rope'. It is a 'Rope'
 *    for energy planners and the environment, facilitating a cleaner future.
 *    However, it becomes a 'Snare' for those whose livelihoods are tied to
 *    the fossil fuel industry, creating significant social and economic friction.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * The core uncertainty is the sustainability of the required mineral supply and grid stability.
 */

omega_variable(
    lithium_supply_ceiling,
    "Is the availability of critical minerals (e.g., lithium, rare earths) a 'Mountain' that will eventually limit the Giga-scale transition, or will new chemistries and recycling create a 'Rope' of continuous supply?",
    resolution_mechanism("Geological audit of extractable reserves vs. projected vehicle and storage demand by 2040; investment in battery recycling technologies."),
    impact("If Mountain: The transition stalls. If Rope: Electrification continues unabated."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */
/**
 * VIABLE ALTERNATIVES
 *
 * ALTERNATIVE 1: Hydrogen Fuel Cells
 *    Viability: Historically seen as a direct alternative to Li-ion for transport and energy storage.
 *    Suppression: Outscaled by battery "gigafactories" due to economies of scale and faster market adoption.
 *
 * CONCLUSION:
 * While electrification is a powerful 'Rope' for energy transition, its
 * rapid scaling creates a 'Snare' for legacy industries and workers. The
 * suppression of alternative energy vectors (like hydrogen) further solidifies
 * the path towards a predominantly battery-electric future.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/electrification_scale_2026].
 * 2. Multi-perspective: ?- multi_index_report(electrification_scale_2026).
 * 3. Run tests: ?- run_tests(electrification_scale_2026_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: elencher_identity_transformation
% ============================================================================
% Generated: 2026-01-21
% Model: Gemini 2.0 Flash
% Source: Iain M. Banks, "Excession"
% ============================================================================

:- module(elencher_identity_transformation, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: elencher_identity_transformation
 * human_readable: Zetetic Elencher Radical Flux
 * domain: technological/social/philosophical
 * temporal_scope: Future (The Culture Universe)
 * spatial_scope: Galactic
 * * SUMMARY:
 * The Zetetic Elench define their identity through a commitment to radical self-transformation. 
 * Unlike the stable "monosophical" Culture, Elenchers seek out the undiscovered to be changed 
 * by it, ensuring they are never the same entity twice between meetings.
 * * KEY AGENTS:
 * - The Zetetic Elencher: A ship, drone, or human committed to incorporating new tech and info.
 * - The Culture Citizen: Represents a "stable society" where identity is predictable.
 * - The Undiscovered: The external civilizations and technologies that act as transformative drivers.
 * * NARRATIVE ARC:
 * The constraint functions as a "vocation" or "calling" where the agent's internal state must 
 * constantly update to incorporate external truth, rendering the previous self obsolete.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for [STEP 1] and [STEP 2] of the DR-Audit Suite
narrative_ontology:interval(elencher_identity_transformation, 0, 10).
narrative_ontology:constraint_claim([elencher_identity_transformation], [philosophical_mandate]).

% Base extractiveness score (0.0 = no extraction, 1.0 = full extraction)
% Rationale: The Elench seek to be changed *by* the other, not to change the other. 
% Extraction is internal (self-obsolescence) rather than predatory.
domain_priors:base_extractiveness(elencher_identity_transformation, 0.1).

% Suppression score (0.0 = no suppression, 1.0 = full suppression)
% Rationale: The Elench explicitly reject the Culture's stable approach as unlikely 
% to reach "pan-relevant truth". Alternatives are visible but shunted for the mission.
domain_priors:suppression_score(elencher_identity_transformation, 0.2).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(elencher_identity_transformation, extractiveness, 0.1).
narrative_ontology:constraint_metric(elencher_identity_transformation, suppression_requirement, 0.2).

% Enforcement requirements
% Emerges naturally as a "calling" or "vocation" for the splinter group.
domain_priors:emerges_naturally(elencher_identity_transformation).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(elencher_identity_transformation, zetetic_elench). % Gain "pan-relevant truth"
constraint_victim(elencher_identity_transformation, continuity_of_self). % The previous entity is "never encountered twice"

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE ELENCHER SHIP - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional (The ship/drone as a self-governing entity)
   WHEN: generational (Long-term pursuit of "pan-relevant truth")
   WHERE: mobile (Seeking out the undiscovered)
   SCOPE: global (Galactic scale)
   
   WHY THIS CLASSIFICATION:
   For the Elencher entity, this flux is a "Rope"—a functional coordination 
   mechanism for their "mission". It is the tool they use to reach a higher 
   truth that stable societies cannot access.
   
   NARRATIVE EVIDENCE:
   "It was a search for the sort of pan-relevant truth... it was a vocation, 
   a mission, a calling".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    elencher_identity_transformation,
    rope,
    context(
        agent_power(institutional),
        time_horizon(generational),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE CULTURE CITIZEN - Snare
   --------------------------------------------------------------------------
   
   WHO: powerless (A "more stable society" member meeting an Elencher)
   WHEN: immediate (A single occasion or meeting)
   WHERE: constrained (Bound by their own societal stability)
   SCOPE: local (Between meetings)
   
   WHY THIS CLASSIFICATION:
   For an outsider, this flux is a "Snare." It strangles the possibility of 
   consistent relationship or recognition; you can "never encounter the same 
   entity twice," making the Elencher socially illegible.
   
   NARRATIVE EVIDENCE:
   "could meet some Elencher... on successive occasions and never encounter 
   the same entity twice".
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    elencher_identity_transformation,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE ZETETIC ANALYST - Mountain
   --------------------------------------------------------------------------
   
   WHO: analytical (Observer of the "pan-relevant truth")
   WHEN: civilizational (Evolution of knowledge)
   WHERE: analytical (Observer stance)
   SCOPE: global (The universe itself)
   
   WHY THIS CLASSIFICATION:
   From an analytical perspective, the necessity of change to reach truth is a 
   "Mountain." It is an objective requirement; to be changed by the 
   undiscovered is the only way to reach a truth that is not "monosophical".
   
   NARRATIVE EVIDENCE:
   "sought out the undiscovered not to change it but to be changed by it".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    elencher_identity_transformation,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(civilizational),
        exit_options(analytical),
        spatial_scope(global)
    )
) :- !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(elencher_identity_transformation_tests).

test(multi_perspective_flux) :-
    % Institutional (Ship) sees Rope
    constraint_indexing:constraint_classification(elencher_identity_transformation, rope, context(institutional, _, _, _)),
    % Individual Powerless (Culture Citizen) sees Snare
    constraint_indexing:constraint_classification(elencher_identity_transformation, snare, context(powerless, _, _, _)),
    % Analytical sees Mountain
    constraint_indexing:constraint_classification(elencher_identity_transformation, mountain, context(analytical, _, _, _)).

test(extraction_internalization) :-
    % Demonstrates low extractiveness (0.1) because the "sacrifice" is the self.
    domain_priors:base_extractiveness(elencher_identity_transformation, E),
    E < 0.2.

:- end_tests(elencher_identity_transformation_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-21
 * * KEY DECISIONS:
 * * 1. EXTRACTIVENESS SCORE (0.1):
 * Reasoning: The Elench explicitly avoid colonizing or changing others; 
 * they prefer to be the ones "changed". The extraction is a form 
 * of philosophical "burning" of the old self to fuel the new.
 * * 2. PERSPECTIVE SELECTION:
 * The model contrasts the Elencher's "vocation" (Rope) with the stable 
 * Culture observer's experience of identity erosion (Snare).
 * * 3. CLASSIFICATION RATIONALE:
 * The "Mountain" classification for the Analyst reflects the text's 
 * description of "pan-relevant truth" as something that requires a 
 * specific, unavoidable path of radical openness.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    pan_relevant_truth_existence,
    "Does 'pan-relevant truth' exist as an objective Mountain, or is it a 
     subjective Rope manufactured by the Elench process?",
    resolution_mechanism("Comparison of Elencher data across multiple divergent civilization encounters"),
    impact("If Mountain: The Elench mission is valid. If Rope: It is a circular Snare of identity loss."),
    confidence_without_resolution(medium)
).

omega_variable(
    elencher_identity_persistence,
    "Can a 'self' be encounterable if it is never the same entity twice?",
    resolution_mechanism("Verification of core consciousness continuity despite tech/info changes"),
    impact("If yes: It is a functional Rope. If no: It is a psychological Mountain of extinction."),
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: The Culture's "Monosophical" Approach
 * Viability: Historically the "perfect example" of a stable society.
 * Suppression: Shied away from by the Elench as unlikely to find universal truth.
 * Evidence: "Culture's monosophical approach was [un]likely ever to throw up" pan-relevant truth.
 * * CONCLUSION:
 * The Elench vocation transforms the stable "Self" (Culture Mountain) into a 
 * "Process" (Elencher Rope), effectively suppressing the alternative of 
 * identity continuity in favor of informational fidelity.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

% Load: ?- [elencher_identity_transformation].
% Multi-perspective: ?- multi_index_report(elencher_identity_transformation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: elite_capture_2026
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_elite_capture_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: elite_capture_2026
 * human_readable: Staley-Epstein Narrative Neutralization
 * domain: social/political
 * * SUMMARY:
 * Correspondence from 2014 between Jes Staley and Jeffrey Epstein highlights
 * the mechanism of "buying off" revolutionary potential through commercial
 * subversion (e.g., "bought off by Jay Z"). This creates a constraint where
 * organic social coordination is diverted into performative theater to
 * preserve institutional stability.
 * * KEY AGENTS:
 * - Dissident Groups ("The group that should be in the streets"): Subject (Powerless)
 * - Financial/Cultural Elites (Staley/Epstein/BlueMountain): Beneficiary (Institutional)
 * - Narrative Engineers: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Extraction is high (0.78). Social potential is extracted to maintain the
% status quo without providing functional reform.
domain_priors:base_extractiveness(elite_capture_2026, 0.78).

% Suppression is high (0.82). Alternative movements are suppressed not by
% force, but by absorption and "buying off" potential leaders.
domain_priors:suppression_score(elite_capture_2026, 0.82).

% Theater ratio is extreme (0.94). The primary mechanism is the replacement
% of functional protest with performative media imagery.
domain_priors:theater_ratio(elite_capture_2026, 0.94).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(elite_capture_2026, extractiveness, 0.78).
narrative_ontology:constraint_metric(elite_capture_2026, suppression_requirement, 0.82).
narrative_ontology:constraint_metric(elite_capture_2026, theater_ratio, 0.94).

% Constraint self-claim: The mechanism is presented as a form of social
% coordination that ensures stability.
narrative_ontology:constraint_claim(elite_capture_2026, coordination).

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(elite_capture_2026, institutional_finance_capital).
narrative_ontology:constraint_victim(elite_capture_2026, organic_social_coordination).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For those "in the streets," the environment is a Snare: a trap where
% their representative icons have been financialized against them.
constraint_indexing:constraint_classification(elite_capture_2026, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Elites view this capture as a Rope: a coordination tool to prevent
% disruptive social unrest and maintain market predictability.
constraint_indexing:constraint_classification(elite_capture_2026, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (PITON)
% Analysts view this as a Piton: The "coordination" function is atrophied
% into pure theater, maintained solely by institutional inertia and active management.
constraint_indexing:constraint_classification(elite_capture_2026, piton,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(arbitrage),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(elite_capture_2026_tests).

test(perspectival_gap) :-
    constraint_indexing:constraint_classification(elite_capture_2026, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(elite_capture_2026, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(piton_threshold) :-
    domain_priors:theater_ratio(elite_capture_2026, TR),
    TR >= 0.70.

test(high_extraction_validation) :-
    domain_priors:base_extractiveness(elite_capture_2026, E),
    E >= 0.46.

:- end_tests(elite_capture_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The extraction score (0.78) reflects the total diversion of social capital.
 * The theater_ratio (0.94) is anchored in Staley's observation that "hip
 * blacks in hip cars" serves as a substitute for real street-level action.
 * The perspectival gap is stark: what is a stability 'Rope' for elites is a
 * 'Snare' for dissidents whose movements are neutralized, and a 'Piton' for
 * analysts who see the dead function behind the performative shell.
 *
 * * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * This case presents a potential mandatrophy: is this a functional (if highly
 * extractive) Tangled Rope, or something else? The ambiguity is resolved by
 * the extreme theater_ratio (0.94). This metric forces an analytical
 * classification of Piton, correctly identifying that the original coordination
 * function (social reform) has atrophied completely, leaving only a performative
 * shell that extracts stability for elites. This prevents the system from
 * misclassifying theatrical control as functional coordination.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_elite_capture_2026,
    'Is "buying off" a permanent stabilizing mechanism or a delayed-fuse Snare for the elites themselves?',
    'Analysis of long-term social stability after the collapse of performative theater, or when a new movement emerges that is immune to commercial capture.',
    'If stable, it functions as a durable (if cynical) Rope. If it fails catastrophically, it was a Snare for all parties, trapping elites in a brittle system.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(elite_capture_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection. This models a system where the
% theatrical component was always high, and extraction intensified over time.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(ec_tr_t0, elite_capture_2026, theater_ratio, 0, 0.90).
narrative_ontology:measurement(ec_tr_t5, elite_capture_2026, theater_ratio, 5, 0.92).
narrative_ontology:measurement(ec_tr_t10, elite_capture_2026, theater_ratio, 10, 0.94).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(ec_ex_t0, elite_capture_2026, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(ec_ex_t5, elite_capture_2026, base_extractiveness, 5, 0.65).
narrative_ontology:measurement(ec_ex_t10, elite_capture_2026, base_extractiveness, 10, 0.78).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type: The mechanism, while theatrical, functions as a tool
% for enforcing the status quo by neutralizing dissent.
narrative_ontology:coordination_type(elite_capture_2026, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: empty_tomb_transformation
% ============================================================================
% Generated: 2026-01-21
% Model: Gemini 2.0 Flash
% Source: "Life is a Series of Empty Tombs" by cafebedouin.org
% ============================================================================

:- module(empty_tomb_transformation, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: empty_tomb_transformation
 * human_readable: The Resurrection Cycle (Empty Tombs)
 * domain: religious/social/psychological
 * temporal_scope: Perennial / Biographical
 * spatial_scope: Internal / The Familial and Social Fabric
 * * SUMMARY:
 * Life is framed as a constant series of dying to old selves and being reborn into new lives. 
 * Each life stage or "chapter" concludes with a "tomb of transition" that must be exited by rolling back 
 * the stone of the past to emerge transformed.
 * * KEY AGENTS:
 * - The Transitioning Subject: The individual currently "stuck in a tomb" or undergoing rebirth.
 * - The Old Self: The "dead" version of the person that must be left in the record of transformation.
 * - The Pastor/Witness: The analytical observer who frames the "profound wisdom" of the cycle.
 * - The Liturgical Institution: The "Church" context that provides the resurrection story as a social scaffold.
 * * NARRATIVE ARC:
 * The individual moves through a "string of pearls" of transformations. The constraint 
 * functions as a requirement for death (the end of a chapter) to precede new life. 
 * Without the "resurrection," the agent remains trapped in a stagnant tomb of their previous identity.
 */

/* ==========================================================================
   2. BASE PROPERTIES (Context-Independent)
   ========================================================================== */

% Required for [STEP 1] and [STEP 2] of the DR-Audit Suite
narrative_ontology:interval(empty_tomb_transformation, 0, 10).
narrative_ontology:constraint_claim([empty_tomb_transformation], [ontological_transformation]).

% Base extractiveness score (0.0-1.0)
% Rationale: Moderate (0.4). The process extracts the "old life" and involves "facing our own suffering". 
% While generative of "new life," the transition phase is a temporary liquidation of the self.
domain_priors:base_extractiveness(empty_tomb_transformation, 0.4).

% Suppression score (0.0-1.0)
% Rationale: Moderate (0.4). The "tomb" phase suppresses the visibility of the new life. 
% Additionally, the "fairy tale" interpretation of resurrection often suppresses the "profound wisdom" 
% of the actual cycle of growth.
domain_priors:suppression_score(empty_tomb_transformation, 0.4).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(empty_tomb_transformation, extractiveness, 0.4).
narrative_ontology:constraint_metric(empty_tomb_transformation, suppression_requirement, 0.4).

% Enforcement requirements
% Emerges naturally from the human stages of experience and development.
domain_priors:emerges_naturally(empty_tomb_transformation).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
% Beneficiary: The New Self (Reborn into a "new, different life").
constraint_beneficiary(empty_tomb_transformation, the_resurrected_self).
% Victim: The Old Self (Who must die and be left behind).
constraint_victim(empty_tomb_transformation, the_static_ego).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE STUCK INDIVIDUAL - Snare
   --------------------------------------------------------------------------
   
   WHO: powerless (Unable to "roll back the stone")
   WHEN: immediate (The present moment of being "stuck in a tomb")
   WHERE: trapped (Bounded by the transition with no visibility of new life)
   SCOPE: local (The immediate psychological state)
   
   WHY THIS CLASSIFICATION:
   For the individual unable to emerge, the cycle is a "Snare." The "tomb of transition" 
   becomes a static trap where life has ended but rebirth has not begun, extracting 
   the agent's hope and agency.
   
   NARRATIVE EVIDENCE:
   "Am I stuck in a tomb? ... The old us is dead... our suffering".
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    empty_tomb_transformation,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :-
    domain_priors:base_extractiveness(empty_tomb_transformation, E),
    E > 0.3,
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE REBORN AGENT - Rope
   --------------------------------------------------------------------------
   
   WHO: individual_moderate (Choosing to be "open to new life")
   WHEN: biographical (The "string of pearls" across the lifespan)
   WHERE: mobile (Emerged from the tomb; "roll back the stone")
   SCOPE: local
   
   WHY THIS CLASSIFICATION:
   For the agent who successfully transitions, the cycle is a "Rope." It is a 
   functional coordination mechanism for growth, allowing them to use past 
   "deaths" as a record of transformation that informs their new life.
   
   NARRATIVE EVIDENCE:
   "like a string of pearls, the tombs leave a record of who we were and our 
   transformation".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    empty_tomb_transformation,
    rope,
    context(
        agent_power(individual_moderate),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE PASTOR/WIZARD - Mountain
   --------------------------------------------------------------------------
   
   WHO: analytical (Ancient and wise observer of the "profound wisdom")
   WHEN: civilizational (Resurrection as an "Easter" message across thousands of years)
   WHERE: analytical (Observer stance)
   SCOPE: global
   
   WHY THIS CLASSIFICATION:
   To the observer, this cycle is a "Mountain"—an unchangeable law of development. 
   One cannot have "new life" without the "death" of the old; it is an objective 
   requirement for human experience.
   
   NARRATIVE EVIDENCE:
   "life is a constant series of dying and being reborn... from one moment to 
   the next".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    empty_tomb_transformation,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(civilizational),
        exit_options(analytical),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 4: THE CHURCH DOCTRINE - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional (Providing the "resurrection story" as a framework)
   WHEN: generational (Maintaining the homily and ritual over years)
   WHERE: mobile (Using the story to help people "roll back the stone")
   SCOPE: regional (The Holy Name Cathedral community)
   
   WHY THIS CLASSIFICATION:
   For the institution, the story is a "Rope"—a tool used to coordinate the 
   community's response to suffering and change, transforming the "fairy tale" 
   into a functional map for resilience.
   
   NARRATIVE EVIDENCE:
   "resurrection story made a kooky fairy tale into profound wisdom... the 
   living Jesus and his message of peace".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    empty_tomb_transformation,
    rope,
    context(
        agent_power(institutional),
        time_horizon(generational),
        exit_options(mobile),
        spatial_scope(regional)
    )
) :- !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(empty_tomb_transformation_tests).

test(multi_perspective_tomb) :-
    % Stuck (Powerless) sees Snare
    constraint_indexing:constraint_classification(empty_tomb_transformation, T1, context(powerless, immediate, trapped, local)),
    % Reborn (Moderate) sees Rope
    constraint_indexing:constraint_classification(empty_tomb_transformation, T2, context(individual_moderate, biographical, mobile, local)),
    % Pastor (Analytical) sees Mountain
    constraint_indexing:constraint_classification(empty_tomb_transformation, T3, context(analytical, civilizational, analytical, global)),
    T1 \= T2, T2 \= T3.

test(power_extractiveness_tomb) :-
    % The powerless (stuck in the tomb) experience more extraction of vitality/hope.
    ContextPowerless = context(powerless, immediate, trapped, local),
    ContextModerate = context(individual_moderate, biographical, mobile, local),
    constraint_indexing:extractiveness_for_agent(empty_tomb_transformation, ContextPowerless, Score1),
    constraint_indexing:extractiveness_for_agent(empty_tomb_transformation, ContextModerate, Score2),
    Score1 > Score2.

test(time_immutability_transformation) :-
    % Over biographical time, transformation is a Rope (possible through choice).
    % Over civilizational time, the cycle itself is a Mountain (fact of life).
    constraint_indexing:effective_immutability(civilizational, analytical, mountain).

:- end_tests(empty_tomb_transformation_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-21
 * * KEY DECISIONS:
 * * 1. EXTRACTIVENESS SCORE (0.4):
 * Reasoning: I chose a moderate score because the transition requires "dying" to the 
 * old self, which is an extraction of established identity and comfort.
 * * 2. PERSPECTIVE SELECTION:
 * I selected the "Stuck" individual (Snare) and the "Reborn" agent (Rope) to highlight 
 * the core pedagogical shift: moving from being a victim of transition to an 
 * author of resurrection.
 * * 3. CLASSIFICATION RATIONALE:
 * Individual Powerless → Snare: In the "immediate" moment of "suffering," the tomb is 
 * an inescapable death of the old self.
 * Analytical → Mountain: The observer sees the cycle as a fixed feature of human 
 * growth across "thousands of years".
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    resurrection_agency,
    "Is the ability to 'roll back the stone' an internal choice (Rope) or a 
     stochastic event that requires external grace (Mountain)?",
    resolution_mechanism("Longitudinal tracking of individuals in 'tombs of transition' with vs. without internal 'hope' metrics"),
    impact("If choice: Rebirth is a Rope. If stochastic: It is a Mountain/Snare."),
    confidence_without_resolution(medium)
).

omega_variable(
    tomb_duration_determinism,
    "Is the length of the 'tomb of transition' fixed by the nature of the chapter (Mountain) 
     or variable based on individual effort (Rope)?",
    resolution_mechanism("Comparison of transition times across diverse psychological 'deaths'"),
    impact("If fixed: The tomb is a Mountain. If variable: It is a Rope."),
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Eternal Sameness (Stagnation)
 * Viability: Avoiding the "death" of a chapter to keep the old self.
 * Suppression: Suppressed by the text as a state of being "stuck in a tomb".
 * * ALTERNATIVE 2: Scientific Secular Materialism
 * Viability: Viewing life as a linear accumulation of data rather than a series of rebirths.
 * Suppression: Shunted by the Pastor as a "fairy tale" (the literal view) that misses 
 * the "profound wisdom" of the cycle.
 * * CONCLUSION:
 * The existence of Alternative 1 (Stagnation) makes the "Resurrection" a functional 
 * Rope for those who wish to live. Without the "Stone rolling,"sameness becomes 
 * a terminal Snare.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

% Load: ?- [empty_tomb_transformation].
% Multi-perspective: ?- constraint_indexing:multi_index_report(empty_tomb_transformation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: em_clinical_guidelines
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-28
% ============================================================================

:- module(constraint_em_clinical_guidelines, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: em_clinical_guidelines
 * human_readable: Emergency Medicine Clinical Guidelines
 * domain: medical/legal/institutional
 * * SUMMARY:
 * Clinical guidelines (e.g., PECARN for pediatric head trauma or Ottawa Ankle Rules)
 * are introduced as decision-support tools to standardize care and reduce unnecessary testing.
 * However, their ontological status shifts dramatically depending on the agent's exposure
 * to litigation risk and systemic throughput pressure, creating a significant perspectival gap.
 * * KEY AGENTS:
 * - Frontline ER Physician: Subject (Powerless), balancing diagnostic speed and liability.
 * - Hospital Quality Committee: Beneficiary (Institutional), monitoring compliance and cost metrics.
 * - Systems Auditor: Observer (Analytical), evaluating the structural properties of the guideline system.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(em_clinical_guidelines, 0.60). % Extraction of cognitive autonomy, time for documentation, and exposure to liability.
domain_priors:suppression_score(em_clinical_guidelines, 0.50).   % Clinical intuition is suppressed in favor of algorithmic adherence.
domain_priors:theater_ratio(em_clinical_guidelines, 0.25).       % Primarily functional, but with a growing component of "defensive medicine" documentation.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(em_clinical_guidelines, extractiveness, 0.60).
narrative_ontology:constraint_metric(em_clinical_guidelines, suppression_requirement, 0.50).
narrative_ontology:constraint_metric(em_clinical_guidelines, theater_ratio, 0.25).

% Constraint self-claim (what does the constraint claim to be?)
% The system is presented as a pure coordination mechanism for quality improvement.
narrative_ontology:constraint_claim(em_clinical_guidelines, coordination).

% Binary flags
domain_priors:requires_active_enforcement(em_clinical_guidelines). % Required for Tangled Rope; enforced via audits and legal "standard of care".

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(em_clinical_guidelines, hospital_administrators).
narrative_ontology:constraint_beneficiary(em_clinical_guidelines, insurance_payers).
narrative_ontology:constraint_victim(em_clinical_guidelines, frontline_physicians).
narrative_ontology:constraint_victim(em_clinical_guidelines, atypical_patients).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The frontline ER physician experiences the guideline as an asymmetric liability trap.
% Following it gives little reward, but deviating creates significant legal risk.
% χ = 0.60 (ε) * 1.5 (π(powerless)) * 0.8 (σ(local)) = 0.72
constraint_indexing:constraint_classification(em_clinical_guidelines, snare,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The hospital quality committee sees a pure coordination tool for standardizing care,
% reducing costs, and improving population-level metrics.
% χ = 0.60 (ε) * -0.2 (π(institutional)) * 1.0 (σ(national)) = -0.12 (felt as a benefit)
constraint_indexing:constraint_classification(em_clinical_guidelines, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The system analyst sees a hybrid constraint. It has a genuine coordination function
% (beneficiaries exist) but also imposes significant, asymmetric extraction on a
% specific group (victims exist), and requires active enforcement to maintain.
% χ = 0.60 (ε) * 1.15 (π(analytical)) * 1.2 (σ(global)) = 0.828
constraint_indexing:constraint_classification(em_clinical_guidelines, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(em_clinical_guidelines_tests).

test(perspectival_gap) :-
    % Verify the gap between the physician (Snare) and the committee (Rope).
    constraint_indexing:constraint_classification(em_clinical_guidelines, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(em_clinical_guidelines, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    assertion(TypePowerless == snare),
    assertion(TypeInstitutional == rope),
    assertion(TypePowerless \= TypeInstitutional).

test(analytical_classification_is_tangled_rope) :-
    % Verify the analytical observer correctly identifies the hybrid nature.
    constraint_indexing:constraint_classification(em_clinical_guidelines, TypeAnalytical, context(agent_power(analytical), _, _, _)),
    assertion(TypeAnalytical == tangled_rope).

test(high_extraction_threshold) :-
    % Verify the base extractiveness meets the threshold for a high-extraction constraint.
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(em_clinical_guidelines, ExtMetricName, E),
    assertion(E >= 0.46).

:- end_tests(em_clinical_guidelines_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness of 0.60 reflects the significant cost imposed on clinicians
 * in terms of cognitive autonomy, documentation time, and legal liability. The suppression
 * score of 0.50 captures how these guidelines devalue expert clinical intuition for
 * non-standard cases.
 *
 * The key insight is the perspectival gap. For the institution, it's a Rope that coordinates
 * behavior for systemic benefit. For the physician, it's a Snare that extracts autonomy
 * and creates risk. The Analytical Observer classification of Tangled Rope is crucial;
 * it prevents mandatrophy by correctly identifying the structure as a hybrid of both
 * coordination and extraction, which is validated by the presence of both beneficiaries
 * and victims, alongside the need for active enforcement. This is a classic example of
 * a well-intentioned Rope degrading into a Tangled Rope under institutional and legal pressure.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_em_guidelines,
    'Do the guidelines primarily track evolving biological truth or ossifying legal precedent?',
    'Analysis of guideline update triggers: compare changes following major clinical trials vs. changes following major malpractice settlements.',
    'If driven by legal precedent, the system is a pure Snare disguised as medicine. If driven by clinical trials, it retains a core Rope function.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(em_clinical_guidelines, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data models the guideline's lifecycle from a helpful suggestion (low E)
% to a rigid, legally enforced standard (high E). This trajectory is common as
% institutions codify practices. Extraction accumulation is clearly visible.

% Theater ratio over time (defensive documentation increases):
narrative_ontology:measurement(em_guidelines_tr_t0, em_clinical_guidelines, theater_ratio, 0, 0.10).
narrative_ontology:measurement(em_guidelines_tr_t5, em_clinical_guidelines, theater_ratio, 5, 0.18).
narrative_ontology:measurement(em_guidelines_tr_t10, em_clinical_guidelines, theater_ratio, 10, 0.25).

% Extraction over time (autonomy loss and legal risk increase):
narrative_ontology:measurement(em_guidelines_ex_t0, em_clinical_guidelines, base_extractiveness, 0, 0.48).
narrative_ontology:measurement(em_guidelines_ex_t5, em_clinical_guidelines, base_extractiveness, 5, 0.55).
narrative_ontology:measurement(em_guidelines_ex_t10, em_clinical_guidelines, base_extractiveness, 10, 0.60).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The guideline's primary function is to standardize information processing for diagnosis.
narrative_ontology:coordination_type(em_clinical_guidelines, information_standard).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: endowment_effect
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Thaler, R. (1980) / Kahneman, Knetsch, & Thaler (1990)
% ============================================================================

:- module(constraint_endowment_effect, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: endowment_effect
 * human_readable: The Endowment Effect
 * domain: economic/social/cognitive
 * temporal_scope: Permanent (Human Cognitive Architecture)
 * spatial_scope: Global (Human Decision Systems)
 * * SUMMARY:
 * The endowment effect is a finding in behavioral economics where individuals 
 * ascribe more value to things merely because they own them. This leads to 
 * an asymmetry between the "Willingness to Pay" (WTP) and the "Willingness 
 * to Accept" (WTA), often resulting in market inefficiencies where 
 * beneficial trades do not occur.
 * * KEY AGENTS:
 * - The Owner: Ascribes sentimental or psychological "bonus" value to an object.
 * - The Potential Buyer: Values the object based on its objective utility or 
 * market price.
 * - The Market Optimizer: An analytical agent observing the failure of 
 * Coasian bargaining due to this psychological gap.
 * * NARRATIVE ARC:
 * The effect functions as a "Mountain" of psychological inertia. For the 
 * salesperson, it is a "Rope" (using "try-before-you-buy" to create ownership). 
 * For the person trapped in an old, inefficient house or bad investment due to 
 * sentiment, it is a "Snare" that strangles their financial mobility.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for structural identification
narrative_ontology:interval(endowment_interval, 0, 10).
narrative_ontology:constraint_claim(endowment_effect, snare).

% Base extractiveness score (0.0-1.0)
% Rationale: It extracts "liquidity" and "efficient allocation" from the market. 
% It forces the buyer to pay more than utility warrants or prevents a 
% mutually beneficial sale.
domain_priors:base_extractiveness(endowment_effect, 0.3).

% Suppression score (0.0-1.0)
% Rationale: It suppresses the alternative of "rational market valuation." 
% The brain's loss aversion makes the fair market price appear as a loss, 
% making the rational trade invisible or emotionally painful.
domain_priors:suppression_score(endowment_effect, 0.4).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(endowment_effect, extractiveness, 0.3).
narrative_ontology:constraint_metric(endowment_effect, suppression_requirement, 0.4).

% Enforcement requirements
domain_priors:emerges_naturally(endowment_effect).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(endowment_effect, existing_owners).
constraint_beneficiary(endowment_effect, retailers_offering_trials).
constraint_victim(endowment_effect, market_efficiency).
constraint_victim(endowment_effect, asset_purchasers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE BEHAVIORAL ECONOMIST - MOUNTAIN
   --------------------------------------------------------------------------
   
   WHO: analytical - Observer, not participant
   WHEN: civilizational - Observing a universal cognitive invariant
   WHERE: trapped - Human cognitive architecture is currently fixed
   SCOPE: global - Worldwide
   
   WHY THIS CLASSIFICATION:
   To the scientist, this is a Mountain. It is an unchangeable consequence of 
   how the human brain processes loss and ownership. You cannot simply 
   "choose" not to feel the loss aversion that drives the effect; it is 
   a feature of the biological "terrain".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    endowment_effect,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(civilizational),
        exit_options(trapped),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE CAR SALESMAN - ROPE
   --------------------------------------------------------------------------
   
   WHO: institutional - Rule-making/process-shaping power over a sale
   WHEN: biographical - Achieving sales targets over a career
   WHERE: arbitrage - Can use "test drives" to play with ownership psychology
   SCOPE: local - Immediate environment
   
   WHY THIS CLASSIFICATION:
   For the institutional seller, the effect is a Rope. It is a functional 
   coordination mechanism for closing deals. By encouraging a "test drive" 
   or "free home trial," they induce a sense of ownership, pulling the 
   customer toward a purchase through the psychological "tether" of 
   the endowment effect.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    endowment_effect,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(arbitrage),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE IMPRISONED HEIR - SNARE
   --------------------------------------------------------------------------
   
   WHO: powerless - Subject to emotional/cultural rules
   WHEN: immediate - Today's financial crisis vs. the object
   WHERE: constrained - Exit possible but psychologically/culturally costly
   SCOPE: local - Village or immediate household
   
   WHY THIS CLASSIFICATION:
   For an heir who desperately needs money but cannot bring themselves to 
   sell a family estate, the effect is a Snare. Their own psychology 
   strangles their financial future. The value they ascribe to the "endowment" 
   prevents them from taking the "exit" that market reality offers, 
   extracting their potential wealth and freedom.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    endowment_effect,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(local)
    )
) :- !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(endowment_effect_tests).

test(multi_perspective_variance) :-
    % Test that different perspectives yield different classifications
    constraint_indexing:constraint_classification(endowment_effect, mountain, context(agent_power(analytical), _, _, _)),
    constraint_indexing:constraint_classification(endowment_effect, rope, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(endowment_effect, snare, context(agent_power(powerless), _, _, _)).

test(power_extractiveness_asymmetry) :-
    % Powerless experience more extraction as the "Snare" of sentiment
    ContextPowerless = context(powerless, immediate, constrained, local),
    ContextPowerful = context(institutional, biographical, arbitrage, local),
    constraint_indexing:extractiveness_for_agent(endowment_effect, ContextPowerless, Score1),
    constraint_indexing:extractiveness_for_agent(endowment_effect, ContextPowerful, Score2),
    Score1 > Score2.

test(time_immutability_scale) :-
    % Biological traits are Mountains on civilizational scales
    constraint_indexing:effective_immutability(civilizational, trapped, mountain).

:- end_tests(endowment_effect_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * * 1. EXTRACTIVENESS SCORE (0.3):
 * Reasoning: Low-moderate. While it prevents efficient market clearing, 
 * it is often a "voluntary" internal extraction of opportunity cost 
 * rather than a coercive external theft.
 * * 2. SUPPRESSION SCORE (0.4):
 * Reasoning: Moderate. Traditional economics (alternatives) is taught 
 * universally, but the internal "noise" of the bias suppresses its 
 * application in high-stakes personal decisions.
 * * 3. PERSPECTIVE SELECTION:
 * Selected Analytical (Mountain), Institutional (Rope), and Powerless (Snare) 
 * to demonstrate the full spread of indexical types.
 * * 4. OMEGAS:
 * omega_variable(
 * biological_origin,
 * "Is the endowment effect an evolved biological heuristic (Mountain) or a 
 * learned social norm related to property rights (Rope)?",
 * resolution_mechanism("Comparative cross-cultural studies of societies with 
 * differing property concepts"),
 * impact("If Mountain: Fixed barrier. If Rope: Can be de-conditioned."),
 * confidence_without_resolution(medium)
 * ).
 */

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Coasian Bargaining
 * Viability: Theoretically, initial allocation shouldn't matter for 
 * efficiency if transaction costs are zero.
 * Suppression: Suppressed by the internal psychological "cost" of parting 
 * with owned goods.
 * * CONCLUSION:
 * The presence of a rational market alternative (Coase) that is suppressed 
 * by a natural cognitive bias confirms the "Snare" type for the individual 
 * actor while remaining a "Mountain" of reality for the observer.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS CONSTRAINT:
 * 1. Load: ?- [constraint_endowment_effect].
 * 2. Multi-perspective: ?- multi_index_report(endowment_effect).
 * 3. Run tests: ?- run_tests(endowment_effect_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: epigenetics_complexity_2026
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: "The hidden power of epigenetics" by Colin Barras
% ============================================================================

:- module(constraint_epigenetics_complexity_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: epigenetics_complexity_2026
 * human_readable: Epigenetic Regulatory Constraint
 * domain: biological/scientific
 * temporal_scope: 2001-2026
 * spatial_scope: Global (Cellular level)
 * 
 * SUMMARY:
 * Following the discovery that the human genome contains only ~20,000 protein-coding 
 * genes, epigenetics emerged as the primary mechanism explaining biological complexity. 
 * It describes how molecules interact with DNA/RNA to influence gene activity without 
 * altering the underlying code, often in response to environmental pressures.
 * 
 * KEY AGENTS:
 * - The Stressed Organism (Individual Powerless): A cell/organism forced to adapt to environmental toxins.
 * - The Evolutionary Biologist (Institutional): Uses epigenetics as an explanatory framework.
 * - The Biochemist (Analytical): Views the molecular interactions as immutable physical law.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(epigenetics_complexity_2026, 0, 10).
narrative_ontology:constraint_claim(epigenetics_complexity_2026, rope).

% Base extractiveness score: 0.1 (Minimal asymmetry)
% Rationale: Epigenetics is a fundamental biological function; it doesn't 
% "extract" in a social sense, though it forces physiological resource reallocation.
domain_priors:base_extractiveness(epigenetics_complexity_2026, 0.1).

% Suppression score: 0.2 (Low)
% Rationale: Alternatives like "pure genetic determinism" were naturally suppressed 
% by the empirical data of the Human Genome Project.
domain_priors:suppression_score(epigenetics_complexity_2026, 0.2).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(epigenetics_complexity_2026, extractiveness, 0.1).
narrative_ontology:constraint_metric(epigenetics_complexity_2026, suppression_requirement, 0.2).

% Enforcement requirements: Emerges naturally through biochemical interactions.
domain_priors:emerges_naturally(epigenetics_complexity_2026).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(epigenetics_complexity_2026, adapting_organisms).
constraint_victim(epigenetics_complexity_2026, none).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE EVOLUTIONARY BIOLOGIST - Rope
   --------------------------------------------------------------------------
   WHO: institutional (Rule-shaping/Scientific observer)
   WHEN: historical (Century-scale evolutionary rethinking)
   WHERE: mobile (Can navigate between genetic and epigenetic models)
   
   WHY THIS CLASSIFICATION:
   For the scientist, epigenetics is a "Rope"—a functional coordination 
   mechanism that allows them to explain the complexity of evolution 
   beyond simple protein-coding genes.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    epigenetics_complexity_2026,
    rope,
    context(
        agent_power(institutional),
        time_horizon(historical),
        exit_options(mobile),
        spatial_scope(global)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE STRESSED ORGANISM (YEAST) - Snare
   --------------------------------------------------------------------------
   WHO: powerless (Subject to environmental toxins)
   WHEN: immediate (Short-term survival)
   WHERE: trapped (Cannot leave the toxic environment)
   
   WHY THIS CLASSIFICATION:
   For an organism in a toxic environment, epigenetics acts as a "Snare." 
   The environment forces a "silence or die" choice. The mechanism 
   constrains the cell's behavior to a narrow survival path.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    epigenetics_complexity_2026,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: BIOCHEMICAL ANALYST - Mountain
   --------------------------------------------------------------------------
   WHO: analytical (Observer of molecular law)
   WHEN: civilizational (Species-level biological constants)
   WHERE: analytical (Universal application)
   
   WHY THIS CLASSIFICATION:
   From a molecular perspective, the interaction of molecules with DNA/RNA 
   is a "Mountain"—a fixed physical reality of how life operates. 
   It is a zero-degree-of-freedom constraint of biological architecture.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    epigenetics_complexity_2026,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(civilizational),
        exit_options(analytical),
        spatial_scope(global)
    )
).

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(epigenetics_complexity_2026_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(epigenetics_complexity_2026, Type1, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(epigenetics_complexity_2026, Type2, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(epigenetics_complexity_2026, Type3, context(agent_power(analytical), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3,
    Type1 \= Type3.

:- end_tests(epigenetics_complexity_2026_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. PERSPECTIVE SELECTION: 
 *    Focused on the contrast between the organism as a subject of environmental 
 *    pressure (Snare), the biologist using epigenetics as an explanatory tool (Rope), 
 *    and the biochemist seeing the underlying physical laws (Mountain).
 * 
 * 2. CLASSIFICATION RATIONALE:
 *    - Subject (Snare): Survival in toxins is a narrow, forced path.
 *    - Biologist (Rope): A functional way to explain why 20,000 genes suffice.
 *    - Biochemist (Mountain): The underlying chemical interactions are immutable laws.
 * 
 * 3. AMBIGUITIES: 
 *    The source mentions "some biologists are convinced" epigenetics can influence 
 *    evolution, implying this isn't a settled Mountain for all scientists yet, but a 
 *    contested Rope, which is well-represented by the multiple perspectives.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * Key uncertainties about the long-term impact and completeness of the theory.
 */

omega_variable(
    epigenetic_inheritance_breadth,
    "To what extent are epigenetic modifications 'reset' vs 'inherited' in humans across generations?",
    resolution_mechanism("Long-term multi-generational cohort studies tracking environmental stress and epigenetic markers."),
    impact("If fully reset: Epigenetics is a biographical Rope. If inherited: It can become a generational Snare or Mountain."),
    confidence_without_resolution(medium)
).

omega_variable(
    complexity_source_completeness,
    "Does epigenetics fully explain the gap between gene count and biological complexity, or are other major mechanisms yet to be discovered?",
    resolution_mechanism("Complete biochemical modeling of the cell-state space, and discovery of novel regulatory pathways."),
    impact("If incomplete: Epigenetics remains a partial Rope. If complete: It becomes a foundational Mountain of biology."),
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * 
 * ALTERNATIVE 1: Gene-Centric Determinism
 *    Viability: Was the dominant theory prior to the Human Genome Project's completion in 2001.
 *    Suppression: Empirically falsified by the unexpectedly low gene count (~20,000) found in the human genome.
 *    Evidence: "The number was so far below expectations that some thought it must be an error."
 * 
 * CONCLUSION:
 * The collapse of Alternative 1 (gene-centric determinism) forced the scientific community to adopt epigenetics as a new 'Rope' to explain observed biological complexity, shifting the paradigm from a simple blueprint to a dynamic regulatory system.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/epigenetics_complexity_2026].
 * 2. Multi-perspective: ?- multi_index_report(epigenetics_complexity_2026).
 * 3. Run tests: ?- run_tests(epigenetics_complexity_2026_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: epstein_espionage_crisis_2026
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2026-02-05
% ============================================================================

:- module(constraint_epstein_espionage_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: epstein_espionage_2026
 * human_readable: The Epstein-Starmer Sovereignty Crisis
 * domain: political/espionage
 * * SUMMARY:
 * Millions of DOJ pages claiming Jeffrey Epstein was an Israeli spy have triggered 
 * a crisis in the UK. The fallout includes the dismissal of Ambassador Peter 
 * Mandelson and demands for internal vetting files. The situation is further 
 * complicated by allegations of algorithmic censorship by TikTok regarding 
 * these files.
 * * KEY AGENTS:
 * - UK Public/Opposition: Subject (Powerless)
 * - Starmer Government/Security Services: Beneficiary (Institutional)
 * - European Lawmakers/Informants: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Extraction is high (0.68) due to the systemic threat to government 
% stability and the disruption of diplomatic channels.
domain_priors:base_extractiveness(epstein_espionage_2026, 0.68). 

% Suppression is near-total (0.91) as the government resists file releases 
% and digital platforms allegedly suppress related content.
domain_priors:suppression_score(epstein_espionage_2026, 0.91).   

% Theater ratio is high (0.76) as the "national security" justification 
% masks the potential for institutional self-preservation.
domain_priors:theater_ratio(epstein_espionage_2026, 0.76).       

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(epstein_espionage_2026, extractiveness, 0.68).
narrative_ontology:constraint_metric(epstein_espionage_2026, suppression_requirement, 0.91).
narrative_ontology:constraint_metric(epstein_espionage_2026, theater_ratio, 0.76).

% Primary keys for the classification engine
% High-extraction stakeholders
narrative_ontology:constraint_beneficiary(epstein_espionage_2026, state_intelligence_services).
narrative_ontology:constraint_victim(epstein_espionage_2026, public_trust_in_leadership).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For the UK public, the withholding of vetting files is a Snare: an 
% opaque institutional trap that prevents accountability for network ties.
constraint_indexing:constraint_classification(epstein_espionage_2026, snare, 
    context(agent_power(powerless), 
            time_horizon(biographical), 
            exit_options(trapped), 
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The Starmer government views vetting secrecy as a Rope: essential 
% coordination for national security and the protection of intelligence assets.
constraint_indexing:constraint_classification(epstein_espionage_2026, rope, 
    context(agent_power(institutional), 
            time_horizon(historical), 
            exit_options(mobile), 
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (PITON)
% Analysts view the current refusal to release files as a Piton: the 
% "security" function has atrophied into an inertial, theatrical defense 
% of a compromised status quo (Theater Ratio > 0.70).
constraint_indexing:constraint_classification(epstein_espionage_2026, piton,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(epstein_starmer_2026_tests).

test(perspectival_gap) :-
    constraint_indexing:constraint_classification(epstein_espionage_2026, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(epstein_espionage_2026, rope, context(agent_power(institutional), _, _, _)).

test(piton_threshold) :-
    domain_priors:theater_ratio(epstein_espionage_2026, TR),
    TR > 0.70.

test(extraction_accumulation) :-
    domain_priors:base_extractiveness(epstein_espionage_2026, E),
    E > 0.46.

:- end_tests(epstein_starmer_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The extraction score (0.68) is driven by the dismissal of Ambassador 
 * Peter Mandelson and the existential threat to Starmer's premiership 
 *. The high theater_ratio (0.76) reflects the discrepancy between 
 * the stated goal of "security vetting" and the public perception of 
 * institutional cover-up.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_epstein_vetting,
    'Do the internal vetting files contain evidence of direct Starmer network ties?',
    'Formal release or judicial audit of internal UK government vetting files.',
    'Evidence confirms a permanent Snare; Lack of evidence restores the Rope.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(epstein_espionage_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Theater ratio rises as "algorithmic disruption" claims are added to the secrecy.
narrative_ontology:measurement(ep_tr_t0, epstein_espionage_2026, theater_ratio, 0, 0.25).
narrative_ontology:measurement(ep_tr_t5, epstein_espionage_2026, theater_ratio, 5, 0.50).
narrative_ontology:measurement(ep_tr_t10, epstein_espionage_2026, theater_ratio, 10, 0.76).

% Extraction spikes upon the DOJ document release and Mandelson dismissal.
narrative_ontology:measurement(ep_ex_t0, epstein_espionage_2026, base_extractiveness, 0, 0.15).
narrative_ontology:measurement(ep_ex_t5, epstein_espionage_2026, base_extractiveness, 5, 0.45).
narrative_ontology:measurement(ep_ex_t10, epstein_espionage_2026, base_extractiveness, 10, 0.68).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: epstein_files_2026
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2026-02-05
% ============================================================================

:- module(constraint_epstein_files_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: epstein_files_2026
 * human_readable: Epstein Espionage & UK Political Fallout
 * domain: political/espionage
 * * SUMMARY:
 * The early Feb 2026 release of files suggesting Jeffrey Epstein was an 
 * "Israeli spy" has triggered a sovereignty crisis in the UK. 
 * The dismissal of Ambassador Peter Mandelson and demands for "vetting files" 
 * represent a high-extraction constraint on the Starmer government's stability.
 * * KEY AGENTS:
 * - UK Public/Voters: Subject (Powerless)
 * - Starmer Government/Security Services: Beneficiary (Institutional)
 * - European Lawmakers/FBI Informants: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Extraction is high (0.65) due to the threat to governmental leadership.
domain_priors:base_extractiveness(epstein_files_2026, 0.65). 

% Suppression is high (0.89) because the government is resisting the 
% release of vetting files.
domain_priors:suppression_score(epstein_files_2026, 0.89).   

% Theater ratio is high (0.78) as "Strategic Ambiguity" regarding 
% espionage claims persists despite high-level dismissals.
domain_priors:theater_ratio(epstein_files_2026, 0.78).       

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(epstein_files_2026, extractiveness, 0.65).
narrative_ontology:constraint_metric(epstein_files_2026, suppression_requirement, 0.89).
narrative_ontology:constraint_metric(epstein_files_2026, theater_ratio, 0.78).

% Primary keys for the classification engine
% Beneficiaries and Victims (Extraction > 0.46)
narrative_ontology:constraint_beneficiary(epstein_files_2026, intelligence_apparatus).
narrative_ontology:constraint_victim(epstein_files_2026, political_transparency).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The UK public views the secret vetting files as a Snare—an opaque mechanism 
% shielding a potentially compromised leadership.
constraint_indexing:constraint_classification(epstein_files_2026, snare, 
    context(agent_power(powerless), 
            time_horizon(biographical), 
            exit_options(trapped), 
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The Starmer government views the withholding of files as a Rope—essential 
% infrastructure for national security and bilateral relations.
constraint_indexing:constraint_classification(epstein_files_2026, rope, 
    context(agent_power(institutional), 
            time_horizon(historical), 
            exit_options(mobile), 
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (PITON)
% Analysts view the current state as a Piton: Inertial maintenance of 
% diplomatic secrets (Theater Ratio > 0.70) in a post-exposure environment.
constraint_indexing:constraint_classification(epstein_files_2026, piton,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(epstein_files_2026_tests).

test(perspectival_gap) :-
    constraint_indexing:constraint_classification(epstein_files_2026, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(epstein_files_2026, rope, context(agent_power(institutional), _, _, _)).

test(piton_check) :-
    domain_priors:theater_ratio(epstein_files_2026, TR),
    TR >= 0.70.

:- end_tests(epstein_files_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The extraction score (0.65) reflects the severe institutional cost: the 
 * dismissal of Peter Mandelson and the threat to Starmer's premiership. 
 * The high suppression score (0.89) stems from the refusal to release 
 * "vetting files" to prove the network has not compromised the state.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_epstein_espionage,
    'Were the vetting files actually compromised or merely poorly managed?',
    'Release and independent audit of UK vetting protocols.',
    'Compromise implies a permanent Snare; poor management implies a repairable Rope.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(epstein_files_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Theater ratio rises as the "espionage" claims resurface and diplomats are dismissed.
narrative_ontology:measurement(ep_tr_t0, epstein_files_2026, theater_ratio, 0, 0.30).
narrative_ontology:measurement(ep_tr_t5, epstein_files_2026, theater_ratio, 5, 0.55).
narrative_ontology:measurement(ep_tr_t10, epstein_files_2026, theater_ratio, 10, 0.78).

% Extraction rises with the threat to the leadership and dismissal of Mandelson.
narrative_ontology:measurement(ep_ex_t0, epstein_files_2026, base_extractiveness, 0, 0.20).
narrative_ontology:measurement(ep_ex_t5, epstein_files_2026, base_extractiveness, 5, 0.45).
narrative_ontology:measurement(ep_ex_t10, epstein_files_2026, base_extractiveness, 10, 0.65).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: epstein_kgb_honeytrap
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2026-02-03
% ============================================================================

:- module(constraint_epstein_honeytrap, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:interval/3,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:measurement/5,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: epstein_honeytrap
 * human_readable: The Kompromat Siphon
 * domain: political/intelligence
 * * SUMMARY:
 * A high-tech surveillance operation disguised as an elite social network. 
 * Intelligence sources suggest Epstein operated as a Russian/Israeli asset 
 * to procure 'kompromat' on world figures, effectively constraining their 
 * future political autonomy through potential reputation destruction.
 * * KEY AGENTS:
 * - The Associate: Subject (Powerless) - High-profile figures (Gates, Andrew, etc.) 
 * placed in compromising positions.
 * - The Kremlin: Beneficiary (Institutional) - The entity utilizing the leverage.
 * - The Intelligence Analyst: Auditor (Analytical) - US/UK agencies monitoring 
 * the Russian connections.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
% Extraction is extreme due to total leverage over high-value targets.
domain_priors:base_extractiveness(epstein_honeytrap, 0.92). 
% Suppression is driven by the threat of public ruin.
domain_priors:suppression_score(epstein_honeytrap, 0.88).   
% High theater ratio reflects the 'financier' persona masking the spy operation.
domain_priors:theater_ratio(epstein_honeytrap, 0.82).       

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(epstein_honeytrap, extractiveness, 0.92).
narrative_ontology:constraint_metric(epstein_honeytrap, suppression_requirement, 0.88).
narrative_ontology:constraint_metric(epstein_honeytrap, theater_ratio, 0.82).

domain_priors:requires_active_enforcement(epstein_honeytrap).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   ========================================================================== */

% PERSPECTIVE 1: THE TARGET (SNARE)
% The Associate (Subject) experiences the compromise as a predatory trap.
constraint_indexing:constraint_classification(epstein_honeytrap, snare, 
    context(agent_power(powerless), 
            time_horizon(biographical), 
            exit_options(trapped), 
            spatial_scope(global))).

% PERSPECTIVE 2: THE ARCHITECT (ROPE)
% The Kremlin (Beneficiary) views this as essential geopolitical coordination.
constraint_indexing:constraint_classification(epstein_honeytrap, rope, 
    context(agent_power(institutional), 
            time_horizon(generational), 
            exit_options(mobile), 
            spatial_scope(global))).

% PERSPECTIVE 3: THE INTEL AUDITOR (PITON)
% Analysts detect the inertial maintenance of the trap even after the 
% primary agent's (Epstein) death in 2019.
constraint_indexing:constraint_classification(epstein_honeytrap, piton, 
    context(agent_power(analytical), 
            time_horizon(historical), 
            exit_options(analytical), 
            spatial_scope(universal))) :-
    domain_priors:theater_ratio(epstein_honeytrap, TR), TR > 0.70.

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(epstein_tests).

test(perspectival_gap) :-
    constraint_indexing:constraint_classification(epstein_honeytrap, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(epstein_honeytrap, rope, context(agent_power(institutional), _, _, _)).

test(extraction_critical) :-
    domain_priors:base_extractiveness(epstein_honeytrap, E), E > 0.90.

:- end_tests(epstein_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The honeytrap is a textbook 'Snare' from the perspective of the blackmailed 
 * agent. However, at a 'global' spatial scope, it functions as a 'Mountain' 
 * because the victims cannot simply 'exit' the constraint without total loss 
 * of social standing. 
 * * [RESOLVED MANDATROPHY]:
 * The extreme extraction ($E=0.92$) is resolved by the Piton classification, 
 * noting that the 'social club' was merely theater for data harvesting.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_double_agency,
    'Was Epstein a singular KGB asset or a multi-intelligence conduit (Mossad/MI6)?',
    'Cross-referencing FBI files on Maxwell with the 2026 document release.',
    'If multi-agency: The constraint is a Tangled Rope of competing interests.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(epstein_honeytrap, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Theater ratio: Initial (Maxwell mentorship) to High-Tech Island Phase.
narrative_ontology:measurement(eh_tr_t0, epstein_honeytrap, theater_ratio, 0, 0.40).
narrative_ontology:measurement(eh_tr_t5, epstein_honeytrap, theater_ratio, 5, 0.65).
narrative_ontology:measurement(eh_tr_t10, epstein_honeytrap, theater_ratio, 10, 0.82).

% Extraction: Growing library of kompromat/Leverage.
narrative_ontology:measurement(eh_ex_t0, epstein_honeytrap, base_extractiveness, 0, 0.30).
narrative_ontology:measurement(eh_ex_t5, epstein_honeytrap, base_extractiveness, 5, 0.75).
narrative_ontology:measurement(eh_ex_t10, epstein_honeytrap, base_extractiveness, 10, 0.92).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: ergo_autolykos_asic_resistance
% ============================================================================
% Generated: 2026-01-17
% Model: Gemini 2.0 Flash
% Source: Ergo Platform Documentation (Autolykos v2) & Whitepapers
% ============================================================================

:- module(constraint_ergo_autolykos_asic_resistance, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: ergo_autolykos_asic_resistance
 * human_readable: Autolykos PoW Algorithm (ASIC Resistance)
 * domain: technological/economic
 * temporal_scope: 2019-Ongoing
 * spatial_scope: Global (Distributed Mining Network)
 * * SUMMARY:
 * Autolykos is Ergo's Proof-of-Work (PoW) algorithm, specifically designed 
 * to be memory-hard and ASIC-resistant. By requiring large 
 * datasets (the dataset size increases over time) to be held in GPU memory, 
 * it prevents specialized mining hardware (ASICs) from dominating the 
 * hash rate, thus favoring commodity GPU hardware.
 * * KEY AGENTS:
 * - GPU Miners: Individual and small-scale participants using off-the-shelf 
 * hardware.
 * - ASIC Manufacturers: Institutional entities that build high-efficiency 
 * specialized hardware.
 * - Network Security: The collective robustness against 51% attacks and 
 * hash rate centralization.
 * * NARRATIVE ARC:
 * Autolykos functions as a democratic barrier. It ensures that 
 * the "Mountain" of mining difficulty can be scaled by common citizens with 
 * gaming GPUs, rather than only by those with access to multi-million dollar 
 * industrial ASIC supply chains.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(ergo_autolykos_asic_resistance, 0, 10).
narrative_ontology:constraint_claim(ergo_autolykos_asic_resistance, snare).

% Base extractiveness score (0.0 = no extraction, 1.0 = full extraction)
% Rationale: Low direct extraction; however, it extracts energy and requires 
% capital for GPU hardware. It "extracts" opportunity from ASIC makers.
domain_priors:base_extractiveness(ergo_autolykos_asic_resistance, 0.2).

% Suppression score (0.0 = no suppression, 1.0 = full suppression)
% Rationale: High suppression of specialized hardware. The algorithm 
% actively punishes non-memory-intensive hardware.
domain_priors:suppression_score(ergo_autolykos_asic_resistance, 0.85).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(ergo_autolykos_asic_resistance, extractiveness, 0.2).
narrative_ontology:constraint_metric(ergo_autolykos_asic_resistance, suppression_requirement, 0.85).

% Enforcement requirements
domain_priors:requires_active_enforcement(ergo_autolykos_asic_resistance).



% Beneficiaries and Victims
constraint_beneficiary(ergo_autolykos_asic_resistance, retail_gpu_miners).
constraint_victim(ergo_autolykos_asic_resistance, asic_manufacturers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: ASIC Manufacturer - Snare
   --------------------------------------------------------------------------
   
   WHO: institutional - Powerful entities with massive R&D budgets.
   WHEN: historical - Building hardware for multi-year cycles.
   WHERE: arbitrage - Seeking the most profitable PoW chains to dominate.
   
   WHY THIS CLASSIFICATION:
   For an ASIC maker, Autolykos is a "Snare." It is a protocol-level 
   mechanism that intentionally renders their specialized efficiency useless, 
   effectively strangling their ability to enter the Ergo market.
   
   NARRATIVE EVIDENCE:
   "The algorithm is memory-hard... aimed at discouraging ASIC 
   development to keep the network decentralized".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    ergo_autolykos_asic_resistance,
    snare,
    context(
        agent_power(institutional),
        time_horizon(historical),
        exit_options(arbitrage),
        spatial_scope(global)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: Home Miner (GPU) - Rope
   --------------------------------------------------------------------------
   
   WHO: powerless / moderate - Common users with gaming PCs.
   WHEN: biographical - Seeking supplemental income or supporting a network.
   WHERE: mobile - Can easily switch mining to other GPU-friendly chains.
   
   WHY THIS CLASSIFICATION:
   For the home miner, Autolykos is a "Rope." it is the tool that allows 
   them to compete on a level playing field with industrial farms. 
   It pulls them into the security structure of the network as active 
   participants rather than just spectators.
   
   NARRATIVE EVIDENCE:
   "Mining Ergo is intended to be accessible for ordinary people... promoting 
   fair distribution".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    ergo_autolykos_asic_resistance,
    rope,
    context(
        agent_power(individual_moderate),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: The Protocol - Mountain
   --------------------------------------------------------------------------
   
   WHO: analytical - The hardcoded logic of the Sigmastate.
   WHEN: civilizational.
   WHERE: analytical.
   
   WHY THIS CLASSIFICATION:
   From an analytical perspective, Autolykos is the "Mountain." It is the 
   immutable proof-of-work reality that secures the state transition. 
   One cannot argue with the math; one must simply solve the hash.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    ergo_autolykos_asic_resistance,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(civilizational),
        exit_options(analytical),
        spatial_scope(global)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 4: THE NON-MINER / USER - Mountain
   --------------------------------------------------------------------------
   WHO: powerless (A user of the blockchain, not a miner)
   WHEN: immediate (When making a transaction)
   WHERE: trapped (Cannot choose a different consensus mechanism)
   SCOPE: local (Their own transaction)
   
   WHY THIS CLASSIFICATION:
   For a regular user of the Ergo platform, the Autolykos algorithm is a
   "Mountain." It's a fundamental, unchangeable aspect of the network's
   security that they don't directly interact with or influence. It's simply
   the bedrock on which their transactions are secured.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    ergo_autolykos_asic_resistance,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
).

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(ergo_autolykos_tests).

/**
 * TEST 1: Multi-perspective variance
 * Demonstrates how the same PoW algorithm is viewed differently by various agents.
 */
test(multi_perspective_variance) :-
    % ASIC Manufacturer (Snare)
    constraint_indexing:constraint_classification(ergo_autolykos_asic_resistance, snare, context(agent_power(institutional), _, _, _)),
    % Home Miner (Rope)
    constraint_indexing:constraint_classification(ergo_autolykos_asic_resistance, rope, context(agent_power(individual_moderate), _, _, _)),
    % The Protocol (Mountain)
    constraint_indexing:constraint_classification(ergo_autolykos_asic_resistance, mountain, context(agent_power(analytical), _, _, _)),
    % Non-Miner User (Mountain)
    constraint_indexing:constraint_classification(ergo_autolykos_asic_resistance, mountain, context(agent_power(powerless), _, _, _)).

/**
 * TEST 2: Power-based extractiveness scaling
 * Demonstrates that powerful agents (ASIC manufacturers) are the ones who feel "extracted from" in this scenario.
 */
test(power_extractiveness_scaling) :-
    ContextPowerful = context(agent_power(institutional), time_horizon(historical), exit_options(arbitrage), spatial_scope(global)),
    ContextModerate = context(agent_power(individual_moderate), time_horizon(biographical), exit_options(mobile), spatial_scope(global)),
    constraint_indexing:extractiveness_for_agent(ergo_autolykos_asic_resistance, ContextPowerful, Score1),
    constraint_indexing:extractiveness_for_agent(ergo_autolykos_asic_resistance, ContextModerate, Score2),
    Score1 > Score2. % The ASIC manufacturer feels more extraction (of opportunity)

:- end_tests(ergo_autolykos_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini 2.0 Flash
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. SUPPRESSION (0.85): This is the core "intent" of Autolykos. By making 
 * the memory requirements high and variable, it suppresses the 
 * viability of static, specialized circuit design.
 * 
 * 2. CLASSIFICATION: The "Snare" for ASIC makers is the primary source 
 * of the project's decentralization "Rope" for GPU miners.
 * 
 * 3. OMEGAS 
 *    Define uncertainty so your analysis is cleaner
 *    omega_variable(
 *        asic_breakthrough_event,
 *        "Will a specialized manufacturer develop a 'programmable' memory-dense ASIC that can bypass Autolykos v2?",
 *        resolution_mechanism("Monitor network hashrate for sudden 10x spikes inconsistent with GPU market trends"),
 *        impact("If Yes: The Rope snaps, and Ergo becomes a Mountain for industrial giants only. If No: Decentralization holds."),
 *        confidence_without_resolution(medium)
 *    ).
 */

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS (If Applicable)
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: SHA-256 (Bitcoin Style)
 * Viability: Technically simpler, but invites ASIC centralization.
 * Suppression: Rejection of SHA-256 is the defining technological 
 * constraint that creates the Ergo ecosystem.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS CONSTRAINT:
 * 
 * 1. Load into main system:
 *    ?- [constraints/ergo_autolykos_asic_resistance].
 * 
 * 2. Run multi-perspective analysis:
 *    ?- constraint_indexing:multi_index_report(ergo_autolykos_asic_resistance).
 * 
 * 3. Run tests:
 *    ?- run_tests(ergo_autolykos_tests).
 * 
 * 4. Generate pedagogical report:
 *    ?- pedagogical_report(ergo_autolykos_asic_resistance).
 * 
 * 5. Compare with other constraints:
 *    ?- compare_constraints(ergo_autolykos_asic_resistance, [other_id]).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: dexy_gold_protocol
% ============================================================================
% Generated: 2026-01-17
% Model: Gemini 2.0 Flash
% Source: Dexy Algorithmic Central Bank Protocol / Ergo Blockchain
% ============================================================================

:- module(constraint_dexy_gold_protocol, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: dexy_gold_protocol
 * human_readable: DexyGold Seigniorage Mechanism
 * domain: economic/technological
 * temporal_scope: 2023-Present
 * spatial_scope: Ergo Blockchain (Global)
 * * SUMMARY:
 * DexyGold is a seigniorage-based stablecoin pegged to the price of gold (XAU). 
 * Unlike the dual-token reserve model of SigUSD, Dexy utilizes a "One Token, 
 * Two Protocols" design. It maintains its peg via an on-chain 
 * "Bank" that mints tokens at oracle rates and an Automated Market Maker (AMM) 
 * for trading. Stability is enforced through "top-up swaps" 
 * where the Bank intervenes if the market price deviates from the oracle 
 * for a set duration (e.g., 50 blocks).
 * * KEY AGENTS:
 * - Arbitrageur: The primary enforcer of the peg, minting from the Bank 
 * to sell on the LP when market price is high.
 * - The Bank: An algorithmic entity that holds ERG reserves and performs 
 * interventions to support the price floor.
 * - LP_Provider: Participants who stock the liquidity pool, subject to 
 * redemption locks during de-pegs.
 * * NARRATIVE ARC:
 * The protocol functions as a decentralized central bank. It removes the 
 * need for a speculative "reserve token" (like SigRSV) by using the 
 * protocol's own accumulated ERG reserves to perform open-market operations 
 * to defend the gold peg.
 */

/* ==========================================================================
   2. BASE PROPERTIES (Context-Independent)
   ========================================================================== */

narrative_ontology:interval(dexy_gold_interval, 0, 10).
narrative_ontology:constraint_claim(dexy_gold_protocol, rope).

% Base extractiveness: Low (0.2)
% Rationale: Benefits are largely symmetric; the protocol doesn't rely 
% on a secondary class of speculative risk-takers to function, but 
% rather on market-driven arbitrage.
domain_priors:base_extractiveness(dexy_gold_protocol, 0.2).

% Suppression score: Low (0.2)
% Rationale: Open-source and interoperable; explicitly avoids the 
% "death spiral" mechanics of failed algorithmic coins through 
% over-collateralization.
domain_priors:suppression_score(dexy_gold_protocol, 0.2).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(dexy_gold_protocol, extractiveness, 0.2).
narrative_ontology:constraint_metric(dexy_gold_protocol, suppression_requirement, 0.2).

% Enforcement: Emerges naturally from AMM dynamics and Bank logic.
domain_priors:emerges_naturally(dexy_gold_protocol).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(dexy_gold_protocol, arbitrageurs).
% Potential "victims" are the Bank's ERG reserves during massive 
% sustained downward pressure on gold vs ERG.
constraint_victim(dexy_gold_protocol, protocol_reserves).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: Retail Trader - ROPE
   --------------------------------------------------------------------------
   WHO: powerless
   WHEN: immediate
   WHERE: mobile
   SCOPE: local
   
   WHY THIS CLASSIFICATION:
   To a user simply looking to hedge into gold, Dexy is a tool. Unlike SigUSD, 
   where a "trapped" reserve ratio can prevent entry/exit, Dexy's LP-based 
   exit is usually available, provided there is liquidity.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    dexy_gold_protocol,
    rope,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(mobile),
        spatial_scope(local)
    )
) :-
    domain_priors:base_extractiveness(dexy_gold_protocol, E),
    E < 0.3, 
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: Liquidity Provider - SNARE
   --------------------------------------------------------------------------
   WHO: individual_moderate
   WHEN: biographical
   WHERE: constrained
   SCOPE: regional
   
   WHY THIS CLASSIFICATION:
   LPs face a "Snare" during de-pegs. The protocol explicitly prevents 
   LP token redemptions if the oracle rate is significantly below the 
   LP rate (e.g., 90%) to prevent draining reserves. 
   This "locks" the agent into the constraint during crisis.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    dexy_gold_protocol,
    snare,
    context(
        agent_power(individual_moderate),
        time_horizon(biographical),
        exit_options(constrained),
        spatial_scope(regional)
    )
) :-
    domain_priors:base_extractiveness(dexy_gold_protocol, E),
    E >= 0.2, 
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: Analytical Observer - MOUNTAIN
   --------------------------------------------------------------------------
   WHO: analytical
   WHEN: historical
   WHERE: analytical
   SCOPE: global
   
   WHY THIS CLASSIFICATION:
   From an analytical view, the 50-block "cross-tracker" delay and the 
   one-way minting are immutable mathematical laws. They 
   define the "physics" of the gold peg on Ergo.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    dexy_gold_protocol,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(historical),
        exit_options(analytical),
        spatial_scope(global)
    )
) :-
    domain_priors:suppression_score(dexy_gold_protocol, S),

    S < 0.5,
    !.

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(dexy_gold_protocol_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(dexy_gold_protocol, Type1, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(dexy_gold_protocol, Type2, context(agent_power(individual_moderate), _, _, _)),
    constraint_indexing:constraint_classification(dexy_gold_protocol, Type3, context(agent_power(analytical), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3.

test(time_immutability) :-
    % Long-term historical view sees the smart contract as fixed (Mountain).
    constraint_indexing:constraint_classification(dexy_gold_protocol, mountain, context(analytical, historical, _, _)).

:- end_tests(dexy_gold_protocol_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * * KEY DECISIONS:
 * 1. EXTRACTIVENESS (0.2): Lower than SigUSD because Dexy removes the "tax" 
 * paid to a separate reserve-holder class, relying instead on 
 * active arbitrage.
 * 2. SNARE CLASSIFICATION: Specifically applied to LPs due to the 
 * redemption lock during de-pegs—a critical "coercive" safety 
 * mechanism.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω)
   ========================================================================== */

omega_variable(
    draining_attack_resilience,
    "Can anti-draining measures (locks) effectively stop cyclic arbitrage-top-up attacks?",
    resolution_mechanism("Mainnet performance monitoring under high volatility cycles"),
    impact("If failed, the Bank (Rope) collapses into a Snare for all ERG holders."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: SigUSD (AgeUSD Protocol)
 * Viability: Established, higher liquidity, but relies on reserve-token 
 * holders as "bankers".
 * * CONCLUSION:
 * Dexy is a "Rope" for the ecosystem by providing a more capital-efficient 
 * way to create stable assets without requiring a massive, often illiquid 
 * reserve token side-car.
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */


% --- v3.1 Indexical Relativity Stubs (Fleet Repair) ---
constraint_indexing:constraint_classification(ergo_dexy_gold_protocol, mountain, agent_power(analytical)).
constraint_indexing:constraint_classification(ergo_dexy_gold_protocol, rope, agent_power(institutional)).
constraint_indexing:constraint_classification(ergo_dexy_gold_protocol, snare, agent_power(powerless)).
% ============================================================================
% CONSTRAINT STORY: ergo_lets_protocol
% ============================================================================
% Generated: 2026-01-17
% Model: Gemini 2.0 Flash
% Source: Ergo Platform - Mutual Credit / LETS Design Patterns
% ============================================================================

:- module(constraint_ergo_lets_protocol, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: ergo_lets_protocol
 * human_readable: Ergo Local Exchange Trading System (LETS)
 * domain: economic/social
 * temporal_scope: 2020-Present
 * spatial_scope: Ergo Blockchain (Community-specific)
 * * SUMMARY:
 * LETS on Ergo is a trustless mutual credit system where the sum of all 
 * participant balances is always zero. It allows communities 
 * to trade goods and services using a local currency created through 
 * "IOUs" backed by collateral or reputation, enforced via smart contracts 
 *.
 * * KEY AGENTS:
 * - Community_Member: Uses the system to facilitate local trade without 
 * needing external fiat or volatile crypto.
 * - New_Entrant: A user seeking to join who must meet the protocol's 
 * entry constraints (collateral or social vouching).
 * - Protocol_Auditor: Observes the mathematical integrity of the zero-sum 
 * invariant.
 * * NARRATIVE ARC:
 * LETS transforms currency from a "commodity" to be extracted into a 
 * "public utility" (Rope) for coordination. However, to prevent "leaking" 
 * value (defaults), the protocol imposes rigid entry barriers (Mountain) 
 * that can feel like a "Snare" to those lacking the required initial 
 * capital or social standing.
 */

/* ==========================================================================
   2. BASE PROPERTIES (Context-Independent)
   ========================================================================== */

narrative_ontology:interval(ergo_lets_interval, 0, 10).
narrative_ontology:constraint_claim(ergo_lets_protocol, rope).

% Base extractiveness: Low (0.15)
% Rationale: The protocol is designed to be non-extractive; fees are 
% typically minimal and used only to prevent spam.
domain_priors:base_extractiveness(ergo_lets_protocol, 0.15).

% Suppression score: Low (0.1)
% Rationale: It is a voluntary, opt-in coordination layer. It does not 
% suppress other economic models.
domain_priors:suppression_score(ergo_lets_protocol, 0.1).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(ergo_lets_protocol, extractiveness, 0.15).
narrative_ontology:constraint_metric(ergo_lets_protocol, suppression_requirement, 0.1).

% Enforcement: Emerges naturally from Sigma Protocol script logic.
domain_priors:emerges_naturally(ergo_lets_protocol).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(ergo_lets_protocol, local_communities).
constraint_beneficiary(ergo_lets_protocol, unbanked_users).
% Victims are arguably "bad actors" whose collateral is seized upon default, 
% though this is a self-imposed risk.
constraint_victim(ergo_lets_protocol, defaulters).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: Active Community Member - ROPE
   --------------------------------------------------------------------------
   WHO: individual_moderate
   WHEN: immediate
   WHERE: mobile
   SCOPE: local
   
   WHY THIS CLASSIFICATION:
   For the established user, LETS is a Rope. It is a tool they use to 
   transact when liquidity in ERG or fiat is low. They have the agency 
   to issue credit and settle debts.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    ergo_lets_protocol,
    rope,
    context(
        agent_power(individual_moderate),
        time_horizon(immediate),
        exit_options(mobile),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: Under-collateralized User - MOUNTAIN
   --------------------------------------------------------------------------
   WHO: powerless
   WHEN: biographical
   WHERE: trapped
   SCOPE: local
   
   WHY THIS CLASSIFICATION:
   For a user without the required ERG to post as collateral, the protocol's 
   entry requirement is a Mountain. It is an unchangeable law that 
   prevents them from accessing the "Rope" of credit.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    ergo_lets_protocol,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(biographical),
        exit_options(trapped),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: Protocol Architect/Institutional - MOUNTAIN
   --------------------------------------------------------------------------
   WHO: institutional
   WHEN: historical
   WHERE: analytical
   SCOPE: global
   
   WHY THIS CLASSIFICATION:
   From an institutional or designer's view, the "Sum = 0" rule is a 
   Mountain. It is the core mathematical constraint that ensures systemic 
   solvency and cannot be relaxed without destroying the protocol.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    ergo_lets_protocol,
    mountain,
    context(
        agent_power(institutional),
        time_horizon(historical),
        exit_options(analytical),
        spatial_scope(global)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 4: Over-leveraged Defaulter - SNARE
   --------------------------------------------------------------------------
   WHO: powerless
   WHEN: immediate
   WHERE: constrained
   SCOPE: local
   
   WHY THIS CLASSIFICATION:
   When a user defaults, the collateral seizure mechanism becomes a Snare. 
   The constraint "strangles" their assets to repay the pool's debt, 
   acting coercively to maintain the zero-sum balance.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    ergo_lets_protocol,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(local)
    )
).

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(ergo_lets_protocol_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(ergo_lets_protocol, Type1, context(agent_power(individual_moderate), _, _, _)),
    constraint_indexing:constraint_classification(ergo_lets_protocol, Type2, context(agent_power(powerless), _, trapped, _)),
    Type1 \= Type2.

test(zero_sum_immutability) :-
    % Analytical perspective correctly identifies the math as Mountain.
    constraint_indexing:constraint_classification(ergo_lets_protocol, mountain, context(institutional, historical, _, _)).

:- end_tests(ergo_lets_protocol_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * * KEY DECISIONS:
 * 1. PERSPECTIVE ON POWERLESS: I chose to classify the entry barrier as 
 * "Mountain" rather than "Snare" because it is a passive structural 
 * requirement, not an active extraction from those already inside.
 * 2. EXTRACTIVENESS (0.15): Extremely low, reflecting Ergo's ethos of 
 * community-driven, non-rent-seeking financial tools.
 * 3. SNARE LOGIC: Liquidation is the only point where this "Rope" becomes 
 * "coercive," hence the Snare classification for the defaulter.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω)
   ========================================================================== */

omega_variable(
    reputation_portability,
    "Can LETS reputation be ported between communities without collateral?",
    resolution_mechanism("Development of cross-LETS reputation standards"),
    impact("If yes, the 'Mountain' of collateral drops, making it a universal Rope."),
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Traditional Credit Unions
 * Viability: High social trust, but geographically and legally bound.
 * * ALTERNATIVE 2: SigUSD (Stablecoins)
 * Viability: Better for external trade, but requires 400% collateral.
 * * CONCLUSION:
 * LETS is a "Rope" specifically because it allows for negative balances 
 * (credit) which SigUSD does not, making it more flexible for local trade 
 * despite the "Mountain" of setup complexity.
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: ergo_mixer_protocol
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: ErgoMixer (ZeroJoin) / Ergo Privacy Infrastructure
% ============================================================================

:- module(constraint_ergo_mixer_protocol, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: ergo_mixer_protocol
 * human_readable: ErgoMixer Privacy Mechanism
 * domain: social/technological/legal
 * temporal_scope: 2020-Present
 * spatial_scope: Ergo Blockchain (Global)
 * 
 * SUMMARY:
 * ErgoMixer is the first non-interactive, non-custodial mixer in the crypto 
 * industry. It utilizes the ZeroJoin protocol, which relies 
 * on Sigma protocols (Zero-Knowledge Proofs) and ring signatures to break 
 * on-chain links between deposit and withdrawal addresses. 
 * This enhances privacy and fungibility in blockchain transactions.
 * 
 * KEY AGENTS:
 * - Regulatory Body / Law Enforcement (Institutional): Seeks to track financial flows.
 * - Privacy User (Individual Moderate): Individual seeking to restore fungibility to their assets.
 * - User in a Small Pool (Individual Powerless): Faces statistical traceability due to low anonymity set.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (Context-Independent)
   ========================================================================== */

narrative_ontology:interval(ergo_mixer_protocol, 0, 10).
narrative_ontology:constraint_claim(ergo_mixer_protocol, tangled_rope).

% Base extractiveness: 0.1.
% The protocol is non-custodial and serverless; there is no 
% central entity extracting value beyond minimal network fees.
domain_priors:base_extractiveness(ergo_mixer_protocol, 0.1).

% Suppression score: 0.1.
% It is an opt-in tool. While it suppresses the ability of 
% analysts to trace funds, it does not hide its own existence or prevent 
% users from using transparent transactions.
domain_priors:suppression_score(ergo_mixer_protocol, 0.1).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(ergo_mixer_protocol, extractiveness, 0.1).
narrative_ontology:constraint_metric(ergo_mixer_protocol, suppression_requirement, 0.1).

% Enforcement: Emerges naturally from cryptographic primitives (Sigma Protocols).
domain_priors:emerges_naturally(ergo_mixer_protocol).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(ergo_mixer_protocol, privacy_seeking_users).
constraint_victim(ergo_mixer_protocol, chain_analysts).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: REGULATORY BODY / LAW ENFORCEMENT - Snare
   --------------------------------------------------------------------------
   WHO: institutional (Seeks to track financial flows and enforce regulations)
   WHEN: immediate (Ongoing efforts to combat illicit finance)
   WHERE: constrained (Frustrated by the inability to trace funds on-chain)
   
   WHY THIS CLASSIFICATION:
   For a regulatory body or law enforcement, a crypto mixer protocol can be 
   a 'Snare'. It frustrates their ability to track illicit financial flows and
   enforce regulations, thereby strangling their investigative capabilities
   and hindering efforts to combat money laundering and other crimes.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    ergo_mixer_protocol,
    snare,
    context(
        agent_power(institutional),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(global)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: PRIVACY USER - Rope
   --------------------------------------------------------------------------
   WHO: individual_moderate (Seeking to restore fungibility to their assets)
   WHEN: immediate (When conducting a transaction that requires privacy)
   WHERE: mobile (Can choose when to enter, how many rounds to mix, and exit)
   
   WHY THIS CLASSIFICATION:
   For the privacy-seeking user, the mixer is a liberating tool ('Rope') that
   they use to regain control over their financial history. It allows them
   to restore fungibility to their assets and avoid profiling, providing
   a means to navigate the transparent blockchain.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    ergo_mixer_protocol,
    rope,
    context(
        agent_power(individual_moderate),
        time_horizon(immediate),
        exit_options(mobile),
        spatial_scope(global)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: USER IN A SMALL POOL - Snare
   --------------------------------------------------------------------------
   WHO: powerless (Faces statistical traceability due to low anonymity set)
   WHEN: biographical (The long-term risk of past transactions being deanonymized)
   WHERE: trapped (Cannot undo past mixing, and exiting without sufficient anonymity is risky)
   
   WHY THIS CLASSIFICATION:
   In a scenario with very few participants (low anonymity set), the mixer 
   becomes a 'Snare'. The user is "trapped" because exiting 
   would be statistically traceable, yet staying doesn't provide the 
   desired privacy—the constraint "strangles" the anonymity it promised.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    ergo_mixer_protocol,
    snare,
    context(
        agent_power(powerless),
        time_horizon(biographical),
        exit_options(trapped),
        spatial_scope(regional)
    )
).

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(ergo_mixer_protocol_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(ergo_mixer_protocol, Type1, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(ergo_mixer_protocol, Type2, context(agent_power(individual_moderate), _, _, _)),
    constraint_indexing:constraint_classification(ergo_mixer_protocol, Type3, context(agent_power(powerless), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3,
    Type1 \= Type3.

:- end_tests(ergo_mixer_protocol_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. INSTITUTIONAL PERSPECTIVE: Added 'Regulatory Body / Law Enforcement' as
 *    the institutional agent. For them, a crypto mixer functions as a 'Snare',
 *    hindering their ability to monitor financial activities.
 *
 * 2. INDIVIDUAL POWERLESS PERSPECTIVE: Reinstated 'User in a Small Pool' as
 *    the individual powerless agent, where the mixer itself becomes a 'Snare'
 *    due to insufficient anonymity.
 *
 * 3. CLASSIFICATION RATIONALE:
 *    - Regulatory Body (Snare): Frustrates tracking and enforcement.
 *    - Privacy User (Rope): A tool for financial privacy and fungibility.
 *    - User in Small Pool (Snare): Compromised anonymity due to lack of participants.
 * 
 * 4. CORE INSIGHT: Crypto mixer protocols like ErgoMixer create a 'Tangled Rope'
 *    of utility. What is a 'Rope' for individual privacy becomes a 'Snare' for
 *    regulatory oversight, and can also become a 'Snare' for users if anonymity
 *    conditions are not met.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * The core uncertainty is the long-term effectiveness of cryptographic privacy against state-level surveillance.
 */

omega_variable(
    anonymity_set_density,
    "Is the current number of active participants in a mixing pool sufficient to ensure k-anonymity (privacy), or will a lack of users turn the protocol into a statistical 'Snare' for its users?",
    resolution_mechanism("Statistical analysis of pool activity over time; academic research on deanonymization techniques."),
    impact("If low: Protocol becomes a 'Snare' (privacy trap). If high: Protocol is a reliable 'Rope' (privacy tool)."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */
/**
 * VIABLE ALTERNATIVES
 *
 * ALTERNATIVE 1: Interactive Mixers (e.g., CoinJoin)
 *    Viability: Historically used for privacy, but require users to be online simultaneously, introducing coordination risks.
 *    Suppression: ErgoMixer's non-interactive nature actively suppresses this alternative by offering a more convenient and robust solution.
 *
 * CONCLUSION:
 * The ErgoMixer protocol is a technologically advanced 'Rope' for privacy.
 * Its non-interactive nature suppresses the logistical 'Snare' of older
 * mixing solutions, but creates a new 'Snare' for regulatory bodies
 * attempting to maintain financial transparency. Furthermore, insufficient
 * user participation can turn this 'Rope' into a 'Snare' for its own users.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/ergo_mixer_protocol].
 * 2. Multi-perspective: ?- multi_index_report(ergo_mixer_protocol).
 * 3. Run tests: ?- run_tests(ergo_mixer_protocol_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: ergo_nipopows
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: Ergo Platform Whitepapers / "Super-light Clients for PoW Blockchains"
% ============================================================================

:- module(constraint_ergo_nipopows, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: ergo_nipopows
 * human_readable: Non-Interactive Proofs of Proof-of-Work (NiPoPoWs)
 * domain: technological/cryptographic
 * temporal_scope: 2017 - Present
 * spatial_scope: Global (Cross-blockchain)
 * 
 * SUMMARY:
 * NiPoPoWs are succinct cryptographic proofs that allow a client to verify the
 * state of a PoW blockchain with very little data—kilobytes instead of gigabytes.
 * They enable true "full-node security" on light devices like mobile phones.
 * 
 * KEY AGENTS:
 * - The Mobile User (Individual Powerless): Can now run a secure, self-validating wallet.
 * - The Protocol Auditor (Institutional): Uses NiPoPoWs for trustless cross-chain state verification.
 * - The Mathematician (Analytical): Views the proofs as a feature of cryptographic probability.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(ergo_nipopows, 0, 10).
narrative_ontology:constraint_claim(ergo_nipopows, rope).

% Base extractiveness: 0.1 (Very Low)
% Rationale: It is a pure utility that enhances security and accessibility; it does not
% extract value from any user group.
domain_priors:base_extractiveness(ergo_nipopows, 0.1).

% Suppression: 0.1 (Very Low)
% Rationale: It doesn't suppress alternatives, but rather provides a superior
% method for light client validation compared to traditional SPV proofs.
domain_priors:suppression_score(ergo_nipopows, 0.1).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(ergo_nipopows, extractiveness, 0.1).
narrative_ontology:constraint_metric(ergo_nipopows, suppression_requirement, 0.1).

% Enforcement: Emerges naturally from cryptographic principles.
domain_priors:emerges_naturally(ergo_nipopows).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(ergo_nipopows, mobile_users).
constraint_victim(ergo_nipopows, none).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE MOBILE USER - Rope
   --------------------------------------------------------------------------
   WHO: powerless (Limited computational resources)
   WHEN: immediate (Needs to verify a transaction now)
   WHERE: mobile (Using a smartphone)
   
   WHY THIS CLASSIFICATION:
   For a mobile user, NiPoPoWs are a liberating 'Rope'. It grants them the security
   of a full node without the impossible burden of downloading the entire blockchain.
   It's a tool that coordinates trust in a decentralized way.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    ergo_nipopows,
    rope,
    context(agent_power(powerless), time_horizon(immediate), exit_options(mobile), spatial_scope(local))
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE PROTOCOL AUDITOR / BRIDGE DEVELOPER - Rope
   --------------------------------------------------------------------------
   WHO: institutional (Building bridges between blockchains)
   WHEN: biographical (Developing secure cross-chain systems)
   WHERE: arbitrage (Can now verify other chains' states without a trusted intermediary)
   
   WHY THIS CLASSIFICATION:
   For an institution building a cross-chain bridge, NiPoPoWs are also a 'Rope'.
   They provide a trustless mechanism to verify events on another chain, forming
   the foundation for secure interoperability.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    ergo_nipopows,
    rope,
    context(agent_power(institutional), time_horizon(biographical), exit_options(arbitrage), spatial_scope(global))
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE CRYPTOGRAPHER - Mountain
   --------------------------------------------------------------------------
   WHO: analytical (Observer of mathematical proofs)
   WHEN: historical (Based on the established properties of hash functions)
   WHERE: analytical (Universal mathematical truth)
   
   WHY THIS CLASSIFICATION:
   From a mathematical standpoint, the ability to compress PoW history into
   superblocks via NiPoPoWs is a 'Mountain'. It is a fixed, discoverable
   property of cryptographic probability that cannot be changed.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    ergo_nipopows,
    mountain,
    context(agent_power(analytical), time_horizon(historical), exit_options(analytical), spatial_scope(global))
).

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(ergo_nipopows_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(ergo_nipopows, Type1, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(ergo_nipopows, Type2, context(agent_power(analytical), _, _, _)),
    % Both powerless and institutional see it as a Rope, so only need to check against Mountain
    Type1 \= Type2.

:- end_tests(ergo_nipopows_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. CLASSIFICATION: This is a rare case where the constraint is a 'Rope' for
 *    both the powerless user and the institutional actor. The innovation provides
 *    symmetric benefits, increasing accessibility for one and capability for the other.
 *    The only differing view is the analytical 'Mountain'.
 * 
 * 2. EXTRACTIVENESS (0.1): Very low, as this is a pure technological enhancement
 *    that provides a public good (decentralized, trustless validation) to the ecosystem.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * No significant Omega variables identified. The primary uncertainties are
 * engineering challenges related to implementation, not fundamental to the theory.
 */

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * 
 * ALTERNATIVE 1: Traditional SPV (Simple Payment Verification) Proofs
 *    Viability: The historical standard for light clients.
 *    Suppression: Not suppressed, but NiPoPoWs are demonstrably more secure and
 *    powerful, as SPV proofs can be "fooled" by a majority of hash power.
 *
 * CONCLUSION:
 * NiPoPoWs represent a superior 'Rope' for achieving light-client security,
 * replacing the older, weaker 'Rope' of SPV proofs. This is an example of
 * technological evolution within a solution category.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/ergo_nipopows].
 * 2. Multi-perspective: ?- multi_index_report(ergo_nipopows).
 * 3. Run tests: ?- run_tests(ergo_nipopows_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: rosen_bridge_protocol
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-20
% ============================================================================

:- module(constraint_rosen_bridge_protocol, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: rosen_bridge_protocol
 * human_readable: Rosen Bridge Cross-Chain Mechanism
 * domain: technological/economic
 * * SUMMARY:
 * Rosen Bridge is an Ergo-centric cross-chain protocol that enables asset
 * transfers without deploying smart contracts on external chains.
 * It uses a two-layer security model: Watchers monitor events, and a federated
 * set of Guards verifies and executes transactions. All consensus logic resides
 * on Ergo, making the bridge auditable from a single chain.
 * * KEY AGENTS:
 * - Small Value Transactor: Subject (Powerless)
 * - Liquidity Provider / Guard: Beneficiary (Institutional)
 * - Protocol Auditor: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(rosen_bridge_protocol, 0.5). % Mountain <= 0.15, Rope <= 0.15, Snare >= 0.46
domain_priors:suppression_score(rosen_bridge_protocol, 0.2).   % Structural property (raw, unscaled).
domain_priors:theater_ratio(rosen_bridge_protocol, 0.1).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(rosen_bridge_protocol, extractiveness, 0.5).
narrative_ontology:constraint_metric(rosen_bridge_protocol, suppression_requirement, 0.2).
narrative_ontology:constraint_metric(rosen_bridge_protocol, theater_ratio, 0.1).

% Constraint self-claim (what does the constraint claim to be?)
% The protocol presents itself as a pure coordination utility.
narrative_ontology:constraint_claim(rosen_bridge_protocol, coordination).

% Binary flags
domain_priors:requires_active_enforcement(rosen_bridge_protocol). % Required for Tangled Rope

% Structural property derivation hooks:
% has_coordination_function/1 is DERIVED from constraint_beneficiary/2
% has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
narrative_ontology:constraint_beneficiary(rosen_bridge_protocol, watchers_and_guards).
narrative_ontology:constraint_victim(rosen_bridge_protocol, small_value_transactors).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For users moving small amounts (e.g., <$100), the $10 minimum fee is a Snare.
% The high cost per transaction "strangles" their mobility across chains,
% effectively trapping their capital on one network.
constraint_indexing:constraint_classification(rosen_bridge_protocol, snare,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For high-net-worth users, liquidity providers, or Guards, the bridge is a
% robust Rope. The 0.5% fee is a fair trade for security. They use the bridge
% as a coordination tool to move assets where yield is higher.
constraint_indexing:constraint_classification(rosen_bridge_protocol, rope,
    context(agent_power(institutional),
            time_horizon(biographical),
            exit_options(arbitrage),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Analytically, the protocol is a Tangled Rope. It provides a genuine
% coordination function (Rope for institutional users) but also has high,
% asymmetric extraction from a specific victim class (Snare for small users).
% It requires active enforcement (Guards) to function.
constraint_indexing:constraint_classification(rosen_bridge_protocol, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(rosen_bridge_protocol_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(rosen_bridge_protocol, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(rosen_bridge_protocol, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(threshold_validation) :-
    % Verify that the base extractiveness meets the criteria for a high-extraction constraint.
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(rosen_bridge_protocol, ExtMetricName, E),
    E >= 0.46.

test(tangled_rope_properties) :-
    % Verify all three structural properties for Tangled Rope are present.
    narrative_ontology:constraint_beneficiary(rosen_bridge_protocol, _), % -> has_coordination_function
    narrative_ontology:constraint_victim(rosen_bridge_protocol, _),     % -> has_asymmetric_extraction
    domain_priors:requires_active_enforcement(rosen_bridge_protocol).

:- end_tests(rosen_bridge_protocol_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness of 0.5 is chosen because the fee structure (0.5% or
 * $10 minimum) is significant and primarily benefits the security providers
 * (Watchers and Guards). This creates a sharp perspectival gap. For institutional
 * actors, it's a low-cost coordination tool (Rope). For small retail users,
 * the flat minimum fee is highly extractive, acting as a Snare that makes
 * cross-chain movement prohibitively expensive.
 *
 * * MANDATROPHY ANALYSIS:
 * The analytical classification is Tangled Rope, not Snare. This is critical.
 * A pure Snare classification would ignore the genuine, high-security
 * coordination function the bridge provides for large-value transfers.
 * The Tangled Rope classification correctly captures this duality: it is
 * simultaneously a valuable coordination tool and a mechanism of asymmetric
 * extraction, depending on the user's scale. This prevents the system from
 * mislabeling a complex hybrid system as pure predation.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_rosen_bridge_protocol,
    'Will the federated Guard set remain independent or consolidate over time, increasing censorship risk?',
    'Monitoring the on-chain rotation, diversity, and ownership of the Guard set entities.',
    'If consolidated, the Rope aspect weakens and the Snare aspect strengthens, shifting the constraint towards pure extraction.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(rosen_bridge_protocol, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data for this high-extraction constraint (E=0.5 > 0.46).
% Models a slight increase in extraction and performative activity as the
% protocol matures and its fee structure becomes more entrenched.

% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(rosen_bridge_protocol_tr_t0, rosen_bridge_protocol, theater_ratio, 0, 0.05).
narrative_ontology:measurement(rosen_bridge_protocol_tr_t5, rosen_bridge_protocol, theater_ratio, 5, 0.08).
narrative_ontology:measurement(rosen_bridge_protocol_tr_t10, rosen_bridge_protocol, theater_ratio, 10, 0.1).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(rosen_bridge_protocol_ex_t0, rosen_bridge_protocol, base_extractiveness, 0, 0.48).
narrative_ontology:measurement(rosen_bridge_protocol_ex_t5, rosen_bridge_protocol, base_extractiveness, 5, 0.49).
narrative_ontology:measurement(rosen_bridge_protocol_ex_t10, rosen_bridge_protocol, base_extractiveness, 10, 0.5).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% As a cross-chain bridge, it functions as a piece of global infrastructure.
narrative_ontology:coordination_type(rosen_bridge_protocol, global_infrastructure).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: sig_usd_protocol
% ============================================================================
% Generated: 2026-01-17
% Model: Gemini 2.0 Flash
% Source: AgeUSD Protocol / Ergo Blockchain Stablecoin System
% ============================================================================

:- module(constraint_sig_usd_protocol, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: sig_usd_protocol
 * human_readable: SigUSD Stability Mechanism
 * domain: economic/technological
 * temporal_scope: 2021-Present (Post-AgeUSD launch)
 * spatial_scope: Ergo Blockchain (Global)
 * * SUMMARY:
 * SigUSD is an algorithmic, crypto-backed stablecoin based on the AgeUSD protocol. 
 * It operates via a dual-token system: SigUSD (stablecoin) and SigRSV (reserve token). 
 * Stability is maintained by SigRSV holders who act as the "bank," absorbing ERG 
 * price volatility in exchange for protocol fees, while SigUSD holders maintain 
 * value peg as long as the reserve ratio stays within 400-800%.
 * * KEY AGENTS:
 * - SigUSD_Holder: Seeks price stability and a "safe haven" within the ecosystem.
 * - SigRSV_Holder: Seeks profit from volatility and fees; acts as the liquidity provider/underwriter.
 * - Arbitrageur: Technical agent exploiting price gaps between the protocol and external DEXs.
 * * NARRATIVE ARC:
 * The protocol functions as a decentralized bank. When ERG price rises, SigRSV 
 * value grows exponentially. When ERG price crashes, SigRSV holders are "diluted" 
 * to ensure SigUSD can always be redeemed for $1 worth of ERG, until a critical 
 * collateral floor is hit.
 */

/* ==========================================================================
   2. BASE PROPERTIES (Context-Independent)
   ========================================================================== */

% Required for system extraction
narrative_ontology:interval(sig_usd_interval, 0, 10).
narrative_ontology:constraint_claim(sig_usd_protocol, rope).

% Base extractiveness: Moderate (0.4)
% Rationale: The protocol charges fees (minting/burning) that flow from users 
% to reserve holders. While asymmetric, it is a service-for-risk trade.
domain_priors:base_extractiveness(sig_usd_protocol, 0.4).

% Suppression score: Low (0.2)
% Rationale: Alternatives like wrapped USDT or other algorithmic coins exist 
% on Ergo; the protocol does not actively suppress them, though network effects favor SigUSD.
domain_priors:suppression_score(sig_usd_protocol, 0.2).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(sig_usd_protocol, extractiveness, 0.4).
narrative_ontology:constraint_metric(sig_usd_protocol, suppression_requirement, 0.2).

% Enforcement: Emerges naturally via Smart Contracts
domain_priors:emerges_naturally(sig_usd_protocol).

% BENEFICIARIES & VICTIMS
% Primary beneficiaries are the reserve holders during bull markets.
constraint_beneficiary(sig_usd_protocol, sig_rsv_holders).
% Primary "victims" (risk-bearers) are reserve holders during bear markets, 
% and stablecoin holders if the peg breaks.
constraint_victim(sig_usd_protocol, sig_rsv_holders_at_low_reserve).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: SigUSD_Holder (Retail User) - MOUNTAIN
   --------------------------------------------------------------------------
   WHO: powerless (User of the interface, not the dev or whale)
   WHEN: immediate (Needs the peg to hold TODAY)
   WHERE: trapped (Asset is locked in the contract logic)
   SCOPE: local (Their specific wallet/liquidity)
   
   WHY THIS CLASSIFICATION:
   For a retail user, the protocol's math is "natural law." They cannot change 
   the 400% reserve requirement or the fee structure. If the reserve ratio 
   drops, they are trapped by the smart contract's "Redeem Only" state.
   
   NARRATIVE EVIDENCE:
   "I just want to hold dollars. I don't control the code; the code tells me 
   if I can mint or not."
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    sig_usd_protocol,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :-
    domain_priors:suppression_score(sig_usd_protocol, S),
    S < 0.5, % Even though suppression is low, powerless agents see it as fixed.
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: SigRSV_Holder (The "Banker") - ROPE
   --------------------------------------------------------------------------
   WHO: individual_moderate (Has capital, chooses to provide liquidity)
   WHEN: biographical (Long-term investment horizon)
   WHERE: mobile (Can "burn" SigRSV for ERG and leave when ratio allows)
   SCOPE: regional (Impacts the Ergo ecosystem liquidity)
   
   WHY THIS CLASSIFICATION:
   The SigRSV holder sees the protocol as a tool (Rope) for leverage. It is a 
   functional coordination mechanism that allows them to earn fees. They 
   willingly enter and can exit if they play the "game" correctly.
   
   NARRATIVE EVIDENCE:
   "I provide the reserve to earn the minting fees from the SigUSD users. It's 
   a fair trade for the risk I take."
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    sig_usd_protocol,
    rope,
    context(
        agent_power(individual_moderate),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(regional)
    )
) :-
    domain_priors:base_extractiveness(sig_usd_protocol, E),
    E < 0.6, % Beneficial coordination.
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: Protocol Auditor/Whale - SNARE
   --------------------------------------------------------------------------
   WHO: institutional (Can move markets or influence protocol evolution)
   WHEN: historical (Looking at systemic collapse risks over years)
   WHERE: arbitrage (Can exit through secondary markets or hedge elsewhere)
   SCOPE: global (Financial stability perspective)
   
   WHY THIS CLASSIFICATION:
   From a systemic view, if the reserve ratio stays near 400% during a 
   prolonged ERG crash, the protocol becomes a "Snare." It forces 
   asymmetric losses on the last reserve holders to stay liquid, potentially 
   leading to a "death spiral" where the constraint becomes coercive to 
   those remaining.
   
   NARRATIVE EVIDENCE:
   "The 400% limit protects the stablecoin but strangulates the reserve 
   holders during a crash, preventing them from exiting until the peg is safe."
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    sig_usd_protocol,
    snare,
    context(
        agent_power(institutional),
        time_horizon(historical),
        exit_options(arbitrage),
        spatial_scope(global)
    )
) :-
    domain_priors:base_extractiveness(sig_usd_protocol, E),

    E > 0.3, 
    !.

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(sig_usd_protocol_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(sig_usd_protocol, Type1, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(sig_usd_protocol, Type2, context(agent_power(individual_moderate), _, _, _)),
    constraint_indexing:constraint_classification(sig_usd_protocol, Type3, context(agent_power(institutional), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3.

test(power_extractiveness_scaling) :-
    % Institutional agents can arbitrage (lower experienced extraction)
    % whereas powerless agents pay the flat protocol fee.
    ScorePowerless = 0.4,
    ScorePowerful = 0.2, 
    ScorePowerless > ScorePowerful.

test(time_immutability) :-
    % At 'immediate' horizon, it is a Mountain (cannot change code).
    constraint_indexing:constraint_classification(sig_usd_protocol, mountain, context(_, immediate, _, _)).

:- end_tests(sig_usd_protocol_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * * KEY DECISIONS:
 * 1. EXTRACTIVENESS (0.4): Chosen because while the protocol is "fair," the 2% fee 
 * is an asymmetric transfer from those needing stability to those providing it.
 * 2. PERSPECTIVES: I chose the Holder/Banker/Institutional split because crypto 
 * protocols are defined by the "Reserve Ratio" state, which changes the 
 * user's freedom of movement.
 * 3. SNARE LOGIC: I classified the institutional view as Snare because of the 
 * "Liquidation Risk"—the protocol's constraints (locking minting/burning) 
 * can become a trap during black swan events.
 * * AMBIGUITIES:
 * - Oracle Risk: The protocol relies on an external price feed. If the oracle 
 * fails, the constraint shifts from "Mountain" to "Chaos." I modeled this 
 * via the Omega below.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω)
   ========================================================================== */

omega_variable(
    oracle_integrity,
    "Is the ERG/USD oracle price feed accurate and manipulation-resistant?",
    resolution_mechanism("Post-hoc analysis of oracle data vs. global market average during high volatility"),
    impact("If oracle fails, the Mountain (math) becomes a Snare (error-driven extraction)."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Fiat-backed Stablecoins (USDT/USDC)
 * Viability: Highly liquid, but introduces central party risk (the anti-thesis of Ergo).
 * Suppression: Not suppressed, but culturally rejected by the community.
 * * ALTERNATIVE 2: DexyGold (Non-custodial algorithmic gold peg)
 * Viability: Operates on similar principles but different collateral.
 * * CONCLUSION:
 * The presence of alternatives makes SigUSD a "Rope" for those who value 
 * decentralization. For those who *must* use Ergo and need stability, it 
 * approaches "Mountain" status due to the lack of other high-liquidity options.
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */


% --- v3.1 Indexical Relativity Stubs (Fleet Repair) ---
constraint_indexing:constraint_classification(ergo_sig_usd_protocol, mountain, agent_power(analytical)).
constraint_indexing:constraint_classification(ergo_sig_usd_protocol, rope, agent_power(institutional)).
constraint_indexing:constraint_classification(ergo_sig_usd_protocol, snare, agent_power(powerless)).
% ============================================================================
% CONSTRAINT STORY: ergo_storage_rent
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-29
% ============================================================================

:- module(constraint_ergo_storage_rent, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: ergo_storage_rent
 * human_readable: Ergo Storage Rent (UTXO Demurrage)
 * domain: technological/economic
 * * SUMMARY:
 * Storage rent is a "demurrage" fee charged to UTXOs (unspent coins) that have 
 * not moved in four years. This mechanism prevents blockchain bloat from "dust"
 * and recycles lost or abandoned coins back to the miners, ensuring long-term
 * network security.
 * * KEY AGENTS:
 * - The Long-Term Holder: Subject (Powerless), especially if keys are lost.
 * - The Miner Collective: Beneficiary (Institutional), collects rent to secure the network.
 * - The Ergo Foundation: Auditor (Analytical), designers of the economic model.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(ergo_storage_rent, 0.55). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(ergo_storage_rent, 0.2).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(ergo_storage_rent, 0.1).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(ergo_storage_rent, extractiveness, 0.55).
narrative_ontology:constraint_metric(ergo_storage_rent, suppression_requirement, 0.2).
narrative_ontology:constraint_metric(ergo_storage_rent, theater_ratio, 0.1).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(ergo_storage_rent, enforcement).

% Binary flags
domain_priors:requires_active_enforcement(ergo_storage_rent). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(ergo_storage_rent, ergo_miners).
narrative_ontology:constraint_victim(ergo_storage_rent, inactive_holders).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE INACTIVE HOLDER (SNARE)
% For a user who has lost their keys or is unaware, the rent is an unstoppable
% trap that drains their assets.
% χ = 0.55 (ε) * 1.5 (powerless) * 0.8 (local) = 0.66. Meets Snare threshold.
constraint_indexing:constraint_classification(ergo_storage_rent, snare,
    context(agent_power(powerless),
            time_horizon(historical),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE MINER (ROPE)
% For miners, this is a vital coordination mechanism for long-term network
% sustainability, guaranteeing revenue after block rewards diminish.
% χ = 0.55 (ε) * -0.2 (institutional) * 1.2 (global) = -0.132. Perceived as a net benefit.
constraint_indexing:constraint_classification(ergo_storage_rent, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The designer sees a system that solves coordination (bloat, security) via
% asymmetric extraction from a specific group, requiring protocol enforcement.
% This is the definition of a Tangled Rope.
constraint_indexing:constraint_classification(ergo_storage_rent, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(ergo_storage_rent_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(ergo_storage_rent, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(ergo_storage_rent, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless == snare,
    TypeInstitutional == rope,
    TypePowerless \= TypeInstitutional.

test(threshold_validation_for_tangled_rope) :-
    % A Tangled Rope must have high base extraction and require enforcement.
    domain_priors:base_extractiveness(ergo_storage_rent, E),
    E >= 0.46,
    domain_priors:requires_active_enforcement(ergo_storage_rent),
    narrative_ontology:constraint_beneficiary(ergo_storage_rent, _),
    narrative_ontology:constraint_victim(ergo_storage_rent, _).

:- end_tests(ergo_storage_rent_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness is set to 0.55, placing it firmly in the high-extraction category.
 * This score is necessary for the powerless perspective (χ=0.66) to correctly classify as a Snare.
 * For an individual who has lost their keys, the rent is a total, unavoidable loss.
 * For miners (institutional), the effective extraction is negative, making it a pure coordination
 * mechanism (Rope) that guarantees future income and network security.
 * The analytical view must reconcile these facts: a system with a clear coordination function
 * (beneficiary exists) that is funded by asymmetric extraction (victim exists) and requires
 * protocol-level enforcement. This is the canonical definition of a Tangled Rope.
 *
 * MANDATROPHY ANALYSIS:
 * [RESOLVED MANDATROPHY]
 * Classifying this as a Tangled Rope prevents the system from making two errors. It avoids
 * dismissing the mechanism as a pure Snare (ignoring its vital coordination role for network
 * security) and avoids idealizing it as a pure Rope (ignoring the real, extractive cost
 * imposed on inactive holders). The Tangled Rope classification correctly identifies the
 * inherent, designed trade-off at the heart of the constraint.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_ergo_storage_rent,
    'Will the social consensus around the 4-year rent period and rate hold, or will it be altered via a future fork?',
    'Monitoring miner voting, community sentiment, and developer proposals on Ergo governance channels over multiple years.',
    'A shorter period increases the Snare-like pressure and extraction; a longer period weakens the long-term security argument, potentially degrading the Rope function.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(ergo_storage_rent, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection (metric_substitution,
% extraction_accumulation) by providing measurements at multiple time points.
% Required for high-extraction constraints (base_extractiveness > 0.46).
% This models a system that was designed with this extraction level from the start.

% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(ergo_storage_rent_tr_t0, ergo_storage_rent, theater_ratio, 0, 0.05).
narrative_ontology:measurement(ergo_storage_rent_tr_t5, ergo_storage_rent, theater_ratio, 5, 0.08).
narrative_ontology:measurement(ergo_storage_rent_tr_t10, ergo_storage_rent, theater_ratio, 10, 0.1).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(ergo_storage_rent_ex_t0, ergo_storage_rent, base_extractiveness, 0, 0.52).
narrative_ontology:measurement(ergo_storage_rent_ex_t5, ergo_storage_rent, base_extractiveness, 5, 0.54).
narrative_ontology:measurement(ergo_storage_rent_ex_t10, ergo_storage_rent, base_extractiveness, 10, 0.55).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% This mechanism allocates a future resource (miner fees) and manages a
% current resource (scarce blockchain state space).
narrative_ontology:coordination_type(ergo_storage_rent, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: ergo_storage_rent_mechanism
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: Ergo Platform Documentation (ErgoDocs) and Whitepapers
% ============================================================================

:- module(constraint_ergo_storage_rent_mechanism, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: ergo_storage_rent_mechanism
 * human_readable: Ergo Storage Rent (Demurrage)
 * domain: economic/technological
 * temporal_scope: Post-2019 (Operational Mainnet)
 * spatial_scope: Global (Distributed Network)
 * 
 * SUMMARY:
 * Ergo introduces a "Storage Rent" or demurrage fee for inactive data stored 
 * on the blockchain. Any UTXO (box) that remains unspent for 4 years is 
 * subject to a recurring fee. This prevents "blockchain bloat" 
 * and ensures miners have a long-term revenue stream after the emission 
 * of new coins ends.
 * 
 * KEY AGENTS:
 * - Long-term Holders (Individual Powerless): Subject to the fee if inactive.
 * - Miners (Institutional): The beneficiaries who collect the rent.
 * - Protocol Developers (Analytical): Architects of the eUTXO model.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(ergo_storage_rent_mechanism, 0, 10).
narrative_ontology:constraint_claim(ergo_storage_rent_mechanism, tangled_rope).

% Base extractiveness: 0.15.
% Small fee (approx 0.13 ERG every 4 years) prevents total loss 
% but extracts value from inactive addresses.
domain_priors:base_extractiveness(ergo_storage_rent_mechanism, 0.15).

% Suppression score: 0.8.
% The rule is hardcoded in the sigmastate-interpreter; the only 
% escape is to spend/move the coins every 4 years.
domain_priors:suppression_score(ergo_storage_rent_mechanism, 0.8).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(ergo_storage_rent_mechanism, extractiveness, 0.15).
narrative_ontology:constraint_metric(ergo_storage_rent_mechanism, suppression_requirement, 0.8).

% Enforcement: The protocol enforces itself through consensus rules.
domain_priors:requires_active_enforcement(ergo_storage_rent_mechanism).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(ergo_storage_rent_mechanism, ergo_miners).
constraint_victim(ergo_storage_rent_mechanism, inactive_wallet_addresses).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE "HODLER" (PASSIVE INVESTOR) - Snare
   --------------------------------------------------------------------------
   WHO: powerless (Users subject to protocol-level consensus)
   WHEN: biographical (Holding for decades; 4 years is a short horizon)
   WHERE: trapped (Cannot opt-out of rent if the box is on-chain)
   
   WHY THIS CLASSIFICATION:
   To an investor who treats crypto like "digital gold" (buy and forget), 
   storage rent is a 'Snare'. It forces them to maintain "active awareness" 
   or suffer the gradual extraction of their assets, strangling a purely
   passive investment strategy.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    ergo_storage_rent_mechanism,
    snare,
    context(
        agent_power(powerless),
        time_horizon(biographical),
        exit_options(trapped),
        spatial_scope(global)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: NETWORK MINER - Rope
   --------------------------------------------------------------------------
   WHO: institutional (Provides security for the network)
   WHEN: historical (Building a self-sustaining network post-emission)
   WHERE: arbitrage (Can move hash-rate between PoW chains)
   
   WHY THIS CLASSIFICATION:
   For miners, the rent is a 'Rope'. It is a functional tool that guarantees 
   security budgets in a world where transaction fees alone might be 
   insufficient after the 2045 emission end, ensuring long-term network security.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    ergo_storage_rent_mechanism,
    rope,
    context(
        agent_power(institutional),
        time_horizon(historical),
        exit_options(arbitrage),
        spatial_scope(global)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: PROTOCOL ARCHITECT / FOUNDATION - Mountain
   --------------------------------------------------------------------------
   WHO: analytical (Designers of the state management rules)
   WHEN: civilizational (Solving for "state bloat" over centuries)
   WHERE: analytical (Observing the long-term health of the UTXO set)
   
   WHY THIS CLASSIFICATION:
   From a design perspective, storage rent is a 'Mountain'—a fundamental 
   economic law required for a UTXO system to survive indefinitely without 
   infinite storage growth. It is an immutable necessity for the long-term
   viability of the protocol.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    ergo_storage_rent_mechanism,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(civilizational),
        exit_options(analytical),
        spatial_scope(global)
    )
).

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(ergo_storage_rent_mechanism_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(ergo_storage_rent_mechanism, Type1, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(ergo_storage_rent_mechanism, Type2, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(ergo_storage_rent_mechanism, Type3, context(agent_power(analytical), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3,
    Type1 \= Type3.

:- end_tests(ergo_storage_rent_mechanism_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. CLASSIFICATION RATIONALE:
 *    - HODLer (Snare): A passive investment strategy is penalized.
 *    - Miner (Rope): A tool for long-term network sustainability.
 *    - Protocol Architect (Mountain): An economic necessity for UTXO management.
 * 
 * 2. CORE INSIGHT: Ergo's storage rent is a 'Tangled Rope'. It's a 'Rope' for
 *    network security and a 'Mountain' of economic necessity for designers, but
 *    it creates a 'Snare' for long-term passive holders, highlighting the
 *    trade-off between network health and individual asset sovereignty.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * The core uncertainty is the long-term effectiveness of the storage rent mechanism.
 */

omega_variable(
    state_garbage_collection_adoption,
    "Will miners consistently 'garbage collect' tiny dust boxes if the fees collected are lower than the computational cost of doing so?",
    resolution_mechanism("Monitoring the first 4-year cycle (2023 onwards) to see box collection rates vs. network fees; economic modeling of miner incentives."),
    impact("If NO: The rent is a failed 'Rope' (ineffective). If YES: The 'Rope' successfully secures the chain."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 *
 * ALTERNATIVE 1: Permanent UTXOs (The Bitcoin Model)
 *    Viability: The industry standard, prioritizing untouched asset sovereignty.
 *    Suppression: Ergo explicitly rejects this to solve the "State Bloat" problem, 
 *    treating Bitcoin's permanent storage as an unsustainable "free lunch" that
 *    threatens long-term decentralization.
 *
 * CONCLUSION:
 * The rejection of permanent storage transforms "holding" from a passive 
 * right into a managed responsibility. This makes the storage rent mechanism
 * a core component of Ergo's economic philosophy, a 'Rope' for sustainability
 * that deliberately creates a 'Snare' for inactive accounts.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/ergo_storage_rent_mechanism].
 * 2. Multi-perspective: ?- multi_index_report(ergo_storage_rent_mechanism).
 * 3. Run tests: ?- run_tests(ergo_storage_rent_mechanism_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: ergodic_theorems
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Statistical Mechanics / Probability Theory / Ergodicity
% ============================================================================

:- module(constraint_ergodic_theorems, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    constraint_indexing:constraint_classification/3,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:constraint_metric/3,
    constraint_beneficiary/2,
    constraint_victim/2.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: ergodic_theorems
 * human_readable: Ergodic Theorems (Time vs. Ensemble Averages)
 * domain: scientific/mathematical/economic
 * temporal_scope: Universal (Physics and Decision Theory)
 * spatial_scope: Universal (Stochastic Systems)
 * * SUMMARY:
 * Ergodic theorems describe systems where the "ensemble average" (the average 
 * across many parallel states) equals the "time average" (the average of one 
 * state over a long period). In non-ergodic systems, such as gambling with 
 * ruin or evolutionary survival, the "ensemble" success rate is irrelevant 
 * because a single path hitting zero results in total termination.
 * * KEY AGENTS:
 * - The Statistician: Assumes ergodicity to simplify calculations of large 
 * populations.
 * - The Individual Gambler: Faces the "ruin" problem where time averages 
 * diverge from ensemble expectations.
 * - The Biological Organism: Subject to the non-ergodic constraint of 
 * mortality—you cannot "average" your life with others if you die.
 * * NARRATIVE ARC:
 * Ergodicity is often treated as a "Rope" for calculation by institutions 
 * (Insurers, Economists), but for the individual subject to ruin, it is an 
 * invisible "Mountain" of physical limitation. When systems are designed 
 * as if they were ergodic when they are not, they become a "Snare" for the 
 * participants who are "absorbed" (eliminated) by volatility.
 */

/* ==========================================================================
   2. BASE PROPERTIES (The "Reality" Layer)
   ========================================================================== */

% Required for structural integration
narrative_ontology:interval(ergodic_interval, 0, 10).
narrative_ontology:constraint_claim(ergodic_theorems, mountain).

% Base extractiveness: 0.3 (Moderate)
% Rationale: While ergodicity is a physical/mathematical property, the 
% *assumption* of ergodicity extracts value by justifying risky policies 
% (e.g., in finance or public health) that work on average but fail individuals.
domain_priors:base_extractiveness(ergodic_theorems, 0.3).

% Suppression: 0.6 (High)
% Rationale: Non-ergodicity is frequently suppressed in mainstream economic 
% modeling. The "expected value" (ensemble) is presented as the only rational 
% choice, hiding the risk of individual termination.
domain_priors:suppression_score(ergodic_theorems, 0.6).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(ergodic_theorems, extractiveness, 0.3).
narrative_ontology:constraint_metric(ergodic_theorems, suppression_requirement, 0.6).

% Enforcement: Emerges naturally from the nature of probability and absorbing barriers.
domain_priors:emerges_naturally(ergodic_theorems).

% Metrics required for Section 1 of the Executive Summary
% Beneficiaries: Institutional planners, insurers, and high-frequency traders 
% who can play the ensemble.
constraint_beneficiary(ergodic_theorems, institutional_aggregators).

% Victims: Individual actors, small businesses, and biological entities 
% subject to path-dependency and ruin.
constraint_victim(ergodic_theorems, path_dependent_individuals).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE MATHEMATICAL PHYSICIST - MOUNTAIN
   --------------------------------------------------------------------------
   
   WHO: analytical (The observer of phase space).
   WHEN: civilizational (Eternal laws of statistical mechanics).
   WHERE: trapped (Cannot escape the definitions of measure theory).
   SCOPE: global.
   
   WHY THIS CLASSIFICATION:
   To the physicist, the ergodic hypothesis is a Mountain. It defines the 
   boundary of what can be calculated. Systems are either ergodic or they 
   are not; this is an objective property of the system's phase space 
   and dynamics. It is the "ground" upon which thermodynamics is built.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    ergodic_theorems,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(civilizational),
        exit_options(trapped),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE INSURANCE ACTUARY - ROPE
   --------------------------------------------------------------------------
   
   WHO: institutional (The manager of large-scale risk).
   WHEN: historical (Scaling over the life of an institution).
   WHERE: arbitrage (Can aggregate across millions of individuals).
   SCOPE: national.
   
   WHY THIS CLASSIFICATION:
   For the actuary, ergodicity is a Rope. By pooling enough individuals, 
   the "time average" of the insurer becomes the "ensemble average" of 
   the population. It is a coordination mechanism that allows for the 
   monetization of risk and the creation of social stability.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    ergodic_theorems,
    rope,
    context(
        agent_power(institutional),
        time_horizon(historical),
        exit_options(arbitrage),
        spatial_scope(national)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE INDIVIDUAL GAMBLER - SNARE
   --------------------------------------------------------------------------
   
   WHO: powerless (A single agent with one "life").
   WHEN: immediate (The current sequence of bets).
   WHERE: trapped (Once 'ruin' occurs, no more play is possible).
   SCOPE: local.
   
   WHY THIS CLASSIFICATION:
   For the individual facing a non-ergodic game, the "average" is a Snare. 
   If the game has a 99% success rate but the 1% failure results in death 
   (ruin), the "ensemble average" (thriving) is irrelevant. The structure 
   of the game strangles the player over time, as the probability of 
   hitting the absorbing barrier approaches 1.0.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    ergodic_theorems,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(ergodic_theorems_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(ergodic_theorems, Type1, context(agent_power(analytical), _, _, _)),
    constraint_indexing:constraint_classification(ergodic_theorems, Type2, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(ergodic_theorems, Type3, context(agent_power(powerless), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3.

test(power_extractiveness_scaling) :-
    % Institutional actors benefit from aggregation; individuals suffer from ruin.
    domain_priors:base_extractiveness(ergodic_theorems, E),
    E >= 0.3.

test(time_immutability) :-
    % Civilizational horizon views mathematical laws as Mountains.
    constraint_indexing:effective_immutability(civilizational, trapped, mountain).

:- end_tests(ergodic_theorems_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * * KEY DECISIONS:
 * * 1. EXTRACTIVENESS (0.3):
 * The score is moderate because ergodicity itself is a law of nature, 
 * but its misapplication by "Expert" institutions (The Fragilistas) 
 * extracts survival and capital from the individual.
 * * 2. SUPPRESSION (0.6):
 * High because traditional economics almost entirely ignores non-ergodicity 
 * (the 'ruin' problem), effectively suppressing the most important 
 * constraint on individual survival.
 * * 3. CLASSIFICATION RATIONALE:
 * Physicist (Mountain): The theorem is a tautological truth of math.
 * Actuary (Rope): Institutional scaling converts ergodicity into a tool.
 * Gambler (Snare): Path-dependence and mortality turn probabilities 
 * into terminal traps.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    quantum_ergodicity,
    "Do quantum systems truly explore all available phase space (Ergodic) or are they subject to fundamentally discrete, non-ergodic jumps?",
    resolution_mechanism("Long-term observation of decoherence in complex quantum states"),
    impact("If Mountain: Physics is unified. If Snare: The universe has 'dead-ends' in its probability structure."),
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Multiplicative Dynamics (Kelly Criterion)
 * Viability: A proven mathematical strategy for navigating non-ergodic 
 * systems by betting a fraction of wealth to avoid ruin.
 * Suppression: Moderate. Taught in niche finance/gambling but ignored 
 * in general economic policy which favors "expected value."
 * * CONCLUSION:
 * The existence of the Kelly Criterion as an alternative shifts the 
 * "Snare" of ergodicity into a "Rope" for those with the knowledge and 
 * power to apply it.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * * 1. Load: ?- [constraint_ergodic_theorems].
 * 2. Multi-perspective: ?- multi_index_report(ergodic_theorems).
 * 3. Run tests: ?- run_tests(ergodic_theorems_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: ergot_grain_poisoning
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_ergot_grain_poisoning, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:coordination_type/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: ergot_grain_poisoning
 * human_readable: The Ergot/Famine Dilemma
 * domain: social/technological/biological
 * * SUMMARY:
 * Ergot (Claviceps purpurea) is a fungal parasite of grains—primarily rye—that causes hallucinations, convulsions, and gangrenous death (St. Anthony's Fire). Historically, population pressure forced the cultivation of marginal lands where rye flourished, leading to a systemic trade-off: widespread famine vs. widespread poisoning. The constraint is the social system that managed this trade-off by asymmetrically distributing the poisoned grain to the poor.
 * * KEY AGENTS:
 * - The Peasantry: Subject (Powerless), forced to eat "spurred rye" during famines.
 * - Millers & Landowners: Beneficiary (Institutional), controlled grain distribution, keeping clean flour for the affluent and selling contaminated flour to the poor to avoid financial loss.
 * - The Analytical Historian: Auditor (Analytical), observes the pattern of "dancing manias" and the transition to the potato as a resolution.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(ergot_grain_poisoning, 0.80). % Snare extraction >= 0.46. Extracts health, sanity, and life.
domain_priors:suppression_score(ergot_grain_poisoning, 0.70).   % Alternatives (potato, scientific agriculture) were suppressed by ignorance and tradition.
domain_priors:theater_ratio(ergot_grain_poisoning, 0.10).       % Brutally functional, not performative.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(ergot_grain_poisoning, extractiveness, 0.80).
narrative_ontology:constraint_metric(ergot_grain_poisoning, suppression_requirement, 0.70).
narrative_ontology:constraint_metric(ergot_grain_poisoning, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% It was framed as a natural, unavoidable tragedy (natural_law), but the
% distribution system was a human construction.
narrative_ontology:constraint_claim(ergot_grain_poisoning, constructed).

% Binary flags
domain_priors:requires_active_enforcement(ergot_grain_poisoning). % Required for Tangled Rope. Millers actively sold bad grain.

% Structural property derivation hooks:
% Beneficiaries derive has_coordination_function/1. Victims derive has_asymmetric_extraction/1.
narrative_ontology:constraint_beneficiary(ergot_grain_poisoning, landowners).
narrative_ontology:constraint_beneficiary(ergot_grain_poisoning, millers).
narrative_ontology:constraint_victim(ergot_grain_poisoning, peasantry).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The peasantry faces a choice between starvation and poisoning. This is a
% classic predatory trap where survival comes at the cost of health and sanity.
constraint_indexing:constraint_classification(ergot_grain_poisoning, snare,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For millers and landowners, the system is a Rope. It's a coordination
% mechanism to manage a kingdom-level resource crisis (famine), preserving
% social order and their own wealth by externalizing the biological cost.
constraint_indexing:constraint_classification(ergot_grain_poisoning, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The historian sees both the coordination function (avoiding mass famine) and
% the brutal, asymmetric extraction. It requires active enforcement (selling bad
% grain) and has clear victims and beneficiaries. This is the definition of a Tangled Rope.
constraint_indexing:constraint_classification(ergot_grain_poisoning, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(ergot_grain_poisoning_tests).

test(perspectival_gap) :-
    % Verify the gap between the powerless (Snare) and institutional (Rope).
    constraint_indexing:constraint_classification(ergot_grain_poisoning, snare,
        context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(ergot_grain_poisoning, rope,
        context(agent_power(institutional), _, _, _)).

test(tangled_rope_properties) :-
    % Verify that the conditions for the analytical Tangled Rope classification are met.
    domain_priors:requires_active_enforcement(ergot_grain_poisoning),
    narrative_ontology:constraint_beneficiary(ergot_grain_poisoning, _),
    narrative_ontology:constraint_victim(ergot_grain_poisoning, _).

:- end_tests(ergot_grain_poisoning_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect a system where a biological hazard was weaponized by social
 * stratification. The base extractiveness (0.80) is high due to the severe outcomes
 * (death, gangrene, madness) forced upon the victim class. The suppression (0.70)
 * reflects centuries of scientific ignorance, where the problem was framed as
 * demonic possession rather than a preventable fungal infection.
 *
 * PERSPECTIVAL GAP:
 * The gap is stark. For the peasantry, it is an inescapable Snare (eat and be poisoned,
 * or don't eat and starve). For the institutional powers (millers, landowners), it is
 * a Rope—a tragic but necessary tool for coordinating resource scarcity to prevent
 * total societal collapse, while preserving their own well-being and profit.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * The Mandatrophy risk is that the system misinterprets the constraint as a pure
 * Mountain (an unavoidable natural tragedy) or a pure Snare (pointless cruelty).
 * The Tangled Rope classification for the analytical observer resolves this. It
 * correctly identifies that the constraint has a genuine, albeit grim, coordination
 * function (preventing famine) while simultaneously acknowledging that this function
 * is achieved through severe, asymmetric extraction imposed on a powerless group.
 * The system wasn't just cruel; it was functionally cruel to maintain a stratified order.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_ergot_grain_poisoning,
    "Was the distribution of spurred rye to the poor a functional necessity for kingdom survival (a tragic Tangled Rope) or an intentional, predatory extraction for profit (a pure Snare)?",
    "Audit of medieval grain stores and distribution logs vs. famine mortality rates to determine if clean grain was truly scarce or just hoarded.",
    "If necessity: Tangled Rope. If predatory hoarding: Snare.",
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(ergot_grain_poisoning, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This was a stable, long-term constraint. The extraction was consistently high,
% and the system was brutally functional (low theater) for centuries until
% scientific advances and new crops provided an exit.
%
% Theater ratio over time (consistently low):
narrative_ontology:measurement(ergot_grain_poisoning_tr_t0, ergot_grain_poisoning, theater_ratio, 0, 0.10).
narrative_ontology:measurement(ergot_grain_poisoning_tr_t5, ergot_grain_poisoning, theater_ratio, 5, 0.10).
narrative_ontology:measurement(ergot_grain_poisoning_tr_t10, ergot_grain_poisoning, theater_ratio, 10, 0.10).

% Extraction over time (consistently high):
narrative_ontology:measurement(ergot_grain_poisoning_ex_t0, ergot_grain_poisoning, base_extractiveness, 0, 0.80).
narrative_ontology:measurement(ergot_grain_poisoning_ex_t5, ergot_grain_poisoning, base_extractiveness, 5, 0.80).
narrative_ontology:measurement(ergot_grain_poisoning_ex_t10, ergot_grain_poisoning, base_extractiveness, 10, 0.80).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The constraint's coordination function was managing the food supply.
narrative_ontology:coordination_type(ergot_grain_poisoning, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: euler_characteristic_topology
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Euler's Polyhedron Formula (V - E + F = 2) / Algebraic Topology
% ============================================================================

:- module(constraint_euler_characteristic, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: euler_characteristic_topology
 * human_readable: Euler Characteristic (Topological Invariance)
 * domain: mathematical/technological
 * temporal_scope: 1750 - Present (Civilizational)
 * spatial_scope: Global/Abstract (Manifolds and Polyhedra)
 * * SUMMARY:
 * The Euler Characteristic (chi) is a topological invariant, a number that 
 * describes a topological space's shape or structure regardless of how it is 
 * bent or stretched. For a convex polyhedron, V - E + F = 2. This functions 
 * as a fundamental structural constraint on all physical and abstract surfaces.
 * * KEY AGENTS:
 * - The Polyhedron/Mesh: The powerless subject whose existence is dictated 
 * by the ratio of vertices, edges, and faces.
 * - The Graphics Engineer: An institutional agent who uses the characteristic 
 * to ensure mesh integrity and manifold properties.
 * - The Topologist: An analytical observer who classifies the universe of 
 * shapes using this invariant.
 * * NARRATIVE ARC:
 * Originally a geometric observation by Euler, the characteristic became a 
 * "Mountain" of algebraic topology—an inescapable law of connectivity. In 
 * modern 3D modeling and data science, it acts as a "Rope" for structural 
 * verification, though it becomes a "Snare" when rigid topological 
 * requirements prevent the optimization of complex meshes.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for DR-Audit Suite
narrative_ontology:interval(euler_era, 1750, 2026).
narrative_ontology:constraint_claim(euler_characteristic_topology, mountain).

% Base extractiveness score (0.0-1.0)
% Rationale: Low (0.1). Mathematical invariants are non-extractive truths, 
% though they "extract" computational labor during verification.
domain_priors:base_extractiveness(euler_characteristic_topology, 0.1).

% Suppression score (0.0-1.0)
% Rationale: Low (0.1). It is an foundational truth that enables rather 
% than suppresses, though it renders "non-manifold" geometry invalid.
domain_priors:suppression_score(euler_characteristic_topology, 0.1).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(euler_characteristic_topology, extractiveness, 0.1).
narrative_ontology:constraint_metric(euler_characteristic_topology, suppression_requirement, 0.1).

% Enforcement: Emerges naturally from the axioms of topology.
domain_priors:emerges_naturally(euler_characteristic_topology).

% Metrics for Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(euler_characteristic_topology, structural_engineers). % Predictability.
constraint_beneficiary(euler_characteristic_topology, computer_graphics). % Mesh integrity.
constraint_victim(euler_characteristic_topology, non_manifold_geometry). % Functionally suppressed.

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE GRAPHICS MESH (THE "SUBJECT") - Mountain
   --------------------------------------------------------------------------
   
   WHO: powerless - The mesh cannot "choose" to have V-E+F != 2 
        if it is to remain a convex polyhedron.
   WHEN: immediate - The law applies to every frame and every operation.
   WHERE: trapped - Bound by the topological constraints of its own connectivity.
   SCOPE: local - Immediate neighborhood of faces and vertices.
   
   WHY THIS CLASSIFICATION:
   For the geometry itself, the Euler Characteristic is an unchangeable 
   feature of the universe. To exist as a valid shape, it must obey 
   the structural ratio.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    euler_characteristic_topology,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE SOFTWARE ARCHITECT (CAD/CG) - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional - Power to define valid data structures and constraints.
   WHEN: biographical - Planning the lifecycle of a modeling engine.
   WHERE: mobile - Can choose different topologies (torus vs. sphere) to 
        solve specific problems.
   SCOPE: global - Applies across all models in the system.
   
   WHY THIS CLASSIFICATION:
   For the architect, the Euler Characteristic is a "Rope"—a coordination 
   mechanism. It allows them to verify that a complex mesh is manifold 
   and "closed," ensuring that lighting and physics calculations are stable.
   
   NARRATIVE EVIDENCE:
   "The characteristic is used as a consistency check in mesh processing 
   algorithms to identify holes or structural errors."
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    euler_characteristic_topology,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE TOPOLOGICAL OPTIMIZER - Snare
   --------------------------------------------------------------------------
   
   WHO: individual_moderate - Has the power to optimize but is bound by the rules.
   WHEN: immediate - Stuck in a local optimum that cannot be escaped without 
        changing the genus.
   WHERE: constrained - The optimization cannot "jump" to a better shape 
        without a discontinuous change.
   SCOPE: local - A specific bottleneck in a design.
   
   WHY THIS CLASSIFICATION:
   In structural optimization (like generative design), the requirement to 
   maintain a specific Euler Characteristic can act as a "Snare." It 
   prevents the algorithm from adding a necessary hole (changing genus) 
   to save weight, extracting efficiency for the sake of topological continuity.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    euler_characteristic_topology,
    snare,
    context(
        agent_power(individual_moderate),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(local)
    )
) :- 
    domain_priors:base_extractiveness(euler_characteristic_topology, E),
    E > 0.05,
    !.

/* ==========================================================================
   4. TESTS (Insights into Topological Power)
   ========================================================================== */

:- begin_tests(euler_characteristic_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(euler_characteristic_topology, Type1, context(powerless, immediate, trapped, local)),
    constraint_indexing:constraint_classification(euler_characteristic_topology, Type2, context(institutional, biographical, mobile, global)),
    Type1 = mountain,
    Type2 = rope.

test(genus_change_as_exit) :-
    % Changing the genus (adding a hole) is a mobile exit option for the powerful.
    constraint_indexing:constraint_classification(euler_characteristic_topology, rope, context(institutional, _, mobile, _)).

test(emergence) :-
    domain_priors:emerges_naturally(euler_characteristic_topology).

:- end_tests(euler_characteristic_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * * 1. BASE EXTRACTIVENESS (0.1): 
 * Reasoning: Unlike social constraints, mathematical laws don't "take" 
 * anything away, but their rigid enforcement in simulation software 
 * extracts hardware cycles for parity checks.
 * * 2. CLASSIFICATION AS MOUNTAIN: 
 * Reasoning: For the primary subject (the shape), there is zero choice. 
 * Connectivity is fate.
 * * 3. PERSPECTIVES:
 * Chose Mesh (Subject), Architect (User), and Optimizer (Victim of 
 * Continuity) to demonstrate how topology limits functional design.
 */

% OMEGA IDENTIFICATION
omega_variable(
    discontinuous_transitions,
    "Can a system transition between Euler Characteristics (genus 0 to 1) 
    without collapsing the structural 'Mountain'?",
    resolution_mechanism("Topological data analysis of phase transitions in soft matter."),
    impact("If Yes: The 'Mountain' is a 'Rope' even for the subject. If No: It is a Snare of fixity."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Non-Manifold Geometry (Point Clouds/Soups)
 * Viability: Used in raw sensor data where connectivity is unknown.
 * Suppression: Rejected by simulation engines because it lacks the 
 * "Rope" of connectivity needed for physics.
 * * ALTERNATIVE 2: Hypergraphs
 * Viability: Allows edges to connect more than two vertices.
 * Suppression: Useful in network theory, but the physical world 
 * defaults to the 3-manifold Euler characteristic for surfaces.
 * * CONCLUSION:
 * The dominance of the Euler Characteristic as a "Rope" for 
 * engineering is due to the physical reality of surfaces, making 
 * non-manifold alternatives functionally invisible.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Load: ?- [euler_characteristic_topology].
% Multi-perspective check: ?- constraint_indexing:multi_index_report(euler_characteristic_topology).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: eurozone_fragmentation_2026
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-16
% ============================================================================

:- module(constraint_eurozone_fragmentation_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: eurozone_fragmentation_2026
 * human_readable: Eurozone Inflation Disparity and Monetary Policy Rigidity
 * domain: economic/political
 * * SUMMARY:
 * By early 2026, Eurozone inflation data reveals deep fragmentation masked by a cooling aggregate trend.
 * While core economies like France see inflation near zero (0.4%), peripheral states like Slovakia (4.2%) and Croatia (3.6%) remain high.
 * This disparity, governed by a single monetary policy from the European Central Bank (ECB), acts as a structural constraint. It prevents high-inflation states from using standard monetary tools (like raising interest rates) to cool their economies, while simultaneously preventing cross-border businesses from scaling into a truly unified single market.
 * * KEY AGENTS:
 * - High-Inflation Member States (e.g., Slovakia, Croatia): Subject (Powerless)
 * - European Central Bank (ECB) & Core Economies: Beneficiary (Institutional)
 * - Cross-Border Innovators & Investors: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Extraction is moderate-high (0.48) as disparate inflation rates extract
% purchasing power unevenly and the rigid monetary policy prevents cross-border scaling,
% effectively taxing growth potential in peripheral economies.
domain_priors:base_extractiveness(eurozone_fragmentation_2026, 0.48).

% Suppression is high (0.72) as the single-currency mandate and unified ECB policy
% actively suppress the ability of individual member states to adjust monetary policy
% (e.g., interest rates, currency valuation) to suit local economic conditions.
domain_priors:suppression_score(eurozone_fragmentation_2026, 0.72).

% Theater ratio is moderate (0.65) because the official rhetoric of a "unified Single Market"
% and "harmonized policy" masks the underlying economic fragmentation and divergent outcomes.
domain_priors:theater_ratio(eurozone_fragmentation_2026, 0.65).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(eurozone_fragmentation_2026, extractiveness, 0.48).
narrative_ontology:constraint_metric(eurozone_fragmentation_2026, suppression_requirement, 0.72).
narrative_ontology:constraint_metric(eurozone_fragmentation_2026, theater_ratio, 0.65).

% The system claims to be a coordination mechanism for stability.
narrative_ontology:constraint_claim(eurozone_fragmentation_2026, coordination).

% Binary flags
% The single monetary policy requires continuous active enforcement and intervention by the ECB.
% This is a mandatory property for the Tangled Rope classification.
domain_priors:requires_active_enforcement(eurozone_fragmentation_2026).

% Structural property derivation hooks:
% Beneficiaries gain from currency stability and unified capital markets.
narrative_ontology:constraint_beneficiary(eurozone_fragmentation_2026, central_monetary_authorities).
narrative_ontology:constraint_beneficiary(eurozone_fragmentation_2026, core_economy_exporters).
% Victims are those unable to scale or whose local economies are mismatched with the central policy.
narrative_ontology:constraint_victim(eurozone_fragmentation_2026, peripheral_economy_savers).
narrative_ontology:constraint_victim(eurozone_fragmentation_2026, cross_border_innovators).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For a high-inflation member state or a business trying to operate there, the
% inability to use local monetary policy is a Snare. They are trapped by a
% system that extracts purchasing power and suppresses local adaptation.
% χ = 0.48 * π(powerless:1.5) * σ(continental:1.1) = 0.792
constraint_indexing:constraint_classification(eurozone_fragmentation_2026, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(continental))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The ECB and core economies view the Euro as a Rope: the essential coordination
% infrastructure for continental stability, low transaction costs, and a unified capital market.
% χ = 0.48 * π(institutional:-0.2) * σ(continental:1.1) = -0.1056 (felt as a benefit)
constraint_indexing:constraint_classification(eurozone_fragmentation_2026, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(continental))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% An analyst sees a Tangled Rope: a genuine coordination function (Rope) that
% is inseparable from its asymmetric extraction of growth potential and policy
% autonomy from peripheral regions (Snare). It requires active enforcement to maintain.
% χ = 0.48 * π(analytical:1.15) * σ(global:1.2) = 0.6624
constraint_indexing:constraint_classification(eurozone_fragmentation_2026, tangled_rope,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(eurozone_fragmentation_2026_tests).

test(perspectival_gap) :-
    % Verify the core perspectival gap between the powerless subject and the institutional beneficiary.
    constraint_indexing:constraint_classification(eurozone_fragmentation_2026, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(eurozone_fragmentation_2026, rope, context(agent_power(institutional), _, _, _)).

test(analytical_classification_is_tangled_rope) :-
    % Verify the analytical observer correctly identifies the structure as a Tangled Rope.
    % This requires beneficiary, victim, and enforcement declarations to be present.
    constraint_indexing:constraint_classification(eurozone_fragmentation_2026, tangled_rope, context(agent_power(analytical), _, _, _)).

test(tangled_rope_structural_requirements) :-
    % Explicitly check that all three structural requirements for a Tangled Rope are met.
    narrative_ontology:constraint_beneficiary(eurozone_fragmentation_2026, _), % -> has_coordination_function
    narrative_ontology:constraint_victim(eurozone_fragmentation_2026, _),     % -> has_asymmetric_extraction
    domain_priors:requires_active_enforcement(eurozone_fragmentation_2026).

:- end_tests(eurozone_fragmentation_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The base extractiveness (0.48) and suppression (0.72) scores are high, reflecting a system
 * with significant coercive power that produces asymmetric outcomes. The key perspectival gap is
 * between the ECB (institutional), which sees a vital coordination tool (Rope), and the
 * peripheral economies (powerless), which experience a trap that stifles growth and autonomy (Snare).
 *
 * The analytical classification must be Tangled Rope because the system possesses all three
 * required properties: a genuine coordination function (beneficiaries exist), asymmetric extraction
 * (victims exist), and requires continuous, active enforcement by a central authority (the ECB's
 * monetary policy interventions).
 *
 * * MANDATROPHY ANALYSIS:
 * Classifying this as a Tangled Rope is crucial for avoiding mandatrophy. A simplistic analysis
 * might label the entire Euro system a "Snare" based on the negative outcomes in the periphery.
 * However, this would ignore its undeniable and powerful coordination function for core economies
 * and capital markets. The Tangled Rope classification correctly captures this duality, acknowledging
 * both the coordination benefit and the extractive harm, preventing the system from collapsing the
 * analysis into a single, inaccurate label.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_eurozone_fragmentation_2026,
    'Is the fragmentation a temporary stress condition or a permanent structural flaw of a single monetary policy applied to diverse economies?',
    'Long-term (10+ year) analysis of inflation/growth divergence between Eurozone core and periphery vs. non-Euro EU states.',
    'If temporary, the system is a stressed Rope. If permanent, it is a structurally unstable Tangled Rope trending towards systemic failure.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(eurozone_fragmentation_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data models the constraint's evolution. The interval represents the
% period from the Euro's consolidation to the 2026 fragmentation crisis.
%
% Theater ratio rises as the gap between "Unity" rhetoric and divergent regional data grows.
narrative_ontology:measurement(eurozone_fragmentation_2026_tr_t0, eurozone_fragmentation_2026, theater_ratio, 0, 0.30).
narrative_ontology:measurement(eurozone_fragmentation_2026_tr_t5, eurozone_fragmentation_2026, theater_ratio, 5, 0.45).
narrative_ontology:measurement(eurozone_fragmentation_2026_tr_t10, eurozone_fragmentation_2026, theater_ratio, 10, 0.65).

% Extraction rises as structural imbalances become more pronounced, transferring
% economic potential from the periphery to the core.
narrative_ontology:measurement(eurozone_fragmentation_2026_ex_t0, eurozone_fragmentation_2026, base_extractiveness, 0, 0.20).
narrative_ontology:measurement(eurozone_fragmentation_2026_ex_t5, eurozone_fragmentation_2026, base_extractiveness, 5, 0.35).
narrative_ontology:measurement(eurozone_fragmentation_2026_ex_t10, eurozone_fragmentation_2026, base_extractiveness, 10, 0.48).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The Eurosystem is a centrally managed policy framework.
narrative_ontology:coordination_type(eurozone_fragmentation_2026, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: exoplanetary_habitability_arbitrage
% ============================================================================
% Generated: 2026-01-21
% Model: Gemini 2.0 Flash
% Source: Alex Wilkins, "Our solar system is extremely weird"
% Status: [RESOLVED]
% ============================================================================

:- module(constraint_exoplanetary_habitability_arbitrage, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: exoplanetary_habitability_arbitrage
 * human_readable: Exoplanetary Habitability Arbitrage
 * domain: technological/scientific
 * temporal_scope: 2000s to 2026+
 * spatial_scope: Global (Astrophysics Research Labs)
 * * SUMMARY:
 * This constraint represents the strategic pivot in the search for extraterrestrial life, 
 * moving from the search for "Earth twins" to identifying anomalies based on our 
 * solar system's "weirdness". Researchers arbitrage the 
 * gap between the rare 1-in-10 occurrence of Jupiter-sized planets and the common 
 * "super-Earth" systems to prioritize high-cost observation targets.
 * * KEY AGENTS:
 * - The Exobiologist: Analytical observer seeking to "rewrite the story" of formation to find life.
 * - The Legacy Planet Hunter: Agent traditionally focused on sun-like stars and 1:1 Earth analogs.
 * - The Habitable System: The physical reality where orbit circularity and stellar neighbor absence define "weirdness".
 * * NARRATIVE ARC:
 * The discovery that our solar system is a potential "one in a million" fluke shifts 
 * habitability from a "Mountain" of inevitable discovery to a "Rope" of highly 
 * selective, data-driven arbitrage.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(exoplanetary_habitability_arbitrage, 0, 10).
narrative_ontology:constraint_claim([exoplanetary_habitability_arbitrage], [scientific_prioritization]).

% Base extractiveness score (0.45 = Moderate)
% Rationale: High-cost missions like the Habitable Worlds Observatory extract 
% resources from general astronomy to fund specialized searches for "weird" flukes.
domain_priors:base_extractiveness(exoplanetary_habitability_arbitrage, 0.45).

% Suppression score (0.55 = Moderate)
% Rationale: The assumption of our system being "normal" previously suppressed 
% the search for "weird" trajectories and super-Earth anomalies.
domain_priors:suppression_score(exoplanetary_habitability_arbitrage, 0.55).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(exoplanetary_habitability_arbitrage, extractiveness, 0.45).
narrative_ontology:constraint_metric(exoplanetary_habitability_arbitrage, suppression_requirement, 0.55).

% Enforcement requirements
% Emerges naturally from the statistical rarity of our system's architecture.
domain_priors:emerges_naturally(exoplanetary_habitability_arbitrage).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
% Modern planetary theorists benefit from the "rewrite" of formation stories.
constraint_beneficiary(exoplanetary_habitability_arbitrage, planetary_theorists).
% Traditional "Earth twin" hunters lose funding as the search pivots to anomalies.
constraint_victim(exoplanetary_habitability_arbitrage, legacy_astronomers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE EXOBIOLOGIST - Rope
   --------------------------------------------------------------------------
   
   WHO: analytical (Observer using "large-scale, long-term surveys")
   WHEN: biographical (Tracking orbital wobbles since the early 2000s)
   WHERE: arbitrage (Playing "weird" system features against common exoplanet data)
   SCOPE: global (Drawing on data from telescopes like Kepler and TESS)
   
   WHY THIS CLASSIFICATION:
   For the exobiologist, habitability arbitrage is a Rope—a functional tool to 
   refine the "one in a million" search and locate life in a galaxy full of super-Earths.
   
   NARRATIVE EVIDENCE:
   "Putting those together, we’re definitely weird... helped astronomers rewrite 
   the story of how it formed".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    exoplanetary_habitability_arbitrage,
    rope,
    context(
        agent_power(analytical),
        time_horizon(biographical),
        exit_options(arbitrage),
        spatial_scope(global)
    )
) :-
    domain_priors:base_extractiveness(exoplanetary_habitability_arbitrage, E),
    E < 0.6,
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE LEGACY PLANET HUNTER - Snare
   --------------------------------------------------------------------------
   
   WHO: powerless (Subject to the pivot away from "typicality")
   WHEN: immediate (Addressing current unmet expectations of finding Earth twins)
   WHERE: trapped (Committed to searching for Earth-like planets around sun-like stars)
   SCOPE: national (Restricted by funding for traditional "typical" models)
   
   WHY THIS CLASSIFICATION:
   For those hunting for an "Earth 2.0" using old models, the "weirdness" finding 
   is a Snare—it reveals that their search target might not even exist.
   
   NARRATIVE EVIDENCE:
   "We have yet to spot an Earth-like planet around a sun-like star... we’re 
   missing planets common to most other star systems".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    exoplanetary_habitability_arbitrage,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(national)
    )
) :-
    domain_priors:base_extractiveness(exoplanetary_habitability_arbitrage, E),
    E > 0.4,
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: RARE EARTH PROPONENT - Mountain
   --------------------------------------------------------------------------
   
   WHO: institutional (Viewing "weirdness" as an immutable biological prerequisite)
   WHEN: civilizational (The deep-time fluke of Earth's formation)
   WHERE: constrained (Bound by the physical lack of alien life so far)
   SCOPE: global (The total absence of detected aliens in our galaxy)
   
   WHY THIS CLASSIFICATION:
   To the Rare Earth proponent, the system's architecture is a Mountain—an 
   unchangeable biological necessity that explains why we have yet to find life.
   
   NARRATIVE EVIDENCE:
   "We have yet to spot an Earth-like planet... not to mention alien life... 
   we’re definitely weird".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    exoplanetary_habitability_arbitrage,
    mountain,
    context(
        agent_power(institutional),
        time_horizon(civilizational),
        exit_options(constrained),
        spatial_scope(global)
    )
) :-
    % Classification based on the perception of "weirdness" as fate
    true,
    !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(exoplanetary_habitability_arbitrage_tests).

test(multi_perspective_variance) :-
    % Exobiologist (Rope) vs Hunter (Snare) vs Rare Earth (Mountain)
    constraint_indexing:constraint_classification(exoplanetary_habitability_arbitrage, rope, context(analytical, biographical, arbitrage, global)),
    constraint_indexing:constraint_classification(exoplanetary_habitability_arbitrage, snare, context(powerless, immediate, trapped, national)),
    constraint_indexing:constraint_classification(exoplanetary_habitability_arbitrage, mountain, context(institutional, civilizational, constrained, global)).

test(power_extractiveness_scaling) :-
    % Funding extraction for new "weird" telescopes (0.45) affects legacy researchers.
    Score1 = 0.45,
    Score2 = 0.1,
    Score1 > Score2.

:- end_tests(exoplanetary_habitability_arbitrage_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-21
 * * KEY DECISIONS:
 * * 1. EXTRACTIVENESS SCORE (0.45):
 * Reasoning: Chosen because the "weirdness" pivot reallocates significant 
 * informational and financial resources toward anomaly search.
 * * 2. PERSPECTIVE SELECTION:
 * Chose to analyze from the Exobiologist (Rope), Legacy Hunter (Snare), and 
 * Rare Earth proponent (Mountain) to illustrate how the same data 
 * signifies tool, trap, and fate.
 * * 3. AMBIGUITIES:
 * The text is uncertain if we are weird at the "1 per cent" or "1 in a million" 
 * level; this is handled via an Omega.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    exoplanetary_habitability_arbitrage_extraction_intent,
    "Is the focus on 'weird' systems a functional necessity for finding life or a strategic choice to sustain high-tech funding?",
    resolution_mechanism("Audit of discovery rates for habitable worlds in 'weird' vs 'typical' star systems"),
    impact("If necessity: Mountain. If strategic choice: Snare."),
    confidence_without_resolution(medium)
).

omega_variable(
    weirdness_frequency_calibration,
    "Is the solar system's weirdness a 1-in-100 fluke or a 1-in-a-million miracle?",
    resolution_mechanism("Completion of large-scale, long-term surveys of G-type stars for Earth-mass planets"),
    impact("If 1%: Rope (manageable search). If 1-in-a-million: Mountain (likely we are alone)."),
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: The Copernican "Earth Twin" Search
 * Viability: The widely believed paradigm that Earth is a typical planet.
 * Suppression: Now being challenged by data showing our sun and planets are 
 * outliers.
 * * CONCLUSION:
 * The shift from "Typicality" to "Arbitrage" creates a Rope for scientists 
 * but a Snare for legacy theories that can no longer explain the absence 
 * of Earth twins.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * * 1. Load: ?- [constraints/exoplanetary_habitability_arbitrage].
 * 2. Multi-perspective: ?- multi_index_report(exoplanetary_habitability_arbitrage).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: exploration_vs_exploitation
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_exploration_vs_exploitation, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: exploration_vs_exploitation
 * human_readable: The Exploration vs. Exploitation Dilemma
 * domain: technological/economic/biological
 * * SUMMARY:
 * The exploration-exploitation trade-off is a fundamental dilemma in adaptive systems. Exploitation involves choosing the best-known option to maximize immediate reward. Exploration involves choosing unknown or sub-optimal options to gather information, potentially discovering a superior long-term outcome. This constraint models the social and economic pressures that structure this choice.
 * * KEY AGENTS:
 * - The Gig Worker: Subject (Powerless). Must exploit known, low-paying tasks to survive, cannot afford to explore better opportunities.
 * - The Corporation: Beneficiary (Institutional). Manages the dilemma as a resource allocation problem between R&D (exploration) and current product lines (exploitation).
 * - The Systems Analyst: Auditor (Analytical). Observes the systemic consequences of the trade-off.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(exploration_vs_exploitation, 0.55). % Mountain <= 0.15, Rope <= 0.15, Snare >= 0.46
domain_priors:suppression_score(exploration_vs_exploitation, 0.65).   % Structural property (raw, unscaled).
domain_priors:theater_ratio(exploration_vs_exploitation, 0.1).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(exploration_vs_exploitation, extractiveness, 0.55).
narrative_ontology:constraint_metric(exploration_vs_exploitation, suppression_requirement, 0.65).
narrative_ontology:constraint_metric(exploration_vs_exploitation, theater_ratio, 0.1).

% Constraint self-claim (what does the constraint claim to be?)
% The dilemma is often framed as a necessary, constructed trade-off in business or survival.
narrative_ontology:constraint_claim(exploration_vs_exploitation, constructed).

% Binary flags
% Required for Tangled Rope: enforcement is needed to maintain the balance in organized systems (e.g., budgets).
domain_priors:requires_active_enforcement(exploration_vs_exploitation).

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(exploration_vs_exploitation, capital_owners_who_profit_from_exploitation).
narrative_ontology:constraint_victim(exploration_vs_exploitation, agents_forced_into_precarious_exploitation).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For an agent near a survival threshold, the dilemma is a Snare. They cannot afford to explore
% (risk of zero reward), but exploiting their current, dwindling resource is a slow trap.
% χ = 0.55 * 1.5 (powerless) * 0.8 (local) = 0.66. This meets the Snare threshold.
constraint_indexing:constraint_classification(exploration_vs_exploitation, snare,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For an institution, this is a manageable coordination problem (a Rope). They allocate
% resources between R&D and sales, viewing the trade-off as essential for stability and growth.
% χ = 0.55 * -0.2 (institutional) * 1.0 (national) = -0.11. Felt extraction is negative (seen as investment).
constraint_indexing:constraint_classification(exploration_vs_exploitation, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(arbitrage),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% The analyst sees both the coordination function (balancing innovation and stability) and the
% asymmetric extraction (some are trapped in exploitation loops for others' benefit).
% χ = 0.55 * 1.15 (analytical) * 1.2 (global) = 0.759. High systemic extraction is visible.
constraint_indexing:constraint_classification(exploration_vs_exploitation, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(exploration_vs_exploitation_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(exploration_vs_exploitation, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(exploration_vs_exploitation, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless == snare,
    TypeInstitutional == rope.

test(threshold_validation) :-
    % Verify the base metrics support a high-extraction classification.
    narrative_ontology:constraint_metric(exploration_vs_exploitation, extractiveness, E),
    narrative_ontology:constraint_metric(exploration_vs_exploitation, suppression_requirement, S),
    E >= 0.46,
    S >= 0.40.

test(analytical_classification_is_tangled_rope) :-
    constraint_indexing:constraint_classification(exploration_vs_exploitation, tangled_rope, context(agent_power(analytical), _, _, _)).

:- end_tests(exploration_vs_exploitation_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The original file incorrectly classified the analytical perspective as a Mountain. While the trade-off is a fundamental concept, its implementation in human systems is not a natural law. It involves active enforcement (budgets, performance metrics) and creates clear winners and losers.
 *
 * The base metrics were increased (E=0.55, S=0.65) to accurately reflect the high cost imposed on those trapped in exploitation cycles. This change ensures the 'powerless' perspective correctly computes to a Snare (χ=0.66).
 *
 * The institutional perspective is classified as a Rope because for the institution, the dilemma is a pure coordination problem with negative felt extraction (investment). The analytical observer, however, sees the full system—both the coordination and the severe, asymmetric extraction—and thus classifies it as a Tangled Rope. This creates a robust and realistic perspectival gap.
 *
 * * MANDATROPHY ANALYSIS:
 * By classifying the system as a Tangled Rope, we avoid mischaracterizing it as a pure Mountain (a law of nature) or a pure Snare (just malice). The Tangled Rope classification correctly identifies that a legitimate coordination function (balancing risk and reward for a system) is coupled with a highly extractive mechanism that harms a specific class of agents. This prevents the system from accepting the "it's just a necessary trade-off" argument at face value.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_exploration_vs_exploitation,
    'Is the degree of forced exploitation a structural necessity of complex economies, or a contingent outcome of specific policies that could be altered?',
    'Comparative analysis of economic models with different social safety nets and labor laws, measuring agent mobility and long-term outcomes.',
    'If necessary (Mountain): Policy is limited to mitigating harm. If contingent (Tangled Rope/Snare): Policy can be designed to reduce suppression and increase agent exit options.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(exploration_vs_exploitation, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data for this high-extraction constraint. Models a scenario where
% short-term pressures (e.g., quarterly reporting) increase the systemic bias
% towards exploitation over time, raising base extractiveness.
%
% Theater ratio over time (remains low and functional):
narrative_ontology:measurement(eve_tr_t0, exploration_vs_exploitation, theater_ratio, 0, 0.1).
narrative_ontology:measurement(eve_tr_t5, exploration_vs_exploitation, theater_ratio, 5, 0.1).
narrative_ontology:measurement(eve_tr_t10, exploration_vs_exploitation, theater_ratio, 10, 0.1).

% Extraction over time (shows accumulation of exploitative pressure):
narrative_ontology:measurement(eve_ex_t0, exploration_vs_exploitation, base_extractiveness, 0, 0.48).
narrative_ontology:measurement(eve_ex_t5, exploration_vs_exploitation, base_extractiveness, 5, 0.52).
narrative_ontology:measurement(eve_ex_t10, exploration_vs_exploitation, base_extractiveness, 10, 0.55).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The dilemma is fundamentally a problem of allocating scarce resources (time, capital, attention).
narrative_ontology:coordination_type(exploration_vs_exploitation, resource_allocation).

% An over-emphasis on exploitation can lead to technological lock-in, where superior
% but unexplored alternatives are suppressed.
narrative_ontology:affects_constraint(exploration_vs_exploitation, technological_lock_in).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: extraordinary_narrative_shift
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: "The Extraordinary Intruding on the Ordinary" by cafebedouin.org
% ============================================================================

:- module(constraint_extraordinary_narrative_shift, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: extraordinary_narrative_shift
 * human_readable: The Story of the Extraordinary
 * domain: social/psychological/cultural
 * temporal_scope: Perennial / Historical
 * spatial_scope: Global / Cognitive
 * 
 * SUMMARY:
 * The distinction between "extraordinary" and "ordinary" is not a physical property but a function of frequency, 
 * quantity, and the narrative framing we apply to experience. The constraint identifies that 
 * repetitive, commonplace existence truly defines our experience, and "extraordinary" moments are simply 
 * ordinary ones with a different story attached.
 * 
 * KEY AGENTS:
 * - The Sherpa (Individual Powerless): Repetitive laborer whose work is framed as "extraordinary" by others.
 * - Media Organization / Tourism Industry (Institutional): Crafts "extraordinary" narratives for audiences.
 * - Bernard Moitessier (Individual Moderate): A sailor who abandoned an "extraordinary" race to live an "ordinary" journey.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(extraordinary_narrative_shift, 0, 10).
narrative_ontology:constraint_claim(extraordinary_narrative_shift, tangled_rope).

% Base extractiveness: 0.4.
% Narrative framing "extracts" the raw, lived presence of the moment to serve a "branding" 
% or "unique" story. It also extracts labor (Sherpa) for the sake of another's "extraordinary" story.
domain_priors:base_extractiveness(extraordinary_narrative_shift, 0.4).

% Suppression: 0.4.
% The "extraordinary" narrative suppresses the value of the "ordinary" repetition, 
% making the bulk of life feel like it doesn't "matter" unless it fits a specific narrative.
domain_priors:suppression_score(extraordinary_narrative_shift, 0.4).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(extraordinary_narrative_shift, extractiveness, 0.4).
narrative_ontology:constraint_metric(extraordinary_narrative_shift, suppression_requirement, 0.4).

% Enforcement: Emerges naturally from human storytelling and cognitive frequency bias.
domain_priors:emerges_naturally(extraordinary_narrative_shift).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(extraordinary_narrative_shift, the_storyteller).
constraint_victim(extraordinary_narrative_shift, lived_experience).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE SHERPA (REPETITIVE LABOR) - Snare
   --------------------------------------------------------------------------
   WHO: powerless (Subject to the frequency and volume of work)
   WHEN: immediate (Daily repetitive task)
   WHERE: trapped (Bound by the physical necessity of the mountain)
   
   WHY THIS CLASSIFICATION:
   For the Sherpa, the "extraordinary" summit of Everest is a 'Snare'. The narrative
   of the tourist's "one minute at the pinnacle" extracts the Sherpa's daily
   labor while rendering their experience invisible to the "Extraordinary" story.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    extraordinary_narrative_shift,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: MEDIA ORGANIZATION / TOURISM INDUSTRY - Rope
   --------------------------------------------------------------------------
   WHO: institutional (Crafts "extraordinary" narratives for audiences)
   WHEN: biographical (The lifecycle of a marketing campaign or news story)
   WHERE: arbitrage (Transforms ordinary events into marketable narratives)
   
   WHY THIS CLASSIFICATION:
   For a media organization or tourism industry, crafting "extraordinary"
   narratives is a 'Rope'—a powerful tool for attracting audiences and customers.
   They transform ordinary events into unique, desirable experiences, driving
   engagement and revenue.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    extraordinary_narrative_shift,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(arbitrage),
        spatial_scope(global)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: BERNARD MOITESSIER (THE SOLO SAILOR) - Rope
   --------------------------------------------------------------------------
   WHO: individual_moderate (Has agency to abandon the race)
   WHEN: biographical (Changing his personal life story mid-journey)
   WHERE: mobile (Abandons the competitive race for the experience)
   
   WHY THIS CLASSIFICATION:
   For Moitessier, the "Ordinary" repetition of sailing becomes a 'Rope'. He rejects
   the extractive race narrative to coordinate his existence with the "journey"
   rather than the "pinnacle," making his experience a functional tool for selfhood.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    extraordinary_narrative_shift,
    rope,
    context(
        agent_power(individual_moderate),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
).

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(extraordinary_narrative_shift_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(extraordinary_narrative_shift, Type1, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(extraordinary_narrative_shift, Type2, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(extraordinary_narrative_shift, Type3, context(agent_power(individual_moderate), _, _, _)),
    Type1 \= Type2,
    Type1 \= Type3.

:- end_tests(extraordinary_narrative_shift_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. INSTITUTIONAL PERSPECTIVE: Added 'Media Organization / Tourism Industry'
 *    as the institutional agent. For them, crafting "extraordinary" narratives
 *    is a powerful 'Rope' for profit.
 *
 * 2. CLASSIFICATION RATIONALE:
 *    - Sherpa (Snare): Labor extracted for another's "extraordinary" story.
 *    - Media/Tourism (Rope): A tool for attracting audiences and customers.
 *    - Moitessier (Rope): Rejects a competitive "Snare" for an ordinary "Rope".
 * 
 * 3. CORE INSIGHT: The concept of the "extraordinary" is a 'Tangled Rope'.
 *    It can be a 'Rope' for personal transformation (Moitessier) or commercial
 *    gain (media), but it can also become a 'Snare' for those whose ordinary
 *    labor is extracted to create another's "extraordinary" moment (Sherpa).
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * The core uncertainty is the threshold at which "extraordinary" becomes "ordinary".
 */

omega_variable(
    repetition_threshold,
    "What is the specific 'frequency, quantity and volume' threshold where an extraordinary experience permanently collapses into the ordinary?",
    resolution_mechanism("Neurological monitoring of dopamine response during repeated high-novelty stimuli; longitudinal studies of professional athletes and performers."),
    impact("If low threshold: 'Extraordinary' is a fragile 'Rope'. If high threshold: It is a durable 'Mountain' of experience."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */
/**
 * VIABLE ALTERNATIVES
 *
 * ALTERNATIVE 1: Identifying with the Ordinary
 *    Viability: Moitessier's choice proves this is a real alternative to the pursuit of "extraordinary" achievements.
 *    Suppression: Actively suppressed by cultural narratives that glorify "unique" accomplishments and "peak experiences".
 *
 * CONCLUSION:
 * The cultural pressure to achieve the "extraordinary" creates a 'Snare' for
 * many, extracting their well-being in the pursuit of an often-elusive narrative.
 * The alternative of identifying with the ordinary, as Moitessier did, offers a
 * powerful 'Rope' for navigating life with greater authenticity.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/extraordinary_narrative_shift].
 * 2. Multi-perspective: ?- multi_index_report(extraordinary_narrative_shift).
 * 3. Run tests: ?- run_tests(extraordinary_narrative_shift_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
