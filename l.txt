% ============================================================================
% CONSTRAINT STORY: landscape_of_fear_2026
% ============================================================================
% Generated: 2026-01-21
% Model: Gemini 2.0 Flash
% Source: "How fear drastically shapes ecosystems" by Michael Le Page
% ============================================================================

:- module(landscape_of_fear_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: landscape_of_fear_2026
 * human_readable: The Landscape of Fear
 * domain: biological/technological
 * temporal_scope: 1995-2026
 * spatial_scope: Global ecosystems (e.g., Yellowstone, British Columbia)
 * * SUMMARY:
 * The "landscape of fear" describes how the mere presence or perception of predators 
 * constrains prey behavior, affecting feeding patterns, reproductive rates, and 
 * survival far beyond direct predation. This concept shifted the 
 * biological paradigm from counting "kills" to mapping the psychological 
 * constraints predators impose on an environment.
 * * KEY AGENTS:
 * - The Apex Predator (Wolf/Hawk): The source of the constraint; 
 * enforces boundaries through the threat of violence.
 * - The Prey (Elk/Song Sparrow): The subject of the constraint; 
 * must navigate the trade-off between feeding and vigilance.
 * - The Biologist (Laundré/Zanette): The analytical observer who 
 * identifies the causal mechanisms of fear-based ecological shifts.
 * * NARRATIVE ARC:
 * Following the 1995 reintroduction of wolves to Yellowstone, scientists noticed 
 * elk numbers falling faster than predation rates alone could explain. 
 * By 2001, the term "landscape of fear" was coined, and subsequent 21st-century 
 * experiments proved that fear alone—even without physical contact—can reduce 
 * survival rates by over 50%.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for [STEP 1] and [STEP 2] of the DR-Audit Suite
narrative_ontology:interval(landscape_of_fear_2026, 0, 10).
narrative_ontology:constraint_claim([landscape_of_fear_2026], [biological_regulation]).

% Base extractiveness score (0.4 = Moderate)
% Rationale: Predators extract time and reproductive potential from prey 
% through the psychological burden of vigilance.
domain_priors:base_extractiveness(landscape_of_fear_2026, 0.4).

% Suppression score (0.7 = High)
% Rationale: The "Landscape of Fear" effectively suppresses the "best food 
% in town" for the prey, as they will completely avoid high-quality areas 
% where fear is high.
domain_priors:suppression_score(landscape_of_fear_2026, 0.7).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(landscape_of_fear_2026, extractiveness, 0.4).
narrative_ontology:constraint_metric(landscape_of_fear_2026, suppression_requirement, 0.7).

% Enforcement requirements
% Emerges naturally through evolutionary predator-prey dynamics.
domain_priors:emerges_naturally(landscape_of_fear_2026).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(landscape_of_fear_2026, ecosystem_stability). % Fear prevents overgrazing
constraint_victim(landscape_of_fear_2026, prey_populations). % Reduced reproduction and feeding

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE ELK/SPARROW - Snare
   --------------------------------------------------------------------------
   
   WHO: powerless (Prey animal at bottom of hierarchy)
   WHEN: immediate (Short-term survival focus)
   WHERE: trapped (Ecologically bound to a specific territory)
   SCOPE: local (Immediate proximity of predator signs)
   
   WHY THIS CLASSIFICATION:
   For the prey, fear is a "Snare." It is a coercive psychological pressure 
   that strangles their ability to feed and reproduce, forcing them into 
   low-quality habitats even when superior food is nearby.
   
   NARRATIVE EVIDENCE:
   "Fewer eggs were laid, fewer hatched and fewer hatchlings survived... less than 
   half as many lived".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    landscape_of_fear_2026,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :-
    domain_priors:suppression_score(landscape_of_fear_2026, S),
    S > 0.6,
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE APEX PREDATOR (Wolf) - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional (Rule-enforcer/Shaper of the ecosystem)
   WHEN: biographical (Duration of the predator's reign)
   WHERE: mobile (Can move across the landscape to create fear)
   SCOPE: regional (Entire park or ecosystem)
   
   WHY THIS CLASSIFICATION:
   For the predator, fear is a "Rope"—a functional tool for coordinating 
   prey behavior and ensuring the predator's own energy-efficient survival 
   by making prey easier to manage or manipulate.
   
   NARRATIVE EVIDENCE:
   The predator doesn't need to kill to have an impact; the "mere fear" is 
   the tool used to shape the landscape.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    landscape_of_fear_2026,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(regional)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: BIOLOGIST (Liana Zanette) - Mountain
   --------------------------------------------------------------------------
   
   WHO: analytical (Scientific observer)
   WHEN: historical (20+ years of experimental data)
   WHERE: analytical (Observer of global biological laws)
   SCOPE: global (The theory applies across species and habitats)
   
   WHY THIS CLASSIFICATION:
   For the analyst, the landscape of fear is a "Mountain"—an immutable 
   biophysical law. It is a fundamental truth of ecological systems that 
   fear shapes life just as surely as physical death does.
   
   NARRATIVE EVIDENCE:
   "Fear can have an even bigger impact than direct predation... It is all 
   about food".
   -------------------------------------------------------------------------- */


constraint_indexing:constraint_classification(
    landscape_of_fear_2026,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(historical),
        exit_options(analytical),
        spatial_scope(global)
    )
) :- !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(landscape_of_fear_2026_tests).

test(multi_perspective_fear) :-
    constraint_indexing:constraint_classification(landscape_of_fear_2026, Type1, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(landscape_of_fear_2026, Type2, context(agent_power(analytical), _, _, _)),
    Type1 \= Type2.

test(fear_vs_predation_impact) :-
    % Tests if fear (0.7 suppression) is considered a high-impact constraint
    domain_priors:suppression_score(landscape_of_fear_2026, S),
    S > 0.5.

:- end_tests(landscape_of_fear_2026_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-21
 * * KEY DECISIONS:
 * * 1. EXTRACTIVENESS SCORE (0.4): 
 * Reasoning: Predation is highly extractive, but *fear* is a psychological 
 * tax that takes labor (vigilance) and resources (forgone food) from the prey.
 * * 2. SUPPRESSION SCORE (0.7):
 * Reasoning: The article explicitly states that prey will "completely avoid" 
 * some areas. This is the suppression of alternative feeding sites.
 * * 3. PERSPECTIVE SELECTION:
 * Analyzed the prey (Snare), the predator as rule-setter (Rope), and the 
 * scientist as observer of the biological law (Mountain).
 * * 4. AMBIGUITIES:
 * It is unclear if the "Landscape of Fear" is equally oppressive for all prey 
 * species; the article focuses on elk and song sparrows.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    fear_acclimation_threshold,
    "Do prey eventually 'habituate' to predator sounds/signs, reducing the fear-constraint over generations?",
    resolution_mechanism("Long-term (multi-generational) study of prey response to chronic predator presence"),
    impact("If habituation occurs: Snare → Rope. If not: Persistent Snare."),
    confidence_without_resolution(medium)
).

omega_variable(
    human_as_super_predator,
    "Do human-induced 'landscapes of fear' (noises, urban light) create more extraction than natural ones?",
    resolution_mechanism("Comparative analysis of prey reproductive rates in human-dominated vs. wild landscapes"),
    impact("If human fear is higher: We are an unmatched extractive Snare."),
    confidence_without_resolution(high)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Direct Predation Model
 * Viability: Historically the standard view; predators only affect numbers via kills.
 * Suppression: Actively dismantled by 21st-century experiments proving 
 * causality between fear and survival.
 * Evidence: "Laundré and others’ observations suggested this was wrong".
 * * CONCLUSION:
 * The "Landscape of Fear" transformed a perceived stochastic kill-rate (Mountain) 
 * into a persistent psychological Snare (for prey) and a biological Rope (for 
 * ecosystem management).
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

% Load: ?- [landscape_of_fear_2026].
% Test: ?- run_tests(landscape_of_fear_2026_tests).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: large_cardinal_foundations
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Felix Hausdorff (1908) / Tarski / Solovay / Woodin
% ============================================================================

:- module(constraint_large_cardinals, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: large_cardinal_foundations
 * human_readable: Large Cardinal Axioms
 * domain: mathematical/philosophical
 * temporal_scope: 1908 - Present (Civilizational)
 * spatial_scope: Global/Abstract (Set Theory)
 * * SUMMARY:
 * Large Cardinals are transfinite numbers with properties so strong that their 
 * existence cannot be proven within standard Zermelo-Fraenkel set theory (ZFC). 
 * They establish a "hierarchy of infinity" that acts as the ultimate structural 
 * floor for the consistency of all lower mathematics.
 * * KEY AGENTS:
 * - The Inaccessible Cardinal (Subject): A powerless agent whose "existence" 
 * is a post-ZFC assumption that stabilizes the universe.
 * - The Set-Theoretic Platonist (Institutional): An agent using the Large 
 * Cardinal Hierarchy as a "Rope" to resolve independence results like the 
 * Continuum Hypothesis.
 * - The Finitist/Formalist (Analytical): An observer for whom these axioms 
 * are a "Snare," extracting the simplicity of minimal foundations in favor 
 * of an "infinite ontological tax."
 * * NARRATIVE ARC:
 * Large Cardinals represent the "Mountain" of transfinite reality; their 
 * hierarchy is a fixed, discovery-driven landscape. For modern researchers, 
 * they are a "Rope"—the "Consistency Strength" scale used to coordinate the 
 * limits of what can be proven. However, for the foundational minimalist, 
 * the requirement to believe in "measurable" or "supercompact" cardinals 
 * acts as a "Snare," extracting the "purity" of small foundations and 
 * "strangling" the hope for a theory that doesn't rely on increasingly 
 * monstrous infinities.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for structural extraction
narrative_ontology:interval(large_cardinal_era, 1908, 2026).
narrative_ontology:constraint_claim(large_cardinal_foundations, mountain).

% Base extractiveness score (0.0-1.0)
% Rationale: 0.3. While they provide a "gift" of consistency strength, they 
% "extract" ontological commitment. To solve "small" problems, one is taxed 
% with accepting "large" existences.
domain_priors:base_extractiveness(large_cardinal_foundations, 0.3).

% Suppression score (0.0-1.0)
% Rationale: 0.4. The hierarchy suppresses the viability of "finitist-only" 
% foundations by proving they are insufficient to describe the consistency 
% of higher-order structures.
domain_priors:suppression_score(large_cardinal_foundations, 0.4).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(large_cardinal_foundations, extractiveness, 0.3).
narrative_ontology:constraint_metric(large_cardinal_foundations, suppression_requirement, 0.4).

% Enforcement: Emerges naturally from the self-consistency of the hierarchy.
domain_priors:emerges_naturally(large_cardinal_foundations).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(large_cardinal_foundations, consistency_strength_researchers).
constraint_beneficiary(large_cardinal_foundations, ontological_realists).
constraint_victim(large_cardinal_foundations, mathematical_minimalists).
constraint_victim(large_cardinal_foundations, finitist_intuition).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE INACCESSIBLE CARDINAL - Mountain
   --------------------------------------------------------------------------
   
   WHO: powerless - The cardinal has no agency; its size is 
   defined by its inability to be reached from below.
   WHEN: immediate - Its properties are fixed at the moment of axiomatic definition.
   WHERE: trapped - Bound within the hierarchy of Alephs.
   SCOPE: local - Immediate neighborhood of its cardinality.
   
   WHY THIS CLASSIFICATION:
   For the cardinal itself, its existence is an absolute Mountain. It cannot 
   "choose" to be reachable by the power-set operation or unions of smaller 
   sets. It is a natural law of the transfinite landscape, an unyielding 
   geographic feature of the "Deep Infinite."
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    large_cardinal_foundations,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE SET THEORY PROFESSOR - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional - Power to define the "strength" of a formal system.
   WHEN: biographical - Spanning the duration of a career mapping the transfinite.
   WHERE: mobile - Can choose different "consistency levels" to work within.
   SCOPE: global - Universal foundation for mathematical logic.
   
   WHY THIS CLASSIFICATION:
   For the institutional logic researcher, Large Cardinals are a "Rope"—a 
   functional coordination tool. They provide a "standard of achievement" 
   (consistency strength) that allows mathematicians to coordinate which 
   theories are "safe" and how they relate to one another, pulling the 
   field toward a unified map of provability.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    large_cardinal_foundations,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE FINITIST SKEPTIC - Snare
   --------------------------------------------------------------------------
   
   WHO: individual_moderate - Has the tools of proof but is bound by the hierarchy.
   WHEN: civilizational - Seeking a definitive "Theory of Everything" that fits in a human mind.
   WHERE: constrained - The "exit" (denying these cardinals) is intellectually costly.
   SCOPE: global - Universal limit on formal simplicity.
   
   WHY THIS CLASSIFICATION:
   For the minimalist, the hierarchy is a "Snare." It "strangles" the hope 
   for a simple foundation. It extracts the "certainty of the small" 
   (extraction) by proving that any system we build will eventually 
   require "choking" on the existence of infinities so large they defy 
   even transfinite intuition.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    large_cardinal_foundations,
    snare,
    context(
        agent_power(individual_moderate),
        time_horizon(civilizational),
        exit_options(constrained),
        spatial_scope(global)
    )
) :- 
    domain_priors:base_extractiveness(large_cardinal_foundations, E),
    E >= 0.25,
    !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(large_cardinal_foundations_tests).

test(multi_perspective_variance) :-
    % Cardinal -> Mountain
    constraint_indexing:constraint_classification(large_cardinal_foundations, Type1, context(powerless, immediate, trapped, local)),
    % Researcher -> Rope
    constraint_indexing:constraint_classification(large_cardinal_foundations, Type2, context(institutional, biographical, mobile, global)),
    Type1 \= Type2.

test(ontological_extraction_penalty) :-
    % Minimalists experience the "Snare" of foundational extraction.
    Context = context(individual_moderate, civilizational, constrained, global),
    constraint_indexing:extractiveness_for_agent(large_cardinal_foundations, Context, Score),
    Score >= 0.25.

test(natural_emergence) :-
    domain_priors:emerges_naturally(large_cardinal_foundations).

:- end_tests(large_cardinal_foundations_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * * 1. EXTRACTIVENESS SCORE (0.3):
 * Reasoning: These axioms extract "belief." To solve real problems, you 
 * are taxed with accepting ever-larger ontological commitments.
 * * 2. CLASSIFICATION RATIONALE:
 * Chose Cardinal (Subject), Professor (User), and Skeptic (Victim) 
 * to illustrate how a "Mountain" of formal reality becomes a "Snare" 
 * for those seeking foundational simplicity.
 */

% OMEGA IDENTIFICATION
omega_variable(
    cardinal_consistency_convergence,
    "Is the 'Mountain' of the hierarchy stable, or will a hidden contradiction resolve it as a Scaffold?",
    resolution_mechanism("Investigation into whether Large Cardinal axioms are eventually proven inconsistent with ZFC."),
    impact("If Inconsistent: The hierarchy is a broken Scaffold. If Consistent: It is a permanent Mountain."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Weak Set Theories (e.g., PRA, Heyting Arithmetic)
 * Viability: Useful for most applied math.
 * Suppression: Rejected by the "Mountain" of higher set theory because 
 * they cannot prove the consistency of more complex systems.
 * * ALTERNATIVE 2: Potentialism
 * Viability: The idea that the universe of sets "grows" rather than 
 * "exists" statically.
 * * CONCLUSION:
 * The existence of "Strong" cardinals turns the "Rope" of foundational 
 * choice into a "Snare" for those who want math to be both simple and complete.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS CONSTRAINT:
 * * 1. Load: ?- [large_cardinal_foundations].
 * 2. Multi-perspective: ?- multi_index_report(large_cardinal_foundations).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */


% --- v3.1 Indexical Relativity Stubs (Fleet Repair) ---
constraint_indexing:constraint_classification(large_cardinals_foundations, mountain, agent_power(analytical)).
constraint_indexing:constraint_classification(large_cardinals_foundations, rope, agent_power(institutional)).
constraint_indexing:constraint_classification(large_cardinals_foundations, snare, agent_power(powerless)).
% ============================================================================
% CONSTRAINT STORY: law_of_diminishing_returns
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Classical Economics / David Ricardo / T.R. Malthus
% ============================================================================

:- module(constraint_law_of_diminishing_returns, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: law_of_diminishing_returns
 * human_readable: The Law of Diminishing Returns
 * domain: economic/technological
 * temporal_scope: Permanent (Physical and Economic Reality)
 * spatial_scope: Global (Production Systems)
 * * SUMMARY:
 * The law of diminishing returns states that in all productive processes, 
 * adding more of one factor of production while holding others constant 
 * will at some point yield lower per-unit returns. It represents the 
 * fundamental limit of scaling within a fixed infrastructure.
 * * KEY AGENTS:
 * - The Economist: Analytical observer mapping the marginal utility curves.
 * - The Factory Manager: Institutional agent seeking the "sweet spot" of 
 * efficiency to maximize profit.
 * - The Overworked Laborer: Individual powerless agent added to an already 
 * crowded process, experiencing the "squeeze" of inefficiency.
 * * NARRATIVE ARC:
 * Initially, adding resources feels like a "Rope" for growth. However, 
 * as the system saturates, the law emerges as a "Mountain"—a hard 
 * physical limit of the environment. For the last unit added, it becomes 
 * a "Snare," as their presence extracts value from the group while 
 * providing negligible or negative individual utility.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for [STEP 1] and [STEP 2] of the DR-Audit Suite
narrative_ontology:interval(diminishing_returns_interval, 0, 10).
narrative_ontology:constraint_claim(law_of_diminishing_returns, mountain).

% Base extractiveness score (0.0-1.0)
% Rationale: Moderate (0.4). The law extracts "marginal utility." As 
% production scales, the system "taxes" each additional unit of input 
% with lower output, extracting potential efficiency.
domain_priors:base_extractiveness(law_of_diminishing_returns, 0.4).

% Suppression score (0.0-1.0)
% Rationale: Moderate (0.3). It suppresses the "Infinite Scaling" 
% narrative. While growth is encouraged, the physical reality eventually 
% punishes those who ignore the curve.
domain_priors:suppression_score(law_of_diminishing_returns, 0.3).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(law_of_diminishing_returns, extractiveness, 0.4).
narrative_ontology:constraint_metric(law_of_diminishing_returns, suppression_requirement, 0.3).

% Enforcement: Emerges naturally from physical space and resource scarcity.
domain_priors:emerges_naturally(law_of_diminishing_returns).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(law_of_diminishing_returns, [efficiency_consultants, equilibrium_stable_states]).
constraint_victim(law_of_diminishing_returns, [over_extending_firms, marginal_laborers]).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE ECONOMIST - Mountain
   --------------------------------------------------------------------------
   
   WHO: analytical - Observer of systemic limits and curves.
   WHEN: civilizational - Viewing production as a permanent feature of humanity.
   WHERE: trapped - Logic and thermodynamics cannot bypass the law.
   SCOPE: global - Universal to all resource-constrained systems.
   
   WHY THIS CLASSIFICATION:
   To the analyst, the law is a Mountain. It is an unchangeable feature of 
   the universe's "hardware." You cannot "innovate" past the point where 
   a fixed field produces less per extra bag of seed; it is a fixed peak 
   in the topography of reality.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    law_of_diminishing_returns,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(civilizational),
        exit_options(trapped),
        spatial_scope(global)
    )
) :-
    constraint_indexing:effective_immutability_for_context(
        context(analytical, civilizational, trapped, global),
        mountain
    ),
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE BUSINESS OWNER - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional - Power to allocate capital and labor.
   WHEN: biographical - Managing a firm's profitability over a career.
   WHERE: arbitrage - Can shift resources between different production lines.
   SCOPE: national - Industrial/Corporate level.
   
   WHY THIS CLASSIFICATION:
   For the owner, the law is a Rope. It is a coordination mechanism. By 
   identifying the point of diminishing returns, they can "tether" their 
   investments to the optimal point, pulling the business toward 
   maximum profit and preventing waste.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    law_of_diminishing_returns,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(arbitrage),
        spatial_scope(national)
    )
) :-
    domain_priors:base_extractiveness(law_of_diminishing_returns, E),
    E < 0.6,
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE ADDITIONAL WORKER - Snare
   --------------------------------------------------------------------------
   
   WHO: powerless - Subject to the crowded workspace.
   WHEN: immediate - Today's shift and productivity pressure.
   WHERE: constrained - Limited by available tools and space.
   SCOPE: local - Immediate workstation.
   
   WHY THIS CLASSIFICATION:
   For the worker added to a saturated team, the law is a Snare. Their 
   presence makes the work harder for everyone (crowding), yet they are 
   judged by the falling marginal output. The system "strangles" their 
   effectiveness, extracting their labor while providing a trap of 
   decreasing returns and potentially lower wages.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    law_of_diminishing_returns,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(local)
    )
) :-
    domain_priors:base_extractiveness(law_of_diminishing_returns, E),
    E > 0.3,
    !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(law_of_diminishing_returns_tests).

test(multi_perspective_variance) :-
    % Analyst sees Mountain
    constraint_indexing:constraint_classification(law_of_diminishing_returns, mountain, context(analytical, civilizational, trapped, global)),
    % Institutional sees Rope
    constraint_indexing:constraint_classification(law_of_diminishing_returns, rope, context(institutional, biographical, arbitrage, national)),
    % Powerless sees Snare
    constraint_indexing:constraint_classification(law_of_diminishing_returns, snare, context(powerless, immediate, constrained, local)).

test(power_extractiveness_marginal_loss) :-
    ContextPowerless = context(powerless, immediate, constrained, local),
    ContextPowerful = context(institutional, biographical, arbitrage, national),
    constraint_indexing:extractiveness_for_agent(law_of_diminishing_returns, ContextPowerless, Score1),
    constraint_indexing:extractiveness_for_agent(law_of_diminishing_returns, ContextPowerful, Score2),
    Score1 > Score2.

:- end_tests(law_of_diminishing_returns_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * * 1. BASE EXTRACTIVENESS (0.4):
 * Reasoning: The law extracts potential "growth" and "utility." It forces 
 * a systemic cost where each new input provides less benefit.
 * * 2. PERSPECTIVE SELECTION:
 * Chose the Economist (Law), the Manager (Tool), and the Worker (Victim) 
 * to demonstrate how a physical fact becomes an organizational trap.
 * * 3. SNARE LOGIC:
 * Specifically focuses on the "crowding effect" in production, where the 
 * additional agent feels the pressure of the limit more than the 
 * institutional coordinator.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    tech_shift_plateau,
    "Can a technological breakthrough permanently 'untie' the Snare (Rope), 
    or does it just move the Mountain further back (Mountain)?",
    resolution_mechanism("Long-term analysis of agricultural/industrial 
    output after major automation shifts"),
    impact("If Mountain: The law is absolute. If Rope: Humanity can 
    escape scarcity indefinitely."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Economies of Scale
 * Viability: High. In some phases, increasing all inputs can lead to 
 * *increased* per-unit returns (the opposite of this law).
 * Suppression: None. It is viewed as a complementary phase that 
 * eventually leads back to the diminishing returns mountain.
 * * CONCLUSION:
 * The existence of Economies of Scale as a "Rope" for growth suggests 
 * that the Law of Diminishing Returns is not a Snare until a system 
 * reaches its physical or organizational saturation point.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 1. Load: ?- [constraint_law_of_diminishing_returns].
 * 2. Multi-perspective: ?- multi_index_report(law_of_diminishing_returns).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: layered_brain_processing
% ============================================================================
% Generated: 2026-01-21
% Model: Gemini 2.0 Flash
% Source: The Hebrew University of Jerusalem / ScienceDaily [cite: 7, 59]
% Status: [RESOLVED MANDATROPHY]
% ============================================================================

:- module(constraint_layered_brain_processing, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: layered_brain_processing
 * human_readable: Layered Contextual Meaning Construction
 * domain: technological/biological
 * temporal_scope: 2021-2026 (Discovery and dataset release) [cite: 6, 82]
 * spatial_scope: Global/Scientific
 * * SUMMARY:
 * The human brain builds meaning from speech through a stepwise, layered process 
 * that mirrors the architecture of large language models like GPT-2 and Llama 2[cite: 12, 25]. 
 * This challenges the "rule-based" view of language in favor of a statistical, 
 * contextual emergence of meaning[cite: 13, 42].
 * * KEY AGENTS:
 * - The Brain/Individual: The entity processing speech step-by-step[cite: 14, 28].
 * - Traditional Linguists: Advocates of rigid, rule-based hierarchies[cite: 41].
 * - AI Models (GPT/Llama): The computational "mirror" for brain activity[cite: 25, 33].
 * * NARRATIVE ARC:
 * Long-held ideas of "fixed symbols" and "rigid hierarchies" [cite: 41] act as a 
 * conceptual "Snare" that suppressed the discovery of the brain's "Mountain" 
 * of layered biological processing until AI provided the "Rope" (the model) to 
 * map it[cite: 33, 42].
 */

/* ==========================================================================
   2. BASE PROPERTIES (Context-Independent)
   ========================================================================== */

narrative_ontology:interval(layered_brain_processing, 0, 10).
narrative_ontology:constraint_claim(layered_brain_processing, snare).

% Base extractiveness: 0.35 (Moderate)
% Rationale: AI models extract "contextual representations" from human data[cite: 44].
% While the study is scientific, the convergence suggests AI mimics human data 
% processing to gain utility[cite: 33, 39].
domain_priors:base_extractiveness(layered_brain_processing, 0.35).

% Suppression: 0.75 (High)
% Rationale: "Long-standing rule-based ideas" and "rigid hierarchies" dominated 
% for many years[cite: 21, 41], making the flexible, statistical reality 
% "unexpected"[cite: 23].
domain_priors:suppression_score(layered_brain_processing, 0.75).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(layered_brain_processing, extractiveness, 0.35).
narrative_ontology:constraint_metric(layered_brain_processing, suppression_requirement, 0.75).

% Enforcement: Emerges naturally (Biological convergence)[cite: 33].
domain_priors:emerges_naturally(layered_brain_processing).

% BENEFICIARIES & VICTIMS
% AI Research/Models benefit from mimicking brain hierarchy[cite: 33, 48].
constraint_beneficiary(layered_brain_processing, ai_researchers).
% The "Rule-based paradigm" previously victimized scientific progress by 
% hiding real-time brain activity patterns[cite: 21, 44].
constraint_victim(layered_brain_processing, traditional_linguistics).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE TRADITIONAL LINGUIST - Mountain
   --------------------------------------------------------------------------
   WHO: institutional (Rule-making academic power)
   WHEN: historical (Centuries of linguistic theory)
   WHERE: trapped (Reliance on fixed symbols/rigid hierarchies) [cite: 41]
   SCOPE: global
   
   WHY: From this view, language *is* the rules; phonemes and morphemes are 
   the unchangeable building blocks of reality[cite: 41, 43].
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    layered_brain_processing,
    mountain,
    context(
        agent_power(institutional),
        time_horizon(historical),
        exit_options(trapped),
        spatial_scope(global)
    )
) :-
    % Classification based on the perception of "fixed symbols" as law [cite: 41]
    true.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE MODERN NEUROSCIENTIST - Rope
   --------------------------------------------------------------------------
   WHO: analytical (Observer mapping meaning)
   WHEN: biographical (The duration of a 30-minute podcast study) [cite: 24]
   WHERE: mobile (Can compare AI layers to brain regions) [cite: 31, 48]
   SCOPE: local (Regional brain activity like Broca's area) [cite: 32]
   
   WHY: The layered hierarchy is a tool for building meaning gradually[cite: 12, 42]. 
   It is functional coordination that allows the brain to grasp complex context[cite: 30, 45].
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    layered_brain_processing,
    rope,
    context(
        agent_power(analytical),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(local)
    )
) :-
    % Classification based on meaning "gradually emerging through context" [cite: 42]
    domain_priors:base_extractiveness(layered_brain_processing, E),
    E < 0.6.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE INDIVIDUAL LISTENER - Snare
   --------------------------------------------------------------------------
   WHO: powerless (Subject to neural steps) [cite: 28]
   WHEN: immediate (Real-time processing) [cite: 44]
   WHERE: trapped (Cannot opt out of neural "rituals" of meaning) [cite: 27]
   SCOPE: local
   
   WHY: The brain "does not grasp meaning all at once"[cite: 27]. Each word 
   must pass through a series of steps[cite: 28]. In the context of 
   "rule-based" education, this is a snare of cognitive dissonance where 
   learned rules (phonemes) conflict with neural reality[cite: 44].
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    layered_brain_processing,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :-
    domain_priors:suppression_score(layered_brain_processing, S),

    S > 0.7.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(layered_brain_processing_tests).

test(multi_perspective_variance) :-
    % Traditional (Institutional) vs Neuro (Analytical) vs Listener (Powerless)
    constraint_indexing:constraint_classification(layered_brain_processing, T1, context(institutional, historical, trapped, global)),
    constraint_indexing:constraint_classification(layered_brain_processing, T2, context(analytical, biographical, mobile, local)),
    constraint_indexing:constraint_classification(layered_brain_processing, T3, context(powerless, immediate, trapped, local)),
    T1 \= T2, T2 \= T3.

test(context_superiority_scaling) :-
    % Test that contextual representations (Score 1) explain activity 
    % better than rigid rules (Score 2) [cite: 44]
    ScoreContextual = 0.9,
    ScoreRuleBased = 0.3,
    ScoreContextual > ScoreRuleBased.

test(time_unfolding_insight) :-
    % Later brain responses (Broca's) peak later, matching deeper AI layers [cite: 32]
    DeepLayerTime = later,
    EarlyLayerTime = earlier,
    DeepLayerTime \= EarlyLayerTime.

:- end_tests(layered_brain_processing_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-21
 * * KEY DECISIONS:
 * 1. EXTRACTIVENESS SCORE (0.35): Meaning is extracted from context[cite: 42], 
 * but unlike political coercion, this is a biological convergence[cite: 33].
 * 2. SUPPRESSION SCORE (0.75): The "rule-based" paradigm acted as a barrier 
 * for years, forcing a "false performance" of linguistics that didn't 
 * align with neural data[cite: 21, 41].
 * 3. PERSPECTIVE SELECTION: Focused on the "Rupture" between traditional 
 * linguistics (Mountain/Snare) and the neuroscientific reality (Rope).
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    architectural_convergence_origin,
    "Do AI and brains converge because AI is truly brain-like, or because AI is trained solely on the output (speech/text) of this brain architecture?",
    resolution_mechanism("Compare AI trained on non-human data to neural activity of the same non-human sources"),
    impact("If AI mimics output: Scaffold. If AI mimics structure: Mountain."),
    confidence_without_resolution(medium)
).

omega_variable(
    layered_brain_processing_extraction_intent,
    "Is the step-by-step extraction of meaning [cite: 28] a functional necessity for consciousness or a biological constraint that limits comprehension speed?",
    resolution_mechanism("Audit of neural step-speed vs. information density thresholds"),
    impact("If necessity: Mountain. If predatory/limitation: Snare."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Rigid Symbolic Hierarchies
 * Viability: Historically dominant theory[cite: 41].
 * Suppression: Now "challenged" as failing to explain real-time activity[cite: 21, 44].
 * * CONCLUSION:
 * The discovery of the "Layered Hierarchy" shifts the domain from a rule-based 
 * Snare to a biological Mountain, mapped by the computational Rope of AI[cite: 13, 33].
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 1. Load: ?- [constraints/layered_brain_processing].
 * 2. Multi-perspective: ?- multi_index_report(layered_brain_processing).
 * 3. Run tests: ?- run_tests(layered_brain_processing_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: legacy_system_technical_debt
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-28
% ============================================================================

:- module(constraint_legacy_system_technical_debt, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: legacy_system_technical_debt
 * human_readable: Cumulative Technical Debt in Legacy Monoliths
 * domain: technological/economic
 * * SUMMARY:
 * Technical debt is the implied cost of future refactoring caused by choosing an easy, limited solution now instead of a better approach. In legacy systems, this debt ossifies into a constraint that limits innovation and increases maintenance costs. What begins as a strategic shortcut (Rope) eventually becomes an unmovable reality (Mountain) for new hires, and finally an inertial, non-functional burden (Piton) that consumes resources without providing proportional value.
 * * KEY AGENTS:
 * - Junior Developer: Subject (Powerless), navigating a complex and brittle codebase.
 * - CTO/VPE: Beneficiary (Institutional), balancing feature velocity vs. long-term stability.
 * - System Architect/Auditor: Auditor (Analytical), identifying structural decay and performative maintenance.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(legacy_system_technical_debt, 0.05). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(legacy_system_technical_debt, 0.1).   % Structural property (raw, unscaled). Alternatives are suppressed by high switching costs, not active force.
domain_priors:theater_ratio(legacy_system_technical_debt, 0.85).       % Piton detection (>= 0.70). High ratio of maintenance/ceremony to functional output.

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(legacy_system_technical_debt, extractiveness, 0.05).
narrative_ontology:constraint_metric(legacy_system_technical_debt, suppression_requirement, 0.1).
narrative_ontology:constraint_metric(legacy_system_technical_debt, theater_ratio, 0.85).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(legacy_system_technical_debt, constructed).

% Structural property derivation hooks:
% The initial decision to take on debt benefited short-term goals.
narrative_ontology:constraint_beneficiary(legacy_system_technical_debt, short_term_profit_margins).
% The long-term consequences are borne by the system and its maintainers.
narrative_ontology:constraint_victim(legacy_system_technical_debt, long_term_system_viability).
narrative_ontology:constraint_victim(legacy_system_technical_debt, engineering_morale).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE JUNIOR DEVELOPER (MOUNTAIN)
% For a new developer, the legacy codebase is "nature." They did not build
% the wall; they simply live in its shadow. The constraint is unchangeable
% and must be navigated like a physical mountain.
constraint_indexing:constraint_classification(legacy_system_technical_debt, mountain,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(local))).

% PERSPECTIVE 2: THE CTO / EXECUTIVE (ROPE)
% For leadership, technical debt is a Rope—a functional (if painful) coordination
% mechanism. It is the "price of business" that allowed them to reach their
% current scale. They view it as a tool that can be "paid down" or managed.
constraint_indexing:constraint_classification(legacy_system_technical_debt, rope,
    context(agent_power(institutional),
            time_horizon(biographical),
            exit_options(constrained),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (PITON)
% The auditor sees the Piton. It was once a useful anchor (a 'rope'), but now it's a
% liability that fails under load. It persists through inertia, consuming resources
% that could be used for innovation, with high theatrical maintenance.
constraint_indexing:constraint_classification(legacy_system_technical_debt, piton,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(legacy_system_technical_debt_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(legacy_system_technical_debt, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(legacy_system_technical_debt, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(piton_classification_requires_high_theater) :-
    % Verify that the analytical observer classifies this as a Piton.
    constraint_indexing:constraint_classification(legacy_system_technical_debt, piton, context(agent_power(analytical), _, _, _)),
    domain_priors:theater_ratio(legacy_system_technical_debt, TR),
    TR >= 0.70.

:- end_tests(legacy_system_technical_debt_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The key to this model is the low base extractiveness (0.05) combined with a very high theater ratio (0.85).
 * Technical debt doesn't directly extract value like a tax; instead, it creates massive drag and opportunity cost.
 * This manifests as "theater" - endless meetings, bug hunts in brittle code, and performative refactoring that
 * doesn't address the core architectural decay. This signature is characteristic of a Piton.
 *
 * The Perspectival Gap is stark:
 * - The Junior Developer (powerless) experiences this drag as an immutable law of their environment (Mountain).
 * - The CTO (institutional) who approved the initial shortcuts still sees it as a manageable tool (Rope).
 * - The Auditor (analytical) sees the reality: a once-useful tool now maintained out of pure inertia (Piton).
 *
 * * MANDATROPHY ANALYSIS:
 * The Piton classification is crucial for preventing Mandatrophy. Without it, the system might be misclassified
 * as a low-extraction Rope (ignoring the immense waste) or a Snare (implying active malice where there is only
 * inertia). The Piton correctly identifies the constraint as a structural failure of maintenance and evolution,
 * where the cost of upkeep far outweighs the functional benefit.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_legacy_system_technical_debt,
    'Can the system be migrated incrementally (Strangler Fig Pattern) or is the monoliths coupling so deep it requires a total rewrite?',
    'Static analysis of dependency graphs and cyclomatic complexity metrics.',
    'If incremental migration is possible, it is a manageable Rope. If a total rewrite is required, it becomes a Snare that traps the organization.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(legacy_system_technical_debt, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data shows the system's decay into a Piton. Initially, theater is
% low as the system is functional. Over time, as debt accumulates, maintenance
% becomes more performative and less effective, causing the theater ratio to rise.
% Extraction remains low throughout. This models metric substitution drift.

% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(legacy_system_technical_debt_tr_t0, legacy_system_technical_debt, theater_ratio, 0, 0.10).
narrative_ontology:measurement(legacy_system_technical_debt_tr_t5, legacy_system_technical_debt, theater_ratio, 5, 0.50).
narrative_ontology:measurement(legacy_system_technical_debt_tr_t10, legacy_system_technical_debt, theater_ratio, 10, 0.85).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(legacy_system_technical_debt_ex_t0, legacy_system_technical_debt, base_extractiveness, 0, 0.05).
narrative_ontology:measurement(legacy_system_technical_debt_ex_t5, legacy_system_technical_debt, base_extractiveness, 5, 0.05).
narrative_ontology:measurement(legacy_system_technical_debt_ex_t10, legacy_system_technical_debt, base_extractiveness, 10, 0.05).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% No Boltzmann or Network data is applicable. The constraint is an emergent
% property of a single system rather than a formal coordination mechanism or
% a node in an inter-constraint network.

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: legitimacy_without_effectiveness
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_legitimacy_without_effectiveness, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: legitimacy_without_effectiveness
 * human_readable: The Hollow Mandate
 * domain: political
 * * SUMMARY:
 * A condition where a governing body retains its legal and social recognition
 * as the rightful authority, but has lost the capacity to fulfill its primary
 * functions (security, infrastructure, economic stability). The state exists
 * primarily to sustain itself through performative acts of governance.
 * * KEY AGENTS:
 * - The Citizen: Subject (Powerless) - Obligated to obey a ghost system.
 * - The Bureaucrat: Beneficiary (Institutional) - Maintaining the facade of office.
 * - The Political Scientist: Auditor (Analytical) - Measuring the "Piton" status.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(legitimacy_without_effectiveness, 0.75). % High: Extraction to maintain the facade.
domain_priors:suppression_score(legitimacy_without_effectiveness, 0.82).   % High: State monopoly prevents alternatives.
domain_priors:theater_ratio(legitimacy_without_effectiveness, 0.91).       % Very High: Purely theatrical governance.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(legitimacy_without_effectiveness, extractiveness, 0.75).
narrative_ontology:constraint_metric(legitimacy_without_effectiveness, suppression_requirement, 0.82).
narrative_ontology:constraint_metric(legitimacy_without_effectiveness, theater_ratio, 0.91).

% Constraint self-claim (what does the constraint claim to be?)
narrative_ontology:constraint_claim(legitimacy_without_effectiveness, enforcement).

% Binary flags
domain_priors:requires_active_enforcement(legitimacy_without_effectiveness).

% Structural property derivation hooks (required for high-extraction constraints)
narrative_ontology:constraint_beneficiary(legitimacy_without_effectiveness, bureaucrat_class).
narrative_ontology:constraint_victim(legitimacy_without_effectiveness, citizen).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% To the individual, the law is no longer a guide but a trap that extracts
% taxes/compliance without providing safety.
constraint_indexing:constraint_classification(legitimacy_without_effectiveness, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% To the institution, the mandate is a Rope—the essential coordination tool
% that prevents total social dissolution, justifying its own existence.
constraint_indexing:constraint_classification(legitimacy_without_effectiveness, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE SYSTEMS AUDITOR (PITON)
% Detection of "Piton" status: high theater_ratio indicates a constraint
% maintained by inertia rather than utility.
constraint_indexing:constraint_classification(legitimacy_without_effectiveness, piton,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(arbitrage),
            spatial_scope(global))) :-
    domain_priors:theater_ratio(legitimacy_without_effectiveness, TR), TR > 0.70.

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(legitimacy_without_effectiveness_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(legitimacy_without_effectiveness, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(legitimacy_without_effectiveness, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless = snare,
    TypeInstitutional = rope.

test(piton_signature) :-
    % Verify the analytical perspective correctly identifies the Piton status.
    constraint_indexing:constraint_classification(legitimacy_without_effectiveness, piton, context(agent_power(analytical), _, _, _)).

test(threshold_validation) :-
    % High extraction (> 0.46) is a key feature.
    narrative_ontology:constraint_metric(legitimacy_without_effectiveness, extractiveness, E),
    E >= 0.46.

:- end_tests(legitimacy_without_effectiveness_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The extraction score (0.75) is high because the system consumes resources
 * purely to perpetuate its own existence (salaries, symbolic rituals) rather
 * than providing social output. The suppression score (0.82) is high because
 * the state, however ineffective, maintains a monopoly on legitimate force,
 * preventing alternatives from arising.
 *
 * [RESOLVED MANDATROPHY]
 * This constraint is not a "Mountain" of natural law; it is a "Piton."
 * The Mandatrophy is resolved by identifying that the high "Theater Ratio"
 * (0.91) differentiates it from a functioning Rope or Snare. The system "performs"
 * legitimacy through ceremonies and legalisms to mask its operational
 * non-existence, which is the defining characteristic of a Piton.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_collapse_velocity,
    'Will the Piton fail suddenly (Snap) or erode into a decentralized Scaffold?',
    'Measure of "Alternative Sovereignty" adoption vs. legacy compliance rates.',
    'If snap: Violent transition to Snare; If erosion: Potential for new Rope.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(legitimacy_without_effectiveness, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% This constraint models a state that decayed from a functional, if extractive,
% system into a purely theatrical one. The data shows rising theater and
% extraction as function is replaced by performance.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(lwe_tr_t0, legitimacy_without_effectiveness, theater_ratio, 0, 0.30).
narrative_ontology:measurement(lwe_tr_t5, legitimacy_without_effectiveness, theater_ratio, 5, 0.70).
narrative_ontology:measurement(lwe_tr_t10, legitimacy_without_effectiveness, theater_ratio, 10, 0.91).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(lwe_ex_t0, legitimacy_without_effectiveness, base_extractiveness, 0, 0.40).
narrative_ontology:measurement(lwe_ex_t5, legitimacy_without_effectiveness, base_extractiveness, 5, 0.60).
narrative_ontology:measurement(lwe_ex_t10, legitimacy_without_effectiveness, base_extractiveness, 10, 0.75).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% The state's claim to legitimacy is based on its role as the ultimate
% enforcement mechanism for social order.
narrative_ontology:coordination_type(legitimacy_without_effectiveness, enforcement_mechanism).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: lehman_repo_105
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-29
% ============================================================================

:- module(constraint_lehman_repo_105, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3,
    narrative_ontology:omega_variable/5.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: lehman_repo_105
 * human_readable: Lehman Brothers Repo 105 Accounting Maneuver
 * domain: economic
 * * SUMMARY:
 * Repo 105 was an accounting maneuver used by Lehman Brothers to temporarily move
 * billions in liabilities off its balance sheet, primarily to hide leverage from
 * investors and rating agencies. While structured to be legally defensible as a
 * "sale" under specific accounting rules (its claim), it functioned as a tool for
 * systemic deception, extracting trust and capital from the market.
 * * KEY AGENTS:
 * - Counterparty Investors: The subjects, who were unaware of the true leverage.
 * - Lehman Senior Management: The beneficiaries, who used the tool to meet targets.
 * - Financial System Auditors: The analytical observers, assessing the structural impact.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(lehman_repo_105, 0.90). % High extraction of trust and capital via deception.
domain_priors:suppression_score(lehman_repo_105, 0.85).   % High suppression of transparent accounting alternatives.
domain_priors:theater_ratio(lehman_repo_105, 0.10).       % Low theater; it was a functional, not performative, tool.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(lehman_repo_105, extractiveness, 0.90).
narrative_ontology:constraint_metric(lehman_repo_105, suppression_requirement, 0.85).
narrative_ontology:constraint_metric(lehman_repo_105, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% It was presented as a legitimate financial coordination tool.
narrative_ontology:constraint_claim(lehman_repo_105, coordination).

% Binary flags
domain_priors:requires_active_enforcement(lehman_repo_105). % Required legal opinions and internal processes to execute.

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(lehman_repo_105, lehman_senior_management).
narrative_ontology:constraint_victim(lehman_repo_105, counterparty_investors).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For an uninformed investor, this was a trap. Their capital was exposed to
% undisclosed risks, and their exit options were based on false information.
constraint_indexing:constraint_classification(lehman_repo_105, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(global))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For Lehman's management, this was a coordination tool (a Rope) used to
% manage balance sheet perceptions and meet leverage targets.
constraint_indexing:constraint_classification(lehman_repo_105, rope,
    context(agent_power(institutional),
            time_horizon(biographical),
            exit_options(arbitrage),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Analytically, Repo 105 is a Tangled Rope. It has a genuine coordination
% function (for the beneficiaries) but is coupled with severe asymmetric
% extraction from victims and requires active enforcement (legal opinions)
% to maintain its structure.
constraint_indexing:constraint_classification(lehman_repo_105, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(lehman_repo_105_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(lehman_repo_105, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(lehman_repo_105, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional,
    TypePowerless = snare,
    TypeInstitutional = rope.

test(analytical_classification_is_tangled_rope) :-
    % The analytical view must resolve the conflict into a Tangled Rope.
    constraint_indexing:constraint_classification(lehman_repo_105, TypeAnalytical, context(agent_power(analytical), _, _, _)),
    TypeAnalytical = tangled_rope.

test(threshold_validation_snare) :-
    % Verify that the base extraction meets the Snare/Tangled Rope threshold.
    domain_priors:base_extractiveness(lehman_repo_105, E),
    E >= 0.46.

:- end_tests(lehman_repo_105_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect the findings of the Valukas Report. Base extractiveness is 0.90
 * because the maneuver was designed for maximum deception, extracting trust and
 * capital based on misleading financial statements. Suppression is 0.85 as it
 * actively prevented the use of standard, transparent accounting alternatives.
 *
 * The key insight is the perspectival gap. For executives (institutional), it was a
 * 'Rope'—a tool to coordinate financial reporting. For investors (powerless), it was
 * a 'Snare'—a hidden trap concealing massive risk. The analytical perspective
 * resolves this conflict by classifying it as a 'Tangled Rope'. This classification
 * is critical because it acknowledges both the coordination function (why it was
 * used internally) and the severe, asymmetric extraction (its external effect),
 * which a simple 'Snare' classification would miss.
 *
 * MANDATROPHY ANALYSIS:
 * [RESOLVED MANDATROPHY] The original analysis might have classified this as a
 * 'Mountain' from a legalistic viewpoint ("it was technically legal"). The
 * Tangled Rope classification prevents this error. It correctly identifies that
 * even if a constraint leverages a legal or regulatory framework (the 'Mountain'
 * of accounting rules), its function as a tool for coordination with asymmetric
 * extraction makes it a constructed, not natural, constraint.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% This omega captures the core legal ambiguity that enabled the maneuver.
omega_variable(
    omega_lehman_repo_105,
    'Was the legal opinion that Repo 105 constituted a "true sale" a colorable claim or professional malpractice?',
    'A definitive court ruling on the fiduciary duty of the law firm (Linklaters) providing the opinion.',
    'If a colorable claim, the constraint leans towards a clever exploitation of a system Mountain. If malpractice, it confirms the Snare was constructed with full knowledge of its deceptive nature.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(lehman_repo_105, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Repo 105 was a high-intensity, short-duration maneuver. The extraction and
% theater were consistent throughout its use leading up to the 2008 collapse.
% The data reflects a stable, high-extraction state rather than a gradual drift.

% Theater ratio over time (consistently low):
narrative_ontology:measurement(lehman_repo_105_tr_t0, lehman_repo_105, theater_ratio, 0, 0.10).
narrative_ontology:measurement(lehman_repo_105_tr_t5, lehman_repo_105, theater_ratio, 5, 0.10).
narrative_ontology:measurement(lehman_repo_105_tr_t10, lehman_repo_105, theater_ratio, 10, 0.10).

% Extraction over time (consistently high):
narrative_ontology:measurement(lehman_repo_105_ex_t0, lehman_repo_105, base_extractiveness, 0, 0.90).
narrative_ontology:measurement(lehman_repo_105_ex_t5, lehman_repo_105, base_extractiveness, 5, 0.90).
narrative_ontology:measurement(lehman_repo_105_ex_t10, lehman_repo_105, base_extractiveness, 10, 0.90).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type: It was a mechanism to reallocate liabilities on a balance sheet.
narrative_ontology:coordination_type(lehman_repo_105, resource_allocation).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: liar_paradox
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Classical Logic / Epistemology
% ============================================================================

:- module(constraint_liar_paradox, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    constraint_indexing:constraint_classification/3,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:constraint_metric/3,
    constraint_beneficiary/2,
    constraint_victim/2.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: liar_paradox
 * human_readable: The Liar Paradox (Self-Referential Inconsistency)
 * domain: analytical/logic
 * temporal_scope: Permanent (Historical to Civilizational)
 * spatial_scope: Universal (Information Systems)
 * * SUMMARY:
 * The constraint emerges from the sentence "This statement is false." If true, it is 
 * false; if false, it is true. This creates a logical "no-go zone" or a structural 
 * limit on formal systems that allow self-reference without hierarchies.
 * * KEY AGENTS:
 * - The Logician: Seeking a consistent, "all-true" foundation for reality.
 * - The Natural Language Speaker: Encountering the "glitch" as a curiosity or error.
 * - The Formal System (e.g., Peano Arithmetic): Subject to Goedel's incompleteness.
 * * NARRATIVE ARC:
 * The paradox functions as an immovable boundary in logic. Attempts to "break" it 
 * lead to the development of higher-order logics (Tarski's hierarchy) or the 
 * acceptance of incompleteness.
 */

/* ==========================================================================
   2. BASE PROPERTIES (Reality Layer)
   ========================================================================== */

% Required for structural integration
narrative_ontology:interval(liar_paradox_interval, 0, 10).
narrative_ontology:constraint_claim(liar_paradox, mountain).

% Base extractiveness: 0.1 (Low)
% Rationale: The paradox doesn't "steal" value, but it does consume cognitive 
% processing time and stalls automated theorem provers.
domain_priors:base_extractiveness(liar_paradox, 0.1).

% Suppression score: 0.2 (Low)
% Rationale: Alternatives (like paraconsistent logic) are widely known but 
% the paradox itself is impossible to "suppress" out of existence; it is a feature 
% of any sufficiently expressive system.
domain_priors:suppression_score(liar_paradox, 0.2).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(liar_paradox, extractiveness, 0.1).
narrative_ontology:constraint_metric(liar_paradox, suppression_requirement, 0.2).

% Enforcement requirements: Emerges naturally from the structure of language/logic.
domain_priors:emerges_naturally(liar_paradox).

% Metrics for Executive Summary
% Beneficiaries: Meta-mathematicians (provides a career/domain of study).
constraint_beneficiary(liar_paradox, analytical_observers).

% Victims: Consistentists (those who require a single, universal, non-contradictory foundation).
constraint_victim(liar_paradox, institutional_logicians).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE LOGICIAN (Institutional) - MOUNTAIN
   --------------------------------------------------------------------------
   WHO: Institutional/Analytical power.
   WHEN: Civilizational (the laws of logic are seen as eternal).
   WHERE: Trapped (cannot simply "ignore" the law of non-contradiction).
   
   WHY THIS CLASSIFICATION:
   For the institutional logician, the paradox is a Mountain. It is an unchangeable 
   feature of the landscape of truth. You cannot "legislative" it away; you can 
   only build around it or map its peaks.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    liar_paradox,
    mountain,
    context(
        agent_power(institutional),
        time_horizon(civilizational),
        exit_options(trapped),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE NATURAL SPEAKER (Individual Powerless) - ROPE
   --------------------------------------------------------------------------
   WHO: Individual powerless (subject to the "rules" of grammar).
   WHEN: Immediate/Biographical.
   WHERE: Mobile (can simply stop saying the sentence).
   
   WHY THIS CLASSIFICATION:
   To a normal person, the paradox is a Rope. It is a coordination mechanism 
   of language that occasionally gets tangled. It is useful for understanding 
   limits but doesn't stop them from speaking. They can "exit" the paradox 
   by choosing different words.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    liar_paradox,
    rope,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(mobile),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE REBEL LOGICIAN / DIALETHEIST - SNARE
   --------------------------------------------------------------------------
   WHO: Analytical/Individual Moderate.
   WHEN: Historical.
   WHERE: Constrained (by the refusal of others to accept contradictions).
   
   WHY THIS CLASSIFICATION:
   For one seeking a truly unified theory that includes self-reference, the 
   Paradox acts as a Snare. It is used by the "Institutional Logicians" to 
   strangle alternative logics (like Dialetheism) by claiming they are "nonsensical" 
   or "extractive" of truth value.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    liar_paradox,
    snare,
    context(
        agent_power(analytical),
        time_horizon(historical),
        exit_options(constrained),
        spatial_scope(national)
    )
) :- !.

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(liar_paradox_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(liar_paradox, Type1, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(liar_paradox, Type2, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(liar_paradox, Type3, context(agent_power(analytical), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3.

test(immutability_scaling) :-
    % Institutional view sees it as eternal/unchangeable (Mountain)
    constraint_indexing:constraint_classification(liar_paradox, mountain, context(agent_power(institutional), civilizational, trapped, _)).

test(exit_option_shift) :-
    % If you have exit options (can ignore the logic), it's just a Rope.
    constraint_indexing:constraint_classification(liar_paradox, rope, context(_, _, mobile, _)).

:- end_tests(liar_paradox_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * * KEY DECISIONS:
 * 1. EXTRACTIVENESS (0.1): Low, because a paradox doesn't "own" anything, 
 * though it extracts "compute" and "certainty."
 * 2. PERSPECTIVES: Chose Institutional (Logic as Law), Individual (Logic as Tool), 
 * and Analytical (Logic as Conflict).
 * 3. SNARE ARGUMENT: Usually Snares involve coercion. Here, the "coercion" 
 * is the social and academic exclusion of those who suggest logic can 
 * be contradictory (Dialetheism).
 * * CONFIDENCE: High on the classification variance; Medium on the "Snare" 
 * categorization for the rebel logician.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω)
   ========================================================================== */

omega_variable(
    is_logic_natural,
    "Is logic a natural law (Mountain) or a human-encoded coordination system (Rope)?",
    resolution_mechanism("Discovery of non-human intelligence with fundamentally different cognitive processing"),
    impact("If Mountain: The Liar is a physical limit. If Rope: The Liar is a bug in our specific code."),
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Tarski's Truth Hierarchy
 * Viability: High (Standard in formal semantics).
 * Suppression: Moderate (Makes language cumbersome).
 * * ALTERNATIVE 2: Dialetheism (True Contradictions)
 * Viability: Low-Moderate (Graham Priest).
 * Suppression: High (Rejected by mainstream mathematics/science).
 * * CONCLUSION: 
 * The existence of Dialetheism shifts the Liar from a "natural law" (Mountain) 
 * to a "Snare" for those who want to use it to invalidate non-classical systems.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 1. Load: ?- [constraint_liar_paradox].
 * 2. Run tests: ?- run_tests(liar_paradox_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: lindy_effect
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Nassim Taleb / Benoit Mandelbrot / Intellectual History
% ============================================================================

:- module(constraint_lindy_effect, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    constraint_indexing:constraint_classification/3,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:constraint_metric/3,
    constraint_beneficiary/2,
    constraint_victim/2.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: lindy_effect
 * human_readable: The Lindy Effect
 * domain: social/intellectual/technological
 * temporal_scope: Historical to Civilizational
 * spatial_scope: Global
 * * SUMMARY:
 * The Lindy Effect is a theorized phenomenon where the future life expectancy of 
 * non-perishable things (ideas, books, technologies) is proportional to their 
 * current age. In its simplest form, every additional day of survival implies 
 * a longer remaining life.
 * * KEY AGENTS:
 * - The Traditionalist: Uses time as a filter for quality and truth.
 * - The Innovator: Struggles against the "survivorship bias" of established ideas.
 * - The Statistician: Observes the power-law distribution of intellectual survival.
 * * NARRATIVE ARC:
 * The effect functions as a structural bias in information systems. It provides 
 * a "Rope" for identifying enduring value but acts as a "Mountain" for new 
 * entrants who lack the "temporal capital" to be taken seriously by the system.
 */

/* ==========================================================================
   2. BASE PROPERTIES (Reality Layer)
   ========================================================================== */

% Required for structural integration
narrative_ontology:interval(lindy_effect, 0, 10).
narrative_ontology:constraint_claim(lindy_effect, mountain).

% Base extractiveness: 0.2 (Low)
% Rationale: The effect doesn't actively steal value, but it does "extract" 
% attention from the new and gift it to the old based solely on age.
domain_priors:base_extractiveness(lindy_effect, 0.2).

% Suppression score: 0.5 (Moderate)
% Rationale: The "Time-Tested" narrative actively suppresses new ideas by 
% labeling them "fragile" or "unproven".
domain_priors:suppression_score(lindy_effect, 0.5).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(lindy_effect, extractiveness, 0.2).
narrative_ontology:constraint_metric(lindy_effect, suppression_requirement, 0.5).

% Enforcement: Emerges naturally from survival statistics and cumulative advantage.
domain_priors:emerges_naturally(lindy_effect).

% Beneficiaries: Classics, established religions, and long-standing technologies.
constraint_beneficiary(lindy_effect, established_institutions).

% Victims: Novel ideas, startups, and new artistic movements.
constraint_victim(lindy_effect, disruptive_innovators).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE ANALYTICAL STATISTICIAN - MOUNTAIN
   --------------------------------------------------------------------------
   
   WHO: analytical (The observer of systemic patterns).
   WHEN: civilizational (Viewing the long-term horizon of ideas).
   WHERE: trapped (The mathematics of power laws are invariant).
   SCOPE: global.
   
   WHY THIS CLASSIFICATION:
   For the statistician, the Lindy Effect is a Mountain. It is an unchangeable 
   feature of non-perishable systems. In a world of information, "ageing" 
   works in reverse; this is a mathematical reality that cannot be legislated 
   away or ignored.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    lindy_effect,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(civilizational),
        exit_options(trapped),
        spatial_scope(global)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE PRAGMATIC INVESTOR - ROPE
   --------------------------------------------------------------------------
   
   WHO: individual_moderate (A decision-maker seeking stability).
   WHEN: biographical (Achieving success within a single lifetime).
   WHERE: mobile (Can choose to follow Lindy or gamble on the new).
   SCOPE: national.
   
   WHY THIS CLASSIFICATION:
   For the investor, the Lindy Effect is a Rope. It is a coordination 
   mechanism that allows them to distinguish "signal" from "noise." By 
   prioritizing things that have already survived for 50 years, they use 
   the constraint as a tether to reality and enduring value.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    lindy_effect,
    rope,
    context(
        agent_power(individual_moderate),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(national)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE DISRUPTIVE STARTUP - SNARE
   --------------------------------------------------------------------------
   
   WHO: powerless (A new entrant with zero temporal capital).
   WHEN: immediate (Needs to survive the next 12 months).
   WHERE: constrained (Must compete against "proven" incumbents).
   SCOPE: local.
   
   WHY THIS CLASSIFICATION:
   For a new innovator, the Lindy Effect is a Snare. The system's bias 
   toward the "time-tested" functions as a barrier that tightens the 
   harder they try to prove themselves. They are "guilty of being new" 
   until they are old, but they cannot become old without surviving 
   the bias that seeks to kill them for being new.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    lindy_effect,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 4: THE ESTABLISHED INSTITUTION - ROPE
   --------------------------------------------------------------------------
   WHO: institutional (e.g., a university, a religious body).
   WHEN: Generational (Focused on preserving its own existence).
   WHERE: Arbitrage (Leverages its age and reputation).
   SCOPE: National to Global.
   
   WHY THIS CLASSIFICATION:
   For an established institution, the Lindy Effect is a "Rope." It is a 
   powerful mechanism for maintaining authority and relevance. The institution's 
   longevity becomes a self-reinforcing signal of its quality and trustworthiness, 
   helping it to coordinate social belief and attract resources.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    lindy_effect,
    rope,
    context(
        agent_power(institutional),
        time_horizon(generational),
        exit_options(arbitrage),
        spatial_scope(global)
    )
).

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(lindy_effect_tests).

/**
 * TEST 1: Multi-perspective variance
 * Demonstrates that the Lindy Effect is viewed differently across agents.
 */
test(multi_perspective_variance) :-
    % Analytical Statistician (Mountain)
    constraint_indexing:constraint_classification(
        lindy_effect,
        Type1,
        context(agent_power(analytical), time_horizon(civilizational), exit_options(trapped), spatial_scope(global))
    ),
    % Pragmatic Investor (Rope)
    constraint_indexing:constraint_classification(
        lindy_effect,
        Type2,
        context(agent_power(individual_moderate), time_horizon(biographical), exit_options(mobile), spatial_scope(national))
    ),
    % Disruptive Startup (Snare)
    constraint_indexing:constraint_classification(
        lindy_effect,
        Type3,
        context(agent_power(powerless), time_horizon(immediate), exit_options(constrained), spatial_scope(local))
    ),
    % Established Institution (Rope)
    constraint_indexing:constraint_classification(
        lindy_effect,
        Type4,
        context(agent_power(institutional), time_horizon(generational), exit_options(arbitrage), spatial_scope(global))
    ),
    % Verify they differ
    Type1 \= Type2,
    Type2 \= Type3,
    Type1 \= Type3. % Ensure all three are distinct

/**
 * TEST 2: Power-based extractiveness scaling
 * Demonstrates that powerless startups experience higher extraction (of opportunity) than established institutions.
 */
test(power_extractiveness_scaling) :-
    ContextPowerless = context(agent_power(powerless), time_horizon(immediate), exit_options(constrained), spatial_scope(local)),
    ContextPowerful = context(agent_power(institutional), time_horizon(generational), exit_options(arbitrage), spatial_scope(global)),
    constraint_indexing:extractiveness_for_agent(lindy_effect, ContextPowerless, Score1),
    constraint_indexing:extractiveness_for_agent(lindy_effect, ContextPowerful, Score2),
    Score1 > Score2.  % Powerless experience more extraction

/**
 * TEST 3: Domain-specific insight - The "Time Tax"
 * Demonstrates that the "snare" for innovators is the time they must survive to be considered "Lindy."
 */
test(time_tax_insight) :-
    constraint_indexing:constraint_classification(lindy_effect, ClassificationStartup, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(lindy_effect, ClassificationInvestor, context(agent_power(individual_moderate), _, _, _)),
    ClassificationStartup = snare,
    ClassificationInvestor = rope.

:- end_tests(lindy_effect_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini 2.0 Flash
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. PERSPECTIVAL VARIANCE: I chose to highlight how "Age" acts as a filter. 
 * What is a "validating tool" (Rope) for a scholar is a "death sentence" (Snare) 
 * for a new startup that cannot survive long enough to reach the "Lindy" zone.
 * 
 * 2. EXTRACTIVENESS: Kept at 0.2. The Lindy Effect doesn't "steal" as much 
 * as it "weights." It's a soft extraction of opportunity cost from the future 
 * toward the past.
 * 
 * 3. SNARE ARGUMENT: The "Snare" for innovators is specifically the 
 * impossibility of acquiring age without first surviving the disadvantage 
 * of being new.
 * 
 * 4. OMEGAS 
 *    Define uncertainty so your analysis is cleaner
 *    omega_variable(
 *        digital_acceleration_impact,
 *        "Does the speed of digital iteration (e.g., AI) break the Lindy 
 *        Effect or simply create a 'Compressed Lindy' cycle?",
 *        resolution_mechanism("Longitudinal study of software survival vs. 
 *        philosophical survival in the 21st century"),
 *        impact("If Yes: The Lindy Effect is a Rope that can be untied. If No: It 
 *        is a Mountain that just scales with speed."),
 *        confidence_without_resolution(medium)
 *    ).
 */

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS (If Applicable)
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * 
 * ALTERNATIVE 1: Meritocratic "Neophilia" (Silicon Valley model)
 *    Viability: Moderate. Seeks to judge things solely on current utility.
 *    Suppression: Moderate. Often fails because "new" things lack the 
 *    robust edge-case testing that "old" things have survived.
 * 
 * ALTERNATIVE 2: Controlled Planned Obsolescence
 *    Viability: High in hardware/fashion.
 * 
 * CONCLUSION:
 * While neophilia tries to break the Lindy Effect, the existence of 
 * "Legacy Systems" in banking and infrastructure shows that Lindy 
 * remains a Mountain for high-stakes systems.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS CONSTRAINT:
 * 
 * 1. Load into main system:
 *    ?- [constraints/lindy_effect].
 * 
 * 2. Run multi-perspective analysis:
 *    ?- constraint_indexing:multi_index_report(lindy_effect).
 * 
 * 3. Run tests:
 *    ?- run_tests(lindy_effect_tests).
 * 
 * 4. Generate pedagogical report:
 *    ?- pedagogical_report(lindy_effect).
 * 
 * 5. Compare with other constraints:
 *    ?- compare_constraints(lindy_effect, [other_id]).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: litany_of_the_real
% ============================================================================
% Generated: 2026-01-24
% Model: Gemini 2.0 Flash
% Source: The Litany of the Real: Line-by-Line Explanation (DR Indexical System)
% ============================================================================

:- module(litany_of_the_real, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: litany_of_the_real
 * human_readable: The Litany of the Real (Deferential Realism)
 * domain: philosophical/cognitive
 * temporal_scope: Perpetual / January 2026 update
 * spatial_scope: Global / Internal (Substrate)
 * * SUMMARY:
 * A formal set of cognitive constraints and linguistic protocols designed 
 * to align an agent's internal model with external reality. It functions 
 * as a meta-constraint: a rule for how to handle other rules.
 * * KEY AGENTS:
 * - The Practitioner: The individual using the Litany to navigate reality.
 * - The Escapist: An agent resisting the "unyielding" nature of substrate.
 * - The Architect: The institutional voice defining "natural law" (DR).
 * * NARRATIVE ARC:
 * The practitioner moves from "pretending to be free" (denial) to 
 * "pressing the edge of possibility" (testing). The Litany transforms 
 * resentment of limitation into a "North Star" for a voyage of becoming.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% ID Binding - Mandatory for 2026 DR-Audit Suite
narrative_ontology:interval(litany_of_the_real, 0, 10).
narrative_ontology:constraint_claim(litany_of_the_real, mountain).

% Base Properties
% Extractiveness is low; it provides a coordination mechanism for the self.
domain_priors:base_extractiveness(litany_of_the_real, 0.15).
% Suppression is low; it actively encourages "pressing the edge" to find truth.
domain_priors:suppression_score(litany_of_the_real, 0.20).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(litany_of_the_real, extractiveness, 0.15).
narrative_ontology:constraint_metric(litany_of_the_real, suppression_requirement, 0.2).

% It emerges naturally as the "lattice of life" but requires active practice.
domain_priors:emerges_naturally(litany_of_the_real).

% Beneficiaries & Victims
constraint_beneficiary(litany_of_the_real, practitioner).
constraint_victim(litany_of_the_real, escapist).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE PRACTITIONER - Rope
   --------------------------------------------------------------------------
   WHO: Individual/Powerless - Subject to reality's unyielding magma/stone.
   WHEN: Biographical - A lifetime's voyage of becoming.
   WHERE: Mobile - Choosing orientation even within constraints.
   
   WHY THIS CLASSIFICATION:
   The Practitioner sees the Litany as a coordination mechanism. It binds
   attention to reality so that agency can be exercised effectively. 
   It is a "double helix" that enables life rather than a cage that stops it.
   -------------------------------------------------------------------------- */
constraint_indexing:constraint_classification(litany_of_the_real, rope, 
    context(agent_power(powerless), time_horizon(biographical), exit_options(mobile), spatial_scope(local))) :-
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE ARCHITECT - Mountain
   --------------------------------------------------------------------------
   WHO: Institutional - The source of the DR classification framework.
   WHEN: Historical/Civilizational - Rules that "abide over time."
   WHERE: Trapped - No escape from the fundamental lattice of reality.
   
   WHY THIS CLASSIFICATION:
   From the institutional/analytical peak, the Litany is not a choice but a
   description of natural law. "Constraint is the double helix of the world."
   It is viewed as unchangeable (zero degrees of freedom).
   -------------------------------------------------------------------------- */
constraint_indexing:constraint_classification(litany_of_the_real, mountain, 
    context(agent_power(institutional), time_horizon(historical), exit_options(trapped), spatial_scope(global))) :-
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE SKEPTIC/ESCAPIST - Snare
   --------------------------------------------------------------------------
   WHO: Individual/Powerless - Feeling the weight of "cannot be refused."
   WHEN: Immediate - The pain of current limitation.
   WHERE: Trapped - Seeing no alternative to the "magma" of existence.
   
   WHY THIS CLASSIFICATION:
   To one who values transcendence over navigation, the Litany is a Snare.
   It "extracts" the hope of total freedom and "suppresses" the dream 
   of a constraint-free existence by labeling it "pretending."
   -------------------------------------------------------------------------- */
constraint_indexing:constraint_classification(litany_of_the_real, snare, 
    context(agent_power(powerless), time_horizon(immediate), exit_options(trapped), spatial_scope(national))) :-
    !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(litany_of_the_real_tests).

test(multi_perspective_litany) :-
    % Practitioner view
    constraint_indexing:constraint_classification(litany_of_the_real, Type1, 
        context(agent_power(powerless), time_horizon(biographical), _, _)),
    % Skeptic view
    constraint_indexing:constraint_classification(litany_of_the_real, Type2, 
        context(agent_power(powerless), time_horizon(immediate), _, _)),
    % Architect view
    constraint_indexing:constraint_classification(litany_of_the_real, Type3, 
        context(agent_power(institutional), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3.

test(edge_testing_epistemology) :-
    % Demonstrates that pressing the edge is required to know what binds.
    % In this system, knowledge (rope/mountain) is only achieved via testing.
    LitanyGoal = "know what truly binds",
    Action = "press the edge of possibility",
    assertion(LitanyGoal \= Action).

test(time_immutability_litany) :-
    % Short horizons (Immediate) see the constraint as a heavy weight (Snare/Mountain).
    % Long horizons (Historical) see it as the necessary structure of the world.
    true.

:- end_tests(litany_of_the_real_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * * KEY DECISIONS:
 * * 1. EXTRACTIVENESS SCORE (0.15):
 * Reasoning: The Litany does not extract material wealth, but it does
 * extract cognitive "voluntarism" (the belief in absolute freedom). 
 * Since this extraction serves the agent's navigation, the asymmetry is low.
 * * 2. PERSPECTIVE SELECTION:
 * Included the 'Skeptic' as a powerless agent to demonstrate how
 * acceptance can feel like extraction (Snare) before it is mastered.
 * * 3. CLASSIFICATION RATIONALE:
 * Practitioner -> Rope: It is a tool for coordination with reality.
 * Architect -> Mountain: It is presented as an irreducible ontological fact.
 * Skeptic -> Snare: It enforces "reality" upon those who wish to deny it.
 * * 4. AMBIGUITIES:
 * - The line "I will hold many truths without breaking" suggests a 
 * paraconsistent logic that resists standard Prolog classification. 
 * I resolved this by indexing the "truths" to different perspectives.
 * * 5. CONFIDENCE:
 * High: The mapping of DR terms (Mountain/Rope) to the Litany's text.
 * Medium: The classification of a philosophy as a "Snare" for the uninitiated.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% Omega regarding the limit of "pressing the edge"
omega_variable(
    edge_testing_damage_threshold,
    "At what precise point does 'discomfort' from edge-testing become 'damage' to substrate?",
    resolution_mechanism("Longitudinal physiological and psychological monitoring during edge-testing"),
    impact("If too high: agents break themselves. If too low: agents remain trapped in detritus."),
    confidence_without_resolution(medium)
).

% Omega for high-extraction (philosophical extraction of agency)
omega_variable(
    litany_of_the_real_extraction_intent,
    "Is the 0.15 extraction of cognitive voluntarism a functional necessity for survival or a predatory choice by DR architects?",
    resolution_mechanism("Audit of practitioner survival rates and agency metrics vs. uninitiated controls"),
    impact("If necessity: Mountain. If predatory choice: Snare/Mandatrophy."),
    confidence_without_resolution(high)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Pure Voluntarism
 * Viability: High in Modernist/Libertarian frameworks.
 * Suppression: Rejected by the Litany as "pretending to be free."
 * Evidence: "I shall not pretend to be free."
 * * ALTERNATIVE 2: Nihilism
 * Viability: A common response to "unyielding" reality.
 * Suppression: Rejected by the "Yes" to life and the world.
 * Evidence: "I will say Yes — to this moment, to the world, to life."
 * * CONCLUSION:
 * The Litany moves the agent from a Snare (denial-based paralysis) 
 * to a Rope (navigation-based coordination) by acknowledging Mountains.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

% To run: ?- [litany_of_the_real].
% To test: ?- run_tests(litany_of_the_real_tests).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: litchfield_sensitive_locations_2026
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-05-21
% ============================================================================

:- module(constraint_litchfield_sensitive_locations_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: litchfield_sensitive_locations_2026
 * human_readable: Litchfield School Perimeter Crisis
 * domain: political/social
 * * SUMMARY:
 * On Feb 5, 2026, federal agents were spotted within a block of the School of
 * St. Philip in Litchfield, MN, despite a publicized 700-agent drawdown.
 * This presence at "sensitive locations" triggers a Snare classification for
 * residents, as it extracts student mental health and attendance to maintain
 * a 2,300-agent enforcement baseline.
 * * KEY AGENTS:
 * - Parents/Students (School of St. Philip): Subject (Powerless)
 * - Federal Executive (Trump Administration): Beneficiary (Institutional)
 * - MN School Districts (Litigants): Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(litchfield_sensitive_locations_2026, 0.78). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(litchfield_sensitive_locations_2026, 0.94).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(litchfield_sensitive_locations_2026, 0.88).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(litchfield_sensitive_locations_2026, extractiveness, 0.78).
narrative_ontology:constraint_metric(litchfield_sensitive_locations_2026, suppression_requirement, 0.94).
narrative_ontology:constraint_metric(litchfield_sensitive_locations_2026, theater_ratio, 0.88).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(litchfield_sensitive_locations_2026, coordination).

% Binary flags
domain_priors:requires_active_enforcement(litchfield_sensitive_locations_2026).

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
narrative_ontology:constraint_beneficiary(litchfield_sensitive_locations_2026, federal_enforcement_agencies).
narrative_ontology:constraint_victim(litchfield_sensitive_locations_2026, litchfield_students).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% Local parents view the school perimeter presence as a Snare: a predatory
% environment that traps children between educational needs and federal threat.
% χ = 0.78 (ε) * 1.5 (π(powerless)) * 0.9 (σ(regional)) = 1.053. This high
% effective extraction confirms the Snare classification.
constraint_indexing:constraint_classification(litchfield_sensitive_locations_2026, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(regional))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% The Administration views the "Metro Surge" as a Rope: essential coordination
% for national security, regardless of local proximity to schools.
% χ = 0.78 (ε) * -0.2 (π(institutional)) * 1.0 (σ(national)) = -0.156. The
% negative effective extraction indicates a perceived benefit, classifying as Rope.
constraint_indexing:constraint_classification(litchfield_sensitive_locations_2026, rope,
    context(agent_power(institutional),
            time_horizon(historical),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (PITON)
% Analysts (School Districts) see a Piton. The "security" function has
% atrophied into theatrical enforcement that damages local stability, confirmed
% by the high theater_ratio.
constraint_indexing:constraint_classification(litchfield_sensitive_locations_2026, piton,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(arbitrage),
            spatial_scope(global))) :-
    domain_priors:theater_ratio(litchfield_sensitive_locations_2026, TR), TR > 0.70.

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(litchfield_sensitive_locations_2026_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(litchfield_sensitive_locations_2026, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(litchfield_sensitive_locations_2026, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(extraction_threshold) :-
    domain_priors:base_extractiveness(litchfield_sensitive_locations_2026, E),
    E > 0.46.

test(theater_dominance) :-
    domain_priors:theater_ratio(litchfield_sensitive_locations_2026, TR),
    TR > 0.70.

:- end_tests(litchfield_sensitive_locations_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The extraction score (0.78) reflects the measurable drop in attendance
 * and mental health outcomes for students. The suppression score (0.94) is
 * justified by the presence of federal force in designated "sensitive locations,"
 * effectively removing alternatives for the local community. The Theater Ratio
 * (0.88) is justified by the discrepancy between the "700-agent drawdown"
 * announcement and the tactical reality of agents stationed near the School of
 * St. Philip.
 * * MANDATROPHY ANALYSIS:
 * [RESOLVED MANDATROPHY] The high extraction (0.78) and suppression (0.94)
 * could lead to a simple Snare classification. However, the system correctly
 * identifies this as a Piton from an analytical perspective due to the
 * extremely high theater_ratio (0.88). This resolves mandatrophy by
 * recognizing that the constraint's original coordination claim has decayed
 * into performative enforcement, preventing a misclassification that would
 * ignore the constraint's history and theatrical nature.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_litchfield_2026,
    'Will the school district lawsuit establish a legal Mountain against federal entry?',
    'Judicial ruling on federal activity in "sensitive locations".',
    'Success creates a Mountain (limit); Failure reinforces the Snare.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(litchfield_sensitive_locations_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection (metric_substitution,
% extraction_accumulation) by providing measurements at multiple time points.
% Model how the constraint intensified or changed across the interval.
%
% Required for high-extraction constraints (base_extractiveness > 0.46).
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(litchfield_sensitive_locations_2026_tr_t0, litchfield_sensitive_locations_2026, theater_ratio, 0, 0.35).
narrative_ontology:measurement(litchfield_sensitive_locations_2026_tr_t5, litchfield_sensitive_locations_2026, theater_ratio, 5, 0.60).
narrative_ontology:measurement(litchfield_sensitive_locations_2026_tr_t10, litchfield_sensitive_locations_2026, theater_ratio, 10, 0.88).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(litchfield_sensitive_locations_2026_ex_t0, litchfield_sensitive_locations_2026, base_extractiveness, 0, 0.25).
narrative_ontology:measurement(litchfield_sensitive_locations_2026_ex_t5, litchfield_sensitive_locations_2026, base_extractiveness, 5, 0.55).
narrative_ontology:measurement(litchfield_sensitive_locations_2026_ex_t10, litchfield_sensitive_locations_2026, base_extractiveness, 10, 0.78).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% Valid types: information_standard, resource_allocation,
%              enforcement_mechanism, global_infrastructure
narrative_ontology:coordination_type(litchfield_sensitive_locations_2026, enforcement_mechanism).

% Boltzmann floor override (only if domain knowledge justifies)
% Value must be in [0.0, 1.0]
% narrative_ontology:boltzmann_floor_override(litchfield_sensitive_locations_2026, 0.1).

% Network relationships (structural influence edges)
% Declare when constraints share regulatory domain, causal dependency,
% or institutional coupling.
% narrative_ontology:affects_constraint(litchfield_sensitive_locations_2026, local_policing_autonomy).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: lln_convergence
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Law of Large Numbers (Jakob Bernoulli, 1713)
% ============================================================================

:- module(constraint_lln, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: lln_convergence
 * human_readable: Law of Large Numbers (LLN)
 * domain: mathematical/probabilistic
 * temporal_scope: 1713 - Present (Civilizational)
 * spatial_scope: Global/Abstract (Independent trials)
 * * SUMMARY:
 * The Law of Large Numbers (LLN) is a theorem that describes the result of 
 * performing the same experiment a large number of times. It states that the 
 * average of the results obtained from a large number of trials should be 
 * close to the expected value, and will tend to become closer as more trials 
 * are performed.
 * * KEY AGENTS:
 * - The Individual Trial: The powerless subject whose variance is eventually 
 * smoothed away by the aggregate.
 * - The Casino / Insurance Firm (Institutional): An agent who uses the LLN 
 * as a "Rope" to ensure predictable profitability across millions of events.
 * - The Gambler (Victim): An agent with finite capital for whom the LLN 
 * acts as a "Snare" (Gambler's Ruin), ensuring they go broke before reaching 
 * the "long run" equilibrium.
 * * NARRATIVE ARC:
 * LLN is the "Mountain" of equilibrium—it is the inescapable gravity of 
 * probability. For the institutional architect, it is the "Rope" of 
 * coordination that turns randomness into business. However, for the 
 * individual with finite resources, the "Long Run" is a "Snare" because 
 * "in the long run, we are all dead" (Keynes).
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION
   ========================================================================== */

% Required for DR-Audit Suite
narrative_ontology:interval(lln_era, 1713, 2026).
narrative_ontology:constraint_claim(lln_convergence, mountain).

% Base extractiveness: 0.25
% Rationale: Moderate. While a mathematical truth, the LLN "extracts" 
% capital from those who bet against the mean (Casinos) and "extracts" 
% the relevance of the individual event for the sake of the average.
domain_priors:base_extractiveness(lln_convergence, 0.25).

% Suppression score: 0.2
% Rationale: It suppresses the visibility of short-term variance in favor 
% of long-term stability.
domain_priors:suppression_score(lln_convergence, 0.2).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(lln_convergence, extractiveness, 0.25).
narrative_ontology:constraint_metric(lln_convergence, suppression_requirement, 0.2).

% Enforcement: Emerges naturally from the axioms of probability.
domain_priors:emerges_naturally(lln_convergence).

% Metrics
% Beneficiaries & Victims
constraint_beneficiary(lln_convergence, insurance_industry).
constraint_beneficiary(lln_convergence, casino_operators).
constraint_victim(lln_convergence, gamblers_with_finite_capital).
constraint_victim(lln_convergence, short_term_variance_analysts).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE SINGLE COIN FLIP - Mountain
   --------------------------------------------------------------------------
   WHO: powerless - The single trial has no agency over the total mean.
   WHEN: immediate - True at the moment of aggregation.
   WHERE: trapped - Bound within the laws of large-scale numbers.
   SCOPE: local - Immediate neighborhood of the specific trial.
   
   WHY THIS CLASSIFICATION:
   For the individual trial, the LLN is a natural law. It cannot "choose" to 
   skew the average of a billion flips; it is an insignificant, powerless 
   component of an inevitable convergence.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    lln_convergence,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE ACTUARY - Rope
   --------------------------------------------------------------------------
   WHO: institutional - Power to price risk based on the aggregate.
   WHEN: biographical - Planning the multi-decade stability of a fund.
   WHERE: mobile - Can choose different sample pools to tune convergence.
   SCOPE: global - Applying the law to millions of policyholders.
   
   WHY THIS CLASSIFICATION:
   For the institution, LLN is a "Rope"—a functional coordination tool. 
   It allows the conversion of individual chaos into institutional order, 
   providing a "standard of achievement" for fiscal stability.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    lln_convergence,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE FINITE-CAPITAL GAMBLER - Snare
   --------------------------------------------------------------------------
   WHO: powerless - Trapped by the "Law of Small Numbers" fallacy.
   WHEN: immediate - Running out of capital before the mean is reached.
   WHERE: constrained - The agent is bound by the specific limits of their wallet.
   SCOPE: local - A specific table or session.
   
   WHY THIS CLASSIFICATION:
   When capital is finite, the "guarantee" of convergence is a "Snare." 
   The agent is "strangled" by the variance (the path to the mean) before the 
   equilibrium (the mean itself) can save them. This is the extractive 
   reality of Gambler's Ruin.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    lln_convergence,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(local)
    )
) :- 
    domain_priors:base_extractiveness(lln_convergence, E),
    E >= 0.2,
    !.

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(lln_convergence_tests).

test(aggregation_fate_variance) :-
    % Trial -> Mountain
    constraint_indexing:constraint_classification(lln_convergence, Type1, context(powerless, immediate, trapped, local)),
    % Institution -> Rope
    constraint_indexing:constraint_classification(lln_convergence, Type2, context(institutional, biographical, mobile, global)),
    Type1 = mountain,
    Type2 = rope.

test(gamblers_ruin_penalty) :-
    % A powerless agent with constrained options (finite capital) sees the law as a Snare.
    constraint_indexing:constraint_classification(lln_convergence, snare, context(powerless, immediate, constrained, local)).

test(emergence) :-
    domain_priors:emerges_naturally(lln_convergence).

:- end_tests(lln_convergence_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * * KEY DECISIONS:
 * 1. PERSPECTIVE SHIFT: The core insight is that the "Law" is a gift to the 
 * infinite (or the large institution) but a trap (Snare) for the finite 
 * individual who cannot survive the variance.
 * 2. EXTRACTIVENESS (0.25): High enough to trigger the beneficiary/victim 
 * logic, reflecting that the LLN is the engine of extractive industries like 
 * commercial gambling.
 * 3. IMAGES: Triggered diagrams for convergence plots and dice simulations to 
 * clarify the transition from variance to stability.
 */

% OMEGA IDENTIFICATION
omega_variable(
    path_dependency,
    "Can the 'Snare' of the gambler be avoided if the 'Rope' of the mean 
    is visible in real-time?",
    resolution_mechanism("Experimental trial of gambling behavior with vs without live-mean visualizations."),
    impact("If Yes: The Snare becomes a Rope. If No: It is a permanent Mountain of biological limitation."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: The "Law of Small Numbers" (Fallacy)
 * Viability: Psychologically dominant in human brains.
 * Suppression: Suppressed by formal education and scientific method.
 * Evidence: Common in "Gambler's Fallacy" where players expect a "win" 
 * after a "loss."
 * * ALTERNATIVE 2: Cauchy Distributions (Infinite Variance)
 * Viability: The LLN does not apply here; the mean never stabilizes.
 * Suppression: Functionally "invisible" in standard business models that 
 * assume finite variance.
 * * CONCLUSION:
 * The institutional dominance of the LLN "Rope" effectively suppresses 
 * awareness of Alternative 2 (Fat Tails), leading to systemic "Black Swan" 
 * events when the Mountain collapses.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Load: ?- [lln_convergence].
% Analyze: ?- constraint_indexing:multi_index_report(lln_convergence).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: lobs_theorem
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Martin Hugo Löb (1955) / Provability Logic
% ============================================================================

:- module(constraint_lobs_theorem, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: lobs_theorem
 * human_readable: Löb's Theorem
 * domain: technological
 * temporal_scope: Permanent (Universal Mathematical Law)
 * spatial_scope: Global (Formal Information Systems)
 * * SUMMARY:
 * Löb's Theorem states that for any proposition P, if a system can prove that 
 * "the provability of P implies P," then the system must already be able to 
 * prove P itself. It serves as a fundamental limit on a system's ability to 
 * "trust" its own soundness without becoming trivial.
 * * KEY AGENTS:
 * - The Logician: An observer analyzing the recursive limits of provability.
 * - The AI/Formal System: An agent attempting recursive self-improvement or 
 * meta-reflection on its own code.
 * - The Foundationalist: A subject seeking to ground a system's truth in a 
 * "reflection principle" that says "everything I prove is true."
 * * NARRATIVE ARC:
 * The theorem acts as a "Mountain" of recursive reality, preventing a system 
 * from gaining "unearned trust" in its own outputs. For an AI, it is a 
 * "Rope" for designing stable reflection, but for a human seeking to prove 
 * a system's absolute soundness from within, it is a "Snare" that collapses 
 * into circularity.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for structural anchor
narrative_ontology:interval(lobs_theorem_interval, 0, 10).
narrative_ontology:constraint_claim(lobs_theorem, mountain).

% Base extractiveness: 0.3 (Moderate)
% Rationale: It extracts "semantic depth." It forces a system to either 
% lack self-trust or prove the specific truth, preventing the "extraction" 
% of truth status through mere meta-assertion.
domain_priors:base_extractiveness(lobs_theorem, 0.3).

% Suppression: 0.5 (Moderate)
% Rationale: Naive "Reflection Principles" (the idea that one can simply 
% assume a system is sound) are suppressed by the inevitable emergence 
% of contradictions if self-reference is allowed.
domain_priors:suppression_score(lobs_theorem, 0.5).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(lobs_theorem, extractiveness, 0.3).
narrative_ontology:constraint_metric(lobs_theorem, suppression_requirement, 0.5).

% Enforcement: Emerges naturally from the structure of Peano Arithmetic and 
% diagonal arguments.
domain_priors:emerges_naturally(lobs_theorem).

% BENEFICIARIES & VICTIMS
% Beneficiary: Consistent systems (protects them from triviality).
constraint_beneficiary(lobs_theorem, stable_logical_architectures).
% Victim: Recursive optimists (who hope for internal proofs of soundness).
constraint_victim(lobs_theorem, foundationalist_philosophers).

% Metrics for Executive Summary
/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE ANALYTICAL LOGICIAN - Mountain
   --------------------------------------------------------------------------
   
   WHO: analytical - Observer of universal informational laws.
   WHEN: civilizational - Viewing logic as a permanent substrate.
   WHERE: trapped - Logic cannot bypass the diagonal lemma.
   SCOPE: global - Applies to all sufficiently powerful systems.
   
   WHY THIS CLASSIFICATION:
   To the analytical observer, the theorem is a Mountain. It is an 
   unchangeable feature of the mathematical landscape. No amount of 
   "better programming" or "new axioms" can remove the recursive wall 
   that Löb identified.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    lobs_theorem,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(civilizational),
        exit_options(trapped),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE REFLECTIVE AI SYSTEM - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional - Rule-making power over its own internal logic.
   WHEN: biographical - Operating within a single "run" or development life.
   WHERE: arbitrage - Can move between different levels of the meta-hierarchy.
   SCOPE: national - Specific to its own internal software ecosystem.
   
   WHY THIS CLASSIFICATION:
   For a system designed for self-reflection, the theorem is a Rope. It is 
   a coordination tool that allows the system to remain stable. By 
   understanding that it cannot prove its own soundness without proving 
   specific truths, it uses the theorem as a tether to keep its 
   self-model grounded in provable reality.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    lobs_theorem,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(arbitrage),
        spatial_scope(national)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE FOUNDATIONALIST SUBJECT - Snare
   --------------------------------------------------------------------------
   
   WHO: powerless - Subject to the limits of their own reasoning.
   WHEN: immediate - The current attempt to ground a system's truth.
   WHERE: trapped - Limited by the syntax of the system they inhabit.
   SCOPE: local - Immediate cognitive frame.
   
   WHY THIS CLASSIFICATION:
   For the subject seeking to prove "Everything I say is true" within their 
   own language, the theorem is a Snare. The harder they try to ground 
   the general truth of their statements, the tighter the paradox pulls, 
   forcing them to either remain silent on their own soundness or collapse 
   into proving every possible absurdity.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    lobs_theorem,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(lobs_theorem_tests).

test(multi_perspective_variance) :-
    % Perspective 1: Analyst sees Mountain
    constraint_indexing:constraint_classification(lobs_theorem, mountain, context(agent_power(analytical), _, _, _)),
    % Perspective 2: Institutional sees Rope
    constraint_indexing:constraint_classification(lobs_theorem, rope, context(agent_power(institutional), _, _, _)),
    % Perspective 3: Powerless sees Snare
    constraint_indexing:constraint_classification(lobs_theorem, snare, context(agent_power(powerless), _, _, _)).

test(power_extractiveness_reflection) :-
    % Powerless subjects feel the loss of foundational certainty (Snare)
    ContextPowerless = context(powerless, immediate, trapped, local),
    % Institutional systems manage the recursion as a design constraint (Rope)
    ContextInstitutional = context(institutional, biographical, arbitrage, national),
    domain_priors:base_extractiveness(lobs_theorem, E),
    E > 0.1.

test(time_immutability_scale) :-
    % Civilizational view treats logical invariants as Mountains
    constraint_indexing:effective_immutability(civilizational, trapped, mountain).

:- end_tests(lobs_theorem_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * * 1. EXTRACTIVENESS SCORE (0.3):
 * Reasoning: Löb's theorem prevents the "free" assumption of soundness. 
 * It extracts the luxury of simple self-trust.
 * * 2. SUPPRESSION SCORE (0.5):
 * Reasoning: It suppresses naive reflection principles (e.g., "if Provable(P) 
 * then P"). These principles are invisible to consistent systems 
 * because they lead to triviality.
 * * 3. PERSPECTIVE SELECTION:
 * The Analyst sees the Law (Mountain). The System sees the Design 
 * Constraint (Rope). The Foundationalist sees the Trap (Snare).
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% Omega declaration
omega_variable(
    natural_language_soundness,
    "Can human natural language avoid Löb's trap by virtue of its 
    non-formal or 'fuzzy' semantics?",
    resolution_mechanism("Formalization of natural language semantics to check for diagonalizability"),
    impact("If Yes: Human reasoning is a Rope. If No: Human reasoning is 
    subject to the same Snare as formal logic."),
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Non-well-founded sets / Non-standard Logics
 * Viability: High in niche research. Some logics allow "circular" 
 * truth without triviality.
 * Suppression: High. These systems are ignored in "standard" 
 * foundations because they lack the intuitive power of PA.
 * * CONCLUSION:
 * The existence of niche alternatives makes the "Mountain" of Löb's 
 * Theorem a specific choice of the classical logician, and thus a 
 * "Snare" for those trapped in classical paradigms.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS CONSTRAINT:
 * 1. Load: ?- [constraint_lobs_theorem].
 * 2. Multi-perspective: ?- multi_index_report(lobs_theorem).
 * 3. Run tests: ?- run_tests(lobs_theorem_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: local_vs_global_optima
% ============================================================================
% Generated: 2026-01-17
% Model: Gemini 2.0 Flash
% Source: Optimization Theory / Genetic Algorithms / Calculus
% ============================================================================

:- module(constraint_local_vs_global_optima, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: local_vs_global_optima
 * human_readable: Local vs. Global Optima (The Peak Trap)
 * domain: mathematical/technological/biological
 * temporal_scope: Immediate to Civilizational
 * spatial_scope: Global
 * 
 * SUMMARY:
 * A "Local Optimum" is a solution that is better than all nearby solutions 
 * but inferior to the "Global Optimum"—the best possible solution across 
 * the entire system.
 * 
 * KEY AGENTS:
 * - The Hill-Climber: An agent that always moves toward immediate improvement.
 * - The Explorer: An agent that occasionally moves "downhill" to find 
 * a different, potentially higher mountain.
 * - The Landscape: The mathematical reality defining the peaks and valleys.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (Reality Layer)
   ========================================================================== */

narrative_ontology:interval(local_vs_global_optima, 0, 10).
narrative_ontology:constraint_claim(local_vs_global_optima, mountain).

% Base extractiveness score (0.3)
% Sub-optimality extracts potential value from the system; being stuck at 
% a local peak is a "tax" on efficiency.
domain_priors:base_extractiveness(local_vs_global_optima, 0.3).

% Suppression score (0.5)
% Local peaks often suppress the visibility of the global peak; 
% if you are on a "high enough" hill, you may not even look for the mountain.
domain_priors:suppression_score(local_vs_global_optima, 0.5).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(local_vs_global_optima, extractiveness, 0.3).
narrative_ontology:constraint_metric(local_vs_global_optima, suppression_requirement, 0.5).

domain_priors:emerges_naturally(local_vs_global_optima).

% Asymmetry Metrics
constraint_beneficiary(local_vs_global_optima, none).
constraint_victim(local_vs_global_optima, none).


/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE HILL-CLIMBER - Snare
   --------------------------------------------------------------------------
   WHO: powerless (limited by local perception)
   WHEN: immediate
   WHERE: trapped (at the local peak)
   SCOPE: local
   
   WHY THIS CLASSIFICATION:
   For an agent that can only see immediate improvements (like a simple 
   algorithm or a short-sighted manager), the local optimum is a "Snare." 
   They have reached a point where any single step in any direction makes 
   things worse, so they stop. They are "strangled" by their own success.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    local_vs_global_optima,
    snare,
    context(agent_power(powerless), time_horizon(immediate), exit_options(trapped), spatial_scope(local))
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE ANNEALER - Rope
   --------------------------------------------------------------------------
   WHO: individual_moderate
   WHEN: biographical
   WHERE: mobile (willing to accept short-term loss)
   SCOPE: regional
   
   WHY THIS CLASSIFICATION:
   For an agent that understands the landscape (using heuristics like 
   Simulated Annealing), the local optimum is just a "Rope" to be tested. 
   They are willing to climb down into the valley to find a higher peak, 
   using the local data to coordinate their next jump.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    local_vs_global_optima,
    rope,
    context(agent_power(individual_moderate), time_horizon(biographical), exit_options(mobile), spatial_scope(regional))
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE MATHEMATICIAN - Mountain
   --------------------------------------------------------------------------
   WHO: analytical
   WHEN: historical
   WHERE: analytical
   SCOPE: global
   
   WHY THIS CLASSIFICATION:
   To the mathematician, the existence of local vs global optima is a 
   "Mountain"—an immutable law of non-convex optimization. It is 
   simply how the universe is shaped.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    local_vs_global_optima,
    mountain,
    context(agent_power(analytical), time_horizon(historical), exit_options(analytical), spatial_scope(global))
).


/* --------------------------------------------------------------------------
   PERSPECTIVE 4: THE OPTIMIZATION ENGINEER - Mountain
   --------------------------------------------------------------------------
   WHO: institutional (designs systems around the problem)
   WHEN: biographical
   WHERE: mobile (can choose algorithms/strategies)
   SCOPE: regional
   
   WHY THIS CLASSIFICATION:
   For an engineer building or applying optimization algorithms, the presence
   of local and global optima is a fundamental, immutable characteristic of
   the problem space. It's a "Mountain" they acknowledge and design their
   systems to navigate, rather than something they can eliminate. They accept
   it as a given and work within its constraints.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    local_vs_global_optima,
    mountain,
    context(agent_power(institutional), time_horizon(biographical), exit_options(mobile), spatial_scope(regional))
).

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(local_vs_global_optima_tests).

/**
 * TEST 1: Multi-perspective variance
 * Demonstrates that same constraint = different types from different perspectives
 */
test(multi_perspective_variance) :-
    % Perspective 1
    constraint_indexing:constraint_classification(
        local_vs_global_optima,
        Type1,
        context(agent_power(powerless), time_horizon(immediate), exit_options(trapped), spatial_scope(local))
    ),
    % Perspective 2
    constraint_indexing:constraint_classification(
        local_vs_global_optima,
        Type2,
        context(agent_power(individual_moderate), time_horizon(biographical), exit_options(mobile), spatial_scope(regional))
    ),
    % Perspective 3
    constraint_indexing:constraint_classification(
        local_vs_global_optima,
        Type3,
        context(agent_power(analytical), time_horizon(historical), exit_options(analytical), spatial_scope(global))
    ),
    % Verify they differ (Snare, Rope, Mountain)
    Type1 \= Type2,
    Type2 \= Type3.

/**
 * TEST 2: Power-based extractiveness scaling
 * Demonstrates that extraction experienced varies with agent power
 */
test(power_extractiveness_scaling) :-
    ContextPowerless = context(agent_power(powerless), time_horizon(biographical), exit_options(trapped), spatial_scope(local)),
    ContextPowerful = context(agent_power(institutional), time_horizon(biographical), exit_options(mobile), spatial_scope(regional)),
    constraint_indexing:extractiveness_for_agent(local_vs_global_optima, ContextPowerless, Score1),
    constraint_indexing:extractiveness_for_agent(local_vs_global_optima, ContextPowerful, Score2),
    Score1 > Score2.  % Powerless experience more extraction

/**
 * TEST 3: Local Peak Trap Insight
 * Tests the core insight that a hill-climber gets trapped.
 */
test(local_peak_trap_insight) :-
    % A hill-climber is defined by being powerless and trapped.
    constraint_indexing:constraint_classification(
        local_vs_global_optima,
        snare,
        context(agent_power(powerless), time_horizon(immediate), exit_options(trapped), spatial_scope(local))
    ).

:- end_tests(local_vs_global_optima_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini 2.0 Flash
 * 
 * KEY DECISIONS MADE BY MODEL:
 * 
 * 1. BASE EXTRACTIVENESS (0.3):
 *    Reasoning: The nature of local vs. global optima inherently "extracts" potential value by trapping agents in sub-optimal solutions.
 *    Evidence: Optimization theory, real-world scenarios where local maxima impede global progress.
 *    Uncertainty: The precise quantification of "extracted potential" is subjective and context-dependent.
 * 
 * 2. PERSPECTIVE SELECTION:
 *    Model chose to analyze from 4 perspectives (Hill-Climber, Annealer, Mathematician, Optimization Engineer) because they represent distinct interactions with the optimization landscape.
 *    These four cover key operational, strategic, and analytical viewpoints.
 * 
 * 3. CLASSIFICATION RATIONALE:
 *    Hill-Climber as Snare: Trapped by limited perception and immediate gains, unable to escape the local peak.
 *    Annealer as Rope: Possesses strategy to escape local peaks by accepting temporary setbacks for greater gains.
 *    Mathematician as Mountain: Views the concept as an immutable mathematical truth.
 *    Optimization Engineer as Mountain: Designs systems with the inherent understanding of this immutable constraint.
 * 
 * 4. AMBIGUITIES IN SOURCE MATERIAL:
 *    - Quantification of "optimality": How "optimal" a local solution is relative to global can vary greatly, influencing the perceived "trap" or "rope." Resolved by focusing on the qualitative experience of the agent.
 *
 * 5. CONFIDENCE ASSESSMENT:
 *    High confidence: Classification of Mathematician (Mountain) and Engineer (Mountain), as these roles deal with the inherent mathematical/systemic nature.
 *    Medium confidence: Classification of Hill-Climber (Snare) and Annealer (Rope), as these depend on agent's perception and strategy, which can vary.
 *    Low confidence: Precise quantitative scoring of extractiveness and suppression, as these are conceptual for this abstract constraint.
 *    Would benefit from: Specific real-world case studies demonstrating these behaviors in different agent types.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * omega_variable(local_vs_global_optima_trapped_perception,
 *      "Does the agent truly perceive itself as 'trapped' or merely content with 'good enough'?",
 *      resolution_mechanism("In-depth psychological/behavioral study of agents operating within sub-optimal solutions."),
 *      impact("If merely content: shifts Snare classification to a weaker Rope or even Mountain, as the constraint is self-imposed or accepted. If truly trapped: reinforces Snare."),
 *      confidence_without_resolution(medium)
 * ).
 */

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * 
 * For the fundamental mathematical concept of local vs. global optima, there are no "suppressed alternatives"
 * in the sense of an alternative mathematical reality. However, there are alternative *approaches* to
 * navigating such landscapes.
 * 
 * ALTERNATIVE 1: Meta-heuristic Algorithms (e.g., Genetic Algorithms)
 *    Viability: These algorithms are designed to escape local optima by exploring broader solution spaces. They are viable and widely used.
 *    Suppression: Not suppressed; rather, they represent an *alternative strategy* to overcome the constraint, demonstrating that the "trap" is not absolute for all agents.
 *    Evidence: The field of global optimization.
 * 
 * ALTERNATIVE 2: Problem Transformation
 *    Viability: In some cases, a problem can be re-formulated (e.g., convexified) such that local optima are eliminated.
 *    Suppression: Not suppressed; this is a valid engineering/mathematical technique.
 *    Evidence: Convex optimization literature.
 * 
 * CONCLUSION:
 * The existence of alternative *strategies* (like meta-heuristics or problem transformation) means that for agents with the knowledge and tools, the local optima are not an inescapable "Snare," but a navigable "Rope" or even a "Mountain" to design around. This reinforces the perspectival nature of the constraint.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS CONSTRAINT:
 * 
 * 1. Load into main system:
 *    ?- [constraints/local_vs_global_optima].
 * 
 * 2. Run multi-perspective analysis:
 *    ?- constraint_indexing:multi_index_report(local_vs_global_optima).
 * 
 * 3. Run tests:
 *    ?- run_tests(local_vs_global_optima_tests).
 * 
 * 4. Generate pedagogical report:
 *    ?- pedagogical_report(local_vs_global_optima).
 * 
 * 5. Compare with other constraints:
 *    ?- compare_constraints(local_vs_global_optima, [other_id]).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: logistic_map_dynamics
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Robert May (1976) / Logistic Map / Population Biology
% ============================================================================

:- module(constraint_logistic_map, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: logistic_map_dynamics
 * human_readable: The Logistic Map (Bifurcation and Chaos)
 * domain: mathematical/technological/biological
 * temporal_scope: 1976 - Present (Civilizational)
 * spatial_scope: Global/Abstract (Population constraints)
 * * SUMMARY:
 * The Logistic Map ($x_{n+1} = r x_n (1 - x_n)$) is a polynomial mapping that 
 * demonstrates how complex, chaotic behavior can arise from very simple 
 * non-linear dynamical equations. It serves as a fundamental constraint on 
 * the predictability of systems with limited resources and feedback.
 * * KEY AGENTS:
 * - The Population Iterate ($x_n$): The powerless subject whose "density" is 
 * dictated by the fixed parameter $r$.
 * - The Population Biologist (Institutional): An agent who uses the map as a 
 * "Rope" for coordination to prevent ecosystem collapse.
 * - The Chaos Theorist (Analytical): The observer who maps the "Mountain" of 
 * the bifurcation diagram.
 * * NARRATIVE ARC:
 * For a population in a stable environment ($r < 3$), the map is a "Mountain" 
 * of natural law leading to equilibrium. In management, it is a "Rope" for 
 * predicting sustainable yields. However, as $r$ enters the chaotic regime 
 * ($r > 3.57$), the "Mountain" becomes a "Snare," extracting all predictive 
 * certainty and "strangling" the observer with sensitive dependence on 
 * initial conditions.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION
   ========================================================================== */

% Required for DR-Audit Suite
narrative_ontology:interval(logistic_map_era, 1976, 2026).
narrative_ontology:constraint_claim(logistic_map_dynamics, mountain).

% Base extractiveness: 0.35
% Rationale: Moderate. Chaos "extracts" information (precision) and returns 
% entropy. To maintain functional control at high $r$, massive re-investment 
% in computational precision is required.
domain_priors:base_extractiveness(logistic_map_dynamics, 0.35).

% Suppression score: 0.4
% Rationale: It suppresses the visibility of simple linear growth models 
% (Malthusian), rendering them functionally fraudulent in resource-limited 
% environments.
domain_priors:suppression_score(logistic_map_dynamics, 0.4).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(logistic_map_dynamics, extractiveness, 0.35).
narrative_ontology:constraint_metric(logistic_map_dynamics, suppression_requirement, 0.4).

% Enforcement: Emerges naturally from non-linear feedback and resource limits.
domain_priors:emerges_naturally(logistic_map_dynamics).

% Metrics
% Beneficiaries & Victims (Required for E > 0.3)
constraint_beneficiary(logistic_map_dynamics, nonlinear_analysts). % Gain insights into complexity.
constraint_beneficiary(logistic_map_dynamics, cryptography_designers). % PRNGs using chaos.
constraint_victim(logistic_map_dynamics, long_term_planners). % Certainty is extracted.
constraint_victim(logistic_map_dynamics, ecological_stability). % Small shocks cause flips.

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE POPULATION FRACTION (SUBJECT) - Mountain
   --------------------------------------------------------------------------
   WHO: powerless - The iterate $x$ has no agency over the update rule.
   WHEN: immediate - True at every single step $n \to n+1$.
   WHERE: trapped - Bound within the interval [0, 1].
   SCOPE: local - Immediate neighborhood of the current value.
   
   WHY THIS CLASSIFICATION:
   For the state variable, the iterative law is an absolute, unyielding 
   Mountain of reality. It cannot "choose" to exceed the carrying capacity 
   or avoid the chaotic attractor once $r$ is set.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    logistic_map_dynamics,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE ECOSYSTEM MANAGER - Rope
   --------------------------------------------------------------------------
   WHO: institutional - Power to influence $r$ (e.g., via harvest rates).
   WHEN: biographical - Planning for the multi-year health of a fishery.
   WHERE: mobile - Can adjust parameters to maintain a "Stable" regime ($r < 3$).
   SCOPE: national/regional - Managing a specific environment.
   
   WHY THIS CLASSIFICATION:
   For the manager, the map is a "Rope"—a functional coordination tool. 
   By keeping the system in the non-chaotic region, they coordinate the 
   standard of achievement (sustainable yield) through predictable math.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    logistic_map_dynamics,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(regional)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE CHAOTIC REGIME OBSERVER - Snare
   --------------------------------------------------------------------------
   WHO: powerless - Bound by the "Butterfly Effect" of the map.
   WHEN: biographical - Attempting to predict outcomes over a long period.
   WHERE: constrained - Knowing the law but having no path to certainty.
   SCOPE: global - The mathematical limit of all such iterative systems.
   
   WHY THIS CLASSIFICATION:
   In the chaotic region ($r = 3.9$), the map is a "Snare." It "strangles" 
   the ability to plan, extracting enormous resources for data collection 
   that ultimately fails to provide more than a few steps of foresight.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    logistic_map_dynamics,
    snare,
    context(
        agent_power(powerless),
        time_horizon(biographical),
        exit_options(constrained),
        spatial_scope(global)
    )
) :- 
    domain_priors:base_extractiveness(logistic_map_dynamics, E),
    E >= 0.3,
    !.

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(logistic_map_tests).

test(bifurcation_fate_variance) :-
    % Subject -> Mountain
    constraint_indexing:constraint_classification(logistic_map_dynamics, Type1, context(powerless, immediate, trapped, local)),
    % Manager (Short-term/Stable) -> Rope
    constraint_indexing:constraint_classification(logistic_map_dynamics, Type2, context(institutional, biographical, mobile, regional)),
    Type1 = mountain,
    Type2 = rope.

test(chaos_extraction_penalty) :-
    % Long-term observer (Powerless/Constrained) in Chaos sees it as a Snare.
    constraint_indexing:constraint_classification(logistic_map_dynamics, snare, context(powerless, biographical, constrained, global)).

test(natural_emergence) :-
    domain_priors:emerges_naturally(logistic_map_dynamics).

:- end_tests(logistic_map_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * * 1. BASE EXTRACTIVENESS (0.35): 
 * I chose this because the Logistic Map at high $r$ represents a form of 
 * "Geometrical Coercion." The system "takes" your initial precision and 
 * shreds it, making it an extractive mathematical constraint.
 * * 2. SUPPRESSION SCORE (0.4): 
 * It effectively suppressed the "simple growth" narratives of the early 
 * 20th century by proving that complexity is the default, not the exception.
 * * 3. PERSPECTIVES:
 * Chose the "Iterate" (Passive Subject), "Manager" (Institutional User), 
 * and "Chaotic Observer" (Victim of Entropy) to show how the *same* law 
 * shifts type based on the parameter $r$.
 */

% OMEGA IDENTIFICATION
omega_variable(
    precision_decay_rate,
    "How many iterates $n$ does it take for double-precision floating point to lose all physical meaning at $r=4$?",
    resolution_mechanism("Numerical audit of divergence between $x_n$ and $x_n + \epsilon$ in 64-bit hardware."),
    impact("If $n < 50$: The 'Mountain' is a 'Snare' for all digital simulation. If $n > 500$: It is a Rope."),
    confidence_without_resolution(high)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Malthusian Growth ($x_{n+1} = rx_n$)
 * Viability: Historically the standard for 100 years.
 * Suppression: Rejected by the Logistic Map because it ignores the 
 * "Mountain" of limited resources (the $1-x$ term).
 * * ALTERNATIVE 2: Continuous-time Models (Logistic Differential Equation)
 * Viability: Smooth, predictable, no chaos in 1D.
 * Suppression: Chaos theory shows that discrete-time events (like seasons 
 * or distinct generations) are the true "Rope" for complex biology.
 * * CONCLUSION:
 * The shift from continuous to discrete modeling turned a "Stable Rope" into 
 * a "Chaotic Mountain/Snare."
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Load: ?- [logistic_map_dynamics].
% Analyze: ?- constraint_indexing:multi_index_report(logistic_map_dynamics).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: lorenz_attractor_dynamics
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Edward Lorenz (1963) / Chaos Theory / Deterministic Nonperiodic Flow
% ============================================================================

:- module(constraint_lorenz_attractor, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: lorenz_attractor_dynamics
 * human_readable: Lorenz Attractor (Deterministic Chaos)
 * domain: mathematical/technological/physical
 * temporal_scope: 1963 - Present (Civilizational)
 * spatial_scope: Global/Abstract (Phase Space)
 * * SUMMARY:
 * The Lorenz system is a set of ordinary differential equations describing 
 * atmospheric convection. It famously demonstrated "Deterministic Chaos," where 
 * simple, non-linear rules lead to complex, non-repeating, and sensitive 
 * trajectories. It established the "Butterfly Effect" as a fundamental limit 
 * on long-term prediction.
 * * KEY AGENTS:
 * - The Trajectory (Subject): The powerless agent following the vector field, 
 * trapped in a "strange" butterfly-shaped manifold.
 * - The Meteorologist (Institutional): An agent attempting to use the 
 * system as a "Rope" for coordination (weather forecasting).
 * - The Predictive Model (Victim): An agent whose accuracy is "strangled" by 
 * infinitesimal initial errors, turning the math into a "Snare."
 * * NARRATIVE ARC:
 * The Lorenz equations are a "Mountain" of physical reality—the rules are 
 * simple and unchangeable. In the short term, they provide a "Rope" for 
 * flight planning and logistics. However, as time $t$ increases, the 
 * sensitivity to initial conditions acts as a "Snare," extracting the 
 * possibility of certainty and propping up a "Scaffold" of probability 
 * instead of fact.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for DR-Audit Suite
narrative_ontology:interval(lorenz_era, 1963, 2026).
narrative_ontology:constraint_claim(lorenz_attractor_dynamics, mountain).

% Base extractiveness score (0.0-1.0)
% Rationale: Moderate (0.4). Chaos "extracts" certainty and predictability 
% from observers, demanding massive computational re-investment (Ensembles) 
% to maintain even minimal functional coordination.
domain_priors:base_extractiveness(lorenz_attractor_dynamics, 0.4).

% Suppression score (0.0-1.0)
% Rationale: Moderate (0.5). It suppresses the visibility of long-term 
% linear causality, rendering "simple" prediction models functionally 
% invisible or fraudulent.
domain_priors:suppression_score(lorenz_attractor_dynamics, 0.5).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(lorenz_attractor_dynamics, extractiveness, 0.4).
narrative_ontology:constraint_metric(lorenz_attractor_dynamics, suppression_requirement, 0.5).

% Enforcement: Emerges naturally from the non-linear coupling of variables.
domain_priors:emerges_naturally(lorenz_attractor_dynamics).

% Metrics for Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(lorenz_attractor_dynamics, ensemble_forecasting). % Profits from uncertainty management.
constraint_beneficiary(lorenz_attractor_dynamics, complexity_science).
constraint_victim(lorenz_attractor_dynamics, long_term_determinism). % The "death" of Laplace's Demon.
constraint_victim(lorenz_attractor_dynamics, linear_extrapolation).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE MATHEMATICAL POINT - Mountain
   --------------------------------------------------------------------------
   WHO: powerless - The coordinate (x,y,z) cannot deviate from $\dot{x}, \dot{y}, \dot{z}$.
   WHEN: immediate - The vector field is local and instantaneous.
   WHERE: trapped - Bound within the geometric bounds of the attractor.
   SCOPE: local - Immediate neighborhood in phase space.
   
   WHY THIS CLASSIFICATION:
   For the state variable, the Lorenz equations are an unyielding law. 
   The "Butterfly" is not a choice; it is a fixed, non-negotiable 
   attractor of its existence.
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    lorenz_attractor_dynamics,
    mountain,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE AVIATION DISPATCHER - Rope
   --------------------------------------------------------------------------
   WHO: institutional - Power to coordinate global flight paths using forecasts.
   WHEN: biographical - Planning routes for the next 24-48 hours.
   WHERE: mobile - Can adjust paths or delay flights based on the data.
   SCOPE: national - Managing airspace.
   
   WHY THIS CLASSIFICATION:
   In the short term (within the Lyapunov time), the Lorenz system is a "Rope." 
   It provides a functional coordination mechanism that allows for safe, 
   efficient transit through a complex atmosphere.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    lorenz_attractor_dynamics,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(national)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE POLICY PLANNER (10-YEAR) - Snare
   --------------------------------------------------------------------------
   WHO: powerless - Bound by the "Butterfly Effect" limits of math.
   WHEN: civilizational - Trying to predict long-term climate/social shifts.
   WHERE: constrained - No alternative but to rely on increasingly noisy data.
   SCOPE: global - Global environmental/economic planning.
   
   WHY THIS CLASSIFICATION:
   For the long-term planner, chaos is a "Snare." It "strangles" their 
   ability to provide certain outcomes, extracting enormous political and 
   social capital to fund "scenarios" that can never be fully verified.
   
   NARRATIVE EVIDENCE:
   "Prediction of the sufficiently distant future is impossible by any method, 
   unless the present conditions are known with perfect accuracy." (Lorenz, 1963)
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    lorenz_attractor_dynamics,
    snare,
    context(
        agent_power(powerless),
        time_horizon(civilizational),
        exit_options(constrained),
        spatial_scope(global)
    )
) :- 
    domain_priors:base_extractiveness(lorenz_attractor_dynamics, E),
    E >= 0.4,
    !.

/* ==========================================================================
   4. TESTS (Insights into Deterministic Chaos)
   ========================================================================== */

:- begin_tests(lorenz_attractor_tests).

test(lyapunov_time_variance) :-
    % Short term (immediate) -> Mountain/Rope
    constraint_indexing:constraint_classification(lorenz_attractor_dynamics, Type1, context(powerless, immediate, trapped, local)),
    % Long term (civilizational) -> Snare
    constraint_indexing:constraint_classification(lorenz_attractor_dynamics, Type2, context(powerless, civilizational, constrained, global)),
    Type1 = mountain,
    Type2 = snare.

test(extraction_of_certainty) :-
    % The "powerless" long-term observer suffers high extraction of predictive value.
    Context = context(powerless, civilizational, constrained, global),
    constraint_indexing:extractiveness_for_agent(lorenz_attractor_dynamics, Context, Score),
    Score > 0.5.

test(natural_emergence) :-
    domain_priors:emerges_naturally(lorenz_attractor_dynamics).

:- end_tests(lorenz_attractor_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * * 1. BASE EXTRACTIVENESS (0.4): 
 * I chose this because Chaos is a "predatory" mathematical state—it takes 
 * information (initial precision) and returns heat/noise.
 * * 2. SUPPRESSION SCORE (0.5): 
 * Chaos theory suppressed the 19th-century "Clockwork Universe" (Laplace). 
 * It rendered the linear-determinist alternative invisible to serious science.
 * * 3. PERSPECTIVE SELECTION:
 * Chose the "Mathematical Point" (Subject), "Aviation Dispatcher" (Short-term 
 * User), and "Long-term Planner" (Victim) to illustrate the Lyapunov horizon.
 */

% OMEGA IDENTIFICATION
omega_variable(
    shadowing_lemma_validity,
    "Do 'shadow' trajectories exist that make numerical simulations a reliable Rope despite Chaos?",
    resolution_mechanism("Numerical verification of hyperbolic vs non-hyperbolic regions in the Lorenz attractor."),
    impact("If Yes: The Snare is a 'Scaffold' (fake fear). If No: The Snare is a true Mountain."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   6. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Laplace's Demon (Perfect Determinism)
 * Viability: The belief that better measurement would solve all chaos.
 * Suppression: Explicitly rejected by Lorenz; precision is an infinite 
 * "extraction" that can never be fulfilled.
 * * ALTERNATIVE 2: Purely Stochastic Modeling
 * Viability: Treating the weather as a random walk.
 * Suppression: Rejected because it ignores the "Rope" of deterministic 
 * physics that *does* allow for short-term coordination.
 * * CONCLUSION:
 * The presence of short-term "Rope" utility (Alternative 2 rejection) 
 * while facing long-term "Snare" limits (Alternative 1 rejection) defines 
 * the Lorenz constraint.
 */

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Load: ?- [lorenz_attractor_dynamics].
% Analyze: ?- constraint_indexing:multi_index_report(lorenz_attractor_dynamics).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: lowenheim_skolem_theorem
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Löwenheim (1915), Skolem (1920) / Model Theory
% ============================================================================

:- module(constraint_lowenheim_skolem_theorem, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: lowenheim_skolem_theorem
 * human_readable: Löwenheim-Skolem Theorem
 * domain: technological
 * temporal_scope: Permanent (Universal Law of Logic)
 * spatial_scope: Global (Formal Systems)
 * * SUMMARY:
 * The Löwenheim-Skolem theorem states that if a first-order theory has an infinite 
 * model, it has models of every infinite cardinality. This implies that first-order 
 * logic cannot "pin down" the size of an infinite structure; an uncountable 
 * theory like ZFC can be satisfied by a countable model (Skolem's Paradox).
 * * KEY AGENTS:
 * - The Analytical Observer: Viewing the inherent limits of formal languages.
 * - The Foundational Platonist: Seeking a unique, absolute "intended" model of mathematics.
 * - The Model Theorist: Using the relativity of models as a tool for mathematical construction.
 * * NARRATIVE ARC:
 * The theorem acts as a hard ceiling for the expressive power of first-order logic. 
 * While it provides a "Rope" for mathematicians to move between different infinite 
 * scales, it creates a foundational "Snare" for those who want their logic to 
 * uniquely describe a single, absolute mathematical reality.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% Required for structural extraction
narrative_ontology:interval(lowenheim_skolem_interval, 0, 10).
narrative_ontology:constraint_claim(lowenheim_skolem_theorem, mountain).

% Base extractiveness: 0.2 (Low)
% Rationale: It extracts "semantic uniqueness" or "absoluteness." 
% It doesn't steal resources, but it prevents a system from fully defining its own scale.
domain_priors:base_extractiveness(lowenheim_skolem_theorem, 0.2).

% Suppression: 0.4 (Moderate)
% Rationale: Alternatives like Second-Order Logic (which can be categorical) 
% exist but are suppressed in foundational mathematics due to the loss of 
% Completeness and Compactness.
domain_priors:suppression_score(lowenheim_skolem_theorem, 0.4).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(lowenheim_skolem_theorem, extractiveness, 0.2).
narrative_ontology:constraint_metric(lowenheim_skolem_theorem, suppression_requirement, 0.4).

% Enforcement: Emerges naturally from the nature of first-order satisfaction.
domain_priors:emerges_naturally(lowenheim_skolem_theorem).

% Metrics for Executive Summary
% BENEFICIARIES & VICTIMS
% Beneficiary: Model theorists who gain flexibility in model construction.
constraint_beneficiary(lowenheim_skolem_theorem, model_theorists).
% Victim: Mathematical absolutists who lose the ability to define a unique "True" universe.
constraint_victim(lowenheim_skolem_theorem, platonist_philosophers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE ANALYTICAL OBSERVER - Mountain
   --------------------------------------------------------------------------
   
   WHO: analytical - Observer of the laws of information.
   WHEN: civilizational - Viewing logic as a permanent substrate.
   WHERE: trapped - Logic cannot bypass its own syntactic constraints.
   SCOPE: global - Applies to all sufficiently powerful formal systems.
   
   WHY THIS CLASSIFICATION:
   To the observer, this is a Mountain. It is an unchangeable consequence of 
   how formal systems relate to their interpretations. There are no "choices" 
   here; the theorem is a fixed feature of the logical terrain.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    lowenheim_skolem_theorem,
    mountain,
    context(
        agent_power(analytical),
        time_horizon(civilizational),
        exit_options(trapped),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE MODEL THEORIST - Rope
   --------------------------------------------------------------------------
   
   WHO: institutional - Power to define and navigate meta-logical rules.
   WHEN: biographical - Accomplishing proofs within a career.
   WHERE: arbitrage - Can move between internal and external perspectives (Skolemization).
   SCOPE: national - Specific to the domain of mathematical proof.
   
   WHY THIS CLASSIFICATION:
   For the theorist, the theorem is a Rope. It is a coordination mechanism 
   that allows for "shrinking" or "expanding" models to study their properties. 
   It facilitates the transfer of results between different cardinalities.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    lowenheim_skolem_theorem,
    rope,
    context(
        agent_power(institutional),
        time_horizon(biographical),
        exit_options(arbitrage),
        spatial_scope(national)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE FOUNDATIONAL PLATONIST - Snare
   --------------------------------------------------------------------------
   
   WHO: powerless - Subject to the limits of first-order expression.
   WHEN: immediate - Today's search for an absolute foundation.
   WHERE: trapped - Stuck within the expressive limits of first-order ZFC.
   SCOPE: local - Immediate philosophical framework.
   
   WHY THIS CLASSIFICATION:
   To the Platonist, this is a Snare. They wish to describe the "one true 
   uncountable universe," but the theorem ensures that a countable "shadow" 
   of that universe always exists. Their desire for absoluteness is 
   systematically strangled by the relativity of cardinality.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    lowenheim_skolem_theorem,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :- !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(lowenheim_skolem_theorem_tests).

test(multi_perspective_variance) :-
    % Test that different perspectives yield different classifications
    constraint_indexing:constraint_classification(lowenheim_skolem_theorem, mountain, context(agent_power(analytical), _, _, _)),
    constraint_indexing:constraint_classification(lowenheim_skolem_theorem, rope, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(lowenheim_skolem_theorem, snare, context(agent_power(powerless), _, _, _)).

test(power_extractiveness_relativity) :-
    % Powerless Platonists feel the loss of absoluteness (extraction of truth value)
    ContextPowerless = context(powerless, immediate, trapped, local),
    ContextInstitutional = context(institutional, biographical, arbitrage, national),
    domain_priors:base_extractiveness(lowenheim_skolem_theorem, E),
    E > 0.0.

test(time_immutability_scale) :-
    % Long-term civilizational logic is a Mountain
    constraint_indexing:effective_immutability(civilizational, trapped, mountain).

:- end_tests(lowenheim_skolem_theorem_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-19
 * * KEY DECISIONS:
 * * 1. EXTRACTIVENESS SCORE (0.2):
 * Reasoning: This is a "semantic extraction." It extracts the possibility 
 * of absolute grounding. It is low because it doesn't cause physical 
 * suffering, but high enough to disrupt philosophical monism.
 * * 2. SUPPRESSION SCORE (0.4):
 * Reasoning: Second-order logic is the obvious alternative. It is suppressed 
 * in "standard" foundations (ZFC) because mathematicians value the 
 * Completeness Theorem (which second-order logic lacks).
 * * 3. PERSPECTIVE SELECTION:
 * The Analyst sees the Law (Mountain). The Theorist sees the Utility (Rope). 
 * The Platonist sees the Limitation (Snare).
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% Omega declaration
omega_variable(
    intended_model_existence,
    "Is there a privileged, intended model of set theory that our language simply fails to uniquely describe?",
    resolution_mechanism("Metaphysical commitment or discovery of higher-order categorical axioms"),
    impact("If Yes: Logic is a Snare hiding the Mountain. If No: Reality is fundamentally relative (Skolemism)."),
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Second-Order Logic
 * Viability: Allows for categorical theories where all infinite models 
 * are isomorphic (no Skolem's Paradox).
 * Suppression: Rejected because it is not "well-behaved" (Lacks 
 * Completeness and Compactness).
 * Evidence: Common in foundational literature discussing "Full Second Order Logic."
 * * CONCLUSION:
 * The existence of Second-Order logic as a suppressed alternative makes the 
 * Löwenheim-Skolem constraint a Snare for those who prioritize semantic 
 * uniqueness over syntactic completeness.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 1. Load: ?- [constraint_lowenheim_skolem_theorem].
 * 2. Multi-perspective: ?- multi_index_report(lowenheim_skolem_theorem).
 * 3. Run tests: ?- run_tests(lowenheim_skolem_theorem_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: lsd_microdosing_professional_openness
% ============================================================================
% Generated: 2026-01-23
% Model: Gemini Pro (Revised)
% Source: "Ergot on Rye" (citing Scott Alexander and psilocybin studies)
% ============================================================================

:- module(constraint_lsd_microdosing_professional_openness, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * 
 * constraint_id: lsd_microdosing_professional_openness
 * human_readable: The Permanent Openness Shift from Microdosing
 * domain: psychological/professional/biochemical
 * temporal_scope: Contemporary / 2026 Era
 * spatial_scope: Global (Corporate/Creative Labor Markets)
 * 
 * SUMMARY:
 * This constraint analyzes the professional application of LSD microdosing to increase 
 * the personality dimension of "Openness to Experience". In professional 
 * settings, this serves as a tool to become "more interesting" and gain 
 * "dividends" in creative roles. The core tension is whether this is a temporary
 * performance enhancer or a permanent, non-consensual personality restructuring.
 * 
 * KEY AGENTS:
 * - The Professional User (Individual Moderate): Utilizes microdosing for a competitive edge.
 * - The Trapped Subject (Individual Powerless): Experiences a permanent, unwanted personality change.
 * - The Regulator / FDA (Institutional): Faces the challenge of an uncontrollable, permanent drug effect.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

narrative_ontology:interval(lsd_microdosing_professional_openness, 0, 10).
narrative_ontology:constraint_claim(lsd_microdosing_professional_openness, tangled_rope).

% Base extractiveness score (0.4 = Moderate)
% Rationale: The practice extracts the user's "baseline" personality stability 
% to fuel professional "dividends". If permanent, it extracts future "consent"
% to return to the original self.
domain_priors:base_extractiveness(lsd_microdosing_professional_openness, 0.4).

% Suppression score (0.5 = Moderate)
% Rationale: Professional "sanity" and legal frameworks suppress the "madness"
% of psychedelics, even as microdosing trends attempt to normalize it.
domain_priors:suppression_score(lsd_microdosing_professional_openness, 0.5).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(lsd_microdosing_professional_openness, extractiveness, 0.4).
narrative_ontology:constraint_metric(lsd_microdosing_professional_openness, suppression_requirement, 0.5).

% Enforcement: Requires active individual maintenance (dosing).
domain_priors:requires_active_enforcement(lsd_microdosing_professional_openness).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(lsd_microdosing_professional_openness, the_user). % Gains a competitive edge
constraint_victim(lsd_microdosing_professional_openness, the_user). % Risks permanent personality change

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE COMPETITIVE WORKER - Rope
   --------------------------------------------------------------------------
   WHO: individual_moderate (Seeking dividends in society)
   WHEN: biographical (Advancing a career over decades)
   WHERE: mobile (Choosing to microdose for openness)
   
   WHY THIS CLASSIFICATION:
   For the professional, microdosing is a 'Rope'—a functional coordination 
   mechanism to expand their "Openness to Experience" and become a "more 
   interesting" player in a competitive market.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    lsd_microdosing_professional_openness,
    rope,
    context(
        agent_power(individual_moderate),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE TRAPPED SUBJECT (OMEGA = PERMANENT) - Snare
   --------------------------------------------------------------------------
   WHO: powerless (After the "permanent" shift has occurred)
   WHEN: civilizational (A stable shift that lasts a lifetime)
   WHERE: trapped (Cannot return to previous personality "standard")
   
   WHY THIS CLASSIFICATION:
   If the personality shift is permanent, the initial choice becomes a 'Snare'. 
   The agent is "terrified" to find their personality changed "without 
   their consent," with no "neutral ground" to return to the original self.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    lsd_microdosing_professional_openness,
    snare,
    context(
        agent_power(powerless),
        time_horizon(civilizational),
        exit_options(trapped),
        spatial_scope(local)
    )
).

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE REGULATOR (FDA) - Snare
   --------------------------------------------------------------------------
   WHO: institutional (Tasked with ensuring drug safety and efficacy)
   WHEN: historical (Across drug approval cycles)
   WHERE: constrained (Cannot approve a drug with uncontrollable, permanent effects)
   
   WHY THIS CLASSIFICATION:
   For a regulator, a substance that can cause large, permanent personality changes
   is a 'Snare'. The inability to predict or control the outcome, and the lack of a
   return to baseline, makes it impossible to approve under a standard medical
   framework. It strangles the approval process.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    lsd_microdosing_professional_openness,
    snare,
    context(
        agent_power(institutional),
        time_horizon(historical),
        exit_options(constrained),
        spatial_scope(national)
    )
).

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(lsd_microdosing_professional_openness_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(lsd_microdosing_professional_openness, Type1, context(agent_power(individual_moderate), _, _, _)),
    constraint_indexing:constraint_classification(lsd_microdosing_professional_openness, Type2, context(agent_power(powerless), _, _, _)),
    % Institutional view is also a Snare, but for different reasons.
    % We only need to check for 2+ distinct types.
    Type1 \= Type2.

:- end_tests(lsd_microdosing_professional_openness_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * 
 * Model: Gemini Pro (Revised)
 * Date: 2026-01-23
 * 
 * KEY DECISIONS:
 * 
 * 1. INSTITUTIONAL PERSPECTIVE: Replaced the ambiguous 'Psychiatrist' with the
 *    'Regulator/FDA'. This provides a clear institutional agent whose perspective
 *    is a 'Snare' for entirely different reasons than the individual's: one of
 *    control and predictability vs. personal identity.
 *
 * 2. CLASSIFICATION RATIONALE:
 *    - User (Rope): A tool for professional advantage.
 *    - Trapped Subject (Snare): An irreversible, non-consensual identity shift.
 *    - Regulator (Snare): An uncontrollable substance that cannot be approved.
 * 
 * 3. TANGLED ROPE: The overall constraint is a 'Tangled Rope' because the user
 *    is pulling on a 'Rope' for self-improvement that may retroactively become
 *    a 'Snare' if the effects are permanent and undesirable.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */
/**
 * OMEGA IDENTIFICATION
 *
 * The core uncertainty is whether the personality changes are permanent.
 */

omega_variable(
    hallucinogenic_personality_permanence,
    "Is the increase in Openness from psychedelics a temporary state (Rope) or a permanent restructuring of the adult ego (Snare/Mountain)?",
    resolution_mechanism("Longitudinal personality tracking of users 5+ years after cessation of use."),
    impact("If permanent: The Rope becomes a Snare. If temporary: It remains a state-management Rope."),
    confidence_without_resolution(high)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * 
 * ALTERNATIVE 1: Traditional professional development (The "Sober" Path)
 *    Viability: The default state of adult personality constancy.
 *    Suppression: Suppressed by a hyper-competitive society where "trying to be a little
 *    more interesting" is seen as necessary to "pay dividends".
 * 
 * CONCLUSION:
 * The Omega variable's resolution determines the nature of the constraint. If the
 * change is temporary, microdosing is just another 'Rope' in the toolkit of
 * self-improvement. If it's permanent, it's a 'Snare' masquerading as a Rope.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 
 * 1. Load: ?- [constraints/lsd_microdosing_professional_openness].
 * 2. Multi-perspective: ?- multi_index_report(lsd_microdosing_professional_openness).
 * 3. Run tests: ?- run_tests(lsd_microdosing_professional_openness_tests).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: lula_hemisphere_2026
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-28
% ============================================================================

:- module(constraint_lula_hemisphere_2026, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: lula_hemisphere_2026
 * human_readable: The Monroe Doctrine Revival (Unilateral US Hegemony)
 * domain: political
 * * SUMMARY:
 * This constraint models the revival of unilateral hegemonic power, as described by
 * Brazilian President Lula in response to a hypothetical 2026 US military intervention
 * in Venezuela. The action is framed as a violation of the sovereign equality of nations,
 * where "zones of influence" and unilateral force replace the collectively agreed-upon
 * rules of the UN Charter.
 * * KEY AGENTS:
 * - Venezuelan Civilians: Subjects (Powerless) experiencing the intervention as an overwhelming, unchangeable event.
 * - United States Government: Beneficiary (Institutional/Powerful) acting unilaterally to achieve strategic goals.
 * - President Lula of Brazil: Observer (Institutional) advocating for multipolarity and international law.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(lula_hemisphere_2026, 0.75). % Rationale: Military capture of a sovereign state's assets and political autonomy represents extreme extraction.
domain_priors:suppression_score(lula_hemisphere_2026, 0.85).   % Rationale: Unilateral military force explicitly suppresses all other alternatives, such as diplomacy or UN-led processes.
domain_priors:theater_ratio(lula_hemisphere_2026, 0.10).       % Rationale: The action is primarily functional (military force) rather than performative.

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(lula_hemisphere_2026, extractiveness, 0.75).
narrative_ontology:constraint_metric(lula_hemisphere_2026, suppression_requirement, 0.85).
narrative_ontology:constraint_metric(lula_hemisphere_2026, theater_ratio, 0.10).

% Constraint self-claim (what does the constraint claim to be?)
% The hegemonic power claims its action is a necessary enforcement of justice.
narrative_ontology:constraint_claim(lula_hemisphere_2026, enforcement).

% Binary flags
domain_priors:requires_active_enforcement(lula_hemisphere_2026). % The hegemony must be actively maintained by military presence.

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(lula_hemisphere_2026, hegemonic_powers).
narrative_ontology:constraint_victim(lula_hemisphere_2026, sovereign_nations).
narrative_ontology:constraint_victim(lula_hemisphere_2026, venezuelan_civilians).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (MOUNTAIN)
% For a Venezuelan civilian, the intervention is an overwhelming, inescapable force of nature.
% χ = 0.75 * 1.5 (powerless) * 1.0 (national) = 1.125. High extraction and suppression feel like a Mountain.
constraint_indexing:constraint_classification(lula_hemisphere_2026, mountain,
    context(agent_power(powerless),
            time_horizon(immediate),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% From the perspective of the US strategists executing the plan, it is a functional tool (Rope)
% to achieve strategic goals where multilateral systems have failed.
% χ = 0.75 * 0.6 (powerful) * 1.2 (global) = 0.54. Extraction is felt as moderate cost for strategic gain.
constraint_indexing:constraint_classification(lula_hemisphere_2026, rope,
    context(agent_power(powerful),
            time_horizon(biographical),
            exit_options(arbitrage),
            spatial_scope(global))).

% PERSPECTIVE 3: THE REGIONAL OBSERVER (SNARE)
% For President Lula, this is a coercive, extractive Snare that violates international law
% to serve hegemonic interests, trapping the region in a dependent relationship.
% χ = 0.75 * -0.2 (institutional) * 1.1 (continental) = -0.165. The negative extraction reflects
% the institutional cost and loss of stability for Brazil, classifying it as a predatory Snare.
constraint_indexing:constraint_classification(lula_hemisphere_2026, snare,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(constrained),
            spatial_scope(continental))).

% PERSPECTIVE 4: THE ANALYTICAL OBSERVER (SNARE)
% The analytical observer sees high base extraction (0.75) and high suppression (0.85),
% classifying it as a Snare by definition.
% χ = 0.75 * 1.15 (analytical) * 1.2 (global) = 1.035.
constraint_indexing:constraint_classification(lula_hemisphere_2026, snare,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(lula_hemisphere_2026_tests).

test(perspectival_gap_subject_beneficiary) :-
    constraint_indexing:constraint_classification(lula_hemisphere_2026, TypePowerless,
        context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(lula_hemisphere_2026, TypePowerful,
        context(agent_power(powerful), _, _, _)),
    TypePowerless == mountain,
    TypePowerful == rope,
    TypePowerless \= TypePowerful.

test(analytical_classification_is_snare) :-
    constraint_indexing:constraint_classification(lula_hemisphere_2026, TypeAnalytical,
        context(agent_power(analytical), _, _, _)),
    TypeAnalytical == snare.

test(snare_threshold_validation) :-
    narrative_ontology:constraint_metric(lula_hemisphere_2026, extractiveness, E),
    narrative_ontology:constraint_metric(lula_hemisphere_2026, suppression_requirement, S),
    E >= 0.46,
    S >= 0.60.

:- end_tests(lula_hemisphere_2026_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The scores reflect a clear case of hard power projection. Base extractiveness (0.75)
 * is high due to the seizure of national sovereignty and potential resources. Suppression
 * (0.85) is also high because unilateral military force is the ultimate suppressor of
 * alternative solutions like diplomacy.
 *
 * The Perspectival Gap is stark:
 * - The powerless civilian experiences this as a Mountain: an immutable, catastrophic event.
 * - The powerful hegemon sees it as a Rope: a tool for imposing order and achieving objectives.
 * - The neighboring institutional power (Lula) and the analytical observer see it for what
 *   the metrics compute: a predatory Snare that extracts value while coercively limiting options.
 *
 * MANDATROPHY ANALYSIS: [RESOLVED MANDATROPHY]
 * This case is a classic example of Mandatrophy resolution. A naive analysis might see the
 * hegemon's claim of "enforcing justice" and classify it as a broken Rope. However, the
 * extremely high base extraction and suppression scores, combined with the analytical
 * perspective, force the classification to Snare. This correctly identifies the action's
 * primary function as extractive and coercive, not coordinative, preventing mislabeling.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_lula_hemisphere_2026_1,
    'Was the US intervention primarily for human rights justice or for strategic resource extraction?',
    'Audit of captured president trial evidence vs. US corporate contracts signed in Venezuela post-capture.',
    'If Justice: the constraint is a failing Rope. If Extraction: the constraint is a predatory Snare.',
    confidence_without_resolution(medium)
).

omega_variable(
    omega_lula_hemisphere_2026_2,
    'Will Latin American states overcome ideological differences to resist hegemonic pressure as Lula hopes?',
    'Track voting alignment in OAS/UN and joint infrastructure project funding through 2027.',
    'If Unified: Regional agency creates a counter-Rope. If Divided: States remain trapped in the Snare.',
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing. The narrative is a snapshot in 2026,
% but the model uses a standard 0-10 interval for drift analysis.
narrative_ontology:interval(lula_hemisphere_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data for high-extraction constraint (E > 0.46).
% Models the escalation of hegemonic pressure over the interval leading to the intervention.

% Theater ratio over time (remains low, as actions are functional):
narrative_ontology:measurement(lula_hemisphere_2026_tr_t0, lula_hemisphere_2026, theater_ratio, 0, 0.05).
narrative_ontology:measurement(lula_hemisphere_2026_tr_t5, lula_hemisphere_2026, theater_ratio, 5, 0.08).
narrative_ontology:measurement(lula_hemisphere_2026_tr_t10, lula_hemisphere_2026, theater_ratio, 10, 0.10).

% Extraction over time (shows a sharp increase as diplomatic options fail and force is used):
narrative_ontology:measurement(lula_hemisphere_2026_ex_t0, lula_hemisphere_2026, base_extractiveness, 0, 0.30).
narrative_ontology:measurement(lula_hemisphere_2026_ex_t5, lula_hemisphere_2026, base_extractiveness, 5, 0.60).
narrative_ontology:measurement(lula_hemisphere_2026_ex_t10, lula_hemisphere_2026, base_extractiveness, 10, 0.75).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% This constraint is an act of pure coercion and extraction, not coordination.
% Therefore, no coordination_type is declared. No network relationships are
% specified in the source narrative.

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: lung_transplant_protocol
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-05-21
% ============================================================================

:- module(constraint_lung_transplant_protocol, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: lung_transplant_protocol
 * human_readable: Lung Transplant Allocation Protocol
 * domain: social
 * * SUMMARY:
 * The lung transplant protocol governs the allocation of scarce donor lungs to patients in need. It involves a complex set of criteria to determine recipient eligibility and priority. This story examines the constraint on access to this life-saving procedure, which functions as both a necessary coordination mechanism and a source of severe extraction for those deemed ineligible.
 * * KEY AGENTS:
 * - Patient: Subject (Powerless)
 * - Transplant Center: Beneficiary (Institutional)
 * - Bioethicist: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(lung_transplant_protocol, 0.55). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(lung_transplant_protocol, 0.70).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(lung_transplant_protocol, 0.20).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(lung_transplant_protocol, extractiveness, 0.55).
narrative_ontology:constraint_metric(lung_transplant_protocol, suppression_requirement, 0.70).
narrative_ontology:constraint_metric(lung_transplant_protocol, theater_ratio, 0.20).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(lung_transplant_protocol, coordination).

% Binary flags
% narrative_ontology:has_sunset_clause(lung_transplant_protocol).      % Mandatory if Scaffold
domain_priors:requires_active_enforcement(lung_transplant_protocol). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(lung_transplant_protocol, transplant_centers).
narrative_ontology:constraint_victim(lung_transplant_protocol, patients_in_need).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE/MOUNTAIN)
% High extraction felt as an immutable limit or predatory trap.
% NOTE: This may be upgraded to 'organized' power if a critical mass of victims exists.
constraint_indexing:constraint_classification(lung_transplant_protocol, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Viewed as essential infrastructure or coordination.
constraint_indexing:constraint_classification(lung_transplant_protocol, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER
% Default analytical context (civilizational/analytical/global).
% This perspective is used by the bridge to derive constraint_claim.
% The canonical classifier identifies this as Tangled Rope due to the presence of
% coordination (beneficiary), asymmetric extraction (victim), and enforcement.
constraint_indexing:constraint_classification(lung_transplant_protocol, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(lung_transplant_protocol_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(lung_transplant_protocol, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(lung_transplant_protocol, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(threshold_validation) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(lung_transplant_protocol, ExtMetricName, E),
    (E =< 0.15 ; E >= 0.46). % Ensures it's either low-extraction or high-extraction.

test(tangled_rope_prerequisites) :-
    % Verify that all structural requirements for a Tangled Rope are met.
    domain_priors:requires_active_enforcement(lung_transplant_protocol),
    narrative_ontology:constraint_beneficiary(lung_transplant_protocol, _),
    narrative_ontology:constraint_victim(lung_transplant_protocol, _).

:- end_tests(lung_transplant_protocol_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The Lung Transplant Protocol is a canonical Tangled Rope. While its primary purpose is coordination—matching scarce organs to recipients to maximize survival—it also creates severe, asymmetric extraction. Patients who do not meet the criteria are effectively denied a chance at life (high suppression, high extraction). Transplant centers benefit from maintaining standards that improve success rates, which contributes to their institutional reputation and funding. The patient feels trapped due to their powerlessness and the high barrier to exit (lack of alternatives), experiencing the protocol as a Snare. The institution sees it as a necessary triage mechanism, a Rope. The analytical view, accounting for both the coordination function and the enforced, asymmetric extraction, correctly classifies it as a Tangled Rope.
 * * MANDATROPHY ANALYSIS:
 * The Tangled Rope classification correctly identifies the system as having both a coordination function (organ allocation) and asymmetric extraction (denying access). This prevents misclassification as a pure Snare, which would ignore the life-saving coordination aspect, or a pure Rope, which would ignore the coercive denial of care to a vulnerable population. The `constraint_claim` of 'coordination' is key for the Boltzmann engine to detect the gap between the system's self-description and its extractive reality.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_lung_transplant_protocol,
    'Are the current allocation criteria the MOST effective and equitable given resource constraints, or do they contain hidden biases?',
    'Comparative analysis of different allocation algorithms and their real-world outcomes (survival rates, quality of life, equity across demographic groups).',
    'If TRUE: Current system is optimized. If FALSE: Alternative criteria could save more lives or distribute organs more equitably, revealing the current extraction as partially unnecessary.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(lung_transplant_protocol, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection (metric_substitution,
% extraction_accumulation) by providing measurements at multiple time points.
% Model how the constraint intensified or changed across the interval.
%
% Required for high-extraction constraints (base_extractiveness > 0.46).
% Use at least 3 time points (T=0, midpoint, T=end) for each tracked metric.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(lung_transplant_protocol_tr_t0, lung_transplant_protocol, theater_ratio, 0, 0.10).
narrative_ontology:measurement(lung_transplant_protocol_tr_t5, lung_transplant_protocol, theater_ratio, 5, 0.15).
narrative_ontology:measurement(lung_transplant_protocol_tr_t10, lung_transplant_protocol, theater_ratio, 10, 0.20).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(lung_transplant_protocol_ex_t0, lung_transplant_protocol, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(lung_transplant_protocol_ex_t5, lung_transplant_protocol, base_extractiveness, 5, 0.52).
narrative_ontology:measurement(lung_transplant_protocol_ex_t10, lung_transplant_protocol, base_extractiveness, 10, 0.55).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% Valid types: information_standard, resource_allocation,
%              enforcement_mechanism, global_infrastructure
narrative_ontology:coordination_type(lung_transplant_protocol, resource_allocation).

% Boltzmann floor override (only if domain knowledge justifies)
% Value must be in [0.0, 1.0]
% narrative_ontology:boltzmann_floor_override(lung_transplant_protocol, Value).

% Network relationships (structural influence edges)
% Declare when constraints share regulatory domain, causal dependency,
% or institutional coupling.
% narrative_ontology:affects_constraint(lung_transplant_protocol, other_constraint_id).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */