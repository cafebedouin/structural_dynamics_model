% ============================================================================
% CONSTRAINT STORY: omelet_perfection_complexity
% ============================================================================
% Generated: 2026-01-21
% Model: Gemini 2.0 Flash
% Source: "Omelets, Perfection & Life" from cafebedouin.org
% ============================================================================

:- module(constraint_omelet_perfection_complexity, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: omelet_perfection_complexity
 * human_readable: The French Omelet Paradox (Chasing Perfection)
 * domain: social/psychological
 * temporal_scope: Perennial / Biographical
 * spatial_scope: Local (The Kitchen)
 * * SUMMARY:
 * This constraint explores the hidden complexity within seemingly simple tasks, using the 
 * classic French omelet as a proxy for life. It identifies that 
 * "simple things" only appear simple when one stops asking the right questions, 
 * revealing a "frustratingly, world-openingly complex" reality once technique is applied.
 * * KEY AGENTS:
 * - The Obsessive (Francis Lam): One who "chases perfection" and recognizes the 
 * depth of trivial tasks.
 * - The Layperson: A "rational person" who views the task as a "no-brainer" 
 * and settles for simple, often mediocre answers.
 * - The Chef (Skibitcky): The institutional authority who holds the "brain" 
 * of the student, enforcing the rigid laws of technique.
 * * NARRATIVE ARC:
 * An agent starts with a "no-brainer" view of a task but becomes "obsessed" upon 
 * discovering the importance of technique (heat, curds, "fudge factors"). 
 * This creates a cycle where the "Rope" of technique leads to a "Mountain" of 
 * complexity, eventually providing a "Rope" for general life-wisdom.
 */

/* ==========================================================================
   2. BASE PROPERTIES (Context-Independent)
   ========================================================================== */

% Required for [STEP 1] and [STEP 2] of the DR-Audit Suite
narrative_ontology:interval(omelet_perfection_interval, 0, 10).
narrative_ontology:constraint_claim([omelet_perfection_complexity], [skill_acquisition]).

% Base extractiveness score (0.0 = no extraction, 1.0 = full extraction)
% Rationale: Low (0.25). While the "obsession" extracts time and energy, the 
% result is "always a really tasty egg dish" that is better than the alternative.
domain_priors:base_extractiveness(omelet_perfection_complexity, 0.25).

% Suppression score (0.0 = no suppression, 1.0 = full suppression)
% Rationale: Moderate (0.45). The "simple answer" suppresses the 
% "world-openingly complex" one until the subject starts asking questions.
domain_priors:suppression_score(omelet_perfection_complexity, 0.45).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(omelet_perfection_complexity, extractiveness, 0.25).
narrative_ontology:constraint_metric(omelet_perfection_complexity, suppression_requirement, 0.45).

% Enforcement requirements
% Mastery of the curds and roll "requires active enforcement" of technique.
domain_priors:requires_active_enforcement(omelet_perfection_complexity).

% Metrics required for Section 1 of the Executive Summary
% BENEFICIARIES & VICTIMS
constraint_beneficiary(omelet_perfection_complexity, complex_wisdom). % "World-opening" insight
constraint_victim(omelet_perfection_complexity, simple_answer). % Mediocre, un-questioned existence

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE OBSESSIVE PRACTITIONER - Rope
   --------------------------------------------------------------------------
   
   WHO: individual_moderate (Has agency to chase perfection and adjust technique)
   WHEN: biographical (Years of trying to make the "perfect omelet")
   WHERE: mobile (Uses "Boursin" or "low heat" to navigate difficulty)
   SCOPE: local (The personal kitchen)
   
   WHY THIS CLASSIFICATION:
   For the practitioner, the omelet technique is a "Rope"—a tool for coordination and 
   self-growth. It is a means to learn the "vital lesson" that things 
   are only simple when you stop seeing them clearly.
   
   NARRATIVE EVIDENCE:
   "enough to keep reteaching me this vital lesson... what you find... is that 
   even simple things can be wonderfully... complex".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    omelet_perfection_complexity,
    rope,
    context(
        agent_power(individual_moderate),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(local)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE UNAWARE LAYPERSON - Snare
   --------------------------------------------------------------------------
   
   WHO: powerless (Trapped by a "no-brainer" mindset)
   WHEN: immediate (The moment of throwing eggs in a pan)
   WHERE: trapped (Lacks the questions to see the hidden complexity)
   SCOPE: local
   
   WHY THIS CLASSIFICATION:
   For the layperson, the "simple" view is a "Snare." It strangles the potential for 
   quality, leaving them to settle for the 90% of mediocrity they've "eaten in 
   [their] life" without realizing there is a "difference".
   
   NARRATIVE EVIDENCE:
   "I, like every other rational person, thought an omelet was something anyone 
   can make... No-brainer".
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    omelet_perfection_complexity,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :-
    domain_priors:suppression_score(omelet_perfection_complexity, S),
    S > 0.4,
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE MASTER CHEF - Mountain
   --------------------------------------------------------------------------
   
   WHO: institutional (Rules of the classic French tradition)
   WHEN: historical (The enduring standard of culinary "perfection")
   WHERE: analytical (The "right questions" and "good technique")
   SCOPE: global (A universal culinary standard)
   
   WHY THIS CLASSIFICATION:
   To the Chef, the requirements of the omelet are a "Mountain"—an unchangeable 
   standard of technique where curds, heat, and "rolling" are zero-degree-of-freedom 
   realities.
   
   NARRATIVE EVIDENCE:
   "Before Chef Skibitcky got ahold of my brain... it turns out it is pretty 
   hard and the key is having good technique".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    omelet_perfection_complexity,
    mountain,
    context(
        agent_power(institutional),
        time_horizon(historical),
        exit_options(analytical),
        spatial_scope(global)
    )
) :- !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(omelet_perfection_complexity_tests).

test(multi_perspective_omelet) :-
    % Obsessive sees Rope
    constraint_indexing:constraint_classification(omelet_perfection_complexity, T1, context(individual_moderate, biographical, mobile, local)),
    % Layperson sees Snare
    constraint_indexing:constraint_classification(omelet_perfection_complexity, T2, context(powerless, immediate, trapped, local)),
    % Chef sees Mountain
    constraint_indexing:constraint_classification(omelet_perfection_complexity, T3, context(institutional, historical, analytical, global)),
    T1 \= T2, T2 \= T3.

test(complexity_suppression_insight) :-
    % Suppression prevents the layperson from seeing the world-opening complexity
    domain_priors:suppression_score(omelet_perfection_complexity, S),
    S > 0.4.

:- end_tests(omelet_perfection_complexity_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-21
 * * KEY DECISIONS:
 * 1. EXTRACTIVENESS SCORE (0.25):
 * Reasoning: Low extraction because the "failures" are still highly valuable/tasty 
 * compared to the baseline life of the unobsessed.
 * 2. PERSPECTIVE SELECTION:
 * The contrast between the "No-brainer" (Snare) and the "World-opening" (Rope) 
 * mirrors the text's shift from rational person to obsessed practitioner.
 * 3. MANDATROPHY STATUS:
 * [RESOLVED MANDATROPHY]. While obsession can be extractive, the benefit 
 * (reteaching vital lessons) justifies the coordination effort for the 
 * biographical agent.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omelet_perfection_definition,
    "Is 'perfection' an objective Mountain of culinary physics or a 
     subjective Rope of narrative storytelling?",
    resolution_mechanism("Comparison of 'perfect' omelets across divergent cultures and chemical analyses of curds"),
    impact("If Mountain: Technique is a law. If Rope: Technique is a ritual."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: The Scramble
 * Viability: A valid "mistake" that is still tasty.
 * Suppression: Shunted as "settling" compared to the French classic.
 * * ALTERNATIVE 2: The "French Velveeta" (Boursin)
 * Viability: A "fudge factor" for the unobsessed.
 * Suppression: Initially shunted by "skeptical" traditionalists but accepted 
 * as a Rope for the lay person.
 * * CONCLUSION:
 * The existence of tasty "mistakes" makes the "perfection" a Rope of choice 
 * rather than a lethal Snare.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

% Load into system: ?- [constraint_omelet_perfection_complexity].

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: open_source_commons
% ============================================================================
:- module(constraint_genuine_community, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    narrative_ontology:interval/3,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:measurement/5,
    constraint_indexing:constraint_classification/3.

/* 1. NARRATIVE CONTEXT */
/**
 * constraint_id: open_source_commons
 * human_readable: The Mutual Garden
 * domain: social/technological
 * SUMMARY: A high-trust coordination environment where value is shared. 
 * KEY AGENTS: Contributor (Powerless/Mobile), The Project (Institutional/Beneficiary).
 */

/* 2. BASE PROPERTIES */
domain_priors:base_extractiveness(open_source_commons, 0.05). % Near Mountain-low extraction
domain_priors:suppression_score(open_source_commons, 0.10).   % High exit options
domain_priors:theater_ratio(open_source_commons, 0.15).       % Low performativity

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(open_source_commons, extractiveness, 0.05).
narrative_ontology:constraint_metric(open_source_commons, suppression_requirement, 0.1).
narrative_ontology:constraint_metric(open_source_commons, theater_ratio, 0.15).

/* 3. INDEXED CLASSIFICATIONS */
% PERSPECTIVE 1: THE CONTRIBUTOR (ROPE)
constraint_indexing:constraint_classification(open_source_commons, rope, 
    context(agent_power(powerless), 
            time_horizon(biographical), 
            exit_options(mobile), 
            spatial_scope(global))).

/* 5. GENERATIVE COMMENTARY */
/**
 * LOGIC RATIONALE: 
 * This is a "Pure Rope." Because extraction is near zero and theater is low, 
 * the Subject and Beneficiary agree on the classification. There is no 
 * Perspectival Gap because the constraint serves the agent as much as the group.
 */

/* 7. INTEGRATION HOOKS */
narrative_ontology:interval(open_source_commons, 0, 10).

/* 8. TEMPORAL DATA (Flat line, no drift) */
narrative_ontology:measurement(osc_tr_t0, open_source_commons, theater_ratio, 0, 0.15).
narrative_ontology:measurement(osc_tr_t10, open_source_commons, theater_ratio, 10, 0.15).
narrative_ontology:measurement(osc_ex_t0, open_source_commons, base_extractiveness, 0, 0.05).
narrative_ontology:measurement(osc_ex_t10, open_source_commons, base_extractiveness, 10, 0.05).
% ============================================================================
% CONSTRAINT STORY: openai_api_access
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2024-02-29
% ============================================================================

:- module(constraint_openai_api_access, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: openai_api_access
 * human_readable: OpenAI API Access Controls
 * domain: technological/economic
 * * SUMMARY:
 * OpenAI controls access to its API, creating a constraint on developers and users who depend on it. This access is granted based on usage policies and payment. Violations can result in access revocation.
 * * KEY AGENTS:
 * - Developer: Subject (Powerless)
 * - OpenAI: Beneficiary (Institutional)
 * - Regulator: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(openai_api_access, 0.55). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(openai_api_access, 0.70).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(openai_api_access, 0.10).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(openai_api_access, extractiveness, 0.55).
narrative_ontology:constraint_metric(openai_api_access, suppression_requirement, 0.70).
narrative_ontology:constraint_metric(openai_api_access, theater_ratio, 0.10).

% Binary flags
% narrative_ontology:has_sunset_clause(openai_api_access).      % Mandatory if Scaffold
% domain_priors:requires_active_enforcement(openai_api_access). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(openai_api_access, openai).
narrative_ontology:constraint_victim(openai_api_access, developers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE/MOUNTAIN)
% High extraction felt as an immutable limit or predatory trap.
% NOTE: This may be upgraded to 'organized' power if a critical mass of victims exists.
%
% UNIFORM-TYPE EXCEPTION: For natural law constraints (mountain-only) or pure
% coordination constraints (rope-only), perspectives 1 and 2 may use any power
% atoms — the classification is the same from all perspectives.  Include at
% least 2-3 perspectives to demonstrate the invariance.
constraint_indexing:constraint_classification(openai_api_access, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(global))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Viewed as essential infrastructure or coordination.
constraint_indexing:constraint_classification(openai_api_access, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER
% Default analytical context (civilizational/analytical/global).
% This perspective is used by the bridge to derive constraint_claim.
% Type should reflect what the metrics compute: mountain, rope, tangled_rope, snare, scaffold, or piton.
constraint_indexing:constraint_classification(openai_api_access, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(openai_api_access_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(openai_api_access, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(openai_api_access, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(threshold_validation) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(openai_api_access, ExtMetricName, E),
    (E =< 0.05 -> true ; E >= 0.46). % Ensures it's either a Mountain or high-extraction Snare/Tangled.

:- end_tests(openai_api_access_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The developer views the API access as a snare because they are heavily dependent on it and subject to OpenAI's policies, which can be changed. OpenAI sees it as a rope because they provide a valuable service and need to control access for quality and safety.
 * The analytical observer sees it as a tangled rope because while the API does coordinate the development of AI applications, OpenAI extracts value and maintains control. The requires_active_enforcement is implied as OpenAI actively monitors and enforces its usage policies.
 * * MANDATROPHY ANALYSIS:
 * The Tangled Rope classification prevents mislabeling as pure extraction because the API provides real coordination value (a platform for developers). It's not *just* a way for OpenAI to extract rents. Without the coordination check, the system could over-attribute negative motivations.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_openai_api_access,
    'Will OpenAI maintain a reasonable balance between control and accessibility, or will extraction dominate?',
    'Tracking policy changes and developer sentiment over time.',
    'If extraction dominates, developer innovation will be stifled. If balance is maintained, the ecosystem will thrive.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(openai_api_access, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection (metric_substitution,
% extraction_accumulation) by providing measurements at multiple time points.
% Model how the constraint intensified or changed across the interval.
%
% Required for high-extraction constraints (base_extractiveness > 0.46).
% Use at least 3 time points (T=0, midpoint, T=end) for each tracked metric.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(openai_api_access_tr_t0, openai_api_access, theater_ratio, 0, 0.05).
narrative_ontology:measurement(openai_api_access_tr_t5, openai_api_access, theater_ratio, 5, 0.10).
narrative_ontology:measurement(openai_api_access_tr_t10, openai_api_access, theater_ratio, 10, 0.10).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(openai_api_access_ex_t0, openai_api_access, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(openai_api_access_ex_t5, openai_api_access, base_extractiveness, 5, 0.55).
narrative_ontology:measurement(openai_api_access_ex_t10, openai_api_access, base_extractiveness, 10, 0.55).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: openai_codex_app_constraint
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2024-02-29
% ============================================================================

:- module(constraint_openai_codex_app_constraint, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: openai_codex_app_constraint
 * human_readable: Algorithmic Dependency
 * domain: technological
 * * SUMMARY:
 * The OpenAI Codex app enables AI agent development, but its control by a single entity (OpenAI) creates a dependency constraint. Developers become reliant on the app's continued availability, pricing, and feature set, potentially limiting their autonomy and innovation.
 * * KEY AGENTS:
 * - Developer: Subject (Powerless)
 * - OpenAI: Beneficiary (Institutional)
 * - Independent AI Ethics Auditor: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(openai_codex_app_constraint, 0.55). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(openai_codex_app_constraint, 0.70).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(openai_codex_app_constraint, 0.20).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(openai_codex_app_constraint, extractiveness, 0.55).
narrative_ontology:constraint_metric(openai_codex_app_constraint, suppression_requirement, 0.70).
narrative_ontology:constraint_metric(openai_codex_app_constraint, theater_ratio, 0.20).

% Binary flags
% narrative_ontology:has_sunset_clause(openai_codex_app_constraint).      % Mandatory if Scaffold
% domain_priors:requires_active_enforcement(openai_codex_app_constraint). % Required for Tangled Rope

narrative_ontology:constraint_beneficiary(openai_codex_app_constraint, openai).
narrative_ontology:constraint_victim(openai_codex_app_constraint, developers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE/MOUNTAIN)
% High extraction felt as an immutable limit or predatory trap.
% NOTE: This may be upgraded to 'organized' power if a critical mass of victims exists.
%
% UNIFORM-TYPE EXCEPTION: For natural law constraints (mountain-only) or pure
% coordination constraints (rope-only), perspectives 1 and 2 may use any power
% atoms — the classification is the same from all perspectives.  Include at
% least 2-3 perspectives to demonstrate the invariance.
constraint_indexing:constraint_classification(openai_codex_app_constraint, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(global))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Viewed as essential infrastructure or coordination.
constraint_indexing:constraint_classification(openai_codex_app_constraint, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER
% Default analytical context (civilizational/analytical/global).
% This perspective is used by the bridge to derive constraint_claim.
% Type should reflect what the metrics compute: mountain, rope, tangled_rope, snare, scaffold, or piton.
constraint_indexing:constraint_classification(openai_codex_app_constraint, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(openai_codex_app_constraint_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(openai_codex_app_constraint, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(openai_codex_app_constraint, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(threshold_validation) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(openai_codex_app_constraint, ExtMetricName, E),
    (E =< 0.05 -> true ; E >= 0.46). % Ensures it's either a Mountain or high-extraction Snare/Tangled.

:- end_tests(openai_codex_app_constraint_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * I assigned a base extractiveness of 0.55 and suppression of 0.70 because developers are heavily reliant on Codex, limiting their options. A powerless developer perceives this as a Snare. OpenAI, as an institutional actor, views it as a Rope (essential service). An analytical observer recognizes the dual nature: OpenAI offers a valuable service, but the dependency creates asymmetric extraction. The perspectival gap arises from the unequal distribution of power and exit options. Developers are locked in, while OpenAI has more flexibility.
 * * MANDATROPHY ANALYSIS:
 * The Tangled Rope classification prevents mislabeling this as pure extraction (Snare) because OpenAI provides a genuine coordination function (AI agent development platform). The key is that it also extracts value through platform lock-in and control. If OpenAI ceases active support of Codex or it is functionally replaced, the classification would shift toward Piton.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_openai_codex_app_constraint,
    'Will open-source alternatives sufficiently mitigate developer lock-in?',
    'Monitor the adoption rate and capabilities of competing open-source AI agent development tools.',
    'If True: Dependency becomes less of a Snare. If False: Dependency remains a significant constraint.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(openai_codex_app_constraint, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection (metric_substitution,
% extraction_accumulation) by providing measurements at multiple time points.
% Model how the constraint intensified or changed across the interval.
%
% Required for high-extraction constraints (base_extractiveness > 0.46).
% Use at least 3 time points (T=0, midpoint, T=end) for each tracked metric.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(openai_codex_app_constraint_tr_t0, openai_codex_app_constraint, theater_ratio, 0, 0.10).
narrative_ontology:measurement(openai_codex_app_constraint_tr_t5, openai_codex_app_constraint, theater_ratio, 5, 0.20).
narrative_ontology:measurement(openai_codex_app_constraint_tr_t10, openai_codex_app_constraint, theater_ratio, 10, 0.20).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(openai_codex_app_constraint_ex_t0, openai_codex_app_constraint, base_extractiveness, 0, 0.40).
narrative_ontology:measurement(openai_codex_app_constraint_ex_t5, openai_codex_app_constraint, base_extractiveness, 5, 0.50).
narrative_ontology:measurement(openai_codex_app_constraint_ex_t10, openai_codex_app_constraint, base_extractiveness, 10, 0.55).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: openbsd_netiquette_protocol
% ============================================================================
% Generated: 2026-01-21
% Model: Gemini 2.0 Flash
% Source: "OpenBSD’s Guide to Netiquette" by cafebedouin.org
% ============================================================================

:- module(constraint_openbsd_netiquette_protocol, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:constraint_metric/3,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: openbsd_netiquette_protocol
 * human_readable: OpenBSD Netiquette Protocol
 * domain: technological/social
 * temporal_scope: Contemporary / Digital Era
 * spatial_scope: Global / Online Mailing Lists
 * * SUMMARY:
 * This constraint represents a distillation of rigorous online communication standards, 
 * originally for OpenBSD mailing lists, that prioritize content clarity and technical 
 * preparation over formatting and social convenience. It mandates that 
 * contributors "do their homework" and strip away formatting distractions to move 
 * discussions forward efficiently.
 * * KEY AGENTS:
 * - The Contributor: The individual seeking to join the discussion who must 
 * adhere to strict "plain text" and "homework" requirements.
 * - The Community Maintainer: The institutional authority that enforces topic 
 * relevance and "homework" status.
 * - The Newcomer (Novice): An agent who risks social liquidation (being ignored 
 * or rebuked) if they fail to provide relevant information.
 * * NARRATIVE ARC:
 * Communication is framed as a functional "battle" for clarity. The 
 * protocol acts as a "Rope" for the community to coordinate technical progress 
 * but functions as a "Snare" for those who attempt to "vent" or "be lazy" 
 * without preparation.
 */

/* ==========================================================================
   2. CORE SYSTEM INTEGRATION (The "Reality" Layer)
   ========================================================================== */

% The Structural Anchor
narrative_ontology:interval(openbsd_netiquette_protocol, 0, 10).
narrative_ontology:constraint_claim([openbsd_netiquette_protocol], [informational_governance]).

% Base extractiveness score (0.0 = no extraction, 1.0 = full extraction)
% Rationale: Moderate-Low (0.3). It extracts a "homework tax" from the user 
% to preserve the collective bandwidth of the group.
domain_priors:base_extractiveness(openbsd_netiquette_protocol, 0.3).

% Suppression score (0.0-1.0)
% Rationale: Moderate-High (0.6). It explicitly suppresses rich-text formatting, 
% off-topic banter, and "irrelevant signatures" to focus on content.
domain_priors:suppression_score(openbsd_netiquette_protocol, 0.6).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(openbsd_netiquette_protocol, extractiveness, 0.3).
narrative_ontology:constraint_metric(openbsd_netiquette_protocol, suppression_requirement, 0.6).

% Enforcement requirements
% Requires active enforcement by the mailing list moderators and community.
domain_priors:requires_active_enforcement(openbsd_netiquette_protocol).

% BENEFICIARIES & VICTIMS
constraint_beneficiary(openbsd_netiquette_protocol, technical_clarity). % The goal of the discussion
constraint_victim(openbsd_netiquette_protocol, casual_expression). % Those who prefer "lazy" or formatted chat

% Metrics required for Section 1 of the Executive Summary
/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE PREPARED CONTRIBUTOR - Rope
   --------------------------------------------------------------------------
   
   WHO: individual_moderate (Has the agency to "do homework" and format text)
   WHEN: biographical (Long-term career/participation in technical communities)
   WHERE: mobile (Can navigate across different technical lists)
   SCOPE: global (Applies to "any kind of communication and for life")
   
   WHY THIS CLASSIFICATION:
   For the disciplined user, the protocol is a "Rope"—a functional coordination 
   mechanism that ensures their "important information" is received and respected 
   without "formatting getting in the way".
   
   NARRATIVE EVIDENCE:
   "It’s good advice for any kind of communication and for life... Help others 
   to understand".
   -------------------------------------------------------------------------- */



constraint_indexing:constraint_classification(
    openbsd_netiquette_protocol,
    rope,
    context(
        agent_power(individual_moderate),
        time_horizon(biographical),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE UNPREPARED NOVICE - Snare
   --------------------------------------------------------------------------
   
   WHO: powerless (Target of "homework" enforcement)
   WHEN: immediate (Short-term failure to get a response/help)
   WHERE: trapped (Bounded by the "standard of doing" required by the list)
   SCOPE: local (The specific mailing list interaction)
   
   WHY THIS CLASSIFICATION:
   For the person who hasn't "done their homework," the protocol is a "Snare." 
   The community's "standard of excellence" extracts their social standing and 
   strangles their request if it doesn't meet the "plain text" or "useful 
   subject" criteria.
   
   NARRATIVE EVIDENCE:
   "Do your homework before writing... Include important information... Trim out 
   anything that does not move the discussion forward".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    openbsd_netiquette_protocol,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(local)
    )
) :-
    domain_priors:base_extractiveness(openbsd_netiquette_protocol, E),
    E > 0.2,
    !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE TECHNICAL MAINTAINER - Mountain
   --------------------------------------------------------------------------
   
   WHO: institutional (Rule-making power over the mailing list page)
   WHEN: civilizational (The enduring "physics" of technical discourse)
   WHERE: analytical (Observer of what "moves the discussion forward")
   SCOPE: global (Standards for "communicating online")
   
   WHY THIS CLASSIFICATION:
   To the maintainer, netiquette is a "Mountain"—an unchangeable natural law of 
   productive communities. Without these fixed "physics" (staying on topic, 
   respecting differences), the system would collapse into "nonsense".
   
   NARRATIVE EVIDENCE:
   "Using only plain text is extreme... But, the idea that formatting should 
   not get in the way of content is good".
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    openbsd_netiquette_protocol,
    mountain,
    context(
        agent_power(institutional),
        time_horizon(civilizational),
        exit_options(analytical),
        spatial_scope(global)
    )
) :- !.

/* ==========================================================================
   4. TESTS (What We Learn About Constraints)
   ========================================================================== */

:- begin_tests(openbsd_netiquette_protocol_tests).

test(multi_perspective_netiquette) :-
    % Contributor (Moderate) sees Rope
    constraint_indexing:constraint_classification(openbsd_netiquette_protocol, Type1, context(individual_moderate, biographical, mobile, global)),
    % Novice (Powerless) sees Snare
    constraint_indexing:constraint_classification(openbsd_netiquette_protocol, Type2, context(powerless, immediate, trapped, local)),
    % Maintainer (Institutional) sees Mountain
    constraint_indexing:constraint_classification(openbsd_netiquette_protocol, Type3, context(institutional, civilizational, analytical, global)),
    Type1 \= Type2,
    Type2 \= Type3.

test(power_extractiveness_netiquette) :-
    % Shows that the unprepared (powerless) experience higher extraction of time/social standing
    ContextPowerless = context(powerless, immediate, trapped, local),
    ContextModerate = context(individual_moderate, biographical, mobile, global),
    constraint_indexing:extractiveness_for_agent(openbsd_netiquette_protocol, ContextPowerless, E1),
    constraint_indexing:extractiveness_for_agent(openbsd_netiquette_protocol, ContextModerate, E2),
    E1 > E2.

test(time_immutability_homework) :-
    % In the immediate horizon, "doing homework" is an unchangeable Mountain (fact)
    constraint_indexing:effective_immutability(immediate, trapped, mountain).

:- end_tests(openbsd_netiquette_protocol_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * Date: 2026-01-21
 * * KEY DECISIONS:
 * * 1. EXTRACTIVENESS SCORE (0.3):
 * Reasoning: I chose a moderate-low score because while the protocol 
 * extracts "homework" labor, it is presented as a beneficial tool for 
 * clarity. 
 * * 2. PERSPECTIVE SELECTION:
 * Contrasted the Contributor (Rope) who gains clarity, with the Novice 
 * (Snare) who is "trapped" by the expectation of preparation.
 * * 3. CLASSIFICATION RATIONALE:
 * Maintainer -> Mountain: The source frames the rules as "excellent" 
 * distillations of necessary reality.
 * * 4. AMBIGUITIES:
 * The text notes plain text is "extreme outside of email" but still 
 * "good advice". I resolved this by keeping the scope 
 * biographical/global for the general advice but local/trapped for 
 * the specific enforcement.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    netiquette_barrier_intent,
    "Is the 'homework' requirement a functional necessity for clarity (Mountain) or an elitist tool for gatekeeping/exclusion (Snare)?",
    resolution_mechanism("Audit of community growth vs. problem-resolution speed in 'high-homework' vs 'low-homework' lists"),
    impact("If necessity: Technical Mountain. If gatekeeping: Social Snare."),
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Modern "Sanitized" UI / Rich Text
 * Viability: Standard in 95% of digital communication.
 * Suppression: Explicitly rejected by OpenBSD as "getting in the way of content".
 * * ALTERNATIVE 2: Unfiltered Social Ventilation (Chaos)
 * Viability: Common in casual groups.
 * Suppression: Rejected in favor of "moving the discussion forward".
 * * CONCLUSION:
 * The existence of Alternative 1 (Rich Text) makes the OpenBSD protocol a 
 * definitive "Rope" for technical coordination, as it rejects the 
 * "Snare" of visual clutter in favor of informational speed.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

% Load: ?- [constraint_openbsd_netiquette_protocol].
% Multi-perspective: ?- constraint_indexing:multi_index_report(openbsd_netiquette_protocol).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: openclaw_regulation
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-05-21
% ============================================================================

:- module(constraint_openclaw_regulation, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: openclaw_regulation
 * human_readable: Regulation of Autonomous AI Assistant OpenClaw
 * domain: technological
 * * SUMMARY:
 * The emergence of OpenClaw, a viral AI assistant with autonomous capabilities, necessitates regulatory frameworks to address potential misuse and security risks. These regulations aim to balance innovation with safeguards against unintended consequences and malicious exploitation.
 * * KEY AGENTS:
 * - Users: Subject (Powerless)
 * - Regulators/Developers: Beneficiary (Institutional)
 * - Analyst: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(openclaw_regulation, 0.55). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(openclaw_regulation, 0.70).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(openclaw_regulation, 0.30).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(openclaw_regulation, extractiveness, 0.55).
narrative_ontology:constraint_metric(openclaw_regulation, suppression_requirement, 0.70).
narrative_ontology:constraint_metric(openclaw_regulation, theater_ratio, 0.30).

% Constraint self-claim (what does the constraint claim to be?)
% Values: natural_law, coordination, constructed, enforcement
narrative_ontology:constraint_claim(openclaw_regulation, coordination).

% Binary flags
% narrative_ontology:has_sunset_clause(openclaw_regulation).      % Mandatory if Scaffold
domain_priors:requires_active_enforcement(openclaw_regulation). % Required for Tangled Rope

% Structural property derivation hooks:
%   has_coordination_function/1 is DERIVED from constraint_beneficiary/2
%   has_asymmetric_extraction/1 is DERIVED from constraint_victim/2
% Both are required for Tangled Rope. Coordination is also required for Scaffold.
narrative_ontology:constraint_beneficiary(openclaw_regulation, developers_regulators).
narrative_ontology:constraint_victim(openclaw_regulation, users).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% High extraction felt as an immutable limit or predatory trap.
% χ = 0.55 * 1.5 (powerless) * 1.0 (national) = 0.825. This is a clear Snare.
constraint_indexing:constraint_classification(openclaw_regulation, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Viewed as essential infrastructure or coordination.
% χ = 0.55 * -0.2 (institutional) * 1.0 (national) = -0.11. Negative extraction is felt as a pure benefit. Rope.
constraint_indexing:constraint_classification(openclaw_regulation, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED_ROPE)
% Default analytical context (civilizational/analytical/global).
% χ = 0.55 * 1.15 (analytical) * 1.2 (global) = 0.759. High extraction.
% The system has beneficiaries, victims, and requires enforcement, meeting all criteria for a Tangled Rope.
constraint_indexing:constraint_classification(openclaw_regulation, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(openclaw_regulation_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(openclaw_regulation, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(openclaw_regulation, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(threshold_validation) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(openclaw_regulation, ExtMetricName, E),
    (E =< 0.15 -> false ; E >= 0.46). % Ensures it's a high-extraction Snare/Tangled, not a Rope or Mountain.

:- end_tests(openclaw_regulation_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The OpenClaw regulation is a canonical Tangled Rope. It has a genuine coordination function (benefiting developers and regulators by creating a stable, predictable market and mitigating systemic risk) while simultaneously imposing high costs and restrictions on end-users (asymmetric extraction). The high suppression score (0.70) reflects the mandatory nature of the regulations, limiting user choice and requiring active enforcement.
 * The perspectival gap is stark: users (powerless, trapped) experience the system as a Snare, feeling its full extractive force (χ=0.825). In contrast, institutional beneficiaries perceive it as a Rope, as the negative power modifier makes the extraction feel like a net benefit (χ=-0.11). The analytical observer, accounting for all factors, correctly identifies the hybrid nature of the constraint as a Tangled Rope.
 * The constraint claims to be 'coordination', which is true from the beneficiary's perspective, but this claim masks the high extraction felt by victims, a typical feature of Tangled Ropes.
 *
 * * MANDATROPHY ANALYSIS:
 * The Tangled Rope classification prevents the system from mislabeling the regulation as pure extraction (Snare) by recognizing the coordination function provided to developers and regulators in maintaining the AI system and setting standards. This distinguishes it from purely exploitative systems where no genuine coordination benefit exists. This resolution is critical for policy analysis, as it acknowledges both the stated benefits and the hidden costs.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_openclaw_regulation,
    'Will the benefits of regulating OpenClaw outweigh the potential stifling of innovation?',
    'Longitudinal studies tracking the impact of regulation on AI development and adoption rates.',
    'If True: Sustainable AI ecosystem with user protection. If False: Stifled innovation and loss of competitive advantage.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(openclaw_regulation, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection (metric_substitution,
% extraction_accumulation) by providing measurements at multiple time points.
% Model how the constraint intensified or changed across the interval.
%
% Required for high-extraction constraints (base_extractiveness > 0.46).
% Use at least 3 time points (T=0, midpoint, T=end) for each tracked metric.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(openclaw_regulation_tr_t0, openclaw_regulation, theater_ratio, 0, 0.10).
narrative_ontology:measurement(openclaw_regulation_tr_t5, openclaw_regulation, theater_ratio, 5, 0.20).
narrative_ontology:measurement(openclaw_regulation_tr_t10, openclaw_regulation, theater_ratio, 10, 0.30).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(openclaw_regulation_ex_t0, openclaw_regulation, base_extractiveness, 0, 0.35).
narrative_ontology:measurement(openclaw_regulation_ex_t5, openclaw_regulation, base_extractiveness, 5, 0.45).
narrative_ontology:measurement(openclaw_regulation_ex_t10, openclaw_regulation, base_extractiveness, 10, 0.55).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% Coordination type (enables Boltzmann floor + complexity offset)
% Valid types: information_standard, resource_allocation,
%              enforcement_mechanism, global_infrastructure
narrative_ontology:coordination_type(openclaw_regulation, enforcement_mechanism).

% Boltzmann floor override (only if domain knowledge justifies)
% Value must be in [0.0, 1.0]
% narrative_ontology:boltzmann_floor_override(openclaw_regulation, 0.0).

% Network relationships (structural influence edges)
% Declare when constraints share regulatory domain, causal dependency,
% or institutional coupling.
% narrative_ontology:affects_constraint(openclaw_regulation, other_constraint_id).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: openscholar_peer_review
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2024-02-29
% ============================================================================

:- module(constraint_openscholar_peer_review, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: openscholar_peer_review
 * human_readable: Traditional Academic Peer Review
 * domain: technological
 * * SUMMARY:
 * Traditional academic peer review, where experts assess research before publication, acts as a quality control mechanism. The OpenScholar AI model aims to replicate or augment this process, but the inherent extraction (time commitment, potential bias) and suppression (alternative publication venues discouraged) remain.
 * * KEY AGENTS:
 * - Researcher: Subject (Powerless)
 * - Journal Editor: Beneficiary (Institutional)
 * - Scientific Community: Auditor (Analytical)
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% Numerical anchors for v3.4 thresholds
domain_priors:base_extractiveness(openscholar_peer_review, 0.55). % Mountain suppression <= 0.05, Rope extraction <= 0.15, Snare extraction >= 0.46
domain_priors:suppression_score(openscholar_peer_review, 0.70).   % Structural property (raw, unscaled). Only extractiveness is scaled (by power and scope).
domain_priors:theater_ratio(openscholar_peer_review, 0.30).       % Piton detection (>= 0.70)

% Constraint metric facts — primary keys used by the classification engine.
% These mirror domain_priors values using the metric key names from config.pl.
narrative_ontology:constraint_metric(openscholar_peer_review, extractiveness, 0.55).
narrative_ontology:constraint_metric(openscholar_peer_review, suppression_requirement, 0.70).
narrative_ontology:constraint_metric(openscholar_peer_review, theater_ratio, 0.30).

% Binary flags
% narrative_ontology:has_sunset_clause(openscholar_peer_review).      % Mandatory if Scaffold
% domain_priors:requires_active_enforcement(openscholar_peer_review). % Required for Tangled Rope

% Structural property derivation hooks:
narrative_ontology:constraint_beneficiary(openscholar_peer_review, academic_journals).
narrative_ontology:constraint_victim(openscholar_peer_review, researchers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   Power (P) and Scope (S) both affect effective extraction.
   Scope modifiers: local=0.8, regional=0.9, national=1.0,
                    continental=1.1, global=1.2, universal=1.0.
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE/MOUNTAIN)
% High extraction felt as an immutable limit or predatory trap.
% NOTE: This may be upgraded to 'organized' power if a critical mass of victims exists.
constraint_indexing:constraint_classification(openscholar_peer_review, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(global))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Viewed as essential infrastructure or coordination.
constraint_indexing:constraint_classification(openscholar_peer_review, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(global))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER
% Default analytical context (civilizational/analytical/global).
% This perspective is used by the bridge to derive constraint_claim.
% Type should reflect what the metrics compute: mountain, rope, tangled_rope, snare, scaffold, or piton.
constraint_indexing:constraint_classification(openscholar_peer_review, tangled_rope,
    context(agent_power(analytical),
            time_horizon(civilizational),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(openscholar_peer_review_tests).

test(perspectival_gap) :-
    % Verify there is a perspectival gap between powerless and institutional.
    constraint_indexing:constraint_classification(openscholar_peer_review, TypePowerless, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(openscholar_peer_review, TypeInstitutional, context(agent_power(institutional), _, _, _)),
    TypePowerless \= TypeInstitutional.

test(threshold_validation) :-
    config:param(extractiveness_metric_name, ExtMetricName),
    narrative_ontology:constraint_metric(openscholar_peer_review, ExtMetricName, E),
    (E =< 0.05 -> true ; E >= 0.46). % Ensures it's either a Mountain or high-extraction Snare/Tangled.

:- end_tests(openscholar_peer_review_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * Researchers (powerless, trapped) feel the extraction of peer review as a snare because it requires significant time and effort with no guarantee of publication. Journal editors (institutional, mobile) see it as a necessary rope for maintaining quality and prestige. The analytical observer, considering the broader system, recognizes the tangled rope nature: it provides coordination (quality control) but also extracts from researchers and suppresses alternative publication methods. The perspectival gap arises because researchers directly experience the costs, while editors benefit from the system's stability.
 * * MANDATROPHY ANALYSIS:
 * The Tangled Rope classification prevents mislabeling as pure extraction (Snare) by recognizing the coordination function of peer review – ensuring a baseline level of scientific rigor and preventing the unchecked proliferation of unsubstantiated claims. It prevents mislabeling as pure coordination (Rope) by acknowledging the inherent asymmetric power dynamics and extraction of labor from researchers.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

% omega_variable(ID, Question, Resolution_Mechanism, Impact, Confidence).
omega_variable(
    omega_openscholar_peer_review,
    'To what extent does peer review genuinely improve the quality of published research, versus merely filtering for conformity?',
    'Longitudinal studies comparing peer-reviewed publications to those published outside the system, controlling for methodology and impact.',
    'If peer review significantly improves quality, the constraint is more justifiable. If it mainly enforces conformity, the extraction becomes more problematic.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

% Required for external script parsing
narrative_ontology:interval(openscholar_peer_review, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Temporal data enables drift detection (metric_substitution,
% extraction_accumulation) by providing measurements at multiple time points.
% Model how the constraint intensified or changed across the interval.
%
% Required for high-extraction constraints (base_extractiveness > 0.46).
% Use at least 3 time points (T=0, midpoint, T=end) for each tracked metric.
%
% Theater ratio over time (triggers metric_substitution detection):
narrative_ontology:measurement(openscholar_peer_review_tr_t0, openscholar_peer_review, theater_ratio, 0, 0.20).
narrative_ontology:measurement(openscholar_peer_review_tr_t5, openscholar_peer_review, theater_ratio, 5, 0.30).
narrative_ontology:measurement(openscholar_peer_review_tr_t10, openscholar_peer_review, theater_ratio, 10, 0.30).

% Extraction over time (triggers extraction_accumulation detection):
narrative_ontology:measurement(openscholar_peer_review_ex_t0, openscholar_peer_review, base_extractiveness, 0, 0.50).
narrative_ontology:measurement(openscholar_peer_review_ex_t5, openscholar_peer_review, base_extractiveness, 5, 0.55).
narrative_ontology:measurement(openscholar_peer_review_ex_t10, openscholar_peer_review, base_extractiveness, 10, 0.55).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: opioid_political_realignment_2026
% ============================================================================
% Version: 5.2 (Deferential Realism Core + Boltzmann + Purity + Network)
% Logic: 5.2 (Indexed Tuple P,T,E,S + Coupling + Purity + Network Drift)
% Generated: 2024-07-15
% ============================================================================

:- module(constraint_opioid_realignment, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:constraint_beneficiary/2,
    narrative_ontology:constraint_victim/2,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:affects_constraint/2,
    narrative_ontology:coordination_type/2,
    narrative_ontology:boltzmann_floor_override/2,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: opioid_political_realignment_2026
 * human_readable: Opioid-Induced Political Capture
 * domain: political/economic/social
 * * SUMMARY:
 * This constraint tracks the causal link between pharmaceutical extraction (opioid
 * marketing) and subsequent political realignment in the United States.
 * Quasi-exogenous exposure to the epidemic created economic hardship and dependency
 * on public transfers, which crystallized into a durable Republican vote share
 * increase (approx. 4.5 percentage points per std-dev increase by 2022).
 * * KEY AGENTS:
 * - [Affected Communities]: Subject (Powerless) - Trapped in cycles of mortality and economic decline.
 * - [Political Incumbents]: Beneficiary (Institutional) - Gaining additional House seats and vote share.
 * - [Litigants/Researchers]: Auditor (Analytical) - Uncovering the Purdue Pharma records and causal links.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% High extraction (0.68) due to the "quasi-exogenous" predatory marketing documented in records.
domain_priors:base_extractiveness(opioid_political_realignment_2026, 0.68).

% High suppression (0.72) of alternatives; economic hardship restricts exit options for affected populations.
domain_priors:suppression_score(opioid_political_realignment_2026, 0.72).

% Moderate theater (0.35) initially, as the "marketing" masqueraded as medicine (functional coordination).
domain_priors:theater_ratio(opioid_political_realignment_2026, 0.35).

% Constraint metric facts — primary keys used by the classification engine.
narrative_ontology:constraint_metric(opioid_political_realignment_2026, extractiveness, 0.68).
narrative_ontology:constraint_metric(opioid_political_realignment_2026, suppression_requirement, 0.72).
narrative_ontology:constraint_metric(opioid_political_realignment_2026, theater_ratio, 0.35).

% Constraint self-claim: Beneficiaries frame the political shift as a natural
% coordination around shared values, masking the extractive origins.
narrative_ontology:constraint_claim(opioid_political_realignment_2026, coordination).

% Binary flags & Structural properties for Tangled Rope classification
% Enforcement is political/structural: the machinery that translates votes into
% power and maintains the resulting status quo constitutes active enforcement.
domain_priors:requires_active_enforcement(opioid_political_realignment_2026).

% Structural property derivation hooks (required for Tangled Rope):
% has_coordination_function/1 is derived from constraint_beneficiary/2
% has_asymmetric_extraction/1 is derived from constraint_victim/2
narrative_ontology:constraint_beneficiary(opioid_political_realignment_2026, political_incumbents).
narrative_ontology:constraint_victim(opioid_political_realignment_2026, affected_communities).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   χ = ε × π(P) × σ(S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% The epidemic is a predatory trap. Withdrawal and economic ruin remove exit options.
constraint_indexing:constraint_classification(opioid_political_realignment_2026, snare,
    context(agent_power(powerless),
            time_horizon(biographical),
            exit_options(trapped),
            spatial_scope(national))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% Political parties view the realignment as a "natural" coordination around shared
% grievances or "common sense" platform shifts, facilitating electoral success.
constraint_indexing:constraint_classification(opioid_political_realignment_2026, rope,
    context(agent_power(institutional),
            time_horizon(generational),
            exit_options(mobile),
            spatial_scope(national))).

% PERSPECTIVE 3: THE ANALYTICAL OBSERVER (TANGLED ROPE)
% Detects the hybrid nature: a coordination around public transfers (Rope)
% entangled with predatory pharmaceutical extraction (Snare).
constraint_indexing:constraint_classification(opioid_political_realignment_2026, tangled_rope,
    context(agent_power(analytical),
            time_horizon(historical),
            exit_options(analytical),
            spatial_scope(global))).

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(opioid_realignment_tests).

test(perspectival_gap) :-
    % Verify the Subject sees a Snare while the Beneficiary sees a Rope.
    constraint_indexing:constraint_classification(opioid_political_realignment_2026, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(opioid_political_realignment_2026, rope, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(opioid_political_realignment_2026, tangled_rope, context(agent_power(analytical), _, _, _)).

test(tangled_rope_structural_properties_present) :-
    % Verify all three required properties for Tangled Rope are declared.
    narrative_ontology:constraint_beneficiary(opioid_political_realignment_2026, _),
    narrative_ontology:constraint_victim(opioid_political_realignment_2026, _),
    domain_priors:requires_active_enforcement(opioid_political_realignment_2026).

:- end_tests(opioid_realignment_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The extraction score (0.68) is anchored in the "quasi-exogenous" nature of the marketing—
 * it was not a response to existing pain, but a manufactured demand. The suppression (0.72)
 * reflects the combined chemical dependency and economic collapse that traps victims.
 * The Perspectival Gap is extreme: what the institutional agent views as a "realigned
 * electorate" (coordination), the subject experiences as a "mortality trap" (extraction).
 *
 * MANDATROPHY ANALYSIS:
 * The Tangled Rope classification is necessary because the realignment isn't just
 * random death; it's the creation of a new political feedback loop involving
 * public transfer dependency. This creates a "forced coordination" function that
 * benefits a political group, which is a classic Tangled Rope signature. Without
 * this classification, the system would misread the political coordination as
 * either benign (Rope) or the entire system as pure predation (Snare), missing
 * the hybrid, self-reinforcing nature of the constraint.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_causality_depth,
    'To what extent is the realignment "sticky" if the pharmaceutical extraction is removed?',
    'Analysis of 2024-2030 voting patterns in post-settlement litigation zones.',
    'If vote share persists, it indicates a permanent cultural shift (Mountain); if it reverts, it was primarily a Snare-driven effect.',
    confidence_without_resolution(high)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(opioid_political_realignment_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Required for high-extraction (0.68 > 0.46).
% Interval spans from early 2000s (T=0) to 2022 (T=10).

% Theater ratio: Increases as the medical justification for marketing
% (functional) is replaced by the "theatrical" persistence of the political divide.
narrative_ontology:measurement(opioid_tr_t0, opioid_political_realignment_2026, theater_ratio, 0, 0.15).
narrative_ontology:measurement(opioid_tr_t5, opioid_political_realignment_2026, theater_ratio, 5, 0.25).
narrative_ontology:measurement(opioid_tr_t10, opioid_political_realignment_2026, theater_ratio, 10, 0.35).

% Extraction: Increases as the opioid exposure accumulates and
% translates into "additional House seats" (political rent-seeking).
narrative_ontology:measurement(opioid_ex_t0, opioid_political_realignment_2026, base_extractiveness, 0, 0.30).
narrative_ontology:measurement(opioid_ex_t5, opioid_political_realignment_2026, base_extractiveness, 5, 0.52).
narrative_ontology:measurement(opioid_ex_t10, opioid_political_realignment_2026, base_extractiveness, 10, 0.68).

/* ==========================================================================
   9. BOLTZMANN & NETWORK DATA (v5.0-5.2)
   ========================================================================== */

% The coordination type is the political system itself, which acts as an
% enforcement mechanism for the new electoral alignment.
narrative_ontology:coordination_type(opioid_political_realignment_2026, enforcement_mechanism).

% This constraint is structurally coupled with the general economic decline
% of the affected regions, creating a feedback loop.
narrative_ontology:affects_constraint(opioid_political_realignment_2026, rural_economic_decline).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */% ============================================================================
% CONSTRAINT STORY: other_peoples_troubles_2026
% ============================================================================
% Version: 3.4 (Deferential Realism Core)
% Logic: 3.3 (Indexed Tuple P,T,E,S)
% Generated: 2026-02-05
% ============================================================================

:- module(constraint_other_troubles, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:theater_ratio/2,
    domain_priors:requires_active_enforcement/1,
    narrative_ontology:has_sunset_clause/1,
    narrative_ontology:constraint_metric/3,
    narrative_ontology:interval/3,
    narrative_ontology:measurement/5,
    constraint_indexing:constraint_classification/3.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: other_peoples_troubles_2026
 * human_readable: The Asymmetry of Vicarious Resilience
 * domain: social/psychological
 * * SUMMARY:
 * This constraint maps the psychological distance that allows observers to 
 * "bear" the suffering of others with ease. This "strength" functions as a 
 * high-extraction filter that suppresses the urgency of the victim's distress 
 * to maintain the observer's emotional or social stability.
 * * KEY AGENTS:
 * - [The Sufferer]: Subject (Powerless) - Experiencing the actual "trouble" 
 * as a physical or economic snare.
 * - [The Observer]: Beneficiary (Institutional) - Possesses the "strength" 
 * (indifference) to bear the situation without personal cost.
 * - [The Moral Philosopher]: Auditor (Analytical) - Identifies the 
 * performative nature of this stoicism.
 */

/* ==========================================================================
   2. BASE PROPERTIES (DOMAIN PRIORS)
   ========================================================================== */

% High extraction (0.75); the observer's "strength" extracts the social 
% impetus for aid, leaving the sufferer isolated.
domain_priors:base_extractiveness(other_peoples_troubles_2026, 0.75). 

% High suppression (0.80); the comfort of the observer suppresses the 
% signal of the sufferer's crisis.
domain_priors:suppression_score(other_peoples_troubles_2026, 0.80).   

% High theater ratio (0.85); vicarious "strength" is often a performative 
% stoicism that masks a lack of functional empathy.
domain_priors:theater_ratio(other_peoples_troubles_2026, 0.85).       

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(other_peoples_troubles_2026, extractiveness, 0.75).
narrative_ontology:constraint_metric(other_peoples_troubles_2026, suppression_requirement, 0.8).
narrative_ontology:constraint_metric(other_peoples_troubles_2026, theater_ratio, 0.85).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (P, T, E, S)
   ========================================================================== */

% PERSPECTIVE 1: THE SUBJECT (SNARE)
% For the one in trouble, the situation is a snare: they are trapped in 
% suffering while the "strength" of others offers no functional escape.
constraint_indexing:constraint_classification(other_peoples_troubles_2026, snare, 
    context(agent_power(powerless), 
            time_horizon(biographical), 
            exit_options(trapped), 
            spatial_scope(local))).

% PERSPECTIVE 2: THE BENEFICIARY (ROPE)
% For the observer, their own "strength" is a rope: it coordinates their 
% emotional stability and prevents the "trouble" from disrupting their life.
constraint_indexing:constraint_classification(other_peoples_troubles_2026, rope, 
    context(agent_power(institutional), 
            time_horizon(generational), 
            exit_options(mobile), 
            spatial_scope(national))).

% PERSPECTIVE 3: THE SYSTEMS AUDITOR (PITON)
% The observer identifies a Piton: a non-functional, inertial indifference 
% that maintains the status quo through the theater of "resilience."
constraint_indexing:constraint_classification(other_peoples_troubles_2026, piton, 
    context(agent_power(analytical), 
            time_horizon(historical), 
            exit_options(analytical), 
            spatial_scope(global))) :-
    domain_priors:theater_ratio(other_peoples_troubles_2026, TR), TR > 0.70.

/* ==========================================================================
   4. VALIDATION TESTS
   ========================================================================== */

:- begin_tests(other_troubles_tests).

test(perspectival_gap) :-
    % Subject feels a Snare; Institutional observer maintains a Rope.
    constraint_indexing:constraint_classification(other_peoples_troubles_2026, snare, context(agent_power(powerless), _, _, _)),
    constraint_indexing:constraint_classification(other_peoples_troubles_2026, rope, context(agent_power(institutional), _, _, _)).

test(piton_detection) :-
    % Verify the Piton classification is active for high-theater observers.
    constraint_indexing:constraint_classification(other_peoples_troubles_2026, piton, _).

:- end_tests(other_troubles_tests).

/* ==========================================================================
   5. GENERATIVE COMMENTARY
   ========================================================================== */

/**
 * LOGIC RATIONALE:
 * The extraction score (0.75) reflects how "bearing" others' troubles 
 * essentially consumes the urgency of the problem to fund the observer's 
 * peace of mind. The theater_ratio (0.85) is high because the "strength" 
 * described by La Rochefoucauld is not an act of support, but a performative 
 * detachment.
 *
 * [RESOLVED MANDATROPHY]
 * The Piton classification prevents the system from mislabeling this 
 * indifference as a functional coordination mechanism (Rope) for 
 * societal stability.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω) - IRREDUCIBLE UNCERTAINTIES
   ========================================================================== */

omega_variable(
    omega_empathy_limit,
    'Is vicarious strength a fundamental Mountain of human cognition?',
    'Analysis of empathy-fatigue data vs. active-aid intervention rates.',
    'If aid scales with strength, it is a Rope; if it stays flat, it is a Snare.',
    confidence_without_resolution(medium)
).

/* ==========================================================================
   7. INTEGRATION HOOKS
   ========================================================================== */

narrative_ontology:interval(other_peoples_troubles_2026, 0, 10).

/* ==========================================================================
   8. TEMPORAL MEASUREMENTS (LIFECYCLE DRIFT DATA)
   ========================================================================== */

% Model the drift from "Potential Empathy" (T=0) to "Inertial Indifference" (T=10).

% Theater ratio: Increases as the "strength" to bear others' troubles 
% transitions from silent observation to performative stoicism.
narrative_ontology:measurement(ot_tr_t0, other_peoples_troubles_2026, theater_ratio, 0, 0.40).
narrative_ontology:measurement(ot_tr_t5, other_peoples_troubles_2026, theater_ratio, 5, 0.65).
narrative_ontology:measurement(ot_tr_t10, other_peoples_troubles_2026, theater_ratio, 10, 0.85).

% Extraction: Increases as the observer's refusal to act effectively 
% "extracts" the time and hope of the sufferer.
narrative_ontology:measurement(ot_ex_t0, other_peoples_troubles_2026, base_extractiveness, 0, 0.35).
narrative_ontology:measurement(ot_ex_t5, other_peoples_troubles_2026, base_extractiveness, 5, 0.60).
narrative_ontology:measurement(ot_ex_t10, other_peoples_troubles_2026, base_extractiveness, 10, 0.75).

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
% ============================================================================
% CONSTRAINT STORY: overton_window
% ============================================================================
% Generated: 2026-01-19
% Model: Gemini 2.0 Flash
% Source: Joseph P. Overton / Mackinac Center for Public Policy
% ============================================================================

:- module(constraint_overton_window, []).

:- use_module(constraint_indexing).
:- use_module(domain_priors).
:- use_module(narrative_ontology).

% --- Namespace Hooks (Required for loading) ---
:- multifile 
    domain_priors:base_extractiveness/2,
    domain_priors:suppression_score/2,
    domain_priors:requires_active_enforcement/1,
    constraint_indexing:constraint_classification/3,
    narrative_ontology:constraint_claim/2,
    narrative_ontology:constraint_metric/3,
    constraint_beneficiary/2,
    constraint_victim/2.

/* ==========================================================================
   1. NARRATIVE CONTEXT
   ========================================================================== */

/**
 * CONSTRAINT IDENTIFICATION
 * * constraint_id: overton_window
 * human_readable: The Overton Window (Window of Discourse)
 * domain: political/social
 * temporal_scope: Modern Era (Post-1990s formalization)
 * spatial_scope: National/Global
 * * SUMMARY:
 * The Overton Window represents the range of policies or ideas acceptable to the 
 * mainstream population at a given time. It constrains politicians to a narrow 
 * "window" of viable options; moving outside this window is perceived as 
 * political suicide. The window shifts not through political mandate, but 
 * through social and cultural pressure.
 * * KEY AGENTS:
 * - The Politician: Bound by the window to remain "electable."
 * - The Think Tank/Activist: Working to shift the window by promoting "unthinkable" ideas.
 * - The Median Voter: The unconscious anchor of the current window position.
 * * NARRATIVE ARC:
 * Initially, the window acts as a "Mountain" of social consensus. Activists use 
 * "Rope" strategies (pushing extreme positions to make moderate ones look viable). 
 * For those whose lives depend on "unthinkable" policies, the window functions 
 * as a "Snare," strangling the possibility of relief through the democratic process.
 */

/* ==========================================================================
   2. BASE PROPERTIES (The "Reality" Layer)
   ========================================================================== */

% Required for structural integration
narrative_ontology:interval(overton_interval, 0, 10).
narrative_ontology:constraint_claim(overton_window, mountain).

% Base extractiveness: 0.4 (Moderate)
% Rationale: It extracts political "agency" from the population. By narrowing 
% what is "thinkable," it funnels social energy into a limited set of 
% institutionalized outcomes that often benefit the status quo.
domain_priors:base_extractiveness(overton_window, 0.4).

% Suppression score: 0.8 (High)
% Rationale: Ideas outside the window are not just ignored; they are 
% actively punished through social shaming, "cancelation," or labels like 
% "extremist," making alternatives effectively invisible to the mainstream.
domain_priors:suppression_score(overton_window, 0.8).

% Constraint metric facts (bridge for classification engine)
narrative_ontology:constraint_metric(overton_window, extractiveness, 0.4).
narrative_ontology:constraint_metric(overton_window, suppression_requirement, 0.8).

% Enforcement: Emerges naturally from social mimetics but is actively 
% manipulated by media and think tanks.
domain_priors:requires_active_enforcement(overton_window).

% Metrics for Section 1 of the Executive Summary
% Beneficiaries: Institutional incumbents and "centrist" political parties.
constraint_beneficiary(overton_window, political_incumbents).

% Victims: Radical reformers and marginalized groups whose needs are "unthinkable."
constraint_victim(overton_window, radical_reformers).

/* ==========================================================================
   3. INDEXED CLASSIFICATIONS (Perspectival Truth)
   ========================================================================== */

/* --------------------------------------------------------------------------
   PERSPECTIVE 1: THE CAREER POLITICIAN - MOUNTAIN
   --------------------------------------------------------------------------
   
   WHO: institutional (An agent whose power depends on the window).
   WHEN: immediate (The current election cycle).
   WHERE: trapped (Cannot move outside the window without losing office).
   SCOPE: national.
   
   WHY THIS CLASSIFICATION:
   For the politician, the window is a Mountain. It is the fixed landscape 
   they must navigate. They do not see themselves as having the power to 
   change it; they can only stand on the "ground" that the public provides. 
   To them, the window is a law of political physics.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    overton_window,
    mountain,
    context(
        agent_power(institutional),
        time_horizon(immediate),
        exit_options(trapped),
        spatial_scope(national)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 2: THE IDEOLOGICAL STRATEGIST - ROPE
   --------------------------------------------------------------------------
   
   WHO: powerful (A think-tank director or media mogul).
   WHEN: generational (Willing to wait decades to shift the center).
   WHERE: mobile (Can fund multiple narratives or "flank" the window).
   SCOPE: global/national.
   
   WHY THIS CLASSIFICATION:
   For the strategist, the window is a Rope. It is a coordination mechanism 
   they can pull. By strategically introducing "Radical" or "Unthinkable" 
   ideas into the discourse, they pull the window in their direction, 
   eventually making their preferred policies "Sensible."
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    overton_window,
    rope,
    context(
        agent_power(powerful),
        time_horizon(generational),
        exit_options(mobile),
        spatial_scope(global)
    )
) :- !.

/* --------------------------------------------------------------------------
   PERSPECTIVE 3: THE URGENT REFORMER - SNARE
   --------------------------------------------------------------------------
   
   WHO: powerless (An activist for a non-mainstream cause).
   WHEN: immediate (The crisis is happening now).
   WHERE: constrained (Must use the existing political system).
   SCOPE: local/national.
   
   WHY THIS CLASSIFICATION:
   For the reformer whose survival depends on a policy currently outside 
   the window, the constraint is a Snare. They see the "sensible" center 
   ignoring a catastrophe because the solution is "politically impossible." 
   The window's narrowness strangles their ability to even speak the 
   necessary truth in a way that is heard.
   -------------------------------------------------------------------------- */

constraint_indexing:constraint_classification(
    overton_window,
    snare,
    context(
        agent_power(powerless),
        time_horizon(immediate),
        exit_options(constrained),
        spatial_scope(national)
    )
) :- !.

/* ==========================================================================
   4. TESTS
   ========================================================================== */

:- begin_tests(overton_window_tests).

test(multi_perspective_variance) :-
    constraint_indexing:constraint_classification(overton_window, Type1, context(agent_power(institutional), _, _, _)),
    constraint_indexing:constraint_classification(overton_window, Type2, context(agent_power(powerful), _, _, _)),
    constraint_indexing:constraint_classification(overton_window, Type3, context(agent_power(powerless), _, _, _)),
    Type1 \= Type2,
    Type2 \= Type3.

test(high_suppression_metric) :-
    % Overton window relies on suppressing "extremist" alternatives.
    domain_priors:suppression_score(overton_window, S),
    S >= 0.7.

test(time_horizon_shift) :-
    % Generational views see it as a tool (Rope), Immediate views as a wall (Mountain).
    constraint_indexing:constraint_classification(overton_window, rope, context(_, generational, _, _)).

:- end_tests(overton_window_tests).

/* ==========================================================================
   5. MODEL INTERPRETATION (Commentary)
   ========================================================================== */

/**
 * LLM GENERATION NOTES
 * * Model: Gemini 2.0 Flash
 * * KEY DECISIONS:
 * 1. SUPPRESSION (0.8): I set this very high because the Overton Window 
 * defines itself by what it excludes. Its primary function is the 
 * "shaming" of ideas outside its bounds.
 * 2. SNARE CLASSIFICATION: Essential for capturing the frustration of 
 * marginalized groups. If the "Sensible" window excludes your right to 
 * exist or eat, it is an active mechanism of harm.
 * 3. ROPE CLASSIFICATION: Reflects the reality that the window is 
 * plastic—it can be moved if one has enough time and media leverage.
 */

/* ==========================================================================
   6. OMEGA VARIABLES (Ω)
   ========================================================================== */

omega_variable(
    discursive_fracture_impact,
    "In a hyper-polarized digital era, does a single 'Overton Window' still exist, 
    or has it fractured into multiple, incompatible 'micro-windows'?",
    resolution_mechanism("Network analysis of cross-partisan idea sharing and sentiment echoes"),
    impact("If fractured: The 'Mountain' of social consensus collapses into tribal Ropes."),
    confidence_without_resolution(low)
).

/* ==========================================================================
   7. ALTERNATIVE ANALYSIS
   ========================================================================== */

/**
 * VIABLE ALTERNATIVES
 * * ALTERNATIVE 1: Radical Pluralism (All ideas debated on merit)
 * Viability: Low (Human cognitive limits prefer heuristics/mainstreams).
 * Suppression: High (Mainstream media frames this as "platforming hate").
 * * ALTERNATIVE 2: Direct Democracy (Bypassing the window via referenda)
 * Viability: Moderate.
 * * CONCLUSION:
 * The window is a Snare because it forces complex social problems into 
 * a binary or narrow "sensible" range, suppressing radical but 
 * effective alternatives.
 */

/* ==========================================================================
   8. INTEGRATION HOOKS
   ========================================================================== */

/**
 * TO USE THIS FILE:
 * 1. Load: ?- [constraint_overton_window].
 * 2. Report: ?- multi_index_report(overton_window).
 */

/* ==========================================================================
   END OF CONSTRAINT STORY
   ========================================================================== */
